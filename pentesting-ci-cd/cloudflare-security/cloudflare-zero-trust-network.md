# Cloudflare Zero Trust Network

{% hint style="success" %}
Learn & practice AWS Hacking:<img src="../../.gitbook/assets/image (1) (1).png" alt="" data-size="line">[**HackTricks Training AWS Red Team Expert (ARTE)**](https://training.hacktricks.xyz/courses/arte)<img src="../../.gitbook/assets/image (1) (1).png" alt="" data-size="line">\
Learn & practice GCP Hacking: <img src="../../.gitbook/assets/image (2).png" alt="" data-size="line">[**HackTricks Training GCP Red Team Expert (GRTE)**<img src="../../.gitbook/assets/image (2).png" alt="" data-size="line">](https://training.hacktricks.xyz/courses/grte)

<details>

<summary>Support HackTricks</summary>

* Check the [**subscription plans**](https://github.com/sponsors/carlospolop)!
* **Join the** üí¨ [**Discord group**](https://discord.gg/hRep4RUj7f) or the [**telegram group**](https://t.me/peass) or **follow** us on **Twitter** üê¶ [**@hacktricks\_live**](https://twitter.com/hacktricks\_live)**.**
* **Share hacking tricks by submitting PRs to the** [**HackTricks**](https://github.com/carlospolop/hacktricks) and [**HackTricks Cloud**](https://github.com/carlospolop/hacktricks-cloud) github repos.

</details>
{% endhint %}

En una cuenta de **Cloudflare Zero Trust Network** hay algunas **configuraciones y servicios** que se pueden configurar. En esta p√°gina vamos a **analizar las configuraciones relacionadas con la seguridad de cada secci√≥n:**

<figure><img src="../../.gitbook/assets/image (206).png" alt=""><figcaption></figcaption></figure>

### Analytics

* [ ] √ötil para **conocer el entorno**

### **Gateway**

* [ ] En **`Policies`** es posible generar pol√≠ticas para **restringir** por **DNS**, **red** o **HTTP** qui√©n puede acceder a las aplicaciones.
* Si se utiliza, se podr√≠an crear **pol√≠ticas** para **restringir** el acceso a sitios maliciosos.
* Esto es **solo relevante si se est√° utilizando un gateway**, si no, no hay raz√≥n para crear pol√≠ticas defensivas.

### Access

#### Applications

En cada aplicaci√≥n:

* [ ] Verificar **qui√©n** puede acceder a la aplicaci√≥n en las **Policies** y asegurarse de que **solo** los **usuarios** que **necesitan acceso** a la aplicaci√≥n puedan acceder.
* Para permitir el acceso se van a utilizar **`Access Groups`** (y se pueden establecer **reglas adicionales** tambi√©n)
* [ ] Verificar los **proveedores de identidad disponibles** y asegurarse de que **no sean demasiado abiertos**
* [ ] En **`Settings`**:
* [ ] Verificar que **CORS no est√© habilitado** (si est√° habilitado, verificar que sea **seguro** y que no est√© permitiendo todo)
* [ ] Las cookies deben tener el atributo **Strict Same-Site**, **HTTP Only** y **binding cookie** debe estar **habilitado** si la aplicaci√≥n es HTTP.
* [ ] Considerar habilitar tambi√©n **Browser rendering** para mejor **protecci√≥n. M√°s informaci√≥n sobre** [**remote browser isolation aqu√≠**](https://blog.cloudflare.com/cloudflare-and-remote-browser-isolation/)**.**

#### **Access Groups**

* [ ] Verificar que los grupos de acceso generados est√©n **correctamente restringidos** a los usuarios que deber√≠an permitir.
* [ ] Es especialmente importante verificar que el **grupo de acceso predeterminado no sea muy abierto** (no **est√© permitiendo demasiada gente**) ya que por **defecto** cualquier persona en ese **grupo** podr√° **acceder a las aplicaciones**.
* Tenga en cuenta que es posible dar **acceso** a **TODOS** y otras **pol√≠ticas muy abiertas** que no se recomiendan a menos que sea 100% necesario.

#### Service Auth

* [ ] Verificar que todos los tokens de servicio **expiren en 1 a√±o o menos**

#### Tunnels

TODO

### My Team

TODO

### Logs

* [ ] Podr√≠a buscar **acciones inesperadas** de los usuarios

### Settings

* [ ] Verificar el **tipo de plan**
* [ ] Es posible ver el **nombre del propietario de la tarjeta de cr√©dito**, **√∫ltimos 4 d√≠gitos**, **fecha de expiraci√≥n** y **direcci√≥n**
* [ ] Se recomienda **agregar una Expiraci√≥n de Asiento de Usuario** para eliminar usuarios que realmente no utilizan este servicio

{% hint style="success" %}
Learn & practice AWS Hacking:<img src="../../.gitbook/assets/image (1) (1).png" alt="" data-size="line">[**HackTricks Training AWS Red Team Expert (ARTE)**](https://training.hacktricks.xyz/courses/arte)<img src="../../.gitbook/assets/image (1) (1).png" alt="" data-size="line">\
Learn & practice GCP Hacking: <img src="../../.gitbook/assets/image (2).png" alt="" data-size="line">[**HackTricks Training GCP Red Team Expert (GRTE)**<img src="../../.gitbook/assets/image (2).png" alt="" data-size="line">](https://training.hacktricks.xyz/courses/grte)

<details>

<summary>Support HackTricks</summary>

* Check the [**subscription plans**](https://github.com/sponsors/carlospolop)!
* **Join the** üí¨ [**Discord group**](https://discord.gg/hRep4RUj7f) or the [**telegram group**](https://t.me/peass) or **follow** us on **Twitter** üê¶ [**@hacktricks\_live**](https://twitter.com/hacktricks\_live)**.**
* **Share hacking tricks by submitting PRs to the** [**HackTricks**](https://github.com/carlospolop/hacktricks) and [**HackTricks Cloud**](https://github.com/carlospolop/hacktricks-cloud) github repos.

</details>
{% endhint %}
