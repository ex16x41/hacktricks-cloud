# Cloudflare Zero Trust Network

{% hint style="success" %}
Learn & practice AWS Hacking:<img src="../../.gitbook/assets/image (1) (1).png" alt="" data-size="line">[**HackTricks Training AWS Red Team Expert (ARTE)**](https://training.hacktricks.xyz/courses/arte)<img src="../../.gitbook/assets/image (1) (1).png" alt="" data-size="line">\
Learn & practice GCP Hacking: <img src="../../.gitbook/assets/image (2).png" alt="" data-size="line">[**HackTricks Training GCP Red Team Expert (GRTE)**<img src="../../.gitbook/assets/image (2).png" alt="" data-size="line">](https://training.hacktricks.xyz/courses/grte)

<details>

<summary>Support HackTricks</summary>

* Check the [**subscription plans**](https://github.com/sponsors/carlospolop)!
* **Join the** üí¨ [**Discord group**](https://discord.gg/hRep4RUj7f) or the [**telegram group**](https://t.me/peass) or **follow** us on **Twitter** üê¶ [**@hacktricks\_live**](https://twitter.com/hacktricks\_live)**.**
* **Share hacking tricks by submitting PRs to the** [**HackTricks**](https://github.com/carlospolop/hacktricks) and [**HackTricks Cloud**](https://github.com/carlospolop/hacktricks-cloud) github repos.

</details>
{% endhint %}

Em uma conta **Cloudflare Zero Trust Network** existem algumas **configura√ß√µes e servi√ßos** que podem ser configurados. Nesta p√°gina, vamos **analisar as configura√ß√µes relacionadas √† seguran√ßa de cada se√ß√£o:**

<figure><img src="../../.gitbook/assets/image (206).png" alt=""><figcaption></figcaption></figure>

### Analytics

* [ ] √ötil para **conhecer o ambiente**

### **Gateway**

* [ ] Em **`Policies`** √© poss√≠vel gerar pol√≠ticas para **restringir** por **DNS**, **rede** ou **HTTP** quem pode acessar aplica√ß√µes.
* Se utilizado, **pol√≠ticas** podem ser criadas para **restringir** o acesso a sites maliciosos.
* Isso √© **relevante apenas se um gateway estiver sendo usado**, caso contr√°rio, n√£o h√° raz√£o para criar pol√≠ticas defensivas.

### Access

#### Applications

Em cada aplica√ß√£o:

* [ ] Verifique **quem** pode acessar a aplica√ß√£o nas **Policies** e verifique se **apenas** os **usu√°rios** que **precisam de acesso** √† aplica√ß√£o podem acessar.
* Para permitir o acesso, **`Access Groups`** ser√£o utilizados (e **regras adicionais** tamb√©m podem ser definidas)
* [ ] Verifique os **provedores de identidade dispon√≠veis** e certifique-se de que **n√£o est√£o muito abertos**
* [ ] Em **`Settings`**:
* [ ] Verifique se **CORS n√£o est√° habilitado** (se estiver habilitado, verifique se √© **seguro** e n√£o est√° permitindo tudo)
* [ ] Os cookies devem ter o atributo **Strict Same-Site**, **HTTP Only** e o **binding cookie** deve estar **habilitado** se a aplica√ß√£o for HTTP.
* [ ] Considere habilitar tamb√©m o **rendering do navegador** para melhor **prote√ß√£o. Mais informa√ß√µes sobre** [**isolamento de navegador remoto aqui**](https://blog.cloudflare.com/cloudflare-and-remote-browser-isolation/)**.**

#### **Access Groups**

* [ ] Verifique se os grupos de acesso gerados est√£o **corretamente restritos** aos usu√°rios que devem permitir.
* [ ] √â especialmente importante verificar se o **grupo de acesso padr√£o n√£o est√° muito aberto** (n√£o est√° **permitindo muitas pessoas**) pois por **padr√£o** qualquer um nesse **grupo** poder√° **acessar aplica√ß√µes**.
* Note que √© poss√≠vel dar **acesso** a **TODOS** e outras **pol√≠ticas muito abertas** que n√£o s√£o recomendadas, a menos que 100% necess√°rio.

#### Service Auth

* [ ] Verifique se todos os tokens de servi√ßo **expiram em 1 ano ou menos**

#### Tunnels

TODO

### My Team

TODO

### Logs

* [ ] Voc√™ pode procurar por **a√ß√µes inesperadas** de usu√°rios

### Settings

* [ ] Verifique o **tipo de plano**
* [ ] √â poss√≠vel ver o **nome do propriet√°rio do cart√£o de cr√©dito**, **√∫ltimos 4 d√≠gitos**, **data de expira√ß√£o** e **endere√ßo**
* [ ] √â recomendado **adicionar uma Expira√ß√£o de Assento de Usu√°rio** para remover usu√°rios que realmente n√£o utilizam este servi√ßo

{% hint style="success" %}
Learn & practice AWS Hacking:<img src="../../.gitbook/assets/image (1) (1).png" alt="" data-size="line">[**HackTricks Training AWS Red Team Expert (ARTE)**](https://training.hacktricks.xyz/courses/arte)<img src="../../.gitbook/assets/image (1) (1).png" alt="" data-size="line">\
Learn & practice GCP Hacking: <img src="../../.gitbook/assets/image (2).png" alt="" data-size="line">[**HackTricks Training GCP Red Team Expert (GRTE)**<img src="../../.gitbook/assets/image (2).png" alt="" data-size="line">](https://training.hacktricks.xyz/courses/grte)

<details>

<summary>Support HackTricks</summary>

* Check the [**subscription plans**](https://github.com/sponsors/carlospolop)!
* **Join the** üí¨ [**Discord group**](https://discord.gg/hRep4RUj7f) or the [**telegram group**](https://t.me/peass) or **follow** us on **Twitter** üê¶ [**@hacktricks\_live**](https://twitter.com/hacktricks\_live)**.**
* **Share hacking tricks by submitting PRs to the** [**HackTricks**](https://github.com/carlospolop/hacktricks) and [**HackTricks Cloud**](https://github.com/carlospolop/hacktricks-cloud) github repos.

</details>
{% endhint %}
