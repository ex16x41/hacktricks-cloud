# Cloudflare Security

{% hint style="success" %}
Learn & practice AWS Hacking:<img src="/.gitbook/assets/image.png" alt="" data-size="line">[**HackTricks Training AWS Red Team Expert (ARTE)**](https://training.hacktricks.xyz/courses/arte)<img src="/.gitbook/assets/image.png" alt="" data-size="line">\
Learn & practice GCP Hacking: <img src="/.gitbook/assets/image (2).png" alt="" data-size="line">[**HackTricks Training GCP Red Team Expert (GRTE)**<img src="/.gitbook/assets/image (2).png" alt="" data-size="line">](https://training.hacktricks.xyz/courses/grte)

<details>

<summary>Support HackTricks</summary>

* [**κµ¬λ… ν”λ**](https://github.com/sponsors/carlospolop)μ„ ν™•μΈν•μ„Έμ”!
* π’¬ [**Discord κ·Έλ£Ή**](https://discord.gg/hRep4RUj7f) λλ” [**telegram κ·Έλ£Ή**](https://t.me/peass)μ— κ°€μ…ν•κ±°λ‚ **Twitter** π¦ [**@hacktricks\_live**](https://twitter.com/hacktricks\_live)μ„ ν”λ΅μ°ν•μ„Έμ”.
* **PRμ„ μ μ¶ν•μ—¬** [**HackTricks**](https://github.com/carlospolop/hacktricks) λ° [**HackTricks Cloud**](https://github.com/carlospolop/hacktricks-cloud) github μ €μ¥μ†μ— ν•΄ν‚Ή νΈλ¦­μ„ κ³µμ ν•μ„Έμ”.

</details>
{% endhint %}

Cloudflare κ³„μ •μ—λ” κµ¬μ„±ν•  μ μλ” **μΌλ° μ„¤μ • λ° μ„λΉ„μ¤**κ°€ μμµλ‹λ‹¤. μ΄ νμ΄μ§€μ—μ„λ” κ° μ„Ήμ…μ **λ³΄μ• κ΄€λ ¨ μ„¤μ •μ„ λ¶„μ„**ν•  κ²ƒμ…λ‹λ‹¤:

<figure><img src="../../.gitbook/assets/image (117).png" alt=""><figcaption></figcaption></figure>

## Websites

λ‹¤μμ„ κ²€ν† ν•μ„Έμ”:

{% content-ref url="cloudflare-domains.md" %}
[cloudflare-domains.md](cloudflare-domains.md)
{% endcontent-ref %}

### Domain Registration

* [ ] **`Transfer Domains`**μ—μ„ λ„λ©”μΈμ„ μ „μ†΅ν•  μ μ—†λ”μ§€ ν™•μΈν•μ„Έμ”.

λ‹¤μμ„ κ²€ν† ν•μ„Έμ”:

{% content-ref url="cloudflare-domains.md" %}
[cloudflare-domains.md](cloudflare-domains.md)
{% endcontent-ref %}

## Analytics

_κµ¬μ„± λ³΄μ• κ²€ν† λ¥Ό μ„ν• ν•­λ©μ„ μ°Ύμ„ μ μ—†μ—μµλ‹λ‹¤._

## Pages

κ° Cloudflare νμ΄μ§€μ—μ„:

* [ ] **`Build log`**μ—μ„ **λ―Όκ°ν• μ •λ³΄**λ¥Ό ν™•μΈν•μ„Έμ”.
* [ ] νμ΄μ§€μ— ν• λ‹Ήλ **Github repository**μ—μ„ **λ―Όκ°ν• μ •λ³΄**λ¥Ό ν™•μΈν•μ„Έμ”.
* [ ] **workflow command injection** λλ” `pull_request_target` μ·¨μ•½μ μ„ ν†µν• github repo μ†μƒ κ°€λ¥μ„±μ„ ν™•μΈν•μ„Έμ”. μμ„Έν• λ‚΄μ©μ€ [**Github Security page**](../github-security/)μ—μ„ ν™•μΈν•μ„Έμ”.
* [ ] `/fuctions` λ””λ ‰ν† λ¦¬(μλ” κ²½μ°)μ—μ„ **μ·¨μ•½ν• ν•¨μ**λ¥Ό ν™•μΈν•κ³ , `_redirects` νμΌ(μλ” κ²½μ°)μ—μ„ **λ¦¬λ””λ ‰μ…**μ„ ν™•μΈν•λ©°, `_headers` νμΌ(μλ” κ²½μ°)μ—μ„ **μλ» κµ¬μ„±λ ν—¤λ”**λ¥Ό ν™•μΈν•μ„Έμ”.
* [ ] **μ½”λ“**μ— μ ‘κ·Όν•  μ μλ‹¤λ©΄ **blackbox** λλ” **whitebox**λ¥Ό ν†µν•΄ **μ›Ή νμ΄μ§€**μ **μ·¨μ•½μ **μ„ ν™•μΈν•μ„Έμ”.
* [ ] κ° νμ΄μ§€μ `/<page_id>/pages/view/blocklist/settings/functions` μ„Έλ¶€ μ •λ³΄μ—μ„ **`Environment variables`**μ— **λ―Όκ°ν• μ •λ³΄**κ°€ μλ”μ§€ ν™•μΈν•μ„Έμ”.
* [ ] μ„Έλ¶€ μ •λ³΄ νμ΄μ§€μ—μ„ **λΉλ“ λ…λ Ήμ–΄**μ™€ **λ£¨νΈ λ””λ ‰ν† λ¦¬**λ¥Ό ν™•μΈν•μ—¬ νμ΄μ§€λ¥Ό μ†μƒμ‹ν‚¬ μ μλ” **μ μ¬μ  μΈμ μ…**μ„ ν™•μΈν•μ„Έμ”.

## **Workers**

κ° Cloudflare workerμ—μ„ ν™•μΈν•μ„Έμ”:

* [ ] νΈλ¦¬κ±°: workerλ¥Ό νΈλ¦¬κ±°ν•λ” κ²ƒμ€ λ¬΄μ—‡μΈκ°€μ”? **μ‚¬μ©μκ°€ λ°μ΄ν„°λ¥Ό μ „μ†΅**ν•μ—¬ workerκ°€ **μ‚¬μ©**ν•  μ μλ‚μ”?
* [ ] **`Settings`**μ—μ„ **`Variables`**μ— **λ―Όκ°ν• μ •λ³΄**κ°€ ν¬ν•¨λμ–΄ μλ”μ§€ ν™•μΈν•μ„Έμ”.
* [ ] **workerμ μ½”λ“**λ¥Ό ν™•μΈν•κ³  **μ·¨μ•½μ **μ„ κ²€μƒ‰ν•μ„Έμ”(νΉν μ‚¬μ©μκ°€ μ…λ ¥μ„ κ΄€λ¦¬ν•  μ μλ” λ¶€λ¶„).
* SSRFκ°€ μ μ–΄ν•  μ μλ” νμ΄μ§€λ¥Ό λ°ν™ν•λ”μ§€ ν™•μΈν•μ„Έμ”.
* svg μ΄λ―Έμ§€ λ‚΄μ—μ„ JSλ¥Ό μ‹¤ν–‰ν•λ” XSSλ¥Ό ν™•μΈν•μ„Έμ”.
* workerκ°€ λ‹¤λ¥Έ λ‚΄λ¶€ μ„λΉ„μ¤μ™€ μƒνΈ μ‘μ©ν•  μ μμµλ‹λ‹¤. μλ¥Ό λ“¤μ–΄, workerκ°€ μ…λ ¥μ—μ„ μ–»μ€ μ •λ³΄λ¥Ό μ €μ¥ν•λ” R2 λ²„ν‚·κ³Ό μƒνΈ μ‘μ©ν•  μ μμµλ‹λ‹¤. μ΄ κ²½μ°, workerκ°€ R2 λ²„ν‚·μ— λ€ν•΄ μ–΄λ–¤ κ¶ν•μ„ κ°€μ§€κ³  μλ”μ§€μ™€ μ‚¬μ©μμ μ…λ ¥μ—μ„ μ–΄λ–»κ² μ•…μ©λ  μ μλ”μ§€ ν™•μΈν•΄μ•Ό ν•©λ‹λ‹¤.

{% hint style="warning" %}
κΈ°λ³Έμ μΌλ΅ **Workerλ” `<worker-name>.<account>.workers.dev`μ™€ κ°™μ€ URLμ„ λ¶€μ—¬λ°›μµλ‹λ‹¤. μ‚¬μ©μλ” μ΄λ¥Ό **μ„λΈλ„λ©”μΈ**μΌλ΅ μ„¤μ •ν•  μ μμ§€λ§, μ›λ URLμ„ μ•κ³  μλ‹¤λ©΄ ν•­μƒ ν•΄λ‹Ή URLλ΅ μ ‘κ·Όν•  μ μμµλ‹λ‹¤.
{% endhint %}

## R2

κ° R2 λ²„ν‚·μ—μ„ ν™•μΈν•μ„Έμ”:

* [ ] **CORS Policy**λ¥Ό κµ¬μ„±ν•μ„Έμ”.

## Stream

TODO

## Images

TODO

## Security Center

* [ ] κ°€λ¥ν•λ‹¤λ©΄ **`Security Insights`** **μ¤μΊ”**κ³Ό **`Infrastructure`** **μ¤μΊ”**μ„ μ‹¤ν–‰ν•μ„Έμ”. μ΄λ” λ³΄μ• μΈ΅λ©΄μ—μ„ ν¥λ―Έλ΅μ΄ μ •λ³΄λ¥Ό **κ°•μ΅°**ν•  κ²ƒμ…λ‹λ‹¤.
* [ ] λ³΄μ• μλ»λ κµ¬μ„± λ° ν¥λ―Έλ΅μ΄ μ •λ³΄λ¥Ό **ν™•μΈ**ν•μ„Έμ”.

## Turnstile

TODO

## **Zero Trust**

{% content-ref url="cloudflare-zero-trust-network.md" %}
[cloudflare-zero-trust-network.md](cloudflare-zero-trust-network.md)
{% endcontent-ref %}

## Bulk Redirects

{% hint style="info" %}
[Dynamic Redirects](https://developers.cloudflare.com/rules/url-forwarding/dynamic-redirects/)μ™€ λ‹¬λ¦¬, [**Bulk Redirects**](https://developers.cloudflare.com/rules/url-forwarding/bulk-redirects/)λ” λ³Έμ§μ μΌλ΅ μ •μ μ…λ‹λ‹¤ β€” λ¬Έμμ—΄ λ€μ²΄ μ‘μ—…μ΄λ‚ μ •κ· ν‘ν„μ‹μ„ μ§€μ›ν•μ§€ μ•μµλ‹λ‹¤. κ·Έλ¬λ‚ URL μΌμΉ λ™μ‘κ³Ό λ°νƒ€μ„ λ™μ‘μ— μν–¥μ„ λ―ΈμΉλ” URL λ¦¬λ””λ ‰μ… λ§¤κ°λ³€μλ¥Ό κµ¬μ„±ν•  μ μμµλ‹λ‹¤.
{% endhint %}

* [ ] λ¦¬λ””λ ‰μ…μ **ν‘ν„μ‹**κ³Ό **μ”κµ¬ μ‚¬ν•­**μ΄ **νƒ€λ‹Ήν•μ§€** ν™•μΈν•μ„Έμ”.
* [ ] **λ―Όκ°ν• μ¨κ²¨μ§„ μ—”λ“ν¬μΈνΈ**λ¥Ό ν™•μΈν•μ—¬ ν¥λ―Έλ΅μ΄ μ •λ³΄λ¥Ό ν¬ν•¨ν•κ³  μλ”μ§€ ν™•μΈν•μ„Έμ”.

## Notifications

* [ ] **μ•λ¦Ό**μ„ ν™•μΈν•μ„Έμ”. λ‹¤μ μ•λ¦Όμ€ λ³΄μ•μ„ μ„ν•΄ κ¶μ¥λ©λ‹λ‹¤:
* `Usage Based Billing`
* `HTTP DDoS Attack Alert`
* `Layer 3/4 DDoS Attack Alert`
* `Advanced HTTP DDoS Attack Alert`
* `Advanced Layer 3/4 DDoS Attack Alert`
* `Flow-based Monitoring: Volumetric Attack`
* `Route Leak Detection Alert`
* `Access mTLS Certificate Expiration Alert`
* `SSL for SaaS Custom Hostnames Alert`
* `Universal SSL Alert`
* `Script Monitor New Code Change Detection Alert`
* `Script Monitor New Domain Alert`
* `Script Monitor New Malicious Domain Alert`
* `Script Monitor New Malicious Script Alert`
* `Script Monitor New Malicious URL Alert`
* `Script Monitor New Scripts Alert`
* `Script Monitor New Script Exceeds Max URL Length Alert`
* `Advanced Security Events Alert`
* `Security Events Alert`
* [ ] λ¨λ“  **λ€μƒ**μ„ ν™•μΈν•μ„Έμ”. μ›Ήν›… URLμ— **λ―Όκ°ν• μ •λ³΄**(κΈ°λ³Έ http μΈμ¦)κ°€ μμ„ μ μμµλ‹λ‹¤. λν• μ›Ήν›… URLμ΄ **HTTPS**λ¥Ό μ‚¬μ©ν•λ”μ§€ ν™•μΈν•μ„Έμ”.
* [ ] μ¶”κ°€ ν™•μΈμΌλ΅, **cloudflare μ•λ¦Όμ„ μ 3μμ—κ² κ°€μ¥**ν•μ—¬ **μ„ν—ν• κ²ƒμ„ μ£Όμ…**ν•  μ μλ”μ§€ ν™•μΈν•΄λ³΄μ„Έμ”.

## Manage Account

* [ ] **`Billing` -> `Payment info`**μ—μ„ **μ‹ μ©μΉ΄λ“ λ§μ§€λ§‰ 4μλ¦¬**, **λ§λ£** μ‹κ°„ λ° **μ²­κµ¬ μ£Όμ†**λ¥Ό ν™•μΈν•  μ μμµλ‹λ‹¤.
* [ ] **`Billing` -> `Subscriptions`**μ—μ„ κ³„μ •μ— μ‚¬μ©λ **ν”λ μ ν•**μ„ ν™•μΈν•  μ μμµλ‹λ‹¤.
* [ ] **`Members`**μ—μ„ κ³„μ •μ λ¨λ“  λ©¤λ²„μ™€ κ·Έλ“¤μ **μ—­ν• **μ„ ν™•μΈν•  μ μμµλ‹λ‹¤. ν”λ μ ν•μ΄ Enterpriseκ°€ μ•„λ‹ κ²½μ°, κ΄€λ¦¬μμ™€ μνΌ κ΄€λ¦¬μμ λ‘ κ°€μ§€ μ—­ν• λ§ μ΅΄μ¬ν•©λ‹λ‹¤. κ·Έλ¬λ‚ μ‚¬μ©λ **ν”λμ΄ Enterprise**μΈ κ²½μ°, [**λ” λ§μ€ μ—­ν• **](https://developers.cloudflare.com/fundamentals/account-and-billing/account-setup/account-roles)μ„ μ‚¬μ©ν•μ—¬ μµμ† κ¶ν• μ›μΉ™μ„ λ”°λ¥Ό μ μμµλ‹λ‹¤.
* λ”°λΌμ„ κ°€λ¥ν•λ‹¤λ©΄ **Enterprise ν”λ**μ„ μ‚¬μ©ν•λ” κ²ƒμ΄ **κ¶μ¥**λ©λ‹λ‹¤.
* [ ] Membersμ—μ„ **2FAλ¥Ό ν™μ„±ν™”ν•** **λ©¤λ²„**λ¥Ό ν™•μΈν•  μ μμµλ‹λ‹¤. **λ¨λ“ ** μ‚¬μ©μκ°€ μ΄λ¥Ό ν™μ„±ν™”ν•΄μ•Ό ν•©λ‹λ‹¤.

{% hint style="info" %}
λ‹¤ν–‰νλ„ **`Administrator`** μ—­ν• μ€ λ©¤λ²„μ‹­μ„ κ΄€λ¦¬ν•  κ¶ν•μ„ λ¶€μ—¬ν•μ§€ μ•μµλ‹λ‹¤(**κ¶ν•μ„ μƒμΉμ‹ν‚¤κ±°λ‚** μƒλ΅μ΄ λ©¤λ²„λ¥Ό μ΄λ€ν•  μ μ—†μ).
{% endhint %}

## DDoS Investigation

[μ΄ λ¶€λ¶„μ„ ν™•μΈν•μ„Έμ”](cloudflare-domains.md#cloudflare-ddos-protection).

{% hint style="success" %}
Learn & practice AWS Hacking:<img src="/.gitbook/assets/image.png" alt="" data-size="line">[**HackTricks Training AWS Red Team Expert (ARTE)**](https://training.hacktricks.xyz/courses/arte)<img src="/.gitbook/assets/image.png" alt="" data-size="line">\
Learn & practice GCP Hacking: <img src="/.gitbook/assets/image (2).png" alt="" data-size="line">[**HackTricks Training GCP Red Team Expert (GRTE)**<img src="/.gitbook/assets/image (2).png" alt="" data-size="line">](https://training.hacktricks.xyz/courses/grte)

<details>

<summary>Support HackTricks</summary>

* [**κµ¬λ… ν”λ**](https://github.com/sponsors/carlospolop)μ„ ν™•μΈν•μ„Έμ”!
* π’¬ [**Discord κ·Έλ£Ή**](https://discord.gg/hRep4RUj7f) λλ” [**telegram κ·Έλ£Ή**](https://t.me/peass)μ— κ°€μ…ν•κ±°λ‚ **Twitter** π¦ [**@hacktricks\_live**](https://twitter.com/hacktricks\_live)μ„ ν”λ΅μ°ν•μ„Έμ”.
* **PRμ„ μ μ¶ν•μ—¬** [**HackTricks**](https://github.com/carlospolop/hacktricks) λ° [**HackTricks Cloud**](https://github.com/carlospolop/hacktricks-cloud) github μ €μ¥μ†μ— ν•΄ν‚Ή νΈλ¦­μ„ κ³µμ ν•μ„Έμ”.

</details>
{% endhint %}
