# Cloudflare åŸŸå

<details>

{% hint style="success" %}
å­¦ä¹ å’Œå®è·µ AWS é»‘å®¢æŠ€æœ¯ï¼š<img src="/.gitbook/assets/image.png" alt="" data-size="line">[**HackTricks åŸ¹è®­ AWS çº¢é˜Ÿä¸“å®¶ (ARTE)**](https://training.hacktricks.xyz/courses/arte)<img src="/.gitbook/assets/image.png" alt="" data-size="line">\
å­¦ä¹ å’Œå®è·µ GCP é»‘å®¢æŠ€æœ¯ï¼š<img src="/.gitbook/assets/image (2).png" alt="" data-size="line">[**HackTricks åŸ¹è®­ GCP çº¢é˜Ÿä¸“å®¶ (GRTE)**<img src="/.gitbook/assets/image (2).png" alt="" data-size="line">](https://training.hacktricks.xyz/courses/grte)

<details>

<summary>æ”¯æŒ HackTricks</summary>

* æ£€æŸ¥[**è®¢é˜…è®¡åˆ’**](https://github.com/sponsors/carlospolop)!
* **åŠ å…¥** ğŸ’¬ [**Discord ç¾¤ç»„**](https://discord.gg/hRep4RUj7f) æˆ– [**ç”µæŠ¥ç¾¤ç»„**](https://t.me/peass) æˆ– **å…³æ³¨**æˆ‘ä»¬çš„ **Twitter** ğŸ¦ [**@hacktricks\_live**](https://twitter.com/hacktricks\_live)**.**
* é€šè¿‡å‘ [**HackTricks**](https://github.com/carlospolop/hacktricks) å’Œ [**HackTricks Cloud**](https://github.com/carlospolop/hacktricks-cloud) github ä»“åº“æäº¤ PR æ¥åˆ†äº«é»‘å®¢æŠ€å·§ã€‚

</details>
{% endhint %}

åœ¨ Cloudflare ä¸­é…ç½®çš„æ¯ä¸ª TLD ä¸­ï¼Œéƒ½å¯ä»¥é…ç½®ä¸€äº›**å¸¸è§„è®¾ç½®å’ŒæœåŠ¡**ã€‚åœ¨æœ¬é¡µä¸­ï¼Œæˆ‘ä»¬å°†**åˆ†ææ¯ä¸ªéƒ¨åˆ†ä¸å®‰å…¨ç›¸å…³çš„è®¾ç½®**ï¼š

<figure><img src="../../.gitbook/assets/image (101).png" alt=""><figcaption></figcaption></figure>

## æ¦‚è¿°

* [ ] äº†è§£è´¦æˆ·ä¸­æœåŠ¡çš„**ä½¿ç”¨æƒ…å†µ**
* [ ] æŸ¥æ‰¾**åŒºåŸŸ ID** å’Œ**è´¦æˆ· ID**

## åˆ†æ

* [ ] åœ¨**`å®‰å…¨`**ä¸­æ£€æŸ¥æ˜¯å¦æœ‰ä»»ä½•**é€Ÿç‡é™åˆ¶**

## DNS

* [ ] æ£€æŸ¥ DNS **è®°å½•**ä¸­çš„**æœ‰è¶£**ï¼ˆæ•æ„Ÿï¼Ÿï¼‰æ•°æ®
* [ ] æ£€æŸ¥å¯èƒ½åŒ…å«**æ•æ„Ÿä¿¡æ¯**çš„**å­åŸŸ**ï¼Œä»…åŸºäº**åç§°**ï¼ˆå¦‚ admin173865324.domin.comï¼‰
* [ ] æ£€æŸ¥**æœª**è¢«**ä»£ç†**çš„ç½‘é¡µ
* [ ] æ£€æŸ¥å¯ä»¥é€šè¿‡ CNAME æˆ– IP åœ°å€**ç›´æ¥è®¿é—®**çš„**ä»£ç†ç½‘é¡µ**
* [ ] æ£€æŸ¥æ˜¯å¦å¯ç”¨äº†**DNSSEC**
* [ ] æ£€æŸ¥æ‰€æœ‰ CNAME ä¸­æ˜¯å¦**ä½¿ç”¨äº† CNAME å¹³é“º**
* è¿™å¯èƒ½å¯¹**éšè—å­åŸŸæ¥ç®¡æ¼æ´**å’Œæé«˜åŠ è½½æ—¶é—´æœ‰æ‰€å¸®åŠ©
* [ ] æ£€æŸ¥åŸŸåæ˜¯å¦**ä¸æ˜“å—æ¬ºéª—æ”»å‡»**çš„

## **ç”µå­é‚®ä»¶**

å¾…åŠäº‹é¡¹

## Spectrum

å¾…åŠäº‹é¡¹

## SSL/TLS

### **æ¦‚è¿°**

* [ ] **SSL/TLS åŠ å¯†**åº”ä¸º**å®Œæ•´**æˆ–**å®Œå…¨ï¼ˆä¸¥æ ¼ï¼‰**ã€‚å…¶ä»–ä»»ä½•é€‰é¡¹éƒ½ä¼šåœ¨æŸä¸ªæ—¶å€™å‘é€**æ˜æ–‡æµé‡**ã€‚
* [ ] åº”å¯ç”¨**SSL/TLS æ¨èå™¨**

### è¾¹ç¼˜è¯ä¹¦

* [ ] åº”å¯ç”¨**å§‹ç»ˆä½¿ç”¨ HTTPS**
* [ ] åº”å¯ç”¨**HTTP ä¸¥æ ¼ä¼ è¾“å®‰å…¨æ€§ (HSTS)**
* [ ] **æœ€ä½ TLS ç‰ˆæœ¬**åº”ä¸º 1.2
* [ ] åº”å¯ç”¨**TLS 1.3**
* [ ] åº”å¯ç”¨**è‡ªåŠ¨ HTTPS é‡å†™**
* [ ] åº”å¯ç”¨**è¯ä¹¦é€æ˜ç›‘æ§**

## **å®‰å…¨**

* [ ] åœ¨**`WAF`**éƒ¨åˆ†ï¼Œæ£€æŸ¥æ˜¯å¦ä½¿ç”¨**é˜²ç«å¢™**å’Œ**é€Ÿç‡é™åˆ¶è§„åˆ™**ä»¥é˜²æ­¢æ»¥ç”¨ã€‚
* **`ç»•è¿‡`**æ“ä½œå°†ä¸ºè¯·æ±‚**ç¦ç”¨ Cloudflare å®‰å…¨**åŠŸèƒ½ã€‚ä¸åº”ä½¿ç”¨æ­¤åŠŸèƒ½ã€‚
* [ ] åœ¨**`é¡µé¢é˜²æŠ¤`**éƒ¨åˆ†ï¼Œå»ºè®®æ£€æŸ¥æ˜¯å¦**å·²å¯ç”¨**ï¼Œå¦‚æœä½¿ç”¨äº†ä»»ä½•é¡µé¢
* [ ] åœ¨**`API é˜²æŠ¤`**éƒ¨åˆ†ï¼Œå»ºè®®æ£€æŸ¥æ˜¯å¦**å·²å¯ç”¨**ï¼Œå¦‚æœåœ¨ Cloudflare ä¸­å…¬å¼€äº†ä»»ä½• API
* [ ] åœ¨**`DDoS`**éƒ¨åˆ†ï¼Œå»ºè®®å¯ç”¨**DDoS ä¿æŠ¤**
* [ ] åœ¨**`è®¾ç½®`**éƒ¨åˆ†ï¼š
* [ ] æ£€æŸ¥**`å®‰å…¨çº§åˆ«`**æ˜¯å¦ä¸º**ä¸­ç­‰**æˆ–æ›´é«˜
* [ ] æ£€æŸ¥**`æŒ‘æˆ˜é€šè¿‡ç‡`**æœ€å¤šä¸º 1 å°æ—¶
* [ ] æ£€æŸ¥**`æµè§ˆå™¨å®Œæ•´æ€§æ£€æŸ¥`**æ˜¯å¦**å·²å¯ç”¨**
* [ ] æ£€æŸ¥**`éšç§é€šè¡Œè¯æ”¯æŒ`**æ˜¯å¦**å·²å¯ç”¨**

### **CloudFlare DDoS ä¿æŠ¤**

* å¦‚æœå¯ä»¥ï¼Œå¯ç”¨**æœºå™¨äººå¯¹æŠ—æ¨¡å¼**æˆ–**è¶…çº§æœºå™¨äººå¯¹æŠ—æ¨¡å¼**ã€‚å¦‚æœæ‚¨æ­£åœ¨ä¿æŠ¤æŸäº›é€šè¿‡ç¨‹åºè®¿é—®çš„ APIï¼ˆä¾‹å¦‚ä» JS å‰ç«¯é¡µé¢ï¼‰ï¼Œæ‚¨å¯èƒ½æ— æ³•åœ¨ä¸ç ´åè¯¥è®¿é—®çš„æƒ…å†µä¸‹å¯ç”¨æ­¤åŠŸèƒ½ã€‚
* åœ¨**WAF**ä¸­ï¼šæ‚¨å¯ä»¥é€šè¿‡ URL è·¯å¾„æˆ–**éªŒè¯çš„æœºå™¨äºº**ï¼ˆé€Ÿç‡é™åˆ¶è§„åˆ™ï¼‰åˆ›å»º**é€Ÿç‡é™åˆ¶**ï¼Œæˆ–è€…åŸºäº IPã€Cookieã€å¼•èæ¥æºç­‰**é˜»æ­¢è®¿é—®**ã€‚å› æ­¤ï¼Œæ‚¨å¯ä»¥é˜»æ­¢ä¸æ¥è‡ªç½‘é¡µæˆ–æ²¡æœ‰ Cookie çš„è¯·æ±‚ã€‚
* å¦‚æœæ”»å‡»æ¥è‡ª**éªŒè¯çš„æœºå™¨äºº**ï¼Œè‡³å°‘**å‘æœºå™¨äººæ·»åŠ é€Ÿç‡é™åˆ¶**ã€‚
* å¦‚æœæ”»å‡»é’ˆå¯¹**ç‰¹å®šè·¯å¾„**ï¼Œä½œä¸ºé¢„é˜²æœºåˆ¶ï¼Œåœ¨æ­¤è·¯å¾„ä¸­æ·»åŠ **é€Ÿç‡é™åˆ¶**ã€‚
* æ‚¨è¿˜å¯ä»¥åœ¨ WAF ä¸­çš„**å·¥å…·**ä¸­**åˆ—å…¥ç™½åå•** IP åœ°å€ã€IP èŒƒå›´ã€å›½å®¶æˆ– ASNsã€‚
* æ£€æŸ¥**æ‰˜ç®¡è§„åˆ™**æ˜¯å¦è¿˜æœ‰åŠ©äºé˜²æ­¢æ¼æ´åˆ©ç”¨ã€‚
* åœ¨**å·¥å…·**éƒ¨åˆ†ï¼Œæ‚¨å¯ä»¥**é˜»æ­¢æˆ–å‘ç‰¹å®š IP** å’Œ**ç”¨æˆ·ä»£ç†**å‘å‡ºæŒ‘æˆ˜ã€‚
* åœ¨ DDoS ä¸­ï¼Œæ‚¨å¯ä»¥**è¦†ç›–æŸäº›è§„åˆ™ä»¥ä½¿å…¶æ›´ä¸¥æ ¼**ã€‚
* **è®¾ç½®**ï¼šå°†**å®‰å…¨çº§åˆ«**è®¾ç½®ä¸º**é«˜**ï¼Œå¦‚æœæ‚¨å—åˆ°æ”»å‡»ï¼Œåˆ™è®¾ç½®ä¸º**å—åˆ°æ”»å‡»**ï¼Œå¹¶ç¡®ä¿**å·²å¯ç”¨æµè§ˆå™¨å®Œæ•´æ€§æ£€æŸ¥**ã€‚
* åœ¨ Cloudflare åŸŸå -> åˆ†æ -> å®‰å…¨ -> æ£€æŸ¥æ˜¯å¦å·²å¯ç”¨**é€Ÿç‡é™åˆ¶**
* åœ¨ Cloudflare åŸŸå -> å®‰å…¨ -> äº‹ä»¶ -> æ£€æŸ¥æ˜¯å¦æ£€æµ‹åˆ°**æ¶æ„äº‹ä»¶**

## è®¿é—®

{% content-ref url="cloudflare-zero-trust-network.md" %}
[cloudflare-zero-trust-network.md](cloudflare-zero-trust-network.md)
{% endcontent-ref %}

## é€Ÿåº¦

_æˆ‘æ‰¾ä¸åˆ°ä¸å®‰å…¨ç›¸å…³çš„ä»»ä½•é€‰é¡¹_

## ç¼“å­˜

* [ ] åœ¨**`é…ç½®`**éƒ¨åˆ†è€ƒè™‘å¯ç”¨**CSAM æ‰«æå·¥å…·**

## **å·¥ä½œç¨‹åºè·¯ç”±**

_æ‚¨åº”è¯¥å·²ç»æ£€æŸ¥äº†_ [_cloudflare å·¥ä½œç¨‹åº_](./#workers)

## è§„åˆ™

å¾…åŠäº‹é¡¹

## ç½‘ç»œ

* [ ] å¦‚æœå¯ç”¨äº†**`HTTP/2`**ï¼Œåº”å¯ç”¨**`HTTP/2 åˆ°æº`**
* [ ] åº”å¯ç”¨**`HTTP/3ï¼ˆä½¿ç”¨ QUICï¼‰`**
* å¦‚æœæ‚¨çš„**ç”¨æˆ·**çš„**éšç§**å¾ˆé‡è¦ï¼Œè¯·ç¡®ä¿**å·²å¯ç”¨æ´‹è‘±è·¯ç”±**

## **æµé‡**

å¾…åŠäº‹é¡¹

## è‡ªå®šä¹‰é¡µé¢

* [ ] å¯é€‰æ‹©åœ¨è§¦å‘ä¸å®‰å…¨ç›¸å…³çš„é”™è¯¯æ—¶é…ç½®è‡ªå®šä¹‰é¡µé¢ï¼ˆå¦‚é˜»æ­¢ã€é€Ÿç‡é™åˆ¶æˆ–æˆ‘å—åˆ°æ”»å‡»æ¨¡å¼ï¼‰
## åº”ç”¨ç¨‹åº

TODO

## Scrape Shield

* [ ] æ£€æŸ¥ **ç”µå­é‚®ä»¶åœ°å€æ··æ·†** æ˜¯å¦å·²**å¯ç”¨**
* [ ] æ£€æŸ¥ **æœåŠ¡å™¨ç«¯æ’é™¤** æ˜¯å¦å·²**å¯ç”¨**

## **Zaraz**

TODO

## **Web3**

TODO

<details>

{% hint style="success" %}
å­¦ä¹ å¹¶å®è·µ AWS é»‘å®¢æŠ€æœ¯ï¼š<img src="/.gitbook/assets/image.png" alt="" data-size="line">[**HackTricks åŸ¹è®­ AWS çº¢é˜Ÿä¸“å®¶ (ARTE)**](https://training.hacktricks.xyz/courses/arte)<img src="/.gitbook/assets/image.png" alt="" data-size="line">\
å­¦ä¹ å¹¶å®è·µ GCP é»‘å®¢æŠ€æœ¯ï¼š<img src="/.gitbook/assets/image (2).png" alt="" data-size="line">[**HackTricks åŸ¹è®­ GCP çº¢é˜Ÿä¸“å®¶ (GRTE)**<img src="/.gitbook/assets/image (2).png" alt="" data-size="line">](https://training.hacktricks.xyz/courses/grte)

<details>

<summary>æ”¯æŒ HackTricks</summary>

* æ£€æŸ¥ [**è®¢é˜…è®¡åˆ’**](https://github.com/sponsors/carlospolop)!
* **åŠ å…¥** ğŸ’¬ [**Discord ç¾¤ç»„**](https://discord.gg/hRep4RUj7f) æˆ– [**ç”µæŠ¥ç¾¤ç»„**](https://t.me/peass) æˆ– **å…³æ³¨** æˆ‘ä»¬çš„ **Twitter** ğŸ¦ [**@hacktricks\_live**](https://twitter.com/hacktricks\_live)**.**
* é€šè¿‡å‘ [**HackTricks**](https://github.com/carlospolop/hacktricks) å’Œ [**HackTricks Cloud**](https://github.com/carlospolop/hacktricks-cloud) github ä»“åº“æäº¤ PR æ¥åˆ†äº«é»‘å®¢æŠ€å·§ã€‚

</details>
{% endhint %}
