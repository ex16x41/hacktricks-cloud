# Cloudflare Domains

{% hint style="success" %}
Learn & practice AWS Hacking:<img src="../../.gitbook/assets/image (1).png" alt="" data-size="line">[**HackTricks Training AWS Red Team Expert (ARTE)**](https://training.hacktricks.xyz/courses/arte)<img src="../../.gitbook/assets/image (1).png" alt="" data-size="line">\
Learn & practice GCP Hacking: <img src="../../.gitbook/assets/image (2).png" alt="" data-size="line">[**HackTricks Training GCP Red Team Expert (GRTE)**<img src="../../.gitbook/assets/image (2).png" alt="" data-size="line">](https://training.hacktricks.xyz/courses/grte)

<details>

<summary>Support HackTricks</summary>

* Check the [**subscription plans**](https://github.com/sponsors/carlospolop)!
* **Join the** ğŸ’¬ [**Discord group**](https://discord.gg/hRep4RUj7f) or the [**telegram group**](https://t.me/peass) or **follow** us on **Twitter** ğŸ¦ [**@hacktricks\_live**](https://twitter.com/hacktricks\_live)**.**
* **Share hacking tricks by submitting PRs to the** [**HackTricks**](https://github.com/carlospolop/hacktricks) and [**HackTricks Cloud**](https://github.com/carlospolop/hacktricks-cloud) github repos.

</details>
{% endhint %}

U svakom TLD-u konfigurisanom u Cloudflare postoje neka **opÅ¡ta podeÅ¡avanja i usluge** koje se mogu konfigurisati. Na ovoj stranici Ä‡emo **analizirati podeÅ¡avanja vezana za sigurnost svake sekcije:**

<figure><img src="../../.gitbook/assets/image (101).png" alt=""><figcaption></figcaption></figure>

### Pregled

* [ ] Steknite oseÄ‡aj o **koliko** su usluge naloga **koriÅ¡Ä‡ene**
* [ ] TakoÄ‘e pronaÄ‘ite **zone ID** i **nalog ID**

### Analitika

* [ ] U **`Security`** proverite da li postoji **ograniÄenje brzine**

### DNS

* [ ] Proverite **zanimljive** (osetljive?) podatke u DNS **rekordima**
* [ ] Proverite za **poddomene** koje bi mogle sadrÅ¾ati **osetljive informacije** samo na osnovu **imena** (kao Å¡to je admin173865324.domin.com)
* [ ] Proverite web stranice koje **nisu** **proksirane**
* [ ] Proverite za **proksirane web stranice** koje se mogu **pristupiti direktno** putem CNAME-a ili IP adrese
* [ ] Proverite da li je **DNSSEC** **omoguÄ‡en**
* [ ] Proverite da li se **CNAME Flattening** **koristi** u **svim CNAME-ima**
* Ovo moÅ¾e biti korisno za **sakrivanje ranjivosti preuzimanja poddomena** i poboljÅ¡anje vremena uÄitavanja
* [ ] Proverite da li domeni [**nisu ranjivi na spoofing**](https://book.hacktricks.xyz/network-services-pentesting/pentesting-smtp#mail-spoofing)

### **Email**

TODO

### Spectrum

TODO

### SSL/TLS

#### **Pregled**

* [ ] **SSL/TLS enkripcija** treba da bude **Puna** ili **Puna (stroga)**. Svaka druga Ä‡e slati **saobraÄ‡aj u Äistom tekstu** u nekom trenutku.
* [ ] **SSL/TLS PreporuÄivaÄ** treba da bude omoguÄ‡en

#### Edge Sertifikati

* [ ] **Uvek koristite HTTPS** treba da bude **omoguÄ‡eno**
* [ ] **HTTP Stroga Transportna Bezbednost (HSTS)** treba da bude **omoguÄ‡ena**
* [ ] **Minimalna TLS verzija treba da bude 1.2**
* [ ] **TLS 1.3 treba da bude omoguÄ‡en**
* [ ] **Automatska HTTPS prepravka** treba da bude **omoguÄ‡ena**
* [ ] **PraÄ‡enje transparentnosti sertifikata** treba da bude **omoguÄ‡eno**

### **Sigurnost**

* [ ] U sekciji **`WAF`** zanimljivo je proveriti da li se koriste **pravila vatrozida** i **ograniÄenja brzine** za spreÄavanje zloupotreba.
* Akcija **`ZaobiÄ‘i`** Ä‡e **onemoguÄ‡iti Cloudflare sigurnosne** funkcije za zahtev. Ne bi trebala da se koristi.
* [ ] U sekciji **`Page Shield`** preporuÄuje se da proverite da li je **omoguÄ‡ena** ako se koristi neka stranica
* [ ] U sekciji **`API Shield`** preporuÄuje se da proverite da li je **omoguÄ‡ena** ako je neki API izloÅ¾en u Cloudflare
* [ ] U sekciji **`DDoS`** preporuÄuje se omoguÄ‡iti **DDoS zaÅ¡tite**
* [ ] U sekciji **`PodeÅ¡avanja`**:
* [ ] Proverite da li je **`Nivo sigurnosti`** **srednji** ili veÄ‡i
* [ ] Proverite da li je **`Izlazni izazov`** 1 sat maksimalno
* [ ] Proverite da li je **`Provera integriteta pregledaÄa`** **omoguÄ‡ena**
* [ ] Proverite da li je **`PodrÅ¡ka za Privacy Pass`** **omoguÄ‡ena**

#### **CloudFlare DDoS ZaÅ¡tita**

* Ako moÅ¾ete, omoguÄ‡ite **Bot Fight Mode** ili **Super Bot Fight Mode**. Ako Å¡titite neki API koji se pristupa programatski (na primer, sa JS front-end stranice). MoÅ¾da neÄ‡ete moÄ‡i da omoguÄ‡ite ovo bez prekidanja tog pristupa.
* U **WAF**: MoÅ¾ete kreirati **ograniÄenja brzine po URL putanji** ili za **verifikovane botove** (pravila ograniÄenja brzine), ili da **blokirate pristup** na osnovu IP adrese, kolaÄiÄ‡a, referera...). Tako moÅ¾ete blokirati zahteve koji ne dolaze sa web stranice ili nemaju kolaÄiÄ‡.
* Ako je napad od **verifikovanog bota**, barem **dodajte ograniÄenje brzine** za botove.
* Ako je napad na **specifiÄnu putanju**, kao mehanizam prevencije, dodajte **ograniÄenje brzine** na ovoj putanji.
* TakoÄ‘e moÅ¾ete **dodati na belu listu** IP adrese, IP opsege, zemlje ili ASN-ove iz **Alata** u WAF-u.
* Proverite da li **Upravljana pravila** takoÄ‘e mogu pomoÄ‡i u spreÄavanju eksploatacije ranjivosti.
* U sekciji **Alati** moÅ¾ete **blokirati ili dati izazov specifiÄnim IP-ovima** i **korisniÄkim agentima.**
* U DDoS-u moÅ¾ete **prepraviti neka pravila da ih uÄinite restriktivnijim**.
* **PodeÅ¡avanja**: Postavite **Nivo sigurnosti** na **Visok** i na **Pod napadom** ako ste pod napadom i da je **Provera integriteta pregledaÄa omoguÄ‡ena**.
* U Cloudflare Domains -> Analitika -> Sigurnost -> Proverite da li je **ograniÄenje brzine** omoguÄ‡eno
* U Cloudflare Domains -> Sigurnost -> DogaÄ‘aji -> Proverite za **otkrivene zlonamerne dogaÄ‘aje**

### Pristup

{% content-ref url="cloudflare-zero-trust-network.md" %}
[cloudflare-zero-trust-network.md](cloudflare-zero-trust-network.md)
{% endcontent-ref %}

### Brzina

_Nisam mogao pronaÄ‡i nijednu opciju vezanu za sigurnost_

### KeÅ¡iranje

* [ ] U sekciji **`Konfiguracija`** razmotrite omoguÄ‡avanje **CSAM alata za skeniranje**

### **Workers Rute**

_VeÄ‡ ste trebali proveriti_ [_cloudflare workers_](./#workers)

### Pravila

TODO

### MreÅ¾a

* [ ] Ako je **`HTTP/2`** **omoguÄ‡en**, **`HTTP/2 do porekla`** treba da bude **omoguÄ‡en**
* [ ] **`HTTP/3 (sa QUIC)`** treba da bude **omoguÄ‡en**
* [ ] Ako je **privatnost** vaÅ¡ih **korisnika** vaÅ¾na, uverite se da je **`Onion Routing`** **omoguÄ‡en**

### **SaobraÄ‡aj**

TODO

### PrilagoÄ‘ene stranice

* [ ] Opcionalno je konfigurisati prilagoÄ‘ene stranice kada se aktivira greÅ¡ka vezana za sigurnost (kao Å¡to je blokada, ograniÄenje brzine ili sam pod napadom)

### Aplikacije

TODO

### Scrape Shield

* [ ] Proverite da li je **Obfuscation email adresa** **omoguÄ‡ena**
* [ ] Proverite da li su **IskljuÄenja sa servera** **omoguÄ‡ena**

### **Zaraz**

TODO

### **Web3**

TODO

{% hint style="success" %}
Learn & practice AWS Hacking:<img src="../../.gitbook/assets/image (1).png" alt="" data-size="line">[**HackTricks Training AWS Red Team Expert (ARTE)**](https://training.hacktricks.xyz/courses/arte)<img src="../../.gitbook/assets/image (1).png" alt="" data-size="line">\
Learn & practice GCP Hacking: <img src="../../.gitbook/assets/image (2).png" alt="" data-size="line">[**HackTricks Training GCP Red Team Expert (GRTE)**<img src="../../.gitbook/assets/image (2).png" alt="" data-size="line">](https://training.hacktricks.xyz/courses/grte)

<details>

<summary>Support HackTricks</summary>

* Check the [**subscription plans**](https://github.com/sponsors/carlospolop)!
* **Join the** ğŸ’¬ [**Discord group**](https://discord.gg/hRep4RUj7f) or the [**telegram group**](https://t.me/peass) or **follow** us on **Twitter** ğŸ¦ [**@hacktricks\_live**](https://twitter.com/hacktricks\_live)**.**
* **Share hacking tricks by submitting PRs to the** [**HackTricks**](https://github.com/carlospolop/hacktricks) and [**HackTricks Cloud**](https://github.com/carlospolop/hacktricks-cloud) github repos.

</details>
{% endhint %}
