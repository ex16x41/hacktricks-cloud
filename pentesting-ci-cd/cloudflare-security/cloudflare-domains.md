# Cloudflare Domains

{% hint style="success" %}
å­¦ä¹ å’Œå®è·µ AWS é»‘å®¢æŠ€æœ¯ï¼š<img src="../../.gitbook/assets/image (1) (1).png" alt="" data-size="line">[**HackTricks åŸ¹è®­ AWS çº¢é˜Ÿä¸“å®¶ (ARTE)**](https://training.hacktricks.xyz/courses/arte)<img src="../../.gitbook/assets/image (1) (1).png" alt="" data-size="line">\
å­¦ä¹ å’Œå®è·µ GCP é»‘å®¢æŠ€æœ¯ï¼š<img src="../../.gitbook/assets/image (2).png" alt="" data-size="line">[**HackTricks åŸ¹è®­ GCP çº¢é˜Ÿä¸“å®¶ (GRTE)**<img src="../../.gitbook/assets/image (2).png" alt="" data-size="line">](https://training.hacktricks.xyz/courses/grte)

<details>

<summary>æ”¯æŒ HackTricks</summary>

* æŸ¥çœ‹ [**è®¢é˜…è®¡åˆ’**](https://github.com/sponsors/carlospolop)!
* **åŠ å…¥** ğŸ’¬ [**Discord ç¾¤ç»„**](https://discord.gg/hRep4RUj7f) æˆ– [**ç”µæŠ¥ç¾¤ç»„**](https://t.me/peass) æˆ– **å…³æ³¨** æˆ‘ä»¬çš„ **Twitter** ğŸ¦ [**@hacktricks\_live**](https://twitter.com/hacktricks\_live)**.**
* **é€šè¿‡å‘** [**HackTricks**](https://github.com/carlospolop/hacktricks) å’Œ [**HackTricks Cloud**](https://github.com/carlospolop/hacktricks-cloud) github ä»“åº“æäº¤ PR åˆ†äº«é»‘å®¢æŠ€å·§ã€‚

</details>
{% endhint %}

åœ¨ Cloudflare é…ç½®çš„æ¯ä¸ª TLD ä¸­ï¼Œæœ‰ä¸€äº› **å¸¸è§„è®¾ç½®å’ŒæœåŠ¡** å¯ä»¥é…ç½®ã€‚åœ¨æœ¬é¡µé¢ä¸­ï¼Œæˆ‘ä»¬å°† **åˆ†ææ¯ä¸ªéƒ¨åˆ†çš„å®‰å…¨ç›¸å…³è®¾ç½®ï¼š**

<figure><img src="../../.gitbook/assets/image (101).png" alt=""><figcaption></figcaption></figure>

### æ¦‚è¿°

* [ ] äº†è§£è´¦æˆ· **æœåŠ¡çš„ä½¿ç”¨æƒ…å†µ**
* [ ] è¿˜è¦æ‰¾åˆ° **åŒºåŸŸ ID** å’Œ **è´¦æˆ· ID**

### åˆ†æ

* [ ] åœ¨ **`å®‰å…¨`** ä¸­æ£€æŸ¥æ˜¯å¦æœ‰ **é€Ÿç‡é™åˆ¶**

### DNS

* [ ] æ£€æŸ¥ DNS **è®°å½•** ä¸­çš„ **æœ‰è¶£**ï¼ˆæ•æ„Ÿï¼Ÿï¼‰æ•°æ®
* [ ] æ£€æŸ¥å¯èƒ½åŒ…å« **æ•æ„Ÿä¿¡æ¯** çš„ **å­åŸŸå**ï¼Œä»…åŸºäº **åç§°**ï¼ˆå¦‚ admin173865324.domin.comï¼‰
* [ ] æ£€æŸ¥ **æœªè¢«ä»£ç†** çš„ç½‘é¡µ
* [ ] æ£€æŸ¥å¯ä»¥é€šè¿‡ CNAME æˆ– IP åœ°å€ **ç›´æ¥è®¿é—®çš„ä»£ç†ç½‘é¡µ**
* [ ] æ£€æŸ¥ **DNSSEC** æ˜¯å¦ **å¯ç”¨**
* [ ] æ£€æŸ¥æ‰€æœ‰ CNAME æ˜¯å¦ **ä½¿ç”¨ CNAME æ‰å¹³åŒ–**
* è¿™å¯èƒ½æœ‰åŠ©äº **éšè—å­åŸŸåæ¥ç®¡æ¼æ´** å¹¶æ”¹å–„åŠ è½½æ—¶é—´
* [ ] æ£€æŸ¥åŸŸå [**æ˜¯å¦æ˜“å—æ¬ºéª—**](https://book.hacktricks.xyz/network-services-pentesting/pentesting-smtp#mail-spoofing)

### **ç”µå­é‚®ä»¶**

TODO

### Spectrum

TODO

### SSL/TLS

#### **æ¦‚è¿°**

* [ ] **SSL/TLS åŠ å¯†** åº”è¯¥æ˜¯ **å®Œå…¨** æˆ– **å®Œå…¨ï¼ˆä¸¥æ ¼ï¼‰**ã€‚ä»»ä½•å…¶ä»–è®¾ç½®å°†åœ¨æŸäº›æ—¶å€™å‘é€ **æ˜æ–‡æµé‡**ã€‚
* [ ] **SSL/TLS æ¨èå™¨** åº”è¯¥å¯ç”¨

#### è¾¹ç¼˜è¯ä¹¦

* [ ] **å§‹ç»ˆä½¿ç”¨ HTTPS** åº”è¯¥ **å¯ç”¨**
* [ ] **HTTP ä¸¥æ ¼ä¼ è¾“å®‰å…¨ (HSTS)** åº”è¯¥ **å¯ç”¨**
* [ ] **æœ€ä½ TLS ç‰ˆæœ¬åº”ä¸º 1.2**
* [ ] **TLS 1.3 åº”è¯¥å¯ç”¨**
* [ ] **è‡ªåŠ¨ HTTPS é‡å†™** åº”è¯¥ **å¯ç”¨**
* [ ] **è¯ä¹¦é€æ˜åº¦ç›‘æ§** åº”è¯¥ **å¯ç”¨**

### **å®‰å…¨**

* [ ] åœ¨ **`WAF`** éƒ¨åˆ†ï¼Œæ£€æŸ¥ **é˜²ç«å¢™** å’Œ **é€Ÿç‡é™åˆ¶è§„åˆ™æ˜¯å¦è¢«ä½¿ç”¨** ä»¥é˜²æ­¢æ»¥ç”¨æ˜¯å¾ˆæœ‰è¶£çš„ã€‚
* **`ç»•è¿‡`** æ“ä½œå°† **ç¦ç”¨ Cloudflare å®‰å…¨** åŠŸèƒ½ã€‚å®ƒä¸åº”è¯¥è¢«ä½¿ç”¨ã€‚
* [ ] åœ¨ **`é¡µé¢ä¿æŠ¤`** éƒ¨åˆ†ï¼Œå¦‚æœä½¿ç”¨äº†ä»»ä½•é¡µé¢ï¼Œå»ºè®®æ£€æŸ¥æ˜¯å¦ **å¯ç”¨**
* [ ] åœ¨ **`API ä¿æŠ¤`** éƒ¨åˆ†ï¼Œå¦‚æœåœ¨ Cloudflare ä¸­æš´éœ²äº†ä»»ä½• APIï¼Œå»ºè®®æ£€æŸ¥æ˜¯å¦ **å¯ç”¨**
* [ ] åœ¨ **`DDoS`** éƒ¨åˆ†ï¼Œå»ºè®®å¯ç”¨ **DDoS ä¿æŠ¤**
* [ ] åœ¨ **`è®¾ç½®`** éƒ¨åˆ†ï¼š
* [ ] æ£€æŸ¥ **`å®‰å…¨çº§åˆ«`** æ˜¯å¦ä¸º **ä¸­ç­‰** æˆ–æ›´é«˜
* [ ] æ£€æŸ¥ **`æŒ‘æˆ˜é€šè¿‡`** æœ€å¤šä¸º 1 å°æ—¶
* [ ] æ£€æŸ¥ **`æµè§ˆå™¨å®Œæ•´æ€§æ£€æŸ¥`** æ˜¯å¦ **å¯ç”¨**
* [ ] æ£€æŸ¥ **`éšç§é€šè¡Œè¯æ”¯æŒ`** æ˜¯å¦ **å¯ç”¨**

#### **CloudFlare DDoS ä¿æŠ¤**

* å¦‚æœå¯ä»¥ï¼Œå¯ç”¨ **æœºå™¨äººæˆ˜æ–—æ¨¡å¼** æˆ– **è¶…çº§æœºå™¨äººæˆ˜æ–—æ¨¡å¼**ã€‚å¦‚æœæ‚¨ä¿æŠ¤æŸä¸ªé€šè¿‡ç¼–ç¨‹è®¿é—®çš„ APIï¼ˆä¾‹å¦‚ï¼Œä» JS å‰ç«¯é¡µé¢ï¼‰ï¼Œæ‚¨å¯èƒ½æ— æ³•åœ¨ä¸ç ´åè¯¥è®¿é—®çš„æƒ…å†µä¸‹å¯ç”¨æ­¤åŠŸèƒ½ã€‚
* åœ¨ **WAF**ï¼šæ‚¨å¯ä»¥æ ¹æ® URL è·¯å¾„åˆ›å»º **é€Ÿç‡é™åˆ¶** æˆ–å¯¹ **å·²éªŒè¯çš„æœºå™¨äºº**ï¼ˆé€Ÿç‡é™åˆ¶è§„åˆ™ï¼‰ï¼Œæˆ–æ ¹æ® IPã€Cookieã€å¼•èæ¥æºç­‰ **é˜»æ­¢è®¿é—®**ã€‚å› æ­¤ï¼Œæ‚¨å¯ä»¥é˜»æ­¢ä¸æ¥è‡ªç½‘é¡µæˆ–æ²¡æœ‰ Cookie çš„è¯·æ±‚ã€‚
* å¦‚æœæ”»å‡»æ¥è‡ª **å·²éªŒè¯çš„æœºå™¨äºº**ï¼Œè‡³å°‘ **æ·»åŠ é€Ÿç‡é™åˆ¶** åˆ°æœºå™¨äººã€‚
* å¦‚æœæ”»å‡»é’ˆå¯¹ **ç‰¹å®šè·¯å¾„**ï¼Œä½œä¸ºé¢„é˜²æœºåˆ¶ï¼Œåœ¨è¯¥è·¯å¾„ä¸­æ·»åŠ  **é€Ÿç‡é™åˆ¶**ã€‚
* æ‚¨è¿˜å¯ä»¥åœ¨ WAF çš„ **å·¥å…·** ä¸­ **ç™½åå•** IP åœ°å€ã€IP èŒƒå›´ã€å›½å®¶æˆ– ASNã€‚
* æ£€æŸ¥ **æ‰˜ç®¡è§„åˆ™** æ˜¯å¦ä¹Ÿå¯ä»¥å¸®åŠ©é˜²æ­¢æ¼æ´åˆ©ç”¨ã€‚
* åœ¨ **å·¥å…·** éƒ¨åˆ†ï¼Œæ‚¨å¯ä»¥ **é˜»æ­¢æˆ–å¯¹ç‰¹å®š IP å’Œç”¨æˆ·ä»£ç†å‘å‡ºæŒ‘æˆ˜**ã€‚
* åœ¨ DDoS ä¸­ï¼Œæ‚¨å¯ä»¥ **è¦†ç›–æŸäº›è§„åˆ™ä»¥ä½¿å…¶æ›´ä¸¥æ ¼**ã€‚
* **è®¾ç½®**ï¼šå°† **å®‰å…¨çº§åˆ«** è®¾ç½®ä¸º **é«˜**ï¼Œå¦‚æœæ‚¨å¤„äºæ”»å‡»ä¸­å¹¶ä¸” **æµè§ˆå™¨å®Œæ•´æ€§æ£€æŸ¥å·²å¯ç”¨**ï¼Œåˆ™è®¾ç½®ä¸º **æ­£åœ¨æ”»å‡»ä¸­**ã€‚
* åœ¨ Cloudflare åŸŸå -> åˆ†æ -> å®‰å…¨ -> æ£€æŸ¥æ˜¯å¦ **å¯ç”¨é€Ÿç‡é™åˆ¶**
* åœ¨ Cloudflare åŸŸå -> å®‰å…¨ -> äº‹ä»¶ -> æ£€æŸ¥æ˜¯å¦æœ‰ **æ£€æµ‹åˆ°çš„æ¶æ„äº‹ä»¶**

### è®¿é—®

{% content-ref url="cloudflare-zero-trust-network.md" %}
[cloudflare-zero-trust-network.md](cloudflare-zero-trust-network.md)
{% endcontent-ref %}

### é€Ÿåº¦

_æˆ‘æ‰¾ä¸åˆ°ä¸å®‰å…¨ç›¸å…³çš„ä»»ä½•é€‰é¡¹_

### ç¼“å­˜

* [ ] åœ¨ **`é…ç½®`** éƒ¨åˆ†è€ƒè™‘å¯ç”¨ **CSAM æ‰«æå·¥å…·**

### **Workers è·¯ç”±**

_æ‚¨åº”è¯¥å·²ç»æ£€æŸ¥è¿‡_ [_cloudflare workers_](./#workers)

### è§„åˆ™

TODO

### ç½‘ç»œ

* [ ] å¦‚æœ **`HTTP/2`** å·² **å¯ç”¨**ï¼Œåˆ™ **`HTTP/2 åˆ°æº`** åº”è¯¥ **å¯ç”¨**
* [ ] **`HTTP/3 (ä½¿ç”¨ QUIC)`** åº”è¯¥ **å¯ç”¨**
* [ ] å¦‚æœ **ç”¨æˆ·** çš„ **éšç§** é‡è¦ï¼Œè¯·ç¡®ä¿ **`æ´‹è‘±è·¯ç”±`** å·² **å¯ç”¨**

### **æµé‡**

TODO

### è‡ªå®šä¹‰é¡µé¢

* [ ] å½“è§¦å‘ä¸å®‰å…¨ç›¸å…³çš„é”™è¯¯æ—¶ï¼ˆå¦‚é˜»æ­¢ã€é€Ÿç‡é™åˆ¶æˆ–æˆ‘æ­£åœ¨æ”»å‡»æ¨¡å¼ï¼‰ï¼Œé…ç½®è‡ªå®šä¹‰é¡µé¢æ˜¯å¯é€‰çš„

### åº”ç”¨

TODO

### æŠ“å–ä¿æŠ¤

* [ ] æ£€æŸ¥ **ç”µå­é‚®ä»¶åœ°å€æ¨¡ç³ŠåŒ–** æ˜¯å¦ **å¯ç”¨**
* [ ] æ£€æŸ¥ **æœåŠ¡å™¨ç«¯æ’é™¤** æ˜¯å¦ **å¯ç”¨**

### **Zaraz**

TODO

### **Web3**

TODO

{% hint style="success" %}
å­¦ä¹ å’Œå®è·µ AWS é»‘å®¢æŠ€æœ¯ï¼š<img src="../../.gitbook/assets/image (1) (1).png" alt="" data-size="line">[**HackTricks åŸ¹è®­ AWS çº¢é˜Ÿä¸“å®¶ (ARTE)**](https://training.hacktricks.xyz/courses/arte)<img src="../../.gitbook/assets/image (1) (1).png" alt="" data-size="line">\
å­¦ä¹ å’Œå®è·µ GCP é»‘å®¢æŠ€æœ¯ï¼š<img src="../../.gitbook/assets/image (2).png" alt="" data-size="line">[**HackTricks åŸ¹è®­ GCP çº¢é˜Ÿä¸“å®¶ (GRTE)**<img src="../../.gitbook/assets/image (2).png" alt="" data-size="line">](https://training.hacktricks.xyz/courses/grte)

<details>

<summary>æ”¯æŒ HackTricks</summary>

* æŸ¥çœ‹ [**è®¢é˜…è®¡åˆ’**](https://github.com/sponsors/carlospolop)!
* **åŠ å…¥** ğŸ’¬ [**Discord ç¾¤ç»„**](https://discord.gg/hRep4RUj7f) æˆ– [**ç”µæŠ¥ç¾¤ç»„**](https://t.me/peass) æˆ– **å…³æ³¨** æˆ‘ä»¬çš„ **Twitter** ğŸ¦ [**@hacktricks\_live**](https://twitter.com/hacktricks\_live)**.**
* **é€šè¿‡å‘** [**HackTricks**](https://github.com/carlospolop/hacktricks) å’Œ [**HackTricks Cloud**](https://github.com/carlospolop/hacktricks-cloud) github ä»“åº“æäº¤ PR åˆ†äº«é»‘å®¢æŠ€å·§ã€‚

</details>
{% endhint %}
