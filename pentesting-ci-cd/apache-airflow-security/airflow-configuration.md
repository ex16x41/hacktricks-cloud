# Airflow Configuration

{% hint style="success" %}
Learn & practice AWS Hacking:<img src="../../.gitbook/assets/image (1).png" alt="" data-size="line">[**HackTricks Training AWS Red Team Expert (ARTE)**](https://training.hacktricks.xyz/courses/arte)<img src="../../.gitbook/assets/image (1).png" alt="" data-size="line">\
Learn & practice GCP Hacking: <img src="../../.gitbook/assets/image (2).png" alt="" data-size="line">[**HackTricks Training GCP Red Team Expert (GRTE)**<img src="../../.gitbook/assets/image (2).png" alt="" data-size="line">](https://training.hacktricks.xyz/courses/grte)

<details>

<summary>Support HackTricks</summary>

* Check the [**subscription plans**](https://github.com/sponsors/carlospolop)!
* **Join the** üí¨ [**Discord group**](https://discord.gg/hRep4RUj7f) or the [**telegram group**](https://t.me/peass) or **follow** us on **Twitter** üê¶ [**@hacktricks\_live**](https://twitter.com/hacktricks\_live)**.**
* **Share hacking tricks by submitting PRs to the** [**HackTricks**](https://github.com/carlospolop/hacktricks) and [**HackTricks Cloud**](https://github.com/carlospolop/hacktricks-cloud) github repos.

</details>
{% endhint %}

## Configuration File

**Apache Airflow** –≥–µ–Ω–µ—Ä—É—î **—Ñ–∞–π–ª –∫–æ–Ω—Ñ—ñ–≥—É—Ä–∞—Ü—ñ—ó** –Ω–∞ –≤—Å—ñ—Ö –º–∞—à–∏–Ω–∞—Ö airflow, —è–∫–∏–π –Ω–∞–∑–∏–≤–∞—î—Ç—å—Å—è **`airflow.cfg`** –≤ –¥–æ–º–∞—à–Ω—å–æ–º—É –∫–∞—Ç–∞–ª–æ–∑—ñ –∫–æ—Ä–∏—Å—Ç—É–≤–∞—á–∞ airflow. –¶–µ–π —Ñ–∞–π–ª –∫–æ–Ω—Ñ—ñ–≥—É—Ä–∞—Ü—ñ—ó –º—ñ—Å—Ç–∏—Ç—å —ñ–Ω—Ñ–æ—Ä–º–∞—Ü—ñ—é –ø—Ä–æ –∫–æ–Ω—Ñ—ñ–≥—É—Ä–∞—Ü—ñ—é —ñ **–º–æ–∂–µ –º—ñ—Å—Ç–∏—Ç–∏ —Ü—ñ–∫–∞–≤—É —Ç–∞ —á—É—Ç–ª–∏–≤—É —ñ–Ω—Ñ–æ—Ä–º–∞—Ü—ñ—é.**

**–Ü—Å–Ω—É—î –¥–≤–∞ —Å–ø–æ—Å–æ–±–∏ –¥–æ—Å—Ç—É–ø—É –¥–æ —Ü—å–æ–≥–æ —Ñ–∞–π–ª—É: —à–ª—è—Ö–æ–º –∫–æ–º–ø—Ä–æ–º–µ—Ç–∞—Ü—ñ—ó –¥–µ—è–∫–æ—ó –º–∞—à–∏–Ω–∏ airflow –∞–±–æ –¥–æ—Å—Ç—É–ø–æ–º –¥–æ –≤–µ–±-–∫–æ–Ω—Å–æ–ª—ñ.**

–ó–≤–µ—Ä–Ω—ñ—Ç—å —É–≤–∞–≥—É, —â–æ **–∑–Ω–∞—á–µ–Ω–Ω—è –≤—Å–µ—Ä–µ–¥–∏–Ω—ñ —Ñ–∞–π–ª—É –∫–æ–Ω—Ñ—ñ–≥—É—Ä–∞—Ü—ñ—ó** **–º–æ–∂—É—Ç—å –Ω–µ –±—É—Ç–∏ —Ç–∏–º–∏, —â–æ –≤–∏–∫–æ—Ä–∏—Å—Ç–æ–≤—É—é—Ç—å—Å—è**, –æ—Å–∫—ñ–ª—å–∫–∏ –≤–∏ –º–æ–∂–µ—Ç–µ –ø–µ—Ä–µ–∑–∞–ø–∏—Å–∞—Ç–∏ —ó—Ö, –≤—Å—Ç–∞–Ω–æ–≤–∏–≤—à–∏ –∑–º—ñ–Ω–Ω—ñ —Å–µ—Ä–µ–¥–æ–≤–∏—â–∞, —Ç–∞–∫—ñ —è–∫ `AIRFLOW__WEBSERVER__EXPOSE_CONFIG: 'true'`.

–Ø–∫—â–æ —É –≤–∞—Å —î –¥–æ—Å—Ç—É–ø –¥–æ **—Ñ–∞–π–ª—É –∫–æ–Ω—Ñ—ñ–≥—É—Ä–∞—Ü—ñ—ó –Ω–∞ –≤–µ–±-—Å–µ—Ä–≤–µ—Ä—ñ**, –≤–∏ –º–æ–∂–µ—Ç–µ –ø–µ—Ä–µ–≤—ñ—Ä–∏—Ç–∏ **—Ä–µ–∞–ª—å–Ω—É –∫–æ–Ω—Ñ—ñ–≥—É—Ä–∞—Ü—ñ—é, —â–æ –≤–∏–∫–æ–Ω—É—î—Ç—å—Å—è**, –Ω–∞ —Ç—ñ–π –∂–µ —Å—Ç–æ—Ä—ñ–Ω—Ü—ñ, –¥–µ –≤—ñ–¥–æ–±—Ä–∞–∂–∞—î—Ç—å—Å—è –∫–æ–Ω—Ñ—ñ–≥—É—Ä–∞—Ü—ñ—è.\
–Ø–∫—â–æ —É –≤–∞—Å —î **–¥–æ—Å—Ç—É–ø –¥–æ —è–∫–æ—ó—Å—å –º–∞—à–∏–Ω–∏ –≤ —Å–µ—Ä–µ–¥–æ–≤–∏—â—ñ airflow**, –ø–µ—Ä–µ–≤—ñ—Ä—Ç–µ **—Å–µ—Ä–µ–¥–æ–≤–∏—â–µ**.

–î–µ—è–∫—ñ —Ü—ñ–∫–∞–≤—ñ –∑–Ω–∞—á–µ–Ω–Ω—è –¥–ª—è –ø–µ—Ä–µ–≤—ñ—Ä–∫–∏ –ø—Ä–∏ —á–∏—Ç–∞–Ω–Ω—ñ —Ñ–∞–π–ª—É –∫–æ–Ω—Ñ—ñ–≥—É—Ä–∞—Ü—ñ—ó:

### \[api]

* **`access_control_allow_headers`**: –¶–µ –≤–∫–∞–∑—É—î –Ω–∞ **–¥–æ–∑–≤–æ–ª–µ–Ω—ñ** **–∑–∞–≥–æ–ª–æ–≤–∫–∏** –¥–ª—è **CORS**
* **`access_control_allow_methods`**: –¶–µ –≤–∫–∞–∑—É—î –Ω–∞ **–¥–æ–∑–≤–æ–ª–µ–Ω—ñ –º–µ—Ç–æ–¥–∏** –¥–ª—è **CORS**
* **`access_control_allow_origins`**: –¶–µ –≤–∫–∞–∑—É—î –Ω–∞ **–¥–æ–∑–≤–æ–ª–µ–Ω—ñ –¥–∂–µ—Ä–µ–ª–∞** –¥–ª—è **CORS**
* **`auth_backend`**: [**–ó–≥—ñ–¥–Ω–æ –∑ –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü—ñ—î—é**](https://airflow.apache.org/docs/apache-airflow/stable/security/api.html) –∫—ñ–ª—å–∫–∞ –≤–∞—Ä—ñ–∞–Ω—Ç—ñ–≤ –º–æ–∂—É—Ç—å –±—É—Ç–∏ –≤–∏–∫–æ—Ä–∏—Å—Ç–∞–Ω—ñ –¥–ª—è –Ω–∞–ª–∞—à—Ç—É–≤–∞–Ω–Ω—è, —Ö—Ç–æ –º–æ–∂–µ –æ—Ç—Ä–∏–º–∞—Ç–∏ –¥–æ—Å—Ç—É–ø –¥–æ API:
* `airflow.api.auth.backend.deny_all`: **–ó–∞ –∑–∞–º–æ–≤—á—É–≤–∞–Ω–Ω—è–º –Ω—ñ—Ö—Ç–æ** –Ω–µ –º–æ–∂–µ –æ—Ç—Ä–∏–º–∞—Ç–∏ –¥–æ—Å—Ç—É–ø –¥–æ API
* `airflow.api.auth.backend.default`: **–£—Å—ñ –º–æ–∂—É—Ç—å** –æ—Ç—Ä–∏–º–∞—Ç–∏ –¥–æ—Å—Ç—É–ø –±–µ–∑ –∞—É—Ç–µ–Ω—Ç–∏—Ñ—ñ–∫–∞—Ü—ñ—ó
* `airflow.api.auth.backend.kerberos_auth`: –î–ª—è –Ω–∞–ª–∞—à—Ç—É–≤–∞–Ω–Ω—è **–∞—É—Ç–µ–Ω—Ç–∏—Ñ—ñ–∫–∞—Ü—ñ—ó kerberos**
* `airflow.api.auth.backend.basic_auth`: –î–ª—è **–±–∞–∑–æ–≤–æ—ó –∞—É—Ç–µ–Ω—Ç–∏—Ñ—ñ–∫–∞—Ü—ñ—ó**
* `airflow.composer.api.backend.composer_auth`: –í–∏–∫–æ—Ä–∏—Å—Ç–æ–≤—É—î –∞—É—Ç–µ–Ω—Ç–∏—Ñ—ñ–∫–∞—Ü—ñ—é –∫–æ–º–ø–æ–∑–∏—Ç–æ—Ä—ñ–≤ (GCP) (–∑ [**—Ç—É—Ç**](https://cloud.google.com/composer/docs/access-airflow-api)).
* `composer_auth_user_registration_role`: –¶–µ –≤–∫–∞–∑—É—î –Ω–∞ **—Ä–æ–ª—å**, —è–∫—É **–∫–æ—Ä–∏—Å—Ç—É–≤–∞—á –∫–æ–º–ø–æ–∑–∏—Ç–æ—Ä—ñ–≤** –æ—Ç—Ä–∏–º–∞—î –≤—Å–µ—Ä–µ–¥–∏–Ω—ñ **airflow** (**Op** –∑–∞ –∑–∞–º–æ–≤—á—É–≤–∞–Ω–Ω—è–º).
* –í–∏ —Ç–∞–∫–æ–∂ –º–æ–∂–µ—Ç–µ **—Å—Ç–≤–æ—Ä–∏—Ç–∏ —Å–≤—ñ–π –≤–ª–∞—Å–Ω–∏–π –º–µ—Ç–æ–¥ –∞—É—Ç–µ–Ω—Ç–∏—Ñ—ñ–∫–∞—Ü—ñ—ó** –∑–∞ –¥–æ–ø–æ–º–æ–≥–æ—é python.
* **`google_key_path`:** –®–ª—è—Ö –¥–æ **–∫–ª—é—á–∞ –æ–±–ª—ñ–∫–æ–≤–æ–≥–æ –∑–∞–ø–∏—Å—É —Å–ª—É–∂–±–∏ GCP**

### **\[atlas]**

* **`password`**: –ü–∞—Ä–æ–ª—å Atlas
* **`username`**: –Ü–º'—è –∫–æ—Ä–∏—Å—Ç—É–≤–∞—á–∞ Atlas

### \[celery]

* **`flower_basic_auth`** : –û–±–ª—ñ–∫–æ–≤—ñ –¥–∞–Ω—ñ (_user1:password1,user2:password2_)
* **`result_backend`**: URL Postgres, —è–∫–∏–π –º–æ–∂–µ –º—ñ—Å—Ç–∏—Ç–∏ **–æ–±–ª—ñ–∫–æ–≤—ñ –¥–∞–Ω—ñ**.
* **`ssl_cacert`**: –®–ª—è—Ö –¥–æ cacert
* **`ssl_cert`**: –®–ª—è—Ö –¥–æ —Å–µ—Ä—Ç–∏—Ñ—ñ–∫–∞—Ç–∞
* **`ssl_key`**: –®–ª—è—Ö –¥–æ –∫–ª—é—á–∞

### \[core]

* **`dag_discovery_safe_mode`**: –£–≤—ñ–º–∫–Ω–µ–Ω–æ –∑–∞ –∑–∞–º–æ–≤—á—É–≤–∞–Ω–Ω—è–º. –ü—ñ–¥ —á–∞—Å –≤–∏—è–≤–ª–µ–Ω–Ω—è DAG —ñ–≥–Ω–æ—Ä—É–π—Ç–µ –±—É–¥—å-—è–∫—ñ —Ñ–∞–π–ª–∏, —è–∫—ñ –Ω–µ –º—ñ—Å—Ç—è—Ç—å —Ä—è–¥–∫—ñ–≤ `DAG` —ñ `airflow`.
* **`fernet_key`**: –ö–ª—é—á –¥–ª—è –∑–±–µ—Ä—ñ–≥–∞–Ω–Ω—è –∑–∞—à–∏—Ñ—Ä–æ–≤–∞–Ω–∏—Ö –∑–º—ñ–Ω–Ω–∏—Ö (—Å–∏–º–µ—Ç—Ä–∏—á–Ω–∏–π)
* **`hide_sensitive_var_conn_fields`**: –£–≤—ñ–º–∫–Ω–µ–Ω–æ –∑–∞ –∑–∞–º–æ–≤—á—É–≤–∞–Ω–Ω—è–º, –ø—Ä–∏—Ö–æ–≤—É—î —á—É—Ç–ª–∏–≤—É —ñ–Ω—Ñ–æ—Ä–º–∞—Ü—ñ—é –ø—Ä–æ –∑'—î–¥–Ω–∞–Ω–Ω—è.
* **`security`**: –Ø–∫–∏–π –º–æ–¥—É–ª—å –±–µ–∑–ø–µ–∫–∏ –≤–∏–∫–æ—Ä–∏—Å—Ç–æ–≤—É–≤–∞—Ç–∏ (–Ω–∞–ø—Ä–∏–∫–ª–∞–¥, kerberos)

### \[dask]

* **`tls_ca`**: –®–ª—è—Ö –¥–æ ca
* **`tls_cert`**: –®–ª—è—Ö –¥–æ —Å–µ—Ä—Ç–∏—Ñ—ñ–∫–∞—Ç–∞
* **`tls_key`**: –®–ª—è—Ö –¥–æ tls –∫–ª—é—á–∞

### \[kerberos]

* **`ccache`**: –®–ª—è—Ö –¥–æ —Ñ–∞–π–ª—É ccache
* **`forwardable`**: –£–≤—ñ–º–∫–Ω–µ–Ω–æ –∑–∞ –∑–∞–º–æ–≤—á—É–≤–∞–Ω–Ω—è–º

### \[logging]

* **`google_key_path`**: –®–ª—è—Ö –¥–æ GCP JSON –æ–±–ª—ñ–∫–æ–≤–∏—Ö –¥–∞–Ω–∏—Ö.

### \[secrets]

* **`backend`**: –ü–æ–≤–Ω–∞ –Ω–∞–∑–≤–∞ –∫–ª–∞—Å—É –±–µ–∫–µ–Ω–¥—É —Å–µ–∫—Ä–µ—Ç—ñ–≤ –¥–ª—è –∞–∫—Ç–∏–≤–∞—Ü—ñ—ó
* **`backend_kwargs`**: –ü–∞—Ä–∞–º–µ—Ç—Ä backend\_kwargs –∑–∞–≤–∞–Ω—Ç–∞–∂—É—î—Ç—å—Å—è –≤ —Å–ª–æ–≤–Ω–∏–∫ —ñ –ø–µ—Ä–µ–¥–∞—î—Ç—å—Å—è –≤ **init** –∫–ª–∞—Å—É –±–µ–∫–µ–Ω–¥—É —Å–µ–∫—Ä–µ—Ç—ñ–≤.

### \[smtp]

* **`smtp_password`**: –ü–∞—Ä–æ–ª—å SMTP
* **`smtp_user`**: –ö–æ—Ä–∏—Å—Ç—É–≤–∞—á SMTP

### \[webserver]

* **`cookie_samesite`**: –ó–∞ –∑–∞–º–æ–≤—á—É–≤–∞–Ω–Ω—è–º —Ü–µ **Lax**, —Ç–æ–º—É —Ü–µ –≤–∂–µ –Ω–∞–π—Å–ª–∞–±—à–µ –º–æ–∂–ª–∏–≤–µ –∑–Ω–∞—á–µ–Ω–Ω—è
* **`cookie_secure`**: –í—Å—Ç–∞–Ω–æ–≤—ñ—Ç—å **–ø—Ä–∞–ø–æ—Ä –±–µ–∑–ø–µ–∫–∏** –Ω–∞ —Å–µ—Å—ñ–π–Ω–µ cookie
* **`expose_config`**: –ó–∞ –∑–∞–º–æ–≤—á—É–≤–∞–Ω–Ω—è–º False, —è–∫—â–æ true, **–∫–æ–Ω—Ñ—ñ–≥—É—Ä–∞—Ü—ñ—é** –º–æ–∂–Ω–∞ **—á–∏—Ç–∞—Ç–∏** –∑ –≤–µ–± **–∫–æ–Ω—Å–æ–ª—ñ**
* **`expose_stacktrace`**: –ó–∞ –∑–∞–º–æ–≤—á—É–≤–∞–Ω–Ω—è–º —Ü–µ True, —Ü–µ –ø–æ–∫–∞–∂–µ **python tracebacks** (–º–æ–∂–ª–∏–≤–æ, –∫–æ—Ä–∏—Å–Ω–æ –¥–ª—è –∑–ª–æ–≤–º–∏—Å–Ω–∏–∫–∞)
* **`secret_key`**: –¶–µ **–∫–ª—é—á, —è–∫–∏–π –≤–∏–∫–æ—Ä–∏—Å—Ç–æ–≤—É—î—Ç—å—Å—è flask –¥–ª—è –ø—ñ–¥–ø–∏—Å—É cookie** (—è–∫—â–æ —É –≤–∞—Å —î —Ü–µ, –≤–∏ –º–æ–∂–µ—Ç–µ **–≤–∏–¥–∞–≤–∞—Ç–∏ —Å–µ–±–µ –∑–∞ –±—É–¥—å-—è–∫–æ–≥–æ –∫–æ—Ä–∏—Å—Ç—É–≤–∞—á–∞ –≤ Airflow**)
* **`web_server_ssl_cert`**: **–®–ª—è—Ö** –¥–æ **SSL** **—Å–µ—Ä—Ç–∏—Ñ—ñ–∫–∞—Ç–∞**
* **`web_server_ssl_key`**: **–®–ª—è—Ö** –¥–æ **SSL** **–∫–ª—é—á–∞**
* **`x_frame_enabled`**: –ó–∞ –∑–∞–º–æ–≤—á—É–≤–∞–Ω–Ω—è–º **True**, —Ç–æ–º—É –∑–∞ –∑–∞–º–æ–≤—á—É–≤–∞–Ω–Ω—è–º –∫–ª—ñ–∫–¥–∂–µ–∫–∏–Ω–≥ –Ω–µ–º–æ–∂–ª–∏–≤–∏–π

### Web Authentication

–ó–∞ –∑–∞–º–æ–≤—á—É–≤–∞–Ω–Ω—è–º **–≤–µ–±-–∞—É—Ç–µ–Ω—Ç–∏—Ñ—ñ–∫–∞—Ü—ñ—è** –≤–∫–∞–∑—É—î—Ç—å—Å—è —É —Ñ–∞–π–ª—ñ **`webserver_config.py`** —ñ –Ω–∞–ª–∞—à—Ç–æ–≤—É—î—Ç—å—Å—è —è–∫
```bash
AUTH_TYPE = AUTH_DB
```
–©–æ –æ–∑–Ω–∞—á–∞—î, —â–æ **–∞–≤—Ç–µ–Ω—Ç–∏—Ñ—ñ–∫–∞—Ü—ñ—è –ø–µ—Ä–µ–≤—ñ—Ä—è—î—Ç—å—Å—è –ø—Ä–æ—Ç–∏ –±–∞–∑–∏ –¥–∞–Ω–∏—Ö**. –û–¥–Ω–∞–∫ –º–æ–∂–ª–∏–≤—ñ –π —ñ–Ω—à—ñ –∫–æ–Ω—Ñ—ñ–≥—É—Ä–∞—Ü—ñ—ó, —Ç–∞–∫—ñ —è–∫
```bash
AUTH_TYPE = AUTH_OAUTH
```
–©–æ–± –∑–∞–ª–∏—à–∏—Ç–∏ **–∞—É—Ç–µ–Ω—Ç–∏—Ñ—ñ–∫–∞—Ü—ñ—é —Å—Ç–æ—Ä–æ–Ω–Ω—ñ–º —Å–µ—Ä–≤—ñ—Å–∞–º**.

–û–¥–Ω–∞–∫ —Ç–∞–∫–æ–∂ —î –º–æ–∂–ª–∏–≤—ñ—Å—Ç—å **–¥–æ–∑–≤–æ–ª–∏—Ç–∏ –∞–Ω–æ–Ω—ñ–º–Ω–∏–º –∫–æ—Ä–∏—Å—Ç—É–≤–∞—á–∞–º –¥–æ—Å—Ç—É–ø**, –≤—Å—Ç–∞–Ω–æ–≤–∏–≤—à–∏ –Ω–∞—Å—Ç—É–ø–Ω–∏–π –ø–∞—Ä–∞–º–µ—Ç—Ä –Ω–∞ **–±–∞–∂–∞–Ω—É —Ä–æ–ª—å**:
```bash
AUTH_ROLE_PUBLIC = 'Admin'
```
{% hint style="success" %}
–í–∏–≤—á–∞–π—Ç–µ —Ç–∞ –ø—Ä–∞–∫—Ç–∏–∫—É–π—Ç–µ AWS Hacking:<img src="../../.gitbook/assets/image (1).png" alt="" data-size="line">[**HackTricks Training AWS Red Team Expert (ARTE)**](https://training.hacktricks.xyz/courses/arte)<img src="../../.gitbook/assets/image (1).png" alt="" data-size="line">\
–í–∏–≤—á–∞–π—Ç–µ —Ç–∞ –ø—Ä–∞–∫—Ç–∏–∫—É–π—Ç–µ GCP Hacking: <img src="../../.gitbook/assets/image (2).png" alt="" data-size="line">[**HackTricks Training GCP Red Team Expert (GRTE)**<img src="../../.gitbook/assets/image (2).png" alt="" data-size="line">](https://training.hacktricks.xyz/courses/grte)

<details>

<summary>–ü—ñ–¥—Ç—Ä–∏–º–∞–π—Ç–µ HackTricks</summary>

* –ü–µ—Ä–µ–≤—ñ—Ä—Ç–µ [**–ø–ª–∞–Ω–∏ –ø—ñ–¥–ø–∏—Å–∫–∏**](https://github.com/sponsors/carlospolop)!
* **–ü—Ä–∏—î–¥–Ω—É–π—Ç–µ—Å—å –¥–æ** üí¨ [**–≥—Ä—É–ø–∏ Discord**](https://discord.gg/hRep4RUj7f) –∞–±–æ [**–≥—Ä—É–ø–∏ telegram**](https://t.me/peass) –∞–±–æ **—Å–ª—ñ–¥–∫—É–π—Ç–µ** –∑–∞ –Ω–∞–º–∏ –≤ **Twitter** üê¶ [**@hacktricks\_live**](https://twitter.com/hacktricks\_live)**.**
* **–î—ñ–ª—ñ—Ç—å—Å—è —Ö–∞–∫–µ—Ä—Å—å–∫–∏–º–∏ —Ç—Ä—é–∫–∞–º–∏, –Ω–∞–¥—Å–∏–ª–∞—é—á–∏ PR –¥–æ** [**HackTricks**](https://github.com/carlospolop/hacktricks) —Ç–∞ [**HackTricks Cloud**](https://github.com/carlospolop/hacktricks-cloud) —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä—ñ—ó–≤ –Ω–∞ github.

</details>
{% endhint %}
