# Temel Jenkins Bilgisi

{% hint style="success" %}
AWS Hacking Ã¶ÄŸrenin ve pratik yapÄ±n:<img src="../../.gitbook/assets/image (1).png" alt="" data-size="line">[**HackTricks EÄŸitim AWS KÄ±rmÄ±zÄ± TakÄ±m UzmanÄ± (ARTE)**](https://training.hacktricks.xyz/courses/arte)<img src="../../.gitbook/assets/image (1).png" alt="" data-size="line">\
GCP Hacking Ã¶ÄŸrenin ve pratik yapÄ±n: <img src="../../.gitbook/assets/image (2).png" alt="" data-size="line">[**HackTricks EÄŸitim GCP KÄ±rmÄ±zÄ± TakÄ±m UzmanÄ± (GRTE)**<img src="../../.gitbook/assets/image (2).png" alt="" data-size="line">](https://training.hacktricks.xyz/courses/grte)

<details>

<summary>HackTricks'i Destekleyin</summary>

* [**abonelik planlarÄ±nÄ±**](https://github.com/sponsors/carlospolop) kontrol edin!
* **ğŸ’¬ [**Discord grubuna**](https://discord.gg/hRep4RUj7f) veya [**telegram grubuna**](https://t.me/peass) katÄ±lÄ±n ya da **Twitter'da** ğŸ¦ [**@hacktricks\_live**](https://twitter.com/hacktricks\_live)** bizi takip edin.**
* **Hacking ipuÃ§larÄ±nÄ± paylaÅŸmak iÃ§in** [**HackTricks**](https://github.com/carlospolop/hacktricks) ve [**HackTricks Cloud**](https://github.com/carlospolop/hacktricks-cloud) github reposuna PR gÃ¶nderin.

</details>
{% endhint %}

## EriÅŸim

### KullanÄ±cÄ± AdÄ± + Åifre

Jenkins'e giriÅŸ yapmanÄ±n en yaygÄ±n yolu bir kullanÄ±cÄ± adÄ± veya ÅŸifre ile giriÅŸ yapmaktÄ±r.

### Ã‡erez

EÄŸer bir **yetkili Ã§erez Ã§alÄ±nÄ±rsa**, bu Ã§erez kullanÄ±cÄ±nÄ±n oturumuna eriÅŸmek iÃ§in kullanÄ±labilir. Ã‡erez genellikle `JSESSIONID.*` olarak adlandÄ±rÄ±lÄ±r. (Bir kullanÄ±cÄ± tÃ¼m oturumlarÄ±nÄ± sonlandÄ±rabilir, ancak Ã¶nce bir Ã§erezin Ã§alÄ±ndÄ±ÄŸÄ±nÄ± Ã¶ÄŸrenmesi gerekir).

### SSO/Eklentiler

Jenkins, Ã¼Ã§Ã¼ncÃ¼ taraf SSO aracÄ±lÄ±ÄŸÄ±yla **eriÅŸilebilir olacak ÅŸekilde eklentiler kullanÄ±larak yapÄ±landÄ±rÄ±labilir**.

### Tokenlar

**KullanÄ±cÄ±lar, uygulamalara kendilerini taklit etmeleri iÃ§in eriÅŸim vermek amacÄ±yla tokenlar oluÅŸturabilir.**

### SSH AnahtarlarÄ±

Bu bileÅŸen, Jenkins iÃ§in yerleÅŸik bir SSH sunucusu saÄŸlar. Bu, [Jenkins CLI](https://www.jenkins.io/doc/book/managing/cli/) iÃ§in alternatif bir arayÃ¼zdÃ¼r ve komutlar bu ÅŸekilde herhangi bir SSH istemcisi kullanÄ±larak Ã§aÄŸrÄ±labilir. (Kaynak: [docs](https://plugins.jenkins.io/sshd/))

## Yetkilendirme

`/configureSecurity` iÃ§inde, Jenkins'in **yetkilendirme yÃ¶ntemini yapÄ±landÄ±rmak** mÃ¼mkÃ¼ndÃ¼r. BirkaÃ§ seÃ§enek vardÄ±r:

* **Herkes her ÅŸeyi yapabilir**: Hatta anonim eriÅŸim sunucuyu yÃ¶netebilir.
* **Eski mod**: Jenkins <1.164 ile aynÄ±. EÄŸer **"admin" rolÃ¼ne** sahipseniz, sisteme **tam kontrol** verilecektir, aksi takdirde (anonim kullanÄ±cÄ±lar dahil) **okuma** eriÅŸiminiz olacaktÄ±r.
* **GiriÅŸ yapmÄ±ÅŸ kullanÄ±cÄ±lar her ÅŸeyi yapabilir**: Bu modda, her **giriÅŸ yapmÄ±ÅŸ kullanÄ±cÄ± Jenkins'in tam kontrolÃ¼ne** sahip olur. Tam kontrolÃ¼ olmayan tek kullanÄ±cÄ± **anonim kullanÄ±cÄ±dÄ±r**, yalnÄ±zca **okuma eriÅŸimi** alÄ±r.
* **Matris tabanlÄ± gÃ¼venlik**: **Kimlerin ne yapabileceÄŸini** bir tabloda yapÄ±landÄ±rabilirsiniz. Her **sÃ¼tun** bir **izin** temsil eder. Her **satÄ±r** bir **kullanÄ±cÄ± veya grup/rolÃ¼ temsil eder.** Bu, **kimlik doÄŸrulanmamÄ±ÅŸ kullanÄ±cÄ±larÄ±** temsil eden Ã¶zel bir kullanÄ±cÄ± '**anonim**' ve **tÃ¼m kimlik doÄŸrulanmÄ±ÅŸ kullanÄ±cÄ±larÄ±** temsil eden '**kimlik doÄŸrulanmÄ±ÅŸ**' iÃ§erir.

![](<../../.gitbook/assets/image (149).png>)

* **Proje tabanlÄ± Matris Yetkilendirme Stratejisi:** Bu mod, her proje iÃ§in ayrÄ± ayrÄ± **ek ACL matrisinin tanÄ±mlanmasÄ±na** olanak tanÄ±yan "**Matris tabanlÄ± gÃ¼venlik**" iÃ§in bir **uzantÄ±dÄ±r.**
* **Rol TabanlÄ± Strateji:** **Rol tabanlÄ± bir strateji** kullanarak yetkilendirmeleri tanÄ±mlamayÄ± saÄŸlar. Rolleri `/role-strategy` iÃ§inde yÃ¶netin.

## **GÃ¼venlik AlanÄ±**

`/configureSecurity` iÃ§inde, **gÃ¼venlik alanÄ±nÄ± yapÄ±landÄ±rmak** mÃ¼mkÃ¼ndÃ¼r. VarsayÄ±lan olarak Jenkins, birkaÃ§ farklÄ± GÃ¼venlik AlanÄ± desteÄŸi iÃ§erir:

* **Servlet konteynerine devret:** **Jenkins denetleyicisini Ã§alÄ±ÅŸtÄ±ran bir servlet konteynerine kimlik doÄŸrulama devretmek iÃ§in**, Ã¶rneÄŸin [Jetty](https://www.eclipse.org/jetty/).
* **Jenkinsâ€™in kendi kullanÄ±cÄ± veritabanÄ±:** DÄ±ÅŸ bir sisteme devretmek yerine kimlik doÄŸrulama iÃ§in **Jenkinsâ€™in kendi yerleÅŸik kullanÄ±cÄ± veri deposunu** kullanÄ±n. Bu varsayÄ±lan olarak etkindir.
* **LDAP**: Hem kullanÄ±cÄ±lar hem de gruplar dahil olmak Ã¼zere tÃ¼m kimlik doÄŸrulamayÄ± yapÄ±landÄ±rÄ±lmÄ±ÅŸ bir LDAP sunucusuna devredin.
* **Unix kullanÄ±cÄ±/grup veritabanÄ±**: **Kimlik doÄŸrulamayÄ± Jenkins denetleyicisindeki temel Unix** OS dÃ¼zeyindeki kullanÄ±cÄ± veritabanÄ±na devreder. Bu mod, yetkilendirme iÃ§in Unix gruplarÄ±nÄ±n yeniden kullanÄ±lmasÄ±na da olanak tanÄ±r.

Eklentiler, Jenkins'i mevcut kimlik sistemlerine entegre etmek iÃ§in yararlÄ± olabilecek ek gÃ¼venlik alanlarÄ± saÄŸlayabilir, Ã¶rneÄŸin:

* [Active Directory](https://plugins.jenkins.io/active-directory)
* [GitHub Kimlik DoÄŸrulama](https://plugins.jenkins.io/github-oauth)
* [Atlassian Crowd 2](https://plugins.jenkins.io/crowd2)

## Jenkins DÃ¼ÄŸÃ¼mleri, Ajanlar ve YÃ¼rÃ¼tÃ¼cÃ¼ler

[docs](https://www.jenkins.io/doc/book/managing/nodes/) tanÄ±mlarÄ±:

**DÃ¼ÄŸÃ¼mler**, **derleme ajanlarÄ±nÄ±n Ã§alÄ±ÅŸtÄ±ÄŸÄ± makineler**dir. Jenkins, her baÄŸlÄ± dÃ¼ÄŸÃ¼mÃ¼ disk alanÄ±, boÅŸ geÃ§ici alan, boÅŸ takas, saat zamanÄ±/senkronizasyon ve yanÄ±t sÃ¼resi iÃ§in izler. Bu deÄŸerlerden herhangi biri yapÄ±landÄ±rÄ±lmÄ±ÅŸ eÅŸik deÄŸerinin dÄ±ÅŸÄ±na Ã§Ä±karsa, bir dÃ¼ÄŸÃ¼m Ã§evrimdÄ±ÅŸÄ± alÄ±nÄ±r.

**Ajanlar**, Jenkins denetleyicisi adÄ±na **gÃ¶rev yÃ¼rÃ¼tmesini yÃ¶netir** ve **yÃ¼rÃ¼tÃ¼cÃ¼ler** kullanÄ±r. Bir ajan, Java'yÄ± destekleyen herhangi bir iÅŸletim sistemini kullanabilir. Derlemeler ve testler iÃ§in gereken araÃ§lar, ajanÄ±n Ã§alÄ±ÅŸtÄ±ÄŸÄ± dÃ¼ÄŸÃ¼mde kurulu olmalÄ±dÄ±r; bunlar **doÄŸrudan veya bir konteynerde** (Docker veya Kubernetes) kurulabilir. Her **ajan, ana makinede kendi PID'sine sahip bir sÃ¼reÃ§tir**.

Bir **yÃ¼rÃ¼tÃ¼cÃ¼**, **gÃ¶revlerin yÃ¼rÃ¼tÃ¼lmesi iÃ§in bir yerdir**; etkili bir ÅŸekilde, bu **ajan iÃ§indeki bir ipliktir**. Bir dÃ¼ÄŸÃ¼mdeki **yÃ¼rÃ¼tÃ¼cÃ¼ sayÄ±sÄ±**, o dÃ¼ÄŸÃ¼mde aynÄ± anda yÃ¼rÃ¼tÃ¼lebilecek **eÅŸzamanlÄ± gÃ¶revlerin** sayÄ±sÄ±nÄ± tanÄ±mlar. DiÄŸer bir deyiÅŸle, bu, o dÃ¼ÄŸÃ¼mde aynÄ± anda yÃ¼rÃ¼tÃ¼lebilecek **eÅŸzamanlÄ± Pipeline `aÅŸamalarÄ±nÄ±n`** sayÄ±sÄ±nÄ± belirler.

## Jenkins Gizli Bilgileri

### Gizli Bilgilerin ve Kimlik Bilgilerinin Åifrelenmesi

[docs](https://www.jenkins.io/doc/developer/security/secrets/#encryption-of-secrets-and-credentials) tanÄ±mÄ±na gÃ¶re: Jenkins, **gizli bilgileri**, kimlik bilgilerini ve bunlarÄ±n ilgili ÅŸifreleme anahtarlarÄ±nÄ± korumak iÃ§in **AES kullanÄ±r**. Bu ÅŸifreleme anahtarlarÄ±, `$JENKINS_HOME/secrets/` iÃ§inde, bu anahtarlarÄ± korumak iÃ§in kullanÄ±lan anahtar ile birlikte saklanÄ±r. Bu dizin, yalnÄ±zca Jenkins denetleyicisinin Ã§alÄ±ÅŸtÄ±ÄŸÄ± iÅŸletim sistemi kullanÄ±cÄ±sÄ±nÄ±n bu dizine okuma ve yazma eriÅŸimine sahip olacak ÅŸekilde yapÄ±landÄ±rÄ±lmalÄ±dÄ±r (yani, `chmod` deÄŸeri `0700` veya uygun dosya nitelikleri kullanÄ±larak). **Anahtar** (bazen kriptolojide "anahtar ÅŸifreleme anahtarÄ±" olarak adlandÄ±rÄ±lÄ±r) **ÅŸifrelenmemiÅŸ olarak** Jenkins denetleyici dosya sisteminde **`$JENKINS_HOME/secrets/master.key`** iÃ§inde saklanÄ±r ve bu dosyaya doÄŸrudan eriÅŸimi olan saldÄ±rganlara karÅŸÄ± koruma saÄŸlamaz. Ã‡oÄŸu kullanÄ±cÄ± ve geliÅŸtirici, bu ÅŸifreleme anahtarlarÄ±nÄ± ya [Secret](https://javadoc.jenkins.io/byShortName/Secret) API'si aracÄ±lÄ±ÄŸÄ±yla genel gizli verileri ÅŸifrelemek iÃ§in ya da kimlik bilgileri API'si aracÄ±lÄ±ÄŸÄ±yla dolaylÄ± olarak kullanacaktÄ±r. Kriptografi meraklÄ±larÄ± iÃ§in, Jenkins, [CryptoConfidentialKey](https://javadoc.jenkins.io/byShortName/CryptoConfidentialKey) Ã¶rneklerini ÅŸifrelemek iÃ§in PKCS#5 dolgu ve rastgele IV'ler ile CBC modunda AES kullanÄ±r ve bunlar `$JENKINS_HOME/secrets/` iÃ§inde `CryptoConfidentialKey` kimliÄŸine karÅŸÄ±lÄ±k gelen bir dosya adÄ± ile saklanÄ±r. YaygÄ±n anahtar kimlikleri ÅŸunlarÄ± iÃ§erir:

* `hudson.util.Secret`: genel gizli bilgiler iÃ§in kullanÄ±lÄ±r;
* `com.cloudbees.plugins.credentials.SecretBytes.KEY`: bazÄ± kimlik bilgisi tÃ¼rleri iÃ§in kullanÄ±lÄ±r;
* `jenkins.model.Jenkins.crumbSalt`: [CSRF koruma mekanizmasÄ±](https://www.jenkins.io/doc/book/managing/security/#cross-site-request-forgery) tarafÄ±ndan kullanÄ±lÄ±r; ve

### Kimlik Bilgilerine EriÅŸim

Kimlik bilgileri, herhangi bir yapÄ±landÄ±rÄ±lmÄ±ÅŸ proje tarafÄ±ndan eriÅŸilebilen **kÃ¼resel saÄŸlayÄ±cÄ±lara** (`/credentials/`) veya yalnÄ±zca belirli projelerden eriÅŸilebilen **belirli projelere** (`/job/<project-name>/configure`) kapsamlandÄ±rÄ±labilir.

[**belgelere**](https://www.jenkins.io/blog/2019/02/21/credentials-masking/) gÃ¶re: Kapsamda olan kimlik bilgileri, sÄ±nÄ±rsÄ±z bir ÅŸekilde pipeline'a sunulur. **Derleme gÃ¼nlÃ¼ÄŸÃ¼nde kazara ifÅŸayÄ± Ã¶nlemek iÃ§in**, kimlik bilgileri **normal Ã§Ä±ktÄ±lardan maskelemektedir**, bu nedenle `env` (Linux) veya `set` (Windows) Ã§aÄŸrÄ±sÄ± veya ortamlarÄ±nÄ± veya parametrelerini yazdÄ±ran programlar, kimlik bilgilerine eriÅŸimi olmayan kullanÄ±cÄ±lara **derleme gÃ¼nlÃ¼ÄŸÃ¼nde ifÅŸa edilmez**.

**Bu nedenle, kimlik bilgilerini dÄ±ÅŸarÄ±ya Ã§Ä±karmak iÃ§in bir saldÄ±rganÄ±n, Ã¶rneÄŸin, bunlarÄ± base64'e dÃ¶nÃ¼ÅŸtÃ¼rmesi gerekir.**

## Referanslar

* [https://www.jenkins.io/doc/book/security/managing-security/](https://www.jenkins.io/doc/book/security/managing-security/)
* [https://www.jenkins.io/doc/book/managing/nodes/](https://www.jenkins.io/doc/book/managing/nodes/)
* [https://www.jenkins.io/doc/developer/security/secrets/](https://www.jenkins.io/doc/developer/security/secrets/)
* [https://www.jenkins.io/blog/2019/02/21/credentials-masking/](https://www.jenkins.io/blog/2019/02/21/credentials-masking/)
* [https://www.jenkins.io/doc/book/managing/security/#cross-site-request-forgery](https://www.jenkins.io/doc/book/managing/security/#cross-site-request-forgery)
* [https://www.jenkins.io/doc/developer/security/secrets/#encryption-of-secrets-and-credentials](https://www.jenkins.io/doc/developer/security/secrets/#encryption-of-secrets-and-credentials)
* [https://www.jenkins.io/doc/book/managing/nodes/](https://www.jenkins.io/doc/book/managing/nodes/)

{% hint style="success" %}
AWS Hacking Ã¶ÄŸrenin ve pratik yapÄ±n:<img src="../../.gitbook/assets/image (1).png" alt="" data-size="line">[**HackTricks EÄŸitim AWS KÄ±rmÄ±zÄ± TakÄ±m UzmanÄ± (ARTE)**](https://training.hacktricks.xyz/courses/arte)<img src="../../.gitbook/assets/image (1).png" alt="" data-size="line">\
GCP Hacking Ã¶ÄŸrenin ve pratik yapÄ±n: <img src="../../.gitbook/assets/image (2).png" alt="" data-size="line">[**HackTricks EÄŸitim GCP KÄ±rmÄ±zÄ± TakÄ±m UzmanÄ± (GRTE)**<img src="../../.gitbook/assets/image (2).png" alt="" data-size="line">](https://training.hacktricks.xyz/courses/grte)

<details>

<summary>HackTricks'i Destekleyin</summary>

* [**abonelik planlarÄ±nÄ±**](https://github.com/sponsors/carlospolop) kontrol edin!
* **ğŸ’¬ [**Discord grubuna**](https://discord.gg/hRep4RUj7f) veya [**telegram grubuna**](https://t.me/peass) katÄ±lÄ±n ya da **Twitter'da** ğŸ¦ [**@hacktricks\_live**](https://twitter.com/hacktricks\_live)** bizi takip edin.**
* **Hacking ipuÃ§larÄ±nÄ± paylaÅŸmak iÃ§in** [**HackTricks**](https://github.com/carlospolop/hacktricks) ve [**HackTricks Cloud**](https://github.com/carlospolop/hacktricks-cloud) github reposuna PR gÃ¶nderin.

</details>
{% endhint %}
