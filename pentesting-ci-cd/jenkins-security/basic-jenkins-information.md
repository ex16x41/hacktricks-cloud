# Temel Jenkins Bilgisi

{% hint style="success" %}
AWS Hacking Ã¶ÄŸrenin ve pratik yapÄ±n:<img src="/.gitbook/assets/image.png" alt="" data-size="line">[**HackTricks Training AWS Red Team Expert (ARTE)**](https://training.hacktricks.xyz/courses/arte)<img src="/.gitbook/assets/image.png" alt="" data-size="line">\
GCP Hacking Ã¶ÄŸrenin ve pratik yapÄ±n: <img src="/.gitbook/assets/image (2).png" alt="" data-size="line">[**HackTricks Training GCP Red Team Expert (GRTE)**<img src="/.gitbook/assets/image (2).png" alt="" data-size="line">](https://training.hacktricks.xyz/courses/grte)

<details>

<summary>HackTricks'i Destekleyin</summary>

* [**Abonelik planlarÄ±nÄ±**](https://github.com/sponsors/carlospolop) kontrol edin!
* ğŸ’¬ [**Discord grubuna**](https://discord.gg/hRep4RUj7f) veya [**telegram grubuna**](https://t.me/peass) katÄ±lÄ±n ya da **Twitter'da** ğŸ¦ [**@hacktricks\_live**](https://twitter.com/hacktricks\_live) **bizi takip edin.**
* **HackTricks'e PR gÃ¶ndererek hacking ipuÃ§larÄ±nÄ± paylaÅŸÄ±n** [**HackTricks**](https://github.com/carlospolop/hacktricks) ve [**HackTricks Cloud**](https://github.com/carlospolop/hacktricks-cloud) GitHub depolarÄ±nda.

</details>
{% endhint %}

## EriÅŸim

### KullanÄ±cÄ± AdÄ± + Åifre

Jenkins'e giriÅŸ yapmanÄ±n en yaygÄ±n yolu kullanÄ±cÄ± adÄ± veya ÅŸifre ile yapÄ±lÄ±r.

### Ã‡erez

EÄŸer **yetkili bir Ã§erez Ã§alÄ±nÄ±rsa**, kullanÄ±cÄ±nÄ±n oturumuna eriÅŸmek iÃ§in kullanÄ±labilir. Ã‡erez genellikle `JSESSIONID.*` olarak adlandÄ±rÄ±lÄ±r. (Bir kullanÄ±cÄ± tÃ¼m oturumlarÄ±nÄ± sonlandÄ±rabilir, ancak Ã¶nce bir Ã§erezin Ã§alÄ±ndÄ±ÄŸÄ±nÄ± Ã¶ÄŸrenmesi gerekir).

### SSO/Eklentiler

Jenkins, eklentiler kullanÄ±larak **Ã¼Ã§Ã¼ncÃ¼ taraf SSO aracÄ±lÄ±ÄŸÄ±yla eriÅŸilebilir** olacak ÅŸekilde yapÄ±landÄ±rÄ±labilir.

### Tokenlar

**KullanÄ±cÄ±lar tokenlar oluÅŸturabilir** ve bu tokenlar, uygulamalara CLI veya REST API aracÄ±lÄ±ÄŸÄ±yla onlarÄ± taklit etme yetkisi verir.

### SSH AnahtarlarÄ±

Bu bileÅŸen, Jenkins iÃ§in yerleÅŸik bir SSH sunucusu saÄŸlar. Bu, [Jenkins CLI](https://www.jenkins.io/doc/book/managing/cli/) iÃ§in alternatif bir arayÃ¼zdÃ¼r ve komutlar herhangi bir SSH istemcisi kullanÄ±larak bu ÅŸekilde Ã§aÄŸrÄ±labilir. ([dokÃ¼manlardan](https://plugins.jenkins.io/sshd))

## Yetkilendirme

`/configureSecurity` adresinde **Jenkins'in yetkilendirme yÃ¶ntemini yapÄ±landÄ±rmak** mÃ¼mkÃ¼ndÃ¼r. BirkaÃ§ seÃ§enek vardÄ±r:

* **Herkes her ÅŸeyi yapabilir**: Anonim eriÅŸim bile sunucuyu yÃ¶netebilir.
* **Eski mod**: Jenkins <1.164 ile aynÄ±. EÄŸer **"admin" rolÃ¼ne** sahipseniz, sistem Ã¼zerinde **tam kontrol** hakkÄ± verilir ve **aksi takdirde** (anonim kullanÄ±cÄ±lar dahil) **okuma** eriÅŸimi saÄŸlanÄ±r.
* **GiriÅŸ yapmÄ±ÅŸ kullanÄ±cÄ±lar her ÅŸeyi yapabilir**: Bu modda, her **giriÅŸ yapmÄ±ÅŸ kullanÄ±cÄ± Jenkins Ã¼zerinde tam kontrol** hakkÄ±na sahiptir. Tam kontrol hakkÄ±na sahip olmayan tek kullanÄ±cÄ± **anonim kullanÄ±cÄ±dÄ±r**, bu kullanÄ±cÄ± sadece **okuma eriÅŸimi** alÄ±r.
* **Matris tabanlÄ± gÃ¼venlik**: Bir tabloda **kimin ne yapabileceÄŸini** yapÄ±landÄ±rabilirsiniz. Her **sÃ¼tun** bir **izin** temsil eder. Her **satÄ±r** bir **kullanÄ±cÄ± veya grup/rol** temsil eder. Bu, **kimliÄŸi doÄŸrulanmamÄ±ÅŸ kullanÄ±cÄ±larÄ±** temsil eden Ã¶zel bir kullanÄ±cÄ± '**anonim**' ve **tÃ¼m kimliÄŸi doÄŸrulanmÄ±ÅŸ kullanÄ±cÄ±larÄ±** temsil eden '**kimliÄŸi doÄŸrulanmÄ±ÅŸ**' kullanÄ±cÄ±larÄ±nÄ± iÃ§erir.

![](<../../.gitbook/assets/image (149).png>)

* **Proje tabanlÄ± Matris Yetkilendirme Stratejisi:** Bu mod, her proje iÃ§in ayrÄ± bir ACL matrisi **tanÄ±mlanmasÄ±na izin veren** "**Matris tabanlÄ± gÃ¼venlik**"nin bir **uzantÄ±sÄ±dÄ±r.**
* **Rol TabanlÄ± Strateji:** Yetkilendirmeleri **rol tabanlÄ± bir strateji** kullanarak tanÄ±mlamayÄ± saÄŸlar. `/role-strategy` adresinde rolleri yÃ¶netin.

## **GÃ¼venlik AlanÄ±**

`/configureSecurity` adresinde **gÃ¼venlik alanÄ±nÄ± yapÄ±landÄ±rmak** mÃ¼mkÃ¼ndÃ¼r. VarsayÄ±lan olarak Jenkins, birkaÃ§ farklÄ± GÃ¼venlik AlanÄ± iÃ§in destek iÃ§erir:

* **Servlet konteynerine devret**: **Jenkins denetleyicisini Ã§alÄ±ÅŸtÄ±ran bir servlet konteynerine kimlik doÄŸrulamasÄ±nÄ± devretmek** iÃ§in, Ã¶rneÄŸin [Jetty](https://www.eclipse.org/jetty/).
* **Jenkinsâ€™in kendi kullanÄ±cÄ± veritabanÄ±:** Kimlik doÄŸrulamasÄ± iÃ§in **Jenkinsâ€™in kendi yerleÅŸik kullanÄ±cÄ± veri deposunu** kullanÄ±n, harici bir sisteme devretmek yerine. Bu varsayÄ±lan olarak etkindir.
* **LDAP**: TÃ¼m kimlik doÄŸrulamasÄ±nÄ±, kullanÄ±cÄ±lar ve gruplar dahil olmak Ã¼zere yapÄ±landÄ±rÄ±lmÄ±ÅŸ bir LDAP sunucusuna devredin.
* **Unix kullanÄ±cÄ±/grup veritabanÄ±**: **Kimlik doÄŸrulamasÄ±nÄ± Jenkins denetleyicisindeki** temel Unix OS dÃ¼zeyindeki kullanÄ±cÄ± veritabanÄ±na devreder. Bu mod, yetkilendirme iÃ§in Unix gruplarÄ±nÄ±n yeniden kullanÄ±lmasÄ±na da izin verir.

Eklentiler, Jenkins'i mevcut kimlik sistemlerine entegre etmek iÃ§in yararlÄ± olabilecek ek gÃ¼venlik alanlarÄ± saÄŸlayabilir, Ã¶rneÄŸin:

* [Active Directory](https://plugins.jenkins.io/active-directory)
* [GitHub Authentication](https://plugins.jenkins.io/github-oauth)
* [Atlassian Crowd 2](https://plugins.jenkins.io/crowd2)

## Jenkins DÃ¼ÄŸÃ¼mleri, Ajanlar ve YÃ¼rÃ¼tÃ¼cÃ¼ler

[DokÃ¼manlardan](https://www.jenkins.io/doc/book/managing/nodes/) tanÄ±mlar:

**DÃ¼ÄŸÃ¼mler**, yapÄ± **ajanlarÄ±nÄ±n Ã§alÄ±ÅŸtÄ±ÄŸÄ±** **makinelerdir**. Jenkins, her baÄŸlÄ± dÃ¼ÄŸÃ¼mÃ¼ disk alanÄ±, boÅŸ geÃ§ici alan, boÅŸ takas, saat zamanÄ±/senkronizasyon ve yanÄ±t sÃ¼resi iÃ§in izler. Bu deÄŸerlerden herhangi biri yapÄ±landÄ±rÄ±lmÄ±ÅŸ eÅŸiklerin dÄ±ÅŸÄ±na Ã§Ä±karsa, bir dÃ¼ÄŸÃ¼m Ã§evrimdÄ±ÅŸÄ± alÄ±nÄ±r.

**Ajanlar**, Jenkins denetleyicisi adÄ±na **gÃ¶rev yÃ¼rÃ¼tmeyi** **yÃ¼rÃ¼tÃ¼cÃ¼ler kullanarak** **yÃ¶netir**. Bir ajan, Java'yÄ± destekleyen herhangi bir iÅŸletim sistemini kullanabilir. YapÄ±lar ve testler iÃ§in gerekli araÃ§lar, ajanÄ±n Ã§alÄ±ÅŸtÄ±ÄŸÄ± dÃ¼ÄŸÃ¼me kurulur; bunlar **doÄŸrudan veya bir konteynerde (Docker veya Kubernetes) kurulabilir**. Her **ajan, ana makinede kendi PID'sine sahip bir sÃ¼reÃ§tir**.

Bir **yÃ¼rÃ¼tÃ¼cÃ¼**, **gÃ¶revlerin yÃ¼rÃ¼tÃ¼lmesi iÃ§in bir yuva**dÄ±r; etkili bir ÅŸekilde, **ajandaki bir iÅŸ parÃ§acÄ±ÄŸÄ±dÄ±r**. Bir dÃ¼ÄŸÃ¼mdeki **yÃ¼rÃ¼tÃ¼cÃ¼ sayÄ±sÄ±**, o dÃ¼ÄŸÃ¼mde aynÄ± anda yÃ¼rÃ¼tÃ¼lebilecek **eÅŸzamanlÄ± gÃ¶revlerin** sayÄ±sÄ±nÄ± tanÄ±mlar. BaÅŸka bir deyiÅŸle, bu, o dÃ¼ÄŸÃ¼mde aynÄ± anda yÃ¼rÃ¼tÃ¼lebilecek **eÅŸzamanlÄ± Pipeline `aÅŸamalarÄ±nÄ±n`** sayÄ±sÄ±nÄ± belirler.

## Jenkins SÄ±rlarÄ±

### SÄ±rlarÄ±n ve Kimlik Bilgilerinin Åifrelenmesi

[DokÃ¼manlardan](https://www.jenkins.io/doc/developer/security/secrets/#encryption-of-secrets-and-credentials) tanÄ±m: Jenkins, sÄ±rlarÄ±, kimlik bilgilerini ve bunlarÄ±n ilgili ÅŸifreleme anahtarlarÄ±nÄ± **ÅŸifrelemek ve korumak iÃ§in AES kullanÄ±r**. Bu ÅŸifreleme anahtarlarÄ±, `$JENKINS_HOME/secrets/` iÃ§inde, bu anahtarlarÄ± korumak iÃ§in kullanÄ±lan ana anahtarla birlikte saklanÄ±r. Bu dizin, yalnÄ±zca Jenkins denetleyicisinin Ã§alÄ±ÅŸtÄ±ÄŸÄ± iÅŸletim sistemi kullanÄ±cÄ±sÄ±nÄ±n bu dizine okuma ve yazma eriÅŸimi olacak ÅŸekilde yapÄ±landÄ±rÄ±lmalÄ±dÄ±r (yani, `chmod` deÄŸeri `0700` veya uygun dosya Ã¶znitelikleri kullanÄ±larak). **Ana anahtar** (kriptografik jargonla bazen "anahtar ÅŸifreleme anahtarÄ±" olarak adlandÄ±rÄ±lÄ±r) **ÅŸifrelenmemiÅŸ** olarak Jenkins denetleyici dosya sisteminde **`$JENKINS_HOME/secrets/master.key`** iÃ§inde saklanÄ±r ve bu dosyaya doÄŸrudan eriÅŸimi olan saldÄ±rganlara karÅŸÄ± koruma saÄŸlamaz. Ã‡oÄŸu kullanÄ±cÄ± ve geliÅŸtirici, bu ÅŸifreleme anahtarlarÄ±nÄ± dolaylÄ± olarak ya genel sÄ±r verilerini ÅŸifrelemek iÃ§in [Secret](https://javadoc.jenkins.io/byShortName/Secret) API'si aracÄ±lÄ±ÄŸÄ±yla ya da kimlik bilgileri API'si aracÄ±lÄ±ÄŸÄ±yla kullanacaktÄ±r. Kriptografi meraklÄ±larÄ± iÃ§in, Jenkins, PKCS#5 dolgu ve rastgele IV'lerle ÅŸifre blok zincirleme (CBC) modunda AES kullanarak [CryptoConfidentialKey](https://javadoc.jenkins.io/byShortName/CryptoConfidentialKey) Ã¶rneklerini ÅŸifreler ve bunlar `$JENKINS_HOME/secrets/` iÃ§inde `CryptoConfidentialKey` kimliÄŸine karÅŸÄ±lÄ±k gelen bir dosya adÄ±yla saklanÄ±r. YaygÄ±n anahtar kimlikleri ÅŸunlarÄ± iÃ§erir:

* `hudson.util.Secret`: genel sÄ±rlar iÃ§in kullanÄ±lÄ±r;
* `com.cloudbees.plugins.credentials.SecretBytes.KEY`: bazÄ± kimlik bilgisi tÃ¼rleri iÃ§in kullanÄ±lÄ±r;
* `jenkins.model.Jenkins.crumbSalt`: [CSRF koruma mekanizmasÄ±](https://www.jenkins.io/doc/book/managing/security/#cross-site-request-forgery) tarafÄ±ndan kullanÄ±lÄ±r; ve

### Kimlik Bilgilerine EriÅŸim

Kimlik bilgileri, herhangi bir yapÄ±landÄ±rÄ±lmÄ±ÅŸ proje tarafÄ±ndan eriÅŸilebilen **kÃ¼resel saÄŸlayÄ±cÄ±lara** (`/credentials/`) veya **belirli projelere** (`/job/<project-name>/configure`) atanabilir ve bu nedenle yalnÄ±zca belirli projeden eriÅŸilebilir.

[**DokÃ¼manlara**](https://www.jenkins.io/blog/2019/02/21/credentials-masking/) gÃ¶re: Kapsamda olan kimlik bilgileri, sÄ±nÄ±rsÄ±z olarak pipeline'a sunulur. **YapÄ± gÃ¼nlÃ¼ÄŸÃ¼nde kazara ifÅŸayÄ± Ã¶nlemek** iÃ§in, kimlik bilgileri **normal Ã§Ä±ktÄ±lardan maskelenir**, bu nedenle `env` (Linux) veya `set` (Windows) Ã§aÄŸrÄ±sÄ± veya ortamlarÄ±nÄ± veya parametrelerini yazdÄ±ran programlar, kimlik bilgilerine eriÅŸimi olmayan kullanÄ±cÄ±lara yapÄ± gÃ¼nlÃ¼ÄŸÃ¼nde ifÅŸa etmez.

**Bu nedenle, bir saldÄ±rganÄ±n kimlik bilgilerini dÄ±ÅŸarÄ± Ã§Ä±karmak iÃ§in, Ã¶rneÄŸin, base64 ile kodlamasÄ± gerekir.**

## Referanslar

* [https://www.jenkins.io/doc/book/security/managing-security/](https://www.jenkins.io/doc/book/security/managing-security/)
* [https://www.jenkins.io/doc/book/managing/nodes/](https://www.jenkins.io/doc/book/managing/nodes/)
* [https://www.jenkins.io/doc/developer/security/secrets/](https://www.jenkins.io/doc/developer/security/secrets/)
* [https://www.jenkins.io/blog/2019/02/21/credentials-masking/](https://www.jenkins.io/blog/2019/02/21/credentials-masking/)
* [https://www.jenkins.io/doc/book/managing/security/#cross-site-request-forgery](https://www.jenkins.io/doc/book/managing/security/#cross-site-request-forgery)
* [https://www.jenkins.io/doc/developer/security/secrets/#encryption-of-secrets-and-credentials](https://www.jenkins.io/doc/developer/security/secrets/#encryption-of-secrets-and-credentials)
* [https://www.jenkins.io/doc/book/managing/nodes/](https://www.jenkins.io/doc/book/managing/nodes/)

{% hint style="success" %}
AWS Hacking Ã¶ÄŸrenin ve pratik yapÄ±n:<img src="/.gitbook/assets/image.png" alt="" data-size="line">[**HackTricks Training AWS Red Team Expert (ARTE)**](https://training.hacktricks.xyz/courses/arte)<img src="/.gitbook/assets/image.png" alt="" data-size="line">\
GCP Hacking Ã¶ÄŸrenin ve pratik yapÄ±n: <img src="/.gitbook/assets/image (2).png" alt="" data-size="line">[**HackTricks Training GCP Red Team Expert (GRTE)**<img src="/.gitbook/assets/image (2).png" alt="" data-size="line">](https://training.hacktricks.xyz/courses/grte)

<details>

<summary>HackTricks'i Destekleyin</summary>

* [**Abonelik planlarÄ±nÄ±**](https://github.com/sponsors/carlospolop) kontrol edin!
* ğŸ’¬ [**Discord grubuna**](https://discord.gg/hRep4RUj7f) veya [**telegram grubuna**](https://t.me/peass) katÄ±lÄ±n ya da **Twitter'da** ğŸ¦ [**@hacktricks\_live**](https://twitter.com/hacktricks\_live) **bizi takip edin.**
* **HackTricks'e PR gÃ¶ndererek hacking ipuÃ§larÄ±nÄ± paylaÅŸÄ±n** [**HackTricks**](https://github.com/carlospolop/hacktricks) ve [**HackTricks Cloud**](https://github.com/carlospolop/hacktricks-cloud) GitHub depolarÄ±nda.

</details>
{% endhint %}
