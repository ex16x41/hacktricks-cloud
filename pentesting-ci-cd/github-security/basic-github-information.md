# Temel Github Bilgisi

{% hint style="success" %}
AWS Hacking'i Ã¶ÄŸrenin ve pratik yapÄ±n:<img src="../../.gitbook/assets/image (1) (1).png" alt="" data-size="line">[**HackTricks EÄŸitim AWS KÄ±rmÄ±zÄ± TakÄ±m UzmanÄ± (ARTE)**](https://training.hacktricks.xyz/courses/arte)<img src="../../.gitbook/assets/image (1) (1).png" alt="" data-size="line">\
GCP Hacking'i Ã¶ÄŸrenin ve pratik yapÄ±n: <img src="../../.gitbook/assets/image (2).png" alt="" data-size="line">[**HackTricks EÄŸitim GCP KÄ±rmÄ±zÄ± TakÄ±m UzmanÄ± (GRTE)**<img src="../../.gitbook/assets/image (2).png" alt="" data-size="line">](https://training.hacktricks.xyz/courses/grte)

<details>

<summary>HackTricks'i Destekleyin</summary>

* [**abonelik planlarÄ±nÄ±**](https://github.com/sponsors/carlospolop) kontrol edin!
* **ğŸ’¬ [**Discord grubuna**](https://discord.gg/hRep4RUj7f) veya [**telegram grubuna**](https://t.me/peass) katÄ±lÄ±n ya da **Twitter'da** ğŸ¦ [**@hacktricks\_live**](https://twitter.com/hacktricks\_live)**'i takip edin.**
* **Hacking ipuÃ§larÄ±nÄ± paylaÅŸmak iÃ§in** [**HackTricks**](https://github.com/carlospolop/hacktricks) ve [**HackTricks Cloud**](https://github.com/carlospolop/hacktricks-cloud) github reposuna PR gÃ¶nderin.

</details>
{% endhint %}

## Temel YapÄ±

BÃ¼yÃ¼k bir **ÅŸirketin** temel github ortam yapÄ±sÄ±, **birden fazla organizasyona sahip olan bir **ÅŸirket** sahibi olmaktÄ±r ve her biri **birkaÃ§ depo** ve **birkaÃ§ takÄ±m** iÃ§erebilir. Daha kÃ¼Ã§Ã¼k ÅŸirketler sadece **bir organizasyona ve hiÃ§bir ÅŸirkete sahip olabilir**.

Bir kullanÄ±cÄ± aÃ§Ä±sÄ±ndan, bir **kullanÄ±cÄ±** **farklÄ± ÅŸirketler ve organizasyonlar** Ã¼yesi olabilir. Ä°Ã§inde, kullanÄ±cÄ± **farklÄ± ÅŸirket, organizasyon ve depo rollerine** sahip olabilir.

AyrÄ±ca, bir kullanÄ±cÄ± **farklÄ± takÄ±mlarda** farklÄ± ÅŸirket, organizasyon veya depo rollerine sahip olabilir.

Ve nihayetinde **depolar Ã¶zel koruma mekanizmalarÄ±na sahip olabilir**.

## AyrÄ±calÄ±klar

### Åirket Rolleri

* **Åirket sahibi**: Bu role sahip kiÅŸiler **yÃ¶netici yÃ¶netimi, ÅŸirket iÃ§indeki organizasyonlarÄ± yÃ¶netme, ÅŸirket ayarlarÄ±nÄ± yÃ¶netme, organizasyonlar arasÄ±nda politika uygulama** yetkisine sahiptir. Ancak, **organizasyon ayarlarÄ±na veya iÃ§eriÄŸine eriÅŸemezler**; organizasyon sahibi yapÄ±lmadÄ±klarÄ± veya bir organizasyona ait bir depoya doÄŸrudan eriÅŸim verilmediÄŸi sÃ¼rece.
* **Åirket Ã¼yeleri**: Åirketinizin sahip olduÄŸu organizasyonlarÄ±n Ã¼yeleri de **otomatik olarak ÅŸirketin Ã¼yeleridir**.

### Organizasyon Rolleri

Bir organizasyonda kullanÄ±cÄ±lar farklÄ± rollere sahip olabilir:

* **Organizasyon sahipleri**: Organizasyon sahipleri, **organizasyonunuza tam yÃ¶netim eriÅŸimine** sahiptir. Bu rol sÄ±nÄ±rlÄ± olmalÄ±, ancak organizasyonunuzda en az iki kiÅŸiye verilmelidir.
* **Organizasyon Ã¼yeleri**: **VarsayÄ±lan**, yÃ¶netici olmayan rol **organizasyon Ã¼yeleridir**. VarsayÄ±lan olarak, organizasyon Ã¼yeleri **bir dizi izne** sahiptir.
* **Faturalama yÃ¶neticileri**: Faturalama yÃ¶neticileri, **organizasyonunuzun faturalama ayarlarÄ±nÄ± yÃ¶netebilen** kullanÄ±cÄ±lardÄ±r, Ã¶rneÄŸin Ã¶deme bilgileri.
* **GÃ¼venlik YÃ¶neticileri**: Organizasyon sahiplerinin herhangi bir takÄ±ma atayabileceÄŸi bir roldÃ¼r. UygulandÄ±ÄŸÄ±nda, takÄ±mÄ±n her Ã¼yesine **organizasyon genelinde gÃ¼venlik uyarÄ±larÄ±nÄ± ve ayarlarÄ±nÄ± yÃ¶netme izinleri ile organizasyondaki tÃ¼m depolar iÃ§in okuma izinleri** verir.
* EÄŸer organizasyonunuzun bir gÃ¼venlik takÄ±mÄ± varsa, gÃ¼venlik yÃ¶neticisi rolÃ¼nÃ¼ kullanarak takÄ±m Ã¼yelerine organizasyona en az eriÅŸimi verebilirsiniz.
* **Github Uygulama yÃ¶neticileri**: Bir organizasyona ait GitHub UygulamalarÄ±nÄ± **yÃ¶netmek iÃ§in ek kullanÄ±cÄ±lara izin vermek** amacÄ±yla, bir sahibi onlara GitHub Uygulama yÃ¶neticisi izinleri verebilir.
* **DÄ±ÅŸ iÅŸbirlikÃ§ileri**: DÄ±ÅŸ iÅŸbirlikÃ§isi, **bir veya daha fazla organizasyon deposuna eriÅŸimi olan ancak organizasyonun aÃ§Ä±kÃ§a bir Ã¼yesi olmayan** kiÅŸidir.

Bu rollerin izinlerini bu tabloda **karÅŸÄ±laÅŸtÄ±rabilirsiniz**: [https://docs.github.com/en/organizations/managing-peoples-access-to-your-organization-with-roles/roles-in-an-organization#permissions-for-organization-roles](https://docs.github.com/en/organizations/managing-peoples-access-to-your-organization-with-roles/roles-in-an-organization#permissions-for-organization-roles)

### Ãœye AyrÄ±calÄ±klarÄ±

_https://github.com/organizations/\<org\_name>/settings/member\_privileges_ adresinde, **organizasyonun bir parÃ§asÄ± olmanÄ±n getirdiÄŸi izinleri** gÃ¶rebilirsiniz.

Burada yapÄ±landÄ±rÄ±lan ayarlar, organizasyon Ã¼yelerinin aÅŸaÄŸÄ±daki izinlerini gÃ¶sterecektir:

* TÃ¼m organizasyon depolarÄ± Ã¼zerinde yÃ¶netici, yazar, okuyucu veya hiÃ§bir izin olma.
* Ãœyelerin Ã¶zel, dahili veya genel depolar oluÅŸturup oluÅŸturamayacaÄŸÄ±.
* DepolarÄ±n Ã§atallanmasÄ±nÄ±n mÃ¼mkÃ¼n olup olmadÄ±ÄŸÄ±.
* DÄ±ÅŸ iÅŸbirlikÃ§ilerinin davet edilip edilemeyeceÄŸi.
* Genel veya Ã¶zel sitelerin yayÄ±nlanÄ±p yayÄ±nlanamayacaÄŸÄ±.
* YÃ¶neticilerin depolar Ã¼zerindeki izinleri.
* Ãœyelerin yeni takÄ±mlar oluÅŸturup oluÅŸturamayacaÄŸÄ±.

### Depo Rolleri

VarsayÄ±lan olarak depo rolleri oluÅŸturulur:

* **Okuma**: Projenizi gÃ¶rÃ¼ntÃ¼lemek veya tartÄ±ÅŸmak isteyen **kod katkÄ±da bulunmayanlar** iÃ§in Ã¶nerilir.
* **Triage**: Yazma eriÅŸimi olmadan **sorunlarÄ± ve Ã§ekme isteklerini proaktif bir ÅŸekilde yÃ¶netmesi gereken katkÄ±da bulunanlar** iÃ§in Ã¶nerilir.
* **Yazma**: Projenize **aktif olarak katkÄ±da bulunanlar** iÃ§in Ã¶nerilir.
* **BakÄ±m**: Hassas veya yÄ±kÄ±cÄ± eylemlere eriÅŸim olmadan **depolarÄ± yÃ¶netmesi gereken proje yÃ¶neticileri** iÃ§in Ã¶nerilir.
* **YÃ¶netici**: **Proje Ã¼zerinde tam eriÅŸime** ihtiyaÃ§ duyan kiÅŸiler iÃ§in Ã¶nerilir; bu, gÃ¼venliÄŸi yÃ¶netme veya bir depoyu silme gibi hassas ve yÄ±kÄ±cÄ± eylemleri iÃ§erir.

Her rolÃ¼n izinlerini bu tabloda **karÅŸÄ±laÅŸtÄ±rabilirsiniz** [https://docs.github.com/en/organizations/managing-access-to-your-organizations-repositories/repository-roles-for-an-organization#permissions-for-each-role](https://docs.github.com/en/organizations/managing-access-to-your-organizations-repositories/repository-roles-for-an-organization#permissions-for-each-role)

AyrÄ±ca _https://github.com/organizations/\<org\_name>/settings/roles_ adresinde **kendi rollerinizi oluÅŸturabilirsiniz**.

### TakÄ±mlar

Bir organizasyonda oluÅŸturulan takÄ±mlarÄ± _https://github.com/orgs/\<org\_name>/teams_ adresinde **listeleyebilirsiniz**. DiÄŸer takÄ±mlarÄ±n alt takÄ±mlarÄ±nÄ± gÃ¶rmek iÃ§in her ana takÄ±ma eriÅŸmeniz gerektiÄŸini unutmayÄ±n.

### KullanÄ±cÄ±lar

Bir organizasyonun kullanÄ±cÄ±larÄ± _https://github.com/orgs/\<org\_name>/people_ adresinde **listeleyebilirsiniz**.

Her kullanÄ±cÄ±nÄ±n bilgileri iÃ§inde, **kullanÄ±cÄ±nÄ±n Ã¼yesi olduÄŸu takÄ±mlarÄ±** ve **kullanÄ±cÄ±nÄ±n eriÅŸim saÄŸladÄ±ÄŸÄ± depolarÄ±** gÃ¶rebilirsiniz.

## Github Kimlik DoÄŸrulamasÄ±

Github, hesabÄ±nÄ±za kimlik doÄŸrulamasÄ± yapmak ve sizin adÄ±nÄ±za eylemler gerÃ§ekleÅŸtirmek iÃ§in farklÄ± yollar sunar.

### Web EriÅŸimi

**github.com** adresine eriÅŸerek **kullanÄ±cÄ± adÄ±nÄ±z ve ÅŸifreniz** (ve potansiyel olarak bir **2FA**) ile giriÅŸ yapabilirsiniz.

### **SSH AnahtarlarÄ±**

HesabÄ±nÄ±zÄ±, ilgili **Ã¶zel anahtarÄ±n sizin adÄ±nÄ±za eylemler gerÃ§ekleÅŸtirmesine** izin veren bir veya daha fazla genel anahtar ile yapÄ±landÄ±rabilirsiniz. [https://github.com/settings/keys](https://github.com/settings/keys)

#### **GPG AnahtarlarÄ±**

Bu anahtarlarla kullanÄ±cÄ±yÄ± taklit edemezsiniz, ancak kullanmÄ±yorsanÄ±z, **imzasÄ±z gÃ¶nderim yaparken keÅŸfedilme olasÄ±lÄ±ÄŸÄ±nÄ±z** olabilir. Daha fazla bilgi iÃ§in [buradan dikkatli mod hakkÄ±nda Ã¶ÄŸrenin](https://docs.github.com/en/authentication/managing-commit-signature-verification/displaying-verification-statuses-for-all-of-your-commits#about-vigilant-mode).

### **KiÅŸisel EriÅŸim JetonlarÄ±**

Bir uygulamanÄ±n hesabÄ±nÄ±za eriÅŸim saÄŸlamasÄ± iÃ§in kiÅŸisel eriÅŸim jetonu oluÅŸturabilirsiniz. KiÅŸisel eriÅŸim jetonu oluÅŸtururken, **kullanÄ±cÄ±** **jetonun** sahip olacaÄŸÄ± **izinleri** **belirtmelidir**. [https://github.com/settings/tokens](https://github.com/settings/tokens)

### Oauth UygulamalarÄ±

Oauth uygulamalarÄ±, **github bilgilerinize eriÅŸim saÄŸlamak veya sizi taklit etmek iÃ§in izin isteyebilir**. Bu iÅŸlevselliÄŸin yaygÄ±n bir Ã¶rneÄŸi, bazÄ± platformlarda bulabileceÄŸiniz **github ile giriÅŸ yap** butonudur.

* Kendi **Oauth uygulamalarÄ±nÄ±zÄ±** [https://github.com/settings/developers](https://github.com/settings/developers) adresinde **oluÅŸturabilirsiniz**.
* HesabÄ±nÄ±za eriÅŸimi olan tÃ¼m **Oauth uygulamalarÄ±nÄ±** [https://github.com/settings/applications](https://github.com/settings/applications) adresinde gÃ¶rebilirsiniz.
* Oauth UygulamalarÄ±n isteyebileceÄŸi **kapsamlarÄ±** [https://docs.github.com/en/developers/apps/building-oauth-apps/scopes-for-oauth-apps](https://docs.github.com/en/developers/apps/building-oauth-apps/scopes-for-oauth-apps) adresinde gÃ¶rebilirsiniz.
* Bir **organizasyondaki** uygulamalarÄ±n Ã¼Ã§Ã¼ncÃ¼ taraf eriÅŸimini _https://github.com/organizations/\<org\_name>/settings/oauth\_application\_policy_ adresinde gÃ¶rebilirsiniz.

BazÄ± **gÃ¼venlik Ã¶nerileri**:

* Bir **OAuth UygulamasÄ±**, her zaman **tÃ¼m GitHub Ã¼zerinde kimlik doÄŸrulamasÄ± yapÄ±lmÄ±ÅŸ GitHub kullanÄ±cÄ±sÄ± gibi hareket etmelidir** (Ã¶rneÄŸin, kullanÄ±cÄ± bildirimleri saÄŸlarken) ve yalnÄ±zca belirtilen kapsamlarla eriÅŸim saÄŸlamalÄ±dÄ±r.
* Bir OAuth UygulamasÄ±, kimlik doÄŸrulamasÄ± yapÄ±lmÄ±ÅŸ kullanÄ±cÄ± iÃ§in "GitHub ile GiriÅŸ Yap" Ã¶zelliÄŸini etkinleÅŸtirerek bir kimlik saÄŸlayÄ±cÄ± olarak kullanÄ±labilir.
* **Tek bir depo** Ã¼zerinde hareket etmesini istiyorsanÄ±z bir **OAuth UygulamasÄ±** oluÅŸturmayÄ±n. `repo` OAuth kapsamÄ± ile, OAuth UygulamalarÄ± **kimlik doÄŸrulamasÄ± yapÄ±lmÄ±ÅŸ kullanÄ±cÄ±nÄ±n tÃ¼m** depolarÄ±nda **hareket edebilir**.
* **Bir takÄ±m veya ÅŸirket iÃ§in uygulama olarak hareket etmesi iÃ§in bir OAuth UygulamasÄ±** oluÅŸturmayÄ±n. OAuth UygulamalarÄ± **tek bir kullanÄ±cÄ±** olarak kimlik doÄŸrulamasÄ± yapar, bu nedenle bir kiÅŸi bir ÅŸirketin kullanmasÄ± iÃ§in bir OAuth UygulamasÄ± oluÅŸturursa ve sonra ÅŸirketten ayrÄ±lÄ±rsa, baÅŸka hiÃ§ kimse buna eriÅŸemez.
* **Daha fazla** bilgi iÃ§in [buradan](https://docs.github.com/en/developers/apps/getting-started-with-apps/about-apps#about-oauth-apps) bakabilirsiniz.

### Github UygulamalarÄ±

Github uygulamalarÄ±, **github bilgilerinize eriÅŸim saÄŸlamak veya sizi taklit etmek iÃ§in izin isteyebilir**. Github UygulamalarÄ±nda, uygulamanÄ±n eriÅŸim saÄŸlayacaÄŸÄ± depolarÄ± belirtmeniz gerekir.

* Bir GitHub UygulamasÄ± yÃ¼klemek iÃ§in, **bir organizasyon sahibi olmalÄ± veya bir depoda yÃ¶netici izinlerine sahip olmalÄ±sÄ±nÄ±z**.
* GitHub UygulamasÄ±, **kiÅŸisel bir hesap veya bir organizasyon ile baÄŸlantÄ± kurmalÄ±dÄ±r**.
* Kendi Github uygulamanÄ±zÄ± [https://github.com/settings/apps](https://github.com/settings/apps) adresinde oluÅŸturabilirsiniz.
* HesabÄ±nÄ±za eriÅŸimi olan tÃ¼m **Github uygulamalarÄ±nÄ±** [https://github.com/settings/apps/authorizations](https://github.com/settings/apps/authorizations) adresinde gÃ¶rebilirsiniz.
* Ä°ÅŸte **Github UygulamalarÄ± iÃ§in API UÃ§ NoktalarÄ±** [https://docs.github.com/en/rest/overview/endpoints-available-for-github-app](https://docs.github.com/en/rest/overview/endpoints-available-for-github-apps). UygulamanÄ±n izinlerine baÄŸlÄ± olarak, bunlardan bazÄ±larÄ±na eriÅŸebilecektir.
* Bir **organizasyondaki** yÃ¼klÃ¼ uygulamalarÄ± _https://github.com/organizations/\<org\_name>/settings/installations_ adresinde gÃ¶rebilirsiniz.

BazÄ± gÃ¼venlik Ã¶nerileri:

* Bir GitHub UygulamasÄ±, **bir kullanÄ±cÄ±dan baÄŸÄ±msÄ±z olarak eylemler gerÃ§ekleÅŸtirmelidir** (uygulama [kullanÄ±cÄ±dan sunucuya](https://docs.github.com/en/apps/building-github-apps/identifying-and-authorizing-users-for-github-apps#user-to-server-requests) jetonu kullanmÄ±yorsa). KullanÄ±cÄ±dan sunucuya eriÅŸim jetonlarÄ±nÄ± daha gÃ¼venli hale getirmek iÃ§in, 8 saat sonra sÃ¼resi dolacak eriÅŸim jetonlarÄ± ve yeni bir eriÅŸim jetonu iÃ§in deÄŸiÅŸtirilebilecek bir yenileme jetonu kullanabilirsiniz. Daha fazla bilgi iÃ§in, "[KullanÄ±cÄ±dan sunucuya eriÅŸim jetonlarÄ±nÄ± yenileme](https://docs.github.com/en/apps/building-github-apps/refreshing-user-to-server-access-tokens)" kÄ±smÄ±na bakÄ±n.
* GitHub UygulamasÄ±nÄ±n **belirli depolarla entegre olduÄŸundan emin olun**.
* GitHub UygulamasÄ±, **kiÅŸisel bir hesap veya bir organizasyon ile baÄŸlantÄ± kurmalÄ±dÄ±r**.
* GitHub UygulamasÄ±nÄ±n, bir kullanÄ±cÄ±nÄ±n yapabileceÄŸi her ÅŸeyi bilmesini ve yapmasÄ±nÄ± beklemeyin.
* **Sadece "GitHub ile GiriÅŸ Yap" hizmetine ihtiyacÄ±nÄ±z varsa GitHub UygulamasÄ± kullanmayÄ±n**. Ancak bir GitHub UygulamasÄ±, kullanÄ±cÄ±larÄ± _giriÅŸ yapmak_ ve diÄŸer ÅŸeyleri yapmak iÃ§in bir [kullanÄ±cÄ± tanÄ±mlama akÄ±ÅŸÄ±](https://docs.github.com/en/apps/building-github-apps/identifying-and-authorizing-users-for-github-apps) kullanabilir.
* EÄŸer uygulamanÄ±zÄ± GitHub Actions ile kullanÄ±yorsanÄ±z ve iÅŸ akÄ±ÅŸÄ± dosyalarÄ±nÄ± deÄŸiÅŸtirmek istiyorsanÄ±z, `workflow` kapsamÄ±nÄ± iÃ§eren bir OAuth jetonu ile kullanÄ±cÄ± adÄ±na kimlik doÄŸrulamasÄ± yapmalÄ±sÄ±nÄ±z. KullanÄ±cÄ±nÄ±n iÅŸ akÄ±ÅŸÄ± dosyasÄ±nÄ± iÃ§eren depoda yÃ¶netici veya yazma iznine sahip olmasÄ± gerekir. Daha fazla bilgi iÃ§in, "[OAuth uygulamalarÄ± iÃ§in kapsamlarÄ± anlama](https://docs.github.com/en/apps/building-oauth-apps/understanding-scopes-for-oauth-apps/#available-scopes)" kÄ±smÄ±na bakÄ±n.
* **Daha fazla** bilgi iÃ§in [buradan](https://docs.github.com/en/developers/apps/getting-started-with-apps/about-apps#about-github-apps) bakabilirsiniz.

### Github Actions

Bu, **github'da kimlik doÄŸrulama yapmanÄ±n bir yolu deÄŸildir**, ancak **kÃ¶tÃ¼ niyetli** bir Github Action, **github'a yetkisiz eriÅŸim** elde edebilir ve **verilen** **ayrÄ±calÄ±klara** baÄŸlÄ± olarak Ã§eÅŸitli **farklÄ± saldÄ±rÄ±lar** gerÃ§ekleÅŸtirilebilir. Daha fazla bilgi iÃ§in aÅŸaÄŸÄ±ya bakÄ±n.

## Git Eylemleri

Git eylemleri, bir olay gerÃ§ekleÅŸtiÄŸinde **kodun yÃ¼rÃ¼tÃ¼lmesini otomatikleÅŸtirmeye** olanak tanÄ±r. Genellikle yÃ¼rÃ¼tÃ¼len kod, **deponun koduyla bir ÅŸekilde iliÅŸkilidir** (belki bir docker konteyneri oluÅŸturmak veya PR'nin gizli bilgiler iÃ§ermediÄŸini kontrol etmek).

### YapÄ±landÄ±rma

_https://github.com/organizations/\<org\_name>/settings/actions_ adresinde, organizasyon iÃ§in **github eylemlerinin yapÄ±landÄ±rmasÄ±nÄ±** kontrol etmek mÃ¼mkÃ¼ndÃ¼r.

Github eylemlerinin kullanÄ±mÄ±nÄ± tamamen yasaklamak, **tÃ¼m github eylemlerine izin vermek** veya sadece belirli eylemlere izin vermek mÃ¼mkÃ¼ndÃ¼r.

AyrÄ±ca, bir Github Eylemi Ã§alÄ±ÅŸtÄ±rmak iÃ§in **kimin onay almasÄ± gerektiÄŸini** ve bir Github Eylemi Ã§alÄ±ÅŸtÄ±rÄ±ldÄ±ÄŸÄ±nda **GITHUB\_TOKEN'un izinlerini** yapÄ±landÄ±rmak da mÃ¼mkÃ¼ndÃ¼r.

### Git Gizli Bilgileri

Github Eylemleri genellikle github veya Ã¼Ã§Ã¼ncÃ¼ taraf uygulamalarla etkileÅŸimde bulunmak iÃ§in bazÄ± gizli bilgilere ihtiyaÃ§ duyar. **BunlarÄ± depoda dÃ¼z metin olarak koymaktan kaÃ§Ä±nmak** iÃ§in, github bunlarÄ± **Gizli Bilgiler** olarak koymanÄ±za izin verir.

Bu gizli bilgiler, **depo veya tÃ¼m organizasyon iÃ§in** yapÄ±landÄ±rÄ±labilir. Daha sonra, **Eylemin gizli bilgiye eriÅŸebilmesi iÃ§in** bunu ÅŸu ÅŸekilde belirtmeniz gerekir:
```yaml
steps:
- name: Hello world action
with: # Set the secret as an input
super_secret: ${{ secrets.SuperSecret }}
env: # Or as an environment variable
super_secret: ${{ secrets.SuperSecret }}
```
#### Ã–rnek Bash KullanÄ±mÄ± <a href="#example-using-bash" id="example-using-bash"></a>
```yaml
steps:
- shell: bash
env:
SUPER_SECRET: ${{ secrets.SuperSecret }}
run: |
example-command "$SUPER_SECRET"
```
{% hint style="warning" %}
Secrets **yalnÄ±zca bunlarÄ± tanÄ±mlayan Github Actions'tan eriÅŸilebilir**.

Repo veya organizasyonlarda yapÄ±landÄ±rÄ±ldÄ±ktan sonra **github kullanÄ±cÄ±larÄ± onlara tekrar eriÅŸemeyecek**, sadece **deÄŸiÅŸtirebileceklerdir**.
{% endhint %}

Bu nedenle, **github gizli bilgilerini Ã§almanÄ±n tek yolu, Github Action'Ä± yÃ¼rÃ¼ten makineye eriÅŸim saÄŸlamaktÄ±r** (bu senaryoda yalnÄ±zca Action iÃ§in tanÄ±mlanan gizli bilgilere eriÅŸebileceksiniz).

### Git OrtamlarÄ±

Github, **gizli bilgileri** saklayabileceÄŸiniz **ortamlar** oluÅŸturmanÄ±za olanak tanÄ±r. ArdÄ±ndan, ortam iÃ§indeki gizli bilgilere eriÅŸim vermek iÃ§in github action'a ÅŸÃ¶yle bir ÅŸey verebilirsiniz:
```yaml
jobs:
deployment:
runs-on: ubuntu-latest
environment: env_name
```
You can configure an environment to be **accessed** by **all branches** (default), **only protected** branches or **specify** which branches can access it.\
It can also set a **number of required reviews** before **executing** an **action** using an **environment** or **wait** some **time** before allowing deployments to proceed.

### Git Action Runner

A Github Action can be **executed inside the github environment** or can be executed in a **third party infrastructure** configured by the user.

Several organizations will allow to run Github Actions in a **third party infrastructure** as it use to be **cheaper**.

You can **list the self-hosted runners** of an organization in _https://github.com/organizations/\<org\_name>/settings/actions/runners_

The way to find which **Github Actions are being executed in non-github infrastructure** is to search for `runs-on: self-hosted` in the Github Action configuration yaml.

It's **not possible to run a Github Action of an organization inside a self hosted box** of a different organization because **a unique token is generated for the Runner** when configuring it to know where the runner belongs.

If the custom **Github Runner is configured in a machine inside AWS or GCP** for example, the Action **could have access to the metadata endpoint** and **steal the token of the service account** the machine is running with.

### Git Action Compromise

If all actions (or a malicious action) are allowed a user could use a **Github action** that is **malicious** and will **compromise** the **container** where it's being executed.

{% hint style="danger" %}
A **malicious Github Action** run could be **abused** by the attacker to:

* **Steal all the secrets** the Action has access to
* **Move laterally** if the Action is executed inside a **third party infrastructure** where the SA token used to run the machine can be accessed (probably via the metadata service)
* **Abuse the token** used by the **workflow** to **steal the code of the repo** where the Action is executed or **even modify it**.
{% endhint %}

## Branch Protections

Branch protections are designed to **not give complete control of a repository** to the users. The goal is to **put several protection methods before being able to write code inside some branch**.

The **branch protections of a repository** can be found in _https://github.com/\<orgname>/\<reponame>/settings/branches_

{% hint style="info" %}
It's **not possible to set a branch protection at organization level**. So all of them must be declared on each repo.
{% endhint %}

Different protections can be applied to a branch (like to master):

* You can **require a PR before merging** (so you cannot directly merge code over the branch). If this is select different other protections can be in place:
* **Require a number of approvals**. It's very common to require 1 or 2 more people to approve your PR so a single user isn't capable of merge code directly.
* **Dismiss approvals when new commits are pushed**. If not, a user may approve legit code and then the user could add malicious code and merge it.
* **Require reviews from Code Owners**. At least 1 code owner of the repo needs to approve the PR (so "random" users cannot approve it)
* **Restrict who can dismiss pull request reviews.** You can specify people or teams allowed to dismiss pull request reviews.
* **Allow specified actors to bypass pull request requirements**. These users will be able to bypass previous restrictions.
* **Require status checks to pass before merging.** Some checks needs to pass before being able to merge the commit (like a github action checking there isn't any cleartext secret).
* **Require conversation resolution before merging**. All comments on the code needs to be resolved before the PR can be merged.
* **Require signed commits**. The commits need to be signed.
* **Require linear history.** Prevent merge commits from being pushed to matching branches.
* **Include administrators**. If this isn't set, admins can bypass the restrictions.
* **Restrict who can push to matching branches**. Restrict who can send a PR.

{% hint style="info" %}
As you can see, even if you managed to obtain some credentials of a user, **repos might be protected avoiding you to pushing code to master** for example to compromise the CI/CD pipeline.
{% endhint %}

## References

* [https://docs.github.com/en/organizations/managing-access-to-your-organizations-repositories/repository-roles-for-an-organization](https://docs.github.com/en/organizations/managing-access-to-your-organizations-repositories/repository-roles-for-an-organization)
* [https://docs.github.com/en/enterprise-server@3.3/admin/user-management/managing-users-in-your-enterprise/roles-in-an-enterprise](https://docs.github.com/en/enterprise-server@3.3/admin/user-management/managing-users-in-your-enterprise/roles-in-an-enterprise)[https://docs.github.com/en/enterprise-server](https://docs.github.com/en/enterprise-server@3.3/admin/user-management/managing-users-in-your-enterprise/roles-in-an-enterprise)
* [https://docs.github.com/en/get-started/learning-about-github/access-permissions-on-github](https://docs.github.com/en/get-started/learning-about-github/access-permissions-on-github)
* [https://docs.github.com/en/account-and-profile/setting-up-and-managing-your-github-user-account/managing-user-account-settings/permission-levels-for-user-owned-project-boards](https://docs.github.com/en/account-and-profile/setting-up-and-managing-your-github-user-account/managing-user-account-settings/permission-levels-for-user-owned-project-boards)
* [https://docs.github.com/en/actions/security-guides/encrypted-secrets](https://docs.github.com/en/actions/security-guides/encrypted-secrets)

{% hint style="success" %}
Learn & practice AWS Hacking:<img src="../../.gitbook/assets/image (1) (1).png" alt="" data-size="line">[**HackTricks Training AWS Red Team Expert (ARTE)**](https://training.hacktricks.xyz/courses/arte)<img src="../../.gitbook/assets/image (1) (1).png" alt="" data-size="line">\
Learn & practice GCP Hacking: <img src="../../.gitbook/assets/image (2).png" alt="" data-size="line">[**HackTricks Training GCP Red Team Expert (GRTE)**<img src="../../.gitbook/assets/image (2).png" alt="" data-size="line">](https://training.hacktricks.xyz/courses/grte)

<details>

<summary>Support HackTricks</summary>

* Check the [**subscription plans**](https://github.com/sponsors/carlospolop)!
* **Join the** ğŸ’¬ [**Discord group**](https://discord.gg/hRep4RUj7f) or the [**telegram group**](https://t.me/peass) or **follow** us on **Twitter** ğŸ¦ [**@hacktricks\_live**](https://twitter.com/hacktricks\_live)**.**
* **Share hacking tricks by submitting PRs to the** [**HackTricks**](https://github.com/carlospolop/hacktricks) and [**HackTricks Cloud**](https://github.com/carlospolop/hacktricks-cloud) github repos.

</details>
{% endhint %}
