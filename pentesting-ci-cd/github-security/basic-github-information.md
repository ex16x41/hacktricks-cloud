# åŸºæœ¬çš„ Github ä¿¡æ¯

{% hint style="success" %}
å­¦ä¹ ä¸å®è·µ AWS é»‘å®¢æŠ€æœ¯ï¼š<img src="../../.gitbook/assets/image (1) (1) (1).png" alt="" data-size="line">[**HackTricks åŸ¹è®­ AWS çº¢é˜Ÿä¸“å®¶ (ARTE)**](https://training.hacktricks.xyz/courses/arte)<img src="../../.gitbook/assets/image (1) (1) (1).png" alt="" data-size="line">\
å­¦ä¹ ä¸å®è·µ GCP é»‘å®¢æŠ€æœ¯ï¼š<img src="../../.gitbook/assets/image (2).png" alt="" data-size="line">[**HackTricks åŸ¹è®­ GCP çº¢é˜Ÿä¸“å®¶ (GRTE)**<img src="../../.gitbook/assets/image (2).png" alt="" data-size="line">](https://training.hacktricks.xyz/courses/grte)

<details>

<summary>æ”¯æŒ HackTricks</summary>

* æŸ¥çœ‹ [**è®¢é˜…è®¡åˆ’**](https://github.com/sponsors/carlospolop)!
* **åŠ å…¥** ğŸ’¬ [**Discord ç¾¤ç»„**](https://discord.gg/hRep4RUj7f) æˆ– [**Telegram ç¾¤ç»„**](https://t.me/peass) æˆ– **å…³æ³¨** æˆ‘ä»¬çš„ **Twitter** ğŸ¦ [**@hacktricks\_live**](https://twitter.com/hacktricks_live)**.**
* **é€šè¿‡æäº¤ PR åˆ†äº«é»‘å®¢æŠ€å·§åˆ°** [**HackTricks**](https://github.com/carlospolop/hacktricks) å’Œ [**HackTricks Cloud**](https://github.com/carlospolop/hacktricks-cloud) GitHub ä»“åº“ã€‚

</details>
{% endhint %}

## åŸºæœ¬ç»“æ„

ä¸€ä¸ªå¤§ **å…¬å¸** çš„åŸºæœ¬ GitHub ç¯å¢ƒç»“æ„æ˜¯æ‹¥æœ‰ä¸€ä¸ª **ä¼ä¸š**ï¼Œè¯¥ä¼ä¸šæ‹¥æœ‰ **å¤šä¸ªç»„ç»‡**ï¼Œæ¯ä¸ªç»„ç»‡å¯èƒ½åŒ…å« **å¤šä¸ªä»“åº“** å’Œ **å¤šä¸ªå›¢é˜Ÿ**ã€‚è¾ƒå°çš„å…¬å¸å¯èƒ½åª **æ‹¥æœ‰ä¸€ä¸ªç»„ç»‡è€Œæ²¡æœ‰ä¼ä¸š**ã€‚

ä»ç”¨æˆ·çš„è§’åº¦æ¥çœ‹ï¼Œä¸€ä¸ª **ç”¨æˆ·** å¯ä»¥æ˜¯ **ä¸åŒä¼ä¸šå’Œç»„ç»‡çš„æˆå‘˜**ã€‚åœ¨è¿™äº›ç»„ç»‡ä¸­ï¼Œç”¨æˆ·å¯èƒ½æ‹¥æœ‰ **ä¸åŒçš„ä¼ä¸šã€ç»„ç»‡å’Œä»“åº“è§’è‰²**ã€‚

æ­¤å¤–ï¼Œç”¨æˆ·å¯èƒ½æ˜¯ **ä¸åŒå›¢é˜Ÿçš„ä¸€éƒ¨åˆ†**ï¼Œå¹¶æ‹¥æœ‰ä¸åŒçš„ä¼ä¸šã€ç»„ç»‡æˆ–ä»“åº“è§’è‰²ã€‚

æœ€åï¼Œ**ä»“åº“å¯èƒ½å…·æœ‰ç‰¹æ®Šçš„ä¿æŠ¤æœºåˆ¶**ã€‚

## æƒé™

### ä¼ä¸šè§’è‰²

* **ä¼ä¸šæ‰€æœ‰è€…**ï¼šæ‹¥æœ‰æ­¤è§’è‰²çš„äººå¯ä»¥ **ç®¡ç†ç®¡ç†å‘˜ã€ç®¡ç†ä¼ä¸šå†…çš„ç»„ç»‡ã€ç®¡ç†ä¼ä¸šè®¾ç½®ã€åœ¨ç»„ç»‡é—´å¼ºåˆ¶æ‰§è¡Œæ”¿ç­–**ã€‚ä½†æ˜¯ï¼Œä»–ä»¬ **ä¸èƒ½è®¿é—®ç»„ç»‡è®¾ç½®æˆ–å†…å®¹**ï¼Œé™¤éä»–ä»¬è¢«æŒ‡å®šä¸ºç»„ç»‡æ‰€æœ‰è€…æˆ–è¢«ç›´æ¥æˆäºˆå¯¹ç»„ç»‡æ‹¥æœ‰çš„ä»“åº“çš„è®¿é—®æƒé™ã€‚
* **ä¼ä¸šæˆå‘˜**ï¼šç”±æ‚¨çš„ä¼ä¸šæ‹¥æœ‰çš„ç»„ç»‡çš„æˆå‘˜ä¹Ÿæ˜¯ **è‡ªåŠ¨æˆä¸ºä¼ä¸šæˆå‘˜**ã€‚

### ç»„ç»‡è§’è‰²

åœ¨ç»„ç»‡ä¸­ï¼Œç”¨æˆ·å¯ä»¥æ‹¥æœ‰ä¸åŒçš„è§’è‰²ï¼š

* **ç»„ç»‡æ‰€æœ‰è€…**ï¼šç»„ç»‡æ‰€æœ‰è€…å¯¹æ‚¨çš„ç»„ç»‡æ‹¥æœ‰ **å®Œå…¨çš„ç®¡ç†è®¿é—®æƒé™**ã€‚æ­¤è§’è‰²åº”é™åˆ¶ï¼Œä½†ä¸åº”å°‘äºä¸¤äººã€‚
* **ç»„ç»‡æˆå‘˜**ï¼šç»„ç»‡ä¸­çš„ **é»˜è®¤** éç®¡ç†è§’è‰²æ˜¯ç»„ç»‡æˆå‘˜ã€‚é»˜è®¤æƒ…å†µä¸‹ï¼Œç»„ç»‡æˆå‘˜ **æ‹¥æœ‰ä¸€å®šçš„æƒé™**ã€‚
* **è´¦å•ç®¡ç†å‘˜**ï¼šè´¦å•ç®¡ç†å‘˜æ˜¯å¯ä»¥ **ç®¡ç†æ‚¨ç»„ç»‡çš„è´¦å•è®¾ç½®** çš„ç”¨æˆ·ï¼Œä¾‹å¦‚æ”¯ä»˜ä¿¡æ¯ã€‚
* **å®‰å…¨ç®¡ç†å‘˜**ï¼šè¿™æ˜¯ç»„ç»‡æ‰€æœ‰è€…å¯ä»¥åˆ†é…ç»™ç»„ç»‡ä¸­ä»»ä½•å›¢é˜Ÿçš„è§’è‰²ã€‚åº”ç”¨åï¼Œå®ƒèµ‹äºˆå›¢é˜Ÿçš„æ¯ä¸ªæˆå‘˜æƒé™ï¼Œä»¥ **ç®¡ç†ç»„ç»‡å†…çš„å®‰å…¨è­¦æŠ¥å’Œè®¾ç½®ï¼Œä»¥åŠå¯¹æ‰€æœ‰ä»“åº“çš„è¯»å–æƒé™**ã€‚
* å¦‚æœæ‚¨çš„ç»„ç»‡æœ‰å®‰å…¨å›¢é˜Ÿï¼Œæ‚¨å¯ä»¥ä½¿ç”¨å®‰å…¨ç®¡ç†å‘˜è§’è‰²ä¸ºå›¢é˜Ÿæˆå‘˜æä¾›ä»–ä»¬æ‰€éœ€çš„æœ€ä½è®¿é—®æƒé™ã€‚
* **GitHub åº”ç”¨ç®¡ç†å‘˜**ï¼šä¸ºäº†å…è®¸å…¶ä»–ç”¨æˆ· **ç®¡ç†ç»„ç»‡æ‹¥æœ‰çš„ GitHub åº”ç”¨**ï¼Œæ‰€æœ‰è€…å¯ä»¥æˆäºˆä»–ä»¬ GitHub åº”ç”¨ç®¡ç†å‘˜æƒé™ã€‚
* **å¤–éƒ¨åˆä½œè€…**ï¼šå¤–éƒ¨åˆä½œè€…æ˜¯æŒ‡ **å¯ä»¥è®¿é—®ä¸€ä¸ªæˆ–å¤šä¸ªç»„ç»‡ä»“åº“ä½†ä¸æ˜¯è¯¥ç»„ç»‡çš„æ˜ç¡®æˆå‘˜** çš„äººã€‚

æ‚¨å¯ä»¥åœ¨æ­¤è¡¨ä¸­ **æ¯”è¾ƒè¿™äº›è§’è‰²çš„æƒé™**ï¼š[https://docs.github.com/en/organizations/managing-peoples-access-to-your-organization-with-roles/roles-in-an-organization#permissions-for-organization-roles](https://docs.github.com/en/organizations/managing-peoples-access-to-your-organization-with-roles/roles-in-an-organization#permissions-for-organization-roles)

### æˆå‘˜æƒé™

åœ¨ _https://github.com/organizations/\<org\_name>/settings/member\_privileges_ ä¸­ï¼Œæ‚¨å¯ä»¥æŸ¥çœ‹ **ç”¨æˆ·ä»…å› æˆä¸ºç»„ç»‡çš„ä¸€éƒ¨åˆ†è€Œæ‹¥æœ‰çš„æƒé™**ã€‚

æ­¤å¤„é…ç½®çš„è®¾ç½®å°†æŒ‡ç¤ºç»„ç»‡æˆå‘˜çš„ä»¥ä¸‹æƒé™ï¼š

* å¯¹æ‰€æœ‰ç»„ç»‡ä»“åº“æ‹¥æœ‰ç®¡ç†å‘˜ã€å†™å…¥ã€è¯»å–æˆ–æ— æƒé™ã€‚
* æˆå‘˜æ˜¯å¦å¯ä»¥åˆ›å»ºç§æœ‰ã€å†…éƒ¨æˆ–å…¬å…±ä»“åº“ã€‚
* æ˜¯å¦å¯ä»¥å¯¹ä»“åº“è¿›è¡Œåˆ†å‰ã€‚
* æ˜¯å¦å¯ä»¥é‚€è¯·å¤–éƒ¨åˆä½œè€…ã€‚
* æ˜¯å¦å¯ä»¥å‘å¸ƒå…¬å…±æˆ–ç§æœ‰ç½‘ç«™ã€‚
* ç®¡ç†å‘˜å¯¹ä»“åº“çš„æƒé™ã€‚
* æˆå‘˜æ˜¯å¦å¯ä»¥åˆ›å»ºæ–°å›¢é˜Ÿã€‚

### ä»“åº“è§’è‰²

é»˜è®¤æƒ…å†µä¸‹åˆ›å»ºçš„ä»“åº“è§’è‰²ï¼š

* **è¯»å–**ï¼šæ¨èç»™ **éä»£ç è´¡çŒ®è€…**ï¼Œå¸Œæœ›æŸ¥çœ‹æˆ–è®¨è®ºæ‚¨çš„é¡¹ç›®ã€‚
* **åˆ†ç±»**ï¼šæ¨èç»™ **éœ€è¦ä¸»åŠ¨ç®¡ç†é—®é¢˜å’Œæ‹‰å–è¯·æ±‚çš„è´¡çŒ®è€…**ï¼Œä½†æ²¡æœ‰å†™å…¥æƒé™ã€‚
* **å†™å…¥**ï¼šæ¨èç»™ **ç§¯ææ¨é€åˆ°æ‚¨çš„é¡¹ç›®çš„è´¡çŒ®è€…**ã€‚
* **ç»´æŠ¤**ï¼šæ¨èç»™ **éœ€è¦ç®¡ç†ä»“åº“çš„é¡¹ç›®ç»ç†**ï¼Œä½†ä¸éœ€è¦è®¿é—®æ•æ„Ÿæˆ–ç ´åæ€§æ“ä½œã€‚
* **ç®¡ç†å‘˜**ï¼šæ¨èç»™éœ€è¦ **å®Œå…¨è®¿é—®é¡¹ç›®** çš„äººï¼ŒåŒ…æ‹¬ç®¡ç†å®‰å…¨æˆ–åˆ é™¤ä»“åº“ç­‰æ•æ„Ÿå’Œç ´åæ€§æ“ä½œã€‚

æ‚¨å¯ä»¥åœ¨æ­¤è¡¨ä¸­ **æ¯”è¾ƒæ¯ä¸ªè§’è‰²çš„æƒé™**ï¼š[https://docs.github.com/en/organizations/managing-access-to-your-organizations-repositories/repository-roles-for-an-organization#permissions-for-each-role](https://docs.github.com/en/organizations/managing-access-to-your-organizations-repositories/repository-roles-for-an-organization#permissions-for-each-role)

æ‚¨è¿˜å¯ä»¥åœ¨ _https://github.com/organizations/\<org\_name>/settings/roles_ ä¸­ **åˆ›å»ºè‡ªå·±çš„è§’è‰²**ã€‚

### å›¢é˜Ÿ

æ‚¨å¯ä»¥åœ¨ _https://github.com/orgs/\<org\_name>/teams_ ä¸­ **åˆ—å‡ºç»„ç»‡ä¸­åˆ›å»ºçš„å›¢é˜Ÿ**ã€‚è¯·æ³¨æ„ï¼Œè¦æŸ¥çœ‹å…¶ä»–å›¢é˜Ÿçš„å­å›¢é˜Ÿï¼Œæ‚¨éœ€è¦è®¿é—®æ¯ä¸ªçˆ¶å›¢é˜Ÿã€‚

### ç”¨æˆ·

ç»„ç»‡çš„ç”¨æˆ·å¯ä»¥åœ¨ _https://github.com/orgs/\<org\_name>/people_ ä¸­ **åˆ—å‡º**ã€‚

åœ¨æ¯ä¸ªç”¨æˆ·çš„ä¿¡æ¯ä¸­ï¼Œæ‚¨å¯ä»¥çœ‹åˆ° **ç”¨æˆ·æ˜¯å“ªäº›å›¢é˜Ÿçš„æˆå‘˜**ï¼Œä»¥åŠ **ç”¨æˆ·å¯ä»¥è®¿é—®å“ªäº›ä»“åº“**ã€‚

## GitHub è®¤è¯

GitHub æä¾›ä¸åŒçš„æ–¹å¼æ¥éªŒè¯æ‚¨çš„å¸æˆ·å¹¶ä»£è¡¨æ‚¨æ‰§è¡Œæ“ä½œã€‚

### ç½‘ç»œè®¿é—®

è®¿é—® **github.com**ï¼Œæ‚¨å¯ä»¥ä½¿ç”¨æ‚¨çš„ **ç”¨æˆ·åå’Œå¯†ç **ï¼ˆä»¥åŠ **å¯èƒ½çš„ 2FA**ï¼‰ç™»å½•ã€‚

### **SSH å¯†é’¥**

æ‚¨å¯ä»¥ä½¿ç”¨ä¸€ä¸ªæˆ–å¤šä¸ªå…¬é’¥é…ç½®æ‚¨çš„å¸æˆ·ï¼Œå…è®¸ç›¸å…³çš„ **ç§é’¥ä»£è¡¨æ‚¨æ‰§è¡Œæ“ä½œ**ã€‚[https://github.com/settings/keys](https://github.com/settings/keys)

#### **GPG å¯†é’¥**

æ‚¨ **ä¸èƒ½ä½¿ç”¨è¿™äº›å¯†é’¥å†’å……ç”¨æˆ·**ï¼Œä½†å¦‚æœæ‚¨ä¸ä½¿ç”¨å®ƒï¼Œå¯èƒ½ä¼šå¯¼è‡´æ‚¨ **è¢«å‘ç°å‘é€æ²¡æœ‰ç­¾åçš„æäº¤**ã€‚äº†è§£æ›´å¤šå…³äº [è­¦æƒ•æ¨¡å¼çš„ä¿¡æ¯](https://docs.github.com/en/authentication/managing-commit-signature-verification/displaying-verification-statuses-for-all-of-your-commits#about-vigilant-mode)ã€‚

### **ä¸ªäººè®¿é—®ä»¤ç‰Œ**

æ‚¨å¯ä»¥ç”Ÿæˆä¸ªäººè®¿é—®ä»¤ç‰Œï¼Œä»¥ **æˆäºˆåº”ç”¨ç¨‹åºè®¿é—®æ‚¨çš„å¸æˆ·**ã€‚åˆ›å»ºä¸ªäººè®¿é—®ä»¤ç‰Œæ—¶ï¼Œ**ç”¨æˆ·** éœ€è¦ **æŒ‡å®š** ä»¤ç‰Œå°†æ‹¥æœ‰çš„ **æƒé™**ã€‚[https://github.com/settings/tokens](https://github.com/settings/tokens)

### Oauth åº”ç”¨ç¨‹åº

Oauth åº”ç”¨ç¨‹åºå¯èƒ½ä¼šè¯·æ±‚æ‚¨ **è®¿é—®éƒ¨åˆ† GitHub ä¿¡æ¯æˆ–å†’å……æ‚¨** æ‰§è¡ŒæŸäº›æ“ä½œã€‚æ­¤åŠŸèƒ½çš„ä¸€ä¸ªå¸¸è§ç¤ºä¾‹æ˜¯æ‚¨å¯èƒ½åœ¨æŸäº›å¹³å°ä¸Šæ‰¾åˆ°çš„ **ä½¿ç”¨ GitHub ç™»å½•æŒ‰é’®**ã€‚

* æ‚¨å¯ä»¥åœ¨ [https://github.com/settings/developers](https://github.com/settings/developers) ä¸­ **åˆ›å»º** æ‚¨è‡ªå·±çš„ **Oauth åº”ç”¨ç¨‹åº**ã€‚
* æ‚¨å¯ä»¥åœ¨ [https://github.com/settings/applications](https://github.com/settings/applications) ä¸­æŸ¥çœ‹æ‰€æœ‰ **è®¿é—®æ‚¨å¸æˆ·çš„ Oauth åº”ç”¨ç¨‹åº**ã€‚
* æ‚¨å¯ä»¥åœ¨ [https://docs.github.com/en/developers/apps/building-oauth-apps/scopes-for-oauth-apps](https://docs.github.com/en/developers/apps/building-oauth-apps/scopes-for-oauth-apps) ä¸­æŸ¥çœ‹ **Oauth åº”ç”¨ç¨‹åºå¯ä»¥è¯·æ±‚çš„èŒƒå›´**ã€‚
* æ‚¨å¯ä»¥åœ¨ _https://github.com/organizations/\<org\_name>/settings/oauth\_application\_policy_ ä¸­æŸ¥çœ‹ç»„ç»‡ä¸­åº”ç”¨ç¨‹åºçš„ç¬¬ä¸‰æ–¹è®¿é—®ã€‚

ä¸€äº› **å®‰å…¨å»ºè®®**ï¼š

* **OAuth åº”ç”¨ç¨‹åº** åº”å§‹ç»ˆ **åœ¨ GitHub çš„æ‰€æœ‰åœ°æ–¹ä½œä¸ºç»è¿‡èº«ä»½éªŒè¯çš„ GitHub ç”¨æˆ·æ“ä½œ**ï¼ˆä¾‹å¦‚ï¼Œåœ¨æä¾›ç”¨æˆ·é€šçŸ¥æ—¶ï¼‰ï¼Œå¹¶ä»…è®¿é—®æŒ‡å®šçš„èŒƒå›´ã€‚
* OAuth åº”ç”¨ç¨‹åºå¯ä»¥é€šè¿‡ä¸ºç»è¿‡èº«ä»½éªŒè¯çš„ç”¨æˆ·å¯ç”¨â€œä½¿ç”¨ GitHub ç™»å½•â€ä½œä¸ºèº«ä»½æä¾›è€…ã€‚
* **ä¸è¦** æ„å»º **OAuth åº”ç”¨ç¨‹åº**ï¼Œå¦‚æœæ‚¨å¸Œæœ›æ‚¨çš„åº”ç”¨ç¨‹åºåœ¨ **å•ä¸ªä»“åº“** ä¸Šæ“ä½œã€‚ä½¿ç”¨ `repo` OAuth èŒƒå›´ï¼ŒOAuth åº”ç”¨ç¨‹åºå¯ä»¥ **åœ¨æ‰€æœ‰** ç»è¿‡èº«ä»½éªŒè¯çš„ç”¨æˆ·çš„ä»“åº“ä¸Šæ“ä½œã€‚
* **ä¸è¦** æ„å»º OAuth åº”ç”¨ç¨‹åºä»¥ä½œä¸ºæ‚¨ **å›¢é˜Ÿæˆ–å…¬å¸çš„** åº”ç”¨ç¨‹åºã€‚OAuth åº”ç”¨ç¨‹åºä½œä¸º **å•ä¸ªç”¨æˆ·** è¿›è¡Œèº«ä»½éªŒè¯ï¼Œå› æ­¤å¦‚æœä¸€ä¸ªäººåˆ›å»ºäº†ä¸€ä¸ªä¾›å…¬å¸ä½¿ç”¨çš„ OAuth åº”ç”¨ç¨‹åºï¼Œç„¶åä»–ä»¬ç¦»å¼€å…¬å¸ï¼Œå…¶ä»–äººå°†æ— æ³•è®¿é—®å®ƒã€‚
* **æ›´å¤š** ä¿¡æ¯åœ¨ [è¿™é‡Œ](https://docs.github.com/en/developers/apps/getting-started-with-apps/about-apps#about-oauth-apps)ã€‚

### GitHub åº”ç”¨ç¨‹åº

GitHub åº”ç”¨ç¨‹åºå¯ä»¥è¯·æ±‚æƒé™ä»¥ **è®¿é—®æ‚¨çš„ GitHub ä¿¡æ¯æˆ–å†’å……æ‚¨** æ‰§è¡Œç‰¹å®šæ“ä½œã€‚åœ¨ GitHub åº”ç”¨ç¨‹åºä¸­ï¼Œæ‚¨éœ€è¦æŒ‡å®šåº”ç”¨ç¨‹åºå°†è®¿é—®çš„ä»“åº“ã€‚

* è¦å®‰è£… GitHub åº”ç”¨ç¨‹åºï¼Œæ‚¨å¿…é¡»æ˜¯ **ç»„ç»‡æ‰€æœ‰è€…æˆ–åœ¨ä»“åº“ä¸­æ‹¥æœ‰ç®¡ç†å‘˜æƒé™**ã€‚
* GitHub åº”ç”¨ç¨‹åºåº” **è¿æ¥åˆ°ä¸ªäººå¸æˆ·æˆ–ç»„ç»‡**ã€‚
* æ‚¨å¯ä»¥åœ¨ [https://github.com/settings/apps](https://github.com/settings/apps) ä¸­åˆ›å»ºè‡ªå·±çš„ GitHub åº”ç”¨ç¨‹åºã€‚
* æ‚¨å¯ä»¥åœ¨ [https://github.com/settings/apps/authorizations](https://github.com/settings/apps/authorizations) ä¸­æŸ¥çœ‹æ‰€æœ‰ **è®¿é—®æ‚¨å¸æˆ·çš„ GitHub åº”ç”¨ç¨‹åº**ã€‚
* è¿™äº›æ˜¯ **GitHub åº”ç”¨ç¨‹åºçš„ API ç«¯ç‚¹** [https://docs.github.com/en/rest/overview/endpoints-available-for-github-app](https://docs.github.com/en/rest/overview/endpoints-available-for-github-apps)ã€‚æ ¹æ®åº”ç”¨ç¨‹åºçš„æƒé™ï¼Œå®ƒå°†èƒ½å¤Ÿè®¿é—®å…¶ä¸­çš„ä¸€äº›ã€‚
* æ‚¨å¯ä»¥åœ¨ _https://github.com/organizations/\<org\_name>/settings/installations_ ä¸­æŸ¥çœ‹ç»„ç»‡ä¸­çš„å·²å®‰è£…åº”ç”¨ç¨‹åºã€‚

ä¸€äº›å®‰å…¨å»ºè®®ï¼š

* GitHub åº”ç”¨ç¨‹åºåº” **ç‹¬ç«‹äºç”¨æˆ·é‡‡å–è¡ŒåŠ¨**ï¼ˆé™¤éåº”ç”¨ç¨‹åºä½¿ç”¨ [ç”¨æˆ·åˆ°æœåŠ¡å™¨](https://docs.github.com/en/apps/building-github-apps/identifying-and-authorizing-users-for-github-apps#user-to-server-requests) ä»¤ç‰Œï¼‰ã€‚ä¸ºäº†ä½¿ç”¨æˆ·åˆ°æœåŠ¡å™¨çš„è®¿é—®ä»¤ç‰Œæ›´å®‰å…¨ï¼Œæ‚¨å¯ä»¥ä½¿ç”¨å°†åœ¨ 8 å°æ—¶åè¿‡æœŸçš„è®¿é—®ä»¤ç‰Œï¼Œä»¥åŠå¯ä»¥äº¤æ¢ä¸ºæ–°è®¿é—®ä»¤ç‰Œçš„åˆ·æ–°ä»¤ç‰Œã€‚æœ‰å…³æ›´å¤šä¿¡æ¯ï¼Œè¯·å‚è§â€œ[åˆ·æ–°ç”¨æˆ·åˆ°æœåŠ¡å™¨çš„è®¿é—®ä»¤ç‰Œ](https://docs.github.com/en/apps/building-github-apps/refreshing-user-to-server-access-tokens)â€ã€‚
* ç¡®ä¿ GitHub åº”ç”¨ç¨‹åºä¸ **ç‰¹å®šä»“åº“** é›†æˆã€‚
* GitHub åº”ç”¨ç¨‹åºåº” **è¿æ¥åˆ°ä¸ªäººå¸æˆ·æˆ–ç»„ç»‡**ã€‚
* ä¸è¦æœŸæœ› GitHub åº”ç”¨ç¨‹åºçŸ¥é“å¹¶åšç”¨æˆ·å¯ä»¥åšçš„æ‰€æœ‰äº‹æƒ…ã€‚
* **å¦‚æœæ‚¨åªéœ€è¦â€œä½¿ç”¨ GitHub ç™»å½•â€æœåŠ¡ï¼Œè¯·ä¸è¦ä½¿ç”¨ GitHub åº”ç”¨ç¨‹åº**ã€‚ä½†æ˜¯ï¼ŒGitHub åº”ç”¨ç¨‹åºå¯ä»¥ä½¿ç”¨ [ç”¨æˆ·è¯†åˆ«æµç¨‹](https://docs.github.com/en/apps/building-github-apps/identifying-and-authorizing-users-for-github-apps) æ¥ç™»å½•ç”¨æˆ· _å¹¶_ æ‰§è¡Œå…¶ä»–æ“ä½œã€‚
* å¦‚æœæ‚¨åœ¨ GitHub Actions ä¸­ä½¿ç”¨æ‚¨çš„åº”ç”¨ç¨‹åºå¹¶å¸Œæœ›ä¿®æ”¹å·¥ä½œæµæ–‡ä»¶ï¼Œæ‚¨å¿…é¡»ä»£è¡¨ç”¨æˆ·ä½¿ç”¨åŒ…å« `workflow` èŒƒå›´çš„ OAuth ä»¤ç‰Œè¿›è¡Œèº«ä»½éªŒè¯ã€‚ç”¨æˆ·å¿…é¡»å¯¹åŒ…å«å·¥ä½œæµæ–‡ä»¶çš„ä»“åº“å…·æœ‰ç®¡ç†å‘˜æˆ–å†™å…¥æƒé™ã€‚æœ‰å…³æ›´å¤šä¿¡æ¯ï¼Œè¯·å‚è§â€œ[äº†è§£ OAuth åº”ç”¨ç¨‹åºçš„èŒƒå›´](https://docs.github.com/en/apps/building-oauth-apps/understanding-scopes-for-oauth-apps/#available-scopes)â€ã€‚
* **æ›´å¤š** ä¿¡æ¯åœ¨ [è¿™é‡Œ](https://docs.github.com/en/developers/apps/getting-started-with-apps/about-apps#about-github-apps)ã€‚

### GitHub Actions

è¿™ **ä¸æ˜¯åœ¨ GitHub ä¸­è¿›è¡Œèº«ä»½éªŒè¯çš„æ–¹æ³•**ï¼Œä½†ä¸€ä¸ª **æ¶æ„çš„** GitHub Action å¯èƒ½ä¼šè·å¾— **æœªç»æˆæƒçš„è®¿é—® GitHub**ï¼Œå¹¶ä¸” **æ ¹æ®** èµ‹äºˆ Action çš„ **æƒé™**ï¼Œå¯èƒ½ä¼šè¿›è¡Œå‡ ç§ **ä¸åŒçš„æ”»å‡»**ã€‚æœ‰å…³æ›´å¤šä¿¡æ¯ï¼Œè¯·å‚è§ä¸‹æ–‡ã€‚

## Git æ“ä½œ

Git æ“ä½œå…è®¸åœ¨ **äº‹ä»¶å‘ç”Ÿæ—¶è‡ªåŠ¨æ‰§è¡Œä»£ç **ã€‚é€šå¸¸æ‰§è¡Œçš„ä»£ç ä¸ **ä»“åº“çš„ä»£ç æœ‰æŸç§å…³ç³»**ï¼ˆå¯èƒ½æ„å»ºä¸€ä¸ª Docker å®¹å™¨æˆ–æ£€æŸ¥ PR æ˜¯å¦åŒ…å«ç§˜å¯†ï¼‰ã€‚

### é…ç½®

åœ¨ _https://github.com/organizations/\<org\_name>/settings/actions_ ä¸­ï¼Œå¯ä»¥æ£€æŸ¥ç»„ç»‡çš„ **GitHub Actions é…ç½®**ã€‚

å¯ä»¥å®Œå…¨ç¦æ­¢ä½¿ç”¨ GitHub Actionsï¼Œ**å…è®¸æ‰€æœ‰ GitHub Actions**ï¼Œæˆ–ä»…å…è®¸æŸäº›æ“ä½œã€‚

è¿˜å¯ä»¥é…ç½® **è°éœ€è¦æ‰¹å‡†æ‰èƒ½è¿è¡Œ GitHub Action** ä»¥åŠè¿è¡Œæ—¶ GitHub Action çš„ **GITHUB\_TOKEN æƒé™**ã€‚

### Git ç§˜å¯†

GitHub Action é€šå¸¸éœ€è¦æŸç§ç§˜å¯†ä¸ GitHub æˆ–ç¬¬ä¸‰æ–¹åº”ç”¨ç¨‹åºè¿›è¡Œäº¤äº’ã€‚ä¸ºäº† **é¿å…å°†å®ƒä»¬ä»¥æ˜æ–‡å½¢å¼æ”¾å…¥ä»“åº“**ï¼ŒGitHub å…è®¸å°†å®ƒä»¬ä½œä¸º **Secrets** æ”¾ç½®ã€‚

è¿™äº›ç§˜å¯†å¯ä»¥ä¸º **ä»“åº“æˆ–æ•´ä¸ªç»„ç»‡** é…ç½®ã€‚ç„¶åï¼Œä¸ºäº†ä½¿ **Action èƒ½å¤Ÿè®¿é—®ç§˜å¯†**ï¼Œæ‚¨éœ€è¦å°†å…¶å£°æ˜ä¸ºï¼š
```yaml
steps:
- name: Hello world action
with: # Set the secret as an input
super_secret: ${{ secrets.SuperSecret }}
env: # Or as an environment variable
super_secret: ${{ secrets.SuperSecret }}
```
#### ä½¿ç”¨ Bash çš„ç¤ºä¾‹ <a href="#example-using-bash" id="example-using-bash"></a>
```yaml
steps:
- shell: bash
env:
SUPER_SECRET: ${{ secrets.SuperSecret }}
run: |
example-command "$SUPER_SECRET"
```
{% hint style="warning" %}
Secrets **åªèƒ½ä»å£°æ˜å®ƒä»¬çš„ Github Actions è®¿é—®**ã€‚

ä¸€æ—¦åœ¨ä»“åº“æˆ–ç»„ç»‡ä¸­é…ç½®ï¼Œ**github ç”¨æˆ·å°†æ— æ³•å†æ¬¡è®¿é—®å®ƒä»¬**ï¼Œä»–ä»¬åªèƒ½**æ›´æ”¹å®ƒä»¬**ã€‚
{% endhint %}

å› æ­¤ï¼Œ**çªƒå– github secrets çš„å”¯ä¸€æ–¹æ³•æ˜¯èƒ½å¤Ÿè®¿é—®æ‰§è¡Œ Github Action çš„æœºå™¨**ï¼ˆåœ¨è¿™ç§æƒ…å†µä¸‹ï¼Œæ‚¨å°†åªèƒ½è®¿é—®ä¸ºè¯¥ Action å£°æ˜çš„ secretsï¼‰ã€‚

### Git ç¯å¢ƒ

Github å…è®¸åˆ›å»º **ç¯å¢ƒ**ï¼Œæ‚¨å¯ä»¥åœ¨å…¶ä¸­ä¿å­˜ **secrets**ã€‚ç„¶åï¼Œæ‚¨å¯ä»¥é€šè¿‡ç±»ä¼¼ä»¥ä¸‹æ–¹å¼æˆäºˆ github action è®¿é—®ç¯å¢ƒå†… secrets çš„æƒé™ï¼š
```yaml
jobs:
deployment:
runs-on: ubuntu-latest
environment: env_name
```
æ‚¨å¯ä»¥é…ç½®ä¸€ä¸ªç¯å¢ƒï¼Œä½¿å…¶**è¢«æ‰€æœ‰åˆ†æ”¯è®¿é—®**ï¼ˆé»˜è®¤ï¼‰ã€**ä»…å—ä¿æŠ¤çš„**åˆ†æ”¯æˆ–**æŒ‡å®š**å¯ä»¥è®¿é—®çš„åˆ†æ”¯ã€‚\
å®ƒè¿˜å¯ä»¥è®¾ç½®**æ‰§è¡Œ**æŸä¸ª**æ“ä½œ**ä¹‹å‰æ‰€éœ€çš„**å®¡æ ¸æ•°é‡**ï¼Œæˆ–è€…**ç­‰å¾…**ä¸€æ®µ**æ—¶é—´**åå†å…è®¸éƒ¨ç½²ç»§ç»­ã€‚

### Git Action Runner

Github Actionå¯ä»¥**åœ¨githubç¯å¢ƒä¸­æ‰§è¡Œ**ï¼Œä¹Ÿå¯ä»¥åœ¨ç”¨æˆ·é…ç½®çš„**ç¬¬ä¸‰æ–¹åŸºç¡€è®¾æ–½**ä¸­æ‰§è¡Œã€‚

è®¸å¤šç»„ç»‡å…è®¸åœ¨**ç¬¬ä¸‰æ–¹åŸºç¡€è®¾æ–½**ä¸­è¿è¡ŒGithub Actionsï¼Œå› ä¸ºè¿™é€šå¸¸æ˜¯**æ›´ä¾¿å®œ**çš„ã€‚

æ‚¨å¯ä»¥åœ¨ _https://github.com/organizations/\<org\_name>/settings/actions/runners_ åˆ—å‡ºç»„ç»‡çš„è‡ªæ‰˜ç®¡è¿è¡Œå™¨ã€‚

æŸ¥æ‰¾**åœ¨égithubåŸºç¡€è®¾æ–½ä¸­æ‰§è¡Œçš„Github Actions**çš„æ–¹æ³•æ˜¯æœç´¢Github Actioné…ç½®yamlä¸­çš„ `runs-on: self-hosted`ã€‚

**ä¸å¯èƒ½åœ¨ä¸åŒç»„ç»‡çš„è‡ªæ‰˜ç®¡ç¯å¢ƒä¸­è¿è¡Œç»„ç»‡çš„Github Action**ï¼Œå› ä¸º**åœ¨é…ç½®Runneræ—¶ä¼šç”Ÿæˆå”¯ä¸€çš„ä»¤ç‰Œ**ä»¥çŸ¥é“è¯¥Runnerå±äºå“ªé‡Œã€‚

ä¾‹å¦‚ï¼Œå¦‚æœè‡ªå®šä¹‰**Github Runneré…ç½®åœ¨AWSæˆ–GCPä¸­çš„æœºå™¨ä¸Š**ï¼Œè¯¥Action**å¯èƒ½ä¼šè®¿é—®å…ƒæ•°æ®ç«¯ç‚¹**å¹¶**çªƒå–è¿è¡Œè¯¥æœºå™¨çš„æœåŠ¡å¸æˆ·çš„ä»¤ç‰Œ**ã€‚

### Git Action Compromise

å¦‚æœå…è®¸æ‰€æœ‰æ“ä½œï¼ˆæˆ–æ¶æ„æ“ä½œï¼‰ï¼Œç”¨æˆ·å¯èƒ½ä¼šä½¿ç”¨ä¸€ä¸ª**æ¶æ„çš„Github Action**ï¼Œè¿™å°†**å±å®³**æ­£åœ¨æ‰§è¡Œçš„**å®¹å™¨**ã€‚

{% hint style="danger" %}
ä¸€ä¸ª**æ¶æ„çš„Github Action**è¿è¡Œå¯èƒ½ä¼šè¢«æ”»å‡»è€…**æ»¥ç”¨**ï¼š

* **çªƒå–Actionå¯ä»¥è®¿é—®çš„æ‰€æœ‰ç§˜å¯†**
* **æ¨ªå‘ç§»åŠ¨**ï¼Œå¦‚æœActionåœ¨å¯ä»¥è®¿é—®ç”¨äºè¿è¡Œæœºå™¨çš„SAä»¤ç‰Œçš„**ç¬¬ä¸‰æ–¹åŸºç¡€è®¾æ–½**ä¸­æ‰§è¡Œï¼ˆå¯èƒ½é€šè¿‡å…ƒæ•°æ®æœåŠ¡ï¼‰
* **æ»¥ç”¨å·¥ä½œæµä½¿ç”¨çš„ä»¤ç‰Œ**ï¼Œä»¥**çªƒå–æ‰§è¡ŒActionçš„repoçš„ä»£ç **æˆ–**ç”šè‡³ä¿®æ”¹å®ƒ**ã€‚
{% endhint %}

## Branch Protections

åˆ†æ”¯ä¿æŠ¤æ—¨åœ¨**ä¸å°†æ•´ä¸ªä»“åº“çš„æ§åˆ¶æƒäº¤ç»™ç”¨æˆ·**ã€‚ç›®æ ‡æ˜¯åœ¨èƒ½å¤Ÿåœ¨æŸäº›åˆ†æ”¯ä¸­ç¼–å†™ä»£ç ä¹‹å‰**è®¾ç½®å¤šç§ä¿æŠ¤æ–¹æ³•**ã€‚

å¯ä»¥åœ¨ _https://github.com/\<orgname>/\<reponame>/settings/branches_ æ‰¾åˆ°**ä»“åº“çš„åˆ†æ”¯ä¿æŠ¤**ã€‚

{% hint style="info" %}
**ä¸å¯èƒ½åœ¨ç»„ç»‡çº§åˆ«è®¾ç½®åˆ†æ”¯ä¿æŠ¤**ã€‚å› æ­¤ï¼Œæ‰€æœ‰ä¿æŠ¤å¿…é¡»åœ¨æ¯ä¸ªrepoä¸­å£°æ˜ã€‚
{% endhint %}

å¯ä»¥å¯¹åˆ†æ”¯ï¼ˆå¦‚masterï¼‰åº”ç”¨ä¸åŒçš„ä¿æŠ¤ï¼š

* æ‚¨å¯ä»¥**è¦æ±‚åœ¨åˆå¹¶ä¹‹å‰è¿›è¡ŒPR**ï¼ˆå› æ­¤æ‚¨ä¸èƒ½ç›´æ¥å°†ä»£ç åˆå¹¶åˆ°è¯¥åˆ†æ”¯ï¼‰ã€‚å¦‚æœé€‰æ‹©æ­¤é¡¹ï¼Œåˆ™å¯ä»¥å®æ–½å…¶ä»–ä¸åŒçš„ä¿æŠ¤ï¼š
* **è¦æ±‚ä¸€å®šæ•°é‡çš„æ‰¹å‡†**ã€‚é€šå¸¸éœ€è¦1æˆ–2ä¸ªå…¶ä»–äººæ‰¹å‡†æ‚¨çš„PRï¼Œä»¥ä¾¿å•ä¸ªç”¨æˆ·æ— æ³•ç›´æ¥åˆå¹¶ä»£ç ã€‚
* **åœ¨æ¨é€æ–°æäº¤æ—¶æ’¤é”€æ‰¹å‡†**ã€‚å¦åˆ™ï¼Œç”¨æˆ·å¯èƒ½ä¼šæ‰¹å‡†åˆæ³•ä»£ç ï¼Œç„¶åç”¨æˆ·å¯ä»¥æ·»åŠ æ¶æ„ä»£ç å¹¶åˆå¹¶ã€‚
* **è¦æ±‚ä»£ç æ‰€æœ‰è€…è¿›è¡Œå®¡æ ¸**ã€‚è‡³å°‘éœ€è¦1ä¸ªä»£ç æ‰€æœ‰è€…æ‰¹å‡†PRï¼ˆå› æ­¤â€œéšæœºâ€ç”¨æˆ·æ— æ³•æ‰¹å‡†ï¼‰ã€‚
* **é™åˆ¶è°å¯ä»¥æ’¤é”€æ‹‰å–è¯·æ±‚å®¡æ ¸**ã€‚æ‚¨å¯ä»¥æŒ‡å®šå…è®¸æ’¤é”€æ‹‰å–è¯·æ±‚å®¡æ ¸çš„äººå‘˜æˆ–å›¢é˜Ÿã€‚
* **å…è®¸æŒ‡å®šçš„å‚ä¸è€…ç»•è¿‡æ‹‰å–è¯·æ±‚è¦æ±‚**ã€‚è¿™äº›ç”¨æˆ·å°†èƒ½å¤Ÿç»•è¿‡å…ˆå‰çš„é™åˆ¶ã€‚
* **è¦æ±‚çŠ¶æ€æ£€æŸ¥åœ¨åˆå¹¶ä¹‹å‰é€šè¿‡**ã€‚æŸäº›æ£€æŸ¥éœ€è¦åœ¨èƒ½å¤Ÿåˆå¹¶æäº¤ä¹‹å‰é€šè¿‡ï¼ˆä¾‹å¦‚ï¼Œæ£€æŸ¥æ²¡æœ‰æ˜æ–‡ç§˜å¯†çš„github actionï¼‰ã€‚
* **è¦æ±‚åœ¨åˆå¹¶ä¹‹å‰è§£å†³å¯¹è¯**ã€‚æ‰€æœ‰ä»£ç ä¸Šçš„è¯„è®ºéœ€è¦åœ¨PRåˆå¹¶ä¹‹å‰è§£å†³ã€‚
* **è¦æ±‚ç­¾åæäº¤**ã€‚æäº¤éœ€è¦ç­¾åã€‚
* **è¦æ±‚çº¿æ€§å†å²**ã€‚é˜²æ­¢å°†åˆå¹¶æäº¤æ¨é€åˆ°åŒ¹é…çš„åˆ†æ”¯ã€‚
* **åŒ…æ‹¬ç®¡ç†å‘˜**ã€‚å¦‚æœæœªè®¾ç½®æ­¤é¡¹ï¼Œç®¡ç†å‘˜å¯ä»¥ç»•è¿‡é™åˆ¶ã€‚
* **é™åˆ¶è°å¯ä»¥æ¨é€åˆ°åŒ¹é…çš„åˆ†æ”¯**ã€‚é™åˆ¶è°å¯ä»¥å‘é€PRã€‚

{% hint style="info" %}
å¦‚æ‚¨æ‰€è§ï¼Œå³ä½¿æ‚¨è®¾æ³•è·å¾—æŸä¸ªç”¨æˆ·çš„å‡­æ®ï¼Œ**reposå¯èƒ½å—åˆ°ä¿æŠ¤ï¼Œé¿å…æ‚¨å°†ä»£ç æ¨é€åˆ°master**ï¼Œä¾‹å¦‚ï¼Œä»¥å±å®³CI/CDç®¡é“ã€‚
{% endhint %}

## References

* [https://docs.github.com/en/organizations/managing-access-to-your-organizations-repositories/repository-roles-for-an-organization](https://docs.github.com/en/organizations/managing-access-to-your-organizations-repositories/repository-roles-for-an-organization)
* [https://docs.github.com/en/enterprise-server@3.3/admin/user-management/managing-users-in-your-enterprise/roles-in-an-enterprise](https://docs.github.com/en/enterprise-server@3.3/admin/user-management/managing-users-in-your-enterprise/roles-in-an-enterprise)[https://docs.github.com/en/enterprise-server](https://docs.github.com/en/enterprise-server@3.3/admin/user-management/managing-users-in-your-enterprise/roles-in-an-enterprise)
* [https://docs.github.com/en/get-started/learning-about-github/access-permissions-on-github](https://docs.github.com/en/get-started/learning-about-github/access-permissions-on-github)
* [https://docs.github.com/en/account-and-profile/setting-up-and-managing-your-github-user-account/managing-user-account-settings/permission-levels-for-user-owned-project-boards](https://docs.github.com/en/account-and-profile/setting-up-and-managing-your-github-user-account/managing-user-account-settings/permission-levels-for-user-owned-project-boards)
* [https://docs.github.com/en/actions/security-guides/encrypted-secrets](https://docs.github.com/en/actions/security-guides/encrypted-secrets)

{% hint style="success" %}
å­¦ä¹ å’Œå®è·µAWSé»‘å®¢æŠ€æœ¯ï¼š<img src="../../.gitbook/assets/image (1) (1) (1).png" alt="" data-size="line">[**HackTricks Training AWS Red Team Expert (ARTE)**](https://training.hacktricks.xyz/courses/arte)<img src="../../.gitbook/assets/image (1) (1) (1).png" alt="" data-size="line">\
å­¦ä¹ å’Œå®è·µGCPé»‘å®¢æŠ€æœ¯ï¼š<img src="../../.gitbook/assets/image (2).png" alt="" data-size="line">[**HackTricks Training GCP Red Team Expert (GRTE)**<img src="../../.gitbook/assets/image (2).png" alt="" data-size="line">](https://training.hacktricks.xyz/courses/grte)

<details>

<summary>æ”¯æŒHackTricks</summary>

* æŸ¥çœ‹[**è®¢é˜…è®¡åˆ’**](https://github.com/sponsors/carlospolop)!
* **åŠ å…¥** ğŸ’¬ [**Discordå°ç»„**](https://discord.gg/hRep4RUj7f)æˆ–[**ç”µæŠ¥å°ç»„**](https://t.me/peass)æˆ–**åœ¨** **Twitter** ğŸ¦ [**@hacktricks\_live**](https://twitter.com/hacktricks_live)**ä¸Šå…³æ³¨æˆ‘ä»¬ã€‚**
* **é€šè¿‡å‘** [**HackTricks**](https://github.com/carlospolop/hacktricks)å’Œ[**HackTricks Cloud**](https://github.com/carlospolop/hacktricks-cloud) github reposæäº¤PRæ¥åˆ†äº«é»‘å®¢æŠ€å·§ã€‚

</details>
{% endhint %}
