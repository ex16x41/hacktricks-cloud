# GH Actions - Cache Poisoning

{% hint style="success" %}
AWS Hacking öğrenin ve pratik yapın:<img src="../../../.gitbook/assets/image (1) (1).png" alt="" data-size="line">[**HackTricks Training AWS Red Team Expert (ARTE)**](https://training.hacktricks.xyz/courses/arte)<img src="../../../.gitbook/assets/image (1) (1).png" alt="" data-size="line">\
GCP Hacking öğrenin ve pratik yapın: <img src="../../../.gitbook/assets/image (2).png" alt="" data-size="line">[**HackTricks Training GCP Red Team Expert (GRTE)**<img src="../../../.gitbook/assets/image (2).png" alt="" data-size="line">](https://training.hacktricks.xyz/courses/grte)

<details>

<summary>HackTricks'i Destekleyin</summary>

* [**abonelik planlarını**](https://github.com/sponsors/carlospolop) kontrol edin!
* **💬 [**Discord grubuna**](https://discord.gg/hRep4RUj7f) veya [**telegram grubuna**](https://t.me/peass) katılın ya da **Twitter'da** 🐦 [**@hacktricks\_live**](https://twitter.com/hacktricks\_live)**'ı takip edin.**
* **Hacking ipuçlarını paylaşmak için** [**HackTricks**](https://github.com/carlospolop/hacktricks) ve [**HackTricks Cloud**](https://github.com/carlospolop/hacktricks-cloud) github reposuna PR gönderin.

</details>
{% endhint %}

Daha fazla detay için orijinal gönderiyi kontrol edin [https://scribesecurity.com/blog/github-cache-poisoning/](https://scribesecurity.com/blog/github-cache-poisoning/)

## Cache Poisoning

Git eylemi [**action/cache**](https://github.com/actions/cache), Sürekli Entegrasyon (CI) sürecinde iki kritik aşamayı kapsayan bir önbellekleme mekanizması sunar:

1. **Eylemi Çalıştır**: Bu aşama, CI çalışması sırasında önbelleğe alınmış verileri aramayı ve almayı içerir. Arama, benzersiz bir önbellek anahtarı kullanarak iki sonuç üretir:
* **Önbellek bulma**: İstenen veri önbellekte bulunur ve dolayısıyla hemen kullanılmak üzere alınır.
* **Önbellek bulamama**: Önbellekte eşleşen veri bulunamaz, bu da gerekli dosyaların ve dizinlerin taze bir şekilde indirilmesini gerektirir, ilk talep gibi.
2. **İş Akışı Sonrası Eylem**: Bu aşama, CI iş akışından sonra verileri önbelleğe almaya adanmıştır. Özellikle, eylem sırasında bir önbellek bulamama durumu gerçekleşirse, belirtilen dizinlerin mevcut durumu sağlanan anahtar kullanılarak önbelleğe alınır. Bu süreç otomatik olup açık bir çağrı gerektirmez.

#### Güvenlik Önlemleri: Önbellek İzolasyonu ve Erişim Kısıtlamaları

Güvenliği sağlamak ve önbellek izolasyonunu korumak için erişim kısıtlamaları uygulanır, bu da farklı dallar arasında mantıksal bir ayrım yaratır. Örneğin, **Feature-A** dalı için oluşturulan bir önbellek (ana dalda temel alarak) **Feature-B** dalı için bir çekme isteğine erişilemez olacaktır (aynı zamanda ana dalda temel alarak).

Önbellek eylemi belirli bir arama sırasına uyar:

* Öncelikle, iş akışı çalışması ile aynı dalda önbellek bulma arar.
* Başarısız olursa, aramayı ana dala ve diğer yukarı akış dallarına genişletir.

Önemli olarak, önbellek erişimi dal kapsamlıdır ve belirli bir dalın tüm iş akışları ve çalışmaları arasında uzanır. Ayrıca, GitHub, önbellek girişleri oluşturulduktan sonra yalnızca okunabilir bir politika uygular ve herhangi bir değişikliği yasaklar.

#### Gerçek Dünya Etkisi: Düşük İzinli İş Akışından Yüksek İzinli İş Akışına Saldırı

Örnek bir CI senaryosu, bir saldırganın önbellek zehirlemesini nasıl kullanarak düşük izinli bir iş akışından yüksek izinli bir iş akışına yetki yükseltebileceğini gösterir:

* **Unit-test** iş akışı, birim testlerini ve kod kapsamı araçlarını çalıştırmaktan sorumlu olup, tehlikeye atılmış veya savunmasız bir aracı kullanması varsayılmaktadır. Bu iş akışı, önbelleği herhangi bir iş akışına erişilebilir hale getiren **action/cache** Git eylemini kullanır.
* **Release** iş akışı, uygulama artefaktını oluşturma ve yayınlama görevini üstlenir ve Golang bağımlılıklarını önbelleğe alarak işlemlerini optimize eder.

Bu senaryoda, unit-test iş akışı, meşru bir Golang günlükleme kütüphanesini (\`go
