# GH Actions - Cache Poisoning

{% hint style="success" %}
Learn & practice AWS Hacking:<img src="../../../.gitbook/assets/image (1).png" alt="" data-size="line">[**HackTricks Training AWS Red Team Expert (ARTE)**](https://training.hacktricks.xyz/courses/arte)<img src="../../../.gitbook/assets/image (1).png" alt="" data-size="line">\
Learn & practice GCP Hacking: <img src="../../../.gitbook/assets/image (2).png" alt="" data-size="line">[**HackTricks Training GCP Red Team Expert (GRTE)**<img src="../../../.gitbook/assets/image (2).png" alt="" data-size="line">](https://training.hacktricks.xyz/courses/grte)

<details>

<summary>Support HackTricks</summary>

* Check the [**subscription plans**](https://github.com/sponsors/carlospolop)!
* **Join the** ğŸ’¬ [**Discord group**](https://discord.gg/hRep4RUj7f) or the [**telegram group**](https://t.me/peass) or **follow** us on **Twitter** ğŸ¦ [**@hacktricks\_live**](https://twitter.com/hacktricks\_live)**.**
* **Share hacking tricks by submitting PRs to the** [**HackTricks**](https://github.com/carlospolop/hacktricks) and [**HackTricks Cloud**](https://github.com/carlospolop/hacktricks-cloud) github repos.

</details>
{% endhint %}

For further details check the original post [https://scribesecurity.com/blog/github-cache-poisoning/](https://scribesecurity.com/blog/github-cache-poisoning/)

## Cache Poisoning

Git action [**action/cache**](https://github.com/actions/cache)ëŠ” ì§€ì†ì  í†µí•©(CI) í”„ë¡œì„¸ìŠ¤ì—ì„œ ìºì‹± ë©”ì»¤ë‹ˆì¦˜ì„ ë„ì…í•˜ë©°, ë‘ ê°€ì§€ ì¤‘ìš”í•œ ë‹¨ê³„ë¡œ êµ¬ì„±ë©ë‹ˆë‹¤:

1. **Run Action**: ì´ ë‹¨ê³„ëŠ” CI ì‹¤í–‰ ì¤‘ì— ìºì‹œëœ ë°ì´í„°ë¥¼ ê²€ìƒ‰í•˜ê³  ê°€ì ¸ì˜¤ëŠ” ê²ƒì„ í¬í•¨í•©ë‹ˆë‹¤. ê²€ìƒ‰ì€ ê³ ìœ í•œ ìºì‹œ í‚¤ë¥¼ ì‚¬ìš©í•˜ì—¬ ë‘ ê°€ì§€ ê²°ê³¼ë¥¼ ìƒì„±í•©ë‹ˆë‹¤:
* **Cache-hit**: ìš”ì²­ëœ ë°ì´í„°ê°€ ìºì‹œì—ì„œ ë°œê²¬ë˜ì–´ ì¦‰ì‹œ ì‚¬ìš©ì„ ìœ„í•´ ê°€ì ¸ì˜µë‹ˆë‹¤.
* **Cache-miss**: ìºì‹œì—ì„œ ì¼ì¹˜í•˜ëŠ” ë°ì´í„°ê°€ ë°œê²¬ë˜ì§€ ì•Šì•„ í•„ìš”í•œ íŒŒì¼ê³¼ ë””ë ‰í† ë¦¬ë¥¼ ìƒˆë¡œ ë‹¤ìš´ë¡œë“œí•©ë‹ˆë‹¤. ì´ëŠ” ì²˜ìŒ ìš”ì²­í•˜ëŠ” ê²ƒê³¼ ìœ ì‚¬í•©ë‹ˆë‹¤.
2. **Post Workflow Action**: ì´ ë‹¨ê³„ëŠ” CI ì›Œí¬í”Œë¡œ í›„ì— ë°ì´í„°ë¥¼ ìºì‹±í•˜ëŠ” ë° ì „ë…í•©ë‹ˆë‹¤. íŠ¹íˆ, ì‹¤í–‰ ì‘ì—… ì¤‘ì— ìºì‹œ ë¯¸ìŠ¤ê°€ ë°œìƒí•˜ë©´ ì§€ì •ëœ ë””ë ‰í† ë¦¬ì˜ í˜„ì¬ ìƒíƒœê°€ ì œê³µëœ í‚¤ë¥¼ ì‚¬ìš©í•˜ì—¬ ìºì‹œë©ë‹ˆë‹¤. ì´ ê³¼ì •ì€ ìë™í™”ë˜ì–´ ìˆìœ¼ë©° ëª…ì‹œì ì¸ í˜¸ì¶œì´ í•„ìš”í•˜ì§€ ì•ŠìŠµë‹ˆë‹¤.

#### Security Measures: Cache Isolation and Access Restrictions

ë³´ì•ˆì„ ìœ ì§€í•˜ê³  ìºì‹œ ê²©ë¦¬ë¥¼ ë³´ì¥í•˜ê¸° ìœ„í•´ ì ‘ê·¼ ì œí•œì´ ì‹œí–‰ë˜ì–´ ì„œë¡œ ë‹¤ë¥¸ ë¸Œëœì¹˜ ê°„ì˜ ë…¼ë¦¬ì  ë¶„ë¦¬ë¥¼ ìƒì„±í•©ë‹ˆë‹¤. ì˜ˆë¥¼ ë“¤ì–´, **Feature-A** ë¸Œëœì¹˜(ê¸°ë³¸ ë¸Œëœì¹˜ì— ê¸°ë°˜)ì˜ ìºì‹œëŠ” **Feature-B** ë¸Œëœì¹˜(ë˜í•œ ê¸°ë³¸ ë¸Œëœì¹˜ì— ê¸°ë°˜)ì˜ í’€ ë¦¬í€˜ìŠ¤íŠ¸ì—ì„œ ì ‘ê·¼í•  ìˆ˜ ì—†ìŠµë‹ˆë‹¤.

ìºì‹œ ì‘ì—…ì€ íŠ¹ì • ê²€ìƒ‰ ìˆœì„œë¥¼ ë”°ë¦…ë‹ˆë‹¤:

* ë¨¼ì € ì›Œí¬í”Œë¡œ ì‹¤í–‰ê³¼ ë™ì¼í•œ ë¸Œëœì¹˜ ë‚´ì—ì„œ ìºì‹œ íˆíŠ¸ë¥¼ ì°¾ìŠµë‹ˆë‹¤.
* ì‹¤íŒ¨í•  ê²½ìš°, ë¶€ëª¨ ë¸Œëœì¹˜ ë° ê¸°íƒ€ ì—…ìŠ¤íŠ¸ë¦¼ ë¸Œëœì¹˜ë¡œ ê²€ìƒ‰ì„ í™•ì¥í•©ë‹ˆë‹¤.

ì¤‘ìš”í•˜ê²Œë„, ìºì‹œ ì ‘ê·¼ì€ ë¸Œëœì¹˜ ë²”ìœ„ë¡œ ì œí•œë˜ë©° íŠ¹ì • ë¸Œëœì¹˜ì˜ ëª¨ë“  ì›Œí¬í”Œë¡œ ë° ì‹¤í–‰ì— ê±¸ì³ í™•ì¥ë©ë‹ˆë‹¤. ë˜í•œ, GitHubëŠ” ìºì‹œ í•­ëª©ì´ ìƒì„±ëœ í›„ ì½ê¸° ì „ìš© ì •ì±…ì„ ì‹œí–‰í•˜ì—¬ ìˆ˜ì •ì´ ê¸ˆì§€ë©ë‹ˆë‹¤.

#### Real-World Implication: From Low to High-Permission Workflow Attack

ì¼ë°˜ì ì¸ CI ì‹œë‚˜ë¦¬ì˜¤ëŠ” ê³µê²©ìê°€ ìºì‹œ ì˜¤ì—¼ì„ ì´ìš©í•˜ì—¬ ë‚®ì€ ê¶Œí•œì˜ ì›Œí¬í”Œë¡œì—ì„œ ë†’ì€ ê¶Œí•œì˜ ì›Œí¬í”Œë¡œë¡œ ê¶Œí•œì„ ìƒìŠ¹ì‹œí‚¬ ìˆ˜ ìˆëŠ” ë°©ë²•ì„ ë³´ì—¬ì¤ë‹ˆë‹¤:

* **Unit-test** ì›Œí¬í”Œë¡œëŠ” ë‹¨ìœ„ í…ŒìŠ¤íŠ¸ ë° ì½”ë“œ ì»¤ë²„ë¦¬ì§€ ë„êµ¬ë¥¼ ì‹¤í–‰í•˜ëŠ” ì±…ì„ì´ ìˆìœ¼ë©°, ì†ìƒë˜ì—ˆê±°ë‚˜ ì·¨ì•½í•œ ë„êµ¬ë¥¼ ì‚¬ìš©í•˜ëŠ” ê²ƒìœ¼ë¡œ ê°€ì •í•©ë‹ˆë‹¤. ì´ ì›Œí¬í”Œë¡œëŠ” **action/cache** Git ì‘ì—…ì„ ì‚¬ìš©í•˜ì—¬ ìºì‹œë¥¼ ëª¨ë“  ì›Œí¬í”Œë¡œì—ì„œ ì ‘ê·¼í•  ìˆ˜ ìˆë„ë¡ í•©ë‹ˆë‹¤.
* **Release** ì›Œí¬í”Œë¡œëŠ” ì• í”Œë¦¬ì¼€ì´ì…˜ ì•„í‹°íŒ©íŠ¸ë¥¼ ë¹Œë“œí•˜ê³  ë°°í¬í•˜ëŠ” ì±…ì„ì´ ìˆìœ¼ë©°, Golang ì¢…ì†ì„±ì„ ìºì‹±í•˜ì—¬ ì‘ì—…ì„ ìµœì í™”í•©ë‹ˆë‹¤.

ì´ ì‹œë‚˜ë¦¬ì˜¤ì—ì„œ ë‹¨ìœ„ í…ŒìŠ¤íŠ¸ ì›Œí¬í”Œë¡œëŠ” í•©ë²•ì ì¸ Golang ë¡œê¹… ë¼ì´ë¸ŒëŸ¬ë¦¬(\`go

{% hint style="success" %}
Learn & practice AWS Hacking:<img src="../../../.gitbook/assets/image (1).png" alt="" data-size="line">[**HackTricks Training AWS Red Team Expert (ARTE)**](https://training.hacktricks.xyz/courses/arte)<img src="../../../.gitbook/assets/image (1).png" alt="" data-size="line">\
Learn & practice GCP Hacking: <img src="../../../.gitbook/assets/image (2).png" alt="" data-size="line">[**HackTricks Training GCP Red Team Expert (GRTE)**<img src="../../../.gitbook/assets/image (2).png" alt="" data-size="line">](https://training.hacktricks.xyz/courses/grte)

<details>

<summary>Support HackTricks</summary>

* Check the [**subscription plans**](https://github.com/sponsors/carlospolop)!
* **Join the** ğŸ’¬ [**Discord group**](https://discord.gg/hRep4RUj7f) or the [**telegram group**](https://t.me/peass) or **follow** us on **Twitter** ğŸ¦ [**@hacktricks\_live**](https://twitter.com/hacktricks\_live)**.**
* **Share hacking tricks by submitting PRs to the** [**HackTricks**](https://github.com/carlospolop/hacktricks) and [**HackTricks Cloud**](https://github.com/carlospolop/hacktricks-cloud) github repos.

</details>
{% endhint %}
