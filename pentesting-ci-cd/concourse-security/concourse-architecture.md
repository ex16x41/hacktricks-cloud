# Concourse Architecture

## Concourse Architecture

{% hint style="success" %}
Learn & practice AWS Hacking:<img src="../../.gitbook/assets/image (1).png" alt="" data-size="line">[**HackTricks Training AWS Red Team Expert (ARTE)**](https://training.hacktricks.xyz/courses/arte)<img src="../../.gitbook/assets/image (1).png" alt="" data-size="line">\
Learn & practice GCP Hacking: <img src="../../.gitbook/assets/image (2).png" alt="" data-size="line">[**HackTricks Training GCP Red Team Expert (GRTE)**<img src="../../.gitbook/assets/image (2).png" alt="" data-size="line">](https://training.hacktricks.xyz/courses/grte)

<details>

<summary>Support HackTricks</summary>

* Check the [**subscription plans**](https://github.com/sponsors/carlospolop)!
* **Join the** ğŸ’¬ [**Discord group**](https://discord.gg/hRep4RUj7f) or the [**telegram group**](https://t.me/peass) or **follow** us on **Twitter** ğŸ¦ [**@hacktricks\_live**](https://twitter.com/hacktricks\_live)**.**
* **Share hacking tricks by submitting PRs to the** [**HackTricks**](https://github.com/carlospolop/hacktricks) and [**HackTricks Cloud**](https://github.com/carlospolop/hacktricks-cloud) github repos.

</details>
{% endhint %}

[**Relevant data from Concourse documentation:**](https://concourse-ci.org/internals.html)

### Architecture

![](<../../.gitbook/assets/image (187).png>)

#### ATC: web UI & build scheduler

Î¤Î¿ ATC ÎµÎ¯Î½Î±Î¹ Î· ÎºÎ±ÏÎ´Î¹Î¬ Ï„Î¿Ï… Concourse. Î•ÎºÏ„ÎµÎ»ÎµÎ¯ Ï„Î¿ **web UI ÎºÎ±Î¹ API** ÎºÎ±Î¹ ÎµÎ¯Î½Î±Î¹ Ï…Ï€ÎµÏÎ¸Ï…Î½Î¿ Î³Î¹Î± Ï„Î¿Î½ **Ï€ÏÎ¿Î³ÏÎ±Î¼Î¼Î±Ï„Î¹ÏƒÎ¼ÏŒ** ÏŒÎ»Ï‰Î½ Ï„Ï‰Î½ pipeline. **Î£Ï…Î½Î´Î­ÎµÏ„Î±Î¹ Î¼Îµ Ï„Î¿ PostgreSQL**, Ï„Î¿ Î¿Ï€Î¿Î¯Î¿ Ï‡ÏÎ·ÏƒÎ¹Î¼Î¿Ï€Î¿Î¹ÎµÎ¯ Î³Î¹Î± Î½Î± Î±Ï€Î¿Î¸Î·ÎºÎµÏÎµÎ¹ Î´ÎµÎ´Î¿Î¼Î­Î½Î± pipeline (ÏƒÏ…Î¼Ï€ÎµÏÎ¹Î»Î±Î¼Î²Î±Î½Î¿Î¼Î­Î½Ï‰Î½ Ï„Ï‰Î½ logs ÎºÎ±Ï„Î±ÏƒÎºÎµÏ…Î®Ï‚).

Î— ÎµÏ…Î¸ÏÎ½Î· Ï„Î¿Ï… [checker](https://concourse-ci.org/checker.html) ÎµÎ¯Î½Î±Î¹ Î½Î± ÎµÎ»Î­Î³Ï‡ÎµÎ¹ ÏƒÏ…Î½ÎµÏ‡ÏÏ‚ Î³Î¹Î± Î½Î­ÎµÏ‚ ÎµÎºÎ´ÏŒÏƒÎµÎ¹Ï‚ Ï€ÏŒÏÏ‰Î½. ÎŸ [scheduler](https://concourse-ci.org/scheduler.html) ÎµÎ¯Î½Î±Î¹ Ï…Ï€ÎµÏÎ¸Ï…Î½Î¿Ï‚ Î³Î¹Î± Ï„Î¿Î½ Ï€ÏÎ¿Î³ÏÎ±Î¼Î¼Î±Ï„Î¹ÏƒÎ¼ÏŒ ÎºÎ±Ï„Î±ÏƒÎºÎµÏ…ÏÎ½ Î³Î¹Î± Î¼Î¹Î± ÎµÏÎ³Î±ÏƒÎ¯Î± ÎºÎ±Î¹ Î¿ [build tracker](https://concourse-ci.org/build-tracker.html) ÎµÎ¯Î½Î±Î¹ Ï…Ï€ÎµÏÎ¸Ï…Î½Î¿Ï‚ Î³Î¹Î± Ï„Î·Î½ ÎµÎºÏ„Î­Î»ÎµÏƒÎ· Î¿Ï€Î¿Î¹Ï‰Î½Î´Î®Ï€Î¿Ï„Îµ Ï€ÏÎ¿Î³ÏÎ±Î¼Î¼Î±Ï„Î¹ÏƒÎ¼Î­Î½Ï‰Î½ ÎºÎ±Ï„Î±ÏƒÎºÎµÏ…ÏÎ½. ÎŸ [garbage collector](https://concourse-ci.org/garbage-collector.html) ÎµÎ¯Î½Î±Î¹ Î¿ Î¼Î·Ï‡Î±Î½Î¹ÏƒÎ¼ÏŒÏ‚ ÎºÎ±Î¸Î±ÏÎ¹ÏƒÎ¼Î¿Ï Î³Î¹Î± Ï„Î·Î½ Î±Ï†Î±Î¯ÏÎµÏƒÎ· Î¿Ï€Î¿Î¹Ï‰Î½Î´Î®Ï€Î¿Ï„Îµ Î¼Î· Ï‡ÏÎ·ÏƒÎ¹Î¼Î¿Ï€Î¿Î¹Î¿ÏÎ¼ÎµÎ½Ï‰Î½ Î® Ï€Î±ÏÏ‰Ï‡Î·Î¼Î­Î½Ï‰Î½ Î±Î½Ï„Î¹ÎºÎµÎ¹Î¼Î­Î½Ï‰Î½, ÏŒÏ€Ï‰Ï‚ ÎºÎ¿Î½Ï„Î­Î¹Î½ÎµÏ ÎºÎ±Î¹ ÏŒÎ³ÎºÎ¿Î¹.

#### TSA: worker registration & forwarding

Î— TSA ÎµÎ¯Î½Î±Î¹ Î­Î½Î±Ï‚ **Ï€ÏÎ¿ÏƒÎ±ÏÎ¼Î¿ÏƒÎ¼Î­Î½Î¿Ï‚ SSH server** Ï€Î¿Ï… Ï‡ÏÎ·ÏƒÎ¹Î¼Î¿Ï€Î¿Î¹ÎµÎ¯Ï„Î±Î¹ Î±Ï€Î¿ÎºÎ»ÎµÎ¹ÏƒÏ„Î¹ÎºÎ¬ Î³Î¹Î± Ï„Î·Î½ Î±ÏƒÏ†Î±Î»Î® **ÎºÎ±Ï„Î±Ï‡ÏÏÎ¹ÏƒÎ·** [**ÎµÏÎ³Î±Î¶Î¿Î¼Î­Î½Ï‰Î½**](https://concourse-ci.org/internals.html#architecture-worker) Î¼Îµ Ï„Î¿ [ATC](https://concourse-ci.org/internals.html#component-atc).

Î— TSA Î±Ï€ÏŒ **Ï€ÏÎ¿ÎµÏ€Î¹Î»Î¿Î³Î® Î±ÎºÎ¿ÏÎµÎ¹ ÏƒÏ„Î· Î¸ÏÏÎ± `2222`**, ÎºÎ±Î¹ ÏƒÏ…Î½Î®Î¸Ï‰Ï‚ Î²ÏÎ¯ÏƒÎºÎµÏ„Î±Î¹ ÏƒÎµ ÎºÎ¿Î¹Î½Î® Ï„Î¿Ï€Î¿Î¸ÎµÏƒÎ¯Î± Î¼Îµ Ï„Î¿ [ATC](https://concourse-ci.org/internals.html#component-atc) ÎºÎ±Î¹ Î²ÏÎ¯ÏƒÎºÎµÏ„Î±Î¹ Ï€Î¯ÏƒÏ‰ Î±Ï€ÏŒ Î­Î½Î±Î½ load balancer.

Î— **TSA Ï…Î»Î¿Ï€Î¿Î¹ÎµÎ¯ CLI Î¼Î­ÏƒÏ‰ Ï„Î·Ï‚ ÏƒÏÎ½Î´ÎµÏƒÎ·Ï‚ SSH,** Ï…Ï€Î¿ÏƒÏ„Î·ÏÎ¯Î¶Î¿Î½Ï„Î±Ï‚ [**Î±Ï…Ï„Î­Ï‚ Ï„Î¹Ï‚ ÎµÎ½Ï„Î¿Î»Î­Ï‚**](https://concourse-ci.org/internals.html#component-tsa).

#### Workers

Î“Î¹Î± Î½Î± ÎµÎºÏ„ÎµÎ»Î­ÏƒÎµÎ¹ ÎµÏÎ³Î±ÏƒÎ¯ÎµÏ‚, Ï„Î¿ concourse Ï€ÏÎ­Ï€ÎµÎ¹ Î½Î± Î­Ï‡ÎµÎ¹ ÎºÎ¬Ï€Î¿Î¹Î¿Ï…Ï‚ ÎµÏÎ³Î±Î¶ÏŒÎ¼ÎµÎ½Î¿Ï…Ï‚. Î‘Ï…Ï„Î¿Î¯ Î¿Î¹ ÎµÏÎ³Î±Î¶ÏŒÎ¼ÎµÎ½Î¿Î¹ **ÎºÎ±Ï„Î±Ï‡Ï‰ÏÎ¿ÏÎ½ Ï„Î¿Ï…Ï‚ ÎµÎ±Ï…Ï„Î¿ÏÏ‚ Ï„Î¿Ï…Ï‚** Î¼Î­ÏƒÏ‰ Ï„Î·Ï‚ [TSA](https://concourse-ci.org/internals.html#component-tsa) ÎºÎ±Î¹ ÎµÎºÏ„ÎµÎ»Î¿ÏÎ½ Ï„Î¹Ï‚ Ï…Ï€Î·ÏÎµÏƒÎ¯ÎµÏ‚ [**Garden**](https://github.com/cloudfoundry-incubator/garden) ÎºÎ±Î¹ [**Baggageclaim**](https://github.com/concourse/baggageclaim).

* **Garden**: Î‘Ï…Ï„Î® ÎµÎ¯Î½Î±Î¹ Î· **Container Manage API**, ÏƒÏ…Î½Î®Î¸Ï‰Ï‚ ÎµÎºÏ„ÎµÎ»ÎµÎ¯Ï„Î±Î¹ ÏƒÏ„Î· **Î¸ÏÏÎ± 7777** Î¼Î­ÏƒÏ‰ **HTTP**.
* **Baggageclaim**: Î‘Ï…Ï„Î® ÎµÎ¯Î½Î±Î¹ Î· **Volume Management API**, ÏƒÏ…Î½Î®Î¸Ï‰Ï‚ ÎµÎºÏ„ÎµÎ»ÎµÎ¯Ï„Î±Î¹ ÏƒÏ„Î· **Î¸ÏÏÎ± 7788** Î¼Î­ÏƒÏ‰ **HTTP**.

## References

* [https://concourse-ci.org/internals.html](https://concourse-ci.org/internals.html)

{% hint style="success" %}
Learn & practice AWS Hacking:<img src="../../.gitbook/assets/image (1).png" alt="" data-size="line">[**HackTricks Training AWS Red Team Expert (ARTE)**](https://training.hacktricks.xyz/courses/arte)<img src="../../.gitbook/assets/image (1).png" alt="" data-size="line">\
Learn & practice GCP Hacking: <img src="../../.gitbook/assets/image (2).png" alt="" data-size="line">[**HackTricks Training GCP Red Team Expert (GRTE)**<img src="../../.gitbook/assets/image (2).png" alt="" data-size="line">](https://training.hacktricks.xyz/courses/grte)

<details>

<summary>Support HackTricks</summary>

* Check the [**subscription plans**](https://github.com/sponsors/carlospolop)!
* **Join the** ğŸ’¬ [**Discord group**](https://discord.gg/hRep4RUj7f) or the [**telegram group**](https://t.me/peass) or **follow** us on **Twitter** ğŸ¦ [**@hacktricks\_live**](https://twitter.com/hacktricks\_live)**.**
* **Share hacking tricks by submitting PRs to the** [**HackTricks**](https://github.com/carlospolop/hacktricks) and [**HackTricks Cloud**](https://github.com/carlospolop/hacktricks-cloud) github repos.

</details>
{% endhint %}
