# Supabase GÃ¼venliÄŸi

{% hint style="success" %}
AWS Hacking Ã¶ÄŸrenin ve pratik yapÄ±n:<img src="/.gitbook/assets/image.png" alt="" data-size="line">[**HackTricks Training AWS Red Team Expert (ARTE)**](https://training.hacktricks.xyz/courses/arte)<img src="/.gitbook/assets/image.png" alt="" data-size="line">\
GCP Hacking Ã¶ÄŸrenin ve pratik yapÄ±n: <img src="/.gitbook/assets/image (2).png" alt="" data-size="line">[**HackTricks Training GCP Red Team Expert (GRTE)**<img src="/.gitbook/assets/image (2).png" alt="" data-size="line">](https://training.hacktricks.xyz/courses/grte)

<details>

<summary>HackTricks'i Destekleyin</summary>

* [**Abonelik planlarÄ±nÄ±**](https://github.com/sponsors/carlospolop) kontrol edin!
* **ğŸ’¬ [**Discord grubuna**](https://discord.gg/hRep4RUj7f) veya [**telegram grubuna**](https://t.me/peass) katÄ±lÄ±n ya da bizi **Twitter** ğŸ¦ [**@hacktricks\_live**](https://twitter.com/hacktricks\_live)**'da takip edin.**
* **HackTricks'e PR gÃ¶ndererek hacking ipuÃ§larÄ±nÄ± paylaÅŸÄ±n** [**HackTricks**](https://github.com/carlospolop/hacktricks) ve [**HackTricks Cloud**](https://github.com/carlospolop/hacktricks-cloud) github depolarÄ±na.

</details>
{% endhint %}

## Temel Bilgiler

[**Ana sayfalarÄ±na**](https://supabase.com/) gÃ¶re: Supabase, aÃ§Ä±k kaynaklÄ± bir Firebase alternatifidir. Projenize bir Postgres veritabanÄ±, Kimlik DoÄŸrulama, anÄ±nda API'ler, Edge FonksiyonlarÄ±, GerÃ§ek ZamanlÄ± abonelikler, Depolama ve VektÃ¶r gÃ¶mme ile baÅŸlayÄ±n.

### Alt Alan AdÄ±

Temelde bir proje oluÅŸturulduÄŸunda, kullanÄ±cÄ± **`jnanozjdybtpqgcwhdiz.supabase.co`** gibi bir supabase.co alt alan adÄ± alacaktÄ±r.

## **VeritabanÄ± yapÄ±landÄ±rmasÄ±**

{% hint style="success" %}
**Bu verilere `https://supabase.com/dashboard/project/<project-id>/settings/database` gibi bir baÄŸlantÄ±dan eriÅŸilebilir**
{% endhint %}

Bu **veritabanÄ±** bazÄ± AWS bÃ¶lgelerinde daÄŸÄ±tÄ±lacaktÄ±r ve ona baÄŸlanmak iÃ§in ÅŸu ÅŸekilde baÄŸlanmak mÃ¼mkÃ¼n olacaktÄ±r: `postgres://postgres.jnanozjdybtpqgcwhdiz:[YOUR-PASSWORD]@aws-0-us-west-1.pooler.supabase.com:5432/postgres` (bu us-west-1'de oluÅŸturulmuÅŸtur).\
Åifre, kullanÄ±cÄ±nÄ±n daha Ã¶nce belirlediÄŸi bir **ÅŸifredir**.

Bu nedenle, alt alan adÄ± bilinen bir ÅŸey olduÄŸundan ve kullanÄ±cÄ± adÄ± olarak kullanÄ±ldÄ±ÄŸÄ±ndan ve AWS bÃ¶lgeleri sÄ±nÄ±rlÄ± olduÄŸundan, **ÅŸifreyi brute force ile kÄ±rmak** mÃ¼mkÃ¼n olabilir.

Bu bÃ¶lÃ¼m ayrÄ±ca ÅŸu seÃ§enekleri iÃ§erir:

* VeritabanÄ± ÅŸifresini sÄ±fÄ±rlayÄ±n
* BaÄŸlantÄ± havuzlamayÄ± yapÄ±landÄ±rÄ±n
* SSL yapÄ±landÄ±rÄ±n: DÃ¼z metin baÄŸlantÄ±larÄ±nÄ± reddedin (varsayÄ±lan olarak etkinleÅŸtirilmiÅŸtir)
* Disk boyutunu yapÄ±landÄ±rÄ±n
* AÄŸ kÄ±sÄ±tlamalarÄ± ve yasaklamalar uygulayÄ±n

## API YapÄ±landÄ±rmasÄ±

{% hint style="success" %}
**Bu verilere `https://supabase.com/dashboard/project/<project-id>/settings/api` gibi bir baÄŸlantÄ±dan eriÅŸilebilir**
{% endhint %}

Projenizdeki supabase API'sine eriÅŸmek iÃ§in URL ÅŸu ÅŸekilde olacaktÄ±r: `https://jnanozjdybtpqgcwhdiz.supabase.co`.

### anon api anahtarlarÄ±

AyrÄ±ca bir **anon API anahtarÄ±** (`role: "anon"`) oluÅŸturacaktÄ±r, Ã¶rneÄŸin: `eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6ImpuYW5vemRyb2J0cHFnY3doZGl6Iiwicm9sZSI6ImFub24iLCJpYXQiOjE3MTQ5OTI3MTksImV4cCI6MjAzMDU2ODcxOX0.sRN0iMGM5J741pXav7UxeChyqBE9_Z-T0tLA9Zehvqk` uygulamanÄ±n API anahtarÄ±na ulaÅŸmak iÃ§in kullanmasÄ± gerekecektir.

Bu API'ye ulaÅŸmak iÃ§in API REST'i [**dokÃ¼manlarda**](https://supabase.com/docs/reference/self-hosting-auth/returns-the-configuration-settings-for-the-gotrue-server) bulmak mÃ¼mkÃ¼ndÃ¼r, ancak en ilginÃ§ uÃ§ noktalar ÅŸunlar olacaktÄ±r:

<details>

<summary>Signup (/auth/v1/signup)</summary>
```
POST /auth/v1/signup HTTP/2
Host: id.io.net
Content-Length: 90
X-Client-Info: supabase-js-web/2.39.2
Sec-Ch-Ua: "Not-A.Brand";v="99", "Chromium";v="124"
Sec-Ch-Ua-Mobile: ?0
Authorization: Bearer eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6ImpuYW5vemRyb2J0cHFnY3doZGl6Iiwicm9sZSI6ImFub24iLCJpYXQiOjE3MTQ5OTI3MTksImV4cCI6MjAzMDU2ODcxOX0.sRN0iMGM5J741pXav7UxeChyqBE9_Z-T0tLA9Zehvqk
User-Agent: Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/124.0.6367.60 Safari/537.36
Content-Type: application/json;charset=UTF-8
Apikey: eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6ImpuYW5vemRyb2J0cHFnY3doZGl6Iiwicm9sZSI6ImFub24iLCJpYXQiOjE3MTQ5OTI3MTksImV4cCI6MjAzMDU2ODcxOX0.sRN0iMGM5J741pXav7UxeChyqBE9_Z-T0tLA9Zehvqk
Sec-Ch-Ua-Platform: "macOS"
Accept: */*
Origin: https://cloud.io.net
Sec-Fetch-Site: same-site
Sec-Fetch-Mode: cors
Sec-Fetch-Dest: empty
Referer: https://cloud.io.net/
Accept-Encoding: gzip, deflate, br
Accept-Language: en-GB,en-US;q=0.9,en;q=0.8
Priority: u=1, i

{"email":"test@exmaple.com","password":"SomeCOmplexPwd239."}
```
</details>

<details>

<summary>Login (/auth/v1/token?grant_type=password)</summary>
```
POST /auth/v1/token?grant_type=password HTTP/2
Host: hypzbtgspjkludjcnjxl.supabase.co
Content-Length: 80
X-Client-Info: supabase-js-web/2.39.2
Sec-Ch-Ua: "Not-A.Brand";v="99", "Chromium";v="124"
Sec-Ch-Ua-Mobile: ?0
Authorization: Bearer eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6ImpuYW5vemRyb2J0cHFnY3doZGl6Iiwicm9sZSI6ImFub24iLCJpYXQiOjE3MTQ5OTI3MTksImV4cCI6MjAzMDU2ODcxOX0.sRN0iMGM5J741pXav7UxeChyqBE9_Z-T0tLA9Zehvqk
User-Agent: Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/124.0.6367.60 Safari/537.36
Content-Type: application/json;charset=UTF-8
Apikey: eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6ImpuYW5vemRyb2J0cHFnY3doZGl6Iiwicm9sZSI6ImFub24iLCJpYXQiOjE3MTQ5OTI3MTksImV4cCI6MjAzMDU2ODcxOX0.sRN0iMGM5J741pXav7UxeChyqBE9_Z-T0tLA9Zehvqk
Sec-Ch-Ua-Platform: "macOS"
Accept: */*
Origin: https://cloud.io.net
Sec-Fetch-Site: same-site
Sec-Fetch-Mode: cors
Sec-Fetch-Dest: empty
Referer: https://cloud.io.net/
Accept-Encoding: gzip, deflate, br
Accept-Language: en-GB,en-US;q=0.9,en;q=0.8
Priority: u=1, i

{"email":"test@exmaple.com","password":"SomeCOmplexPwd239."}
```
</details>

Yani, bir mÃ¼ÅŸterinin kendilerine verilen alt alan adÄ±nÄ± kullanarak supabase kullandÄ±ÄŸÄ±nÄ± keÅŸfettiÄŸinizde (ÅŸirketin bir alt alan adÄ±nÄ±n supabase alt alan adlarÄ± Ã¼zerinde bir CNAME'e sahip olmasÄ± mÃ¼mkÃ¼ndÃ¼r), **supabase API'sini kullanarak platformda yeni bir hesap oluÅŸturmayÄ±** deneyebilirsiniz.

### secret / service\_role api anahtarlarÄ±

**`role: "service_role"`** ile bir secret API anahtarÄ± da oluÅŸturulacaktÄ±r. Bu API anahtarÄ± gizli olmalÄ±dÄ±r Ã§Ã¼nkÃ¼ **SatÄ±r DÃ¼zeyi GÃ¼venliÄŸi** atlayabilir.

API anahtarÄ± ÅŸu ÅŸekilde gÃ¶rÃ¼nÃ¼r: `eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6ImpuYW5vemRyb2J0cHFnY3doZGl6Iiwicm9sZSI6InNlcnZpY2Vfcm9sZSIsImlhdCI6MTcxNDk5MjcxOSwiZXhwIjoyMDMwNTY4NzE5fQ.0a8fHGp3N_GiPq0y0dwfs06ywd-zhTwsm486Tha7354`

### JWT Secret

Bir **JWT Secret** de oluÅŸturulacak, bÃ¶ylece uygulama **Ã¶zel JWT tokenlarÄ± oluÅŸturup imzalayabilir**.

## Authentication

### KayÄ±tlar

{% hint style="success" %}
**VarsayÄ±lan olarak** supabase, daha Ã¶nce bahsedilen API uÃ§ noktalarÄ±nÄ± kullanarak **yeni kullanÄ±cÄ±larÄ±n projede hesap oluÅŸturmasÄ±na** izin verecektir.
{% endhint %}

Ancak, bu yeni hesaplar varsayÄ±lan olarak **hesaba giriÅŸ yapabilmek iÃ§in e-posta adreslerini doÄŸrulamak zorunda kalacaklardÄ±r**. **"Anonim giriÅŸlere izin ver"** seÃ§eneÄŸini etkinleÅŸtirmek, insanlarÄ±n e-posta adreslerini doÄŸrulamadan giriÅŸ yapmalarÄ±na izin verebilir. Bu, **beklenmedik verilere** eriÅŸim saÄŸlayabilir (kullanÄ±cÄ±lar `public` ve `authenticated` rollerini alÄ±rlar).\
Bu Ã§ok kÃ¶tÃ¼ bir fikirdir Ã§Ã¼nkÃ¼ supabase aktif kullanÄ±cÄ± baÅŸÄ±na Ã¼cret alÄ±r, bu nedenle insanlar kullanÄ±cÄ± oluÅŸturup giriÅŸ yapabilir ve supabase bu kullanÄ±cÄ±lar iÃ§in Ã¼cret alÄ±r:

<figure><img src="../.gitbook/assets/image (1) (1).png" alt=""><figcaption></figcaption></figure>

### Åifreler & oturumlar

Minimum ÅŸifre uzunluÄŸunu (varsayÄ±lan olarak), gereksinimleri (varsayÄ±lan olarak yok) ve sÄ±zdÄ±rÄ±lmÄ±ÅŸ ÅŸifrelerin kullanÄ±lmasÄ±nÄ± engellemek mÃ¼mkÃ¼ndÃ¼r.\
**VarsayÄ±lan gereksinimler zayÄ±f olduÄŸundan gereksinimleri iyileÅŸtirmek** Ã¶nerilir.

* KullanÄ±cÄ± OturumlarÄ±: KullanÄ±cÄ± oturumlarÄ±nÄ±n nasÄ±l Ã§alÄ±ÅŸacaÄŸÄ±nÄ± (zaman aÅŸÄ±mÄ±, kullanÄ±cÄ± baÅŸÄ±na 1 oturum...) yapÄ±landÄ±rmak mÃ¼mkÃ¼ndÃ¼r.
* Bot ve KÃ¶tÃ¼ye KullanÄ±m KorumasÄ±: Captcha etkinleÅŸtirilebilir.

### SMTP AyarlarÄ±

E-posta gÃ¶ndermek iÃ§in bir SMTP ayarlamak mÃ¼mkÃ¼ndÃ¼r.

### GeliÅŸmiÅŸ Ayarlar

* EriÅŸim tokenlarÄ±nÄ±n sona erme sÃ¼resini ayarlayÄ±n (varsayÄ±lan olarak 3600)
* Potansiyel olarak tehlikeye girmiÅŸ yenileme tokenlarÄ±nÄ± tespit edip iptal etmek ve zaman aÅŸÄ±mÄ±nÄ± ayarlayÄ±n
* MFA: KullanÄ±cÄ± baÅŸÄ±na aynÄ± anda kaÃ§ MFA faktÃ¶rÃ¼nÃ¼n kaydedilebileceÄŸini belirtin (varsayÄ±lan olarak 10)
* Maksimum DoÄŸrudan VeritabanÄ± BaÄŸlantÄ±larÄ±: Kimlik doÄŸrulama iÃ§in kullanÄ±lan maksimum baÄŸlantÄ± sayÄ±sÄ± (varsayÄ±lan olarak 10)
* Maksimum Ä°stek SÃ¼resi: Bir Kimlik doÄŸrulama isteÄŸinin sÃ¼rmesine izin verilen maksimum sÃ¼re (varsayÄ±lan olarak 10s)

## Depolama

{% hint style="success" %}
Supabase, **dosyalarÄ± depolamaya** ve bunlarÄ± bir URL Ã¼zerinden eriÅŸilebilir hale getirmeye izin verir (S3 bucketlarÄ±nÄ± kullanÄ±r).
{% endhint %}

* YÃ¼kleme dosya boyutu sÄ±nÄ±rÄ±nÄ± ayarlayÄ±n (varsayÄ±lan 50MB)
* S3 baÄŸlantÄ±sÄ± ÅŸu ÅŸekilde bir URL ile verilir: `https://jnanozjdybtpqgcwhdiz.supabase.co/storage/v1/s3`
* **S3 eriÅŸim anahtarÄ± talep etmek** mÃ¼mkÃ¼ndÃ¼r, bu anahtarlar bir `access key ID` (Ã¶rneÄŸin `a37d96544d82ba90057e0e06131d0a7b`) ve bir `secret access key` (Ã¶rneÄŸin `58420818223133077c2cec6712a4f909aec93b4daeedae205aa8e30d5a860628`) ile oluÅŸturulur.

## Edge Functions

Supabase'de **sÄ±rlarÄ± saklamak** da mÃ¼mkÃ¼ndÃ¼r ve bu sÄ±rlar **edge functions tarafÄ±ndan eriÅŸilebilir** olacaktÄ±r (web Ã¼zerinden oluÅŸturulup silinebilirler, ancak deÄŸerlerine doÄŸrudan eriÅŸmek mÃ¼mkÃ¼n deÄŸildir).

{% hint style="success" %}
AWS Hacking Ã¶ÄŸrenin ve pratik yapÄ±n:<img src="/.gitbook/assets/image.png" alt="" data-size="line">[**HackTricks Training AWS Red Team Expert (ARTE)**](https://training.hacktricks.xyz/courses/arte)<img src="/.gitbook/assets/image.png" alt="" data-size="line">\
GCP Hacking Ã¶ÄŸrenin ve pratik yapÄ±n: <img src="/.gitbook/assets/image (2).png" alt="" data-size="line">[**HackTricks Training GCP Red Team Expert (GRTE)**<img src="/.gitbook/assets/image (2).png" alt="" data-size="line">](https://training.hacktricks.xyz/courses/grte)

<details>

<summary>HackTricks'i Destekleyin</summary>

* [**Abonelik planlarÄ±nÄ±**](https://github.com/sponsors/carlospolop) kontrol edin!
* ğŸ’¬ [**Discord grubuna**](https://discord.gg/hRep4RUj7f) veya [**telegram grubuna**](https://t.me/peass) katÄ±lÄ±n ya da **Twitter'da** ğŸ¦ [**@hacktricks\_live**](https://twitter.com/hacktricks\_live) bizi takip edin.
* **HackTricks'e** [**PR gÃ¶ndererek**](https://github.com/carlospolop/hacktricks) ve [**HackTricks Cloud**](https://github.com/carlospolop/hacktricks-cloud) github depolarÄ±na katkÄ±da bulunarak hacking ipuÃ§larÄ±nÄ± paylaÅŸÄ±n.

</details>
{% endhint %}
