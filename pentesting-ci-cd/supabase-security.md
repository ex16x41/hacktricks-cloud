# Supabase Security

{% hint style="success" %}
Learn & practice AWS Hacking:<img src="../.gitbook/assets/image (1) (1).png" alt="" data-size="line">[**HackTricks Training AWS Red Team Expert (ARTE)**](https://training.hacktricks.xyz/courses/arte)<img src="../.gitbook/assets/image (1) (1).png" alt="" data-size="line">\
Learn & practice GCP Hacking: <img src="../.gitbook/assets/image (2).png" alt="" data-size="line">[**HackTricks Training GCP Red Team Expert (GRTE)**<img src="../.gitbook/assets/image (2).png" alt="" data-size="line">](https://training.hacktricks.xyz/courses/grte)

<details>

<summary>Support HackTricks</summary>

* Check the [**subscription plans**](https://github.com/sponsors/carlospolop)!
* **Join the** ğŸ’¬ [**Discord group**](https://discord.gg/hRep4RUj7f) or the [**telegram group**](https://t.me/peass) or **follow** us on **Twitter** ğŸ¦ [**@hacktricks\_live**](https://twitter.com/hacktricks\_live)**.**
* **Share hacking tricks by submitting PRs to the** [**HackTricks**](https://github.com/carlospolop/hacktricks) and [**HackTricks Cloud**](https://github.com/carlospolop/hacktricks-cloud) github repos.

</details>
{% endhint %}

## ê¸°ë³¸ ì •ë³´

ê·¸ë“¤ì˜ [**ëœë”© í˜ì´ì§€**](https://supabase.com/)ì— ë”°ë¥´ë©´: SupabaseëŠ” ì˜¤í”ˆ ì†ŒìŠ¤ Firebase ëŒ€ì•ˆì…ë‹ˆë‹¤. Postgres ë°ì´í„°ë² ì´ìŠ¤, ì¸ì¦, ì¦‰ì‹œ API, ì—£ì§€ í•¨ìˆ˜, ì‹¤ì‹œê°„ êµ¬ë…, ìŠ¤í† ë¦¬ì§€ ë° ë²¡í„° ì„ë² ë”©ìœ¼ë¡œ í”„ë¡œì íŠ¸ë¥¼ ì‹œì‘í•˜ì„¸ìš”.

### ì„œë¸Œë„ë©”ì¸

ê¸°ë³¸ì ìœ¼ë¡œ í”„ë¡œì íŠ¸ê°€ ìƒì„±ë˜ë©´ ì‚¬ìš©ìëŠ” **`jnanozjdybtpqgcwhdiz.supabase.co`**ì™€ ê°™ì€ supabase.co ì„œë¸Œë„ë©”ì¸ì„ ë°›ê²Œ ë©ë‹ˆë‹¤.

## **ë°ì´í„°ë² ì´ìŠ¤ êµ¬ì„±**

{% hint style="success" %}
**ì´ ë°ì´í„°ëŠ” `https://supabase.com/dashboard/project/<project-id>/settings/database`ì™€ ê°™ì€ ë§í¬ì—ì„œ ì ‘ê·¼í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.**
{% endhint %}

ì´ **ë°ì´í„°ë² ì´ìŠ¤**ëŠ” ì¼ë¶€ AWS ë¦¬ì „ì—ì„œ ë°°í¬ë˜ë©°, ì—°ê²°í•˜ê¸° ìœ„í•´ì„œëŠ” ë‹¤ìŒê³¼ ê°™ì´ ì—°ê²°í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤: `postgres://postgres.jnanozjdybtpqgcwhdiz:[YOUR-PASSWORD]@aws-0-us-west-1.pooler.supabase.com:5432/postgres` (ì´ê²ƒì€ us-west-1ì—ì„œ ìƒì„±ë˜ì—ˆìŠµë‹ˆë‹¤).\
ë¹„ë°€ë²ˆí˜¸ëŠ” ì‚¬ìš©ìê°€ ì´ì „ì— ì…ë ¥í•œ **ë¹„ë°€ë²ˆí˜¸**ì…ë‹ˆë‹¤.

ë”°ë¼ì„œ ì„œë¸Œë„ë©”ì¸ì´ ì•Œë ¤ì§„ ê²ƒì´ê³  ì‚¬ìš©ì ì´ë¦„ìœ¼ë¡œ ì‚¬ìš©ë˜ë©° AWS ë¦¬ì „ì´ ì œí•œì ì´ê¸° ë•Œë¬¸ì— **ë¹„ë°€ë²ˆí˜¸ë¥¼ ë¬´ì‘ìœ„ ëŒ€ì… ê³µê²©**í•  ê°€ëŠ¥ì„±ì´ ìˆì„ ìˆ˜ ìˆìŠµë‹ˆë‹¤.

ì´ ì„¹ì…˜ì—ëŠ” ë‹¤ìŒê³¼ ê°™ì€ ì˜µì…˜ë„ í¬í•¨ë˜ì–´ ìˆìŠµë‹ˆë‹¤:

* ë°ì´í„°ë² ì´ìŠ¤ ë¹„ë°€ë²ˆí˜¸ ì¬ì„¤ì •
* ì—°ê²° í’€ êµ¬ì„±
* SSL êµ¬ì„±: í‰ë¬¸ ì—°ê²° ê±°ë¶€ (ê¸°ë³¸ì ìœ¼ë¡œ í™œì„±í™”ë˜ì–´ ìˆìŒ)
* ë””ìŠ¤í¬ í¬ê¸° êµ¬ì„±
* ë„¤íŠ¸ì›Œí¬ ì œí•œ ë° ê¸ˆì§€ ì ìš©

## API êµ¬ì„±

{% hint style="success" %}
**ì´ ë°ì´í„°ëŠ” `https://supabase.com/dashboard/project/<project-id>/settings/api`ì™€ ê°™ì€ ë§í¬ì—ì„œ ì ‘ê·¼í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.**
{% endhint %}

í”„ë¡œì íŠ¸ì—ì„œ supabase APIì— ì ‘ê·¼í•˜ëŠ” URLì€ ë‹¤ìŒê³¼ ê°™ì„ ê²ƒì…ë‹ˆë‹¤: `https://jnanozjdybtpqgcwhdiz.supabase.co`.

### anon API í‚¤

ë˜í•œ **anon API í‚¤**(`role: "anon"`)ë¥¼ ìƒì„±í•©ë‹ˆë‹¤, ì˜ˆ: `eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6ImpuYW5vemRyb2J0cHFnY3doZGl6Iiwicm9sZSI6ImFub24iLCJpYXQiOjE3MTQ5OTI3MTksImV4cCI6MjAzMDU2ODcxOX0.sRN0iMGM5J741pXav7UxeChyqBE9_Z-T0tLA9Zehvqk` ì´ ì• í”Œë¦¬ì¼€ì´ì…˜ì´ API í‚¤ì— ì ‘ê·¼í•˜ê¸° ìœ„í•´ í•„ìš”í•©ë‹ˆë‹¤.

ì´ APIì— ì—°ë½í•˜ê¸° ìœ„í•œ API RESTë¥¼ [**ë¬¸ì„œ**](https://supabase.com/docs/reference/self-hosting-auth/returns-the-configuration-settings-for-the-gotrue-server)ì—ì„œ ì°¾ì„ ìˆ˜ ìˆì§€ë§Œ, ê°€ì¥ í¥ë¯¸ë¡œìš´ ì—”ë“œí¬ì¸íŠ¸ëŠ” ë‹¤ìŒê³¼ ê°™ìŠµë‹ˆë‹¤:

<details>

<summary>Signup (/auth/v1/signup)</summary>
```
POST /auth/v1/signup HTTP/2
Host: id.io.net
Content-Length: 90
X-Client-Info: supabase-js-web/2.39.2
Sec-Ch-Ua: "Not-A.Brand";v="99", "Chromium";v="124"
Sec-Ch-Ua-Mobile: ?0
Authorization: Bearer eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6ImpuYW5vemRyb2J0cHFnY3doZGl6Iiwicm9sZSI6ImFub24iLCJpYXQiOjE3MTQ5OTI3MTksImV4cCI6MjAzMDU2ODcxOX0.sRN0iMGM5J741pXav7UxeChyqBE9_Z-T0tLA9Zehvqk
User-Agent: Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/124.0.6367.60 Safari/537.36
Content-Type: application/json;charset=UTF-8
Apikey: eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6ImpuYW5vemRyb2J0cHFnY3doZGl6Iiwicm9sZSI6ImFub24iLCJpYXQiOjE3MTQ5OTI3MTksImV4cCI6MjAzMDU2ODcxOX0.sRN0iMGM5J741pXav7UxeChyqBE9_Z-T0tLA9Zehvqk
Sec-Ch-Ua-Platform: "macOS"
Accept: */*
Origin: https://cloud.io.net
Sec-Fetch-Site: same-site
Sec-Fetch-Mode: cors
Sec-Fetch-Dest: empty
Referer: https://cloud.io.net/
Accept-Encoding: gzip, deflate, br
Accept-Language: en-GB,en-US;q=0.9,en;q=0.8
Priority: u=1, i

{"email":"test@exmaple.com","password":"SomeCOmplexPwd239."}
```
</details>

<details>

<summary>ë¡œê·¸ì¸ (/auth/v1/token?grant_type=password)</summary>
```
POST /auth/v1/token?grant_type=password HTTP/2
Host: hypzbtgspjkludjcnjxl.supabase.co
Content-Length: 80
X-Client-Info: supabase-js-web/2.39.2
Sec-Ch-Ua: "Not-A.Brand";v="99", "Chromium";v="124"
Sec-Ch-Ua-Mobile: ?0
Authorization: Bearer eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6ImpuYW5vemRyb2J0cHFnY3doZGl6Iiwicm9sZSI6ImFub24iLCJpYXQiOjE3MTQ5OTI3MTksImV4cCI6MjAzMDU2ODcxOX0.sRN0iMGM5J741pXav7UxeChyqBE9_Z-T0tLA9Zehvqk
User-Agent: Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/124.0.6367.60 Safari/537.36
Content-Type: application/json;charset=UTF-8
Apikey: eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6ImpuYW5vemRyb2J0cHFnY3doZGl6Iiwicm9sZSI6ImFub24iLCJpYXQiOjE3MTQ5OTI3MTksImV4cCI6MjAzMDU2ODcxOX0.sRN0iMGM5J741pXav7UxeChyqBE9_Z-T0tLA9Zehvqk
Sec-Ch-Ua-Platform: "macOS"
Accept: */*
Origin: https://cloud.io.net
Sec-Fetch-Site: same-site
Sec-Fetch-Mode: cors
Sec-Fetch-Dest: empty
Referer: https://cloud.io.net/
Accept-Encoding: gzip, deflate, br
Accept-Language: en-GB,en-US;q=0.9,en;q=0.8
Priority: u=1, i

{"email":"test@exmaple.com","password":"SomeCOmplexPwd239."}
```
</details>

ê·¸ë˜ì„œ, í´ë¼ì´ì–¸íŠ¸ê°€ ë¶€ì—¬ë°›ì€ ì„œë¸Œë„ë©”ì¸ìœ¼ë¡œ supabaseë¥¼ ì‚¬ìš©í•˜ëŠ” ê²ƒì„ ë°œê²¬í•  ë•Œë§ˆë‹¤ (íšŒì‚¬ì˜ ì„œë¸Œë„ë©”ì¸ì´ ê·¸ë“¤ì˜ supabase ì„œë¸Œë„ë©”ì¸ì— CNAMEì„ ê°€ì§ˆ ê°€ëŠ¥ì„±ì´ ìˆìŒ), **supabase APIë¥¼ ì‚¬ìš©í•˜ì—¬ í”Œë«í¼ì— ìƒˆ ê³„ì •ì„ ìƒì„±í•´ ë³´ì‹­ì‹œì˜¤**.

### ë¹„ë°€ / ì„œë¹„ìŠ¤\_ì—­í•  API í‚¤

**`role: "service_role"`**ë¡œ ë¹„ë°€ API í‚¤ë„ ìƒì„±ë©ë‹ˆë‹¤. ì´ API í‚¤ëŠ” **Row Level Security**ë¥¼ ìš°íšŒí•  ìˆ˜ ìˆê¸° ë•Œë¬¸ì— ë¹„ë°€ë¡œ ìœ ì§€í•´ì•¼ í•©ë‹ˆë‹¤.

API í‚¤ëŠ” ë‹¤ìŒê³¼ ê°™ìŠµë‹ˆë‹¤: `eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6ImpuYW5vemRyb2J0cHFnY3doZGl6Iiwicm9sZSI6InNlcnZpY2Vfcm9sZSIsImlhdCI6MTcxNDk5MjcxOSwiZXhwIjoyMDMwNTY4NzE5fQ.0a8fHGp3N_GiPq0y0dwfs06ywd-zhTwsm486Tha7354`

### JWT ë¹„ë°€

**JWT ë¹„ë°€**ë„ ìƒì„±ë˜ì–´ ì• í”Œë¦¬ì¼€ì´ì…˜ì´ **ì‚¬ìš©ì ì •ì˜ JWT í† í°ì„ ìƒì„±í•˜ê³  ì„œëª…**í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.

## ì¸ì¦

### ê°€ì…

{% hint style="success" %}
ê¸°ë³¸ì ìœ¼ë¡œ supabaseëŠ” **ìƒˆ ì‚¬ìš©ìê°€ í”„ë¡œì íŠ¸ì— ê³„ì •ì„ ìƒì„±**í•  ìˆ˜ ìˆë„ë¡ ì´ì „ì— ì–¸ê¸‰í•œ API ì—”ë“œí¬ì¸íŠ¸ë¥¼ ì‚¬ìš©í•©ë‹ˆë‹¤.
{% endhint %}

ê·¸ëŸ¬ë‚˜ ì´ëŸ¬í•œ ìƒˆ ê³„ì •ì€ ê¸°ë³¸ì ìœ¼ë¡œ **ë¡œê·¸ì¸í•˜ê¸° ìœ„í•´ ì´ë©”ì¼ ì£¼ì†Œë¥¼ í™•ì¸í•´ì•¼** í•©ë‹ˆë‹¤. ì´ë©”ì¼ ì£¼ì†Œë¥¼ í™•ì¸í•˜ì§€ ì•Šê³ ë„ ë¡œê·¸ì¸í•  ìˆ˜ ìˆë„ë¡ **"ìµëª… ë¡œê·¸ì¸ í—ˆìš©"**ì„ í™œì„±í™”í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤. ì´ëŠ” **ì˜ˆìƒì¹˜ ëª»í•œ ë°ì´í„°**ì— ëŒ€í•œ ì ‘ê·¼ì„ í—ˆìš©í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤ (ê·¸ë“¤ì€ `public` ë° `authenticated` ì—­í• ì„ ë¶€ì—¬ë°›ìŠµë‹ˆë‹¤).\
ì´ëŠ” supabaseê°€ í™œì„± ì‚¬ìš©ìë‹¹ ìš”ê¸ˆì„ ë¶€ê³¼í•˜ê¸° ë•Œë¬¸ì— ë§¤ìš° ë‚˜ìœ ì•„ì´ë””ì–´ì…ë‹ˆë‹¤. ì‚¬ëŒë“¤ì´ ì‚¬ìš©ìë¥¼ ìƒì„±í•˜ê³  ë¡œê·¸ì¸í•  ìˆ˜ ìˆìœ¼ë©° supabaseëŠ” ì´ì— ëŒ€í•´ ìš”ê¸ˆì„ ë¶€ê³¼í•  ê²ƒì…ë‹ˆë‹¤:

<figure><img src="../.gitbook/assets/image (1) (1) (1) (1).png" alt=""><figcaption></figcaption></figure>

### ë¹„ë°€ë²ˆí˜¸ ë° ì„¸ì…˜

ìµœì†Œ ë¹„ë°€ë²ˆí˜¸ ê¸¸ì´(ê¸°ë³¸ê°’), ìš”êµ¬ ì‚¬í•­(ê¸°ë³¸ê°’ ì—†ìŒ)ì„ ì§€ì •í•˜ê³  ìœ ì¶œëœ ë¹„ë°€ë²ˆí˜¸ ì‚¬ìš©ì„ ê¸ˆì§€í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.\
ê¸°ë³¸ ìš”êµ¬ ì‚¬í•­ì´ ì•½í•˜ê¸° ë•Œë¬¸ì— **ìš”êµ¬ ì‚¬í•­ì„ ê°œì„ í•˜ëŠ” ê²ƒì´ ì¢‹ìŠµë‹ˆë‹¤**.

* ì‚¬ìš©ì ì„¸ì…˜: ì‚¬ìš©ì ì„¸ì…˜ ì‘ë™ ë°©ì‹ì„ êµ¬ì„±í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤ (íƒ€ì„ì•„ì›ƒ, ì‚¬ìš©ìë‹¹ 1ì„¸ì…˜...)
* ë´‡ ë° ë‚¨ìš© ë°©ì§€: Captchaë¥¼ í™œì„±í™”í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.

### SMTP ì„¤ì •

ì´ë©”ì¼ì„ ë³´ë‚´ê¸° ìœ„í•´ SMTPë¥¼ ì„¤ì •í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.

### ê³ ê¸‰ ì„¤ì •

* ì•¡ì„¸ìŠ¤ í† í°ì˜ ë§Œë£Œ ì‹œê°„ ì„¤ì • (ê¸°ë³¸ê°’ 3600)
* ì ì¬ì ìœ¼ë¡œ ì†ìƒëœ ìƒˆë¡œ ê³ ì¹¨ í† í°ì„ ê°ì§€í•˜ê³  ì·¨ì†Œí•˜ëŠ” ì„¤ì • ë° íƒ€ì„ì•„ì›ƒ
* MFA: ì‚¬ìš©ìë‹¹ í•œ ë²ˆì— ë“±ë¡í•  ìˆ˜ ìˆëŠ” MFA ìš”ì†Œ ìˆ˜ë¥¼ ì§€ì • (ê¸°ë³¸ê°’ 10)
* ìµœëŒ€ ì§ì ‘ ë°ì´í„°ë² ì´ìŠ¤ ì—°ê²°: ì¸ì¦ì— ì‚¬ìš©ë˜ëŠ” ìµœëŒ€ ì—°ê²° ìˆ˜ (ê¸°ë³¸ê°’ 10)
* ìµœëŒ€ ìš”ì²­ ì§€ì† ì‹œê°„: ì¸ì¦ ìš”ì²­ì´ ì§€ì†ë  ìˆ˜ ìˆëŠ” ìµœëŒ€ ì‹œê°„ (ê¸°ë³¸ê°’ 10ì´ˆ)

## ì €ì¥ì†Œ

{% hint style="success" %}
SupabaseëŠ” **íŒŒì¼ì„ ì €ì¥**í•˜ê³  URLì„ í†µí•´ ì ‘ê·¼í•  ìˆ˜ ìˆë„ë¡ í•©ë‹ˆë‹¤ (S3 ë²„í‚·ì„ ì‚¬ìš©í•©ë‹ˆë‹¤).
{% endhint %}

* ì—…ë¡œë“œ íŒŒì¼ í¬ê¸° ì œí•œ ì„¤ì • (ê¸°ë³¸ê°’ 50MB)
* S3 ì—°ê²°ì€ ë‹¤ìŒê³¼ ê°™ì€ URLë¡œ ì œê³µë©ë‹ˆë‹¤: `https://jnanozjdybtpqgcwhdiz.supabase.co/storage/v1/s3`
* `access key ID` (ì˜ˆ: `a37d96544d82ba90057e0e06131d0a7b`)ì™€ `secret access key` (ì˜ˆ: `58420818223133077c2cec6712a4f909aec93b4daeedae205aa8e30d5a860628`)ë¡œ êµ¬ì„±ëœ **S3 ì•¡ì„¸ìŠ¤ í‚¤ë¥¼ ìš”ì²­**í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.

## ì—£ì§€ í•¨ìˆ˜

supabaseì— **ë¹„ë°€ì„ ì €ì¥**í•  ìˆ˜ ìˆìœ¼ë©°, ì´ëŠ” **ì—£ì§€ í•¨ìˆ˜ì— ì˜í•´ ì ‘ê·¼ ê°€ëŠ¥**í•©ë‹ˆë‹¤ (ì›¹ì—ì„œ ìƒì„± ë° ì‚­ì œí•  ìˆ˜ ìˆì§€ë§Œ, ê°’ì— ì§ì ‘ ì ‘ê·¼í•  ìˆ˜ëŠ” ì—†ìŠµë‹ˆë‹¤).

{% hint style="success" %}
AWS í•´í‚¹ ë°°ìš°ê¸° ë° ì—°ìŠµí•˜ê¸°:<img src="../.gitbook/assets/image (1) (1).png" alt="" data-size="line">[**HackTricks Training AWS Red Team Expert (ARTE)**](https://training.hacktricks.xyz/courses/arte)<img src="../.gitbook/assets/image (1) (1).png" alt="" data-size="line">\
GCP í•´í‚¹ ë°°ìš°ê¸° ë° ì—°ìŠµí•˜ê¸°: <img src="../.gitbook/assets/image (2).png" alt="" data-size="line">[**HackTricks Training GCP Red Team Expert (GRTE)**<img src="../.gitbook/assets/image (2).png" alt="" data-size="line">](https://training.hacktricks.xyz/courses/grte)

<details>

<summary>HackTricks ì§€ì›í•˜ê¸°</summary>

* [**êµ¬ë… ê³„íš**](https://github.com/sponsors/carlospolop) í™•ì¸í•˜ê¸°!
* **ğŸ’¬ [**Discord ê·¸ë£¹**](https://discord.gg/hRep4RUj7f) ë˜ëŠ” [**í…”ë ˆê·¸ë¨ ê·¸ë£¹**](https://t.me/peass)ì— ì°¸ì—¬í•˜ê±°ë‚˜ **Twitter**ì—ì„œ **íŒ”ë¡œìš°**í•˜ì„¸ìš” ğŸ¦ [**@hacktricks\_live**](https://twitter.com/hacktricks\_live)**.**
* **í•´í‚¹ íŒì„ ê³µìœ í•˜ë ¤ë©´ [**HackTricks**](https://github.com/carlospolop/hacktricks) ë° [**HackTricks Cloud**](https://github.com/carlospolop/hacktricks-cloud) ê¹ƒí—ˆë¸Œ ë¦¬í¬ì§€í† ë¦¬ì— PRì„ ì œì¶œí•˜ì„¸ìš”.**

</details>
{% endhint %}
