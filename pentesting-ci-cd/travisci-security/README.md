# TravisCI Security

{% hint style="success" %}
Learn & practice AWS Hacking:<img src="../../.gitbook/assets/image (1) (1).png" alt="" data-size="line">[**HackTricks Training AWS Red Team Expert (ARTE)**](https://training.hacktricks.xyz/courses/arte)<img src="../../.gitbook/assets/image (1) (1).png" alt="" data-size="line">\
Learn & practice GCP Hacking: <img src="../../.gitbook/assets/image (2).png" alt="" data-size="line">[**HackTricks Training GCP Red Team Expert (GRTE)**<img src="../../.gitbook/assets/image (2).png" alt="" data-size="line">](https://training.hacktricks.xyz/courses/grte)

<details>

<summary>Support HackTricks</summary>

* Check the [**subscription plans**](https://github.com/sponsors/carlospolop)!
* **Join the** ğŸ’¬ [**Discord group**](https://discord.gg/hRep4RUj7f) or the [**telegram group**](https://t.me/peass) or **follow** us on **Twitter** ğŸ¦ [**@hacktricks\_live**](https://twitter.com/hacktricks\_live)**.**
* **Share hacking tricks by submitting PRs to the** [**HackTricks**](https://github.com/carlospolop/hacktricks) and [**HackTricks Cloud**](https://github.com/carlospolop/hacktricks-cloud) github repos.

</details>
{% endhint %}

## What is TravisCI

**Travis CI**ã¯ã€**ãƒ›ã‚¹ãƒ†ã‚£ãƒ³ã‚°**ã¾ãŸã¯**ã‚ªãƒ³ãƒ—ãƒ¬ãƒŸã‚¹**ã®**ç¶™ç¶šçš„ã‚¤ãƒ³ãƒ†ã‚°ãƒ¬ãƒ¼ã‚·ãƒ§ãƒ³**ã‚µãƒ¼ãƒ“ã‚¹ã§ã€è¤‡æ•°ã®**ç•°ãªã‚‹gitãƒ—ãƒ©ãƒƒãƒˆãƒ•ã‚©ãƒ¼ãƒ **ã«ãƒ›ã‚¹ãƒˆã•ã‚Œã¦ã„ã‚‹ã‚½ãƒ•ãƒˆã‚¦ã‚§ã‚¢ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆã‚’ãƒ“ãƒ«ãƒ‰ãŠã‚ˆã³ãƒ†ã‚¹ãƒˆã™ã‚‹ãŸã‚ã«ä½¿ç”¨ã•ã‚Œã¾ã™ã€‚

{% content-ref url="basic-travisci-information.md" %}
[basic-travisci-information.md](basic-travisci-information.md)
{% endcontent-ref %}

## Attacks

### Triggers

æ”»æ’ƒã‚’é–‹å§‹ã™ã‚‹ã«ã¯ã€ã¾ãšãƒ“ãƒ«ãƒ‰ã‚’ãƒˆãƒªã‚¬ãƒ¼ã™ã‚‹æ–¹æ³•ã‚’çŸ¥ã‚‹å¿…è¦ãŒã‚ã‚Šã¾ã™ã€‚ãƒ‡ãƒ•ã‚©ãƒ«ãƒˆã§ã¯ã€TravisCIã¯**ãƒ—ãƒƒã‚·ãƒ¥ã¨ãƒ—ãƒ«ãƒªã‚¯ã‚¨ã‚¹ãƒˆã§ãƒ“ãƒ«ãƒ‰ã‚’ãƒˆãƒªã‚¬ãƒ¼ã—ã¾ã™**ï¼š

![](<../../.gitbook/assets/image (145).png>)

#### Cron Jobs

ã‚¦ã‚§ãƒ–ã‚¢ãƒ—ãƒªã‚±ãƒ¼ã‚·ãƒ§ãƒ³ã«ã‚¢ã‚¯ã‚»ã‚¹ã§ãã‚‹å ´åˆã€**ãƒ“ãƒ«ãƒ‰ã‚’å®Ÿè¡Œã™ã‚‹ãŸã‚ã®cronã‚’è¨­å®šã§ãã¾ã™**ã€‚ã“ã‚Œã¯æŒç¶šæ€§ã®ãŸã‚ã‚„ãƒ“ãƒ«ãƒ‰ã‚’ãƒˆãƒªã‚¬ãƒ¼ã™ã‚‹ãŸã‚ã«å½¹ç«‹ã¡ã¾ã™ï¼š

![](<../../.gitbook/assets/image (243).png>)

{% hint style="info" %}
[ã“ã¡ã‚‰](https://github.com/travis-ci/travis-ci/issues/9162)ã«ã‚ˆã‚‹ã¨ã€`.travis.yml`å†…ã§cronã‚’è¨­å®šã™ã‚‹ã“ã¨ã¯ã§ããªã„ã‚ˆã†ã§ã™ã€‚
{% endhint %}

### Third Party PR

TravisCIã¯ãƒ‡ãƒ•ã‚©ãƒ«ãƒˆã§ã€ç¬¬ä¸‰è€…ã‹ã‚‰ã®PRã¨ç’°å¢ƒå¤‰æ•°ã‚’å…±æœ‰ã™ã‚‹ã“ã¨ã‚’ç„¡åŠ¹ã«ã—ã¦ã„ã¾ã™ãŒã€èª°ã‹ãŒãã‚Œã‚’æœ‰åŠ¹ã«ã™ã‚‹ã¨ã€ãƒªãƒã‚¸ãƒˆãƒªã«PRã‚’ä½œæˆã—ã¦ç§˜å¯†ã‚’æŠ½å‡ºã™ã‚‹ã“ã¨ãŒã§ãã¾ã™ï¼š

![](<../../.gitbook/assets/image (208).png>)

### Dumping Secrets

[**åŸºæœ¬æƒ…å ±**](basic-travisci-information.md)ãƒšãƒ¼ã‚¸ã§èª¬æ˜ã•ã‚Œã¦ã„ã‚‹ã‚ˆã†ã«ã€ç§˜å¯†ã«ã¯2ç¨®é¡ã‚ã‚Šã¾ã™ã€‚**ç’°å¢ƒå¤‰æ•°ã®ç§˜å¯†**ï¼ˆã‚¦ã‚§ãƒ–ãƒšãƒ¼ã‚¸ã«ãƒªã‚¹ãƒˆã•ã‚Œã¦ã„ã¾ã™ï¼‰ã¨ã€**ã‚«ã‚¹ã‚¿ãƒ æš—å·åŒ–ã•ã‚ŒãŸç§˜å¯†**ã§ã€ã“ã‚Œã¯`.travis.yml`ãƒ•ã‚¡ã‚¤ãƒ«å†…ã«base64ã¨ã—ã¦ä¿å­˜ã•ã‚Œã¦ã„ã¾ã™ï¼ˆä¸¡æ–¹ã¨ã‚‚æš—å·åŒ–ã•ã‚Œã¦ä¿å­˜ã•ã‚Œã‚‹ã¨ã€æœ€çµ‚çš„ãªãƒã‚·ãƒ³ã®ç’°å¢ƒå¤‰æ•°ã¨ã—ã¦è¡¨ç¤ºã•ã‚Œã¾ã™ï¼‰ã€‚

* **ç’°å¢ƒå¤‰æ•°**ã¨ã—ã¦è¨­å®šã•ã‚ŒãŸ**ç§˜å¯†ã‚’åˆ—æŒ™ã™ã‚‹**ã«ã¯ã€**ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆã®è¨­å®š**ã«ç§»å‹•ã—ã€ãƒªã‚¹ãƒˆã‚’ç¢ºèªã—ã¾ã™ã€‚ãŸã ã—ã€ã“ã“ã§è¨­å®šã•ã‚ŒãŸã™ã¹ã¦ã®ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆç’°å¢ƒå¤‰æ•°ã¯ã€ãƒ“ãƒ«ãƒ‰ã‚’ãƒˆãƒªã‚¬ãƒ¼ã™ã‚‹ã¨è¡¨ç¤ºã•ã‚Œã¾ã™ã€‚
* **ã‚«ã‚¹ã‚¿ãƒ æš—å·åŒ–ã•ã‚ŒãŸç§˜å¯†**ã‚’åˆ—æŒ™ã™ã‚‹ã«ã¯ã€æœ€å–„ã®æ–¹æ³•ã¯**`.travis.yml`ãƒ•ã‚¡ã‚¤ãƒ«ã‚’ç¢ºèªã™ã‚‹**ã“ã¨ã§ã™ã€‚
* **æš—å·åŒ–ã•ã‚ŒãŸãƒ•ã‚¡ã‚¤ãƒ«**ã‚’åˆ—æŒ™ã™ã‚‹ã«ã¯ã€ãƒªãƒã‚¸ãƒˆãƒªå†…ã®**`.enc`ãƒ•ã‚¡ã‚¤ãƒ«**ã‚’ç¢ºèªã™ã‚‹ã‹ã€è¨­å®šãƒ•ã‚¡ã‚¤ãƒ«å†…ã®`openssl aes-256-cbc -K $encrypted_355e94ba1091_key -iv $encrypted_355e94ba1091_iv -in super_secret.txt.enc -out super_secret.txt -d`ã«ä¼¼ãŸè¡Œã‚’æ¢ã™ã‹ã€æ¬¡ã®ã‚ˆã†ãª**ç’°å¢ƒå¤‰æ•°**å†…ã®**æš—å·åŒ–ã•ã‚ŒãŸivã¨ã‚­ãƒ¼**ã‚’æ¢ã—ã¾ã™ï¼š

![](<../../.gitbook/assets/image (81).png>)

### TODO:

* Windows/Mac/Linuxã§å®Ÿè¡Œã•ã‚Œã‚‹ãƒªãƒãƒ¼ã‚¹ã‚·ã‚§ãƒ«ã‚’æŒã¤ãƒ“ãƒ«ãƒ‰ã®ä¾‹
* ãƒ­ã‚°ã«base64ã‚¨ãƒ³ã‚³ãƒ¼ãƒ‰ã•ã‚ŒãŸenvã‚’æ¼æ´©ã•ã›ã‚‹ãƒ“ãƒ«ãƒ‰ã®ä¾‹

### TravisCI Enterprise

æ”»æ’ƒè€…ãŒ**TravisCIã‚¨ãƒ³ã‚¿ãƒ¼ãƒ—ãƒ©ã‚¤ã‚º**ã‚’ä½¿ç”¨ã—ã¦ã„ã‚‹ç’°å¢ƒã«å…¥ã£ãŸå ´åˆï¼ˆã“ã‚ŒãŒä½•ã§ã‚ã‚‹ã‹ã®è©³ç´°ã¯[**åŸºæœ¬æƒ…å ±**](basic-travisci-information.md#travisci-enterprise)ã«ã‚ã‚Šã¾ã™ï¼‰ã€å½¼ã¯**Workerã§ãƒ“ãƒ«ãƒ‰ã‚’ãƒˆãƒªã‚¬ãƒ¼ã™ã‚‹**ã“ã¨ãŒã§ãã¾ã™ã€‚ã“ã‚Œã¯ã€æ”»æ’ƒè€…ãŒãã®ã‚µãƒ¼ãƒãƒ¼ã«æ¨ªç§»å‹•ã§ãã‚‹ã“ã¨ã‚’æ„å‘³ã—ã€ãã“ã‹ã‚‰æ¬¡ã®ã“ã¨ãŒã§ãã‚‹å¯èƒ½æ€§ãŒã‚ã‚Šã¾ã™ï¼š

* ãƒ›ã‚¹ãƒˆã«é€ƒã’ã‚‹ï¼Ÿ
* Kubernetesã‚’ä¾µå®³ã™ã‚‹ï¼Ÿ
* åŒã˜ãƒãƒƒãƒˆãƒ¯ãƒ¼ã‚¯å†…ã®ä»–ã®ãƒã‚·ãƒ³ã‚’ä¾µå®³ã™ã‚‹ï¼Ÿ
* æ–°ã—ã„ã‚¯ãƒ©ã‚¦ãƒ‰è³‡æ ¼æƒ…å ±ã‚’ä¾µå®³ã™ã‚‹ï¼Ÿ

## References

* [https://docs.travis-ci.com/user/encrypting-files/](https://docs.travis-ci.com/user/encrypting-files/)
* [https://docs.travis-ci.com/user/best-practices-security](https://docs.travis-ci.com/user/best-practices-security)

{% hint style="success" %}
Learn & practice AWS Hacking:<img src="../../.gitbook/assets/image (1) (1).png" alt="" data-size="line">[**HackTricks Training AWS Red Team Expert (ARTE)**](https://training.hacktricks.xyz/courses/arte)<img src="../../.gitbook/assets/image (1) (1).png" alt="" data-size="line">\
Learn & practice GCP Hacking: <img src="../../.gitbook/assets/image (2).png" alt="" data-size="line">[**HackTricks Training GCP Red Team Expert (GRTE)**<img src="../../.gitbook/assets/image (2).png" alt="" data-size="line">](https://training.hacktricks.xyz/courses/grte)

<details>

<summary>Support HackTricks</summary>

* Check the [**subscription plans**](https://github.com/sponsors/carlospolop)!
* **Join the** ğŸ’¬ [**Discord group**](https://discord.gg/hRep4RUj7f) or the [**telegram group**](https://t.me/peass) or **follow** us on **Twitter** ğŸ¦ [**@hacktricks\_live**](https://twitter.com/hacktricks\_live)**.**
* **Share hacking tricks by submitting PRs to the** [**HackTricks**](https://github.com/carlospolop/hacktricks) and [**HackTricks Cloud**](https://github.com/carlospolop/hacktricks-cloud) github repos.

</details>
{% endhint %}
