# Grundlegende TravisCI-Informationen

{% hint style="success" %}
Lerne & √ºbe AWS Hacking:<img src="/.gitbook/assets/image.png" alt="" data-size="line">[**HackTricks Training AWS Red Team Expert (ARTE)**](https://training.hacktricks.xyz/courses/arte)<img src="/.gitbook/assets/image.png" alt="" data-size="line">\
Lerne & √ºbe GCP Hacking: <img src="/.gitbook/assets/image (2).png" alt="" data-size="line">[**HackTricks Training GCP Red Team Expert (GRTE)**<img src="/.gitbook/assets/image (2).png" alt="" data-size="line">](https://training.hacktricks.xyz/courses/grte)

<details>

<summary>Unterst√ºtze HackTricks</summary>

* Schau dir die [**Abonnementpl√§ne**](https://github.com/sponsors/carlospolop) an!
* **Tritt der** üí¨ [**Discord-Gruppe**](https://discord.gg/hRep4RUj7f) oder der [**Telegram-Gruppe**](https://t.me/peass) bei oder **folge** uns auf **Twitter** üê¶ [**@hacktricks\_live**](https://twitter.com/hacktricks\_live)**.**
* **Teile Hacking-Tricks, indem du PRs an die** [**HackTricks**](https://github.com/carlospolop/hacktricks) und [**HackTricks Cloud**](https://github.com/carlospolop/hacktricks-cloud) GitHub-Repos einreichst.

</details>
{% endhint %}

## Zugriff

TravisCI integriert sich direkt mit verschiedenen Git-Plattformen wie Github, Bitbucket, Assembla und Gitlab. Es wird den Benutzer bitten, TravisCI Berechtigungen zu erteilen, um auf die Repos zuzugreifen, die er mit TravisCI integrieren m√∂chte.

Zum Beispiel wird es bei Github um die folgenden Berechtigungen bitten:

* `user:email` (nur lesen)
* `read:org` (nur lesen)
* `repo`: Gew√§hrt Lese- und Schreibzugriff auf Code, Commit-Status, Mitarbeiter und Bereitstellungsstatus f√ºr √∂ffentliche und private Repositories und Organisationen.

## Verschl√ºsselte Geheimnisse

### Umgebungsvariablen

In TravisCI, wie auch in anderen CI-Plattformen, ist es m√∂glich, **geheime Daten auf Repos-Ebene zu speichern**, die verschl√ºsselt gespeichert und **entschl√ºsselt und in die Umgebungsvariable** der Maschine, die den Build ausf√ºhrt, eingef√ºgt werden.

![](<../../.gitbook/assets/image (203).png>)

Es ist m√∂glich, die **Zweige anzugeben, f√ºr die die Geheimnisse verf√ºgbar sein sollen** (standardm√§√üig alle) und auch, ob TravisCI **den Wert verbergen soll**, wenn er **in den Logs** erscheint (standardm√§√üig wird er das tun).

### Benutzerdefinierte verschl√ºsselte Geheimnisse

F√ºr **jedes Repo** generiert TravisCI ein **RSA-Schl√ºsselpaar**, **beh√§lt** den **privaten** Schl√ºssel und macht den **√∂ffentlichen Schl√ºssel des Repositories** f√ºr diejenigen verf√ºgbar, die **Zugriff** auf das Repository haben.

Du kannst auf den √∂ffentlichen Schl√ºssel eines Repos zugreifen mit:
```
travis pubkey -r <owner>/<repo_name>
travis pubkey -r carlospolop/t-ci-test
```
Dann k√∂nnen Sie dieses Setup verwenden, um **Geheimnisse zu verschl√ºsseln und sie zu Ihrer `.travis.yaml` hinzuzuf√ºgen**. Die Geheimnisse werden **entschl√ºsselt, wenn der Build ausgef√ºhrt wird** und sind in den **Umgebungsvariablen** zug√§nglich.

![](<../../.gitbook/assets/image (139).png>)

Beachten Sie, dass die auf diese Weise verschl√ºsselten Geheimnisse nicht in den Umgebungsvariablen der Einstellungen aufgef√ºhrt werden.

### Benutzerdefinierte verschl√ºsselte Dateien

Genauso wie zuvor erm√∂glicht TravisCI auch, **Dateien zu verschl√ºsseln und sie dann w√§hrend des Builds zu entschl√ºsseln**:
```
travis encrypt-file super_secret.txt -r carlospolop/t-ci-test

encrypting super_secret.txt for carlospolop/t-ci-test
storing result as super_secret.txt.enc
storing secure env variables for decryption

Please add the following to your build script (before_install stage in your .travis.yml, for instance):

openssl aes-256-cbc -K $encrypted_355e94ba1091_key -iv $encrypted_355e94ba1091_iv -in super_secret.txt.enc -out super_secret.txt -d

Pro Tip: You can add it automatically by running with --add.

Make sure to add super_secret.txt.enc to the git repository.
Make sure not to add super_secret.txt to the git repository.
Commit all changes to your .travis.yml.
```
Beachten Sie, dass beim Verschl√ºsseln einer Datei 2 Umgebungsvariablen im Repository konfiguriert werden, wie zum Beispiel:

![](<../../.gitbook/assets/image (170).png>)

## TravisCI Enterprise

Travis CI Enterprise ist eine **On-Prem-Version von Travis CI**, die Sie **in Ihrer Infrastruktur** bereitstellen k√∂nnen. Denken Sie an die 'Server'-Version von Travis CI. Mit Travis CI k√∂nnen Sie ein einfach zu bedienendes Continuous Integration/Continuous Deployment (CI/CD)-System in einer Umgebung aktivieren, die Sie nach Ihren W√ºnschen konfigurieren und sichern k√∂nnen.

**Travis CI Enterprise besteht aus zwei Hauptkomponenten:**

1. TCI **Dienste** (oder TCI Core Services), verantwortlich f√ºr die Integration mit Versionskontrollsystemen, die Autorisierung von Builds, die Planung von Build-Jobs usw.
2. TCI **Worker** und Build-Umgebungsbilder (auch als OS-Bilder bezeichnet).

**TCI Core-Dienste erfordern Folgendes:**

1. Eine **PostgreSQL11** (oder sp√§ter) Datenbank.
2. Eine Infrastruktur zur Bereitstellung eines Kubernetes-Clusters; es kann in einem Server-Cluster oder auf einer einzelnen Maschine bereitgestellt werden, falls erforderlich.
3. Abh√§ngig von Ihrer Konfiguration m√∂chten Sie m√∂glicherweise einige der Komponenten selbst bereitstellen und konfigurieren, z.B. RabbitMQ - siehe [Einrichten von Travis CI Enterprise](https://docs.travis-ci.com/user/enterprise/tcie-3.x-setting-up-travis-ci-enterprise/) f√ºr weitere Details.

**TCI Worker erfordert Folgendes:**

1. Eine Infrastruktur, in der ein Docker-Image, das den **Worker und ein verkn√ºpftes Build-Image enth√§lt, bereitgestellt werden kann**.
2. Konnektivit√§t zu bestimmten Travis CI Core Services-Komponenten - siehe [Einrichten von Worker](https://docs.travis-ci.com/user/enterprise/setting-up-worker/) f√ºr weitere Details.

Die Anzahl der bereitgestellten TCI Worker und Build-Umgebungs-OS-Bilder bestimmt die gesamte gleichzeitige Kapazit√§t der Travis CI Enterprise-Bereitstellung in Ihrer Infrastruktur.

![](<../../.gitbook/assets/image (199).png>)

{% hint style="success" %}
Lernen & √ºben Sie AWS Hacking:<img src="/.gitbook/assets/image.png" alt="" data-size="line">[**HackTricks Training AWS Red Team Expert (ARTE)**](https://training.hacktricks.xyz/courses/arte)<img src="/.gitbook/assets/image.png" alt="" data-size="line">\
Lernen & √ºben Sie GCP Hacking: <img src="/.gitbook/assets/image (2).png" alt="" data-size="line">[**HackTricks Training GCP Red Team Expert (GRTE)**<img src="/.gitbook/assets/image (2).png" alt="" data-size="line">](https://training.hacktricks.xyz/courses/grte)

<details>

<summary>Unterst√ºtzen Sie HackTricks</summary>

* √úberpr√ºfen Sie die [**Abonnementpl√§ne**](https://github.com/sponsors/carlospolop)!
* **Treten Sie der** üí¨ [**Discord-Gruppe**](https://discord.gg/hRep4RUj7f) oder der [**Telegram-Gruppe**](https://t.me/peass) bei oder **folgen** Sie uns auf **Twitter** üê¶ [**@hacktricks\_live**](https://twitter.com/hacktricks\_live)**.**
* **Teilen Sie Hacking-Tricks, indem Sie PRs an die** [**HackTricks**](https://github.com/carlospolop/hacktricks) und [**HackTricks Cloud**](https://github.com/carlospolop/hacktricks-cloud) GitHub-Repos einreichen.

</details>
{% endhint %}
