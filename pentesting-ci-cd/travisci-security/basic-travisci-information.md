# Basic TravisCI Information

{% hint style="success" %}
Learn & practice AWS Hacking:<img src="/.gitbook/assets/image.png" alt="" data-size="line">[**HackTricks Training AWS Red Team Expert (ARTE)**](https://training.hacktricks.xyz/courses/arte)<img src="/.gitbook/assets/image.png" alt="" data-size="line">\
Learn & practice GCP Hacking: <img src="/.gitbook/assets/image (2).png" alt="" data-size="line">[**HackTricks Training GCP Red Team Expert (GRTE)**<img src="/.gitbook/assets/image (2).png" alt="" data-size="line">](https://training.hacktricks.xyz/courses/grte)

<details>

<summary>Support HackTricks</summary>

* [**ã‚µãƒ–ã‚¹ã‚¯ãƒªãƒ—ã‚·ãƒ§ãƒ³ãƒ—ãƒ©ãƒ³**](https://github.com/sponsors/carlospolop)ã‚’ãƒã‚§ãƒƒã‚¯ï¼
* ğŸ’¬ [**Discordã‚°ãƒ«ãƒ¼ãƒ—**](https://discord.gg/hRep4RUj7f)ã¾ãŸã¯[**telegramã‚°ãƒ«ãƒ¼ãƒ—**](https://t.me/peass)ã«å‚åŠ ã™ã‚‹ã‹ã€**Twitter** ğŸ¦ [**@hacktricks\_live**](https://twitter.com/hacktricks\_live)ã‚’ãƒ•ã‚©ãƒ­ãƒ¼ã—ã¦ãã ã•ã„ã€‚
* **PRã‚’æå‡ºã—ã¦ãƒãƒƒã‚­ãƒ³ã‚°ãƒˆãƒªãƒƒã‚¯ã‚’å…±æœ‰ã™ã‚‹** [**HackTricks**](https://github.com/carlospolop/hacktricks)ãŠã‚ˆã³[**HackTricks Cloud**](https://github.com/carlospolop/hacktricks-cloud)ã®githubãƒªãƒã‚¸ãƒˆãƒªã«ã€‚

</details>
{% endhint %}

## Access

TravisCIã¯ã€Githubã€Bitbucketã€Assemblaã€Gitlabãªã©ã®ç•°ãªã‚‹gitãƒ—ãƒ©ãƒƒãƒˆãƒ•ã‚©ãƒ¼ãƒ ã¨ç›´æ¥çµ±åˆã—ã¾ã™ã€‚ãƒ¦ãƒ¼ã‚¶ãƒ¼ã«TravisCIã«ã‚¢ã‚¯ã‚»ã‚¹è¨±å¯ã‚’ä¸ãˆã¦ã€TravisCIã¨çµ±åˆã—ãŸã„ãƒªãƒã‚¸ãƒˆãƒªã«ã‚¢ã‚¯ã‚»ã‚¹ã•ã›ã‚‹ã‚ˆã†ã«æ±‚ã‚ã¾ã™ã€‚

ä¾‹ãˆã°ã€Githubã§ã¯ä»¥ä¸‹ã®æ¨©é™ã‚’æ±‚ã‚ã¾ã™ï¼š

* `user:email` (èª­ã¿å–ã‚Šå°‚ç”¨)
* `read:org` (èª­ã¿å–ã‚Šå°‚ç”¨)
* `repo`: å…¬é–‹ãŠã‚ˆã³éå…¬é–‹ã®ãƒªãƒã‚¸ãƒˆãƒªã¨çµ„ç¹”ã®ã‚³ãƒ¼ãƒ‰ã€ã‚³ãƒŸãƒƒãƒˆã‚¹ãƒ†ãƒ¼ã‚¿ã‚¹ã€ã‚³ãƒ©ãƒœãƒ¬ãƒ¼ã‚¿ãƒ¼ã€ãƒ‡ãƒ—ãƒ­ã‚¤ãƒ¡ãƒ³ãƒˆã‚¹ãƒ†ãƒ¼ã‚¿ã‚¹ã¸ã®èª­ã¿å–ã‚ŠãŠã‚ˆã³æ›¸ãè¾¼ã¿ã‚¢ã‚¯ã‚»ã‚¹ã‚’è¨±å¯ã—ã¾ã™ã€‚

## Encrypted Secrets

### Environment Variables

TravisCIã§ã¯ã€ä»–ã®CIãƒ—ãƒ©ãƒƒãƒˆãƒ•ã‚©ãƒ¼ãƒ ã¨åŒæ§˜ã«ã€**ãƒªãƒã‚¸ãƒˆãƒªãƒ¬ãƒ™ãƒ«ã®ã‚·ãƒ¼ã‚¯ãƒ¬ãƒƒãƒˆã‚’ä¿å­˜**ã™ã‚‹ã“ã¨ãŒå¯èƒ½ã§ã€ã“ã‚Œã‚‰ã¯æš—å·åŒ–ã•ã‚Œã¦ä¿å­˜ã•ã‚Œã€ãƒ“ãƒ«ãƒ‰ã‚’å®Ÿè¡Œã™ã‚‹ãƒã‚·ãƒ³ã®ç’°å¢ƒå¤‰æ•°ã«**å¾©å·åŒ–ã•ã‚Œã¦ãƒ—ãƒƒã‚·ãƒ¥**ã•ã‚Œã¾ã™ã€‚

![](<../../.gitbook/assets/image (203).png>)

**ã‚·ãƒ¼ã‚¯ãƒ¬ãƒƒãƒˆãŒåˆ©ç”¨å¯èƒ½ãªãƒ–ãƒ©ãƒ³ãƒ**ï¼ˆãƒ‡ãƒ•ã‚©ãƒ«ãƒˆã§ã¯ã™ã¹ã¦ï¼‰ã‚’æŒ‡å®šã™ã‚‹ã“ã¨ãŒå¯èƒ½ã§ã€ã¾ãŸTravisCIãŒ**ãƒ­ã‚°ã«è¡¨ç¤ºã•ã‚ŒãŸå ´åˆã«ãã®å€¤ã‚’éš ã™**ã‹ã©ã†ã‹ï¼ˆãƒ‡ãƒ•ã‚©ãƒ«ãƒˆã§ã¯éš ã™ï¼‰ã‚‚æŒ‡å®šã§ãã¾ã™ã€‚

### Custom Encrypted Secrets

**å„ãƒªãƒã‚¸ãƒˆãƒª**ã«å¯¾ã—ã¦TravisCIã¯**RSAã‚­ãƒ¼ãƒšã‚¢**ã‚’ç”Ÿæˆã—ã€**ç§˜å¯†éµ**ã‚’ä¿æŒã—ã€ãƒªãƒã‚¸ãƒˆãƒªã«**ã‚¢ã‚¯ã‚»ã‚¹**ã§ãã‚‹äººã«**å…¬é–‹éµ**ã‚’æä¾›ã—ã¾ã™ã€‚

ä»¥ä¸‹ã®ã‚³ãƒãƒ³ãƒ‰ã§ãƒªãƒã‚¸ãƒˆãƒªã®å…¬é–‹éµã«ã‚¢ã‚¯ã‚»ã‚¹ã§ãã¾ã™ï¼š
```
travis pubkey -r <owner>/<repo_name>
travis pubkey -r carlospolop/t-ci-test
```
æ¬¡ã«ã€ã“ã®ã‚»ãƒƒãƒˆã‚¢ãƒƒãƒ—ã‚’ä½¿ç”¨ã—ã¦**ç§˜å¯†æƒ…å ±ã‚’æš—å·åŒ–ã—ã€ãã‚Œã‚‰ã‚’ `.travis.yaml` ã«è¿½åŠ **ã§ãã¾ã™ã€‚ãƒ“ãƒ«ãƒ‰ãŒå®Ÿè¡Œã•ã‚Œã‚‹ã¨**ç§˜å¯†æƒ…å ±ã¯å¾©å·åŒ–ã•ã‚Œ**ã€**ç’°å¢ƒå¤‰æ•°**ã§ã‚¢ã‚¯ã‚»ã‚¹å¯èƒ½ã«ãªã‚Šã¾ã™ã€‚

![](<../../.gitbook/assets/image (139).png>)

ã“ã®æ–¹æ³•ã§æš—å·åŒ–ã•ã‚ŒãŸç§˜å¯†æƒ…å ±ã¯ã€è¨­å®šã®ç’°å¢ƒå¤‰æ•°ãƒªã‚¹ãƒˆã«ã¯è¡¨ç¤ºã•ã‚Œãªã„ã“ã¨ã«æ³¨æ„ã—ã¦ãã ã•ã„ã€‚

### Custom Encrypted Files

å‰è¿°ã®æ–¹æ³•ã¨åŒæ§˜ã«ã€TravisCI ã§ã¯**ãƒ•ã‚¡ã‚¤ãƒ«ã‚’æš—å·åŒ–ã—ã€ãƒ“ãƒ«ãƒ‰ä¸­ã«ãã‚Œã‚‰ã‚’å¾©å·åŒ–**ã™ã‚‹ã“ã¨ã‚‚ã§ãã¾ã™:
```
travis encrypt-file super_secret.txt -r carlospolop/t-ci-test

encrypting super_secret.txt for carlospolop/t-ci-test
storing result as super_secret.txt.enc
storing secure env variables for decryption

Please add the following to your build script (before_install stage in your .travis.yml, for instance):

openssl aes-256-cbc -K $encrypted_355e94ba1091_key -iv $encrypted_355e94ba1091_iv -in super_secret.txt.enc -out super_secret.txt -d

Pro Tip: You can add it automatically by running with --add.

Make sure to add super_secret.txt.enc to the git repository.
Make sure not to add super_secret.txt to the git repository.
Commit all changes to your .travis.yml.
```
ãƒ•ã‚¡ã‚¤ãƒ«ã‚’æš—å·åŒ–ã™ã‚‹éš›ã«ã€2ã¤ã®Env VariablesãŒãƒªãƒã‚¸ãƒˆãƒªå†…ã«è¨­å®šã•ã‚Œã‚‹ã“ã¨ã«æ³¨æ„ã—ã¦ãã ã•ã„:

![](<../../.gitbook/assets/image (170).png>)

## TravisCI Enterprise

Travis CI Enterpriseã¯ã€**Travis CIã®ã‚ªãƒ³ãƒ—ãƒ¬ãƒŸã‚¹ãƒãƒ¼ã‚¸ãƒ§ãƒ³**ã§ã‚ã‚Šã€**è‡ªåˆ†ã®ã‚¤ãƒ³ãƒ•ãƒ©ã‚¹ãƒˆãƒ©ã‚¯ãƒãƒ£ã«ãƒ‡ãƒ—ãƒ­ã‚¤**ã§ãã¾ã™ã€‚Travis CIã®ã€Œã‚µãƒ¼ãƒãƒ¼ã€ãƒãƒ¼ã‚¸ãƒ§ãƒ³ã¨è€ƒãˆã¦ãã ã•ã„ã€‚Travis CIã‚’ä½¿ç”¨ã™ã‚‹ã¨ã€ç’°å¢ƒå†…ã§ä½¿ã„ã‚„ã™ã„Continuous Integration/Continuous Deployment (CI/CD)ã‚·ã‚¹ãƒ†ãƒ ã‚’æœ‰åŠ¹ã«ã™ã‚‹ã“ã¨ãŒã§ãã€è‡ªç”±ã«è¨­å®šãŠã‚ˆã³ã‚»ã‚­ãƒ¥ãƒªãƒ†ã‚£ã‚’ç¢ºä¿ã§ãã¾ã™ã€‚

**Travis CI Enterpriseã¯2ã¤ã®ä¸»è¦ãªéƒ¨åˆ†ã§æ§‹æˆã•ã‚Œã¦ã„ã¾ã™:**

1. TCI **ã‚µãƒ¼ãƒ“ã‚¹**ï¼ˆã¾ãŸã¯TCIã‚³ã‚¢ã‚µãƒ¼ãƒ“ã‚¹ï¼‰ã€ãƒãƒ¼ã‚¸ãƒ§ãƒ³ç®¡ç†ã‚·ã‚¹ãƒ†ãƒ ã¨ã®çµ±åˆã€ãƒ“ãƒ«ãƒ‰ã®èªè¨¼ã€ãƒ“ãƒ«ãƒ‰ã‚¸ãƒ§ãƒ–ã®ã‚¹ã‚±ã‚¸ãƒ¥ãƒ¼ãƒªãƒ³ã‚°ãªã©ã‚’æ‹…å½“ã€‚
2. TCI **Worker**ãŠã‚ˆã³ãƒ“ãƒ«ãƒ‰ç’°å¢ƒã‚¤ãƒ¡ãƒ¼ã‚¸ï¼ˆOSã‚¤ãƒ¡ãƒ¼ã‚¸ã¨ã‚‚å‘¼ã°ã‚Œã‚‹ï¼‰ã€‚

**TCIã‚³ã‚¢ã‚µãƒ¼ãƒ“ã‚¹ã«ã¯ä»¥ä¸‹ãŒå¿…è¦ã§ã™:**

1. **PostgreSQL11**ï¼ˆã¾ãŸã¯ãã‚Œä»¥é™ï¼‰ã®ãƒ‡ãƒ¼ã‚¿ãƒ™ãƒ¼ã‚¹ã€‚
2. Kubernetesã‚¯ãƒ©ã‚¹ã‚¿ãƒ¼ã‚’ãƒ‡ãƒ—ãƒ­ã‚¤ã™ã‚‹ãŸã‚ã®ã‚¤ãƒ³ãƒ•ãƒ©ã‚¹ãƒˆãƒ©ã‚¯ãƒãƒ£ã€‚å¿…è¦ã«å¿œã˜ã¦ã‚µãƒ¼ãƒãƒ¼ã‚¯ãƒ©ã‚¹ã‚¿ãƒ¼ã¾ãŸã¯å˜ä¸€ã®ãƒã‚·ãƒ³ã«ãƒ‡ãƒ—ãƒ­ã‚¤å¯èƒ½ã€‚
3. ã‚»ãƒƒãƒˆã‚¢ãƒƒãƒ—ã«å¿œã˜ã¦ã€RabbitMQãªã©ã®ã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆã‚’è‡ªåˆ†ã§ãƒ‡ãƒ—ãƒ­ã‚¤ãŠã‚ˆã³è¨­å®šã™ã‚‹ã“ã¨ã‚’æ¤œè¨ã™ã‚‹ã‹ã‚‚ã—ã‚Œã¾ã›ã‚“ã€‚è©³ç´°ã¯[Setting up Travis CI Enterprise](https://docs.travis-ci.com/user/enterprise/tcie-3.x-setting-up-travis-ci-enterprise/)ã‚’å‚ç…§ã—ã¦ãã ã•ã„ã€‚

**TCI Workerã«ã¯ä»¥ä¸‹ãŒå¿…è¦ã§ã™:**

1. **Workerã¨ãƒªãƒ³ã‚¯ã•ã‚ŒãŸãƒ“ãƒ«ãƒ‰ã‚¤ãƒ¡ãƒ¼ã‚¸ã‚’å«ã‚€dockerã‚¤ãƒ¡ãƒ¼ã‚¸ã‚’ãƒ‡ãƒ—ãƒ­ã‚¤ã§ãã‚‹ã‚¤ãƒ³ãƒ•ãƒ©ã‚¹ãƒˆãƒ©ã‚¯ãƒãƒ£**ã€‚
2. ç‰¹å®šã®Travis CIã‚³ã‚¢ã‚µãƒ¼ãƒ“ã‚¹ã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆã¸ã®æ¥ç¶šæ€§ - è©³ç´°ã¯[Setting Up Worker](https://docs.travis-ci.com/user/enterprise/setting-up-worker/)ã‚’å‚ç…§ã—ã¦ãã ã•ã„ã€‚

ãƒ‡ãƒ—ãƒ­ã‚¤ã•ã‚ŒãŸTCI WorkerãŠã‚ˆã³ãƒ“ãƒ«ãƒ‰ç’°å¢ƒOSã‚¤ãƒ¡ãƒ¼ã‚¸ã®é‡ãŒã€ã‚¤ãƒ³ãƒ•ãƒ©ã‚¹ãƒˆãƒ©ã‚¯ãƒãƒ£å†…ã®Travis CI Enterpriseãƒ‡ãƒ—ãƒ­ã‚¤ãƒ¡ãƒ³ãƒˆã®ç·åŒæ™‚å®Ÿè¡Œå®¹é‡ã‚’æ±ºå®šã—ã¾ã™ã€‚

![](<../../.gitbook/assets/image (199).png>)

{% hint style="success" %}
Learn & practice AWS Hacking:<img src="/.gitbook/assets/image.png" alt="" data-size="line">[**HackTricks Training AWS Red Team Expert (ARTE)**](https://training.hacktricks.xyz/courses/arte)<img src="/.gitbook/assets/image.png" alt="" data-size="line">\
Learn & practice GCP Hacking: <img src="/.gitbook/assets/image (2).png" alt="" data-size="line">[**HackTricks Training GCP Red Team Expert (GRTE)**<img src="/.gitbook/assets/image (2).png" alt="" data-size="line">](https://training.hacktricks.xyz/courses/grte)

<details>

<summary>Support HackTricks</summary>

* [**ã‚µãƒ–ã‚¹ã‚¯ãƒªãƒ—ã‚·ãƒ§ãƒ³ãƒ—ãƒ©ãƒ³**](https://github.com/sponsors/carlospolop)ã‚’ãƒã‚§ãƒƒã‚¯ï¼
* ğŸ’¬ [**Discordã‚°ãƒ«ãƒ¼ãƒ—**](https://discord.gg/hRep4RUj7f)ã¾ãŸã¯[**telegramã‚°ãƒ«ãƒ¼ãƒ—**](https://t.me/peass)ã«å‚åŠ ã™ã‚‹ã‹ã€**Twitter** ğŸ¦ [**@hacktricks\_live**](https://twitter.com/hacktricks\_live)ã‚’ãƒ•ã‚©ãƒ­ãƒ¼ã—ã¦ãã ã•ã„ã€‚
* **PRã‚’æå‡ºã—ã¦ãƒãƒƒã‚­ãƒ³ã‚°ãƒˆãƒªãƒƒã‚¯ã‚’å…±æœ‰** [**HackTricks**](https://github.com/carlospolop/hacktricks)ãŠã‚ˆã³[**HackTricks Cloud**](https://github.com/carlospolop/hacktricks-cloud)ã®githubãƒªãƒã‚¸ãƒˆãƒªã«ã€‚

</details>
{% endhint %}
