# Osnovne informacije o TravisCI

{% hint style="success" %}
UÄite i veÅ¾bajte AWS Hacking:<img src="../../.gitbook/assets/image (1) (1) (1).png" alt="" data-size="line">[**HackTricks Training AWS Red Team Expert (ARTE)**](https://training.hacktricks.xyz/courses/arte)<img src="../../.gitbook/assets/image (1) (1) (1).png" alt="" data-size="line">\
UÄite i veÅ¾bajte GCP Hacking: <img src="../../.gitbook/assets/image (2).png" alt="" data-size="line">[**HackTricks Training GCP Red Team Expert (GRTE)**<img src="../../.gitbook/assets/image (2).png" alt="" data-size="line">](https://training.hacktricks.xyz/courses/grte)

<details>

<summary>PodrÅ¾ite HackTricks</summary>

* Proverite [**planove pretplate**](https://github.com/sponsors/carlospolop)!
* **PridruÅ¾ite se** ğŸ’¬ [**Discord grupi**](https://discord.gg/hRep4RUj7f) ili [**telegram grupi**](https://t.me/peass) ili **pratite** nas na **Twitteru** ğŸ¦ [**@hacktricks\_live**](https://twitter.com/hacktricks_live)**.**
* **Podelite hakerske trikove slanjem PR-ova na** [**HackTricks**](https://github.com/carlospolop/hacktricks) i [**HackTricks Cloud**](https://github.com/carlospolop/hacktricks-cloud) github repozitorijume.

</details>
{% endhint %}

## Pristup

TravisCI se direktno integriÅ¡e sa razliÄitim git platformama kao Å¡to su Github, Bitbucket, Assembla i Gitlab. PitaÄ‡e korisnika da da TravisCI dozvole za pristup repozitorijumima koje Å¾eli da integriÅ¡e sa TravisCI.

Na primer, u Github-u Ä‡e traÅ¾iti sledeÄ‡e dozvole:

* `user:email` (samo za Äitanje)
* `read:org` (samo za Äitanje)
* `repo`: Daje pristup za Äitanje i pisanje koda, statusa commit-a, saradnika i statusa implementacije za javne i privatne repozitorijume i organizacije.

## Enkriptovane tajne

### Promenljive okruÅ¾enja

U TravisCI, kao i na drugim CI platformama, moguÄ‡e je **saÄuvati tajne na nivou repozitorijuma** koje Ä‡e biti saÄuvane enkriptovane i biÄ‡e **dekriptovane i postavljene u promenljive okruÅ¾enja** maÅ¡ine koja izvrÅ¡ava gradnju.

![](<../../.gitbook/assets/image (203).png>)

MoguÄ‡e je naznaÄiti **grane na kojima Ä‡e tajne biti dostupne** (podrazumevano sve) i takoÄ‘e da li TravisCI **treba da sakrije njenu vrednost** ako se pojavi **u logovima** (podrazumevano hoÄ‡e).

### PrilagoÄ‘ene enkriptovane tajne

Za **svaki repozitorijum** TravisCI generiÅ¡e **RSA kljuÄni par**, **Äuva** **privatni** kljuÄ, i Äini **javnim kljuÄem repozitorijuma dostupnim** onima koji imaju **pristup** repozitorijumu.

MoÅ¾ete pristupiti javnom kljuÄu jednog repozitorijuma sa:
```
travis pubkey -r <owner>/<repo_name>
travis pubkey -r carlospolop/t-ci-test
```
Zatim, moÅ¾ete koristiti ovu postavku da **enkriptujete tajne i dodate ih u vaÅ¡ `.travis.yaml`**. Tajne Ä‡e biti **dekriptovane kada se izgradnja pokrene** i biÄ‡e dostupne u **promenljivim okruÅ¾enja**.

![](<../../.gitbook/assets/image (139).png>)

Imajte na umu da tajne enkriptovane na ovaj naÄin neÄ‡e biti navedene u promenljivim okruÅ¾enja podeÅ¡avanja.

### PrilagoÄ‘ene Enkriptovane Datoteke

Na isti naÄin kao i pre, TravisCI takoÄ‘e omoguÄ‡ava da **enkriptujete datoteke i zatim ih dekriptujete tokom izgradnje**:
```
travis encrypt-file super_secret.txt -r carlospolop/t-ci-test

encrypting super_secret.txt for carlospolop/t-ci-test
storing result as super_secret.txt.enc
storing secure env variables for decryption

Please add the following to your build script (before_install stage in your .travis.yml, for instance):

openssl aes-256-cbc -K $encrypted_355e94ba1091_key -iv $encrypted_355e94ba1091_iv -in super_secret.txt.enc -out super_secret.txt -d

Pro Tip: You can add it automatically by running with --add.

Make sure to add super_secret.txt.enc to the git repository.
Make sure not to add super_secret.txt to the git repository.
Commit all changes to your .travis.yml.
```
Napomena da Ä‡e prilikom enkripcije datoteke 2 Env Varijable biti konfigurisane unutar repozitorijuma kao Å¡to su:

## TravisCI Enterprise

Travis CI Enterprise je **on-prem verzija Travis CI**, koju moÅ¾ete implementirati **u svojoj infrastrukturi**. Razmislite o â€˜serverâ€™ verziji Travis CI. KoriÅ¡Ä‡enje Travis CI omoguÄ‡ava vam da omoguÄ‡ite jednostavan sistem Kontinuirane Integracije/Kontinuirane Isporuke (CI/CD) u okruÅ¾enju koje moÅ¾ete konfigurisati i obezbediti kako Å¾elite.

**Travis CI Enterprise se sastoji od dva glavna dela:**

1. TCI **usluge** (ili TCI Core Services), odgovorne za integraciju sa sistemima za kontrolu verzija, autorizaciju gradnji, zakazivanje poslova gradnje, itd.
2. TCI **Worker** i slike okruÅ¾enja za gradnju (takoÄ‘e nazvane OS slike).

**TCI Core usluge zahtevaju sledeÄ‡e:**

1. **PostgreSQL11** (ili noviji) bazu podataka.
2. Infrastrukturu za implementaciju Kubernetes klastera; moÅ¾e se implementirati u klasteru servera ili na jednoj maÅ¡ini ako je potrebno.
3. U zavisnosti od vaÅ¡e konfiguracije, moÅ¾da Ä‡ete Å¾eleti da implementirate i konfiguriÅ¡ete neke od komponenti sami, npr., RabbitMQ - pogledajte [Postavljanje Travis CI Enterprise](https://docs.travis-ci.com/user/enterprise/tcie-3.x-setting-up-travis-ci-enterprise/) za viÅ¡e detalja.

**TCI Worker zahteva sledeÄ‡e:**

1. Infrastrukturu gde se moÅ¾e implementirati docker slika koja sadrÅ¾i **Worker i povezanu sliku za gradnju**.
2. Povezivost sa odreÄ‘enim komponentama Travis CI Core Services - pogledajte [Postavljanje Workera](https://docs.travis-ci.com/user/enterprise/setting-up-worker/) za viÅ¡e detalja.

KoliÄina implementiranih TCI Worker i slika okruÅ¾enja za gradnju OS Ä‡e odrediti ukupni kapacitet istovremenog koriÅ¡Ä‡enja Travis CI Enterprise implementacije u vaÅ¡oj infrastrukturi.
