# Basic TravisCI Information

{% hint style="success" %}
Learn & practice AWS Hacking:<img src="../../.gitbook/assets/image (1).png" alt="" data-size="line">[**HackTricks Training AWS Red Team Expert (ARTE)**](https://training.hacktricks.xyz/courses/arte)<img src="../../.gitbook/assets/image (1).png" alt="" data-size="line">\
Learn & practice GCP Hacking: <img src="../../.gitbook/assets/image (2).png" alt="" data-size="line">[**HackTricks Training GCP Red Team Expert (GRTE)**<img src="../../.gitbook/assets/image (2).png" alt="" data-size="line">](https://training.hacktricks.xyz/courses/grte)

<details>

<summary>Support HackTricks</summary>

* Check the [**subscription plans**](https://github.com/sponsors/carlospolop)!
* **Join the** ğŸ’¬ [**Discord group**](https://discord.gg/hRep4RUj7f) or the [**telegram group**](https://t.me/peass) or **follow** us on **Twitter** ğŸ¦ [**@hacktricks\_live**](https://twitter.com/hacktricks\_live)**.**
* **Share hacking tricks by submitting PRs to the** [**HackTricks**](https://github.com/carlospolop/hacktricks) and [**HackTricks Cloud**](https://github.com/carlospolop/hacktricks-cloud) github repos.

</details>
{% endhint %}

## Access

TravisCIëŠ” Github, Bitbucket, Assembla, Gitlabê³¼ ê°™ì€ ë‹¤ì–‘í•œ git í”Œë«í¼ê³¼ ì§ì ‘ í†µí•©ë©ë‹ˆë‹¤. ì‚¬ìš©ìëŠ” TravisCIê°€ í†µí•©í•˜ê³ ì í•˜ëŠ” ë¦¬í¬ì§€í† ë¦¬ì— ì ‘ê·¼í•  ìˆ˜ ìˆëŠ” ê¶Œí•œì„ ë¶€ì—¬í•˜ë¼ëŠ” ìš”ì²­ì„ ë°›ìŠµë‹ˆë‹¤.

ì˜ˆë¥¼ ë“¤ì–´, Githubì—ì„œëŠ” ë‹¤ìŒê³¼ ê°™ì€ ê¶Œí•œì„ ìš”ì²­í•©ë‹ˆë‹¤:

* `user:email` (ì½ê¸° ì „ìš©)
* `read:org` (ì½ê¸° ì „ìš©)
* `repo`: ê³µê°œ ë° ë¹„ê³µì‹ ë¦¬í¬ì§€í† ë¦¬ì™€ ì¡°ì§ì— ëŒ€í•œ ì½”ë“œ, ì»¤ë°‹ ìƒíƒœ, í˜‘ë ¥ì ë° ë°°í¬ ìƒíƒœì— ëŒ€í•œ ì½ê¸° ë° ì“°ê¸° ê¶Œí•œì„ ë¶€ì—¬í•©ë‹ˆë‹¤.

## Encrypted Secrets

### Environment Variables

TravisCIì—ì„œëŠ” ë‹¤ë¥¸ CI í”Œë«í¼ê³¼ ë§ˆì°¬ê°€ì§€ë¡œ **ë¦¬í¬ì§€í† ë¦¬ ìˆ˜ì¤€ì—ì„œ ë¹„ë°€ì„ ì €ì¥**í•  ìˆ˜ ìˆìœ¼ë©°, ì´ëŠ” ì•”í˜¸í™”ë˜ì–´ ì €ì¥ë˜ê³  **ë¹Œë“œë¥¼ ì‹¤í–‰í•˜ëŠ” ë¨¸ì‹ ì˜ í™˜ê²½ ë³€ìˆ˜ì— ë³µí˜¸í™”ë˜ì–´ í‘¸ì‹œë©ë‹ˆë‹¤**.

![](<../../.gitbook/assets/image (203).png>)

**ë¹„ë°€ì´ ì‚¬ìš© ê°€ëŠ¥í•œ ë¸Œëœì¹˜**ë¥¼ ì§€ì •í•  ìˆ˜ ìˆìœ¼ë©°(ê¸°ë³¸ê°’ì€ ëª¨ë‘) TravisCIê°€ **ë¡œê·¸ì— ë‚˜íƒ€ë‚  ê²½ìš° ê°’ì„ ìˆ¨ê²¨ì•¼ í•˜ëŠ”ì§€** ì—¬ë¶€ë„ ì„¤ì •í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤(ê¸°ë³¸ê°’ì€ ìˆ¨ê¹€).

### Custom Encrypted Secrets

ê° **ë¦¬í¬ì§€í† ë¦¬**ì— ëŒ€í•´ TravisCIëŠ” **RSA í‚¤ ìŒ**ì„ ìƒì„±í•˜ê³ , **ê°œì¸ í‚¤**ë¥¼ ë³´ê´€í•˜ë©°, ë¦¬í¬ì§€í† ë¦¬ì— **ì ‘ê·¼í•  ìˆ˜ ìˆëŠ” ì‚¬ëŒë“¤ì—ê²Œ ê³µê°œ í‚¤ë¥¼ ì œê³µí•©ë‹ˆë‹¤**.

ë¦¬í¬ì§€í† ë¦¬ì˜ ê³µê°œ í‚¤ì— ì ‘ê·¼í•˜ë ¤ë©´:
```
travis pubkey -r <owner>/<repo_name>
travis pubkey -r carlospolop/t-ci-test
```
ê·¸ëŸ° ë‹¤ìŒ, ì´ ì„¤ì •ì„ ì‚¬ìš©í•˜ì—¬ **ë¹„ë°€ì„ ì•”í˜¸í™”í•˜ê³  ì´ë¥¼ `.travis.yaml`ì— ì¶”ê°€í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤**. ë¹„ë°€ì€ **ë¹Œë“œê°€ ì‹¤í–‰ë  ë•Œ ë³µí˜¸í™”ë˜ë©°** **í™˜ê²½ ë³€ìˆ˜**ì—ì„œ ì ‘ê·¼í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.

![](<../../.gitbook/assets/image (139).png>)

ì´ë ‡ê²Œ ì•”í˜¸í™”ëœ ë¹„ë°€ì€ ì„¤ì •ì˜ í™˜ê²½ ë³€ìˆ˜ ëª©ë¡ì— ë‚˜íƒ€ë‚˜ì§€ ì•ŠëŠ”ë‹¤ëŠ” ì ì— ìœ ì˜í•˜ì„¸ìš”.

### ì‚¬ìš©ì ì •ì˜ ì•”í˜¸í™” íŒŒì¼

ì´ì „ê³¼ ê°™ì€ ë°©ì‹ìœ¼ë¡œ, TravisCIëŠ” **íŒŒì¼ì„ ì•”í˜¸í™”í•œ ë‹¤ìŒ ë¹Œë“œ ì¤‘ì— ë³µí˜¸í™”í•˜ëŠ” ê²ƒì„ í—ˆìš©í•©ë‹ˆë‹¤**:
```
travis encrypt-file super_secret.txt -r carlospolop/t-ci-test

encrypting super_secret.txt for carlospolop/t-ci-test
storing result as super_secret.txt.enc
storing secure env variables for decryption

Please add the following to your build script (before_install stage in your .travis.yml, for instance):

openssl aes-256-cbc -K $encrypted_355e94ba1091_key -iv $encrypted_355e94ba1091_iv -in super_secret.txt.enc -out super_secret.txt -d

Pro Tip: You can add it automatically by running with --add.

Make sure to add super_secret.txt.enc to the git repository.
Make sure not to add super_secret.txt to the git repository.
Commit all changes to your .travis.yml.
```
Note that when encrypting a file 2 Env Variables will be configured inside the repo such as:

![](<../../.gitbook/assets/image (170).png>)

## TravisCI Enterprise

Travis CI EnterpriseëŠ” **Travis CIì˜ ì˜¨í”„ë ˆë¯¸ìŠ¤ ë²„ì „**ìœ¼ë¡œ, **ê·€í•˜ì˜ ì¸í”„ë¼ì— ë°°í¬í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤**. Travis CIì˜ 'ì„œë²„' ë²„ì „ì„ ìƒê°í•´ ë³´ì‹­ì‹œì˜¤. Travis CIë¥¼ ì‚¬ìš©í•˜ë©´ ì›í•˜ëŠ” ëŒ€ë¡œ êµ¬ì„±í•˜ê³  ë³´ì•ˆí•  ìˆ˜ ìˆëŠ” í™˜ê²½ì—ì„œ ì‚¬ìš©í•˜ê¸° ì‰¬ìš´ ì§€ì†ì  í†µí•©/ì§€ì†ì  ë°°í¬(CI/CD) ì‹œìŠ¤í…œì„ í™œì„±í™”í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.

**Travis CI EnterpriseëŠ” ë‘ ê°€ì§€ ì£¼ìš” ë¶€ë¶„ìœ¼ë¡œ êµ¬ì„±ë©ë‹ˆë‹¤:**

1. TCI **ì„œë¹„ìŠ¤**(ë˜ëŠ” TCI Core Services), ë²„ì „ ê´€ë¦¬ ì‹œìŠ¤í…œê³¼ì˜ í†µí•©, ë¹Œë“œ ìŠ¹ì¸, ë¹Œë“œ ì‘ì—… ì˜ˆì•½ ë“±ì„ ë‹´ë‹¹í•©ë‹ˆë‹¤.
2. TCI **Worker** ë° ë¹Œë“œ í™˜ê²½ ì´ë¯¸ì§€(ìš´ì˜ ì²´ì œ ì´ë¯¸ì§€ë¼ê³ ë„ í•¨).

**TCI Core ì„œë¹„ìŠ¤ëŠ” ë‹¤ìŒì„ ìš”êµ¬í•©ë‹ˆë‹¤:**

1. **PostgreSQL11**(ë˜ëŠ” ì´í›„ ë²„ì „) ë°ì´í„°ë² ì´ìŠ¤.
2. Kubernetes í´ëŸ¬ìŠ¤í„°ë¥¼ ë°°í¬í•  ì¸í”„ë¼; í•„ìš”ì— ë”°ë¼ ì„œë²„ í´ëŸ¬ìŠ¤í„° ë˜ëŠ” ë‹¨ì¼ ë¨¸ì‹ ì— ë°°í¬í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.
3. ì„¤ì •ì— ë”°ë¼ ì¼ë¶€ êµ¬ì„± ìš”ì†Œë¥¼ ì§ì ‘ ë°°í¬í•˜ê³  êµ¬ì„±í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤. ì˜ˆ: RabbitMQ - ìì„¸í•œ ë‚´ìš©ì€ [Travis CI Enterprise ì„¤ì •](https://docs.travis-ci.com/user/enterprise/tcie-3.x-setting-up-travis-ci-enterprise/)ì„ ì°¸ì¡°í•˜ì‹­ì‹œì˜¤.

**TCI WorkerëŠ” ë‹¤ìŒì„ ìš”êµ¬í•©ë‹ˆë‹¤:**

1. **Workerì™€ ì—°ê²°ëœ ë¹Œë“œ ì´ë¯¸ì§€ë¥¼ í¬í•¨í•˜ëŠ” ë„ì»¤ ì´ë¯¸ì§€ë¥¼ ë°°í¬í•  ìˆ˜ ìˆëŠ” ì¸í”„ë¼**.
2. íŠ¹ì • Travis CI Core Services êµ¬ì„± ìš”ì†Œì— ëŒ€í•œ ì—°ê²°ì„± - ìì„¸í•œ ë‚´ìš©ì€ [Worker ì„¤ì •](https://docs.travis-ci.com/user/enterprise/setting-up-worker/)ì„ ì°¸ì¡°í•˜ì‹­ì‹œì˜¤.

ë°°í¬ëœ TCI Worker ë° ë¹Œë“œ í™˜ê²½ OS ì´ë¯¸ì§€ì˜ ìˆ˜ëŠ” ê·€í•˜ì˜ ì¸í”„ë¼ì—ì„œ Travis CI Enterprise ë°°í¬ì˜ ì´ ë™ì‹œ ìš©ëŸ‰ì„ ê²°ì •í•©ë‹ˆë‹¤.

![](<../../.gitbook/assets/image (199).png>)

{% hint style="success" %}
Learn & practice AWS Hacking:<img src="../../.gitbook/assets/image (1).png" alt="" data-size="line">[**HackTricks Training AWS Red Team Expert (ARTE)**](https://training.hacktricks.xyz/courses/arte)<img src="../../.gitbook/assets/image (1).png" alt="" data-size="line">\
Learn & practice GCP Hacking: <img src="../../.gitbook/assets/image (2).png" alt="" data-size="line">[**HackTricks Training GCP Red Team Expert (GRTE)**<img src="../../.gitbook/assets/image (2).png" alt="" data-size="line">](https://training.hacktricks.xyz/courses/grte)

<details>

<summary>Support HackTricks</summary>

* Check the [**subscription plans**](https://github.com/sponsors/carlospolop)!
* **Join the** ğŸ’¬ [**Discord group**](https://discord.gg/hRep4RUj7f) or the [**telegram group**](https://t.me/peass) or **follow** us on **Twitter** ğŸ¦ [**@hacktricks\_live**](https://twitter.com/hacktricks\_live)**.**
* **Share hacking tricks by submitting PRs to the** [**HackTricks**](https://github.com/carlospolop/hacktricks) and [**HackTricks Cloud**](https://github.com/carlospolop/hacktricks-cloud) github repos.

</details>
{% endhint %}
