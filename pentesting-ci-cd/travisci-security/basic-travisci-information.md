# Osnovne informacije o TravisCI

{% hint style="success" %}
Nau캜ite i ve쬭ajte AWS Hacking:<img src="/.gitbook/assets/image.png" alt="" data-size="line">[**HackTricks Training AWS Red Team Expert (ARTE)**](https://training.hacktricks.xyz/courses/arte)<img src="/.gitbook/assets/image.png" alt="" data-size="line">\
Nau캜ite i ve쬭ajte GCP Hacking: <img src="/.gitbook/assets/image (2).png" alt="" data-size="line">[**HackTricks Training GCP Red Team Expert (GRTE)**<img src="/.gitbook/assets/image (2).png" alt="" data-size="line">](https://training.hacktricks.xyz/courses/grte)

<details>

<summary>Podr쬴te HackTricks</summary>

* Pogledajte [**planove pretplate**](https://github.com/sponsors/carlospolop)!
* **Pridru쬴te se** 游눫 [**Discord grupi**](https://discord.gg/hRep4RUj7f) ili [**telegram grupi**](https://t.me/peass) ili **pratite** nas na **Twitteru** 游냕 [**@hacktricks\_live**](https://twitter.com/hacktricks\_live)**.**
* **Delite hakovanje trikove slanjem PR-ova na** [**HackTricks**](https://github.com/carlospolop/hacktricks) i [**HackTricks Cloud**](https://github.com/carlospolop/hacktricks-cloud) github repozitorijume.

</details>
{% endhint %}

## Pristup

TravisCI se direktno integri코e sa razli캜itim git platformama kao 코to su Github, Bitbucket, Assembla i Gitlab. Od korisnika 캖e se tra쬴ti da da TravisCI dozvole za pristup repozitorijumima koje 쬰li da integri코e sa TravisCI.

Na primer, na Github-u 캖e tra쬴ti slede캖e dozvole:

* `user:email` (samo za 캜itanje)
* `read:org` (samo za 캜itanje)
* `repo`: Omogu캖ava 캜itanje i pisanje pristupa kodu, statusima commit-a, saradnicima i statusima implementacije za javne i privatne repozitorijume i organizacije.

## Enkriptovane tajne

### Promenljive okru쬰nja

U TravisCI, kao i na drugim CI platformama, mogu캖e je **sa캜uvati tajne na nivou repozitorijuma** koje 캖e biti sa캜uvane enkriptovane i **dekriptovane i postavljene u promenljive okru쬰nja** ma코ine koja izvr코ava build.

![](<../../.gitbook/assets/image (203).png>)

Mogu캖e je nazna캜iti **grane za koje 캖e tajne biti dostupne** (podrazumevano sve) i tako캠e ako TravisCI **treba da sakrije njihovu vrednost** ako se pojavi **u logovima** (podrazumevano ho캖e).

### Prilago캠ene enkriptovane tajne

Za **svaki repozitorijum** TravisCI generi코e **RSA par klju캜eva**, **캜uva** privatni, i 캜ini **javni klju캜 repozitorijuma dostupnim** onima koji imaju **pristup** repozitorijumu.

Mo쬰te pristupiti javnom klju캜u jednog repozitorijuma sa:
```
travis pubkey -r <owner>/<repo_name>
travis pubkey -r carlospolop/t-ci-test
```
Zatim, mo쬰te koristiti ovo pode코avanje da **코ifrujete tajne i dodate ih u va코 `.travis.yaml`**. Tajne 캖e biti **de코ifrovane kada se build pokrene** i dostupne u **promenljivama okru쬰nja**.

![](<../../.gitbook/assets/image (139).png>)

Imajte na umu da tajne 코ifrovane na ovaj na캜in ne캖e biti prikazane u promenljivama okru쬰nja u pode코avanjima.

### Prilago캠eni 말frovani Fajlovi

Na isti na캜in kao ranije, TravisCI tako캠e omogu캖ava da **코ifrujete fajlove i zatim ih de코ifrujete tokom build-a**:
```
travis encrypt-file super_secret.txt -r carlospolop/t-ci-test

encrypting super_secret.txt for carlospolop/t-ci-test
storing result as super_secret.txt.enc
storing secure env variables for decryption

Please add the following to your build script (before_install stage in your .travis.yml, for instance):

openssl aes-256-cbc -K $encrypted_355e94ba1091_key -iv $encrypted_355e94ba1091_iv -in super_secret.txt.enc -out super_secret.txt -d

Pro Tip: You can add it automatically by running with --add.

Make sure to add super_secret.txt.enc to the git repository.
Make sure not to add super_secret.txt to the git repository.
Commit all changes to your .travis.yml.
```
Note that when encrypting a file 2 Env Variables will be configured inside the repo such as:

![](<../../.gitbook/assets/image (170).png>)

## TravisCI Enterprise

Travis CI Enterprise je **on-prem verzija Travis CI**, koju mo쬰te implementirati **u va코oj infrastrukturi**. Zamislite 'server' verziju Travis CI. Kori코캖enje Travis CI omogu캖ava vam da omogu캖ite jednostavan za kori코캖enje Continuous Integration/Continuous Deployment (CI/CD) sistem u okru쬰nju, koje mo쬰te konfigurisati i osigurati kako 쬰lite.

**Travis CI Enterprise se sastoji od dva glavna dela:**

1. TCI **usluge** (ili TCI Core Services), odgovorne za integraciju sa sistemima za kontrolu verzija, autorizaciju build-ova, zakazivanje build poslova, itd.
2. TCI **Worker** i slike okru쬰nja za build (tako캠e nazvane OS slike).

**TCI Core usluge zahtevaju slede캖e:**

1. **PostgreSQL11** (ili noviju) bazu podataka.
2. Infrastrukturu za implementaciju Kubernetes klastera; mo쬰 se implementirati u server klasteru ili na jednoj ma코ini ako je potrebno.
3. U zavisnosti od va코e postavke, mo쬯a 캖ete 쬰leti da implementirate i konfiguri코ete neke od komponenti sami, npr. RabbitMQ - pogledajte [Postavljanje Travis CI Enterprise](https://docs.travis-ci.com/user/enterprise/tcie-3.x-setting-up-travis-ci-enterprise/) za vi코e detalja.

**TCI Worker zahteva slede캖e:**

1. Infrastrukturu gde se mo쬰 implementirati docker slika koja sadr쬴 **Worker i povezanu build sliku**.
2. Povezivanje sa odre캠enim komponentama Travis CI Core Services - pogledajte [Postavljanje Workera](https://docs.travis-ci.com/user/enterprise/setting-up-worker/) za vi코e detalja.

Koli캜ina implementiranih TCI Worker i OS slika okru쬰nja za build 캖e odrediti ukupni istovremeni kapacitet Travis CI Enterprise implementacije u va코oj infrastrukturi.

![](<../../.gitbook/assets/image (199).png>)

{% hint style="success" %}
Nau캜ite i ve쬭ajte AWS Hacking:<img src="/.gitbook/assets/image.png" alt="" data-size="line">[**HackTricks Training AWS Red Team Expert (ARTE)**](https://training.hacktricks.xyz/courses/arte)<img src="/.gitbook/assets/image.png" alt="" data-size="line">\
Nau캜ite i ve쬭ajte GCP Hacking: <img src="/.gitbook/assets/image (2).png" alt="" data-size="line">[**HackTricks Training GCP Red Team Expert (GRTE)**<img src="/.gitbook/assets/image (2).png" alt="" data-size="line">](https://training.hacktricks.xyz/courses/grte)

<details>

<summary>Podr쬴te HackTricks</summary>

* Pogledajte [**planove pretplate**](https://github.com/sponsors/carlospolop)!
* **Pridru쬴te se** 游눫 [**Discord grupi**](https://discord.gg/hRep4RUj7f) ili [**telegram grupi**](https://t.me/peass) ili **pratite** nas na **Twitter-u** 游냕 [**@hacktricks\_live**](https://twitter.com/hacktricks\_live)**.**
* **Delite hacking trikove podno코enjem PR-ova na** [**HackTricks**](https://github.com/carlospolop/hacktricks) i [**HackTricks Cloud**](https://github.com/carlospolop/hacktricks-cloud) github repozitorijume.

</details>
{% endhint %}
