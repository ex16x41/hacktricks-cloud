# åŸºæœ¬ TravisCI ä¿¡æ¯

{% hint style="success" %}
å­¦ä¹ ä¸å®è·µ AWS é»‘å®¢æŠ€æœ¯ï¼š<img src="../../.gitbook/assets/image (1).png" alt="" data-size="line">[**HackTricks åŸ¹è®­ AWS çº¢é˜Ÿä¸“å®¶ (ARTE)**](https://training.hacktricks.xyz/courses/arte)<img src="../../.gitbook/assets/image (1).png" alt="" data-size="line">\
å­¦ä¹ ä¸å®è·µ GCP é»‘å®¢æŠ€æœ¯ï¼š<img src="../../.gitbook/assets/image (2).png" alt="" data-size="line">[**HackTricks åŸ¹è®­ GCP çº¢é˜Ÿä¸“å®¶ (GRTE)**<img src="../../.gitbook/assets/image (2).png" alt="" data-size="line">](https://training.hacktricks.xyz/courses/grte)

<details>

<summary>æ”¯æŒ HackTricks</summary>

* æŸ¥çœ‹ [**è®¢é˜…è®¡åˆ’**](https://github.com/sponsors/carlospolop)!
* **åŠ å…¥** ğŸ’¬ [**Discord ç¾¤ç»„**](https://discord.gg/hRep4RUj7f) æˆ– [**Telegram ç¾¤ç»„**](https://t.me/peass) æˆ– **å…³æ³¨** æˆ‘ä»¬çš„ **Twitter** ğŸ¦ [**@hacktricks\_live**](https://twitter.com/hacktricks\_live)**.**
* **é€šè¿‡å‘** [**HackTricks**](https://github.com/carlospolop/hacktricks) å’Œ [**HackTricks Cloud**](https://github.com/carlospolop/hacktricks-cloud) GitHub ä»“åº“æäº¤ PR åˆ†äº«é»‘å®¢æŠ€å·§ã€‚

</details>
{% endhint %}

## è®¿é—®

TravisCI ç›´æ¥ä¸ä¸åŒçš„ git å¹³å°é›†æˆï¼Œå¦‚ Githubã€Bitbucketã€Assembla å’Œ Gitlabã€‚å®ƒä¼šè¦æ±‚ç”¨æˆ·æˆäºˆ TravisCI è®¿é—®ä»–æƒ³è¦ä¸ TravisCI é›†æˆçš„ä»“åº“çš„æƒé™ã€‚

ä¾‹å¦‚ï¼Œåœ¨ Github ä¸­ï¼Œå®ƒä¼šè¯·æ±‚ä»¥ä¸‹æƒé™ï¼š

* `user:email`ï¼ˆåªè¯»ï¼‰
* `read:org`ï¼ˆåªè¯»ï¼‰
* `repo`ï¼šæˆäºˆå¯¹å…¬å…±å’Œç§æœ‰ä»“åº“åŠç»„ç»‡çš„ä»£ç ã€æäº¤çŠ¶æ€ã€åä½œè€…å’Œéƒ¨ç½²çŠ¶æ€çš„è¯»å†™è®¿é—®æƒé™ã€‚

## åŠ å¯†ç§˜å¯†

### ç¯å¢ƒå˜é‡

åœ¨ TravisCI ä¸­ï¼Œä¸å…¶ä»– CI å¹³å°ä¸€æ ·ï¼Œå¯ä»¥åœ¨ä»“åº“çº§åˆ«**ä¿å­˜ç§˜å¯†**ï¼Œè¿™äº›ç§˜å¯†å°†è¢«åŠ å¯†ä¿å­˜ï¼Œå¹¶åœ¨æ‰§è¡Œæ„å»ºçš„æœºå™¨çš„ç¯å¢ƒå˜é‡ä¸­**è§£å¯†å¹¶æ¨é€**ã€‚

![](<../../.gitbook/assets/image (203).png>)

å¯ä»¥æŒ‡ç¤º**ç§˜å¯†å°†å¯ç”¨çš„åˆ†æ”¯**ï¼ˆé»˜è®¤æ˜¯æ‰€æœ‰ï¼‰ä»¥åŠ TravisCI **æ˜¯å¦åº”è¯¥éšè—å…¶å€¼**ï¼Œå¦‚æœå®ƒå‡ºç°åœ¨**æ—¥å¿—ä¸­**ï¼ˆé»˜è®¤ä¼šéšè—ï¼‰ã€‚

### è‡ªå®šä¹‰åŠ å¯†ç§˜å¯†

å¯¹äº**æ¯ä¸ªä»“åº“**ï¼ŒTravisCI ç”Ÿæˆä¸€ä¸ª**RSA å¯†é’¥å¯¹**ï¼Œ**ä¿ç•™**ç§é’¥ï¼Œå¹¶å°†ä»“åº“çš„**å…¬é’¥æä¾›ç»™**æœ‰**è®¿é—®æƒé™**çš„ç”¨æˆ·ã€‚

æ‚¨å¯ä»¥é€šè¿‡ä»¥ä¸‹æ–¹å¼è®¿é—®ä¸€ä¸ªä»“åº“çš„å…¬é’¥ï¼š
```
travis pubkey -r <owner>/<repo_name>
travis pubkey -r carlospolop/t-ci-test
```
ç„¶åï¼Œæ‚¨å¯ä»¥ä½¿ç”¨æ­¤è®¾ç½®æ¥**åŠ å¯†ç§˜å¯†å¹¶å°†å…¶æ·»åŠ åˆ°æ‚¨çš„ `.travis.yaml`**ã€‚è¿™äº›ç§˜å¯†å°†åœ¨**æ„å»ºè¿è¡Œæ—¶è§£å¯†**ï¼Œå¹¶å¯ä»¥åœ¨**ç¯å¢ƒå˜é‡**ä¸­è®¿é—®ã€‚

![](<../../.gitbook/assets/image (139).png>)

è¯·æ³¨æ„ï¼Œä»¥è¿™ç§æ–¹å¼åŠ å¯†çš„ç§˜å¯†ä¸ä¼šå‡ºç°åœ¨è®¾ç½®çš„ç¯å¢ƒå˜é‡åˆ—è¡¨ä¸­ã€‚

### è‡ªå®šä¹‰åŠ å¯†æ–‡ä»¶

ä¸ä¹‹å‰ä¸€æ ·ï¼ŒTravisCI è¿˜å…è®¸**åŠ å¯†æ–‡ä»¶ï¼Œç„¶ååœ¨æ„å»ºæœŸé—´è§£å¯†å®ƒä»¬**ï¼š
```
travis encrypt-file super_secret.txt -r carlospolop/t-ci-test

encrypting super_secret.txt for carlospolop/t-ci-test
storing result as super_secret.txt.enc
storing secure env variables for decryption

Please add the following to your build script (before_install stage in your .travis.yml, for instance):

openssl aes-256-cbc -K $encrypted_355e94ba1091_key -iv $encrypted_355e94ba1091_iv -in super_secret.txt.enc -out super_secret.txt -d

Pro Tip: You can add it automatically by running with --add.

Make sure to add super_secret.txt.enc to the git repository.
Make sure not to add super_secret.txt to the git repository.
Commit all changes to your .travis.yml.
```
æ³¨æ„ï¼Œå½“åŠ å¯†æ–‡ä»¶æ—¶ï¼Œå°†åœ¨ä»“åº“ä¸­é…ç½® 2 ä¸ªç¯å¢ƒå˜é‡ï¼Œå¦‚ä¸‹æ‰€ç¤ºï¼š

![](<../../.gitbook/assets/image (170).png>)

## TravisCI ä¼ä¸šç‰ˆ

Travis CI ä¼ä¸šç‰ˆæ˜¯ **Travis CI çš„æœ¬åœ°ç‰ˆæœ¬**ï¼Œæ‚¨å¯ä»¥åœ¨ **æ‚¨çš„åŸºç¡€è®¾æ–½ä¸­éƒ¨ç½²**ã€‚å¯ä»¥å°†å…¶è§†ä¸º Travis CI çš„â€œæœåŠ¡å™¨â€ç‰ˆæœ¬ã€‚ä½¿ç”¨ Travis CI å¯ä»¥åœ¨æ‚¨å¯ä»¥æ ¹æ®éœ€è¦é…ç½®å’Œä¿æŠ¤çš„ç¯å¢ƒä¸­å¯ç”¨æ˜“äºä½¿ç”¨çš„æŒç»­é›†æˆ/æŒç»­éƒ¨ç½² (CI/CD) ç³»ç»Ÿã€‚

**Travis CI ä¼ä¸šç‰ˆç”±ä¸¤ä¸ªä¸»è¦éƒ¨åˆ†ç»„æˆï¼š**

1. TCI **æœåŠ¡**ï¼ˆæˆ– TCI æ ¸å¿ƒæœåŠ¡ï¼‰ï¼Œè´Ÿè´£ä¸ç‰ˆæœ¬æ§åˆ¶ç³»ç»Ÿçš„é›†æˆã€æˆæƒæ„å»ºã€è°ƒåº¦æ„å»ºä½œä¸šç­‰ã€‚
2. TCI **å·¥ä½œèŠ‚ç‚¹**å’Œæ„å»ºç¯å¢ƒé•œåƒï¼ˆä¹Ÿç§°ä¸ºæ“ä½œç³»ç»Ÿé•œåƒï¼‰ã€‚

**TCI æ ¸å¿ƒæœåŠ¡éœ€è¦ä»¥ä¸‹å†…å®¹ï¼š**

1. ä¸€ä¸ª **PostgreSQL11**ï¼ˆæˆ–æ›´é«˜ç‰ˆæœ¬ï¼‰æ•°æ®åº“ã€‚
2. éƒ¨ç½² Kubernetes é›†ç¾¤çš„åŸºç¡€è®¾æ–½ï¼›å¦‚æœéœ€è¦ï¼Œå¯ä»¥åœ¨æœåŠ¡å™¨é›†ç¾¤ä¸­æˆ–å•å°æœºå™¨ä¸Šéƒ¨ç½²ã€‚
3. æ ¹æ®æ‚¨çš„è®¾ç½®ï¼Œæ‚¨å¯èƒ½å¸Œæœ›è‡ªè¡Œéƒ¨ç½²å’Œé…ç½®æŸäº›ç»„ä»¶ï¼Œä¾‹å¦‚ RabbitMQ - æœ‰å…³æ›´å¤šè¯¦ç»†ä¿¡æ¯ï¼Œè¯·å‚è§ [è®¾ç½® Travis CI ä¼ä¸šç‰ˆ](https://docs.travis-ci.com/user/enterprise/tcie-3.x-setting-up-travis-ci-enterprise/)ã€‚

**TCI å·¥ä½œèŠ‚ç‚¹éœ€è¦ä»¥ä¸‹å†…å®¹ï¼š**

1. ä¸€ä¸ªåŸºç¡€è®¾æ–½ï¼Œå¯ä»¥åœ¨å…¶ä¸­éƒ¨ç½²åŒ…å« **å·¥ä½œèŠ‚ç‚¹å’Œé“¾æ¥çš„æ„å»ºé•œåƒ** çš„ Docker é•œåƒã€‚
2. è¿æ¥åˆ°æŸäº› Travis CI æ ¸å¿ƒæœåŠ¡ç»„ä»¶ - æœ‰å…³æ›´å¤šè¯¦ç»†ä¿¡æ¯ï¼Œè¯·å‚è§ [è®¾ç½®å·¥ä½œèŠ‚ç‚¹](https://docs.travis-ci.com/user/enterprise/setting-up-worker/)ã€‚

éƒ¨ç½²çš„ TCI å·¥ä½œèŠ‚ç‚¹å’Œæ„å»ºç¯å¢ƒæ“ä½œç³»ç»Ÿé•œåƒçš„æ•°é‡å°†å†³å®šæ‚¨åŸºç¡€è®¾æ–½ä¸­ Travis CI ä¼ä¸šç‰ˆéƒ¨ç½²çš„æ€»å¹¶å‘å®¹é‡ã€‚

![](<../../.gitbook/assets/image (199).png>)

{% hint style="success" %}
å­¦ä¹ å’Œå®è·µ AWS é»‘å®¢æŠ€æœ¯ï¼š<img src="../../.gitbook/assets/image (1).png" alt="" data-size="line">[**HackTricks åŸ¹è®­ AWS çº¢é˜Ÿä¸“å®¶ (ARTE)**](https://training.hacktricks.xyz/courses/arte)<img src="../../.gitbook/assets/image (1).png" alt="" data-size="line">\
å­¦ä¹ å’Œå®è·µ GCP é»‘å®¢æŠ€æœ¯ï¼š<img src="../../.gitbook/assets/image (2).png" alt="" data-size="line">[**HackTricks åŸ¹è®­ GCP çº¢é˜Ÿä¸“å®¶ (GRTE)**<img src="../../.gitbook/assets/image (2).png" alt="" data-size="line">](https://training.hacktricks.xyz/courses/grte)

<details>

<summary>æ”¯æŒ HackTricks</summary>

* æŸ¥çœ‹ [**è®¢é˜…è®¡åˆ’**](https://github.com/sponsors/carlospolop)!
* **åŠ å…¥** ğŸ’¬ [**Discord ç¾¤ç»„**](https://discord.gg/hRep4RUj7f) æˆ– [**ç”µæŠ¥ç¾¤ç»„**](https://t.me/peass) æˆ– **åœ¨ Twitter ä¸Šå…³æ³¨** ğŸ¦ [**@hacktricks\_live**](https://twitter.com/hacktricks\_live)**.**
* **é€šè¿‡å‘** [**HackTricks**](https://github.com/carlospolop/hacktricks) å’Œ [**HackTricks Cloud**](https://github.com/carlospolop/hacktricks-cloud) GitHub ä»“åº“æäº¤ PR æ¥åˆ†äº«é»‘å®¢æŠ€å·§ã€‚

</details>
{% endhint %}
