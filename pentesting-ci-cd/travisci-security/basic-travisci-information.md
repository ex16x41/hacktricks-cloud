# Podstawowe informacje o TravisCI

{% hint style="success" %}
Ucz si i wicz Hacking AWS:<img src="../../.gitbook/assets/image (1).png" alt="" data-size="line">[**HackTricks Training AWS Red Team Expert (ARTE)**](https://training.hacktricks.xyz/courses/arte)<img src="../../.gitbook/assets/image (1).png" alt="" data-size="line">\
Ucz si i wicz Hacking GCP: <img src="../../.gitbook/assets/image (2).png" alt="" data-size="line">[**HackTricks Training GCP Red Team Expert (GRTE)**<img src="../../.gitbook/assets/image (2).png" alt="" data-size="line">](https://training.hacktricks.xyz/courses/grte)

<details>

<summary>Wsparcie dla HackTricks</summary>

* Sprawd藕 [**plany subskrypcyjne**](https://github.com/sponsors/carlospolop)!
* **Docz do**  [**grupy Discord**](https://discord.gg/hRep4RUj7f) lub [**grupy telegramowej**](https://t.me/peass) lub **led藕** nas na **Twitterze**  [**@hacktricks\_live**](https://twitter.com/hacktricks\_live)**.**
* **Podziel si trikami hackingowymi, przesyajc PR-y do** [**HackTricks**](https://github.com/carlospolop/hacktricks) i [**HackTricks Cloud**](https://github.com/carlospolop/hacktricks-cloud) repozytori贸w na githubie.

</details>
{% endhint %}

## Dostp

TravisCI bezporednio integruje si z r贸偶nymi platformami git, takimi jak Github, Bitbucket, Assembla i Gitlab. Poprosi u偶ytkownika o nadanie TravisCI uprawnie do dostpu do repozytori贸w, kt贸re chce zintegrowa z TravisCI.

Na przykad, w Github poprosi o nastpujce uprawnienia:

* `user:email` (tylko do odczytu)
* `read:org` (tylko do odczytu)
* `repo`: Przyznaje dostp do odczytu i zapisu do kodu, status贸w commit贸w, wsp贸pracownik贸w i status贸w wdro偶e dla publicznych i prywatnych repozytori贸w oraz organizacji.

## Szyfrowane sekrety

### Zmienne rodowiskowe

W TravisCI, podobnie jak w innych platformach CI, mo偶liwe jest **zapisywanie na poziomie repozytorium sekret贸w**, kt贸re bd przechowywane w formie zaszyfrowanej i bd **odszyfrowywane i wprowadzane do zmiennej rodowiskowej** maszyny wykonujcej budow.

![](<../../.gitbook/assets/image (203).png>)

Mo偶liwe jest wskazanie **gazi, do kt贸rych sekrety bd dostpne** (domylnie wszystkie) oraz czy TravisCI **powinien ukry ich warto** jeli pojawi si **w logach** (domylnie tak).

### Niestandardowe szyfrowane sekrety

Dla **ka偶dego repozytorium** TravisCI generuje **par kluczy RSA**, **przechowuje** klucz **prywatny** i udostpnia **klucz publiczny** repozytorium tym, kt贸rzy maj **dostp** do repozytorium.

Mo偶esz uzyska dostp do klucza publicznego jednego repozytorium za pomoc:
```
travis pubkey -r <owner>/<repo_name>
travis pubkey -r carlospolop/t-ci-test
```
Nastpnie mo偶esz u偶y tej konfiguracji, aby **szyfrowa sekrety i doda je do swojego `.travis.yaml`**. Sekrety bd **odszyfrowane, gdy budowa bdzie uruchamiana** i dostpne w **zmiennych rodowiskowych**.

![](<../../.gitbook/assets/image (139).png>)

Zauwa偶, 偶e sekrety szyfrowane w ten spos贸b nie bd widoczne na licie w zmiennych rodowiskowych ustawie.

### Niestandardowe Szyfrowane Pliki

W ten sam spos贸b, co wczeniej, TravisCI r贸wnie偶 pozwala na **szyfrowanie plik贸w, a nastpnie odszyfrowywanie ich podczas budowy**:
```
travis encrypt-file super_secret.txt -r carlospolop/t-ci-test

encrypting super_secret.txt for carlospolop/t-ci-test
storing result as super_secret.txt.enc
storing secure env variables for decryption

Please add the following to your build script (before_install stage in your .travis.yml, for instance):

openssl aes-256-cbc -K $encrypted_355e94ba1091_key -iv $encrypted_355e94ba1091_iv -in super_secret.txt.enc -out super_secret.txt -d

Pro Tip: You can add it automatically by running with --add.

Make sure to add super_secret.txt.enc to the git repository.
Make sure not to add super_secret.txt to the git repository.
Commit all changes to your .travis.yml.
```
Note that when encrypting a file 2 Env Variables will be configured inside the repo such as:

![](<../../.gitbook/assets/image (170).png>)

## TravisCI Enterprise

Travis CI Enterprise to **wersja on-premise Travis CI**, kt贸r mo偶esz wdro偶y **w swojej infrastrukturze**. Myl o wersji 'serwerowej' Travis CI. U偶ywanie Travis CI pozwala na wczenie atwego w u偶yciu systemu Continuous Integration/Continuous Deployment (CI/CD) w rodowisku, kt贸re mo偶esz skonfigurowa i zabezpieczy wedug wasnych potrzeb.

**Travis CI Enterprise skada si z dw贸ch g贸wnych czci:**

1. TCI **usugi** (lub TCI Core Services), odpowiedzialne za integracj z systemami kontroli wersji, autoryzacj bud贸w, planowanie zada budowlanych itp.
2. TCI **Worker** i obrazy rodowiska budowy (nazywane r贸wnie偶 obrazami systemu operacyjnego).

**Usugi TCI Core wymagaj nastpujcych element贸w:**

1. Bazy danych **PostgreSQL11** (lub nowszej).
2. Infrastruktury do wdro偶enia klastra Kubernetes; mo偶e by wdro偶ona w klastrze serwer贸w lub na pojedynczej maszynie, jeli to konieczne.
3. W zale偶noci od twojej konfiguracji, mo偶esz chcie wdro偶y i skonfigurowa niekt贸re z komponent贸w samodzielnie, np. RabbitMQ - zobacz [Konfiguracja Travis CI Enterprise](https://docs.travis-ci.com/user/enterprise/tcie-3.x-setting-up-travis-ci-enterprise/) po wicej szczeg贸贸w.

**Worker TCI wymaga nastpujcych element贸w:**

1. Infrastruktury, w kt贸rej mo偶na wdro偶y obraz docker zawierajcy **Worker i powizany obraz budowy**.
2. cznoci z niekt贸rymi komponentami usug TCI Core - zobacz [Konfiguracja Worker](https://docs.travis-ci.com/user/enterprise/setting-up-worker/) po wicej szczeg贸贸w.

Liczba wdro偶onych obraz贸w systemu operacyjnego TCI Worker i rodowiska budowy okreli cakowit r贸wnoleg pojemno wdro偶enia Travis CI Enterprise w twojej infrastrukturze.

![](<../../.gitbook/assets/image (199).png>)

{% hint style="success" %}
Learn & practice AWS Hacking:<img src="../../.gitbook/assets/image (1).png" alt="" data-size="line">[**HackTricks Training AWS Red Team Expert (ARTE)**](https://training.hacktricks.xyz/courses/arte)<img src="../../.gitbook/assets/image (1).png" alt="" data-size="line">\
Learn & practice GCP Hacking: <img src="../../.gitbook/assets/image (2).png" alt="" data-size="line">[**HackTricks Training GCP Red Team Expert (GRTE)**<img src="../../.gitbook/assets/image (2).png" alt="" data-size="line">](https://training.hacktricks.xyz/courses/grte)

<details>

<summary>Support HackTricks</summary>

* Check the [**subscription plans**](https://github.com/sponsors/carlospolop)!
* **Join the**  [**Discord group**](https://discord.gg/hRep4RUj7f) or the [**telegram group**](https://t.me/peass) or **follow** us on **Twitter**  [**@hacktricks\_live**](https://twitter.com/hacktricks\_live)**.**
* **Share hacking tricks by submitting PRs to the** [**HackTricks**](https://github.com/carlospolop/hacktricks) and [**HackTricks Cloud**](https://github.com/carlospolop/hacktricks-cloud) github repos.

</details>
{% endhint %}
