# Basic TravisCI Information

{% hint style="success" %}
Learn & practice AWS Hacking:<img src="../../.gitbook/assets/image (1).png" alt="" data-size="line">[**HackTricks Training AWS Red Team Expert (ARTE)**](https://training.hacktricks.xyz/courses/arte)<img src="../../.gitbook/assets/image (1).png" alt="" data-size="line">\
Learn & practice GCP Hacking: <img src="../../.gitbook/assets/image (2).png" alt="" data-size="line">[**HackTricks Training GCP Red Team Expert (GRTE)**<img src="../../.gitbook/assets/image (2).png" alt="" data-size="line">](https://training.hacktricks.xyz/courses/grte)

<details>

<summary>Support HackTricks</summary>

* Check the [**subscription plans**](https://github.com/sponsors/carlospolop)!
* **Join the** 💬 [**Discord group**](https://discord.gg/hRep4RUj7f) or the [**telegram group**](https://t.me/peass) or **follow** us on **Twitter** 🐦 [**@hacktricks\_live**](https://twitter.com/hacktricks\_live)**.**
* **Share hacking tricks by submitting PRs to the** [**HackTricks**](https://github.com/carlospolop/hacktricks) and [**HackTricks Cloud**](https://github.com/carlospolop/hacktricks-cloud) github repos.

</details>
{% endhint %}

## Access

Το TravisCI ενσωματώνεται απευθείας με διάφορες πλατφόρμες git όπως το Github, Bitbucket, Assembla και Gitlab. Θα ζητήσει από τον χρήστη να δώσει άδειες στο TravisCI για να έχει πρόσβαση στα repos που θέλει να ενσωματώσει με το TravisCI.

Για παράδειγμα, στο Github θα ζητήσει τις εξής άδειες:

* `user:email` (μόνο για ανάγνωση)
* `read:org` (μόνο για ανάγνωση)
* `repo`: Παρέχει πρόσβαση για ανάγνωση και εγγραφή στον κώδικα, τις καταστάσεις commit, τους συνεργάτες και τις καταστάσεις ανάπτυξης για δημόσια και ιδιωτικά αποθετήρια και οργανισμούς.

## Encrypted Secrets

### Environment Variables

Στο TravisCI, όπως και σε άλλες πλατφόρμες CI, είναι δυνατόν να **αποθηκεύσετε σε επίπεδο repo μυστικά** που θα αποθηκευτούν κρυπτογραφημένα και θα **αποκρυπτογραφηθούν και θα προωθηθούν στη μεταβλητή περιβάλλοντος** της μηχανής που εκτελεί την κατασκευή.

![](<../../.gitbook/assets/image (203).png>)

Είναι δυνατόν να υποδείξετε τις **κλάδους στους οποίους θα είναι διαθέσιμα τα μυστικά** (κατά προεπιλογή όλα) και επίσης αν το TravisCI **θα πρέπει να κρύψει την τιμή του** αν εμφανιστεί **στα logs** (κατά προεπιλογή θα το κάνει).

### Custom Encrypted Secrets

Για **κάθε repo** το TravisCI δημιουργεί ένα **RSA keypair**, **κρατά** το **ιδιωτικό** και καθιστά διαθέσιμο το **δημόσιο κλειδί** του αποθετηρίου σε αυτούς που έχουν **πρόσβαση** στο αποθετήριο.

Μπορείτε να αποκτήσετε πρόσβαση στο δημόσιο κλειδί ενός repo με:
```
travis pubkey -r <owner>/<repo_name>
travis pubkey -r carlospolop/t-ci-test
```
Τότε, μπορείτε να χρησιμοποιήσετε αυτή τη ρύθμιση για να **κρυπτογραφήσετε μυστικά και να τα προσθέσετε στο `.travis.yaml`**. Τα μυστικά θα **αποκρυπτογραφηθούν όταν εκτελείται η κατασκευή** και θα είναι προσβάσιμα στις **μεταβλητές περιβάλλοντος**.

![](<../../.gitbook/assets/image (139).png>)

Σημειώστε ότι τα μυστικά που κρυπτογραφούνται με αυτόν τον τρόπο δεν θα εμφανίζονται στη λίστα των μεταβλητών περιβάλλοντος των ρυθμίσεων.

### Προσαρμοσμένα Κρυπτογραφημένα Αρχεία

Με τον ίδιο τρόπο όπως πριν, το TravisCI επιτρέπει επίσης να **κρυπτογραφήσετε αρχεία και στη συνέχεια να τα αποκρυπτογραφήσετε κατά τη διάρκεια της κατασκευής**:
```
travis encrypt-file super_secret.txt -r carlospolop/t-ci-test

encrypting super_secret.txt for carlospolop/t-ci-test
storing result as super_secret.txt.enc
storing secure env variables for decryption

Please add the following to your build script (before_install stage in your .travis.yml, for instance):

openssl aes-256-cbc -K $encrypted_355e94ba1091_key -iv $encrypted_355e94ba1091_iv -in super_secret.txt.enc -out super_secret.txt -d

Pro Tip: You can add it automatically by running with --add.

Make sure to add super_secret.txt.enc to the git repository.
Make sure not to add super_secret.txt to the git repository.
Commit all changes to your .travis.yml.
```
Note that when encrypting a file 2 Env Variables will be configured inside the repo such as:

![](<../../.gitbook/assets/image (170).png>)

## TravisCI Enterprise

Travis CI Enterprise είναι μια **on-prem έκδοση του Travis CI**, την οποία μπορείτε να αναπτύξετε **στην υποδομή σας**. Σκεφτείτε την ‘server’ έκδοση του Travis CI. Η χρήση του Travis CI σας επιτρέπει να ενεργοποιήσετε ένα εύχρηστο σύστημα Συνεχούς Ενσωμάτωσης/Συνεχούς Ανάπτυξης (CI/CD) σε ένα περιβάλλον, το οποίο μπορείτε να διαμορφώσετε και να ασφαλίσετε όπως θέλετε.

**Travis CI Enterprise αποτελείται από δύο κύρια μέρη:**

1. TCI **υπηρεσίες** (ή TCI Core Services), υπεύθυνες για την ενσωμάτωσή τους με συστήματα ελέγχου εκδόσεων, την εξουσιοδότηση κατασκευών, τον προγραμματισμό εργασιών κατασκευής, κ.λπ.
2. TCI **Worker** και εικόνες περιβάλλοντος κατασκευής (γνωστές και ως εικόνες OS).

**TCI Core services απαιτούν τα εξής:**

1. Μια **PostgreSQL11** (ή νεότερη) βάση δεδομένων.
2. Μια υποδομή για την ανάπτυξη ενός Kubernetes cluster; μπορεί να αναπτυχθεί σε ένα cluster διακομιστών ή σε μια μόνο μηχανή αν απαιτείται.
3. Ανάλογα με τη ρύθμισή σας, μπορεί να θέλετε να αναπτύξετε και να διαμορφώσετε ορισμένα από τα στοιχεία μόνοι σας, π.χ., RabbitMQ - δείτε το [Setting up Travis CI Enterprise](https://docs.travis-ci.com/user/enterprise/tcie-3.x-setting-up-travis-ci-enterprise/) για περισσότερες λεπτομέρειες.

**TCI Worker απαιτεί τα εξής:**

1. Μια υποδομή όπου μια εικόνα docker που περιέχει τον **Worker και μια συνδεδεμένη εικόνα κατασκευής μπορεί να αναπτυχθεί**.
2. Συνδεσιμότητα με ορισμένα στοιχεία των Travis CI Core Services - δείτε το [Setting Up Worker](https://docs.travis-ci.com/user/enterprise/setting-up-worker/) για περισσότερες λεπτομέρειες.

Η ποσότητα των αναπτυγμένων TCI Worker και εικόνων περιβάλλοντος κατασκευής OS θα καθορίσει τη συνολική ταυτόχρονη ικανότητα ανάπτυξης του Travis CI Enterprise στην υποδομή σας.

![](<../../.gitbook/assets/image (199).png>)

{% hint style="success" %}
Learn & practice AWS Hacking:<img src="../../.gitbook/assets/image (1).png" alt="" data-size="line">[**HackTricks Training AWS Red Team Expert (ARTE)**](https://training.hacktricks.xyz/courses/arte)<img src="../../.gitbook/assets/image (1).png" alt="" data-size="line">\
Learn & practice GCP Hacking: <img src="../../.gitbook/assets/image (2).png" alt="" data-size="line">[**HackTricks Training GCP Red Team Expert (GRTE)**<img src="../../.gitbook/assets/image (2).png" alt="" data-size="line">](https://training.hacktricks.xyz/courses/grte)

<details>

<summary>Support HackTricks</summary>

* Check the [**subscription plans**](https://github.com/sponsors/carlospolop)!
* **Join the** 💬 [**Discord group**](https://discord.gg/hRep4RUj7f) or the [**telegram group**](https://t.me/peass) or **follow** us on **Twitter** 🐦 [**@hacktricks\_live**](https://twitter.com/hacktricks\_live)**.**
* **Share hacking tricks by submitting PRs to the** [**HackTricks**](https://github.com/carlospolop/hacktricks) and [**HackTricks Cloud**](https://github.com/carlospolop/hacktricks-cloud) github repos.

</details>
{% endhint %}
