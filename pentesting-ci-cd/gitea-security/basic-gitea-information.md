# Grundlegende Gitea-Informationen

{% hint style="success" %}
Lernen & √ºben Sie AWS Hacking:<img src="../../.gitbook/assets/image (1) (1) (1).png" alt="" data-size="line">[**HackTricks Training AWS Red Team Expert (ARTE)**](https://training.hacktricks.xyz/courses/arte)<img src="../../.gitbook/assets/image (1) (1) (1).png" alt="" data-size="line">\
Lernen & √ºben Sie GCP Hacking: <img src="../../.gitbook/assets/image (2).png" alt="" data-size="line">[**HackTricks Training GCP Red Team Expert (GRTE)**<img src="../../.gitbook/assets/image (2).png" alt="" data-size="line">](https://training.hacktricks.xyz/courses/grte)

<details>

<summary>Unterst√ºtzen Sie HackTricks</summary>

* √úberpr√ºfen Sie die [**Abonnementpl√§ne**](https://github.com/sponsors/carlospolop)!
* **Treten Sie der** üí¨ [**Discord-Gruppe**](https://discord.gg/hRep4RUj7f) oder der [**Telegram-Gruppe**](https://t.me/peass) bei oder **folgen** Sie uns auf **Twitter** üê¶ [**@hacktricks\_live**](https://twitter.com/hacktricks_live)**.**
* **Teilen Sie Hacking-Tricks, indem Sie PRs an die** [**HackTricks**](https://github.com/carlospolop/hacktricks) und [**HackTricks Cloud**](https://github.com/carlospolop/hacktricks-cloud) GitHub-Repos senden.

</details>
{% endhint %}

## Grundstruktur

Die grundlegende Gitea-Umgebungsstruktur besteht darin, Repos nach **Organisation(en)** zu gruppieren, von denen jede **mehrere Repositories** und **mehrere Teams** enthalten kann. Beachten Sie jedoch, dass Benutzer wie bei GitHub Repos au√üerhalb der Organisation haben k√∂nnen.

Dar√ºber hinaus kann ein **Benutzer** ein **Mitglied** von **verschiedenen Organisationen** sein. Innerhalb der Organisation kann der Benutzer **verschiedene Berechtigungen f√ºr jedes Repository** haben.

Ein Benutzer kann auch **Teil verschiedener Teams** mit unterschiedlichen Berechtigungen f√ºr verschiedene Repos sein.

Und schlie√ülich **k√∂nnen Repositories spezielle Schutzmechanismen haben**.

## Berechtigungen

### Organisationen

Wenn eine **Organisation erstellt wird**, wird ein Team namens **Owners** **erstellt** und der Benutzer wird darin platziert. Dieses Team gew√§hrt **Admin-Zugriff** auf die **Organisation**, diese **Berechtigungen** und der **Name** des Teams **k√∂nnen nicht ge√§ndert werden**.

**Org-Admins** (Eigent√ºmer) k√∂nnen die **Sichtbarkeit** der Organisation ausw√§hlen:

* √ñffentlich
* Eingeschr√§nkt (nur angemeldete Benutzer)
* Privat (nur Mitglieder)

**Org-Admins** k√∂nnen auch angeben, ob die **Repo-Admins** **Zugriff f√ºr Teams hinzuf√ºgen oder entfernen** k√∂nnen. Sie k√∂nnen auch die maximale Anzahl von Repos angeben.

Bei der Erstellung eines neuen Teams werden mehrere wichtige Einstellungen ausgew√§hlt:

* Es wird angegeben, auf welche **Repos der Org die Mitglieder des Teams zugreifen k√∂nnen**: spezifische Repos (Repos, in die das Team hinzugef√ºgt wird) oder alle.
* Es wird auch angegeben, **ob Mitglieder neue Repos erstellen k√∂nnen** (der Ersteller erh√§lt Admin-Zugriff darauf).
* Die **Berechtigungen**, die die **Mitglieder** des Repos **haben**:
* **Administrator**-Zugriff
* **Spezifischer** Zugriff:

![](<../../.gitbook/assets/image (118).png>)

### Teams & Benutzer

In einem Repo k√∂nnen der **Org-Admin** und die **Repo-Admins** (sofern von der Org erlaubt) die Rollen verwalten, die den Mitarbeitern (anderen Benutzern) und Teams zugewiesen werden. Es gibt **3** m√∂gliche **Rollen**:

* Administrator
* Schreiben
* Lesen

## Gitea-Authentifizierung

### Webzugang

Verwendung von **Benutzername + Passwort** und m√∂glicherweise (und empfohlen) einer 2FA.

### **SSH-Schl√ºssel**

Sie k√∂nnen Ihr Konto mit einem oder mehreren √∂ffentlichen Schl√ºsseln konfigurieren, die es dem zugeh√∂rigen **privaten Schl√ºssel erm√∂glichen, in Ihrem Namen Aktionen auszuf√ºhren.** [http://localhost:3000/user/settings/keys](http://localhost:3000/user/settings/keys)

#### **GPG-Schl√ºssel**

Sie **k√∂nnen den Benutzer mit diesen Schl√ºsseln nicht impersonifizieren**, aber wenn Sie ihn nicht verwenden, k√∂nnte es m√∂glich sein, dass Sie **entdeckt werden, weil Sie Commits ohne Signatur senden**.

### **Pers√∂nliche Zugriffstoken**

Sie k√∂nnen pers√∂nliche Zugriffstoken generieren, um **einer Anwendung Zugriff auf Ihr Konto zu gew√§hren**. Ein pers√∂nliches Zugriffstoken gew√§hrt vollst√§ndigen Zugriff auf Ihr Konto: [http://localhost:3000/user/settings/applications](http://localhost:3000/user/settings/applications)

### Oauth-Anwendungen

Genau wie pers√∂nliche Zugriffstoken haben **Oauth-Anwendungen** **vollst√§ndigen Zugriff** auf Ihr Konto und die Orte, auf die Ihr Konto Zugriff hat, da, wie in den [Dokumenten](https://docs.gitea.io/en-us/oauth2-provider/#scopes) angegeben, Scopes noch nicht unterst√ºtzt werden:

![](<../../.gitbook/assets/image (194).png>)

### Bereitstellungsschl√ºssel

Bereitstellungsschl√ºssel k√∂nnen Lese- oder Schreibzugriff auf das Repo haben, sodass sie interessant sein k√∂nnten, um spezifische Repos zu kompromittieren.

## Branch-Schutz

Branch-Schutzma√ünahmen sind so konzipiert, dass sie **den Benutzern nicht die vollst√§ndige Kontrolle √ºber ein Repository geben**. Das Ziel ist es, **mehrere Schutzmethoden zu implementieren, bevor man in der Lage ist, Code in einen bestimmten Branch zu schreiben**.

Die **Branch-Schutzma√ünahmen eines Repositories** finden Sie unter _https://localhost:3000/\<orgname>/\<reponame>/settings/branches_

{% hint style="info" %}
Es ist **nicht m√∂glich, einen Branch-Schutz auf Organisationsebene festzulegen**. Daher m√ºssen alle in jedem Repo deklariert werden.
{% endhint %}

Verschiedene Schutzma√ünahmen k√∂nnen auf einen Branch (wie auf master) angewendet werden:

* **Push deaktivieren**: Niemand kann in diesen Branch pushen.
* **Push aktivieren**: Jeder mit Zugriff kann pushen, aber nicht force pushen.
* **Whitelist eingeschr√§nkter Push**: Nur ausgew√§hlte Benutzer/Teams k√∂nnen in diesen Branch pushen (aber kein Force Push).
* **Whitelist f√ºr Merge aktivieren**: Nur auf die Whitelist gesetzte Benutzer/Teams k√∂nnen PRs mergen.
* **Statuspr√ºfungen aktivieren:** Statuspr√ºfungen m√ºssen bestehen, bevor gemerged werden kann.
* **Genehmigungen erforderlich**: Geben Sie die Anzahl der erforderlichen Genehmigungen an, bevor ein PR gemerged werden kann.
* **Genehmigungen auf Whitelist beschr√§nken**: Geben Sie Benutzer/Teams an, die PRs genehmigen k√∂nnen.
* **Merge bei abgelehnten √úberpr√ºfungen blockieren**: Wenn √Ñnderungen angefordert werden, kann es nicht gemerged werden (auch wenn die anderen Pr√ºfungen bestehen).
* **Merge bei offiziellen √úberpr√ºfungsanfragen blockieren**: Wenn es offizielle √úberpr√ºfungsanfragen gibt, kann es nicht gemerged werden.
* **Veraltete Genehmigungen zur√ºckweisen**: Bei neuen Commits werden alte Genehmigungen zur√ºckgewiesen.
* **Signierte Commits erforderlich**: Commits m√ºssen signiert sein.
* **Merge blockieren, wenn der Pull-Request veraltet ist.**
* **Gesch√ºtzte/ungesch√ºtzte Dateimuster**: Geben Sie Muster von Dateien an, die gegen √Ñnderungen gesch√ºtzt/ungesch√ºtzt werden sollen.

{% hint style="info" %}
Wie Sie sehen k√∂nnen, selbst wenn Sie es geschafft haben, einige Anmeldeinformationen eines Benutzers zu erhalten, **k√∂nnten Repos gesch√ºtzt sein, sodass Sie beispielsweise keinen Code in master pushen k√∂nnen, um die CI/CD-Pipeline zu kompromittieren.**
{% endhint %}

{% hint style="success" %}
Lernen & √ºben Sie AWS Hacking:<img src="../../.gitbook/assets/image (1) (1) (1).png" alt="" data-size="line">[**HackTricks Training AWS Red Team Expert (ARTE)**](https://training.hacktricks.xyz/courses/arte)<img src="../../.gitbook/assets/image (1) (1) (1).png" alt="" data-size="line">\
Lernen & √ºben Sie GCP Hacking: <img src="../../.gitbook/assets/image (2).png" alt="" data-size="line">[**HackTricks Training GCP Red Team Expert (GRTE)**<img src="../../.gitbook/assets/image (2).png" alt="" data-size="line">](https://training.hacktricks.xyz/courses/grte)

<details>

<summary>Unterst√ºtzen Sie HackTricks</summary>

* √úberpr√ºfen Sie die [**Abonnementpl√§ne**](https://github.com/sponsors/carlospolop)!
* **Treten Sie der** üí¨ [**Discord-Gruppe**](https://discord.gg/hRep4RUj7f) oder der [**Telegram-Gruppe**](https://t.me/peass) bei oder **folgen** Sie uns auf **Twitter** üê¶ [**@hacktricks\_live**](https://twitter.com/hacktricks_live)**.**
* **Teilen Sie Hacking-Tricks, indem Sie PRs an die** [**HackTricks**](https://github.com/carlospolop/hacktricks) und [**HackTricks Cloud**](https://github.com/carlospolop/hacktricks-cloud) GitHub-Repos senden.

</details>
{% endhint %}
