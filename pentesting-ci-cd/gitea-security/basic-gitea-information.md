# Podstawowe informacje o Gitea

{% hint style="success" %}
Ucz si i wicz Hacking AWS:<img src="../../.gitbook/assets/image (1).png" alt="" data-size="line">[**HackTricks Training AWS Red Team Expert (ARTE)**](https://training.hacktricks.xyz/courses/arte)<img src="../../.gitbook/assets/image (1).png" alt="" data-size="line">\
Ucz si i wicz Hacking GCP: <img src="../../.gitbook/assets/image (2).png" alt="" data-size="line">[**HackTricks Training GCP Red Team Expert (GRTE)**<img src="../../.gitbook/assets/image (2).png" alt="" data-size="line">](https://training.hacktricks.xyz/courses/grte)

<details>

<summary>Wsparcie dla HackTricks</summary>

* Sprawd藕 [**plany subskrypcyjne**](https://github.com/sponsors/carlospolop)!
* **Docz do**  [**grupy Discord**](https://discord.gg/hRep4RUj7f) lub [**grupy telegram**](https://t.me/peass) lub **led藕** nas na **Twitterze**  [**@hacktricks\_live**](https://twitter.com/hacktricks\_live)**.**
* **Podziel si sztuczkami hackingowymi, przesyajc PR-y do** [**HackTricks**](https://github.com/carlospolop/hacktricks) i [**HackTricks Cloud**](https://github.com/carlospolop/hacktricks-cloud) repozytori贸w github.

</details>
{% endhint %}

## Podstawowa struktura

Podstawowa struktura rodowiska Gitea polega na grupowaniu repozytori贸w wedug **organizacji**, z kt贸rych ka偶da mo偶e zawiera **kilka repozytori贸w** i **kilka zespo贸w**. Nale偶y jednak zauwa偶y, 偶e podobnie jak w githubie, u偶ytkownicy mog mie repozytoria poza organizacj.

Ponadto, **u偶ytkownik** mo偶e by **czonkiem** **r贸偶nych organizacji**. W ramach organizacji u偶ytkownik mo偶e mie **r贸偶ne uprawnienia do ka偶dego repozytorium**.

U偶ytkownik mo偶e by r贸wnie偶 **czci r贸偶nych zespo贸w** z r贸偶nymi uprawnieniami do r贸偶nych repozytori贸w.

I wreszcie, **repozytoria mog mie specjalne mechanizmy ochrony**.

## Uprawnienia

### Organizacje

Gdy **organizacja jest tworzona**, tworzony jest zesp贸 o nazwie **Waciciele** i u偶ytkownik jest do niego dodawany. Ten zesp贸 zapewni **dostp administracyjny** do **organizacji**, te **uprawnienia** i **nazwa** zespou **nie mog by modyfikowane**.

**Administratorzy organizacji** (waciciele) mog wybra **widoczno** organizacji:

* Publiczna
* Ograniczona (tylko zalogowani u偶ytkownicy)
* Prywatna (tylko czonkowie)

**Administratorzy organizacji** mog r贸wnie偶 wskaza, czy **administratorzy repozytori贸w** mog **dodawa lub usuwa dostp** dla zespo贸w. Mog r贸wnie偶 wskaza maksymaln liczb repozytori贸w.

Podczas tworzenia nowego zespou wybierane s kilka wa偶nych ustawie:

* Wskazuje si **repozytoria organizacji, do kt贸rych czonkowie zespou bd mieli dostp**: konkretne repozytoria (repozytoria, do kt贸rych zesp贸 jest dodany) lub wszystkie.
* Wskazuje si r贸wnie偶 **czy czonkowie mog tworzy nowe repozytoria** (tw贸rca uzyska do nich dostp administracyjny)
* **Uprawnienia**, kt贸re **czonkowie** repozytori贸w bd **mie**:
* **Dostp administratora**
* **Dostp specyficzny**:

![](<../../.gitbook/assets/image (118).png>)

### Zespoy i u偶ytkownicy

W repozytorium, **administrator organizacji** i **administratorzy repozytori贸w** (jeli dozwolone przez organizacj) mog **zarzdza rolami** nadawanymi wsp贸pracownikom (innym u偶ytkownikom) i zespoom. Istniej **3** mo偶liwe **role**:

* Administrator
* Zapis
* Odczyt

## Uwierzytelnianie Gitea

### Dostp przez sie

U偶ywajc **nazwa u偶ytkownika + haso** i potencjalnie (i zalecane) 2FA.

### **Klucze SSH**

Mo偶esz skonfigurowa swoje konto z jednym lub kilkoma kluczami publicznymi, pozwalajc powizanemu **kluczowi prywatnemu na wykonywanie dziaa w twoim imieniu.** [http://localhost:3000/user/settings/keys](http://localhost:3000/user/settings/keys)

#### **Klucze GPG**

**Nie mo偶esz podszywa si pod u偶ytkownika za pomoc tych kluczy**, ale jeli ich nie u偶ywasz, mo偶e by mo偶liwe, 偶e **zostaniesz odkryty za wysyanie commit贸w bez podpisu**.

### **Osobiste tokeny dostpu**

Mo偶esz wygenerowa osobisty token dostpu, aby **da aplikacji dostp do swojego konta**. Osobisty token dostpu daje peny dostp do twojego konta: [http://localhost:3000/user/settings/applications](http://localhost:3000/user/settings/applications)

### Aplikacje Oauth

Podobnie jak osobiste tokeny dostpu, **aplikacje Oauth** bd miay **peny dostp** do twojego konta i miejsc, do kt贸rych twoje konto ma dostp, poniewa偶, jak wskazano w [dokumentacji](https://docs.gitea.io/en-us/oauth2-provider/#scopes), zakresy nie s jeszcze obsugiwane:

![](<../../.gitbook/assets/image (194).png>)

### Klucze wdro偶eniowe

Klucze wdro偶eniowe mog mie dostp tylko do odczytu lub zapisu do repozytorium, wic mog by interesujce do kompromitacji konkretnych repozytori贸w.

## Ochrona gazi

Ochrona gazi ma na celu **nieprzekazywanie penej kontroli nad repozytorium** u偶ytkownikom. Celem jest **wprowadzenie kilku metod ochrony przed mo偶liwoci pisania kodu w niekt贸rej gazi**.

**Ochrona gazi repozytorium** mo偶e by znaleziona pod _https://localhost:3000/\<orgname>/\<reponame>/settings/branches_

{% hint style="info" %}
Nie jest **mo偶liwe ustawienie ochrony gazi na poziomie organizacji**. Wszystkie musz by zadeklarowane w ka偶dym repozytorium.
{% endhint %}

R贸偶ne ochrony mog by stosowane do gazi (jak do master):

* **Wycz Push**: Nikt nie mo偶e przesya do tej gazi
* **Wcz Push**: Ka偶dy z dostpem mo偶e przesya, ale nie mo偶e wymusi przesyania.
* **Biaa lista ograniczonego Push**: Tylko wybrani u偶ytkownicy/zespoy mog przesya do tej gazi (ale nie mog wymusi przesyania)
* **Wcz bia list scalania**: Tylko u偶ytkownicy/zespoy z biaej listy mog scala PR-y.
* **Wcz kontrole statusu:** Wymagaj, aby kontrole statusu przeszy przed scaleniem.
* **Wymagaj zatwierdze**: Wska藕 liczb zatwierdze wymaganych przed scaleniem PR.
* **Ogranicz zatwierdzenia do biaej listy**: Wska藕 u偶ytkownik贸w/zespoy, kt贸re mog zatwierdza PR-y.
* **Zablokuj scalanie przy odrzuconych recenzjach**: Jeli zmiany s wymagane, nie mo偶e by scalone (nawet jeli inne kontrole przejd)
* **Zablokuj scalanie przy oficjalnych probach o recenzj**: Jeli s oficjalne proby o recenzj, nie mo偶e by scalone
* **Odrzu przestarzae zatwierdzenia**: Gdy pojawi si nowe commity, stare zatwierdzenia zostan odrzucone.
* **Wymagaj podpisanych commit贸w**: Commity musz by podpisane.
* **Zablokuj scalanie, jeli pull request jest przestarzay**
* **Wzory plik贸w chronionych/niechronionych**: Wska藕 wzory plik贸w do ochrony/od ochrony przed zmianami

{% hint style="info" %}
Jak wida, nawet jeli udao ci si uzyska jakie dane uwierzytelniajce u偶ytkownika, **repozytoria mog by chronione, co uniemo偶liwia ci przesyanie kodu do master**, na przykad w celu kompromitacji pipeline CI/CD.
{% endhint %}

{% hint style="success" %}
Ucz si i wicz Hacking AWS:<img src="../../.gitbook/assets/image (1).png" alt="" data-size="line">[**HackTricks Training AWS Red Team Expert (ARTE)**](https://training.hacktricks.xyz/courses/arte)<img src="../../.gitbook/assets/image (1).png" alt="" data-size="line">\
Ucz si i wicz Hacking GCP: <img src="../../.gitbook/assets/image (2).png" alt="" data-size="line">[**HackTricks Training GCP Red Team Expert (GRTE)**<img src="../../.gitbook/assets/image (2).png" alt="" data-size="line">](https://training.hacktricks.xyz/courses/grte)

<details>

<summary>Wsparcie dla HackTricks</summary>

* Sprawd藕 [**plany subskrypcyjne**](https://github.com/sponsors/carlospolop)!
* **Docz do**  [**grupy Discord**](https://discord.gg/hRep4RUj7f) lub [**grupy telegram**](https://t.me/peass) lub **led藕** nas na **Twitterze**  [**@hacktricks\_live**](https://twitter.com/hacktricks\_live)**.**
* **Podziel si sztuczkami hackingowymi, przesyajc PR-y do** [**HackTricks**](https://github.com/carlospolop/hacktricks) i [**HackTricks Cloud**](https://github.com/carlospolop/hacktricks-cloud) repozytori贸w github.

</details>
{% endhint %}
