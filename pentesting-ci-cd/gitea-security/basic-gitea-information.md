# Informations de base sur Gitea

{% hint style="success" %}
Apprenez et pratiquez le hacking AWS :<img src="../../.gitbook/assets/image (1) (1).png" alt="" data-size="line">[**Formation HackTricks AWS Red Team Expert (ARTE)**](https://training.hacktricks.xyz/courses/arte)<img src="../../.gitbook/assets/image (1) (1).png" alt="" data-size="line">\
Apprenez et pratiquez le hacking GCP : <img src="../../.gitbook/assets/image (2).png" alt="" data-size="line">[**Formation HackTricks GCP Red Team Expert (GRTE)**<img src="../../.gitbook/assets/image (2).png" alt="" data-size="line">](https://training.hacktricks.xyz/courses/grte)

<details>

<summary>Soutenir HackTricks</summary>

* Consultez les [**plans d'abonnement**](https://github.com/sponsors/carlospolop) !
* **Rejoignez le** üí¨ [**groupe Discord**](https://discord.gg/hRep4RUj7f) ou le [**groupe telegram**](https://t.me/peass) ou **suivez-nous sur** **Twitter** üê¶ [**@hacktricks\_live**](https://twitter.com/hacktricks\_live)**.**
* **Partagez des astuces de hacking en soumettant des PR au** [**HackTricks**](https://github.com/carlospolop/hacktricks) et [**HackTricks Cloud**](https://github.com/carlospolop/hacktricks-cloud) d√©p√¥ts github.

</details>
{% endhint %}

## Structure de base

La structure de base de l'environnement Gitea est de regrouper les d√©p√¥ts par **organisation(s)**, chacune d'elles pouvant contenir **plusieurs d√©p√¥ts** et **plusieurs √©quipes**. Cependant, notez que tout comme sur github, les utilisateurs peuvent avoir des d√©p√¥ts en dehors de l'organisation.

De plus, un **utilisateur** peut √™tre **membre de diff√©rentes organisations**. Au sein de l'organisation, l'utilisateur peut avoir **diff√©rentes permissions sur chaque d√©p√¥t**.

Un utilisateur peut √©galement √™tre **partie de diff√©rentes √©quipes** avec diff√©rentes permissions sur diff√©rents d√©p√¥ts.

Et enfin, **les d√©p√¥ts peuvent avoir des m√©canismes de protection sp√©ciaux**.

## Permissions

### Organisations

Lorsqu'une **organisation est cr√©√©e**, une √©quipe appel√©e **Propri√©taires** est **cr√©√©e** et l'utilisateur y est ajout√©. Cette √©quipe donnera un **acc√®s admin** sur l'**organisation**, ces **permissions** et le **nom** de l'√©quipe **ne peuvent pas √™tre modifi√©s**.

Les **admins d'org** (propri√©taires) peuvent s√©lectionner la **visibilit√©** de l'organisation :

* Public
* Limit√© (utilisateurs connect√©s uniquement)
* Priv√© (membres uniquement)

Les **admins d'org** peuvent √©galement indiquer si les **admins de d√©p√¥t** peuvent **ajouter ou retirer l'acc√®s** pour les √©quipes. Ils peuvent √©galement indiquer le nombre maximum de d√©p√¥ts.

Lors de la cr√©ation d'une nouvelle √©quipe, plusieurs param√®tres importants sont s√©lectionn√©s :

* Il est indiqu√© les **d√©p√¥ts de l'org auxquels les membres de l'√©quipe pourront acc√©der** : d√©p√¥ts sp√©cifiques (d√©p√¥ts o√π l'√©quipe est ajout√©e) ou tous.
* Il est √©galement indiqu√© **si les membres peuvent cr√©er de nouveaux d√©p√¥ts** (le cr√©ateur obtiendra un acc√®s admin √† celui-ci)
* Les **permissions** que les **membres** du d√©p√¥t **auront** :
* Acc√®s **Administrateur**
* Acc√®s **Sp√©cifique** :

![](<../../.gitbook/assets/image (118).png>)

### √âquipes et Utilisateurs

Dans un d√©p√¥t, l'**admin d'org** et les **admins de d√©p√¥t** (si autoris√©s par l'org) peuvent **g√©rer les r√¥les** attribu√©s aux collaborateurs (autres utilisateurs) et aux √©quipes. Il y a **3** r√¥les possibles :

* Administrateur
* √âcrire
* Lire

## Authentification Gitea

### Acc√®s Web

Utilisation de **nom d'utilisateur + mot de passe** et potentiellement (et recommand√©) un 2FA.

### **Cl√©s SSH**

Vous pouvez configurer votre compte avec une ou plusieurs cl√©s publiques permettant √† la cl√© **priv√©e associ√©e d'effectuer des actions en votre nom.** [http://localhost:3000/user/settings/keys](http://localhost:3000/user/settings/keys)

#### **Cl√©s GPG**

Vous **ne pouvez pas usurper l'identit√© de l'utilisateur avec ces cl√©s**, mais si vous ne l'utilisez pas, il pourrait √™tre possible que vous **soyez d√©couvert pour avoir envoy√© des commits sans signature**.

### **Jetons d'acc√®s personnels**

Vous pouvez g√©n√©rer un jeton d'acc√®s personnel pour **donner √† une application acc√®s √† votre compte**. Un jeton d'acc√®s personnel donne un acc√®s complet √† votre compte : [http://localhost:3000/user/settings/applications](http://localhost:3000/user/settings/applications)

### Applications Oauth

Tout comme les jetons d'acc√®s personnels, les **applications Oauth** auront un **acc√®s complet** √† votre compte et aux endroits auxquels votre compte a acc√®s car, comme indiqu√© dans la [documentation](https://docs.gitea.io/en-us/oauth2-provider/#scopes), les scopes ne sont pas encore pris en charge :

![](<../../.gitbook/assets/image (194).png>)

### Cl√©s de d√©ploiement

Les cl√©s de d√©ploiement peuvent avoir un acc√®s en lecture seule ou en √©criture au d√©p√¥t, elles peuvent donc √™tre int√©ressantes pour compromettre des d√©p√¥ts sp√©cifiques.

## Protections de branche

Les protections de branche sont con√ßues pour **ne pas donner un contr√¥le complet d'un d√©p√¥t** aux utilisateurs. L'objectif est de **mettre plusieurs m√©thodes de protection avant de pouvoir √©crire du code dans une certaine branche**.

Les **protections de branche d'un d√©p√¥t** peuvent √™tre trouv√©es √† _https://localhost:3000/\<orgname>/\<reponame>/settings/branches_

{% hint style="info" %}
Il est **impossible de d√©finir une protection de branche au niveau de l'organisation**. Donc, toutes doivent √™tre d√©clar√©es sur chaque d√©p√¥t.
{% endhint %}

Diff√©rentes protections peuvent √™tre appliqu√©es √† une branche (comme √† master) :

* **D√©sactiver Push** : Personne ne peut pousser vers cette branche
* **Activer Push** : Quiconque ayant acc√®s peut pousser, mais pas forcer le push.
* **Liste blanche de Push restreint** : Seuls les utilisateurs/√©quipes s√©lectionn√©s peuvent pousser vers cette branche (mais pas de force push)
* **Activer la liste blanche de fusion** : Seuls les utilisateurs/√©quipes sur liste blanche peuvent fusionner des PRs.
* **Activer les v√©rifications d'√©tat :** Exiger que les v√©rifications d'√©tat r√©ussissent avant de fusionner.
* **Exiger des approbations** : Indiquer le nombre d'approbations requises avant qu'une PR puisse √™tre fusionn√©e.
* **Restreindre les approbations aux utilisateurs sur liste blanche** : Indiquer les utilisateurs/√©quipes qui peuvent approuver les PRs.
* **Bloquer la fusion sur des revues rejet√©es** : Si des modifications sont demand√©es, elle ne peut pas √™tre fusionn√©e (m√™me si les autres v√©rifications r√©ussissent)
* **Bloquer la fusion sur des demandes de r√©vision officielles** : Si des demandes de r√©vision officielles existent, elle ne peut pas √™tre fusionn√©e
* **Rejeter les approbations obsol√®tes** : Lors de nouveaux commits, les anciennes approbations seront rejet√©es.
* **Exiger des commits sign√©s** : Les commits doivent √™tre sign√©s.
* **Bloquer la fusion si la demande de tirage est obsol√®te**
* **Mod√®les de fichiers prot√©g√©s/non prot√©g√©s** : Indiquer les mod√®les de fichiers √† prot√©ger/non prot√©ger contre les modifications

{% hint style="info" %}
Comme vous pouvez le voir, m√™me si vous parvenez √† obtenir des identifiants d'un utilisateur, **les d√©p√¥ts peuvent √™tre prot√©g√©s vous emp√™chant de pousser du code vers master** par exemple pour compromettre le pipeline CI/CD.
{% endhint %}

{% hint style="success" %}
Apprenez et pratiquez le hacking AWS :<img src="../../.gitbook/assets/image (1) (1).png" alt="" data-size="line">[**Formation HackTricks AWS Red Team Expert (ARTE)**](https://training.hacktricks.xyz/courses/arte)<img src="../../.gitbook/assets/image (1) (1).png" alt="" data-size="line">\
Apprenez et pratiquez le hacking GCP : <img src="../../.gitbook/assets/image (2).png" alt="" data-size="line">[**Formation HackTricks GCP Red Team Expert (GRTE)**<img src="../../.gitbook/assets/image (2).png" alt="" data-size="line">](https://training.hacktricks.xyz/courses/grte)

<details>

<summary>Soutenir HackTricks</summary>

* Consultez les [**plans d'abonnement**](https://github.com/sponsors/carlospolop) !
* **Rejoignez le** üí¨ [**groupe Discord**](https://discord.gg/hRep4RUj7f) ou le [**groupe telegram**](https://t.me/peass) ou **suivez-nous sur** **Twitter** üê¶ [**@hacktricks\_live**](https://twitter.com/hacktricks\_live)**.**
* **Partagez des astuces de hacking en soumettant des PR au** [**HackTricks**](https://github.com/carlospolop/hacktricks) et [**HackTricks Cloud**](https://github.com/carlospolop/hacktricks-cloud) d√©p√¥ts github.

</details>
{% endhint %}
