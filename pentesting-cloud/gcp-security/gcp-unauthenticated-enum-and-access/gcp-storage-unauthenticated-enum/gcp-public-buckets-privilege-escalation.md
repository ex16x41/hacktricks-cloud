# GCP - ‡§∏‡§æ‡§∞‡•ç‡§µ‡§ú‡§®‡§ø‡§ï ‡§¨‡§ï‡•á‡§ü‡•ç‡§∏ ‡§µ‡§ø‡§∂‡•á‡§∑‡§æ‡§ß‡§ø‡§ï‡§æ‡§∞ ‡§µ‡•É‡§¶‡•ç‡§ß‡§ø

{% hint style="success" %}
AWS ‡§π‡•à‡§ï‡§ø‡§Ç‡§ó ‡§∏‡•Ä‡§ñ‡•á‡§Ç ‡§î‡§∞ ‡§Ö‡§≠‡•ç‡§Ø‡§æ‡§∏ ‡§ï‡§∞‡•á‡§Ç:<img src="../../../../.gitbook/assets/image (1) (1) (1).png" alt="" data-size="line">[**HackTricks Training AWS Red Team Expert (ARTE)**](https://training.hacktricks.xyz/courses/arte)<img src="../../../../.gitbook/assets/image (1) (1) (1).png" alt="" data-size="line">\
GCP ‡§π‡•à‡§ï‡§ø‡§Ç‡§ó ‡§∏‡•Ä‡§ñ‡•á‡§Ç ‡§î‡§∞ ‡§Ö‡§≠‡•ç‡§Ø‡§æ‡§∏ ‡§ï‡§∞‡•á‡§Ç: <img src="../../../../.gitbook/assets/image (2).png" alt="" data-size="line">[**HackTricks Training GCP Red Team Expert (GRTE)**<img src="../../../../.gitbook/assets/image (2).png" alt="" data-size="line">](https://training.hacktricks.xyz/courses/grte)

<details>

<summary>HackTricks ‡§ï‡§æ ‡§∏‡§Æ‡§∞‡•ç‡§•‡§® ‡§ï‡§∞‡•á‡§Ç</summary>

* [**‡§∏‡§¶‡§∏‡•ç‡§Ø‡§§‡§æ ‡§Ø‡•ã‡§ú‡§®‡§æ‡§è‡§Å**](https://github.com/sponsors/carlospolop) ‡§¶‡•á‡§ñ‡•á‡§Ç!
* **‡§π‡§Æ‡§æ‡§∞‡•á** üí¨ [**Discord ‡§∏‡§Æ‡•Ç‡§π**](https://discord.gg/hRep4RUj7f) ‡§Ø‡§æ [**‡§ü‡•á‡§≤‡•Ä‡§ó‡•ç‡§∞‡§æ‡§Æ ‡§∏‡§Æ‡•Ç‡§π**](https://t.me/peass) ‡§Æ‡•á‡§Ç ‡§∂‡§æ‡§Æ‡§ø‡§≤ ‡§π‡•ã‡§Ç ‡§Ø‡§æ **Twitter** üê¶ ‡§™‡§∞ ‡§π‡§Æ‡•á‡§Ç **‡§´‡•â‡§≤‡•ã ‡§ï‡§∞‡•á‡§Ç** [**@hacktricks\_live**](https://twitter.com/hacktricks_live)**.**
* **‡§π‡•à‡§ï‡§ø‡§Ç‡§ó ‡§ü‡•ç‡§∞‡§ø‡§ï‡•ç‡§∏ ‡§∏‡§æ‡§ù‡§æ ‡§ï‡§∞‡•á‡§Ç ‡§î‡§∞** [**HackTricks**](https://github.com/carlospolop/hacktricks) ‡§î‡§∞ [**HackTricks Cloud**](https://github.com/carlospolop/hacktricks-cloud) ‡§ó‡§ø‡§ü‡§π‡§¨ ‡§∞‡§ø‡§™‡•ã‡§ú‡§ø‡§ü‡§∞‡•Ä ‡§Æ‡•á‡§Ç PR ‡§∏‡§¨‡§Æ‡§ø‡§ü ‡§ï‡§∞‡•á‡§Ç‡•§

</details>
{% endhint %}

## ‡§¨‡§ï‡•á‡§ü‡•ç‡§∏ ‡§µ‡§ø‡§∂‡•á‡§∑‡§æ‡§ß‡§ø‡§ï‡§æ‡§∞ ‡§µ‡•É‡§¶‡•ç‡§ß‡§ø

‡§Ø‡§¶‡§ø ‡§¨‡§ï‡•á‡§ü ‡§®‡•Ä‡§§‡§ø ‡§®‡•á ‚ÄúallUsers‚Äù ‡§Ø‡§æ ‚ÄúallAuthenticatedUsers‚Äù ‡§ï‡•ã **‡§â‡§®‡§ï‡•Ä ‡§¨‡§ï‡•á‡§ü ‡§®‡•Ä‡§§‡§ø ‡§Æ‡•á‡§Ç ‡§≤‡§ø‡§ñ‡§®‡•á** (**storage.buckets.setIamPolicy** ‡§Ö‡§®‡•Å‡§Æ‡§§‡§ø)** ‡§ï‡•Ä ‡§Ö‡§®‡•Å‡§Æ‡§§‡§ø ‡§¶‡•Ä,** ‡§§‡•ã ‡§ï‡•ã‡§à ‡§≠‡•Ä ‡§¨‡§ï‡•á‡§ü ‡§®‡•Ä‡§§‡§ø ‡§ï‡•ã ‡§∏‡§Ç‡§∂‡•ã‡§ß‡§ø‡§§ ‡§ï‡§∞ ‡§∏‡§ï‡§§‡§æ ‡§π‡•à ‡§î‡§∞ ‡§ñ‡•Å‡§¶ ‡§ï‡•ã ‡§™‡•Ç‡§∞‡•ç‡§£ ‡§™‡§π‡•Å‡§Ç‡§ö ‡§¶‡•á ‡§∏‡§ï‡§§‡§æ ‡§π‡•à‡•§

### ‡§Ö‡§®‡•Å‡§Æ‡§§‡§ø‡§Ø‡•ã‡§Ç ‡§ï‡•Ä ‡§ú‡§æ‡§Ç‡§ö ‡§ï‡§∞‡•á‡§Ç

‡§¨‡§ï‡•á‡§ü ‡§™‡§∞ ‡§Ö‡§®‡•Å‡§Æ‡§§‡§ø‡§Ø‡•ã‡§Ç ‡§ï‡•Ä ‡§ú‡§æ‡§Ç‡§ö ‡§ï‡§∞‡§®‡•á ‡§ï‡•á 2 ‡§§‡§∞‡•Ä‡§ï‡•á ‡§π‡•à‡§Ç‡•§ ‡§™‡§π‡§≤‡§æ ‡§§‡§∞‡•Ä‡§ï‡§æ ‡§π‡•à `https://www.googleapis.com/storage/v1/b/BUCKET_NAME/iam` ‡§™‡§∞ ‡§Ö‡§®‡•Å‡§∞‡•ã‡§ß ‡§ï‡§∞‡§ï‡•á ‡§â‡§®‡•ç‡§π‡•á‡§Ç ‡§Æ‡§æ‡§Ç‡§ó‡§®‡§æ ‡§Ø‡§æ `gsutil iam get gs://BUCKET_NAME` ‡§ö‡§≤‡§æ‡§®‡§æ‡•§

‡§π‡§æ‡§≤‡§æ‡§Ç‡§ï‡§ø, ‡§Ø‡§¶‡§ø ‡§Ü‡§™‡§ï‡•á ‡§â‡§™‡§Ø‡•ã‡§ó‡§ï‡§∞‡•ç‡§§‡§æ (‡§∏‡§Ç‡§≠‡§µ‡§§‡§É allUsers ‡§Ø‡§æ allAuthenticatedUsers ‡§∏‡•á ‡§∏‡§Ç‡§¨‡§Ç‡§ß‡§ø‡§§) ‡§ï‡•á ‡§™‡§æ‡§∏ ‡§¨‡§ï‡•á‡§ü ‡§ï‡•Ä iam ‡§®‡•Ä‡§§‡§ø (storage.buckets.getIamPolicy) ‡§ï‡•ã ‡§™‡§¢‡§º‡§®‡•á ‡§ï‡•Ä ‡§Ö‡§®‡•Å‡§Æ‡§§‡§ø ‡§®‡§π‡•Ä‡§Ç ‡§π‡•à, ‡§§‡•ã ‡§Ø‡§π ‡§ï‡§æ‡§Æ ‡§®‡§π‡•Ä‡§Ç ‡§ï‡§∞‡•á‡§ó‡§æ‡•§

‡§¶‡•Ç‡§∏‡§∞‡§æ ‡§µ‡§ø‡§ï‡§≤‡•ç‡§™ ‡§ú‡•ã ‡§π‡§Æ‡•á‡§∂‡§æ ‡§ï‡§æ‡§Æ ‡§ï‡§∞‡•á‡§ó‡§æ ‡§µ‡§π ‡§π‡•à ‡§¨‡§ï‡•á‡§ü ‡§ï‡•á testPermissions ‡§è‡§Ç‡§°‡§™‡•â‡§á‡§Ç‡§ü ‡§ï‡§æ ‡§â‡§™‡§Ø‡•ã‡§ó ‡§ï‡§∞‡§®‡§æ ‡§Ø‡§π ‡§™‡§§‡§æ ‡§≤‡§ó‡§æ‡§®‡•á ‡§ï‡•á ‡§≤‡§ø‡§è ‡§ï‡§ø ‡§ï‡•ç‡§Ø‡§æ ‡§Ü‡§™‡§ï‡•á ‡§™‡§æ‡§∏ ‡§®‡§ø‡§∞‡•ç‡§¶‡§ø‡§∑‡•ç‡§ü ‡§Ö‡§®‡•Å‡§Æ‡§§‡§ø ‡§π‡•à, ‡§â‡§¶‡§æ‡§π‡§∞‡§£ ‡§ï‡•á ‡§≤‡§ø‡§è: `https://www.googleapis.com/storage/v1/b/BUCKET_NAME/iam/testPermissions?permissions=storage.buckets.delete&permissions=storage.buckets.get&permissions=storage.buckets.getIamPolicy&permissions=storage.buckets.setIamPolicy&permissions=storage.buckets.update&permissions=storage.objects.create&permissions=storage.objects.delete&permissions=storage.objects.get&permissions=storage.objects.list&permissions=storage.objects.update`

### ‡§µ‡•É‡§¶‡•ç‡§ß‡§ø ‡§ï‡§∞‡§®‡§æ

`Storage Admin` ‡§ï‡•ã `allAuthenticatedUsers` ‡§¶‡•á‡§®‡•á ‡§ï‡•á ‡§≤‡§ø‡§è, ‡§á‡§∏‡•á ‡§ö‡§≤‡§æ‡§®‡§æ ‡§∏‡§Ç‡§≠‡§µ ‡§π‡•à:
```bash
gsutil iam ch allAuthenticatedUsers:admin gs://BUCKET_NAME
```
‡§è‡§ï ‡§î‡§∞ ‡§π‡§Æ‡§≤‡§æ ‡§π‡•ã‡§ó‡§æ **‡§¨‡§ï‡•á‡§ü ‡§ï‡•ã ‡§π‡§ü‡§æ‡§®‡§æ ‡§î‡§∞ ‡§á‡§∏‡•á ‡§Ö‡§™‡§®‡•á ‡§ñ‡§æ‡§§‡•á ‡§Æ‡•á‡§Ç ‡§´‡§ø‡§∞ ‡§∏‡•á ‡§¨‡§®‡§æ‡§®‡§æ ‡§§‡§æ‡§ï‡§ø ‡§∏‡•ç‡§µ‡§æ‡§Æ‡§ø‡§§‡•ç‡§µ ‡§ö‡•Å‡§∞‡§æ‡§Ø‡§æ ‡§ú‡§æ ‡§∏‡§ï‡•á**‡•§

## ‡§∏‡§Ç‡§¶‡§∞‡•ç‡§≠

* [https://rhinosecuritylabs.com/gcp/google-cloud-platform-gcp-bucket-enumeration/](https://rhinosecuritylabs.com/gcp/google-cloud-platform-gcp-bucket-enumeration/)

{% hint style="success" %}
Learn & practice AWS Hacking:<img src="../../../../.gitbook/assets/image (1) (1) (1).png" alt="" data-size="line">[**HackTricks Training AWS Red Team Expert (ARTE)**](https://training.hacktricks.xyz/courses/arte)<img src="../../../../.gitbook/assets/image (1) (1) (1).png" alt="" data-size="line">\
Learn & practice GCP Hacking: <img src="../../../../.gitbook/assets/image (2).png" alt="" data-size="line">[**HackTricks Training GCP Red Team Expert (GRTE)**<img src="../../../../.gitbook/assets/image (2).png" alt="" data-size="line">](https://training.hacktricks.xyz/courses/grte)

<details>

<summary>Support HackTricks</summary>

* Check the [**subscription plans**](https://github.com/sponsors/carlospolop)!
* **Join the** üí¨ [**Discord group**](https://discord.gg/hRep4RUj7f) or the [**telegram group**](https://t.me/peass) or **follow** us on **Twitter** üê¶ [**@hacktricks\_live**](https://twitter.com/hacktricks_live)**.**
* **Share hacking tricks by submitting PRs to the** [**HackTricks**](https://github.com/carlospolop/hacktricks) and [**HackTricks Cloud**](https://github.com/carlospolop/hacktricks-cloud) github repos.

</details>
{% endhint %}
