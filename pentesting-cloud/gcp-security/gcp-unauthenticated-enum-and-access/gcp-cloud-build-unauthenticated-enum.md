# GCP - Cloud Build Unauthenticated Enum

{% hint style="success" %}
Leer & oefen AWS Hacking:<img src="../../../.gitbook/assets/image (1) (1).png" alt="" data-size="line">[**HackTricks Training AWS Red Team Expert (ARTE)**](https://training.hacktricks.xyz/courses/arte)<img src="../../../.gitbook/assets/image (1) (1).png" alt="" data-size="line">\
Leer & oefen GCP Hacking: <img src="../../../.gitbook/assets/image (2).png" alt="" data-size="line">[**HackTricks Training GCP Red Team Expert (GRTE)**<img src="../../../.gitbook/assets/image (2).png" alt="" data-size="line">](https://training.hacktricks.xyz/courses/grte)

<details>

<summary>Ondersteun HackTricks</summary>

* Kyk na die [**subskripsie planne**](https://github.com/sponsors/carlospolop)!
* **Sluit aan by die** üí¨ [**Discord groep**](https://discord.gg/hRep4RUj7f) of die [**telegram groep**](https://t.me/peass) of **volg** ons op **Twitter** üê¶ [**@hacktricks\_live**](https://twitter.com/hacktricks\_live)**.**
* **Deel hacking truuks deur PRs in te dien na die** [**HackTricks**](https://github.com/carlospolop/hacktricks) en [**HackTricks Cloud**](https://github.com/carlospolop/hacktricks-cloud) github repos.

</details>
{% endhint %}

## Cloud Build

Vir meer inligting oor Cloud Build kyk:

{% content-ref url="../gcp-services/gcp-cloud-build-enum.md" %}
[gcp-cloud-build-enum.md](../gcp-services/gcp-cloud-build-enum.md)
{% endcontent-ref %}

### cloudbuild.yml

As jy skrywe toegang oor 'n repository wat 'n l√™er genaamd **`cloudbuild.yml`** bevat, kan jy hierdie l√™er **backdoor**, wat die **opdragte spesifiseer wat binne 'n Cloud Build uitgevoer gaan word** en die geheime inligting uit te haal, wat gedoen word te kompromitteer en ook die **Cloud Build diensrekening te kompromitteer.**

{% hint style="info" %}
Let daarop dat GCP die opsie het om administrateurs toe te laat om die uitvoering van bou stelsels vanaf eksterne PRs te beheer via "Comment Control". Comment Control is 'n kenmerk waar samewerkers/projek eienaars **moet kommentaar lewer ‚Äú/gcbrun‚Äù om die bou te aktiveer** teen die PR en deur hierdie kenmerk te gebruik, voorkom dit inherent dat enigiemand op die internet jou bou stelsels kan aktiveer.
{% endhint %}

Vir sommige verwante inligting kan jy die bladsy oor hoe om Github Actions aan te val (soortgelyk aan hierdie) kyk:

{% content-ref url="../../../pentesting-ci-cd/github-security/abusing-github-actions/" %}
[abusing-github-actions](../../../pentesting-ci-cd/github-security/abusing-github-actions/)
{% endcontent-ref %}

### PR Goedkeuringe

Wanneer die trigger PR is omdat **enigiemand PRs na openbare repositories kan uitvoer** sal dit baie gevaarlik wees om net **die uitvoering van die trigger met enige PR toe te laat**. Daarom sal die uitvoering standaard slegs **outomaties wees vir eienaars en samewerkers**, en om die trigger met ander gebruikers se PRs uit te voer, moet 'n eienaar of samewerker kommentaar lewer `/gcbrun`.

<figure><img src="../../../.gitbook/assets/image (339).png" alt="" width="563"><figcaption></figcaption></figure>

{% hint style="danger" %}
As dit dus op **`Not required`** gestel is, kan 'n aanvaller 'n **PR na die tak** uitvoer wat die uitvoering sal aktiveer deur die kwaadwillige kode uitvoering by die **`cloudbuild.yml`** l√™er te voeg en die cloudbuild uitvoering te kompromitteer (let daarop dat cloudbuild die kode VAN die PR sal aflaai, so dit sal die kwaadwillige **`cloudbuild.yml`** uitvoer).
{% endhint %}

Boonop is dit maklik om te sien of 'n cloudbuild uitvoering uitgevoer moet word wanneer jy 'n PR stuur omdat dit in Github verskyn:

<figure><img src="../../../.gitbook/assets/image (340).png" alt=""><figcaption></figcaption></figure>

{% hint style="warning" %}
Dan, selfs al word die cloudbuild nie uitgevoer nie, sal die aanvaller in staat wees om die **projeknaam van 'n GCP projek** wat aan die maatskappy behoort, te sien.
{% endhint %}

{% hint style="success" %}
Leer & oefen AWS Hacking:<img src="../../../.gitbook/assets/image (1) (1).png" alt="" data-size="line">[**HackTricks Training AWS Red Team Expert (ARTE)**](https://training.hacktricks.xyz/courses/arte)<img src="../../../.gitbook/assets/image (1) (1).png" alt="" data-size="line">\
Leer & oefen GCP Hacking: <img src="../../../.gitbook/assets/image (2).png" alt="" data-size="line">[**HackTricks Training GCP Red Team Expert (GRTE)**<img src="../../../.gitbook/assets/image (2).png" alt="" data-size="line">](https://training.hacktricks.xyz/courses/grte)

<details>

<summary>Ondersteun HackTricks</summary>

* Kyk na die [**subskripsie planne**](https://github.com/sponsors/carlospolop)!
* **Sluit aan by die** üí¨ [**Discord groep**](https://discord.gg/hRep4RUj7f) of die [**telegram groep**](https://t.me/peass) of **volg** ons op **Twitter** üê¶ [**@hacktricks\_live**](https://twitter.com/hacktricks\_live)**.**
* **Deel hacking truuks deur PRs in te dien na die** [**HackTricks**](https://github.com/carlospolop/hacktricks) en [**HackTricks Cloud**](https://github.com/carlospolop/hacktricks-cloud) github repos.

</details>
{% endhint %}
