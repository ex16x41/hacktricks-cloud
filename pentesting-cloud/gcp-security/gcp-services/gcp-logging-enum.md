# GCP - Logging Enum

{% hint style="success" %}
Learn & practice AWS Hacking:<img src="../../../.gitbook/assets/image (1).png" alt="" data-size="line">[**HackTricks Training AWS Red Team Expert (ARTE)**](https://training.hacktricks.xyz/courses/arte)<img src="../../../.gitbook/assets/image (1).png" alt="" data-size="line">\
Learn & practice GCP Hacking: <img src="../../../.gitbook/assets/image (2).png" alt="" data-size="line">[**HackTricks Training GCP Red Team Expert (GRTE)**<img src="../../../.gitbook/assets/image (2).png" alt="" data-size="line">](https://training.hacktricks.xyz/courses/grte)

<details>

<summary>Support HackTricks</summary>

* Check the [**subscription plans**](https://github.com/sponsors/carlospolop)!
* **Join the** üí¨ [**Discord group**](https://discord.gg/hRep4RUj7f) or the [**telegram group**](https://t.me/peass) or **follow** us on **Twitter** üê¶ [**@hacktricks\_live**](https://twitter.com/hacktricks\_live)**.**
* **Share hacking tricks by submitting PRs to the** [**HackTricks**](https://github.com/carlospolop/hacktricks) and [**HackTricks Cloud**](https://github.com/carlospolop/hacktricks-cloud) github repos.

</details>
{% endhint %}

## Basic Information

‡§Ø‡§π ‡§∏‡•á‡§µ‡§æ ‡§â‡§™‡§Ø‡•ã‡§ó‡§ï‡§∞‡•ç‡§§‡§æ‡§ì‡§Ç ‡§ï‡•ã GCP ‡§∏‡•á **‡§≤‡•â‡§ó ‡§°‡•á‡§ü‡§æ ‡§î‡§∞ ‡§ò‡§ü‡§®‡§æ‡§ì‡§Ç** ‡§ï‡•ã ‡§∏‡•ç‡§ü‡•ã‡§∞, ‡§∏‡§∞‡•ç‡§ö, ‡§è‡§®‡§æ‡§≤‡§æ‡§á‡§ú, ‡§Æ‡•â‡§®‡§ø‡§ü‡§∞ ‡§î‡§∞ ‡§Ö‡§≤‡§∞‡•ç‡§ü ‡§ï‡§∞‡§®‡•á ‡§ï‡•Ä ‡§Ö‡§®‡•Å‡§Æ‡§§‡§ø ‡§¶‡•á‡§§‡•Ä ‡§π‡•à‡•§

Cloud Logging ‡§Ö‡§®‡•ç‡§Ø GCP ‡§∏‡•á‡§µ‡§æ‡§ì‡§Ç ‡§ï‡•á ‡§∏‡§æ‡§• ‡§™‡•Ç‡§∞‡•Ä ‡§§‡§∞‡§π ‡§∏‡•á ‡§è‡§ï‡•Ä‡§ï‡•É‡§§ ‡§π‡•à, ‡§ú‡•ã ‡§Ü‡§™‡§ï‡•á ‡§∏‡§≠‡•Ä GCP ‡§∏‡§Ç‡§∏‡§æ‡§ß‡§®‡•ã‡§Ç ‡§∏‡•á ‡§≤‡•â‡§ó ‡§ï‡•á ‡§≤‡§ø‡§è ‡§è‡§ï ‡§ï‡•á‡§Ç‡§¶‡•ç‡§∞‡•Ä‡§ï‡•É‡§§ ‡§≠‡§Ç‡§°‡§æ‡§∞ ‡§™‡•ç‡§∞‡§¶‡§æ‡§® ‡§ï‡§∞‡§§‡§æ ‡§π‡•à‡•§ ‡§Ø‡§π **‡§∏‡•ç‡§µ‡§ö‡§æ‡§≤‡§ø‡§§ ‡§∞‡•Ç‡§™ ‡§∏‡•á ‡§µ‡§ø‡§≠‡§ø‡§®‡•ç‡§® GCP ‡§∏‡•á‡§µ‡§æ‡§ì‡§Ç** ‡§ú‡•à‡§∏‡•á App Engine, Compute Engine, ‡§î‡§∞ Cloud Functions ‡§∏‡•á ‡§≤‡•â‡§ó ‡§è‡§ï‡§§‡•ç‡§∞ ‡§ï‡§∞‡§§‡§æ ‡§π‡•à‡•§ ‡§Ü‡§™ Cloud Logging ‡§ï‡§æ ‡§â‡§™‡§Ø‡•ã‡§ó ‡§ë‡§®-‡§™‡•ç‡§∞‡§ø‡§Æ‡§æ‡§á‡§∏‡•á‡§∏ ‡§Ø‡§æ ‡§Ö‡§®‡•ç‡§Ø ‡§ï‡•ç‡§≤‡§æ‡§â‡§° ‡§Æ‡•á‡§Ç ‡§ö‡§≤ ‡§∞‡§π‡•á ‡§Ö‡§®‡•Å‡§™‡•ç‡§∞‡§Ø‡•ã‡§ó‡•ã‡§Ç ‡§ï‡•á ‡§≤‡§ø‡§è ‡§≠‡•Ä ‡§ï‡§∞ ‡§∏‡§ï‡§§‡•á ‡§π‡•à‡§Ç, Cloud Logging ‡§è‡§ú‡•á‡§Ç‡§ü ‡§Ø‡§æ API ‡§ï‡§æ ‡§â‡§™‡§Ø‡•ã‡§ó ‡§ï‡§∞‡§ï‡•á‡•§

Key Features:

* **‡§≤‡•â‡§ó ‡§°‡•á‡§ü‡§æ ‡§ï‡•á‡§Ç‡§¶‡•ç‡§∞‡•Ä‡§ï‡§∞‡§£:** ‡§µ‡§ø‡§≠‡§ø‡§®‡•ç‡§® ‡§∏‡•ç‡§∞‡•ã‡§§‡•ã‡§Ç ‡§∏‡•á ‡§≤‡•â‡§ó ‡§°‡•á‡§ü‡§æ ‡§ï‡•ã ‡§è‡§ï‡§§‡•ç‡§∞‡§ø‡§§ ‡§ï‡§∞‡•á‡§Ç, ‡§Ü‡§™‡§ï‡•á ‡§Ö‡§®‡•Å‡§™‡•ç‡§∞‡§Ø‡•ã‡§ó‡•ã‡§Ç ‡§î‡§∞ ‡§¨‡•Å‡§®‡§ø‡§Ø‡§æ‡§¶‡•Ä ‡§¢‡§æ‡§Ç‡§ö‡•á ‡§ï‡§æ ‡§∏‡§Æ‡§ó‡•ç‡§∞ ‡§¶‡•É‡§∂‡•ç‡§Ø ‡§™‡•ç‡§∞‡§¶‡§æ‡§® ‡§ï‡§∞‡§§‡•á ‡§π‡•Å‡§è‡•§
* **‡§µ‡§æ‡§∏‡•ç‡§§‡§µ‡§ø‡§ï ‡§∏‡§Æ‡§Ø ‡§≤‡•â‡§ó ‡§™‡•ç‡§∞‡§¨‡§Ç‡§ß‡§®:** ‡§§‡§æ‡§§‡•ç‡§ï‡§æ‡§≤‡§ø‡§ï ‡§µ‡§ø‡§∂‡•ç‡§≤‡•á‡§∑‡§£ ‡§î‡§∞ ‡§™‡•ç‡§∞‡§§‡§ø‡§ï‡•ç‡§∞‡§ø‡§Ø‡§æ ‡§ï‡•á ‡§≤‡§ø‡§è ‡§µ‡§æ‡§∏‡•ç‡§§‡§µ‡§ø‡§ï ‡§∏‡§Æ‡§Ø ‡§Æ‡•á‡§Ç ‡§≤‡•â‡§ó ‡§∏‡•ç‡§ü‡•ç‡§∞‡•Ä‡§Æ ‡§ï‡§∞‡•á‡§Ç‡•§
* **‡§∂‡§ï‡•ç‡§§‡§ø‡§∂‡§æ‡§≤‡•Ä ‡§°‡•á‡§ü‡§æ ‡§µ‡§ø‡§∂‡•ç‡§≤‡•á‡§∑‡§£:** ‡§¨‡§°‡§º‡•á ‡§Æ‡§æ‡§§‡•ç‡§∞‡§æ ‡§ï‡•á ‡§≤‡•â‡§ó ‡§°‡•á‡§ü‡§æ ‡§ï‡•ã ‡§§‡•á‡§ú‡•Ä ‡§∏‡•á ‡§õ‡§æ‡§®‡§®‡•á ‡§ï‡•á ‡§≤‡§ø‡§è ‡§â‡§®‡•ç‡§®‡§§ ‡§´‡§º‡§ø‡§≤‡•ç‡§ü‡§∞‡§ø‡§Ç‡§ó ‡§î‡§∞ ‡§ñ‡•ã‡§ú ‡§ï‡•ç‡§∑‡§Æ‡§§‡§æ‡§ì‡§Ç ‡§ï‡§æ ‡§â‡§™‡§Ø‡•ã‡§ó ‡§ï‡§∞‡•á‡§Ç‡•§
* **BigQuery ‡§ï‡•á ‡§∏‡§æ‡§• ‡§è‡§ï‡•Ä‡§ï‡§∞‡§£:** ‡§µ‡§ø‡§∏‡•ç‡§§‡•É‡§§ ‡§µ‡§ø‡§∂‡•ç‡§≤‡•á‡§∑‡§£ ‡§î‡§∞ ‡§ï‡•ç‡§µ‡•á‡§∞‡•Ä ‡§ï‡•á ‡§≤‡§ø‡§è ‡§≤‡•â‡§ó ‡§ï‡•ã BigQuery ‡§Æ‡•á‡§Ç ‡§®‡§ø‡§∞‡•ç‡§Ø‡§æ‡§§ ‡§ï‡§∞‡•á‡§Ç‡•§
* **‡§≤‡•â‡§ó-‡§Ü‡§ß‡§æ‡§∞‡§ø‡§§ ‡§Æ‡•à‡§ü‡•ç‡§∞‡§ø‡§ï‡•ç‡§∏:** ‡§®‡§ø‡§ó‡§∞‡§æ‡§®‡•Ä ‡§î‡§∞ ‡§Ö‡§≤‡§∞‡•ç‡§ü‡§ø‡§Ç‡§ó ‡§ï‡•á ‡§≤‡§ø‡§è ‡§Ö‡§™‡§®‡•á ‡§≤‡•â‡§ó ‡§°‡•á‡§ü‡§æ ‡§∏‡•á ‡§ï‡§∏‡•ç‡§ü‡§Æ ‡§Æ‡•à‡§ü‡•ç‡§∞‡§ø‡§ï‡•ç‡§∏ ‡§¨‡§®‡§æ‡§è‡§Ç‡•§

### Logs flow

<figure><img src="../../../.gitbook/assets/image (3) (1).png" alt=""><figcaption><p><a href="https://betterstack.com/community/guides/logging/gcp-logging/">https://betterstack.com/community/guides/logging/gcp-logging/</a></p></figcaption></figure>

‡§¨‡•Å‡§®‡§ø‡§Ø‡§æ‡§¶‡•Ä ‡§∞‡•Ç‡§™ ‡§∏‡•á, ‡§∏‡§ø‡§Ç‡§ï‡•ç‡§∏ ‡§î‡§∞ ‡§≤‡•â‡§ó ‡§Ü‡§ß‡§æ‡§∞‡§ø‡§§ ‡§Æ‡•à‡§ü‡•ç‡§∞‡§ø‡§ï‡•ç‡§∏ ‡§Ø‡§π ‡§®‡§ø‡§∞‡•ç‡§ß‡§æ‡§∞‡§ø‡§§ ‡§ï‡§∞‡•á‡§Ç‡§ó‡•á ‡§ï‡§ø ‡§≤‡•â‡§ó ‡§ï‡•ã ‡§ï‡§π‡§æ‡§Å ‡§∏‡•ç‡§ü‡•ã‡§∞ ‡§ï‡§ø‡§Ø‡§æ ‡§ú‡§æ‡§®‡§æ ‡§ö‡§æ‡§π‡§ø‡§è‡•§

### Configurations Supported by GCP Logging

Cloud Logging ‡§µ‡§ø‡§≠‡§ø‡§®‡•ç‡§® ‡§∏‡§Ç‡§ö‡§æ‡§≤‡§® ‡§Ü‡§µ‡§∂‡•ç‡§Ø‡§ï‡§§‡§æ‡§ì‡§Ç ‡§ï‡•á ‡§Ö‡§®‡•Å‡§∏‡§æ‡§∞ ‡§Ö‡§§‡•ç‡§Ø‡§ß‡§ø‡§ï ‡§ï‡•â‡§®‡•ç‡§´‡§º‡§ø‡§ó‡§∞ ‡§ï‡§∞‡§®‡•á ‡§Ø‡•ã‡§ó‡•ç‡§Ø ‡§π‡•à:

1. **‡§≤‡•â‡§ó ‡§¨‡§ï‡•á‡§ü‡•ç‡§∏ (‡§µ‡•á‡§¨ ‡§Æ‡•á‡§Ç ‡§≤‡•â‡§ó ‡§∏‡•ç‡§ü‡•ã‡§∞‡•á‡§ú):** Cloud Logging ‡§Æ‡•á‡§Ç ‡§¨‡§ï‡•á‡§ü‡•ç‡§∏ ‡§ï‡•ã ‡§™‡§∞‡§ø‡§≠‡§æ‡§∑‡§ø‡§§ ‡§ï‡§∞‡•á‡§Ç ‡§§‡§æ‡§ï‡§ø **‡§≤‡•â‡§ó ‡§∞‡§ø‡§ü‡•á‡§Ç‡§∂‡§®** ‡§ï‡§æ ‡§™‡•ç‡§∞‡§¨‡§Ç‡§ß‡§® ‡§ï‡§ø‡§Ø‡§æ ‡§ú‡§æ ‡§∏‡§ï‡•á, ‡§Ø‡§π ‡§®‡§ø‡§Ø‡§Ç‡§§‡•ç‡§∞‡§ø‡§§ ‡§ï‡§∞‡§§‡•á ‡§π‡•Å‡§è ‡§ï‡§ø ‡§Ü‡§™‡§ï‡•á ‡§≤‡•â‡§ó ‡§™‡•ç‡§∞‡§µ‡§ø‡§∑‡•ç‡§ü‡§ø‡§Ø‡§æ‡§Å ‡§ï‡§ø‡§§‡§®‡•Ä ‡§¶‡•á‡§∞ ‡§§‡§ï ‡§∞‡§ñ‡•Ä ‡§ú‡§æ‡§§‡•Ä ‡§π‡•à‡§Ç‡•§
* ‡§°‡§ø‡§´‡§º‡•â‡§≤‡•ç‡§ü ‡§∞‡•Ç‡§™ ‡§∏‡•á ‡§¨‡§ï‡•á‡§ü‡•ç‡§∏ `_Default` ‡§î‡§∞ `_Required` ‡§¨‡§®‡§æ‡§è ‡§ú‡§æ‡§§‡•á ‡§π‡•à‡§Ç (‡§è‡§ï ‡§µ‡§π ‡§≤‡•â‡§ó ‡§ï‡§∞ ‡§∞‡§π‡§æ ‡§π‡•à ‡§ú‡•ã ‡§¶‡•Ç‡§∏‡§∞‡§æ ‡§®‡§π‡•Ä‡§Ç ‡§ï‡§∞ ‡§∞‡§π‡§æ)‡•§
* **\_Required** ‡§π‡•à:

{% code overflow="wrap" %}
````
```bash
LOG_ID("cloudaudit.googleapis.com/activity") OR LOG_ID("externalaudit.googleapis.com/activity") OR LOG_ID("cloudaudit.googleapis.com/system_event") OR LOG_ID("externalaudit.googleapis.com/system_event") OR LOG_ID("cloudaudit.googleapis.com/access_transparency") OR LOG_ID("externalaudit.googleapis.com/access_transparency")
```

````
{% endcode %}

* ‡§°‡•á‡§ü‡§æ ‡§ï‡§æ **‡§∞‡§ñ‡§∞‡§ñ‡§æ‡§µ ‡§Ö‡§µ‡§ß‡§ø** ‡§™‡•ç‡§∞‡§§‡§ø ‡§¨‡§ï‡•á‡§ü ‡§ï‡•â‡§®‡•ç‡§´‡§º‡§ø‡§ó‡§∞ ‡§ï‡§ø‡§Ø‡§æ ‡§ó‡§Ø‡§æ ‡§π‡•à ‡§î‡§∞ ‡§Ø‡§π **‡§ï‡§Æ ‡§∏‡•á ‡§ï‡§Æ 1 ‡§¶‡§ø‡§®** ‡§π‡•ã‡§®‡§æ ‡§ö‡§æ‡§π‡§ø‡§è‡•§ ‡§π‡§æ‡§≤‡§æ‡§Å‡§ï‡§ø, **\_Required ‡§ï‡•Ä ‡§∞‡§ñ‡§∞‡§ñ‡§æ‡§µ ‡§Ö‡§µ‡§ß‡§ø 400 ‡§¶‡§ø‡§® ‡§π‡•à** ‡§î‡§∞ ‡§á‡§∏‡•á ‡§∏‡§Ç‡§∂‡•ã‡§ß‡§ø‡§§ ‡§®‡§π‡•Ä‡§Ç ‡§ï‡§ø‡§Ø‡§æ ‡§ú‡§æ ‡§∏‡§ï‡§§‡§æ‡•§
* ‡§ß‡•ç‡§Ø‡§æ‡§® ‡§¶‡•á‡§Ç ‡§ï‡§ø ‡§≤‡•â‡§ó ‡§¨‡§ï‡•á‡§ü **‡§ï‡•ç‡§≤‡§æ‡§â‡§° ‡§∏‡•ç‡§ü‡•ã‡§∞‡•á‡§ú ‡§Æ‡•á‡§Ç ‡§¶‡§ø‡§ñ‡§æ‡§à ‡§®‡§π‡•Ä‡§Ç ‡§¶‡•á‡§§‡•á‡•§**

2. **‡§≤‡•â‡§ó ‡§∏‡§ø‡§Ç‡§ï‡•ç‡§∏ (‡§µ‡•á‡§¨ ‡§Æ‡•á‡§Ç ‡§≤‡•â‡§ó ‡§∞‡§æ‡§â‡§ü‡§∞):** ‡§µ‡§ø‡§≠‡§ø‡§®‡•ç‡§® ‡§ó‡§Ç‡§§‡§µ‡•ç‡§Ø‡•ã‡§Ç ‡§ú‡•à‡§∏‡•á Pub/Sub, BigQuery, ‡§Ø‡§æ Cloud Storage ‡§Æ‡•á‡§Ç ‡§≤‡•â‡§ó ‡§™‡•ç‡§∞‡§µ‡§ø‡§∑‡•ç‡§ü‡§ø‡§Ø‡•ã‡§Ç ‡§ï‡•ã **‡§®‡§ø‡§∞‡•ç‡§Ø‡§æ‡§§ ‡§ï‡§∞‡§®‡•á ‡§ï‡•á ‡§≤‡§ø‡§è ‡§∏‡§ø‡§Ç‡§ï‡•ç‡§∏ ‡§¨‡§®‡§æ‡§è‡§Ç** ‡§ú‡•ã ‡§è‡§ï **‡§´‡§ø‡§≤‡•ç‡§ü‡§∞** ‡§ï‡•á ‡§Ü‡§ß‡§æ‡§∞ ‡§™‡§∞ ‡§π‡•à‡§Ç‡•§
* **‡§°‡§ø‡§´‡§º‡•â‡§≤‡•ç‡§ü** ‡§ï‡•á ‡§∞‡•Ç‡§™ ‡§Æ‡•á‡§Ç ‡§¨‡§ï‡•á‡§ü ‡§ï‡•á ‡§≤‡§ø‡§è ‡§∏‡§ø‡§Ç‡§ï‡•ç‡§∏ `_Default` ‡§î‡§∞ `_Required` ‡§¨‡§®‡§æ‡§è ‡§ú‡§æ‡§§‡•á ‡§π‡•à‡§Ç:
* ```bash
_Required  logging.googleapis.com/projects/<proj-name>/locations/global/buckets/_Required  LOG_ID("cloudaudit.googleapis.com/activity") OR LOG_ID("externalaudit.googleapis.com/activity") OR LOG_ID("cloudaudit.googleapis.com/system_event") OR LOG_ID("externalaudit.googleapis.com/system_event") OR LOG_ID("cloudaudit.googleapis.com/access_transparency") OR LOG_ID("externalaudit.googleapis.com/access_transparency")
_Default   logging.googleapis.com/projects/<proj-name>/locations/global/buckets/_Default   NOT LOG_ID("cloudaudit.googleapis.com/activity") AND NOT LOG_ID("externalaudit.googleapis.com/activity") AND NOT LOG_ID("cloudaudit.googleapis.com/system_event") AND NOT LOG_ID("externalaudit.googleapis.com/system_event") AND NOT LOG_ID("cloudaudit.googleapis.com/access_transparency") AND NOT LOG_ID("externalaudit.googleapis.com/access_transparency")
```
* **‡§¨‡§π‡§ø‡§∑‡•ç‡§ï‡§∞‡§£ ‡§´‡§º‡§ø‡§≤‡•ç‡§ü‡§∞:** ‡§Ø‡§π ‡§∏‡§Ç‡§≠‡§µ ‡§π‡•à ‡§ï‡§ø **‡§µ‡§ø‡§∂‡§ø‡§∑‡•ç‡§ü ‡§≤‡•â‡§ó ‡§™‡•ç‡§∞‡§µ‡§ø‡§∑‡•ç‡§ü‡§ø‡§Ø‡•ã‡§Ç ‡§ï‡•ã ‡§∞‡•ã‡§ï‡§®‡•á ‡§ï‡•á ‡§≤‡§ø‡§è ‡§¨‡§π‡§ø‡§∑‡•ç‡§ï‡§∞‡§£ ‡§∏‡•á‡§ü ‡§ï‡§∞‡•á‡§Ç**, ‡§≤‡§æ‡§ó‡§§ ‡§¨‡§ö‡§æ‡§®‡•á ‡§î‡§∞ ‡§Ö‡§®‡§æ‡§µ‡§∂‡•ç‡§Ø‡§ï ‡§∂‡•ã‡§∞ ‡§ï‡•ã ‡§ï‡§Æ ‡§ï‡§∞‡§®‡•á ‡§ï‡•á ‡§≤‡§ø‡§è‡•§
3. **‡§≤‡•â‡§ó-‡§Ü‡§ß‡§æ‡§∞‡§ø‡§§ ‡§Æ‡•à‡§ü‡•ç‡§∞‡§ø‡§ï‡•ç‡§∏:** ‡§≤‡•â‡§ó ‡§ï‡•á ‡§∏‡§æ‡§Æ‡§ó‡•ç‡§∞‡•Ä ‡§ï‡•á ‡§Ü‡§ß‡§æ‡§∞ ‡§™‡§∞ **‡§ï‡§∏‡•ç‡§ü‡§Æ ‡§Æ‡•à‡§ü‡•ç‡§∞‡§ø‡§ï‡•ç‡§∏** ‡§ï‡•â‡§®‡•ç‡§´‡§º‡§ø‡§ó‡§∞ ‡§ï‡§∞‡•á‡§Ç, ‡§ú‡•ã ‡§≤‡•â‡§ó ‡§°‡•á‡§ü‡§æ ‡§ï‡•á ‡§Ü‡§ß‡§æ‡§∞ ‡§™‡§∞ ‡§Ö‡§≤‡§∞‡•ç‡§ü‡§ø‡§Ç‡§ó ‡§î‡§∞ ‡§®‡§ø‡§ó‡§∞‡§æ‡§®‡•Ä ‡§ï‡•Ä ‡§Ö‡§®‡•Å‡§Æ‡§§‡§ø ‡§¶‡•á‡§§‡§æ ‡§π‡•à‡•§
4. **‡§≤‡•â‡§ó ‡§¶‡•É‡§∂‡•ç‡§Ø:** ‡§≤‡•â‡§ó ‡§¶‡•É‡§∂‡•ç‡§Ø ‡§Ü‡§™‡§ï‡•ã ‡§Ø‡§π **‡§®‡§ø‡§Ø‡§Ç‡§§‡•ç‡§∞‡§£ ‡§™‡•ç‡§∞‡§¶‡§æ‡§® ‡§ï‡§∞‡§§‡•á ‡§π‡•à‡§Ç ‡§ï‡§ø ‡§ï‡§ø‡§∏‡•á ‡§Ü‡§™‡§ï‡•á ‡§≤‡•â‡§ó ‡§¨‡§ï‡•á‡§ü ‡§Æ‡•á‡§Ç ‡§≤‡•â‡§ó ‡§§‡§ï ‡§™‡§π‡•Å‡§Ç‡§ö ‡§π‡•à‡•§**
* ‡§ï‡•ç‡§≤‡§æ‡§â‡§° ‡§≤‡•â‡§ó‡§ø‡§Ç‡§ó **‡§π‡§∞ ‡§¨‡§ï‡•á‡§ü ‡§ï‡•á ‡§≤‡§ø‡§è `_AllLogs` ‡§¶‡•É‡§∂‡•ç‡§Ø ‡§∏‡•ç‡§µ‡§ö‡§æ‡§≤‡§ø‡§§ ‡§∞‡•Ç‡§™ ‡§∏‡•á ‡§¨‡§®‡§æ‡§§‡§æ ‡§π‡•à**, ‡§ú‡•ã ‡§∏‡§≠‡•Ä ‡§≤‡•â‡§ó ‡§¶‡§ø‡§ñ‡§æ‡§§‡§æ ‡§π‡•à‡•§ ‡§ï‡•ç‡§≤‡§æ‡§â‡§° ‡§≤‡•â‡§ó‡§ø‡§Ç‡§ó `_Default` ‡§¨‡§ï‡•á‡§ü ‡§ï‡•á ‡§≤‡§ø‡§è `_Default` ‡§®‡§æ‡§Æ‡§ï ‡§è‡§ï ‡§¶‡•É‡§∂‡•ç‡§Ø ‡§≠‡•Ä ‡§¨‡§®‡§æ‡§§‡§æ ‡§π‡•à‡•§ `_Default` ‡§¨‡§ï‡•á‡§ü ‡§ï‡•á ‡§≤‡§ø‡§è `_Default` ‡§¶‡•É‡§∂‡•ç‡§Ø ‡§∏‡§≠‡•Ä ‡§≤‡•â‡§ó ‡§¶‡§ø‡§ñ‡§æ‡§§‡§æ ‡§π‡•à ‡§∏‡§ø‡§µ‡§æ‡§Ø ‡§°‡•á‡§ü‡§æ ‡§è‡§ï‡•ç‡§∏‡•á‡§∏ ‡§ë‡§°‡§ø‡§ü ‡§≤‡•â‡§ó ‡§ï‡•á‡•§ `_AllLogs` ‡§î‡§∞ `_Default` ‡§¶‡•É‡§∂‡•ç‡§Ø ‡§∏‡§Ç‡§™‡§æ‡§¶‡§ø‡§§ ‡§®‡§π‡•Ä‡§Ç ‡§ï‡§ø‡§è ‡§ú‡§æ ‡§∏‡§ï‡§§‡•á‡•§

‡§Ø‡§π ‡§∏‡§Ç‡§≠‡§µ ‡§π‡•à ‡§ï‡§ø ‡§è‡§ï ‡§™‡•ç‡§∞‡§ø‡§Ç‡§∏‡§ø‡§™‡§≤ ‡§ï‡•ã **‡§ï‡•á‡§µ‡§≤ ‡§è‡§ï ‡§µ‡§ø‡§∂‡§ø‡§∑‡•ç‡§ü ‡§≤‡•â‡§ó ‡§¶‡•É‡§∂‡•ç‡§Ø ‡§ï‡§æ ‡§â‡§™‡§Ø‡•ã‡§ó ‡§ï‡§∞‡§®‡•á ‡§ï‡•Ä ‡§Ö‡§®‡•Å‡§Æ‡§§‡§ø ‡§¶‡•á‡§Ç** ‡§è‡§ï IAM ‡§®‡•Ä‡§§‡§ø ‡§ï‡•á ‡§∏‡§æ‡§• ‡§ú‡•à‡§∏‡•á: 

{% code overflow="wrap" %}
```json
{
"bindings": [
{
"members": [
"user:username@gmail.com"
],
"role": "roles/logging.viewAccessor",
"condition": {
"title": "Bucket reader condition example",
"description": "Grants logging.viewAccessor role to user username@gmail.com for the VIEW_ID log view.",
"expression":
"resource.name == \"projects/PROJECT_ID/locations/LOCATION/buckets/BUCKET_NAME/views/VIEW_ID\""
}
}
],
"etag": "BwWd_6eERR4=",
"version": 3
}
```
{% endcode %}

### ‡§°‡§ø‡§´‡§º‡•â‡§≤‡•ç‡§ü ‡§≤‡•â‡§ó

‡§°‡§ø‡§´‡§º‡•â‡§≤‡•ç‡§ü ‡§∞‡•Ç‡§™ ‡§∏‡•á **Admin Write** ‡§ë‡§™‡§∞‡•á‡§∂‡§Ç‡§∏ (‡§ú‡§ø‡§®‡•ç‡§π‡•á‡§Ç Admin Activity ‡§ë‡§°‡§ø‡§ü ‡§≤‡•â‡§ó ‡§≠‡•Ä ‡§ï‡§π‡§æ ‡§ú‡§æ‡§§‡§æ ‡§π‡•à) ‡§≤‡•â‡§ó ‡§ï‡§ø‡§è ‡§ú‡§æ‡§§‡•á ‡§π‡•à‡§Ç (‡§Æ‡•á‡§ü‡§æ‡§°‡•á‡§ü‡§æ ‡§Ø‡§æ ‡§ï‡•â‡§®‡•ç‡§´‡§º‡§ø‡§ó‡§∞‡•á‡§∂‡§® ‡§ú‡§æ‡§®‡§ï‡§æ‡§∞‡•Ä ‡§≤‡§ø‡§ñ‡•á‡§Ç) ‡§î‡§∞ **‡§®‡§ø‡§∑‡•ç‡§ï‡•ç‡§∞‡§ø‡§Ø ‡§®‡§π‡•Ä‡§Ç ‡§ï‡§ø‡§è ‡§ú‡§æ ‡§∏‡§ï‡§§‡•á**‡•§

‡§´‡§ø‡§∞, ‡§â‡§™‡§Ø‡•ã‡§ó‡§ï‡§∞‡•ç‡§§‡§æ **Data Access ‡§ë‡§°‡§ø‡§ü ‡§≤‡•â‡§ó** ‡§∏‡§ï‡•ç‡§∑‡§Æ ‡§ï‡§∞ ‡§∏‡§ï‡§§‡§æ ‡§π‡•à, ‡§Ø‡•á ‡§π‡•à‡§Ç **Admin Read, Data Write ‡§î‡§∞ Data Write**‡•§

‡§Ü‡§™ ‡§™‡•ç‡§∞‡§§‡•ç‡§Ø‡•á‡§ï ‡§™‡•ç‡§∞‡§ï‡§æ‡§∞ ‡§ï‡•á ‡§≤‡•â‡§ó ‡§ï‡•á ‡§¨‡§æ‡§∞‡•á ‡§Æ‡•á‡§Ç ‡§Ö‡§ß‡§ø‡§ï ‡§ú‡§æ‡§®‡§ï‡§æ‡§∞‡•Ä ‡§¶‡§∏‡•ç‡§§‡§æ‡§µ‡•á‡§ú‡§º‡•ã‡§Ç ‡§Æ‡•á‡§Ç ‡§™‡§æ ‡§∏‡§ï‡§§‡•á ‡§π‡•à‡§Ç: [https://cloud.google.com/iam/docs/audit-logging](https://cloud.google.com/iam/docs/audit-logging)

‡§π‡§æ‡§≤‡§æ‡§Ç‡§ï‡§ø, ‡§ß‡•ç‡§Ø‡§æ‡§® ‡§¶‡•á‡§Ç ‡§ï‡§ø ‡§á‡§∏‡§ï‡§æ ‡§Æ‡§§‡§≤‡§¨ ‡§π‡•à ‡§ï‡§ø ‡§°‡§ø‡§´‡§º‡•â‡§≤‡•ç‡§ü ‡§∞‡•Ç‡§™ ‡§∏‡•á **`GetIamPolicy`** ‡§ï‡•ç‡§∞‡§ø‡§Ø‡§æ‡§è‡§Å ‡§î‡§∞ ‡§Ö‡§®‡•ç‡§Ø ‡§™‡§¢‡§º‡§®‡•á ‡§ï‡•Ä ‡§ï‡•ç‡§∞‡§ø‡§Ø‡§æ‡§è‡§Å **‡§≤‡•â‡§ó ‡§®‡§π‡•Ä‡§Ç ‡§ï‡•Ä ‡§ú‡§æ ‡§∞‡§π‡•Ä ‡§π‡•à‡§Ç**‡•§ ‡§á‡§∏‡§≤‡§ø‡§è, ‡§°‡§ø‡§´‡§º‡•â‡§≤‡•ç‡§ü ‡§∞‡•Ç‡§™ ‡§∏‡•á ‡§è‡§ï ‡§π‡§Æ‡§≤‡§æ‡§µ‡§∞ ‡§ú‡•ã ‡§µ‡§æ‡§§‡§æ‡§µ‡§∞‡§£ ‡§ï‡•ã ‡§è‡§®‡•ç‡§Ø‡•Ç‡§Æ‡§∞‡•á‡§ü ‡§ï‡§∞‡§®‡•á ‡§ï‡•Ä ‡§ï‡•ã‡§∂‡§ø‡§∂ ‡§ï‡§∞ ‡§∞‡§π‡§æ ‡§π‡•à, ‡§™‡§ï‡§°‡§º‡§æ ‡§®‡§π‡•Ä‡§Ç ‡§ú‡§æ‡§è‡§ó‡§æ ‡§Ø‡§¶‡§ø ‡§∏‡§ø‡§∏‡•ç‡§ü‡§Æ ‡§™‡•ç‡§∞‡§∂‡§æ‡§∏‡§ï ‡§®‡•á ‡§Ö‡§ß‡§ø‡§ï ‡§≤‡•â‡§ó ‡§â‡§§‡•ç‡§™‡§®‡•ç‡§® ‡§ï‡§∞‡§®‡•á ‡§ï‡•á ‡§≤‡§ø‡§è ‡§ï‡•â‡§®‡•ç‡§´‡§º‡§ø‡§ó‡§∞ ‡§®‡§π‡•Ä‡§Ç ‡§ï‡§ø‡§Ø‡§æ ‡§π‡•à‡•§

‡§ï‡§Ç‡§∏‡•ã‡§≤ ‡§Æ‡•á‡§Ç ‡§Ö‡§ß‡§ø‡§ï ‡§≤‡•â‡§ó ‡§∏‡§ï‡•ç‡§∑‡§Æ ‡§ï‡§∞‡§®‡•á ‡§ï‡•á ‡§≤‡§ø‡§è ‡§∏‡§ø‡§∏‡•ç‡§ü‡§Æ ‡§™‡•ç‡§∞‡§∂‡§æ‡§∏‡§ï ‡§ï‡•ã [https://console.cloud.google.com/iam-admin/audit](https://console.cloud.google.com/iam-admin/audit) ‡§™‡§∞ ‡§ú‡§æ‡§®‡§æ ‡§π‡•ã‡§ó‡§æ ‡§î‡§∞ ‡§â‡§®‡•ç‡§π‡•á‡§Ç ‡§∏‡§ï‡•ç‡§∑‡§Æ ‡§ï‡§∞‡§®‡§æ ‡§π‡•ã‡§ó‡§æ‡•§ ‡§µ‡§π‡§æ‡§Å 2 ‡§Ö‡§≤‡§ó-‡§Ö‡§≤‡§ó ‡§µ‡§ø‡§ï‡§≤‡•ç‡§™ ‡§π‡•à‡§Ç:

* **‡§°‡§ø‡§´‡§º‡•â‡§≤‡•ç‡§ü ‡§ï‡•â‡§®‡•ç‡§´‡§º‡§ø‡§ó‡§∞‡•á‡§∂‡§®**: ‡§è‡§ï ‡§°‡§ø‡§´‡§º‡•â‡§≤‡•ç‡§ü ‡§ï‡•â‡§®‡•ç‡§´‡§º‡§ø‡§ó‡§∞‡•á‡§∂‡§® ‡§¨‡§®‡§æ‡§®‡§æ ‡§∏‡§Ç‡§≠‡§µ ‡§π‡•à ‡§î‡§∞ ‡§∏‡§≠‡•Ä Admin Read ‡§î‡§∞/‡§Ø‡§æ Data Read ‡§î‡§∞/‡§Ø‡§æ Data Write ‡§≤‡•â‡§ó ‡§ï‡•ã ‡§≤‡•â‡§ó ‡§ï‡§∞‡§®‡§æ ‡§î‡§∞ ‡§Ø‡§π‡§æ‡§Ç ‡§§‡§ï ‡§ï‡§ø ‡§õ‡•Ç‡§ü ‡§™‡•ç‡§∞‡§æ‡§™‡•ç‡§§ ‡§™‡•ç‡§∞‡§ø‡§Ç‡§∏‡§ø‡§™‡§≤ ‡§ú‡•ã‡§°‡§º‡§®‡§æ:

<figure><img src="../../../.gitbook/assets/image (338).png" alt=""><figcaption></figcaption></figure>

* **‡§∏‡•á‡§µ‡§æ‡§ì‡§Ç ‡§ï‡§æ ‡§ö‡§Ø‡§® ‡§ï‡§∞‡•á‡§Ç**: ‡§Ø‡§æ ‡§¨‡§∏ **‡§â‡§® ‡§∏‡•á‡§µ‡§æ‡§ì‡§Ç ‡§ï‡§æ ‡§ö‡§Ø‡§® ‡§ï‡§∞‡•á‡§Ç** ‡§ú‡§ø‡§®‡§ï‡•á ‡§≤‡§ø‡§è ‡§Ü‡§™ ‡§≤‡•â‡§ó ‡§â‡§§‡•ç‡§™‡§®‡•ç‡§® ‡§ï‡§∞‡§®‡§æ ‡§ö‡§æ‡§π‡§§‡•á ‡§π‡•à‡§Ç ‡§î‡§∞ ‡§â‡§∏ ‡§µ‡§ø‡§∂‡•á‡§∑ ‡§∏‡•á‡§µ‡§æ ‡§ï‡•á ‡§≤‡§ø‡§è ‡§≤‡•â‡§ó ‡§ï‡•á ‡§™‡•ç‡§∞‡§ï‡§æ‡§∞ ‡§î‡§∞ ‡§õ‡•Ç‡§ü ‡§™‡•ç‡§∞‡§æ‡§™‡•ç‡§§ ‡§™‡•ç‡§∞‡§ø‡§Ç‡§∏‡§ø‡§™‡§≤‡•§

‡§Ø‡§π ‡§≠‡•Ä ‡§ß‡•ç‡§Ø‡§æ‡§® ‡§¶‡•á‡§Ç ‡§ï‡§ø ‡§°‡§ø‡§´‡§º‡•â‡§≤‡•ç‡§ü ‡§∞‡•Ç‡§™ ‡§∏‡•á ‡§ï‡•á‡§µ‡§≤ ‡§µ‡§π‡•Ä ‡§≤‡•â‡§ó ‡§â‡§§‡•ç‡§™‡§®‡•ç‡§® ‡§ï‡§ø‡§è ‡§ú‡§æ ‡§∞‡§π‡•á ‡§π‡•à‡§Ç ‡§ï‡•ç‡§Ø‡•ã‡§Ç‡§ï‡§ø ‡§Ö‡§ß‡§ø‡§ï ‡§≤‡•â‡§ó ‡§â‡§§‡•ç‡§™‡§®‡•ç‡§® ‡§ï‡§∞‡§®‡•á ‡§∏‡•á ‡§≤‡§æ‡§ó‡§§ ‡§¨‡§¢‡§º‡•á‡§ó‡•Ä‡•§

### ‡§è‡§®‡•ç‡§Ø‡•Ç‡§Æ‡§∞‡•á‡§∂‡§®

`gcloud` ‡§ï‡§Æ‡§æ‡§Ç‡§°-‡§≤‡§æ‡§á‡§® ‡§ü‡•Ç‡§≤ GCP ‡§™‡§æ‡§∞‡§ø‡§∏‡•ç‡§•‡§ø‡§§‡§ø‡§ï‡•Ä ‡§§‡§Ç‡§§‡•ç‡§∞ ‡§ï‡§æ ‡§è‡§ï ‡§Ö‡§≠‡§ø‡§®‡•ç‡§® ‡§π‡§ø‡§∏‡•ç‡§∏‡§æ ‡§π‡•à, ‡§ú‡•ã ‡§Ü‡§™‡§ï‡•ã ‡§Ö‡§™‡§®‡•á ‡§∏‡§Ç‡§∏‡§æ‡§ß‡§®‡•ã‡§Ç ‡§î‡§∞ ‡§∏‡•á‡§µ‡§æ‡§ì‡§Ç ‡§ï‡§æ ‡§™‡•ç‡§∞‡§¨‡§Ç‡§ß‡§® ‡§ï‡§∞‡§®‡•á ‡§ï‡•Ä ‡§Ö‡§®‡•Å‡§Æ‡§§‡§ø ‡§¶‡•á‡§§‡§æ ‡§π‡•à‡•§ ‡§Ø‡§π‡§æ‡§Å ‡§¨‡§§‡§æ‡§Ø‡§æ ‡§ó‡§Ø‡§æ ‡§π‡•à ‡§ï‡§ø ‡§Ü‡§™ ‡§Ö‡§™‡§®‡•á ‡§≤‡•â‡§ó‡§ø‡§Ç‡§ó ‡§ï‡•â‡§®‡•ç‡§´‡§º‡§ø‡§ó‡§∞‡•á‡§∂‡§® ‡§î‡§∞ ‡§è‡§ï‡•ç‡§∏‡•á‡§∏ ‡§≤‡•â‡§ó ‡§ï‡•ã ‡§™‡•ç‡§∞‡§¨‡§Ç‡§ß‡§ø‡§§ ‡§ï‡§∞‡§®‡•á ‡§ï‡•á ‡§≤‡§ø‡§è `gcloud` ‡§ï‡§æ ‡§â‡§™‡§Ø‡•ã‡§ó ‡§ï‡•à‡§∏‡•á ‡§ï‡§∞ ‡§∏‡§ï‡§§‡•á ‡§π‡•à‡§Ç‡•§

{% code overflow="wrap" %}
```bash
# List buckets
gcloud logging buckets list
gcloud logging buckets describe <bucket-name> --location <location>

# List log entries: only logs that contain log entries are listed.
gcloud logging logs list

# Get log metrics
gcloud logging metrics list
gcloud logging metrics describe <metric-name>

# Get log sinks
gcloud logging sinks list
gcloud logging sinks describe <sink-name>

# Get log views
gcloud logging views list --bucket <bucket> --location global
gcloud logging views describe --bucket <bucket> --location global <view-id> # view-id is usually the same as the bucket name

# Get log links
gcloud logging links list --bucket _Default --location global
gcloud logging links describe <link-id> --bucket _Default --location global
```
{% endcode %}

**`cloudresourcemanager`** ‡§ï‡•á ‡§≤‡•â‡§ó ‡§ï‡•Ä ‡§ú‡§æ‡§Ç‡§ö ‡§ï‡§∞‡§®‡•á ‡§ï‡§æ ‡§â‡§¶‡§æ‡§π‡§∞‡§£ (‡§ú‡§ø‡§∏‡§ï‡§æ ‡§â‡§™‡§Ø‡•ã‡§ó BF ‡§Ö‡§®‡•Å‡§Æ‡§§‡§ø‡§Ø‡•ã‡§Ç ‡§ï‡•á ‡§≤‡§ø‡§è ‡§ï‡§ø‡§Ø‡§æ ‡§ú‡§æ‡§§‡§æ ‡§π‡•à): [https://console.cloud.google.com/logs/query;query=protoPayload.serviceName%3D%22cloudresourcemanager.googleapis.com%22;summaryFields=:false:32:beginning;cursorTimestamp=2024-01-20T00:07:14.482809Z;startTime=2024-01-01T11:12:26.062Z;endTime=2024-02-02T17:12:26.062Z?authuser=2\&project=digital-bonfire-410512](https://console.cloud.google.com/logs/query;query=protoPayload.serviceName%3D%22cloudresourcemanager.googleapis.com%22;summaryFields=:false:32:beginning;cursorTimestamp=2024-01-20T00:07:14.482809Z;startTime=2024-01-01T11:12:26.062Z;endTime=2024-02-02T17:12:26.062Z?authuser=2\&project=digital-bonfire-410512)

**`testIamPermissions`** ‡§ï‡•á ‡§≤‡•â‡§ó ‡§®‡§π‡•Ä‡§Ç ‡§π‡•à‡§Ç:

<figure><img src="../../../.gitbook/assets/image (2) (1) (1).png" alt=""><figcaption></figcaption></figure>

### ‡§™‡•ã‡§∏‡•ç‡§ü ‡§è‡§ï‡•ç‡§∏‡§™‡•ç‡§≤‡•ã‡§á‡§ü‡•á‡§∂‡§®

{% content-ref url="../gcp-post-exploitation/gcp-logging-post-exploitation.md" %}
[gcp-logging-post-exploitation.md](../gcp-post-exploitation/gcp-logging-post-exploitation.md)
{% endcontent-ref %}

### ‡§∏‡•ç‡§•‡§ø‡§∞‡§§‡§æ

{% content-ref url="../gcp-persistence/gcp-logging-persistence.md" %}
[gcp-logging-persistence.md](../gcp-persistence/gcp-logging-persistence.md)
{% endcontent-ref %}

## ‡§∏‡§Ç‡§¶‡§∞‡•ç‡§≠

* [https://cloud.google.com/logging/docs/logs-views#gcloud](https://cloud.google.com/logging/docs/logs-views#gcloud)
* [https://betterstack.com/community/guides/logging/gcp-logging/](https://betterstack.com/community/guides/logging/gcp-logging/)

{% hint style="success" %}
AWS ‡§π‡•à‡§ï‡§ø‡§Ç‡§ó ‡§∏‡•Ä‡§ñ‡•á‡§Ç ‡§î‡§∞ ‡§Ö‡§≠‡•ç‡§Ø‡§æ‡§∏ ‡§ï‡§∞‡•á‡§Ç:<img src="../../../.gitbook/assets/image (1).png" alt="" data-size="line">[**HackTricks Training AWS Red Team Expert (ARTE)**](https://training.hacktricks.xyz/courses/arte)<img src="../../../.gitbook/assets/image (1).png" alt="" data-size="line">\
GCP ‡§π‡•à‡§ï‡§ø‡§Ç‡§ó ‡§∏‡•Ä‡§ñ‡•á‡§Ç ‡§î‡§∞ ‡§Ö‡§≠‡•ç‡§Ø‡§æ‡§∏ ‡§ï‡§∞‡•á‡§Ç: <img src="../../../.gitbook/assets/image (2).png" alt="" data-size="line">[**HackTricks Training GCP Red Team Expert (GRTE)**<img src="../../../.gitbook/assets/image (2).png" alt="" data-size="line">](https://training.hacktricks.xyz/courses/grte)

<details>

<summary>HackTricks ‡§ï‡§æ ‡§∏‡§Æ‡§∞‡•ç‡§•‡§® ‡§ï‡§∞‡•á‡§Ç</summary>

* [**‡§∏‡§¶‡§∏‡•ç‡§Ø‡§§‡§æ ‡§Ø‡•ã‡§ú‡§®‡§æ‡§è‡§Å**](https://github.com/sponsors/carlospolop) ‡§¶‡•á‡§ñ‡•á‡§Ç!
* **üí¨ [**Discord ‡§∏‡§Æ‡•Ç‡§π**](https://discord.gg/hRep4RUj7f) ‡§Ø‡§æ [**telegram ‡§∏‡§Æ‡•Ç‡§π**](https://t.me/peass) ‡§Æ‡•á‡§Ç ‡§∂‡§æ‡§Æ‡§ø‡§≤ ‡§π‡•ã‡§Ç ‡§Ø‡§æ **Twitter** üê¶ [**@hacktricks\_live**](https://twitter.com/hacktricks\_live)** ‡§™‡§∞ ‡§π‡§Æ‡•á‡§Ç ‡§´‡•â‡§≤‡•ã ‡§ï‡§∞‡•á‡§Ç‡•§**
* **‡§π‡•à‡§ï‡§ø‡§Ç‡§ó ‡§ü‡•ç‡§∞‡§ø‡§ï‡•ç‡§∏ ‡§∏‡§æ‡§ù‡§æ ‡§ï‡§∞‡•á‡§Ç ‡§î‡§∞ [**HackTricks**](https://github.com/carlospolop/hacktricks) ‡§î‡§∞ [**HackTricks Cloud**](https://github.com/carlospolop/hacktricks-cloud) ‡§ó‡§ø‡§ü‡§π‡§¨ ‡§∞‡§ø‡§™‡•ã‡§ú‡§ø‡§ü‡§∞‡•Ä ‡§Æ‡•á‡§Ç PR ‡§∏‡§¨‡§Æ‡§ø‡§ü ‡§ï‡§∞‡•á‡§Ç‡•§**

</details>
{% endhint %}
