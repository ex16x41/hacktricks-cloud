# GCP - Logging Enum

{% hint style="success" %}
Learn & practice AWS Hacking:<img src="../../../.gitbook/assets/image (1) (1) (1).png" alt="" data-size="line">[**HackTricks Training AWS Red Team Expert (ARTE)**](https://training.hacktricks.xyz/courses/arte)<img src="../../../.gitbook/assets/image (1) (1) (1).png" alt="" data-size="line">\
Learn & practice GCP Hacking: <img src="../../../.gitbook/assets/image (2).png" alt="" data-size="line">[**HackTricks Training GCP Red Team Expert (GRTE)**<img src="../../../.gitbook/assets/image (2).png" alt="" data-size="line">](https://training.hacktricks.xyz/courses/grte)

<details>

<summary>Support HackTricks</summary>

* Check the [**subscription plans**](https://github.com/sponsors/carlospolop)!
* **Join the** üí¨ [**Discord group**](https://discord.gg/hRep4RUj7f) or the [**telegram group**](https://t.me/peass) or **follow** us on **Twitter** üê¶ [**@hacktricks\_live**](https://twitter.com/hacktricks_live)**.**
* **Share hacking tricks by submitting PRs to the** [**HackTricks**](https://github.com/carlospolop/hacktricks) and [**HackTricks Cloud**](https://github.com/carlospolop/hacktricks-cloud) github repos.

</details>
{% endhint %}

## –û—Å–Ω–æ–≤–Ω–∞ —ñ–Ω—Ñ–æ—Ä–º–∞—Ü—ñ—è

–¶—è —Å–ª—É–∂–±–∞ –¥–æ–∑–≤–æ–ª—è—î –∫–æ—Ä–∏—Å—Ç—É–≤–∞—á–∞–º –∑–±–µ—Ä—ñ–≥–∞—Ç–∏, —à—É–∫–∞—Ç–∏, –∞–Ω–∞–ª—ñ–∑—É–≤–∞—Ç–∏, –º–æ–Ω—ñ—Ç–æ—Ä–∏—Ç–∏ —Ç–∞ –æ—Ç—Ä–∏–º—É–≤–∞—Ç–∏ —Å–ø–æ–≤—ñ—â–µ–Ω–Ω—è –ø—Ä–æ **–¥–∞–Ω—ñ —Ç–∞ –ø–æ–¥—ñ—ó –∂—É—Ä–Ω–∞–ª—ñ–≤** –∑ GCP.

Cloud Logging –ø–æ–≤–Ω—ñ—Å—Ç—é —ñ–Ω—Ç–µ–≥—Ä–æ–≤–∞–Ω–∏–π –∑ —ñ–Ω—à–∏–º–∏ —Å–ª—É–∂–±–∞–º–∏ GCP, –Ω–∞–¥–∞—é—á–∏ —Ü–µ–Ω—Ç—Ä–∞–ª—ñ–∑–æ–≤–∞–Ω–∏–π —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä—ñ–π –¥–ª—è –∂—É—Ä–Ω–∞–ª—ñ–≤ –∑ —É—Å—ñ—Ö –≤–∞—à–∏—Ö —Ä–µ—Å—É—Ä—Å—ñ–≤ GCP. –í—ñ–Ω **–∞–≤—Ç–æ–º–∞—Ç–∏—á–Ω–æ –∑–±–∏—Ä–∞—î –∂—É—Ä–Ω–∞–ª–∏ –∑ —Ä—ñ–∑–Ω–∏—Ö —Å–ª—É–∂–± GCP** —Ç–∞–∫–∏—Ö —è–∫ App Engine, Compute Engine —Ç–∞ Cloud Functions. –í–∏ —Ç–∞–∫–æ–∂ –º–æ–∂–µ—Ç–µ –≤–∏–∫–æ—Ä–∏—Å—Ç–æ–≤—É–≤–∞—Ç–∏ Cloud Logging –¥–ª—è –¥–æ–¥–∞—Ç–∫—ñ–≤, —â–æ –ø—Ä–∞—Ü—é—é—Ç—å –Ω–∞ –º—ñ—Å—Ü—ñ –∞–±–æ –≤ —ñ–Ω—à–∏—Ö —Ö–º–∞—Ä–∞—Ö, –≤–∏–∫–æ—Ä–∏—Å—Ç–æ–≤—É—é—á–∏ –∞–≥–µ–Ω—Ç Cloud Logging –∞–±–æ API.

–ö–ª—é—á–æ–≤—ñ –æ—Å–æ–±–ª–∏–≤–æ—Å—Ç—ñ:

* **–¶–µ–Ω—Ç—Ä–∞–ª—ñ–∑–∞—Ü—ñ—è –¥–∞–Ω–∏—Ö –∂—É—Ä–Ω–∞–ª—ñ–≤:** –ê–≥—Ä–µ–≥—É–π—Ç–µ –¥–∞–Ω—ñ –∂—É—Ä–Ω–∞–ª—ñ–≤ –∑ —Ä—ñ–∑–Ω–∏—Ö –¥–∂–µ—Ä–µ–ª, –ø—Ä–æ–ø–æ–Ω—É—é—á–∏ —Ü—ñ–ª—ñ—Å–Ω–∏–π –ø–æ–≥–ª—è–¥ –Ω–∞ –≤–∞—à—ñ –¥–æ–¥–∞—Ç–∫–∏ —Ç–∞ —ñ–Ω—Ñ—Ä–∞—Å—Ç—Ä—É–∫—Ç—É—Ä—É.
* **–£–ø—Ä–∞–≤–ª—ñ–Ω–Ω—è –∂—É—Ä–Ω–∞–ª–∞–º–∏ –≤ —Ä–µ–∞–ª—å–Ω–æ–º—É —á–∞—Å—ñ:** –ü–æ—Ç–æ–∫–æ–≤–µ –ø–µ—Ä–µ–¥–∞–≤–∞–Ω–Ω—è –∂—É—Ä–Ω–∞–ª—ñ–≤ –≤ —Ä–µ–∞–ª—å–Ω–æ–º—É —á–∞—Å—ñ –¥–ª—è –Ω–µ–≥–∞–π–Ω–æ–≥–æ –∞–Ω–∞–ª—ñ–∑—É —Ç–∞ —Ä–µ–∞–≥—É–≤–∞–Ω–Ω—è.
* **–ü–æ—Ç—É–∂–Ω–∏–π –∞–Ω–∞–ª—ñ–∑ –¥–∞–Ω–∏—Ö:** –í–∏–∫–æ—Ä–∏—Å—Ç–æ–≤—É–π—Ç–µ —Ä–æ–∑—à–∏—Ä–µ–Ω—ñ –º–æ–∂–ª–∏–≤–æ—Å—Ç—ñ —Ñ—ñ–ª—å—Ç—Ä–∞—Ü—ñ—ó —Ç–∞ –ø–æ—à—É–∫—É, —â–æ–± —à–≤–∏–¥–∫–æ –ø–µ—Ä–µ–≥–ª—è–¥–∞—Ç–∏ –≤–µ–ª–∏–∫—ñ –æ–±—Å—è–≥–∏ –¥–∞–Ω–∏—Ö –∂—É—Ä–Ω–∞–ª—ñ–≤.
* **–Ü–Ω—Ç–µ–≥—Ä–∞—Ü—ñ—è –∑ BigQuery:** –ï–∫—Å–ø–æ—Ä—Ç—É–π—Ç–µ –∂—É—Ä–Ω–∞–ª–∏ –≤ BigQuery –¥–ª—è –¥–µ—Ç–∞–ª—å–Ω–æ–≥–æ –∞–Ω–∞–ª—ñ–∑—É —Ç–∞ –∑–∞–ø–∏—Ç—ñ–≤.
* **–ú–µ—Ç—Ä–∏–∫–∏ –Ω–∞ –æ—Å–Ω–æ–≤—ñ –∂—É—Ä–Ω–∞–ª—ñ–≤:** –°—Ç–≤–æ—Ä—é–π—Ç–µ –∫–æ—Ä–∏—Å—Ç—É–≤–∞—Ü—å–∫—ñ –º–µ—Ç—Ä–∏–∫–∏ –∑ –≤–∞—à–∏—Ö –¥–∞–Ω–∏—Ö –∂—É—Ä–Ω–∞–ª—ñ–≤ –¥–ª—è –º–æ–Ω—ñ—Ç–æ—Ä–∏–Ω–≥—É —Ç–∞ —Å–ø–æ–≤—ñ—â–µ–Ω–Ω—è.

### –ü–æ—Ç—ñ–∫ –∂—É—Ä–Ω–∞–ª—ñ–≤

<figure><img src="../../../.gitbook/assets/image (3) (1).png" alt=""><figcaption><p><a href="https://betterstack.com/community/guides/logging/gcp-logging/">https://betterstack.com/community/guides/logging/gcp-logging/</a></p></figcaption></figure>

–í –æ—Å–Ω–æ–≤–Ω–æ–º—É, –∑–ª–∏–≤–∏ —Ç–∞ –º–µ—Ç—Ä–∏–∫–∏ –Ω–∞ –æ—Å–Ω–æ–≤—ñ –∂—É—Ä–Ω–∞–ª—ñ–≤ –≤–∏–∑–Ω–∞—á–∞—Ç—å, –¥–µ –∂—É—Ä–Ω–∞–ª –º–∞—î –±—É—Ç–∏ –∑–±–µ—Ä–µ–∂–µ–Ω–∏–π.

### –ö–æ–Ω—Ñ—ñ–≥—É—Ä–∞—Ü—ñ—ó, –ø—ñ–¥—Ç—Ä–∏–º—É–≤–∞–Ω—ñ GCP Logging

Cloud Logging –º–∞—î –≤–∏—Å–æ–∫—É –∫–æ–Ω—Ñ—ñ–≥—É—Ä–æ–≤–∞–Ω—ñ—Å—Ç—å, —â–æ–± –≤—ñ–¥–ø–æ–≤—ñ–¥–∞—Ç–∏ —Ä—ñ–∑–Ω–æ–º–∞–Ω—ñ—Ç–Ω–∏–º –æ–ø–µ—Ä–∞—Ü—ñ–π–Ω–∏–º –ø–æ—Ç—Ä–µ–±–∞–º:

1. **–ñ—É—Ä–Ω–∞–ª—å–Ω—ñ –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–∏ (–∑–±–µ—Ä—ñ–≥–∞–Ω–Ω—è –∂—É—Ä–Ω–∞–ª—ñ–≤ –≤ –º–µ—Ä–µ–∂—ñ):** –í–∏–∑–Ω–∞—á—Ç–µ –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–∏ –≤ Cloud Logging –¥–ª—è —É–ø—Ä–∞–≤–ª—ñ–Ω–Ω—è **–∑–±–µ—Ä—ñ–≥–∞–Ω–Ω—è–º –∂—É—Ä–Ω–∞–ª—ñ–≤**, –Ω–∞–¥–∞—é—á–∏ –∫–æ–Ω—Ç—Ä–æ–ª—å –Ω–∞–¥ —Ç–∏–º, —è–∫ –¥–æ–≤–≥–æ –∑–±–µ—Ä—ñ–≥–∞—é—Ç—å—Å—è –≤–∞—à—ñ –∑–∞–ø–∏—Å–∏ –∂—É—Ä–Ω–∞–ª—ñ–≤.
* –ó–∞ –∑–∞–º–æ–≤—á—É–≤–∞–Ω–Ω—è–º —Å—Ç–≤–æ—Ä—é—é—Ç—å—Å—è –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–∏ `_Default` —Ç–∞ `_Required` (–æ–¥–∏–Ω –≤–µ–¥–µ –æ–±–ª—ñ–∫ —Ç–æ–≥–æ, —â–æ —ñ–Ω—à–∏–π –Ω–µ –≤–µ–¥–µ).
* **\_Required** —î: 

{% code overflow="wrap" %}
````
```bash
LOG_ID("cloudaudit.googleapis.com/activity") OR LOG_ID("externalaudit.googleapis.com/activity") OR LOG_ID("cloudaudit.googleapis.com/system_event") OR LOG_ID("externalaudit.googleapis.com/system_event") OR LOG_ID("cloudaudit.googleapis.com/access_transparency") OR LOG_ID("externalaudit.googleapis.com/access_transparency")
```

````
{% endcode %}

* **–ü–µ—Ä—ñ–æ–¥ –∑–±–µ—Ä—ñ–≥–∞–Ω–Ω—è** –¥–∞–Ω–∏—Ö –Ω–∞–ª–∞—à—Ç–æ–≤—É—î—Ç—å—Å—è –¥–ª—è –∫–æ–∂–Ω–æ–≥–æ –±–∞–∫–µ—Ç—É —ñ –ø–æ–≤–∏–Ω–µ–Ω –±—É—Ç–∏ **–Ω–µ –º–µ–Ω—à–µ 1 –¥–Ω—è.** –û–¥–Ω–∞–∫ **–ø–µ—Ä—ñ–æ–¥ –∑–±–µ—Ä—ñ–≥–∞–Ω–Ω—è \_Required —Å—Ç–∞–Ω–æ–≤–∏—Ç—å 400 –¥–Ω—ñ–≤** —ñ –Ω–µ –º–æ–∂–µ –±—É—Ç–∏ –∑–º—ñ–Ω–µ–Ω–∏–π.
* –ó–≤–µ—Ä–Ω—ñ—Ç—å —É–≤–∞–≥—É, —â–æ –õ–æ–≥ –ë–∞–∫–µ—Ç–∏ **–Ω–µ –≤–∏–¥–∏–º—ñ –≤ Cloud Storage.**

2. **–õ–æ–≥ –°—ñ–Ω–∫–∏ (–õ–æ–≥ –º–∞—Ä—à—Ä—É—Ç–∏–∑–∞—Ç–æ—Ä –≤ –≤–µ–±—ñ):** –°—Ç–≤–æ—Ä—ñ—Ç—å —Å—ñ–Ω–∫–∏ –¥–ª—è **–µ–∫—Å–ø–æ—Ä—Ç—É –∑–∞–ø–∏—Å—ñ–≤ –∂—É—Ä–Ω–∞–ª—É** –¥–æ —Ä—ñ–∑–Ω–∏—Ö –º—ñ—Å—Ü—å –ø—Ä–∏–∑–Ω–∞—á–µ–Ω–Ω—è, —Ç–∞–∫–∏—Ö —è–∫ Pub/Sub, BigQuery –∞–±–æ Cloud Storage –Ω–∞ –æ—Å–Ω–æ–≤—ñ **—Ñ—ñ–ª—å—Ç—Ä–∞**.
* –ó–∞ **–∑–∞–º–æ–≤—á—É–≤–∞–Ω–Ω—è–º** —Å—ñ–Ω–∫–∏ –¥–ª—è –±–∞–∫–µ—Ç—ñ–≤ `_Default` —ñ `_Required` —Å—Ç–≤–æ—Ä—é—é—Ç—å—Å—è:
* ```bash
_Required  logging.googleapis.com/projects/<proj-name>/locations/global/buckets/_Required  LOG_ID("cloudaudit.googleapis.com/activity") OR LOG_ID("externalaudit.googleapis.com/activity") OR LOG_ID("cloudaudit.googleapis.com/system_event") OR LOG_ID("externalaudit.googleapis.com/system_event") OR LOG_ID("cloudaudit.googleapis.com/access_transparency") OR LOG_ID("externalaudit.googleapis.com/access_transparency")
_Default   logging.googleapis.com/projects/<proj-name>/locations/global/buckets/_Default   NOT LOG_ID("cloudaudit.googleapis.com/activity") AND NOT LOG_ID("externalaudit.googleapis.com/activity") AND NOT LOG_ID("cloudaudit.googleapis.com/system_event") AND NOT LOG_ID("externalaudit.googleapis.com/system_event") AND NOT LOG_ID("cloudaudit.googleapis.com/access_transparency") AND NOT LOG_ID("externalaudit.googleapis.com/access_transparency")
```
* **–§—ñ–ª—å—Ç—Ä–∏ –≤–∏–∫–ª—é—á–µ–Ω–Ω—è:** –ú–æ–∂–ª–∏–≤–æ –Ω–∞–ª–∞—à—Ç—É–≤–∞—Ç–∏ **–≤–∏–∫–ª—é—á–µ–Ω–Ω—è –¥–ª—è –∑–∞–ø–æ–±—ñ–≥–∞–Ω–Ω—è –Ω–∞–¥—Ö–æ–¥–∂–µ–Ω–Ω—é –∫–æ–Ω–∫—Ä–µ—Ç–Ω–∏—Ö –∑–∞–ø–∏—Å—ñ–≤ –∂—É—Ä–Ω–∞–ª—É**, —â–æ –¥–æ–∑–≤–æ–ª—è—î –∑–∞–æ—â–∞–¥–∂—É–≤–∞—Ç–∏ –∫–æ—à—Ç–∏ —Ç–∞ –∑–º–µ–Ω—à—É–≤–∞—Ç–∏ –∑–∞–π–≤–∏–π —à—É–º.
3. **–ú–µ—Ç—Ä–∏–∫–∏ –Ω–∞ –æ—Å–Ω–æ–≤—ñ –∂—É—Ä–Ω–∞–ª—ñ–≤:** –ù–∞–ª–∞—à—Ç—É–π—Ç–µ **–∫–∞—Å—Ç–æ–º–Ω—ñ –º–µ—Ç—Ä–∏–∫–∏** –Ω–∞ –æ—Å–Ω–æ–≤—ñ –≤–º—ñ—Å—Ç—É –∂—É—Ä–Ω–∞–ª—ñ–≤, —â–æ –¥–æ–∑–≤–æ–ª—è—î –∑–¥—ñ–π—Å–Ω—é–≤–∞—Ç–∏ –æ–ø–æ–≤—ñ—â–µ–Ω–Ω—è —Ç–∞ –º–æ–Ω—ñ—Ç–æ—Ä–∏–Ω–≥ –Ω–∞ –æ—Å–Ω–æ–≤—ñ –¥–∞–Ω–∏—Ö –∂—É—Ä–Ω–∞–ª—É.
4. **–ü–µ—Ä–µ–≥–ª—è–¥–∏ –∂—É—Ä–Ω–∞–ª—ñ–≤:** –ü–µ—Ä–µ–≥–ª—è–¥–∏ –∂—É—Ä–Ω–∞–ª—ñ–≤ –Ω–∞–¥–∞—é—Ç—å —Ä–æ–∑—à–∏—Ä–µ–Ω–∏–π —Ç–∞ **–¥–æ–∫–ª–∞–¥–Ω–∏–π –∫–æ–Ω—Ç—Ä–æ–ª—å –Ω–∞–¥ —Ç–∏–º, —Ö—Ç–æ –º–∞—î –¥–æ—Å—Ç—É–ø** –¥–æ –∂—É—Ä–Ω–∞–ª—ñ–≤ —É –≤–∞—à–∏—Ö –ª–æ–≥ –±–∞–∫–µ—Ç–∞—Ö.
* Cloud Logging **–∞–≤—Ç–æ–º–∞—Ç–∏—á–Ω–æ —Å—Ç–≤–æ—Ä—é—î –ø–µ—Ä–µ–≥–ª—è–¥ `_AllLogs` –¥–ª—è –∫–æ–∂–Ω–æ–≥–æ –±–∞–∫–µ—Ç—É**, —è–∫–∏–π –ø–æ–∫–∞–∑—É—î –≤—Å—ñ –∂—É—Ä–Ω–∞–ª–∏. Cloud Logging —Ç–∞–∫–æ–∂ —Å—Ç–≤–æ—Ä—é—î –ø–µ—Ä–µ–≥–ª—è–¥ –¥–ª—è –±–∞–∫–µ—Ç—É `_Default`, –Ω–∞–∑–≤–∞–Ω–∏–π `_Default`. –ü–µ—Ä–µ–≥–ª—è–¥ `_Default` –¥–ª—è –±–∞–∫–µ—Ç—É `_Default` –ø–æ–∫–∞–∑—É—î –≤—Å—ñ –∂—É—Ä–Ω–∞–ª–∏, –∑–∞ –≤–∏–Ω—è—Ç–∫–æ–º –∂—É—Ä–Ω–∞–ª—ñ–≤ –∞—É–¥–∏—Ç—É –¥–æ—Å—Ç—É–ø—É –¥–æ –¥–∞–Ω–∏—Ö. –ü–µ—Ä–µ–≥–ª—è–¥–∏ `_AllLogs` —Ç–∞ `_Default` –Ω–µ –ø—ñ–¥–ª—è–≥–∞—é—Ç—å —Ä–µ–¥–∞–≥—É–≤–∞–Ω–Ω—é.

–ú–æ–∂–ª–∏–≤–æ –¥–æ–∑–≤–æ–ª–∏—Ç–∏ –ø—Ä–∏–Ω—Ü–∏–ø–∞–ª—É **–≤–∏–∫–æ—Ä–∏—Å—Ç–æ–≤—É–≤–∞—Ç–∏ –ª–∏—à–µ –∫–æ–Ω–∫—Ä–µ—Ç–Ω–∏–π –ø–µ—Ä–µ–≥–ª—è–¥ –∂—É—Ä–Ω–∞–ª—É** –∑ –ø–æ–ª—ñ—Ç–∏–∫–æ—é IAM, —è–∫:

{% code overflow="wrap" %}
```json
{
"bindings": [
{
"members": [
"user:username@gmail.com"
],
"role": "roles/logging.viewAccessor",
"condition": {
"title": "Bucket reader condition example",
"description": "Grants logging.viewAccessor role to user username@gmail.com for the VIEW_ID log view.",
"expression":
"resource.name == \"projects/PROJECT_ID/locations/LOCATION/buckets/BUCKET_NAME/views/VIEW_ID\""
}
}
],
"etag": "BwWd_6eERR4=",
"version": 3
}
```
{% endcode %}

### –ó–∞ –∑–∞–º–æ–≤—á—É–≤–∞–Ω–Ω—è–º –∂—É—Ä–Ω–∞–ª–∏

–ó–∞ –∑–∞–º–æ–≤—á—É–≤–∞–Ω–Ω—è–º **Admin Write** –æ–ø–µ—Ä–∞—Ü—ñ—ó (—Ç–∞–∫–æ–∂ –Ω–∞–∑–∏–≤–∞—é—Ç—å—Å—è –∂—É—Ä–Ω–∞–ª–∞–º–∏ –∞—É–¥–∏—Ç—É –∞–∫—Ç–∏–≤–Ω–æ—Å—Ç—ñ –∞–¥–º—ñ–Ω—ñ—Å—Ç—Ä–∞—Ç–æ—Ä–∞) —î —Ç–∏–º–∏, —â–æ –≤–µ–¥—É—Ç—å—Å—è (–∑–∞–ø–∏—Å –º–µ—Ç–∞–¥–∞–Ω–∏—Ö –∞–±–æ –∫–æ–Ω—Ñ—ñ–≥—É—Ä–∞—Ü—ñ–π–Ω–æ—ó —ñ–Ω—Ñ–æ—Ä–º–∞—Ü—ñ—ó) —ñ **–Ω–µ –º–æ–∂—É—Ç—å –±—É—Ç–∏ –≤–∏–º–∫–Ω–µ–Ω—ñ**.

–ü–æ—Ç—ñ–º –∫–æ—Ä–∏—Å—Ç—É–≤–∞—á –º–æ–∂–µ —É–≤—ñ–º–∫–Ω—É—Ç–∏ **–∂—É—Ä–Ω–∞–ª–∏ –∞—É–¥–∏—Ç—É –¥–æ—Å—Ç—É–ø—É –¥–æ –¥–∞–Ω–∏—Ö**, —Ü–µ **Admin Read, Data Write —Ç–∞ Data Write**.

–í–∏ –º–æ–∂–µ—Ç–µ –∑–Ω–∞–π—Ç–∏ –±—ñ–ª—å—à–µ —ñ–Ω—Ñ–æ—Ä–º–∞—Ü—ñ—ó –ø—Ä–æ –∫–æ–∂–µ–Ω —Ç–∏–ø –∂—É—Ä–Ω–∞–ª—É –≤ –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü—ñ—ó: [https://cloud.google.com/iam/docs/audit-logging](https://cloud.google.com/iam/docs/audit-logging)

–û–¥–Ω–∞–∫ –∑–≤–µ—Ä–Ω—ñ—Ç—å —É–≤–∞–≥—É, —â–æ —Ü–µ –æ–∑–Ω–∞—á–∞—î, —â–æ –∑–∞ –∑–∞–º–æ–≤—á—É–≤–∞–Ω–Ω—è–º **`GetIamPolicy`** –¥—ñ—ó —Ç–∞ —ñ–Ω—à—ñ –¥—ñ—ó —á–∏—Ç–∞–Ω–Ω—è **–Ω–µ –≤–µ–¥—É—Ç—å—Å—è**. –û—Ç–∂–µ, –∑–∞ –∑–∞–º–æ–≤—á—É–≤–∞–Ω–Ω—è–º –∑–ª–æ–≤–º–∏—Å–Ω–∏–∫, —è–∫–∏–π –Ω–∞–º–∞–≥–∞—î—Ç—å—Å—è –ø–µ—Ä–µ—Ä–∞—Ö—É–≤–∞—Ç–∏ —Å–µ—Ä–µ–¥–æ–≤–∏—â–µ, –Ω–µ –±—É–¥–µ —Å–ø—ñ–π–º–∞–Ω–∏–π, —è–∫—â–æ —Å–∏—Å—Ç–µ–º–Ω–∏–π –∞–¥–º—ñ–Ω—ñ—Å—Ç—Ä–∞—Ç–æ—Ä –Ω–µ –Ω–∞–ª–∞—à—Ç—É–≤–∞–≤ –≥–µ–Ω–µ—Ä–∞—Ü—ñ—é –±—ñ–ª—å—à–µ –∂—É—Ä–Ω–∞–ª—ñ–≤.

–©–æ–± —É–≤—ñ–º–∫–Ω—É—Ç–∏ –±—ñ–ª—å—à–µ –∂—É—Ä–Ω–∞–ª—ñ–≤ —É –∫–æ–Ω—Å–æ–ª—ñ, —Å–∏—Å—Ç–µ–º–Ω–∏–π –∞–¥–º—ñ–Ω—ñ—Å—Ç—Ä–∞—Ç–æ—Ä –ø–æ–≤–∏–Ω–µ–Ω –ø–µ—Ä–µ–π—Ç–∏ –∑–∞ –∞–¥—Ä–µ—Å–æ—é [https://console.cloud.google.com/iam-admin/audit](https://console.cloud.google.com/iam-admin/audit) —ñ —É–≤—ñ–º–∫–Ω—É—Ç–∏ —ó—Ö. –Ñ 2 —Ä—ñ–∑–Ω—ñ –≤–∞—Ä—ñ–∞–Ω—Ç–∏:

* **–ö–æ–Ω—Ñ—ñ–≥—É—Ä–∞—Ü—ñ—è –∑–∞ –∑–∞–º–æ–≤—á—É–≤–∞–Ω–Ω—è–º**: –ú–æ–∂–Ω–∞ —Å—Ç–≤–æ—Ä–∏—Ç–∏ –∫–æ–Ω—Ñ—ñ–≥—É—Ä–∞—Ü—ñ—é –∑–∞ –∑–∞–º–æ–≤—á—É–≤–∞–Ω–Ω—è–º —ñ –≤–µ—Å—Ç–∏ –≤—Å—ñ –∂—É—Ä–Ω–∞–ª–∏ Admin Read —Ç–∞/–∞–±–æ Data Read —Ç–∞/–∞–±–æ Data Write —ñ –Ω–∞–≤—ñ—Ç—å –¥–æ–¥–∞—Ç–∏ –∑–≤—ñ–ª—å–Ω–µ–Ω—ñ –ø—Ä–∏–Ω—Ü–∏–ø–∞–ª–∏:

<figure><img src="../../../.gitbook/assets/image (338).png" alt=""><figcaption></figcaption></figure>

* **–í–∏–±—Ä–∞—Ç–∏ —Å–µ—Ä–≤—ñ—Å–∏**: –ê–±–æ –ø—Ä–æ—Å—Ç–æ **–≤–∏–±—Ä–∞—Ç–∏ —Å–µ—Ä–≤—ñ—Å–∏**, –¥–ª—è —è–∫–∏—Ö –≤–∏ —Ö–æ—á–µ—Ç–µ –≥–µ–Ω–µ—Ä—É–≤–∞—Ç–∏ –∂—É—Ä–Ω–∞–ª–∏, —Ç–∏–ø –∂—É—Ä–Ω–∞–ª—ñ–≤ —Ç–∞ –∑–≤—ñ–ª—å–Ω–µ–Ω–∏–π –ø—Ä–∏–Ω—Ü–∏–ø–∞–ª –¥–ª—è —Ü—å–æ–≥–æ –∫–æ–Ω–∫—Ä–µ—Ç–Ω–æ–≥–æ —Å–µ—Ä–≤—ñ—Å—É.

–¢–∞–∫–æ–∂ –∑–≤–µ—Ä–Ω—ñ—Ç—å —É–≤–∞–≥—É, —â–æ –∑–∞ –∑–∞–º–æ–≤—á—É–≤–∞–Ω–Ω—è–º –≤–µ–¥—É—Ç—å—Å—è –ª–∏—à–µ —Ü—ñ –∂—É—Ä–Ω–∞–ª–∏, –æ—Å–∫—ñ–ª—å–∫–∏ –≥–µ–Ω–µ—Ä–∞—Ü—ñ—è –±—ñ–ª—å—à–µ –∂—É—Ä–Ω–∞–ª—ñ–≤ –∑–±—ñ–ª—å—à–∏—Ç—å –≤–∏—Ç—Ä–∞—Ç–∏.

### –ü–µ—Ä–µ—Ä–∞—Ö—É–≤–∞–Ω–Ω—è

–Ü–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç –∫–æ–º–∞–Ω–¥–Ω–æ–≥–æ —Ä—è–¥–∫–∞ `gcloud` —î –Ω–µ–≤—ñ–¥'—î–º–Ω–æ—é —á–∞—Å—Ç–∏–Ω–æ—é –µ–∫–æ—Å–∏—Å—Ç–µ–º–∏ GCP, —â–æ –¥–æ–∑–≤–æ–ª—è—î –≤–∞–º –∫–µ—Ä—É–≤–∞—Ç–∏ –≤–∞—à–∏–º–∏ —Ä–µ—Å—É—Ä—Å–∞–º–∏ —Ç–∞ —Å–µ—Ä–≤—ñ—Å–∞–º–∏. –û—Å—å —è–∫ –≤–∏ –º–æ–∂–µ—Ç–µ –≤–∏–∫–æ—Ä–∏—Å—Ç–æ–≤—É–≤–∞—Ç–∏ `gcloud` –¥–ª—è —É–ø—Ä–∞–≤–ª—ñ–Ω–Ω—è –≤–∞—à–∏–º–∏ –∫–æ–Ω—Ñ—ñ–≥—É—Ä–∞—Ü—ñ—è–º–∏ –∂—É—Ä–Ω–∞–ª—é–≤–∞–Ω–Ω—è —Ç–∞ –¥–æ—Å—Ç—É–ø–æ–º –¥–æ –∂—É—Ä–Ω–∞–ª—ñ–≤.

{% code overflow="wrap" %}
```bash
# List buckets
gcloud logging buckets list
gcloud logging buckets describe <bucket-name> --location <location>

# List log entries: only logs that contain log entries are listed.
gcloud logging logs list

# Get log metrics
gcloud logging metrics list
gcloud logging metrics describe <metric-name>

# Get log sinks
gcloud logging sinks list
gcloud logging sinks describe <sink-name>

# Get log views
gcloud logging views list --bucket <bucket> --location global
gcloud logging views describe --bucket <bucket> --location global <view-id> # view-id is usually the same as the bucket name

# Get log links
gcloud logging links list --bucket _Default --location global
gcloud logging links describe <link-id> --bucket _Default --location global
```
{% endcode %}

–ü—Ä–∏–∫–ª–∞–¥ –ø–µ—Ä–µ–≤—ñ—Ä–∫–∏ –∂—É—Ä–Ω–∞–ª—ñ–≤ **`cloudresourcemanager`** (—Ç–æ–π, —â–æ –≤–∏–∫–æ—Ä–∏—Å—Ç–æ–≤—É—î—Ç—å—Å—è –¥–ª—è BF –¥–æ–∑–≤–æ–ª—ñ–≤): [https://console.cloud.google.com/logs/query;query=protoPayload.serviceName%3D%22cloudresourcemanager.googleapis.com%22;summaryFields=:false:32:beginning;cursorTimestamp=2024-01-20T00:07:14.482809Z;startTime=2024-01-01T11:12:26.062Z;endTime=2024-02-02T17:12:26.062Z?authuser=2\&project=digital-bonfire-410512](https://console.cloud.google.com/logs/query;query=protoPayload.serviceName%3D%22cloudresourcemanager.googleapis.com%22;summaryFields=:false:32:beginning;cursorTimestamp=2024-01-20T00:07:14.482809Z;startTime=2024-01-01T11:12:26.062Z;endTime=2024-02-02T17:12:26.062Z?authuser=2\&project=digital-bonfire-410512)

–ñ—É—Ä–Ω–∞–ª—ñ–≤ **`testIamPermissions`** –Ω–µ–º–∞—î:

<figure><img src="../../../.gitbook/assets/image (2) (1) (1).png" alt=""><figcaption></figcaption></figure>

### –ü–æ—Å—Ç–µ–∫—Å–ø–ª—É–∞—Ç–∞—Ü—ñ—è

{% content-ref url="../gcp-post-exploitation/gcp-logging-post-exploitation.md" %}
[gcp-logging-post-exploitation.md](../gcp-post-exploitation/gcp-logging-post-exploitation.md)
{% endcontent-ref %}

### –ü–µ—Ä—Å–∏—Å—Ç–µ–Ω—Ç–Ω—ñ—Å—Ç—å

{% content-ref url="../gcp-persistence/gcp-logging-persistence.md" %}
[gcp-logging-persistence.md](../gcp-persistence/gcp-logging-persistence.md)
{% endcontent-ref %}

## –ü–æ—Å–∏–ª–∞–Ω–Ω—è

* [https://cloud.google.com/logging/docs/logs-views#gcloud](https://cloud.google.com/logging/docs/logs-views#gcloud)
* [https://betterstack.com/community/guides/logging/gcp-logging/](https://betterstack.com/community/guides/logging/gcp-logging/)

{% hint style="success" %}
–í–∏–≤—á–∞–π—Ç–µ —Ç–∞ –ø—Ä–∞–∫—Ç–∏–∫—É–π—Ç–µ AWS Hacking:<img src="../../../.gitbook/assets/image (1) (1) (1).png" alt="" data-size="line">[**HackTricks Training AWS Red Team Expert (ARTE)**](https://training.hacktricks.xyz/courses/arte)<img src="../../../.gitbook/assets/image (1) (1) (1).png" alt="" data-size="line">\
–í–∏–≤—á–∞–π—Ç–µ —Ç–∞ –ø—Ä–∞–∫—Ç–∏–∫—É–π—Ç–µ GCP Hacking: <img src="../../../.gitbook/assets/image (2).png" alt="" data-size="line">[**HackTricks Training GCP Red Team Expert (GRTE)**<img src="../../../.gitbook/assets/image (2).png" alt="" data-size="line">](https://training.hacktricks.xyz/courses/grte)

<details>

<summary>–ü—ñ–¥—Ç—Ä–∏–º–∞—Ç–∏ HackTricks</summary>

* –ü–µ—Ä–µ–≤—ñ—Ä—Ç–µ [**–ø–ª–∞–Ω–∏ –ø—ñ–¥–ø–∏—Å–∫–∏**](https://github.com/sponsors/carlospolop)!
* **–ü—Ä–∏—î–¥–Ω—É–π—Ç–µ—Å—å –¥–æ** üí¨ [**–≥—Ä—É–ø–∏ Discord**](https://discord.gg/hRep4RUj7f) –∞–±–æ [**–≥—Ä—É–ø–∏ Telegram**](https://t.me/peass) –∞–±–æ **—Å–ª—ñ–¥–∫—É–π—Ç–µ** –∑–∞ –Ω–∞–º–∏ –≤ **Twitter** üê¶ [**@hacktricks\_live**](https://twitter.com/hacktricks_live)**.**
* **–î—ñ–ª—ñ—Ç—å—Å—è —Ö–∞–∫–µ—Ä—Å—å–∫–∏–º–∏ —Ç—Ä—é–∫–∞–º–∏, –Ω–∞–¥—Å–∏–ª–∞—é—á–∏ PR –¥–æ** [**HackTricks**](https://github.com/carlospolop/hacktricks) —Ç–∞ [**HackTricks Cloud**](https://github.com/carlospolop/hacktricks-cloud) —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä—ñ—ó–≤ –Ω–∞ github.

</details>
{% endhint %}
