# GCP - Cloud Run Enum

{% hint style="success" %}
AWS Hacking'i Ã¶ÄŸrenin ve pratik yapÄ±n:<img src="../../../.gitbook/assets/image (1).png" alt="" data-size="line">[**HackTricks Training AWS Red Team Expert (ARTE)**](https://training.hacktricks.xyz/courses/arte)<img src="../../../.gitbook/assets/image (1).png" alt="" data-size="line">\
GCP Hacking'i Ã¶ÄŸrenin ve pratik yapÄ±n: <img src="../../../.gitbook/assets/image (2).png" alt="" data-size="line">[**HackTricks Training GCP Red Team Expert (GRTE)**<img src="../../../.gitbook/assets/image (2).png" alt="" data-size="line">](https://training.hacktricks.xyz/courses/grte)

<details>

<summary>HackTricks'i Destekleyin</summary>

* [**abonelik planlarÄ±nÄ±**](https://github.com/sponsors/carlospolop) kontrol edin!
* **ğŸ’¬ [**Discord grubuna**](https://discord.gg/hRep4RUj7f) veya [**telegram grubuna**](https://t.me/peass) katÄ±lÄ±n ya da **Twitter**'da **bizi takip edin** ğŸ¦ [**@hacktricks\_live**](https://twitter.com/hacktricks\_live)**.**
* **Hacking ipuÃ§larÄ±nÄ± paylaÅŸmak iÃ§in** [**HackTricks**](https://github.com/carlospolop/hacktricks) ve [**HackTricks Cloud**](https://github.com/carlospolop/hacktricks-cloud) github reposuna PR gÃ¶nderin.

</details>
{% endhint %}

## Cloud Run <a href="#reviewing-cloud-run-configurations" id="reviewing-cloud-run-configurations"></a>

Cloud Run, Google'Ä±n Ã¶lÃ§eklenebilir altyapÄ±sÄ±nÄ±n Ã¼zerinde doÄŸrudan **konteyner Ã§alÄ±ÅŸtÄ±rmanÄ±za** olanak tanÄ±yan sunucusuz yÃ¶netilen bir hesaplama platformudur.

Konteynerinizi Ã§alÄ±ÅŸtÄ±rabilir veya Go, Node.js, Python, Java, .NET Core veya Ruby kullanÄ±yorsanÄ±z, **konteyneri sizin iÃ§in oluÅŸturan** [source-based deployment](https://cloud.google.com/run/docs/deploying-source-code) seÃ§eneÄŸini kullanabilirsiniz.

Google, Cloud Run'Ä± **Google Cloud'daki diÄŸer hizmetlerle iyi Ã§alÄ±ÅŸacak ÅŸekilde** inÅŸa etmiÅŸtir, bÃ¶ylece tam Ã¶zellikli uygulamalar oluÅŸturabilirsiniz.

### Hizmetler ve iÅŸler <a href="#services-and-jobs" id="services-and-jobs"></a>

Cloud Run'da, kodunuz ya bir _**hizmet**_ olarak ya da bir _**iÅŸ**_ olarak sÃ¼rekli Ã§alÄ±ÅŸabilir. Hem hizmetler hem de iÅŸler aynÄ± ortamda Ã§alÄ±ÅŸÄ±r ve Google Cloud'daki diÄŸer hizmetlerle aynÄ± entegrasyonlarÄ± kullanabilir.

* **Cloud Run hizmetleri.** Web isteklerine veya olaylara yanÄ±t veren kodu Ã§alÄ±ÅŸtÄ±rmak iÃ§in kullanÄ±lÄ±r.
* **Cloud Run iÅŸleri.** Ä°ÅŸ yapan (bir iÅŸ) kodu Ã§alÄ±ÅŸtÄ±rmak ve iÅŸ tamamlandÄ±ÄŸÄ±nda Ã§Ä±kmak iÃ§in kullanÄ±lÄ±r.

## Cloud Run Hizmeti

Google [Cloud Run](https://cloud.google.com/run), Ã§evresel deÄŸiÅŸkenleri arayabileceÄŸiniz baÅŸka bir sunucusuz tekliftir. Cloud Run, varsayÄ±lan olarak konteyner iÃ§inde 8080 numaralÄ± portta Ã§alÄ±ÅŸan kÃ¼Ã§Ã¼k bir web sunucusu oluÅŸturur ve bir HTTP GET isteÄŸi bekler. Ä°stek alÄ±ndÄ±ÄŸÄ±nda, bir iÅŸ yÃ¼rÃ¼tÃ¼lÃ¼r ve iÅŸ gÃ¼nlÃ¼ÄŸÃ¼ bir HTTP yanÄ±tÄ± aracÄ±lÄ±ÄŸÄ±yla Ã§Ä±ktÄ±lanÄ±r.

### Ä°lgili detaylar

* **VarsayÄ±lan olarak**, web sunucusuna **eriÅŸim** **genel** olup, **iÃ§ trafikle** (VPC...) **sÄ±nÄ±rlÄ±** hale getirilebilir.\
AyrÄ±ca, web sunucusuna eriÅŸim iÃ§in **tÃ¼mÃ¼nÃ¼ kabul etme** veya **IAM aracÄ±lÄ±ÄŸÄ±yla kimlik doÄŸrulama gerektirme** seÃ§enekleri vardÄ±r.
* VarsayÄ±lan olarak, **ÅŸifreleme** **Google yÃ¶netimli anahtar** kullanÄ±r, ancak **KMS**'den bir **CMEK** (MÃ¼ÅŸteri YÃ¶netimli Åifreleme AnahtarÄ±) de **seÃ§ilebilir**.
* **VarsayÄ±lan olarak**, kullanÄ±lan **hizmet hesabÄ±** **Compute Engine varsayÄ±lanÄ±**dÄ±r ve projeye **EditÃ¶r** eriÅŸimi vardÄ±r ve **`cloud-platform`** kapsamÄ±na sahiptir.
* Ã‡alÄ±ÅŸma iÃ§in **dÃ¼z metin Ã§evresel deÄŸiÅŸkenleri** tanÄ±mlamak mÃ¼mkÃ¼ndÃ¼r ve hatta **bulut sÄ±rlarÄ±nÄ± monte etmek** veya **Ã§evresel deÄŸiÅŸkenlere bulut sÄ±rlarÄ± eklemek** mÃ¼mkÃ¼ndÃ¼r.
* **Cloud SQL ile baÄŸlantÄ±lar eklemek** ve **bir dosya sistemi monte etmek** de mÃ¼mkÃ¼ndÃ¼r.
* DaÄŸÄ±tÄ±lan hizmetlerin **URL'leri** **`https://<svc-name>-<random>.a.run.app`** formatÄ±na benzer.
* Bir Run Hizmeti, **1'den fazla versiyon veya revizyon** alabilir ve **birden fazla revizyon arasÄ±nda trafiÄŸi bÃ¶lÃ¼ÅŸtÃ¼rebilir**.

### Enumeration
```bash
# List services
gcloud run services list
gcloud run services list --platform=managed
gcloud run services list --platform=gke

# Get info of a service
gcloud run services describe --region <region> <svc-name>

# Get info of all the services together
gcloud run services list --format=yaml
gcloud run services list --platform=managed --format=json
gcloud run services list --platform=gke --format=json

# Get policy
gcloud run services get-iam-policy --region <region> <svc-name>

# Get revisions
gcloud run revisions list --region <region>
gcloud run revisions describe --region <region> <revision>

# Get domains
gcloud run domain-mappings list
gcloud run domain-mappings describe <name>

# Attempt to trigger a job unauthenticated
curl <url>

# Attempt to trigger a job with your current gcloud authorization
curl -H "Authorization: Bearer $(gcloud auth print-identity-token)" <url>
```
## Cloud Run Ä°ÅŸleri

Cloud Run iÅŸleri, **tamamlanmak iÃ§in Ã§alÄ±ÅŸan ve istekleri sunmayan konteynerler iÃ§in daha uygun** bir seÃ§enektir. Ä°ÅŸlerin istekleri sunma veya bir portta dinleme yeteneÄŸi yoktur. Bu, Cloud Run hizmetlerinin aksine, iÅŸlerin bir web sunucusu iÃ§ermemesi gerektiÄŸi anlamÄ±na gelir. Bunun yerine, iÅŸ konteynerleri iÅŸlerini bitirdiklerinde Ã§Ä±kmalÄ±dÄ±r.

### SayÄ±m
```bash
gcloud beta run jobs list
gcloud beta run jobs describe --region <region> <job-name>
gcloud beta run jobs get-iam-policy --region <region> <job-name>
```
## Yetki YÃ¼kseltme

AÅŸaÄŸÄ±daki sayfada, **bulut Ã§alÄ±ÅŸtÄ±rma izinlerini kÃ¶tÃ¼ye kullanarak yetki yÃ¼kseltmeyi** nasÄ±l gerÃ§ekleÅŸtirebileceÄŸinizi kontrol edebilirsiniz:

{% content-ref url="../gcp-privilege-escalation/gcp-run-privesc.md" %}
[gcp-run-privesc.md](../gcp-privilege-escalation/gcp-run-privesc.md)
{% endcontent-ref %}

## Kimlik DoÄŸrulamasÄ± Olmadan EriÅŸim

{% content-ref url="../gcp-unaunthenticated-enum-and-access/gcp-cloud-run-unauthenticated-enum.md" %}
[gcp-cloud-run-unauthenticated-enum.md](../gcp-unaunthenticated-enum-and-access/gcp-cloud-run-unauthenticated-enum.md)
{% endcontent-ref %}

## SÃ¶mÃ¼rÃ¼ SonrasÄ±

{% content-ref url="../gcp-post-exploitation/gcp-cloud-run-post-exploitation.md" %}
[gcp-cloud-run-post-exploitation.md](../gcp-post-exploitation/gcp-cloud-run-post-exploitation.md)
{% endcontent-ref %}

## SÃ¼reklilik

{% content-ref url="../gcp-persistence/gcp-cloud-run-persistence.md" %}
[gcp-cloud-run-persistence.md](../gcp-persistence/gcp-cloud-run-persistence.md)
{% endcontent-ref %}

## Referanslar

* [https://cloud.google.com/run/docs/overview/what-is-cloud-run](https://cloud.google.com/run/docs/overview/what-is-cloud-run)

{% hint style="success" %}
AWS Hacking'i Ã¶ÄŸrenin ve pratik yapÄ±n:<img src="../../../.gitbook/assets/image (1).png" alt="" data-size="line">[**HackTricks Training AWS Red Team Expert (ARTE)**](https://training.hacktricks.xyz/courses/arte)<img src="../../../.gitbook/assets/image (1).png" alt="" data-size="line">\
GCP Hacking'i Ã¶ÄŸrenin ve pratik yapÄ±n: <img src="../../../.gitbook/assets/image (2).png" alt="" data-size="line">[**HackTricks Training GCP Red Team Expert (GRTE)**<img src="../../../.gitbook/assets/image (2).png" alt="" data-size="line">](https://training.hacktricks.xyz/courses/grte)

<details>

<summary>HackTricks'i Destekleyin</summary>

* [**abonelik planlarÄ±nÄ±**](https://github.com/sponsors/carlospolop) kontrol edin!
* **ğŸ’¬ [**Discord grubuna**](https://discord.gg/hRep4RUj7f) veya [**telegram grubuna**](https://t.me/peass) katÄ±lÄ±n ya da **Twitter'da** ğŸ¦ [**@hacktricks\_live**](https://twitter.com/hacktricks\_live)**'i takip edin.**
* **Hacking ipuÃ§larÄ±nÄ± paylaÅŸmak iÃ§in** [**HackTricks**](https://github.com/carlospolop/hacktricks) ve [**HackTricks Cloud**](https://github.com/carlospolop/hacktricks-cloud) github reposuna PR gÃ¶nderin.

</details>
{% endhint %}
