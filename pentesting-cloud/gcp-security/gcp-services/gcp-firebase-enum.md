# GCP - Firebase Enum

{% hint style="success" %}
AWS Hacking'Ä± Ã¶ÄŸrenin ve uygulayÄ±n:<img src="/.gitbook/assets/image.png" alt="" data-size="line">[**HackTricks EÄŸitim AWS KÄ±rmÄ±zÄ± TakÄ±m UzmanÄ± (ARTE)**](https://training.hacktricks.xyz/courses/arte)<img src="/.gitbook/assets/image.png" alt="" data-size="line">\
GCP Hacking'ini Ã¶ÄŸrenin ve uygulayÄ±n: <img src="/.gitbook/assets/image (2).png" alt="" data-size="line">[**HackTricks EÄŸitim GCP KÄ±rmÄ±zÄ± TakÄ±m UzmanÄ± (GRTE)**<img src="/.gitbook/assets/image (2).png" alt="" data-size="line">](https://training.hacktricks.xyz/courses/grte)

<details>

<summary>HackTricks'i Destekleyin</summary>

* [**Abonelik planlarÄ±nÄ±**](https://github.com/sponsors/carlospolop) kontrol edin!
* ğŸ’¬ [**Discord grubuna**](https://discord.gg/hRep4RUj7f) katÄ±lÄ±n veya [**telegram grubuna**](https://t.me/peass) katÄ±lÄ±n veya bizi **Twitter** ğŸ¦ [**@hacktricks\_live**](https://twitter.com/hacktricks\_live)** takip edin.**
* **HackTricks** ve **HackTricks Cloud** github depolarÄ±na PR gÃ¶ndererek hacking pÃ¼f noktalarÄ±nÄ± paylaÅŸÄ±n.

</details>
{% endhint %}

## [Firebase](https://cloud.google.com/sdk/gcloud/reference/firebase/)

Firebase GerÃ§ek ZamanlÄ± VeritabanÄ±, kullanÄ±cÄ±larÄ±nÄ±z arasÄ±nda veri depolamanÄ±za ve senkronize etmenize olanak tanÄ±yan bir bulut barÄ±ndÄ±rma NoSQL veritabanÄ±dÄ±r. [Daha fazla bilgi edinin](https://firebase.google.com/products/realtime-database/).

### Kimlik DoÄŸrulamasÄ±z Enum

BazÄ± **Firebase uÃ§ noktalarÄ±**, **mobil uygulamalarda** bulunabilir. KullanÄ±lan Firebase uÃ§ noktasÄ±nÄ±n **yanlÄ±ÅŸ yapÄ±landÄ±rÄ±lmÄ±ÅŸ olabileceÄŸi ve herkese okuma (ve yazma) ayrÄ±calÄ±klarÄ± verilmiÅŸ olabileceÄŸi** mÃ¼mkÃ¼ndÃ¼r.

KÃ¶tÃ¼ yapÄ±landÄ±rÄ±lmÄ±ÅŸ Firebase veritabanlarÄ±nÄ± aramak ve sÃ¶mÃ¼rmek iÃ§in yaygÄ±n metodoloji ÅŸÃ¶yledir:

1. UygulamanÄ±n **APK'sini alÄ±n**, bu POC iÃ§in cihazdan APK'yi almak iÃ§in herhangi bir aracÄ± kullanabilirsiniz.\
â€œAPK Extractorâ€ [https://play.google.com/store/apps/details?id=com.ext.ui\&hl=e](https://hackerone.com/redirect?signature=3774f35d1b5ea8a4fd209d80084daa9f5887b105\&url=https%3A%2F%2Fplay.google.com%2Fstore%2Fapps%2Fdetails%3Fid%3Dcom.ext.ui%26hl%3Den) kullanabilirsiniz
2. APK'yÄ± **apktool** kullanarak **Ã§Ã¶zÃ¼mleyin**, kaynak kodunu APK'dan Ã§Ä±karmak iÃ§in aÅŸaÄŸÄ±daki komutu izleyin.
3. _**res/values/strings.xml**_ dosyasÄ±na gidin ve burada â€œ**firebase**â€ anahtar kelimesini **aramaya** baÅŸlayÄ±n
4. Muhtemelen ÅŸu URL'yi bulabilirsiniz: â€œ_**https://xyz.firebaseio.com/**_â€
5. Sonra tarayÄ±cÄ±ya gidin ve bulunan URL'ye **gidin**: _https://xyz.firebaseio.com/.json_
6. 2 tÃ¼r yanÄ±t gÃ¶rÃ¼nebilir:
1. â€œ**Ä°zin Reddedildi**â€: Bu, eriÅŸiminizin olmadÄ±ÄŸÄ± anlamÄ±na gelir, yani iyi yapÄ±landÄ±rÄ±lmÄ±ÅŸtÄ±r
2. â€œ**null**â€ yanÄ±tÄ± veya bir dizi **JSON verisi**: Bu, veritabanÄ±nÄ±n herkese aÃ§Ä±k olduÄŸu ve en azÄ±ndan okuma eriÅŸiminizin olduÄŸu anlamÄ±na gelir.
1. Bu durumda, **yazma ayrÄ±calÄ±klarÄ±nÄ± kontrol edebilirsiniz**, yazma ayrÄ±calÄ±klarÄ±nÄ± test etmek iÃ§in bir sÃ¶mÃ¼rÃ¼ burada bulunabilir: [https://github.com/MuhammadKhizerJaved/Insecure-Firebase-Exploit](https://github.com/MuhammadKhizerJaved/Insecure-Firebase-Exploit)

**Ä°lginÃ§ not**: Bir mobil uygulamayÄ± **MobSF** ile analiz ederken, bir firebase veritabanÄ± bulursa bunun **herkese aÃ§Ä±k olup olmadÄ±ÄŸÄ±nÄ± kontrol edecek** ve bildirecektir.

Alternatif olarak, yukarÄ±daki iÅŸlemi otomatikleÅŸtiren bir python betiÄŸi olan [Firebase TarayÄ±cÄ±yÄ±](https://github.com/shivsahni/FireBaseScanner) kullanabilirsiniz.
```bash
python FirebaseScanner.py -f <commaSeperatedFirebaseProjectNames>
```
### DoÄŸrulanmÄ±ÅŸ SÄ±ralama

Firebase veritabanÄ±na eriÅŸim kimlik bilgileriniz varsa, depolanan bilgilere daha kolay eriÅŸmek iÃ§in [**Baserunner**](https://github.com/iosiro/baserunner) gibi bir aracÄ± kullanabilirsiniz. Veya aÅŸaÄŸÄ±daki gibi bir betik:
```python
#Taken from https://blog.assetnote.io/bug-bounty/2020/02/01/expanding-attack-surface-react-native/
import pyrebase

config = {
"apiKey": "FIREBASE_API_KEY",
"authDomain": "FIREBASE_AUTH_DOMAIN_ID.firebaseapp.com",
"databaseURL": "https://FIREBASE_AUTH_DOMAIN_ID.firebaseio.com",
"storageBucket": "FIREBASE_AUTH_DOMAIN_ID.appspot.com",
}

firebase = pyrebase.initialize_app(config)

db = firebase.database()

print(db.get())
```
### APPID ve API AnahtarÄ± ile EriÅŸim Bilgilerine EriÅŸme <a href="#access-info-with-appid-and-api-key" id="access-info-with-appid-and-api-key"></a>

iOS uygulamasÄ±nÄ± decompile edip `GoogleService-Info.plist` dosyasÄ±nÄ± aÃ§arsanÄ±z API AnahtarÄ± ve APP ID'yi bulabilirsiniz:

* API ANAHTARI **AIzaSyAs1\[...]**
* APP ID **1:612345678909:ios:c212345678909876**

BazÄ± ilginÃ§ bilgilere eriÅŸebilirsiniz

**Ä°stek**

`curl -v -X POST "https://firebaseremoteconfig.googleapis.com/v1/projects/612345678909/namespaces/firebase:fetch?key=AIzaSyAs1[...]" -H "Content-Type: application/json" --data '{"appId": "1:612345678909:ios:c212345678909876", "appInstanceId": "PROD"}'`

## Referanslar <a href="#references" id="references"></a>

* â€‹[https://blog.securitybreached.org/2020/02/04/exploiting-insecure-firebase-database-bugbounty/](https://blog.securitybreached.org/2020/02/04/exploiting-insecure-firebase-database-bugbounty/)â€‹
* â€‹[https://medium.com/@danangtriatmaja/firebase-database-takover-b7929bbb62e1](https://medium.com/@danangtriatmaja/firebase-database-takover-b7929bbb62e1)â€‹
