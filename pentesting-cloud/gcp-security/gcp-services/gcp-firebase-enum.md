# GCP - Firebase Enum

{% hint style="success" %}
Learn & practice AWS Hacking:<img src="../../../.gitbook/assets/image (1) (1).png" alt="" data-size="line">[**HackTricks Training AWS Red Team Expert (ARTE)**](https://training.hacktricks.xyz/courses/arte)<img src="../../../.gitbook/assets/image (1) (1).png" alt="" data-size="line">\
Learn & practice GCP Hacking: <img src="../../../.gitbook/assets/image (2).png" alt="" data-size="line">[**HackTricks Training GCP Red Team Expert (GRTE)**<img src="../../../.gitbook/assets/image (2).png" alt="" data-size="line">](https://training.hacktricks.xyz/courses/grte)

<details>

<summary>Support HackTricks</summary>

* Check the [**subscription plans**](https://github.com/sponsors/carlospolop)!
* **Join the** ğŸ’¬ [**Discord group**](https://discord.gg/hRep4RUj7f) or the [**telegram group**](https://t.me/peass) or **follow** us on **Twitter** ğŸ¦ [**@hacktricks\_live**](https://twitter.com/hacktricks\_live)**.**
* **Share hacking tricks by submitting PRs to the** [**HackTricks**](https://github.com/carlospolop/hacktricks) and [**HackTricks Cloud**](https://github.com/carlospolop/hacktricks-cloud) github repos.

</details>
{% endhint %}

## [Firebase](https://cloud.google.com/sdk/gcloud/reference/firebase/)

Firebase Realtime Databaseã¯ã€ãƒ¦ãƒ¼ã‚¶ãƒ¼é–“ã§ãƒ‡ãƒ¼ã‚¿ã‚’ãƒªã‚¢ãƒ«ã‚¿ã‚¤ãƒ ã§ä¿å­˜ãŠã‚ˆã³åŒæœŸã§ãã‚‹ã‚¯ãƒ©ã‚¦ãƒ‰ãƒ›ã‚¹ãƒˆã®NoSQLãƒ‡ãƒ¼ã‚¿ãƒ™ãƒ¼ã‚¹ã§ã™ã€‚[Learn more](https://firebase.google.com/products/realtime-database/)ã€‚

### èªè¨¼ã•ã‚Œã¦ã„ãªã„åˆ—æŒ™

ä¸€éƒ¨ã®**Firebaseã‚¨ãƒ³ãƒ‰ãƒã‚¤ãƒ³ãƒˆ**ã¯**ãƒ¢ãƒã‚¤ãƒ«ã‚¢ãƒ—ãƒªã‚±ãƒ¼ã‚·ãƒ§ãƒ³**ã«å­˜åœ¨ã™ã‚‹å¯èƒ½æ€§ãŒã‚ã‚Šã¾ã™ã€‚ä½¿ç”¨ã•ã‚Œã¦ã„ã‚‹Firebaseã‚¨ãƒ³ãƒ‰ãƒã‚¤ãƒ³ãƒˆãŒ**ä¸é©åˆ‡ã«æ§‹æˆã•ã‚Œã¦ãŠã‚Šã€èª°ã§ã‚‚èª­ã¿å–ã‚Šï¼ˆãŠã‚ˆã³æ›¸ãè¾¼ã¿ï¼‰æ¨©é™ã‚’æŒã£ã¦ã„ã‚‹**å¯èƒ½æ€§ãŒã‚ã‚Šã¾ã™ã€‚

ã“ã‚Œã¯ã€ä¸é©åˆ‡ã«æ§‹æˆã•ã‚ŒãŸFirebaseãƒ‡ãƒ¼ã‚¿ãƒ™ãƒ¼ã‚¹ã‚’æ¤œç´¢ã—ã¦æ‚ªç”¨ã™ã‚‹ãŸã‚ã®ä¸€èˆ¬çš„ãªæ–¹æ³•è«–ã§ã™ï¼š

1. **APKã‚’å–å¾—**ã—ã¾ã™ã€‚POCã®ãŸã‚ã«ãƒ‡ãƒã‚¤ã‚¹ã‹ã‚‰APKã‚’å–å¾—ã™ã‚‹ãŸã‚ã«ä»»æ„ã®ãƒ„ãƒ¼ãƒ«ã‚’ä½¿ç”¨ã§ãã¾ã™ã€‚\
ã€ŒAPK Extractorã€ã‚’ä½¿ç”¨ã§ãã¾ã™ [https://play.google.com/store/apps/details?id=com.ext.ui\&hl=e](https://hackerone.com/redirect?signature=3774f35d1b5ea8a4fd209d80084daa9f5887b105\&url=https%3A%2F%2Fplay.google.com%2Fstore%2Fapps%2Fdetails%3Fid%3Dcom.ext.ui%26hl%3Den)
2. **apktool**ã‚’ä½¿ç”¨ã—ã¦APKã‚’**ãƒ‡ã‚³ãƒ³ãƒ‘ã‚¤ãƒ«**ã—ã¾ã™ã€‚ä»¥ä¸‹ã®ã‚³ãƒãƒ³ãƒ‰ã«å¾“ã£ã¦APKã‹ã‚‰ã‚½ãƒ¼ã‚¹ã‚³ãƒ¼ãƒ‰ã‚’æŠ½å‡ºã—ã¾ã™ã€‚
3. _**res/values/strings.xml**_ã«ç§»å‹•ã—ã€ã€Œ**firebase**ã€ã‚­ãƒ¼ãƒ¯ãƒ¼ãƒ‰ã‚’**æ¤œç´¢**ã—ã¾ã™ã€‚
4. ã€Œ_**https://xyz.firebaseio.com/**_ã€ã®ã‚ˆã†ãªURLãŒè¦‹ã¤ã‹ã‚‹ã‹ã‚‚ã—ã‚Œã¾ã›ã‚“ã€‚
5. æ¬¡ã«ã€ãƒ–ãƒ©ã‚¦ã‚¶ã«ç§»å‹•ã—ã€è¦‹ã¤ã‘ãŸURLã«**ç§»å‹•**ã—ã¾ã™ï¼š_https://xyz.firebaseio.com/.json_
6. 2ç¨®é¡ã®ãƒ¬ã‚¹ãƒãƒ³ã‚¹ãŒè¡¨ç¤ºã•ã‚Œã‚‹å¯èƒ½æ€§ãŒã‚ã‚Šã¾ã™ï¼š
   1. ã€Œ**Permission Denied**ã€ï¼šã“ã‚Œã¯ã‚¢ã‚¯ã‚»ã‚¹ã§ããªã„ã“ã¨ã‚’æ„å‘³ã—ã€é©åˆ‡ã«æ§‹æˆã•ã‚Œã¦ã„ã¾ã™ã€‚
   2. ã€Œ**null**ã€ãƒ¬ã‚¹ãƒãƒ³ã‚¹ã¾ãŸã¯ä¸€é€£ã®**JSONãƒ‡ãƒ¼ã‚¿**ï¼šã“ã‚Œã¯ãƒ‡ãƒ¼ã‚¿ãƒ™ãƒ¼ã‚¹ãŒå…¬é–‹ã•ã‚Œã¦ãŠã‚Šã€å°‘ãªãã¨ã‚‚èª­ã¿å–ã‚Šã‚¢ã‚¯ã‚»ã‚¹ãŒã‚ã‚‹ã“ã¨ã‚’æ„å‘³ã—ã¾ã™ã€‚
      1. ã“ã®å ´åˆã€**æ›¸ãè¾¼ã¿æ¨©é™ã‚’ç¢ºèª**ã§ãã¾ã™ã€‚æ›¸ãè¾¼ã¿æ¨©é™ã‚’ãƒ†ã‚¹ãƒˆã™ã‚‹ãŸã‚ã®ã‚¨ã‚¯ã‚¹ãƒ—ãƒ­ã‚¤ãƒˆã¯ã“ã“ã«ã‚ã‚Šã¾ã™ï¼š[https://github.com/MuhammadKhizerJaved/Insecure-Firebase-Exploit](https://github.com/MuhammadKhizerJaved/Insecure-Firebase-Exploit)

**èˆˆå‘³æ·±ã„æ³¨è¨˜**ï¼š**MobSF**ã‚’ä½¿ç”¨ã—ã¦ãƒ¢ãƒã‚¤ãƒ«ã‚¢ãƒ—ãƒªã‚±ãƒ¼ã‚·ãƒ§ãƒ³ã‚’åˆ†æã™ã‚‹éš›ã€Firebaseãƒ‡ãƒ¼ã‚¿ãƒ™ãƒ¼ã‚¹ãŒè¦‹ã¤ã‹ã‚‹ã¨ã€ãã‚ŒãŒ**å…¬é–‹ã•ã‚Œã¦ã„ã‚‹ã‹ã©ã†ã‹**ã‚’ç¢ºèªã—ã€é€šçŸ¥ã—ã¾ã™ã€‚

ã¾ãŸã€[Firebase Scanner](https://github.com/shivsahni/FireBaseScanner)ã‚’ä½¿ç”¨ã™ã‚‹ã“ã¨ã‚‚ã§ãã¾ã™ã€‚ã“ã‚Œã¯ã€ä¸Šè¨˜ã®ã‚¿ã‚¹ã‚¯ã‚’è‡ªå‹•åŒ–ã™ã‚‹Pythonã‚¹ã‚¯ãƒªãƒ—ãƒˆã§ã™ã€‚
```bash
python FirebaseScanner.py -f <commaSeperatedFirebaseProjectNames>
```
### Authenticated Enum

Firebaseãƒ‡ãƒ¼ã‚¿ãƒ™ãƒ¼ã‚¹ã«ã‚¢ã‚¯ã‚»ã‚¹ã™ã‚‹ãŸã‚ã®è³‡æ ¼æƒ…å ±ãŒã‚ã‚‹å ´åˆã€[**Baserunner**](https://github.com/iosiro/baserunner)ã®ã‚ˆã†ãªãƒ„ãƒ¼ãƒ«ã‚’ä½¿ç”¨ã—ã¦ã€ä¿å­˜ã•ã‚ŒãŸæƒ…å ±ã«ã‚ˆã‚Šç°¡å˜ã«ã‚¢ã‚¯ã‚»ã‚¹ã§ãã¾ã™ã€‚ã¾ãŸã¯ã€æ¬¡ã®ã‚ˆã†ãªã‚¹ã‚¯ãƒªãƒ—ãƒˆã‚’ä½¿ç”¨ã§ãã¾ã™:
```python
#Taken from https://blog.assetnote.io/bug-bounty/2020/02/01/expanding-attack-surface-react-native/
#Install pyrebase: pip install pyrebase4
import pyrebase

config = {
"apiKey": "FIREBASE_API_KEY",
"authDomain": "FIREBASE_AUTH_DOMAIN_ID.firebaseapp.com",
"databaseURL": "https://FIREBASE_AUTH_DOMAIN_ID.firebaseio.com",
"storageBucket": "FIREBASE_AUTH_DOMAIN_ID.appspot.com",
}

firebase = pyrebase.initialize_app(config)

db = firebase.database()

print(db.get())
```
ä»–ã®ãƒ‡ãƒ¼ã‚¿ãƒ™ãƒ¼ã‚¹ã‚¢ã‚¯ã‚·ãƒ§ãƒ³ã‚’ãƒ†ã‚¹ãƒˆã™ã‚‹ã«ã¯ã€ãƒ‡ãƒ¼ã‚¿ãƒ™ãƒ¼ã‚¹ã¸ã®æ›¸ãè¾¼ã¿ãªã©ã€[ã“ã“](https://github.com/nhorvath/Pyrebase4)ã«ã‚ã‚‹Pyrebase4ã®ãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆã‚’å‚ç…§ã—ã¦ãã ã•ã„ã€‚

### APPIDã¨APIã‚­ãƒ¼ã§æƒ…å ±ã«ã‚¢ã‚¯ã‚»ã‚¹ã™ã‚‹ <a href="#access-info-with-appid-and-api-key" id="access-info-with-appid-and-api-key"></a>

iOSã‚¢ãƒ—ãƒªã‚±ãƒ¼ã‚·ãƒ§ãƒ³ã‚’é€†ã‚³ãƒ³ãƒ‘ã‚¤ãƒ«ã—ã€`GoogleService-Info.plist`ãƒ•ã‚¡ã‚¤ãƒ«ã‚’é–‹ãã¨ã€APIã‚­ãƒ¼ã¨APP IDãŒè¦‹ã¤ã‹ã‚‹å ´åˆãŒã‚ã‚Šã¾ã™ï¼š

* API KEY **AIzaSyAs1\[...]**
* APP ID **1:612345678909:ios:c212345678909876**

èˆˆå‘³æ·±ã„æƒ…å ±ã«ã‚¢ã‚¯ã‚»ã‚¹ã§ãã‚‹ã‹ã‚‚ã—ã‚Œã¾ã›ã‚“ã€‚

**ãƒªã‚¯ã‚¨ã‚¹ãƒˆ**

`curl -v -X POST "https://firebaseremoteconfig.googleapis.com/v1/projects/612345678909/namespaces/firebase:fetch?key=AIzaSyAs1[...]" -H "Content-Type: application/json" --data '{"appId": "1:612345678909:ios:c212345678909876", "appInstanceId": "PROD"}'`

## å‚è€ƒæ–‡çŒ® <a href="#references" id="references"></a>

* â€‹[https://blog.securitybreached.org/2020/02/04/exploiting-insecure-firebase-database-bugbounty/](https://blog.securitybreached.org/2020/02/04/exploiting-insecure-firebase-database-bugbounty/)â€‹
* â€‹[https://medium.com/@danangtriatmaja/firebase-database-takover-b7929bbb62e1](https://medium.com/@danangtriatmaja/firebase-database-takover-b7929bbb62e1)â€‹

{% hint style="success" %}
AWSãƒãƒƒã‚­ãƒ³ã‚°ã‚’å­¦ã³ã€ç·´ç¿’ã™ã‚‹ï¼š<img src="../../../.gitbook/assets/image (1) (1).png" alt="" data-size="line">[**HackTricks Training AWS Red Team Expert (ARTE)**](https://training.hacktricks.xyz/courses/arte)<img src="../../../.gitbook/assets/image (1) (1).png" alt="" data-size="line">\
GCPãƒãƒƒã‚­ãƒ³ã‚°ã‚’å­¦ã³ã€ç·´ç¿’ã™ã‚‹ï¼š<img src="../../../.gitbook/assets/image (2).png" alt="" data-size="line">[**HackTricks Training GCP Red Team Expert (GRTE)**<img src="../../../.gitbook/assets/image (2).png" alt="" data-size="line">](https://training.hacktricks.xyz/courses/grte)

<details>

<summary>HackTricksã‚’ã‚µãƒãƒ¼ãƒˆã™ã‚‹</summary>

* [**ã‚µãƒ–ã‚¹ã‚¯ãƒªãƒ—ã‚·ãƒ§ãƒ³ãƒ—ãƒ©ãƒ³**](https://github.com/sponsors/carlospolop)ã‚’ç¢ºèªã—ã¦ãã ã•ã„ï¼
* **ğŸ’¬ [**Discordã‚°ãƒ«ãƒ¼ãƒ—**](https://discord.gg/hRep4RUj7f)ã¾ãŸã¯[**ãƒ†ãƒ¬ã‚°ãƒ©ãƒ ã‚°ãƒ«ãƒ¼ãƒ—**](https://t.me/peass)ã«å‚åŠ ã™ã‚‹ã‹ã€**Twitter** ğŸ¦ [**@hacktricks\_live**](https://twitter.com/hacktricks\_live)**ã‚’ãƒ•ã‚©ãƒ­ãƒ¼ã—ã¦ãã ã•ã„ã€‚**
* **[**HackTricks**](https://github.com/carlospolop/hacktricks)ãŠã‚ˆã³[**HackTricks Cloud**](https://github.com/carlospolop/hacktricks-cloud)ã®GitHubãƒªãƒã‚¸ãƒˆãƒªã«PRã‚’æå‡ºã—ã¦ãƒãƒƒã‚­ãƒ³ã‚°ãƒˆãƒªãƒƒã‚¯ã‚’å…±æœ‰ã—ã¦ãã ã•ã„ã€‚**

</details>
{% endhint %}
