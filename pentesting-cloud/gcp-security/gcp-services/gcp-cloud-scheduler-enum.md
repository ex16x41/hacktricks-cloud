# GCP - Cloud Scheduler Enum

{% hint style="success" %}
Leer & oefen AWS Hacking:<img src="../../../.gitbook/assets/image (1) (1).png" alt="" data-size="line">[**HackTricks Training AWS Red Team Expert (ARTE)**](https://training.hacktricks.xyz/courses/arte)<img src="../../../.gitbook/assets/image (1) (1).png" alt="" data-size="line">\
Leer & oefen GCP Hacking: <img src="../../../.gitbook/assets/image (2).png" alt="" data-size="line">[**HackTricks Training GCP Red Team Expert (GRTE)**<img src="../../../.gitbook/assets/image (2).png" alt="" data-size="line">](https://training.hacktricks.xyz/courses/grte)

<details>

<summary>Ondersteun HackTricks</summary>

* Kyk na die [**subskripsie planne**](https://github.com/sponsors/carlospolop)!
* **Sluit aan by die** üí¨ [**Discord groep**](https://discord.gg/hRep4RUj7f) of die [**telegram groep**](https://t.me/peass) of **volg** ons op **Twitter** üê¶ [**@hacktricks\_live**](https://twitter.com/hacktricks\_live)**.**
* **Deel hacking truuks deur PRs in te dien na die** [**HackTricks**](https://github.com/carlospolop/hacktricks) en [**HackTricks Cloud**](https://github.com/carlospolop/hacktricks-cloud) github repos.

</details>
{% endhint %}

## Basiese Inligting

Google Cloud Scheduler is 'n volledig bestuurde **cron job diens** wat jou toelaat om arbitr√™re werksgeleenthede‚Äîsoos batch, groot data werksgeleenthede, wolk infrastruktuur operasies‚Äîop vasgestelde tye, datums, of intervalls uit te voer. Dit is ge√Øntegreer met Google Cloud dienste, wat 'n manier bied om **verskeie take soos opdaterings of batch verwerking op 'n gereelde skedule te outomatiseer**.

Alhoewel dit vanuit 'n offensiewe oogpunt wonderlik klink, is dit eintlik nie so interessant nie omdat die diens net toelaat om sekere eenvoudige aksies op 'n sekere tyd te skeduleer en nie arbitr√™re kode uit te voer nie.

Op die oomblik van hierdie skrywe is dit die aksies wat hierdie diens toelaat om te skeduleer:

<figure><img src="../../../.gitbook/assets/image (347).png" alt="" width="563"><figcaption></figcaption></figure>

* **HTTP**: Stuur 'n HTTP versoek wat die koptekste en liggaam van die versoek definieer.
* **Pub/Sub**: Stuur 'n boodskap na 'n spesifieke onderwerp.
* **App Engine HTTP**: Stuur 'n HTTP versoek na 'n app gebou in App Engine.
* **Workflows**: Roep 'n GCP Workflow aan.

## Diens Rekeninge

'n Diensrekening is nie altyd vereis deur elke skeduleerder nie. Die **Pub/Sub** en **App Engine HTTP** tipes vereis geen diensrekening nie. Die **Workflow** vereis 'n diensrekening, maar dit sal net die workflow aanroep.\
Laastens, die gewone HTTP tipe vereis nie 'n diensrekening nie, maar dit is moontlik om aan te dui dat 'n soort outentikasie deur die workflow vereis word en om 'n **OAuth token of 'n OIDC token aan die gestuurde** HTTP versoek toe te voeg.

{% hint style="danger" %}
Daarom is dit moontlik om die **OIDC** token te steel en die **OAuth** token van diensrekeninge te misbruik **deur die HTTP tipe te misbruik**. Meer hieroor in die voorregte eskalasie bladsy.
{% endhint %}

Let daarop dat dit moontlik is om die omvang van die gestuurde OAuth token te beperk, egter, standaard sal dit `cloud-platform` wees.

## Enumerasie
```bash
# Get schedulers in a location
gcloud scheduler jobs list --location us-central1

# Get information of an specific scheduler
gcloud scheduler jobs describe --location us-central1 <scheduler-name>
```
## Privilege Escalation

{% content-ref url="../gcp-privilege-escalation/gcp-cloudscheduler-privesc.md" %}
[gcp-cloudscheduler-privesc.md](../gcp-privilege-escalation/gcp-cloudscheduler-privesc.md)
{% endcontent-ref %}

{% hint style="success" %}
Leer & oefen AWS Hacking:<img src="../../../.gitbook/assets/image (1) (1).png" alt="" data-size="line">[**HackTricks Opleiding AWS Red Team Expert (ARTE)**](https://training.hacktricks.xyz/courses/arte)<img src="../../../.gitbook/assets/image (1) (1).png" alt="" data-size="line">\
Leer & oefen GCP Hacking: <img src="../../../.gitbook/assets/image (2).png" alt="" data-size="line">[**HackTricks Opleiding GCP Red Team Expert (GRTE)**<img src="../../../.gitbook/assets/image (2).png" alt="" data-size="line">](https://training.hacktricks.xyz/courses/grte)

<details>

<summary>Ondersteun HackTricks</summary>

* Kyk na die [**subskripsie planne**](https://github.com/sponsors/carlospolop)!
* **Sluit aan by die** üí¨ [**Discord groep**](https://discord.gg/hRep4RUj7f) of die [**telegram groep**](https://t.me/peass) of **volg** ons op **Twitter** üê¶ [**@hacktricks\_live**](https://twitter.com/hacktricks\_live)**.**
* **Deel hacking truuks deur PRs in te dien na die** [**HackTricks**](https://github.com/carlospolop/hacktricks) en [**HackTricks Cloud**](https://github.com/carlospolop/hacktricks-cloud) github repos.

</details>
{% endhint %}
