# GCP - Cloud Scheduler Enum

{% hint style="success" %}
Learn & practice AWS Hacking:<img src="../../../.gitbook/assets/image (1) (1) (1).png" alt="" data-size="line">[**HackTricks Training AWS Red Team Expert (ARTE)**](https://training.hacktricks.xyz/courses/arte)<img src="../../../.gitbook/assets/image (1) (1) (1).png" alt="" data-size="line">\
Learn & practice GCP Hacking: <img src="../../../.gitbook/assets/image (2).png" alt="" data-size="line">[**HackTricks Training GCP Red Team Expert (GRTE)**<img src="../../../.gitbook/assets/image (2).png" alt="" data-size="line">](https://training.hacktricks.xyz/courses/grte)

<details>

<summary>Support HackTricks</summary>

* Check the [**subscription plans**](https://github.com/sponsors/carlospolop)!
* **Join the** üí¨ [**Discord group**](https://discord.gg/hRep4RUj7f) or the [**telegram group**](https://t.me/peass) or **follow** us on **Twitter** üê¶ [**@hacktricks\_live**](https://twitter.com/hacktricks_live)**.**
* **Share hacking tricks by submitting PRs to the** [**HackTricks**](https://github.com/carlospolop/hacktricks) and [**HackTricks Cloud**](https://github.com/carlospolop/hacktricks-cloud) github repos.

</details>
{% endhint %}

## Basic Information

Google Cloud Scheduler est un service de **cron job** enti√®rement g√©r√© qui vous permet d'ex√©cuter des t√¢ches arbitraires‚Äîcomme des t√¢ches par lots, des t√¢ches de big data, des op√©rations d'infrastructure cloud‚Äî√† des moments, dates ou intervalles fixes. Il est int√©gr√© aux services Google Cloud, offrant un moyen d'**automatiser diverses t√¢ches comme des mises √† jour ou un traitement par lots selon un calendrier r√©gulier**.

Bien que cela semble incroyable d'un point de vue offensif, ce n'est en r√©alit√© pas si int√©ressant car le service ne permet que de planifier certaines actions simples √† un moment donn√© et non d'ex√©cuter du code arbitraire.

Au moment de la r√©daction, voici les actions que ce service permet de planifier :

<figure><img src="../../../.gitbook/assets/image (347).png" alt="" width="563"><figcaption></figcaption></figure>

* **HTTP** : Envoyer une requ√™te HTTP en d√©finissant les en-t√™tes et le corps de la requ√™te.
* **Pub/Sub** : Envoyer un message dans un sujet sp√©cifique.
* **App Engine HTTP** : Envoyer une requ√™te HTTP √† une application construite dans App Engine.
* **Workflows** : Appeler un Workflow GCP.

## Service Accounts

Un compte de service n'est pas toujours requis par chaque planificateur. Les types **Pub/Sub** et **App Engine HTTP** ne n√©cessitent aucun compte de service. Le **Workflow** n√©cessite un compte de service, mais il invoquera simplement le workflow.\
Enfin, le type HTTP r√©gulier ne n√©cessite pas de compte de service, mais il est possible d'indiquer qu'un certain type d'authentification est requis par le workflow et d'ajouter soit un **jeton OAuth soit un jeton OIDC √† la requ√™te HTTP envoy√©e**.

{% hint style="danger" %}
Par cons√©quent, il est possible de voler le **jeton OIDC** et d'abuser du **jeton OAuth** des comptes de service **en abusant du type HTTP**. Plus d'informations √† ce sujet dans la page d'escalade de privil√®ges.
{% endhint %}

Notez qu'il est possible de limiter la port√©e du jeton OAuth envoy√©, cependant, par d√©faut, il sera `cloud-platform`.

## Enumeration
```bash
# Get schedulers in a location
gcloud scheduler jobs list --location us-central1

# Get information of an specific scheduler
gcloud scheduler jobs describe --location us-central1 <scheduler-name>
```
## Escalade de Privil√®ges

{% content-ref url="../gcp-privilege-escalation/gcp-cloudscheduler-privesc.md" %}
[gcp-cloudscheduler-privesc.md](../gcp-privilege-escalation/gcp-cloudscheduler-privesc.md)
{% endcontent-ref %}

{% hint style="success" %}
Apprenez et pratiquez le Hacking AWS :<img src="../../../.gitbook/assets/image (1) (1) (1).png" alt="" data-size="line">[**Formation HackTricks AWS Red Team Expert (ARTE)**](https://training.hacktricks.xyz/courses/arte)<img src="../../../.gitbook/assets/image (1) (1) (1).png" alt="" data-size="line">\
Apprenez et pratiquez le Hacking GCP : <img src="../../../.gitbook/assets/image (2).png" alt="" data-size="line">[**Formation HackTricks GCP Red Team Expert (GRTE)**<img src="../../../.gitbook/assets/image (2).png" alt="" data-size="line">](https://training.hacktricks.xyz/courses/grte)

<details>

<summary>Soutenir HackTricks</summary>

* Consultez les [**plans d'abonnement**](https://github.com/sponsors/carlospolop) !
* **Rejoignez le** üí¨ [**groupe Discord**](https://discord.gg/hRep4RUj7f) ou le [**groupe telegram**](https://t.me/peass) ou **suivez** nous sur **Twitter** üê¶ [**@hacktricks\_live**](https://twitter.com/hacktricks_live)**.**
* **Partagez des astuces de hacking en soumettant des PR aux** [**HackTricks**](https://github.com/carlospolop/hacktricks) et [**HackTricks Cloud**](https://github.com/carlospolop/hacktricks-cloud) d√©p√¥ts github.

</details>
{% endhint %}
