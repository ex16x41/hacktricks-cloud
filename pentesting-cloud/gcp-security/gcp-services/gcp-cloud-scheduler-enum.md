# GCP - Cloud Scheduler Enum

{% hint style="success" %}
Learn & practice AWS Hacking:<img src="../../../.gitbook/assets/image (1).png" alt="" data-size="line">[**HackTricks Training AWS Red Team Expert (ARTE)**](https://training.hacktricks.xyz/courses/arte)<img src="../../../.gitbook/assets/image (1).png" alt="" data-size="line">\
Learn & practice GCP Hacking: <img src="../../../.gitbook/assets/image (2).png" alt="" data-size="line">[**HackTricks Training GCP Red Team Expert (GRTE)**<img src="../../../.gitbook/assets/image (2).png" alt="" data-size="line">](https://training.hacktricks.xyz/courses/grte)

<details>

<summary>Support HackTricks</summary>

* Check the [**subscription plans**](https://github.com/sponsors/carlospolop)!
* **Join the** üí¨ [**Discord group**](https://discord.gg/hRep4RUj7f) or the [**telegram group**](https://t.me/peass) or **follow** us on **Twitter** üê¶ [**@hacktricks\_live**](https://twitter.com/hacktricks\_live)**.**
* **Share hacking tricks by submitting PRs to the** [**HackTricks**](https://github.com/carlospolop/hacktricks) and [**HackTricks Cloud**](https://github.com/carlospolop/hacktricks-cloud) github repos.

</details>
{% endhint %}

## Grundinformationen

Google Cloud Scheduler ist ein vollst√§ndig verwalteter **Cron-Job-Dienst**, der es Ihnen erm√∂glicht, beliebige Jobs ‚Äì wie Batch-, Big-Data-Jobs, Cloud-Infrastrukturoperationen ‚Äì zu festen Zeiten, Daten oder Intervallen auszuf√ºhren. Er ist in Google Cloud-Dienste integriert und bietet eine M√∂glichkeit, **verschiedene Aufgaben wie Updates oder Batch-Verarbeitung nach einem regelm√§√üigen Zeitplan zu automatisieren**.

Obwohl dies aus offensiver Sicht gro√üartig klingt, ist es tats√§chlich nicht so interessant, da der Dienst nur das Planen bestimmter einfacher Aktionen zu einem bestimmten Zeitpunkt und nicht das Ausf√ºhren beliebigen Codes erm√∂glicht.

Zum Zeitpunkt dieses Schreibens sind dies die Aktionen, die dieser Dienst erlaubt zu planen:

<figure><img src="../../../.gitbook/assets/image (347).png" alt="" width="563"><figcaption></figcaption></figure>

* **HTTP**: Senden Sie eine HTTP-Anfrage, die die Header und den Body der Anfrage definiert.
* **Pub/Sub**: Senden Sie eine Nachricht in ein bestimmtes Thema.
* **App Engine HTTP**: Senden Sie eine HTTP-Anfrage an eine in App Engine erstellte App.
* **Workflows**: Rufen Sie einen GCP-Workflow auf.

## Dienstkonten

Ein Dienstkonto ist nicht immer f√ºr jeden Scheduler erforderlich. Die **Pub/Sub**- und **App Engine HTTP**-Typen ben√∂tigen kein Dienstkonto. Der **Workflow** ben√∂tigt ein Dienstkonto, aber es wird nur der Workflow aufgerufen.\
Schlie√ülich ben√∂tigt der regul√§re HTTP-Typ kein Dienstkonto, es ist jedoch m√∂glich anzugeben, dass eine Art von Authentifizierung durch den Workflow erforderlich ist und entweder ein **OAuth-Token oder ein OIDC-Token zur gesendeten** HTTP-Anfrage hinzugef√ºgt wird.

{% hint style="danger" %}
Daher ist es m√∂glich, das **OIDC**-Token zu stehlen und das **OAuth**-Token von Dienstkonten **durch den Missbrauch des HTTP-Typs** auszunutzen. Mehr dazu auf der Seite zur Privilegieneskalation.
{% endhint %}

Beachten Sie, dass es m√∂glich ist, den Umfang des gesendeten OAuth-Tokens zu beschr√§nken, jedoch wird es standardm√§√üig `cloud-platform` sein.

## Enumeration
```bash
# Get schedulers in a location
gcloud scheduler jobs list --location us-central1

# Get information of an specific scheduler
gcloud scheduler jobs describe --location us-central1 <scheduler-name>
```
## Privilegieneskalation

{% content-ref url="../gcp-privilege-escalation/gcp-cloudscheduler-privesc.md" %}
[gcp-cloudscheduler-privesc.md](../gcp-privilege-escalation/gcp-cloudscheduler-privesc.md)
{% endcontent-ref %}

{% hint style="success" %}
Lerne & √ºbe AWS Hacking:<img src="../../../.gitbook/assets/image (1).png" alt="" data-size="line">[**HackTricks Training AWS Red Team Expert (ARTE)**](https://training.hacktricks.xyz/courses/arte)<img src="../../../.gitbook/assets/image (1).png" alt="" data-size="line">\
Lerne & √ºbe GCP Hacking: <img src="../../../.gitbook/assets/image (2).png" alt="" data-size="line">[**HackTricks Training GCP Red Team Expert (GRTE)**<img src="../../../.gitbook/assets/image (2).png" alt="" data-size="line">](https://training.hacktricks.xyz/courses/grte)

<details>

<summary>Unterst√ºtze HackTricks</summary>

* √úberpr√ºfe die [**Abonnementpl√§ne**](https://github.com/sponsors/carlospolop)!
* **Tritt der** üí¨ [**Discord-Gruppe**](https://discord.gg/hRep4RUj7f) oder der [**Telegram-Gruppe**](https://t.me/peass) bei oder **folge** uns auf **Twitter** üê¶ [**@hacktricks\_live**](https://twitter.com/hacktricks\_live)**.**
* **Teile Hacking-Tricks, indem du PRs zu den** [**HackTricks**](https://github.com/carlospolop/hacktricks) und [**HackTricks Cloud**](https://github.com/carlospolop/hacktricks-cloud) GitHub-Repos einreichst.

</details>
{% endhint %}
