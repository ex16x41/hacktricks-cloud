# GCP - Storage Enum

{% hint style="success" %}
Learn & practice AWS Hacking:<img src="../../../.gitbook/assets/image (1) (1) (1).png" alt="" data-size="line">[**HackTricks Training AWS Red Team Expert (ARTE)**](https://training.hacktricks.xyz/courses/arte)<img src="../../../.gitbook/assets/image (1) (1) (1).png" alt="" data-size="line">\
Learn & practice GCP Hacking: <img src="../../../.gitbook/assets/image (2).png" alt="" data-size="line">[**HackTricks Training GCP Red Team Expert (GRTE)**<img src="../../../.gitbook/assets/image (2).png" alt="" data-size="line">](https://training.hacktricks.xyz/courses/grte)

<details>

<summary>Support HackTricks</summary>

* Check the [**subscription plans**](https://github.com/sponsors/carlospolop)!
* **Join the** ğŸ’¬ [**Discord group**](https://discord.gg/hRep4RUj7f) or the [**telegram group**](https://t.me/peass) or **follow** us on **Twitter** ğŸ¦ [**@hacktricks\_live**](https://twitter.com/hacktricks_live)**.**
* **Share hacking tricks by submitting PRs to the** [**HackTricks**](https://github.com/carlospolop/hacktricks) and [**HackTricks Cloud**](https://github.com/carlospolop/hacktricks-cloud) github repos.

</details>
{% endhint %}

## Storage

Google Cloud Platform (GCP) Storageã¯ã€**é«˜ã„è€ä¹…æ€§ã¨å¯ç”¨æ€§ã‚’æä¾›ã™ã‚‹ã‚¯ãƒ©ã‚¦ãƒ‰ãƒ™ãƒ¼ã‚¹ã®ã‚¹ãƒˆãƒ¬ãƒ¼ã‚¸ã‚½ãƒªãƒ¥ãƒ¼ã‚·ãƒ§ãƒ³**ã§ã€éæ§‹é€ åŒ–ãƒ‡ãƒ¼ã‚¿ã®ãŸã‚ã®ã‚ªãƒ–ã‚¸ã‚§ã‚¯ãƒˆã‚¹ãƒˆãƒ¬ãƒ¼ã‚¸ã§ã™ã€‚ãƒ‘ãƒ•ã‚©ãƒ¼ãƒãƒ³ã‚¹ã€å¯ç”¨æ€§ã€ã‚³ã‚¹ãƒˆã«åŸºã¥ã„ã¦ã€Standardã€Nearlineã€Coldlineã€Archiveãªã©ã®**ã•ã¾ã–ã¾ãªã‚¹ãƒˆãƒ¬ãƒ¼ã‚¸ã‚¯ãƒ©ã‚¹**ã‚’æä¾›ã—ã¾ã™ã€‚GCP Storageã¯ã€ãƒ‡ãƒ¼ã‚¿ã‚’åŠ¹æœçš„ã«ç®¡ç†ãŠã‚ˆã³ä¿è­·ã™ã‚‹ãŸã‚ã®**ãƒ©ã‚¤ãƒ•ã‚µã‚¤ã‚¯ãƒ«ãƒãƒªã‚·ãƒ¼ã€ãƒãƒ¼ã‚¸ãƒ§ãƒ³ç®¡ç†ã€ã‚¢ã‚¯ã‚»ã‚¹åˆ¶å¾¡**ãªã©ã®é«˜åº¦ãªæ©Ÿèƒ½ã‚‚æä¾›ã—ã¾ã™ã€‚

ãƒã‚±ãƒƒãƒˆã¯ã€1ã¤ã®ãƒªãƒ¼ã‚¸ãƒ§ãƒ³ã€2ã¤ã®ãƒªãƒ¼ã‚¸ãƒ§ãƒ³ã€ã¾ãŸã¯**ãƒãƒ«ãƒãƒªãƒ¼ã‚¸ãƒ§ãƒ³ï¼ˆãƒ‡ãƒ•ã‚©ãƒ«ãƒˆï¼‰**ã«ä¿å­˜ã§ãã¾ã™ã€‚

### Storage Types

* **Standard Storage**: ã“ã‚Œã¯ãƒ‡ãƒ•ã‚©ãƒ«ãƒˆã®ã‚¹ãƒˆãƒ¬ãƒ¼ã‚¸ã‚ªãƒ—ã‚·ãƒ§ãƒ³ã§ã€**é »ç¹ã«ã‚¢ã‚¯ã‚»ã‚¹ã•ã‚Œã‚‹ãƒ‡ãƒ¼ã‚¿ã¸ã®é«˜æ€§èƒ½ã§ä½é…å»¶ã®ã‚¢ã‚¯ã‚»ã‚¹ã‚’æä¾›**ã—ã¾ã™ã€‚ã‚¦ã‚§ãƒ–ã‚µã‚¤ãƒˆã®ã‚³ãƒ³ãƒ†ãƒ³ãƒ„é…ä¿¡ã€ãƒ¡ãƒ‡ã‚£ã‚¢ã‚¹ãƒˆãƒªãƒ¼ãƒŸãƒ³ã‚°ã€ãƒ‡ãƒ¼ã‚¿åˆ†æãƒ‘ã‚¤ãƒ—ãƒ©ã‚¤ãƒ³ã®ãƒ›ã‚¹ãƒ†ã‚£ãƒ³ã‚°ãªã©ã€å¹…åºƒã„ãƒ¦ãƒ¼ã‚¹ã‚±ãƒ¼ã‚¹ã«é©ã—ã¦ã„ã¾ã™ã€‚
* **Nearline Storage**: ã“ã®ã‚¹ãƒˆãƒ¬ãƒ¼ã‚¸ã‚¯ãƒ©ã‚¹ã¯ã€Standard Storageã‚ˆã‚Šã‚‚**ä½ã„ã‚¹ãƒˆãƒ¬ãƒ¼ã‚¸ã‚³ã‚¹ãƒˆ**ã¨**ã‚„ã‚„é«˜ã„ã‚¢ã‚¯ã‚»ã‚¹ã‚³ã‚¹ãƒˆ**ã‚’æä¾›ã—ã¾ã™ã€‚ã‚¢ã‚¯ã‚»ã‚¹é »åº¦ãŒä½ã„ãƒ‡ãƒ¼ã‚¿ã«æœ€é©åŒ–ã•ã‚Œã¦ãŠã‚Šã€æœ€å°ã‚¹ãƒˆãƒ¬ãƒ¼ã‚¸æœŸé–“ã¯30æ—¥ã§ã™ã€‚ãƒãƒƒã‚¯ã‚¢ãƒƒãƒ—ã‚„ã‚¢ãƒ¼ã‚«ã‚¤ãƒ–ç›®çš„ã«ç†æƒ³çš„ã§ã™ã€‚
* **Coldline Storage**: ã“ã®ã‚¹ãƒˆãƒ¬ãƒ¼ã‚¸ã‚¯ãƒ©ã‚¹ã¯ã€**ã‚¢ã‚¯ã‚»ã‚¹é »åº¦ãŒä½ã„ãƒ‡ãƒ¼ã‚¿ã®é•·æœŸä¿å­˜**ã«æœ€é©åŒ–ã•ã‚Œã¦ãŠã‚Šã€æœ€å°ã‚¹ãƒˆãƒ¬ãƒ¼ã‚¸æœŸé–“ã¯90æ—¥ã§ã™ã€‚Nearline Storageã‚ˆã‚Šã‚‚**ä½ã„ã‚¹ãƒˆãƒ¬ãƒ¼ã‚¸ã‚³ã‚¹ãƒˆ**ã‚’æä¾›ã—ã¾ã™ãŒã€**ã‚¢ã‚¯ã‚»ã‚¹ã‚³ã‚¹ãƒˆã¯é«˜ããªã‚Šã¾ã™**ã€‚
* **Archive Storage**: ã“ã®ã‚¹ãƒˆãƒ¬ãƒ¼ã‚¸ã‚¯ãƒ©ã‚¹ã¯ã€**éå¸¸ã«ä½é »åº¦ã§ã‚¢ã‚¯ã‚»ã‚¹ã•ã‚Œã‚‹å†·ãƒ‡ãƒ¼ã‚¿**ã®ãŸã‚ã«è¨­è¨ˆã•ã‚Œã¦ãŠã‚Šã€æœ€å°ã‚¹ãƒˆãƒ¬ãƒ¼ã‚¸æœŸé–“ã¯365æ—¥ã§ã™ã€‚GCPã‚¹ãƒˆãƒ¬ãƒ¼ã‚¸ã‚ªãƒ—ã‚·ãƒ§ãƒ³ã®ä¸­ã§**æœ€ã‚‚ä½ã„ã‚¹ãƒˆãƒ¬ãƒ¼ã‚¸ã‚³ã‚¹ãƒˆ**ã‚’æä¾›ã—ã¾ã™ãŒã€**æœ€ã‚‚é«˜ã„ã‚¢ã‚¯ã‚»ã‚¹ã‚³ã‚¹ãƒˆ**ãŒã‚ã‚Šã¾ã™ã€‚ã‚³ãƒ³ãƒ—ãƒ©ã‚¤ã‚¢ãƒ³ã‚¹ã‚„è¦åˆ¶ã®ç†ç”±ã§ä¿å­˜ã™ã‚‹å¿…è¦ãŒã‚ã‚‹ãƒ‡ãƒ¼ã‚¿ã®é•·æœŸä¿æŒã«é©ã—ã¦ã„ã¾ã™ã€‚
* **Autoclass**: ãƒ‡ãƒ¼ã‚¿ã«ã©ã‚Œã ã‘ã‚¢ã‚¯ã‚»ã‚¹ã™ã‚‹ã‹åˆ†ã‹ã‚‰ãªã„å ´åˆã¯ã€Autoclassã‚’é¸æŠã™ã‚‹ã¨ã€GCPãŒ**ã‚³ã‚¹ãƒˆã‚’æœ€å°é™ã«æŠ‘ãˆã‚‹ãŸã‚ã«è‡ªå‹•çš„ã«ã‚¹ãƒˆãƒ¬ãƒ¼ã‚¸ã‚¿ã‚¤ãƒ—ã‚’å¤‰æ›´ã—ã¾ã™**ã€‚

### Access Control

**ãƒ‡ãƒ•ã‚©ãƒ«ãƒˆ**ã§ã¯ã€**IAMã‚’ä»‹ã—ã¦ã‚¢ã‚¯ã‚»ã‚¹ã‚’åˆ¶å¾¡ã™ã‚‹ã“ã¨ãŒæ¨å¥¨ã•ã‚Œã¾ã™**ãŒã€**ACLã®ä½¿ç”¨ã‚’æœ‰åŠ¹ã«ã™ã‚‹ã“ã¨ã‚‚å¯èƒ½ã§ã™**ã€‚\
IAMã®ã¿ã‚’ä½¿ç”¨ã™ã‚‹ã“ã¨ã‚’é¸æŠã—ãŸå ´åˆï¼ˆãƒ‡ãƒ•ã‚©ãƒ«ãƒˆï¼‰ã«**90æ—¥ãŒçµŒéã™ã‚‹ã¨**ã€ãƒã‚±ãƒƒãƒˆã«å¯¾ã—ã¦**ACLã‚’æœ‰åŠ¹ã«ã™ã‚‹ã“ã¨ã¯ã§ãã¾ã›ã‚“**ã€‚

### Versioning

ãƒãƒ¼ã‚¸ãƒ§ãƒ³ç®¡ç†ã‚’æœ‰åŠ¹ã«ã™ã‚‹ã“ã¨ãŒå¯èƒ½ã§ã€ã“ã‚Œã«ã‚ˆã‚Š**ãƒã‚±ãƒƒãƒˆå†…ã®ãƒ•ã‚¡ã‚¤ãƒ«ã®å¤ã„ãƒãƒ¼ã‚¸ãƒ§ãƒ³ãŒä¿å­˜ã•ã‚Œã¾ã™**ã€‚**ä¿æŒã—ãŸã„ãƒãƒ¼ã‚¸ãƒ§ãƒ³ã®æ•°**ã‚„ã€**éç¾è¡Œ**ãƒãƒ¼ã‚¸ãƒ§ãƒ³ï¼ˆå¤ã„ãƒãƒ¼ã‚¸ãƒ§ãƒ³ï¼‰ãŒã©ã‚Œã ã‘ã®æœŸé–“ç”Ÿå­˜ã™ã‚‹ã‹ã‚’è¨­å®šã§ãã¾ã™ã€‚Standardã‚¿ã‚¤ãƒ—ã®å ´åˆã¯**7æ—¥é–“ãŒæ¨å¥¨ã•ã‚Œã¾ã™**ã€‚

**éç¾è¡Œãƒãƒ¼ã‚¸ãƒ§ãƒ³ã®ãƒ¡ã‚¿ãƒ‡ãƒ¼ã‚¿ã¯ä¿æŒã•ã‚Œã¾ã™**ã€‚ã•ã‚‰ã«ã€**éç¾è¡Œãƒãƒ¼ã‚¸ãƒ§ãƒ³ã®ACLã‚‚ä¿æŒã•ã‚Œã‚‹ãŸã‚ã€å¤ã„ãƒãƒ¼ã‚¸ãƒ§ãƒ³ã¯ç¾åœ¨ã®ãƒãƒ¼ã‚¸ãƒ§ãƒ³ã¨ã¯ç•°ãªã‚‹ACLã‚’æŒã¤å¯èƒ½æ€§ãŒã‚ã‚Šã¾ã™**ã€‚

è©³ç´°ã¯[**docs**](https://cloud.google.com/storage/docs/object-versioning)ã§ç¢ºèªã—ã¦ãã ã•ã„ã€‚

### Retention Policy

ãƒã‚±ãƒƒãƒˆå†…ã®ã‚ªãƒ–ã‚¸ã‚§ã‚¯ãƒˆã®å‰Šé™¤ã‚’**ç¦æ­¢ã—ãŸã„æœŸé–“**ã‚’æŒ‡å®šã—ã¾ã™ï¼ˆå°‘ãªãã¨ã‚‚ã‚³ãƒ³ãƒ—ãƒ©ã‚¤ã‚¢ãƒ³ã‚¹ã«éå¸¸ã«å½¹ç«‹ã¡ã¾ã™ï¼‰ã€‚\
**ãƒãƒ¼ã‚¸ãƒ§ãƒ³ç®¡ç†ã¾ãŸã¯ä¿æŒãƒãƒªã‚·ãƒ¼ã®ã„ãšã‚Œã‹ä¸€æ–¹ã®ã¿ã‚’åŒæ™‚ã«æœ‰åŠ¹ã«ã§ãã¾ã™**ã€‚

### Encryption

ãƒ‡ãƒ•ã‚©ãƒ«ãƒˆã§ã¯ã€ã‚ªãƒ–ã‚¸ã‚§ã‚¯ãƒˆã¯**Googleç®¡ç†ã®ã‚­ãƒ¼ã‚’ä½¿ç”¨ã—ã¦æš—å·åŒ–ã•ã‚Œã¾ã™**ãŒã€**KMSã®ã‚­ãƒ¼ã‚’ä½¿ç”¨ã™ã‚‹ã“ã¨ã‚‚å¯èƒ½ã§ã™**ã€‚

### Public Access

**å¤–éƒ¨ãƒ¦ãƒ¼ã‚¶ãƒ¼**ï¼ˆGCPã«ãƒ­ã‚°ã‚¤ãƒ³ã—ã¦ã„ã‚‹ã‹ã©ã†ã‹ã«ã‹ã‹ã‚ã‚‰ãšï¼‰ã«**ãƒã‚±ãƒƒãƒˆã®ã‚³ãƒ³ãƒ†ãƒ³ãƒ„ã¸ã®ã‚¢ã‚¯ã‚»ã‚¹ã‚’æä¾›ã™ã‚‹ã“ã¨ãŒå¯èƒ½ã§ã™**ã€‚\
ãƒ‡ãƒ•ã‚©ãƒ«ãƒˆã§ã¯ã€ãƒã‚±ãƒƒãƒˆãŒä½œæˆã•ã‚Œã‚‹ã¨ã€ãƒã‚±ãƒƒãƒˆã‚’å…¬é–‹ã™ã‚‹ã‚ªãƒ—ã‚·ãƒ§ãƒ³ã¯**ç„¡åŠ¹ã«ãªã£ã¦ã„ã¾ã™**ãŒã€ååˆ†ãªæ¨©é™ãŒã‚ã‚Œã°å¤‰æ›´ã§ãã¾ã™ã€‚

ãƒã‚±ãƒƒãƒˆã«ã‚¢ã‚¯ã‚»ã‚¹ã™ã‚‹ãŸã‚ã®**URLã®å½¢å¼**ã¯ã€**`https://storage.googleapis.com/<bucket-name>`ã¾ãŸã¯`https://<bucket_name>.storage.googleapis.com`**ï¼ˆã©ã¡ã‚‰ã‚‚æœ‰åŠ¹ï¼‰ã§ã™ã€‚

### HMAC Keys

HMACã‚­ãƒ¼ã¯ã€_è³‡æ ¼æƒ…å ±_ã®ä¸€ç¨®ã§ã€**Cloud Storageã®ã‚µãƒ¼ãƒ“ã‚¹ã‚¢ã‚«ã‚¦ãƒ³ãƒˆã¾ãŸã¯ãƒ¦ãƒ¼ã‚¶ãƒ¼ã‚¢ã‚«ã‚¦ãƒ³ãƒˆã«é–¢é€£ä»˜ã‘ã‚‹ã“ã¨ãŒã§ãã¾ã™**ã€‚HMACã‚­ãƒ¼ã‚’ä½¿ç”¨ã—ã¦ã€Cloud Storageã¸ã®ãƒªã‚¯ã‚¨ã‚¹ãƒˆã«å«ã¾ã‚Œã‚‹_ç½²å_ã‚’ä½œæˆã—ã¾ã™ã€‚ç½²åã¯ã€**ç‰¹å®šã®ãƒªã‚¯ã‚¨ã‚¹ãƒˆãŒãƒ¦ãƒ¼ã‚¶ãƒ¼ã¾ãŸã¯ã‚µãƒ¼ãƒ“ã‚¹ã‚¢ã‚«ã‚¦ãƒ³ãƒˆã«ã‚ˆã£ã¦æ‰¿èªã•ã‚Œã¦ã„ã‚‹ã“ã¨ã‚’ç¤ºã—ã¾ã™**ã€‚

HMACã‚­ãƒ¼ã«ã¯ã€_ã‚¢ã‚¯ã‚»ã‚¹ID_ã¨_ã‚·ãƒ¼ã‚¯ãƒ¬ãƒƒãƒˆ_ã®2ã¤ã®ä¸»è¦ãªéƒ¨åˆ†ãŒã‚ã‚Šã¾ã™ã€‚

*   **Access ID**: ç‰¹å®šã®ã‚µãƒ¼ãƒ“ã‚¹ã¾ãŸã¯ãƒ¦ãƒ¼ã‚¶ãƒ¼ã‚¢ã‚«ã‚¦ãƒ³ãƒˆã«ãƒªãƒ³ã‚¯ã•ã‚ŒãŸè‹±æ•°å­—ã®æ–‡å­—åˆ—ã€‚ã‚µãƒ¼ãƒ“ã‚¹ã‚¢ã‚«ã‚¦ãƒ³ãƒˆã«ãƒªãƒ³ã‚¯ã•ã‚Œã¦ã„ã‚‹å ´åˆã€æ–‡å­—åˆ—ã¯61æ–‡å­—ã®é•·ã•ã§ã€ãƒ¦ãƒ¼ã‚¶ãƒ¼ã‚¢ã‚«ã‚¦ãƒ³ãƒˆã«ãƒªãƒ³ã‚¯ã•ã‚Œã¦ã„ã‚‹å ´åˆã€æ–‡å­—åˆ—ã¯24æ–‡å­—ã®é•·ã•ã§ã™ã€‚ä»¥ä¸‹ã¯ã‚¢ã‚¯ã‚»ã‚¹IDã®ä¾‹ã§ã™ï¼š

`GOOGTS7C7FUP3AIRVJTE2BCDKINBTES3HC2GY5CBFJDCQ2SYHV6A6XXVTJFSA`
*   **Secret**: ç‰¹å®šã®ã‚¢ã‚¯ã‚»ã‚¹IDã«ãƒªãƒ³ã‚¯ã•ã‚ŒãŸ40æ–‡å­—ã®Base-64ã‚¨ãƒ³ã‚³ãƒ¼ãƒ‰ã•ã‚ŒãŸæ–‡å­—åˆ—ã€‚ã‚·ãƒ¼ã‚¯ãƒ¬ãƒƒãƒˆã¯ã€ã‚ãªãŸã¨Cloud Storageã ã‘ãŒçŸ¥ã£ã¦ã„ã‚‹äº‹å‰å…±æœ‰ã‚­ãƒ¼ã§ã™ã€‚èªè¨¼ãƒ—ãƒ­ã‚»ã‚¹ã®ä¸€éƒ¨ã¨ã—ã¦ç½²åã‚’ä½œæˆã™ã‚‹ãŸã‚ã«ã‚·ãƒ¼ã‚¯ãƒ¬ãƒƒãƒˆã‚’ä½¿ç”¨ã—ã¾ã™ã€‚ä»¥ä¸‹ã¯ã‚·ãƒ¼ã‚¯ãƒ¬ãƒƒãƒˆã®ä¾‹ã§ã™ï¼š

`bGoa+V7g/yqDXvKRqq+JTFn4uQZbPiQJo4pf9RzJ`

**ã‚¢ã‚¯ã‚»ã‚¹IDã¨ã‚·ãƒ¼ã‚¯ãƒ¬ãƒƒãƒˆã¯HMACã‚­ãƒ¼ã‚’ä¸€æ„ã«è­˜åˆ¥ã—ã¾ã™ãŒã€ã‚·ãƒ¼ã‚¯ãƒ¬ãƒƒãƒˆã¯ç½²åã‚’**ä½œæˆã™ã‚‹ãŸã‚ã«ä½¿ç”¨ã•ã‚Œã‚‹ãŸã‚ã€ã¯ã‚‹ã‹ã«æ•æ„Ÿãªæƒ…å ±ã§ã™**ã€‚

### Enumeration
```bash
# List all storage buckets in project
gsutil ls

# Get each bucket configuration (protections, CLs, times, configs...)
gsutil ls -L

# List contents of a specific bucket
gsutil ls gs://bucket-name/
gsutil ls -r gs://bucket-name/ # Recursive
gsutil ls -a gs://bucket-name/ # Get ALL versions of objects

# Cat the context of a file without copying it locally
gsutil cat 'gs://bucket-name/folder/object'
gsutil cat 'gs://bucket-name/folder/object#<num>' # cat specific version

# Copy an object from the bucket to your local storage for review
gsutil cp gs://bucket-name/folder/object ~/

# List using a raw OAuth token
## Useful because "CLOUDSDK_AUTH_ACCESS_TOKEN" and "gcloud config set auth/access_token_file" doesn't work with gsutil
curl -H "Authorization: Bearer $TOKEN" "https://storage.googleapis.com/storage/v1/b/<storage-name>/o"
# Download file content from bucket
curl -H "Authorization: Bearer $TOKEN" "https://storage.googleapis.com/storage/v1/b/supportstorage-58249/o/flag.txt?alt=media" --output -

# Enumerate HMAC keys
gsutil hmac list

# Get permissions
gcloud storage buckets get-iam-policy gs://bucket-name/
gcloud storage objects get-iam-policy gs://bucket-name/folder/object
```
ãƒã‚±ãƒƒãƒˆã®ãƒªã‚¹ãƒˆã‚’å–å¾—ã™ã‚‹éš›ã«ã€Œæ¨©é™ãŒæ‹’å¦ã•ã‚Œã¾ã—ãŸã€ã¨ã„ã†ã‚¨ãƒ©ãƒ¼ãŒè¡¨ç¤ºã•ã‚Œã‚‹å ´åˆã§ã‚‚ã€ã‚³ãƒ³ãƒ†ãƒ³ãƒ„ã«ã‚¢ã‚¯ã‚»ã‚¹ã§ãã‚‹å¯èƒ½æ€§ãŒã‚ã‚Šã¾ã™ã€‚ã—ãŸãŒã£ã¦ã€ãƒã‚±ãƒƒãƒˆã®åå‰ã®è¦å‰‡ã«ã¤ã„ã¦çŸ¥ã£ã¦ã„ã‚‹ã®ã§ã€å¯èƒ½ãªåå‰ã®ãƒªã‚¹ãƒˆã‚’ç”Ÿæˆã—ã€ãã‚Œã‚‰ã«ã‚¢ã‚¯ã‚»ã‚¹ã‚’è©¦ã¿ã‚‹ã“ã¨ãŒã§ãã¾ã™ï¼š
```bash
for i in $(cat wordlist.txt); do gsutil ls -r gs://"$i"; done
```
`storage.objects.list` ã¨ `storage.objects.get` ã®æ¨©é™ãŒã‚ã‚Œã°ã€ãƒã‚±ãƒƒãƒˆå†…ã®ã™ã¹ã¦ã®ãƒ•ã‚©ãƒ«ãƒ€ãƒ¼ã¨ãƒ•ã‚¡ã‚¤ãƒ«ã‚’åˆ—æŒ™ã—ã¦ãƒ€ã‚¦ãƒ³ãƒ­ãƒ¼ãƒ‰ã§ãã‚‹ã¯ãšã§ã™ã€‚ã“ã‚Œã‚’å®Ÿç¾ã™ã‚‹ã«ã¯ã€æ¬¡ã®Pythonã‚¹ã‚¯ãƒªãƒ—ãƒˆã‚’ä½¿ç”¨ã§ãã¾ã™ï¼š
```python
import requests
import xml.etree.ElementTree as ET

def list_bucket_objects(bucket_name, prefix='', marker=None):
url = f"https://storage.googleapis.com/{bucket_name}?prefix={prefix}"
if marker:
url += f"&marker={marker}"
response = requests.get(url)
xml_data = response.content
root = ET.fromstring(xml_data)
ns = {'ns': 'http://doc.s3.amazonaws.com/2006-03-01'}
for contents in root.findall('.//ns:Contents', namespaces=ns):
key = contents.find('ns:Key', namespaces=ns).text
print(key)
next_marker = root.find('ns:NextMarker', namespaces=ns)
if next_marker is not None:
next_marker_value = next_marker.text
list_bucket_objects(bucket_name, prefix, next_marker_value)

list_bucket_objects('<storage-name>')
```
### æ¨©é™æ˜‡æ ¼

æ¬¡ã®ãƒšãƒ¼ã‚¸ã§ã¯ã€**ã‚¹ãƒˆãƒ¬ãƒ¼ã‚¸ã®æ¨©é™ã‚’æ‚ªç”¨ã—ã¦æ¨©é™ã‚’æ˜‡æ ¼ã•ã›ã‚‹æ–¹æ³•**ã‚’ç¢ºèªã§ãã¾ã™ï¼š

{% content-ref url="../gcp-privilege-escalation/gcp-storage-privesc.md" %}
[gcp-storage-privesc.md](../gcp-privilege-escalation/gcp-storage-privesc.md)
{% endcontent-ref %}

### èªè¨¼ã•ã‚Œã¦ã„ãªã„åˆ—æŒ™

{% content-ref url="../gcp-unauthenticated-enum-and-access/gcp-storage-unauthenticated-enum/" %}
[gcp-storage-unauthenticated-enum](../gcp-unauthenticated-enum-and-access/gcp-storage-unauthenticated-enum/)
{% endcontent-ref %}

### ãƒã‚¹ãƒˆã‚¨ã‚¯ã‚¹ãƒ—ãƒ­ã‚¤ãƒˆ

{% content-ref url="../gcp-post-exploitation/gcp-storage-post-exploitation.md" %}
[gcp-storage-post-exploitation.md](../gcp-post-exploitation/gcp-storage-post-exploitation.md)
{% endcontent-ref %}

### æ°¸ç¶šæ€§

{% content-ref url="../gcp-persistence/gcp-storage-persistence.md" %}
[gcp-storage-persistence.md](../gcp-persistence/gcp-storage-persistence.md)
{% endcontent-ref %}

{% hint style="success" %}
AWSãƒãƒƒã‚­ãƒ³ã‚°ã‚’å­¦ã³ã€å®Ÿè·µã™ã‚‹ï¼š<img src="../../../.gitbook/assets/image (1) (1) (1).png" alt="" data-size="line">[**HackTricks Training AWS Red Team Expert (ARTE)**](https://training.hacktricks.xyz/courses/arte)<img src="../../../.gitbook/assets/image (1) (1) (1).png" alt="" data-size="line">\
GCPãƒãƒƒã‚­ãƒ³ã‚°ã‚’å­¦ã³ã€å®Ÿè·µã™ã‚‹ï¼š<img src="../../../.gitbook/assets/image (2).png" alt="" data-size="line">[**HackTricks Training GCP Red Team Expert (GRTE)**<img src="../../../.gitbook/assets/image (2).png" alt="" data-size="line">](https://training.hacktricks.xyz/courses/grte)

<details>

<summary>HackTricksã‚’ã‚µãƒãƒ¼ãƒˆã™ã‚‹</summary>

* [**ã‚µãƒ–ã‚¹ã‚¯ãƒªãƒ—ã‚·ãƒ§ãƒ³ãƒ—ãƒ©ãƒ³**](https://github.com/sponsors/carlospolop)ã‚’ç¢ºèªã—ã¦ãã ã•ã„ï¼
* **ğŸ’¬ [**Discordã‚°ãƒ«ãƒ¼ãƒ—**](https://discord.gg/hRep4RUj7f)ã¾ãŸã¯[**Telegramã‚°ãƒ«ãƒ¼ãƒ—**](https://t.me/peass)ã«å‚åŠ ã™ã‚‹ã‹ã€**Twitter** ğŸ¦ [**@hacktricks\_live**](https://twitter.com/hacktricks_live)**ã‚’ãƒ•ã‚©ãƒ­ãƒ¼ã—ã¦ãã ã•ã„ã€‚**
* **ãƒãƒƒã‚­ãƒ³ã‚°ã®ãƒˆãƒªãƒƒã‚¯ã‚’å…±æœ‰ã™ã‚‹ã«ã¯ã€[**HackTricks**](https://github.com/carlospolop/hacktricks)ãŠã‚ˆã³[**HackTricks Cloud**](https://github.com/carlospolop/hacktricks-cloud)ã®GitHubãƒªãƒã‚¸ãƒˆãƒªã«PRã‚’æå‡ºã—ã¦ãã ã•ã„ã€‚**

</details>
{% endhint %}
