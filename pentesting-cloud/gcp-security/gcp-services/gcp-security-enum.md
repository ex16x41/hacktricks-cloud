# GCP - Security Enum

{% hint style="success" %}
Learn & practice AWS Hacking:<img src="../../../.gitbook/assets/image (1) (1).png" alt="" data-size="line">[**HackTricks Training AWS Red Team Expert (ARTE)**](https://training.hacktricks.xyz/courses/arte)<img src="../../../.gitbook/assets/image (1) (1).png" alt="" data-size="line">\
Learn & practice GCP Hacking: <img src="../../../.gitbook/assets/image (2).png" alt="" data-size="line">[**HackTricks Training GCP Red Team Expert (GRTE)**<img src="../../../.gitbook/assets/image (2).png" alt="" data-size="line">](https://training.hacktricks.xyz/courses/grte)

<details>

<summary>Support HackTricks</summary>

* Check the [**subscription plans**](https://github.com/sponsors/carlospolop)!
* **Join the**  [**Discord group**](https://discord.gg/hRep4RUj7f) or the [**telegram group**](https://t.me/peass) or **follow** us on **Twitter**  [**@hacktricks\_live**](https://twitter.com/hacktricks\_live)**.**
* **Share hacking tricks by submitting PRs to the** [**HackTricks**](https://github.com/carlospolop/hacktricks) and [**HackTricks Cloud**](https://github.com/carlospolop/hacktricks-cloud) github repos.

</details>
{% endhint %}

## Podstawowe informacje

Bezpieczestwo Google Cloud Platform (GCP) obejmuje **kompleksowy zestaw narzdzi** i praktyk zaprojektowanych w celu zapewnienia **bezpieczestwa** zasob贸w i danych w rodowisku Google Cloud, podzielony na cztery g贸wne sekcje: **Centrum Dowodzenia Bezpieczestwem, Wykrywanie i Kontrole, Ochrona Danych oraz Zero Trust.**

## **Centrum Dowodzenia Bezpieczestwem**

Centrum Dowodzenia Bezpieczestwem Google Cloud Platform (GCP) to **narzdzie do zarzdzania bezpieczestwem i ryzykiem dla zasob贸w GCP**, kt贸re umo偶liwia organizacjom uzyskanie wgldu i kontroli nad ich zasobami w chmurze. Pomaga **wykrywa i reagowa na zagro偶enia**, oferujc kompleksow analiz bezpieczestwa, **identyfikujc bdne konfiguracje**, zapewniajc **zgodno** z normami bezpieczestwa oraz **integrujc** si z innymi narzdziami bezpieczestwa w celu automatycznego wykrywania i reagowania na zagro偶enia.

* **Przegld**: Panel do **wizualizacji przegldu** wszystkich wynik贸w Centrum Dowodzenia Bezpieczestwem.
* Zagro偶enia: \[Wymagana subskrypcja Premium\] Panel do wizualizacji wszystkich **wykrytych zagro偶e. Sprawd藕 wicej o zagro偶eniach poni偶ej**
* **Luki**: Panel do **wizualizacji znalezionych bdnych konfiguracji w koncie GCP**.
* **Zgodno**: \[Wymagana subskrypcja Premium\] Ta sekcja pozwala na **testowanie rodowiska GCP pod ktem r贸偶nych kontroli zgodnoci** (takich jak PCI-DSS, NIST 800-53, benchmarki CIS...) w organizacji.
* **Zasoby**: Ta sekcja **pokazuje wszystkie u偶ywane zasoby**, bardzo przydatne dla administrator贸w system贸w (a mo偶e i atakujcych), aby zobaczy, co dziaa na jednej stronie.
* **Wyniki**: To **agreguje** w **tabeli wyniki** z r贸偶nych sekcji bezpieczestwa GCP (nie tylko Centrum Dowodzenia) w celu atwego wizualizowania istotnych wynik贸w.
* **殴r贸da**: Pokazuje **podsumowanie wynik贸w** ze wszystkich r贸偶nych sekcji bezpieczestwa GCP **wedug sekcji**.
* **Postura**: \[Wymagana subskrypcja Premium\] Postura bezpieczestwa pozwala na **definiowanie, ocen i monitorowanie bezpieczestwa rodowiska GCP**. Dziaa poprzez tworzenie polityki, kt贸ra definiuje ograniczenia lub restrykcje kontrolujce/monitorujce zasoby w GCP. Istnieje kilka predefiniowanych szablon贸w postury, kt贸re mo偶na znale藕 na [https://cloud.google.com/security-command-center/docs/security-posture-overview?authuser=2#predefined-policy](https://cloud.google.com/security-command-center/docs/security-posture-overview?authuser=2#predefined-policy)

### **Zagro偶enia**

Z perspektywy atakujcego, to prawdopodobnie **najciekawsza funkcja, poniewa偶 mo偶e wykry atakujcego**. Nale偶y jednak zauwa偶y, 偶e ta funkcja wymaga **Premium** (co oznacza, 偶e firma bdzie musiaa zapaci wicej), wic **mo偶e by nawet nieaktywna**.

Istniej 3 typy mechanizm贸w wykrywania zagro偶e:

* **Zagro偶enia zdarze**: Wyniki produkowane przez dopasowywanie zdarze z **Cloud Logging** na podstawie **regu stworzonych** wewntrznie przez Google. Mo偶e r贸wnie偶 skanowa **logi Google Workspace**.
* Mo偶na znale藕 opis wszystkich [**regu wykrywania w dokumentacji**](https://cloud.google.com/security-command-center/docs/concepts-event-threat-detection-overview?authuser=2#how\_works)
* **Zagro偶enia kontener贸w**: Wyniki produkowane po analizie niskopoziomowego zachowania jdra kontener贸w.
* **Zagro偶enia niestandardowe**: Reguy stworzone przez firm.

Mo偶na znale藕 zalecane odpowiedzi na wykryte zagro偶enia obu typ贸w w [https://cloud.google.com/security-command-center/docs/how-to-investigate-threats?authuser=2#event\_response](https://cloud.google.com/security-command-center/docs/how-to-investigate-threats?authuser=2#event\_response)

### Enumeracja

{% code overflow="wrap" %}
```bash
# Get a source
gcloud scc sources describe <org-number> --source=5678
## If the response is that the service is disabled or that the source is not found, then, it isn't enabled

# Get notifications
gcloud scc notifications list <org-number>

# Get findings (if not premium these are just vulnerabilities)
gcloud scc findings list <org-number>
```
{% endcode %}

### Post Exploitation

{% content-ref url="../gcp-post-exploitation/gcp-security-post-exploitation.md" %}
[gcp-security-post-exploitation.md](../gcp-post-exploitation/gcp-security-post-exploitation.md)
{% endcontent-ref %}

## Detections and Controls

* **Chronicle SecOps**: Zaawansowany zestaw operacji bezpieczestwa zaprojektowany, aby pom贸c zespoom zwikszy ich szybko i wpyw operacji bezpieczestwa, w tym wykrywanie zagro偶e, dochodzenia i reakcje.
* **reCAPTCHA Enterprise**: Usuga, kt贸ra chroni strony internetowe przed oszukaczymi dziaaniami, takimi jak skanowanie, wstrzykiwanie danych uwierzytelniajcych i ataki automatyczne, poprzez rozr贸偶nianie midzy u偶ytkownikami ludzkimi a botami.
* **Web Security Scanner**: Zautomatyzowane narzdzie skanujce bezpieczestwo, kt贸re wykrywa luki i powszechne problemy z bezpieczestwem w aplikacjach internetowych hostowanych na Google Cloud lub innej usudze internetowej.
* **Risk Manager**: Narzdzie do zarzdzania, ryzyka i zgodnoci (GRC), kt贸re pomaga organizacjom ocenia, dokumentowa i rozumie ich postaw ryzyka w Google Cloud.
* **Binary Authorization**: Kontrola bezpieczestwa dla kontener贸w, kt贸ra zapewnia, 偶e tylko zaufane obrazy kontener贸w s wdra偶ane na klastrach Kubernetes Engine zgodnie z politykami ustalonymi przez przedsibiorstwo.
* **Advisory Notifications**: Usuga, kt贸ra dostarcza powiadomienia i porady dotyczce potencjalnych problem贸w z bezpieczestwem, luk oraz zalecanych dziaa w celu zabezpieczenia zasob贸w.
* **Access Approval**: Funkcja, kt贸ra pozwala organizacjom wymaga wyra藕nej zgody przed tym, jak pracownicy Google mog uzyska dostp do ich danych lub konfiguracji, zapewniajc dodatkow warstw kontroli i audytowalnoci.
* **Managed Microsoft AD**: Usuga oferujca zarzdzany Microsoft Active Directory (AD), kt贸ra pozwala u偶ytkownikom korzysta z istniejcych aplikacji i obci偶e zale偶nych od Microsoft AD na Google Cloud.

## Data Protection

* **Sensitive Data Protection**: Narzdzia i praktyki majce na celu ochron wra偶liwych danych, takich jak informacje osobiste czy wasno intelektualna, przed nieautoryzowanym dostpem lub ujawnieniem.
* **Data Loss Prevention (DLP)**: Zestaw narzdzi i proces贸w u偶ywanych do identyfikacji, monitorowania i ochrony danych w u偶yciu, w ruchu i w spoczynku poprzez gbok inspekcj treci i stosowanie kompleksowego zestawu zasad ochrony danych.
* **Certificate Authority Service**: Skalowalna i bezpieczna usuga, kt贸ra upraszcza i automatyzuje zarzdzanie, wdra偶anie i odnawianie certyfikat贸w SSL/TLS dla usug wewntrznych i zewntrznych.
* **Key Management**: Usuga w chmurze, kt贸ra pozwala zarzdza kluczami kryptograficznymi dla aplikacji, w tym tworzeniem, importem, rotacj, u偶ywaniem i niszczeniem kluczy szyfrujcych. Wicej informacji w:

{% content-ref url="gcp-kms-enum.md" %}
[gcp-kms-enum.md](gcp-kms-enum.md)
{% endcontent-ref %}

* **Certificate Manager**: Usuga, kt贸ra zarzdza i wdra偶a certyfikaty SSL/TLS, zapewniajc bezpieczne i szyfrowane poczenia z usugami internetowymi i aplikacjami.
* **Secret Manager**: Bezpieczny i wygodny system przechowywania kluczy API, hase, certyfikat贸w i innych wra偶liwych danych, kt贸ry umo偶liwia atwy i bezpieczny dostp oraz zarzdzanie tymi sekretami w aplikacjach. Wicej informacji w:

{% content-ref url="gcp-secrets-manager-enum.md" %}
[gcp-secrets-manager-enum.md](gcp-secrets-manager-enum.md)
{% endcontent-ref %}

## Zero Trust

* **BeyondCorp Enterprise**: Platforma bezpieczestwa zero-trust, kt贸ra umo偶liwia bezpieczny dostp do aplikacji wewntrznych bez potrzeby tradycyjnego VPN, polegajc na weryfikacji zaufania u偶ytkownika i urzdzenia przed przyznaniem dostpu.
* **Policy Troubleshooter**: Narzdzie zaprojektowane, aby pom贸c administratorom zrozumie i rozwizywa problemy z dostpem w ich organizacji, identyfikujc, dlaczego u偶ytkownik ma dostp do okrelonych zasob贸w lub dlaczego dostp zosta odm贸wiony, co wspiera egzekwowanie polityk zero-trust.
* **Identity-Aware Proxy (IAP)**: Usuga, kt贸ra kontroluje dostp do aplikacji w chmurze i maszyn wirtualnych dziaajcych na Google Cloud, lokalnie lub w innych chmurach, na podstawie to偶samoci i kontekstu 偶dania, a nie sieci, z kt贸rej pochodzi 偶danie.
* **VPC Service Controls**: Perimetry bezpieczestwa, kt贸re zapewniaj dodatkowe warstwy ochrony dla zasob贸w i usug hostowanych w Wirtualnej Chmurze Prywatnej (VPC) Google Cloud, zapobiegajc eksfiltracji danych i zapewniajc szczeg贸ow kontrol dostpu.
* **Access Context Manager**: Cz Google Cloud's BeyondCorp Enterprise, to narzdzie pomaga definiowa i egzekwowa szczeg贸owe zasady kontroli dostpu na podstawie to偶samoci u偶ytkownika i kontekstu ich 偶dania, takiego jak status bezpieczestwa urzdzenia, adres IP i inne.

{% hint style="success" %}
Learn & practice AWS Hacking:<img src="../../../.gitbook/assets/image (1) (1).png" alt="" data-size="line">[**HackTricks Training AWS Red Team Expert (ARTE)**](https://training.hacktricks.xyz/courses/arte)<img src="../../../.gitbook/assets/image (1) (1).png" alt="" data-size="line">\
Learn & practice GCP Hacking: <img src="../../../.gitbook/assets/image (2).png" alt="" data-size="line">[**HackTricks Training GCP Red Team Expert (GRTE)**<img src="../../../.gitbook/assets/image (2).png" alt="" data-size="line">](https://training.hacktricks.xyz/courses/grte)

<details>

<summary>Support HackTricks</summary>

* Check the [**subscription plans**](https://github.com/sponsors/carlospolop)!
* **Join the**  [**Discord group**](https://discord.gg/hRep4RUj7f) or the [**telegram group**](https://t.me/peass) or **follow** us on **Twitter**  [**@hacktricks\_live**](https://twitter.com/hacktricks\_live)**.**
* **Share hacking tricks by submitting PRs to the** [**HackTricks**](https://github.com/carlospolop/hacktricks) and [**HackTricks Cloud**](https://github.com/carlospolop/hacktricks-cloud) github repos.

</details>
{% endhint %}
