# GCP - Security Enum

{% hint style="success" %}
Learn & practice AWS Hacking:<img src="../../../.gitbook/assets/image (1).png" alt="" data-size="line">[**HackTricks Training AWS Red Team Expert (ARTE)**](https://training.hacktricks.xyz/courses/arte)<img src="../../../.gitbook/assets/image (1).png" alt="" data-size="line">\
Learn & practice GCP Hacking: <img src="../../../.gitbook/assets/image (2).png" alt="" data-size="line">[**HackTricks Training GCP Red Team Expert (GRTE)**<img src="../../../.gitbook/assets/image (2).png" alt="" data-size="line">](https://training.hacktricks.xyz/courses/grte)

<details>

<summary>Support HackTricks</summary>

* Check the [**subscription plans**](https://github.com/sponsors/carlospolop)!
* **Join the** üí¨ [**Discord group**](https://discord.gg/hRep4RUj7f) or the [**telegram group**](https://t.me/peass) or **follow** us on **Twitter** üê¶ [**@hacktricks\_live**](https://twitter.com/hacktricks\_live)**.**
* **Share hacking tricks by submitting PRs to the** [**HackTricks**](https://github.com/carlospolop/hacktricks) and [**HackTricks Cloud**](https://github.com/carlospolop/hacktricks-cloud) github repos.

</details>
{% endhint %}

## Grundlegende Informationen

Die Sicherheit der Google Cloud Platform (GCP) umfasst eine **umfassende Suite von Tools** und Praktiken, die darauf abzielen, die **Sicherheit** von Ressourcen und Daten innerhalb der Google Cloud-Umgebung zu gew√§hrleisten, unterteilt in vier Hauptbereiche: **Security Command Center, Detections and Controls, Data Protection und Zero Trust.**

## **Security Command Center**

Das Security Command Center (SCC) der Google Cloud Platform (GCP) ist ein **Sicherheits- und Risikomanagement-Tool f√ºr GCP**-Ressourcen, das es Organisationen erm√∂glicht, Sichtbarkeit und Kontrolle √ºber ihre Cloud-Assets zu gewinnen. Es hilft, **Bedrohungen zu erkennen und darauf zu reagieren**, indem es umfassende Sicherheitsanalysen bietet, **Fehlkonfigurationen identifiziert**, die **Einhaltung** von Sicherheitsstandards sicherstellt und sich mit anderen Sicherheits-Tools zur automatisierten Bedrohungserkennung und -reaktion **integriert**.

* **√úberblick**: Panel zur **Visualisierung eines √úberblicks** √ºber alle Ergebnisse des Security Command Centers.
* Bedrohungen: \[Premium erforderlich] Panel zur Visualisierung aller **erkannten Bedrohungen. Weitere Informationen zu Bedrohungen finden Sie unten**
* **Schwachstellen**: Panel zur **Visualisierung gefundener Fehlkonfigurationen im GCP-Konto**.
* **Compliance**: \[Premium erforderlich] Dieser Abschnitt erm√∂glicht es, die **GCP-Umgebung gegen mehrere Compliance-Pr√ºfungen** (wie PCI-DSS, NIST 800-53, CIS-Benchmarks...) √ºber die Organisation zu testen.
* **Assets**: Dieser Abschnitt **zeigt alle verwendeten Assets**, sehr n√ºtzlich f√ºr Sysadmins (und vielleicht Angreifer), um zu sehen, was auf einer einzigen Seite l√§uft.
* **Ergebnisse**: Dies **aggregiert** in einer **Tabelle die Ergebnisse** verschiedener Abschnitte der GCP-Sicherheit (nicht nur Command Center), um die relevanten Ergebnisse leicht visualisieren zu k√∂nnen.
* **Quellen**: Zeigt eine **Zusammenfassung der Ergebnisse** aller verschiedenen Abschnitte der GCP-Sicherheit **nach Abschnitt**.
* **Posture**: \[Premium erforderlich] Die Sicherheitslage erm√∂glicht es, die **Sicherheit der GCP-Umgebung zu definieren, zu bewerten und zu √ºberwachen**. Sie funktioniert, indem sie Richtlinien erstellt, die Einschr√§nkungen oder Beschr√§nkungen definieren, die die Ressourcen in GCP steuern/√ºberwachen. Es gibt mehrere vordefinierte Vorlagen f√ºr die Sicherheitslage, die unter [https://cloud.google.com/security-command-center/docs/security-posture-overview?authuser=2#predefined-policy](https://cloud.google.com/security-command-center/docs/security-posture-overview?authuser=2#predefined-policy) zu finden sind.

### **Bedrohungen**

Aus der Sicht eines Angreifers ist dies wahrscheinlich die **interessanteste Funktion, da sie den Angreifer erkennen k√∂nnte**. Beachten Sie jedoch, dass diese Funktion **Premium** erfordert (was bedeutet, dass das Unternehmen mehr bezahlen muss), sodass sie **vielleicht nicht einmal aktiviert ist**.

Es gibt 3 Arten von Bedrohungserkennungsmechanismen:

* **Ereignisbedrohungen**: Ergebnisse, die durch das Abgleichen von Ereignissen aus **Cloud Logging** basierend auf **intern von Google erstellten Regeln** erzeugt werden. Es kann auch **Google Workspace-Protokolle** scannen.
* Es ist m√∂glich, die Beschreibung aller [**Erkennungsregeln in den Dokumenten**](https://cloud.google.com/security-command-center/docs/concepts-event-threat-detection-overview?authuser=2#how\_works) zu finden.
* **Containerbedrohungen**: Ergebnisse, die nach der Analyse des Verhaltens des Kernels von Containern auf niedriger Ebene erzeugt werden.
* **Benutzerdefinierte Bedrohungen**: Regeln, die vom Unternehmen erstellt wurden.

Es ist m√∂glich, empfohlene Reaktionen auf erkannte Bedrohungen beider Typen unter [https://cloud.google.com/security-command-center/docs/how-to-investigate-threats?authuser=2#event\_response](https://cloud.google.com/security-command-center/docs/how-to-investigate-threats?authuser=2#event\_response) zu finden.

### Enumeration

{% code overflow="wrap" %}
```bash
# Get a source
gcloud scc sources describe <org-number> --source=5678
## If the response is that the service is disabled or that the source is not found, then, it isn't enabled

# Get notifications
gcloud scc notifications list <org-number>

# Get findings (if not premium these are just vulnerabilities)
gcloud scc findings list <org-number>
```
{% endcode %}

### Post-Exploitation

{% content-ref url="../gcp-post-exploitation/gcp-security-post-exploitation.md" %}
[gcp-security-post-exploitation.md](../gcp-post-exploitation/gcp-security-post-exploitation.md)
{% endcontent-ref %}

## Erkennungen und Kontrollen

* **Chronicle SecOps**: Eine fortschrittliche Sicherheitsoperationssuite, die Teams dabei hilft, die Geschwindigkeit und den Einfluss ihrer Sicherheitsoperationen, einschlie√ülich Bedrohungserkennung, Untersuchung und Reaktion, zu erh√∂hen.
* **reCAPTCHA Enterprise**: Ein Dienst, der Websites vor betr√ºgerischen Aktivit√§ten wie Scraping, Credential Stuffing und automatisierten Angriffen sch√ºtzt, indem er zwischen menschlichen Benutzern und Bots unterscheidet.
* **Web Security Scanner**: Automatisiertes Sicherheitsscanning-Tool, das Schwachstellen und h√§ufige Sicherheitsprobleme in Webanwendungen erkennt, die auf Google Cloud oder einem anderen Webdienst gehostet werden.
* **Risk Manager**: Ein Governance-, Risiko- und Compliance- (GRC) Tool, das Organisationen hilft, ihre Google Cloud-Risikolage zu bewerten, zu dokumentieren und zu verstehen.
* **Binary Authorization**: Eine Sicherheitskontrolle f√ºr Container, die sicherstellt, dass nur vertrauensw√ºrdige Container-Images auf Kubernetes Engine-Clustern gem√§√ü den von der Unternehmenspolitik festgelegten Richtlinien bereitgestellt werden.
* **Advisory Notifications**: Ein Dienst, der Warnungen und Hinweise zu potenziellen Sicherheitsproblemen, Schwachstellen und empfohlenen Ma√ünahmen bereitstellt, um Ressourcen sicher zu halten.
* **Access Approval**: Eine Funktion, die es Organisationen erm√∂glicht, eine ausdr√ºckliche Genehmigung zu verlangen, bevor Google-Mitarbeiter auf ihre Daten oder Konfigurationen zugreifen k√∂nnen, was eine zus√§tzliche Kontrolle und Pr√ºfspur bietet.
* **Managed Microsoft AD**: Ein Dienst, der verwaltetes Microsoft Active Directory (AD) anbietet, das es Benutzern erm√∂glicht, ihre bestehenden Microsoft AD-abh√§ngigen Apps und Workloads auf Google Cloud zu nutzen.

## Datenschutz

* **Sensitive Data Protection**: Werkzeuge und Praktiken, die darauf abzielen, sensible Daten, wie pers√∂nliche Informationen oder geistiges Eigentum, vor unbefugtem Zugriff oder Offenlegung zu sch√ºtzen.
* **Data Loss Prevention (DLP)**: Eine Reihe von Werkzeugen und Prozessen, die verwendet werden, um Daten im Einsatz, in Bewegung und im Ruhezustand durch tiefgehende Inhaltsinspektion zu identifizieren, zu √ºberwachen und zu sch√ºtzen, sowie durch die Anwendung eines umfassenden Satzes von Datenschutzregeln.
* **Certificate Authority Service**: Ein skalierbarer und sicherer Dienst, der die Verwaltung, Bereitstellung und Erneuerung von SSL/TLS-Zertifikaten f√ºr interne und externe Dienste vereinfacht und automatisiert.
* **Key Management**: Ein cloudbasierter Dienst, der es Ihnen erm√∂glicht, kryptografische Schl√ºssel f√ºr Ihre Anwendungen zu verwalten, einschlie√ülich der Erstellung, des Imports, der Rotation, der Nutzung und der Zerst√∂rung von Verschl√ºsselungsschl√ºsseln. Weitere Informationen in:

{% content-ref url="gcp-kms-enum.md" %}
[gcp-kms-enum.md](gcp-kms-enum.md)
{% endcontent-ref %}

* **Certificate Manager**: Ein Dienst, der SSL/TLS-Zertifikate verwaltet und bereitstellt und sichere und verschl√ºsselte Verbindungen zu Ihren Webdiensten und Anwendungen gew√§hrleistet.
* **Secret Manager**: Ein sicheres und praktisches Speichersystem f√ºr API-Schl√ºssel, Passw√∂rter, Zertifikate und andere sensible Daten, das den einfachen und sicheren Zugriff und die Verwaltung dieser Geheimnisse in Anwendungen erm√∂glicht. Weitere Informationen in:

{% content-ref url="gcp-secrets-manager-enum.md" %}
[gcp-secrets-manager-enum.md](gcp-secrets-manager-enum.md)
{% endcontent-ref %}

## Zero Trust

* **BeyondCorp Enterprise**: Eine Zero-Trust-Sicherheitsplattform, die sicheren Zugriff auf interne Anwendungen erm√∂glicht, ohne dass ein traditionelles VPN erforderlich ist, indem sie sich auf die √úberpr√ºfung des Vertrauens von Benutzern und Ger√§ten st√ºtzt, bevor der Zugriff gew√§hrt wird.
* **Policy Troubleshooter**: Ein Tool, das Administratoren hilft, Zugriffsprobleme in ihrer Organisation zu verstehen und zu l√∂sen, indem es identifiziert, warum ein Benutzer Zugriff auf bestimmte Ressourcen hat oder warum der Zugriff verweigert wurde, und somit die Durchsetzung von Zero-Trust-Richtlinien unterst√ºtzt.
* **Identity-Aware Proxy (IAP)**: Ein Dienst, der den Zugriff auf Cloud-Anwendungen und VMs, die auf Google Cloud, vor Ort oder in anderen Clouds ausgef√ºhrt werden, basierend auf der Identit√§t und dem Kontext der Anfrage steuert, anstatt auf dem Netzwerk, von dem die Anfrage stammt.
* **VPC Service Controls**: Sicherheitsperimeter, die zus√§tzliche Schutzschichten f√ºr Ressourcen und Dienste bieten, die in Google Clouds Virtual Private Cloud (VPC) gehostet werden, um Datenexfiltration zu verhindern und granulare Zugriffskontrolle zu erm√∂glichen.
* **Access Context Manager**: Teil von Google Clouds BeyondCorp Enterprise, hilft dieses Tool, feingranulare Zugriffskontrollrichtlinien basierend auf der Identit√§t eines Benutzers und dem Kontext seiner Anfrage zu definieren und durchzusetzen, wie z. B. den Sicherheitsstatus des Ger√§ts, die IP-Adresse und mehr.

{% hint style="success" %}
Learn & practice AWS Hacking:<img src="../../../.gitbook/assets/image (1).png" alt="" data-size="line">[**HackTricks Training AWS Red Team Expert (ARTE)**](https://training.hacktricks.xyz/courses/arte)<img src="../../../.gitbook/assets/image (1).png" alt="" data-size="line">\
Learn & practice GCP Hacking: <img src="../../../.gitbook/assets/image (2).png" alt="" data-size="line">[**HackTricks Training GCP Red Team Expert (GRTE)**<img src="../../../.gitbook/assets/image (2).png" alt="" data-size="line">](https://training.hacktricks.xyz/courses/grte)

<details>

<summary>Support HackTricks</summary>

* Check the [**subscription plans**](https://github.com/sponsors/carlospolop)!
* **Join the** üí¨ [**Discord group**](https://discord.gg/hRep4RUj7f) or the [**telegram group**](https://t.me/peass) or **follow** us on **Twitter** üê¶ [**@hacktricks\_live**](https://twitter.com/hacktricks\_live)**.**
* **Share hacking tricks by submitting PRs to the** [**HackTricks**](https://github.com/carlospolop/hacktricks) and [**HackTricks Cloud**](https://github.com/carlospolop/hacktricks-cloud) github repos.

</details>
{% endhint %}
