# GCP - Security Enum

{% hint style="success" %}
Learn & practice AWS Hacking:<img src="../../../.gitbook/assets/image (1) (1) (1).png" alt="" data-size="line">[**HackTricks Training AWS Red Team Expert (ARTE)**](https://training.hacktricks.xyz/courses/arte)<img src="../../../.gitbook/assets/image (1) (1) (1).png" alt="" data-size="line">\
Learn & practice GCP Hacking: <img src="../../../.gitbook/assets/image (2).png" alt="" data-size="line">[**HackTricks Training GCP Red Team Expert (GRTE)**<img src="../../../.gitbook/assets/image (2).png" alt="" data-size="line">](https://training.hacktricks.xyz/courses/grte)

<details>

<summary>Support HackTricks</summary>

* Check the [**subscription plans**](https://github.com/sponsors/carlospolop)!
* **Join the** 💬 [**Discord group**](https://discord.gg/hRep4RUj7f) or the [**telegram group**](https://t.me/peass) or **follow** us on **Twitter** 🐦 [**@hacktricks\_live**](https://twitter.com/hacktricks_live)**.**
* **Share hacking tricks by submitting PRs to the** [**HackTricks**](https://github.com/carlospolop/hacktricks) and [**HackTricks Cloud**](https://github.com/carlospolop/hacktricks-cloud) github repos.

</details>
{% endhint %}

## Basic Information

Η ασφάλεια της Google Cloud Platform (GCP) περιλαμβάνει μια **συνολική σουίτα εργαλείων** και πρακτικών που έχουν σχεδιαστεί για να διασφαλίσουν την **ασφάλεια** των πόρων και των δεδομένων στο περιβάλλον της Google Cloud, χωρισμένη σε τέσσερις κύριες ενότητες: **Κέντρο Ελέγχου Ασφαλείας, Ανιχνεύσεις και Έλεγχοι, Προστασία Δεδομένων και Μηδενική Εμπιστοσύνη.**

## **Security Command Center**

Το Κέντρο Ελέγχου Ασφαλείας της Google Cloud Platform (GCP) είναι ένα **εργαλείο διαχείρισης ασφάλειας και κινδύνου για τους πόρους GCP** που επιτρέπει στις οργανώσεις να αποκτούν ορατότητα και έλεγχο πάνω στα περιουσιακά τους στοιχεία στο cloud. Βοηθά στην **ανίχνευση και αντίδραση σε απειλές** προσφέροντας ολοκληρωμένη ανάλυση ασφάλειας, **εντοπίζοντας κακοδιαμορφώσεις**, διασφαλίζοντας τη **συμμόρφωση** με τα πρότυπα ασφάλειας και **ενσωματώνοντας** άλλα εργαλεία ασφάλειας για αυτοματοποιημένη ανίχνευση και αντίδραση σε απειλές.

* **Επισκόπηση**: Πίνακας για **οπτικοποίηση μιας επισκόπησης** όλων των αποτελεσμάτων του Κέντρου Ελέγχου Ασφαλείας.
* Απειλές: \[Απαιτείται Premium] Πίνακας για οπτικοποίηση όλων των **ανιχνευμένων απειλών. Δείτε περισσότερα για τις Απειλές παρακάτω**
* **Ευπάθειες**: Πίνακας για **οπτικοποίηση των κακοδιαμορφώσεων που βρέθηκαν στον λογαριασμό GCP**.
* **Συμμόρφωση**: \[Απαιτείται Premium] Αυτή η ενότητα επιτρέπει να **δοκιμάσετε το περιβάλλον GCP σας σε διάφορους ελέγχους συμμόρφωσης** (όπως PCI-DSS, NIST 800-53, CIS benchmarks...) σε όλη την οργάνωση.
* **Περιουσιακά Στοιχεία**: Αυτή η ενότητα **δείχνει όλα τα περιουσιακά στοιχεία που χρησιμοποιούνται**, πολύ χρήσιμη για τους διαχειριστές συστημάτων (και ίσως τους επιτιθέμενους) για να δουν τι τρέχει σε μία μόνο σελίδα.
* **Ευρήματα**: Αυτή η **συγκεντρώνει** σε μια **πίνακα ευρήματα** από διάφορες ενότητες της ασφάλειας GCP (όχι μόνο του Κέντρου Ελέγχου) για να είναι δυνατή η εύκολη οπτικοποίηση των ευρημάτων που έχουν σημασία.
* **Πηγές**: Δείχνει μια **σύνοψη ευρημάτων** από όλες τις διαφορετικές ενότητες της ασφάλειας GCP **κατά ενότητα**.
* **Στάση**: \[Απαιτείται Premium] Η Στάση Ασφαλείας επιτρέπει να **ορίσετε, να αξιολογήσετε και να παρακολουθήσετε την ασφάλεια του περιβάλλοντος GCP**. Λειτουργεί δημιουργώντας πολιτική που ορίζει περιορισμούς ή περιορισμούς που ελέγχουν/παρακολουθούν τους πόρους στο GCP. Υπάρχουν αρκετά προ-καθορισμένα πρότυπα στάσης που μπορείτε να βρείτε στο [https://cloud.google.com/security-command-center/docs/security-posture-overview?authuser=2#predefined-policy](https://cloud.google.com/security-command-center/docs/security-posture-overview?authuser=2#predefined-policy)

### **Threats**

Από την προοπτική ενός επιτιθέμενου, αυτή είναι πιθανώς η **πιο ενδιαφέρουσα δυνατότητα καθώς θα μπορούσε να ανιχνεύσει τον επιτιθέμενο**. Ωστόσο, σημειώστε ότι αυτή η δυνατότητα απαιτεί **Premium** (που σημαίνει ότι η εταιρεία θα χρειαστεί να πληρώσει περισσότερα), οπότε **μπορεί να μην είναι καν ενεργοποιημένη**.

Υπάρχουν 3 τύποι μηχανισμών ανίχνευσης απειλών:

* **Απειλές Συμβάντων**: Ευρήματα που παράγονται από την αντιστοίχιση συμβάντων από το **Cloud Logging** με βάση **κανόνες που δημιουργούνται** εσωτερικά από την Google. Μπορεί επίσης να σαρώσει τα **αρχεία καταγραφής Google Workspace**.
* Είναι δυνατή η εύρεση της περιγραφής όλων των [**κανόνων ανίχνευσης στα docs**](https://cloud.google.com/security-command-center/docs/concepts-event-threat-detection-overview?authuser=2#how_works)
* **Απειλές Κοντέινερ**: Ευρήματα που παράγονται μετά την ανάλυση της χαμηλού επιπέδου συμπεριφοράς του πυρήνα των κοντέινερ.
* **Προσαρμοσμένες Απειλές**: Κανόνες που δημιουργούνται από την εταιρεία.

Είναι δυνατή η εύρεση προτεινόμενων απαντήσεων σε ανιχνευμένες απειλές και των δύο τύπων στο [https://cloud.google.com/security-command-center/docs/how-to-investigate-threats?authuser=2#event\_response](https://cloud.google.com/security-command-center/docs/how-to-investigate-threats?authuser=2#event_response)

### Enumeration

{% code overflow="wrap" %}
```bash
# Get a source
gcloud scc sources describe <org-number> --source=5678
## If the response is that the service is disabled or that the source is not found, then, it isn't enabled

# Get notifications
gcloud scc notifications list <org-number>

# Get findings (if not premium these are just vulnerabilities)
gcloud scc findings list <org-number>
```
{% endcode %}

### Μετά την Εκμετάλλευση

{% content-ref url="../gcp-post-exploitation/gcp-security-post-exploitation.md" %}
[gcp-security-post-exploitation.md](../gcp-post-exploitation/gcp-security-post-exploitation.md)
{% endcontent-ref %}

## Ανιχνεύσεις και Έλεγχοι

* **Chronicle SecOps**: Μια προηγμένη σουίτα λειτουργιών ασφαλείας σχεδιασμένη για να βοηθά τις ομάδες να αυξάνουν την ταχύτητα και την επίδραση των λειτουργιών ασφαλείας, συμπεριλαμβανομένης της ανίχνευσης απειλών, της έρευνας και της αντίδρασης.
* **reCAPTCHA Enterprise**: Μια υπηρεσία που προστατεύει τους ιστότοπους από δόλιες δραστηριότητες όπως η συλλογή δεδομένων, η εισαγωγή διαπιστευτηρίων και οι αυτοματοποιημένες επιθέσεις, διακρίνοντας μεταξύ ανθρώπινων χρηστών και ρομπότ.
* **Web Security Scanner**: Αυτοματοποιημένο εργαλείο σάρωσης ασφαλείας που ανιχνεύει ευπάθειες και κοινά ζητήματα ασφαλείας σε διαδικτυακές εφαρμογές που φιλοξενούνται στο Google Cloud ή σε άλλη διαδικτυακή υπηρεσία.
* **Risk Manager**: Ένα εργαλείο διακυβέρνησης, κινδύνου και συμμόρφωσης (GRC) που βοηθά τις οργανώσεις να αξιολογούν, να τεκμηριώνουν και να κατανοούν τη στάση κινδύνου τους στο Google Cloud.
* **Binary Authorization**: Ένας έλεγχος ασφαλείας για κοντέινερ που διασφαλίζει ότι μόνο αξιόπιστες εικόνες κοντέινερ αναπτύσσονται σε κλάστερ Kubernetes Engine σύμφωνα με τις πολιτικές που έχει ορίσει η επιχείρηση.
* **Advisory Notifications**: Μια υπηρεσία που παρέχει ειδοποιήσεις και συμβουλές σχετικά με πιθανά ζητήματα ασφαλείας, ευπάθειες και προτεινόμενες ενέργειες για τη διατήρηση της ασφάλειας των πόρων.
* **Access Approval**: Μια δυνατότητα που επιτρέπει στις οργανώσεις να απαιτούν ρητή έγκριση πριν οι υπάλληλοι της Google αποκτήσουν πρόσβαση στα δεδομένα ή τις ρυθμίσεις τους, παρέχοντας ένα επιπλέον επίπεδο ελέγχου και ελέγχου.
* **Managed Microsoft AD**: Μια υπηρεσία που προσφέρει διαχειριζόμενο Microsoft Active Directory (AD) που επιτρέπει στους χρήστες να χρησιμοποιούν τις υπάρχουσες εφαρμογές και φόρτους εργασίας που εξαρτώνται από το Microsoft AD στο Google Cloud.

## Προστασία Δεδομένων

* **Sensitive Data Protection**: Εργαλεία και πρακτικές που στοχεύουν στην προστασία ευαίσθητων δεδομένων, όπως προσωπικές πληροφορίες ή πνευματική ιδιοκτησία, από μη εξουσιοδοτημένη πρόσβαση ή έκθεση.
* **Data Loss Prevention (DLP)**: Ένα σύνολο εργαλείων και διαδικασιών που χρησιμοποιούνται για την αναγνώριση, παρακολούθηση και προστασία των δεδομένων σε χρήση, σε κίνηση και σε αδράνεια μέσω βαθιάς επιθεώρησης περιεχομένου και εφαρμόζοντας ένα ολοκληρωμένο σύνολο κανόνων προστασίας δεδομένων.
* **Certificate Authority Service**: Μια κλιμακούμενη και ασφαλής υπηρεσία που απλοποιεί και αυτοματοποιεί τη διαχείριση, την ανάπτυξη και την ανανέωση των πιστοποιητικών SSL/TLS για εσωτερικές και εξωτερικές υπηρεσίες.
* **Key Management**: Μια υπηρεσία cloud που σας επιτρέπει να διαχειρίζεστε κρυπτογραφικά κλειδιά για τις εφαρμογές σας, συμπεριλαμβανομένης της δημιουργίας, εισαγωγής, περιστροφής, χρήσης και καταστροφής κλειδιών κρυπτογράφησης. Περισσότερες πληροφορίες στο:

{% content-ref url="gcp-kms-enum.md" %}
[gcp-kms-enum.md](gcp-kms-enum.md)
{% endcontent-ref %}

* **Certificate Manager**: Μια υπηρεσία που διαχειρίζεται και αναπτύσσει πιστοποιητικά SSL/TLS, διασφαλίζοντας ασφαλείς και κρυπτογραφημένες συνδέσεις στις διαδικτυακές υπηρεσίες και εφαρμογές σας.
* **Secret Manager**: Ένα ασφαλές και βολικό σύστημα αποθήκευσης για API κλειδιά, κωδικούς πρόσβασης, πιστοποιητικά και άλλα ευαίσθητα δεδομένα, που επιτρέπει την εύκολη και ασφαλή πρόσβαση και διαχείριση αυτών των μυστικών στις εφαρμογές. Περισσότερες πληροφορίες στο:

{% content-ref url="gcp-secrets-manager-enum.md" %}
[gcp-secrets-manager-enum.md](gcp-secrets-manager-enum.md)
{% endcontent-ref %}

## Zero Trust

* **BeyondCorp Enterprise**: Μια πλατφόρμα ασφαλείας μηδενικής εμπιστοσύνης που επιτρέπει ασφαλή πρόσβαση σε εσωτερικές εφαρμογές χωρίς την ανάγκη παραδοσιακού VPN, βασιζόμενη στην επαλήθευση της εμπιστοσύνης του χρήστη και της συσκευής πριν από την παροχή πρόσβασης.
* **Policy Troubleshooter**: Ένα εργαλείο σχεδιασμένο να βοηθά τους διαχειριστές να κατανοούν και να επιλύουν ζητήματα πρόσβασης στην οργάνωσή τους, εντοπίζοντας γιατί ένας χρήστης έχει πρόσβαση σε συγκεκριμένους πόρους ή γιατί η πρόσβαση απορρίφθηκε, βοηθώντας έτσι στην επιβολή πολιτικών μηδενικής εμπιστοσύνης.
* **Identity-Aware Proxy (IAP)**: Μια υπηρεσία που ελέγχει την πρόσβαση σε διαδικτυακές εφαρμογές και VM που εκτελούνται στο Google Cloud, τοπικά ή σε άλλες υποδομές, με βάση την ταυτότητα και το πλαίσιο του αιτήματος αντί για το δίκτυο από το οποίο προέρχεται το αίτημα.
* **VPC Service Controls**: Ασφαλή περιθώρια που παρέχουν επιπλέον επίπεδα προστασίας στους πόρους και τις υπηρεσίες που φιλοξενούνται στο Virtual Private Cloud (VPC) του Google Cloud, αποτρέποντας την εξαγωγή δεδομένων και παρέχοντας λεπτομερή έλεγχο πρόσβασης.
* **Access Context Manager**: Μέρος του BeyondCorp Enterprise του Google Cloud, αυτό το εργαλείο βοηθά στον καθορισμό και την επιβολή πολιτικών λεπτομερούς ελέγχου πρόσβασης με βάση την ταυτότητα ενός χρήστη και το πλαίσιο του αιτήματός τους, όπως η κατάσταση ασφάλειας της συσκευής, η διεύθυνση IP και άλλα.

{% hint style="success" %}
Learn & practice AWS Hacking:<img src="../../../.gitbook/assets/image (1) (1) (1).png" alt="" data-size="line">[**HackTricks Training AWS Red Team Expert (ARTE)**](https://training.hacktricks.xyz/courses/arte)<img src="../../../.gitbook/assets/image (1) (1) (1).png" alt="" data-size="line">\
Learn & practice GCP Hacking: <img src="../../../.gitbook/assets/image (2).png" alt="" data-size="line">[**HackTricks Training GCP Red Team Expert (GRTE)**<img src="../../../.gitbook/assets/image (2).png" alt="" data-size="line">](https://training.hacktricks.xyz/courses/grte)

<details>

<summary>Support HackTricks</summary>

* Check the [**subscription plans**](https://github.com/sponsors/carlospolop)!
* **Join the** 💬 [**Discord group**](https://discord.gg/hRep4RUj7f) or the [**telegram group**](https://t.me/peass) or **follow** us on **Twitter** 🐦 [**@hacktricks\_live**](https://twitter.com/hacktricks_live)**.**
* **Share hacking tricks by submitting PRs to the** [**HackTricks**](https://github.com/carlospolop/hacktricks) and [**HackTricks Cloud**](https://github.com/carlospolop/hacktricks-cloud) github repos.

</details>
{% endhint %}
