# GCP - Cloud SQL Enum

{% hint style="success" %}
Learn & practice AWS Hacking:<img src="../../../.gitbook/assets/image (1) (1).png" alt="" data-size="line">[**HackTricks Training AWS Red Team Expert (ARTE)**](https://training.hacktricks.xyz/courses/arte)<img src="../../../.gitbook/assets/image (1) (1).png" alt="" data-size="line">\
Learn & practice GCP Hacking: <img src="../../../.gitbook/assets/image (2).png" alt="" data-size="line">[**HackTricks Training GCP Red Team Expert (GRTE)**<img src="../../../.gitbook/assets/image (2).png" alt="" data-size="line">](https://training.hacktricks.xyz/courses/grte)

<details>

<summary>Support HackTricks</summary>

* Check the [**subscription plans**](https://github.com/sponsors/carlospolop)!
* **Join the** ğŸ’¬ [**Discord group**](https://discord.gg/hRep4RUj7f) or the [**telegram group**](https://t.me/peass) or **follow** us on **Twitter** ğŸ¦ [**@hacktricks\_live**](https://twitter.com/hacktricks\_live)**.**
* **Share hacking tricks by submitting PRs to the** [**HackTricks**](https://github.com/carlospolop/hacktricks) and [**HackTricks Cloud**](https://github.com/carlospolop/hacktricks-cloud) github repos.

</details>
{% endhint %}

## Temel Bilgiler

Google Cloud SQL, **MySQL, PostgreSQL ve SQL Server** gibi iliÅŸkisel veritabanlarÄ±nÄ± Google Cloud Platform Ã¼zerinde kurmayÄ±, sÃ¼rdÃ¼rmeyi ve yÃ¶netmeyi **kolaylaÅŸtÄ±ran** yÃ¶netilen bir hizmettir; donanÄ±m saÄŸlama, veritabanÄ± kurma, yamanÄ±n uygulanmasÄ± ve yedekleme gibi gÃ¶revleri Ã¼stlenme gereÄŸini ortadan kaldÄ±rÄ±r.

Google Cloud SQL'in ana Ã¶zellikleri ÅŸunlardÄ±r:

1. **Tamamen YÃ¶netilen**: Google Cloud SQL, yamanÄ±n uygulanmasÄ±, gÃ¼ncellemeler, yedeklemeler ve yapÄ±landÄ±rma gibi veritabanÄ± bakÄ±m gÃ¶revlerini Google'Ä±n Ã¼stlendiÄŸi tamamen yÃ¶netilen bir hizmettir.
2. **Ã–lÃ§eklenebilirlik**: VeritabanÄ±nÄ±zÄ±n depolama kapasitesini ve hesaplama kaynaklarÄ±nÄ± genellikle kesinti olmadan Ã¶lÃ§eklendirme yeteneÄŸi sunar.
3. **YÃ¼ksek EriÅŸilebilirlik**: VeritabanÄ± hizmetlerinizin gÃ¼venilir olmasÄ±nÄ± ve bÃ¶lge veya Ã¶rnek arÄ±zalarÄ±na dayanabilmesini saÄŸlayan yÃ¼ksek eriÅŸilebilirlik yapÄ±landÄ±rmalarÄ± sunar.
4. **GÃ¼venlik**: Veri ÅŸifreleme, Kimlik ve EriÅŸim YÃ¶netimi (IAM) kontrolleri ve Ã¶zel IP'ler ile VPC kullanarak aÄŸ izolasyonu gibi saÄŸlam gÃ¼venlik Ã¶zellikleri saÄŸlar.
5. **Yedeklemeler ve Kurtarma**: Otomatik yedeklemeleri ve zamanÄ±nda kurtarmayÄ± destekler, verilerinizi korumanÄ±za ve geri yÃ¼klemenize yardÄ±mcÄ± olur.
6. **Entegrasyon**: DiÄŸer Google Cloud hizmetleriyle sorunsuz bir ÅŸekilde entegre olur, uygulamalarÄ± oluÅŸturma, daÄŸÄ±tma ve yÃ¶netme iÃ§in kapsamlÄ± bir Ã§Ã¶zÃ¼m sunar.
7. **Performans**: VeritabanÄ± performansÄ±nÄ± izlemek, sorun gidermek ve iyileÅŸtirmek iÃ§in performans metrikleri ve tanÄ±lama sunar.

### Åifre

Web konsolunda Cloud SQL, kullanÄ±cÄ±nÄ±n veritabanÄ±nÄ±n **ÅŸifresini ayarlamasÄ±na** olanak tanÄ±r, ayrÄ±ca bir oluÅŸturma Ã¶zelliÄŸi de vardÄ±r, ancak en Ã¶nemlisi, **MySQL** boÅŸ bir ÅŸifre bÄ±rakmaya **ve hepsinin ÅŸifre olarak sadece "a" karakterini ayarlamasÄ±na** izin verir:

<figure><img src="../../../.gitbook/assets/image (14).png" alt=""><figcaption></figcaption></figure>

AyrÄ±ca, **uzunluk**, **karmaÅŸÄ±klÄ±k**, **yeniden kullanÄ±mÄ±n devre dÄ±ÅŸÄ± bÄ±rakÄ±lmasÄ±** ve **ÅŸifrede kullanÄ±cÄ± adÄ±nÄ±n devre dÄ±ÅŸÄ± bÄ±rakÄ±lmasÄ±** gerektiren bir ÅŸifre politikasÄ± yapÄ±landÄ±rmak da mÃ¼mkÃ¼ndÃ¼r. TÃ¼m bunlar varsayÄ±lan olarak devre dÄ±ÅŸÄ±dÄ±r.

**SQL Server**, **Active Directory Kimlik DoÄŸrulamasÄ±** ile yapÄ±landÄ±rÄ±labilir.

### BÃ¶lge EriÅŸilebilirliÄŸi

VeritabanÄ± **1 bÃ¶lgede veya birden fazla bÃ¶lgede** mevcut olabilir, elbette Ã¶nemli veritabanlarÄ±nÄ±n birden fazla bÃ¶lgede olmasÄ± Ã¶nerilir.

### Åifreleme

VarsayÄ±lan olarak, Google tarafÄ±ndan yÃ¶netilen bir ÅŸifreleme anahtarÄ± kullanÄ±lÄ±r, ancak **MÃ¼ÅŸteri tarafÄ±ndan yÃ¶netilen bir ÅŸifreleme anahtarÄ± (CMEK)** seÃ§mek de mÃ¼mkÃ¼ndÃ¼r.

### BaÄŸlantÄ±lar

* **Ã–zel IP**: VPC aÄŸÄ±nÄ± belirtin ve veritabanÄ± aÄŸ iÃ§inde Ã¶zel bir IP alacaktÄ±r.
* **Halka AÃ§Ä±k IP**: VeritabanÄ± halka aÃ§Ä±k bir IP alacaktÄ±r, ancak varsayÄ±lan olarak kimse baÄŸlanamayacaktÄ±r.
* **Yetkili aÄŸlar**: VeritabanÄ±na baÄŸlanmasÄ±na izin verilmesi gereken halka aÃ§Ä±k **IP aralÄ±klarÄ±nÄ±** belirtin.
* **Ã–zel Yol**: DB bir VPC'ye baÄŸlÄ±ysa, bu seÃ§eneÄŸi etkinleÅŸtirmek ve **BigQuery gibi diÄŸer GCP hizmetlerine eriÅŸim vermek** mÃ¼mkÃ¼ndÃ¼r.

<figure><img src="../../../.gitbook/assets/image (15).png" alt=""><figcaption></figcaption></figure>

### Veri Koruma

* **GÃ¼nlÃ¼k yedeklemeler**: Otomatik gÃ¼nlÃ¼k yedeklemeler yapÄ±n ve korumak istediÄŸiniz yedekleme sayÄ±sÄ±nÄ± belirtin.
* **ZamanÄ±nda kurtarma**: Verileri belirli bir zamandan, saniyenin kesirine kadar geri yÃ¼klemenizi saÄŸlar.
* **Silme KorumasÄ±**: EtkinleÅŸtirildiÄŸinde, bu Ã¶zellik devre dÄ±ÅŸÄ± bÄ±rakÄ±lana kadar DB silinemez.

### SayÄ±m
```bash
# Get SQL instances
gcloud sql instances list
gcloud sql instances describe <inst-name> # get IPs, CACert, settings

# Get database names inside an instance (like information_schema, sys...)
gcloud sql databases list --instance <intance-name>
gcloud sql databases describe <db-name> --instance <intance-name>

# Get usernames inside the db instance
gcloud sql users list --instance <intance-name>

# Backups
gcloud sql backups list --instance <intance-name>
gcloud sql backups describe <backup-name> --instance <intance-name>
```
### Kimlik DoÄŸrulamasÄ± Olmadan Enum

{% content-ref url="../gcp-unauthenticated-enum-and-access/gcp-cloud-sql-unauthenticated-enum.md" %}
[gcp-cloud-sql-unauthenticated-enum.md](../gcp-unauthenticated-enum-and-access/gcp-cloud-sql-unauthenticated-enum.md)
{% endcontent-ref %}

### SaldÄ±rÄ± SonrasÄ±

{% content-ref url="../gcp-post-exploitation/gcp-cloud-sql-post-exploitation.md" %}
[gcp-cloud-sql-post-exploitation.md](../gcp-post-exploitation/gcp-cloud-sql-post-exploitation.md)
{% endcontent-ref %}

### SÃ¼reklilik

{% content-ref url="../gcp-persistence/gcp-cloud-sql-persistence.md" %}
[gcp-cloud-sql-persistence.md](../gcp-persistence/gcp-cloud-sql-persistence.md)
{% endcontent-ref %}

{% hint style="success" %}
AWS Hacking'i Ã¶ÄŸrenin ve pratik yapÄ±n:<img src="../../../.gitbook/assets/image (1) (1).png" alt="" data-size="line">[**HackTricks Training AWS Red Team Expert (ARTE)**](https://training.hacktricks.xyz/courses/arte)<img src="../../../.gitbook/assets/image (1) (1).png" alt="" data-size="line">\
GCP Hacking'i Ã¶ÄŸrenin ve pratik yapÄ±n: <img src="../../../.gitbook/assets/image (2).png" alt="" data-size="line">[**HackTricks Training GCP Red Team Expert (GRTE)**<img src="../../../.gitbook/assets/image (2).png" alt="" data-size="line">](https://training.hacktricks.xyz/courses/grte)

<details>

<summary>HackTricks'i Destekleyin</summary>

* [**abonelik planlarÄ±nÄ±**](https://github.com/sponsors/carlospolop) kontrol edin!
* **ğŸ’¬ [**Discord grubuna**](https://discord.gg/hRep4RUj7f) veya [**telegram grubuna**](https://t.me/peass) katÄ±lÄ±n ya da **Twitter'da** ğŸ¦ [**@hacktricks\_live**](https://twitter.com/hacktricks\_live)**'i takip edin.**
* **Hacking ipuÃ§larÄ±nÄ± paylaÅŸmak iÃ§in** [**HackTricks**](https://github.com/carlospolop/hacktricks) ve [**HackTricks Cloud**](https://github.com/carlospolop/hacktricks-cloud) github reposuna PR gÃ¶nderin.

</details>
{% endhint %}
