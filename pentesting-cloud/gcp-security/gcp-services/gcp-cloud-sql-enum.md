# GCP - Cloud SQL Enum

{% hint style="success" %}
Learn & practice AWS Hacking:<img src="../../../.gitbook/assets/image (1) (1).png" alt="" data-size="line">[**HackTricks Training AWS Red Team Expert (ARTE)**](https://training.hacktricks.xyz/courses/arte)<img src="../../../.gitbook/assets/image (1) (1).png" alt="" data-size="line">\
Learn & practice GCP Hacking: <img src="../../../.gitbook/assets/image (2).png" alt="" data-size="line">[**HackTricks Training GCP Red Team Expert (GRTE)**<img src="../../../.gitbook/assets/image (2).png" alt="" data-size="line">](https://training.hacktricks.xyz/courses/grte)

<details>

<summary>Support HackTricks</summary>

* Check the [**subscription plans**](https://github.com/sponsors/carlospolop)!
* **Join the** 💬 [**Discord group**](https://discord.gg/hRep4RUj7f) or the [**telegram group**](https://t.me/peass) or **follow** us on **Twitter** 🐦 [**@hacktricks\_live**](https://twitter.com/hacktricks\_live)**.**
* **Share hacking tricks by submitting PRs to the** [**HackTricks**](https://github.com/carlospolop/hacktricks) and [**HackTricks Cloud**](https://github.com/carlospolop/hacktricks-cloud) github repos.

</details>
{% endhint %}

## Temel Bilgiler

Google Cloud SQL, **MySQL, PostgreSQL ve SQL Server** gibi ilişkisel veritabanlarını Google Cloud Platform üzerinde kurmayı, sürdürmeyi ve yönetmeyi **kolaylaştıran** yönetilen bir hizmettir; donanım sağlama, veritabanı kurma, yamanın uygulanması ve yedekleme gibi görevleri üstlenme gereğini ortadan kaldırır.

Google Cloud SQL'in ana özellikleri şunlardır:

1. **Tamamen Yönetilen**: Google Cloud SQL, yamanın uygulanması, güncellemeler, yedeklemeler ve yapılandırma gibi veritabanı bakım görevlerini Google'ın üstlendiği tamamen yönetilen bir hizmettir.
2. **Ölçeklenebilirlik**: Veritabanınızın depolama kapasitesini ve hesaplama kaynaklarını genellikle kesinti olmadan ölçeklendirme yeteneği sunar.
3. **Yüksek Erişilebilirlik**: Veritabanı hizmetlerinizin güvenilir olmasını ve bölge veya örnek arızalarına dayanabilmesini sağlayan yüksek erişilebilirlik yapılandırmaları sunar.
4. **Güvenlik**: Veri şifreleme, Kimlik ve Erişim Yönetimi (IAM) kontrolleri ve özel IP'ler ile VPC kullanarak ağ izolasyonu gibi sağlam güvenlik özellikleri sağlar.
5. **Yedeklemeler ve Kurtarma**: Otomatik yedeklemeleri ve zamanında kurtarmayı destekler, verilerinizi korumanıza ve geri yüklemenize yardımcı olur.
6. **Entegrasyon**: Diğer Google Cloud hizmetleriyle sorunsuz bir şekilde entegre olur, uygulamaları oluşturma, dağıtma ve yönetme için kapsamlı bir çözüm sunar.
7. **Performans**: Veritabanı performansını izlemek, sorun gidermek ve iyileştirmek için performans metrikleri ve tanılama sunar.

### Şifre

Web konsolunda Cloud SQL, kullanıcının veritabanının **şifresini ayarlamasına** olanak tanır, ayrıca bir oluşturma özelliği de vardır, ancak en önemlisi, **MySQL** boş bir şifre bırakmaya **ve hepsinin şifre olarak sadece "a" karakterini ayarlamasına** izin verir:

<figure><img src="../../../.gitbook/assets/image (14).png" alt=""><figcaption></figcaption></figure>

Ayrıca, **uzunluk**, **karmaşıklık**, **yeniden kullanımın devre dışı bırakılması** ve **şifrede kullanıcı adının devre dışı bırakılması** gerektiren bir şifre politikası yapılandırmak da mümkündür. Tüm bunlar varsayılan olarak devre dışıdır.

**SQL Server**, **Active Directory Kimlik Doğrulaması** ile yapılandırılabilir.

### Bölge Erişilebilirliği

Veritabanı **1 bölgede veya birden fazla bölgede** mevcut olabilir, elbette önemli veritabanlarının birden fazla bölgede olması önerilir.

### Şifreleme

Varsayılan olarak, Google tarafından yönetilen bir şifreleme anahtarı kullanılır, ancak **Müşteri tarafından yönetilen bir şifreleme anahtarı (CMEK)** seçmek de mümkündür.

### Bağlantılar

* **Özel IP**: VPC ağını belirtin ve veritabanı ağ içinde özel bir IP alacaktır.
* **Halka Açık IP**: Veritabanı halka açık bir IP alacaktır, ancak varsayılan olarak kimse bağlanamayacaktır.
* **Yetkili ağlar**: Veritabanına bağlanmasına izin verilmesi gereken halka açık **IP aralıklarını** belirtin.
* **Özel Yol**: DB bir VPC'ye bağlıysa, bu seçeneği etkinleştirmek ve **BigQuery gibi diğer GCP hizmetlerine erişim vermek** mümkündür.

<figure><img src="../../../.gitbook/assets/image (15).png" alt=""><figcaption></figcaption></figure>

### Veri Koruma

* **Günlük yedeklemeler**: Otomatik günlük yedeklemeler yapın ve korumak istediğiniz yedekleme sayısını belirtin.
* **Zamanında kurtarma**: Verileri belirli bir zamandan, saniyenin kesirine kadar geri yüklemenizi sağlar.
* **Silme Koruması**: Etkinleştirildiğinde, bu özellik devre dışı bırakılana kadar DB silinemez.

### Sayım
```bash
# Get SQL instances
gcloud sql instances list
gcloud sql instances describe <inst-name> # get IPs, CACert, settings

# Get database names inside an instance (like information_schema, sys...)
gcloud sql databases list --instance <intance-name>
gcloud sql databases describe <db-name> --instance <intance-name>

# Get usernames inside the db instance
gcloud sql users list --instance <intance-name>

# Backups
gcloud sql backups list --instance <intance-name>
gcloud sql backups describe <backup-name> --instance <intance-name>
```
### Kimlik Doğrulaması Olmadan Enum

{% content-ref url="../gcp-unauthenticated-enum-and-access/gcp-cloud-sql-unauthenticated-enum.md" %}
[gcp-cloud-sql-unauthenticated-enum.md](../gcp-unauthenticated-enum-and-access/gcp-cloud-sql-unauthenticated-enum.md)
{% endcontent-ref %}

### Saldırı Sonrası

{% content-ref url="../gcp-post-exploitation/gcp-cloud-sql-post-exploitation.md" %}
[gcp-cloud-sql-post-exploitation.md](../gcp-post-exploitation/gcp-cloud-sql-post-exploitation.md)
{% endcontent-ref %}

### Süreklilik

{% content-ref url="../gcp-persistence/gcp-cloud-sql-persistence.md" %}
[gcp-cloud-sql-persistence.md](../gcp-persistence/gcp-cloud-sql-persistence.md)
{% endcontent-ref %}

{% hint style="success" %}
AWS Hacking'i öğrenin ve pratik yapın:<img src="../../../.gitbook/assets/image (1) (1).png" alt="" data-size="line">[**HackTricks Training AWS Red Team Expert (ARTE)**](https://training.hacktricks.xyz/courses/arte)<img src="../../../.gitbook/assets/image (1) (1).png" alt="" data-size="line">\
GCP Hacking'i öğrenin ve pratik yapın: <img src="../../../.gitbook/assets/image (2).png" alt="" data-size="line">[**HackTricks Training GCP Red Team Expert (GRTE)**<img src="../../../.gitbook/assets/image (2).png" alt="" data-size="line">](https://training.hacktricks.xyz/courses/grte)

<details>

<summary>HackTricks'i Destekleyin</summary>

* [**abonelik planlarını**](https://github.com/sponsors/carlospolop) kontrol edin!
* **💬 [**Discord grubuna**](https://discord.gg/hRep4RUj7f) veya [**telegram grubuna**](https://t.me/peass) katılın ya da **Twitter'da** 🐦 [**@hacktricks\_live**](https://twitter.com/hacktricks\_live)**'i takip edin.**
* **Hacking ipuçlarını paylaşmak için** [**HackTricks**](https://github.com/carlospolop/hacktricks) ve [**HackTricks Cloud**](https://github.com/carlospolop/hacktricks-cloud) github reposuna PR gönderin.

</details>
{% endhint %}
