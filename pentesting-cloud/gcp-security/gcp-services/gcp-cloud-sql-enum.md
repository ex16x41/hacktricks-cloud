# GCP - Cloud SQL Enum

<details>

<summary><strong>htARTE (HackTricks AWS Red Team ì „ë¬¸ê°€)ë¡œë¶€í„° AWS í•´í‚¹ì„ ì²˜ìŒë¶€í„° ì „ë¬¸ê°€ê¹Œì§€ ë°°ìš°ì„¸ìš”!</strong></summary>

HackTricksë¥¼ ì§€ì›í•˜ëŠ” ë‹¤ë¥¸ ë°©ë²•:

* **íšŒì‚¬ê°€ HackTricksì— ê´‘ê³ ë˜ê¸¸ ì›í•˜ê±°ë‚˜ HackTricksë¥¼ PDFë¡œ ë‹¤ìš´ë¡œë“œí•˜ê³  ì‹¶ë‹¤ë©´** [**êµ¬ë… ìš”ê¸ˆì œ**](https://github.com/sponsors/carlospolop)ë¥¼ í™•ì¸í•˜ì„¸ìš”!
* [**ê³µì‹ PEASS & HackTricks ìŠ¤ì™œê·¸**](https://peass.creator-spring.com)ë¥¼ êµ¬ë§¤í•˜ì„¸ìš”
* [**The PEASS Family**](https://opensea.io/collection/the-peass-family)ë¥¼ ë°œê²¬í•˜ì„¸ìš”, ë‹¹ì‚¬ì˜ ë…ì  [**NFTs**](https://opensea.io/collection/the-peass-family) ì»¬ë ‰ì…˜
* **ğŸ’¬ [Discord ê·¸ë£¹](https://discord.gg/hRep4RUj7f)** ë˜ëŠ” [í…”ë ˆê·¸ë¨ ê·¸ë£¹](https://t.me/peass)ì— **ê°€ì…**í•˜ê±°ë‚˜ **íŠ¸ìœ„í„°** ğŸ¦ [**@carlospolopm**](https://twitter.com/carlospolopm)ì„ **íŒ”ë¡œìš°**í•˜ì„¸ìš”.
* **HackTricks** ë° **HackTricks Cloud**ì— PRì„ ì œì¶œí•˜ì—¬ **í•´í‚¹ ìš”ë ¹ì„ ê³µìœ **í•˜ì„¸ìš”
*
*
* github ì €ì¥ì†Œ.

</details>

## ê¸°ë³¸ ì •ë³´

Google Cloud SQLì€ Google Cloud Platformì—ì„œ MySQL, PostgreSQL ë° SQL Serverì™€ ê°™ì€ ê´€ê³„í˜• ë°ì´í„°ë² ì´ìŠ¤ë¥¼ ì„¤ì •, ìœ ì§€ ê´€ë¦¬ ë° ê´€ë¦¬í•˜ëŠ” ê²ƒì„ **ê°„ì†Œí™”**í•˜ëŠ” ê´€ë¦¬í˜• ì„œë¹„ìŠ¤ì…ë‹ˆë‹¤. ì´ëŠ” í•˜ë“œì›¨ì–´ í”„ë¡œë¹„ì €ë‹, ë°ì´í„°ë² ì´ìŠ¤ ì„¤ì •, íŒ¨ì¹˜ ë° ë°±ì—…ê³¼ ê°™ì€ ì‘ì—…ì„ ì²˜ë¦¬í•  í•„ìš”ê°€ ì—†ê²Œ í•©ë‹ˆë‹¤.

Google Cloud SQLì˜ ì£¼ìš” ê¸°ëŠ¥ì€ ë‹¤ìŒê³¼ ê°™ìŠµë‹ˆë‹¤:

1. **ì™„ì „ ê´€ë¦¬í˜•**: Google Cloud SQLì€ Googleì´ íŒ¨ì¹˜, ì—…ë°ì´íŠ¸, ë°±ì—… ë° êµ¬ì„±ê³¼ ê°™ì€ ë°ì´í„°ë² ì´ìŠ¤ ìœ ì§€ ê´€ë¦¬ ì‘ì—…ì„ ì²˜ë¦¬í•˜ëŠ” ì™„ì „ ê´€ë¦¬í˜• ì„œë¹„ìŠ¤ì…ë‹ˆë‹¤.
2. **í™•ì¥ì„±**: ë°ì´í„°ë² ì´ìŠ¤ì˜ ì €ì¥ ìš©ëŸ‰ ë° ì»´í“¨íŒ… ë¦¬ì†ŒìŠ¤ë¥¼ í™•ì¥í•  ìˆ˜ ìˆì–´ ì¢…ì¢… ë‹¤ìš´íƒ€ì„ ì—†ì´ ì‘ë™í•©ë‹ˆë‹¤.
3. **ê³ ê°€ìš©ì„±**: ê°€ìš©ì„± êµ¬ì„±ì„ ì œê³µí•˜ì—¬ ë°ì´í„°ë² ì´ìŠ¤ ì„œë¹„ìŠ¤ê°€ ì‹ ë¢°ì„± ìˆê³  ì¡´ ë˜ëŠ” ì¸ìŠ¤í„´ìŠ¤ ì¥ì• ë¥¼ ê²¬ë”œ ìˆ˜ ìˆë„ë¡ í•©ë‹ˆë‹¤.
4. **ë³´ì•ˆ**: ë°ì´í„° ì•”í˜¸í™”, Identity and Access Management (IAM) ì œì–´ ë° ì‚¬ì„¤ IP ë° VPCë¥¼ ì‚¬ìš©í•œ ë„¤íŠ¸ì›Œí¬ ê²©ë¦¬ì™€ ê°™ì€ ê°•ë ¥í•œ ë³´ì•ˆ ê¸°ëŠ¥ì„ ì œê³µí•©ë‹ˆë‹¤.
5. **ë°±ì—… ë° ë³µêµ¬**: ìë™ ë°±ì—… ë° ì‹œì  ë³µêµ¬ë¥¼ ì§€ì›í•˜ì—¬ ë°ì´í„°ë¥¼ ì•ˆì „í•˜ê²Œ ë³´í˜¸í•˜ê³  ë³µì›í•  ìˆ˜ ìˆë„ë¡ ë•ìŠµë‹ˆë‹¤.
6. **í†µí•©**: ë‹¤ë¥¸ Google Cloud ì„œë¹„ìŠ¤ì™€ ì›í™œí•˜ê²Œ í†µí•©ë˜ì–´ ì• í”Œë¦¬ì¼€ì´ì…˜ì„ êµ¬ì¶•, ë°°í¬ ë° ê´€ë¦¬í•˜ëŠ” í¬ê´„ì ì¸ ì†”ë£¨ì…˜ì„ ì œê³µí•©ë‹ˆë‹¤.
7. **ì„±ëŠ¥**: ë°ì´í„°ë² ì´ìŠ¤ ì„±ëŠ¥ì„ ëª¨ë‹ˆí„°ë§, ë¬¸ì œ í•´ê²° ë° ê°œì„ í•˜ê¸° ìœ„í•œ ì„±ëŠ¥ ë©”íŠ¸ë¦­ ë° ì§„ë‹¨ì„ ì œê³µí•©ë‹ˆë‹¤.

### ë¹„ë°€ë²ˆí˜¸

ì›¹ ì½˜ì†”ì—ì„œ Cloud SQLì€ ë°ì´í„°ë² ì´ìŠ¤ì˜ **ë¹„ë°€ë²ˆí˜¸ë¥¼ ì„¤ì •**í•  ìˆ˜ ìˆê²Œ í•´ì£¼ë©°, ìƒì„± ê¸°ëŠ¥ë„ ìˆì§€ë§Œ, **MySQL**ëŠ” **ë¹ˆ ë¹„ë°€ë²ˆí˜¸ë¥¼ ë‚¨ê¸¸ ìˆ˜ ìˆê³  ëª¨ë“  ë¹„ë°€ë²ˆí˜¸ë¥¼ "a" ë¬¸ìë¡œ ì„¤ì •**í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.

<figure><img src="../../../.gitbook/assets/image (14).png" alt=""><figcaption></figcaption></figure>

**ê¸¸ì´**, **ë³µì¡ì„±**, **ì¬ì‚¬ìš© ë¹„í™œì„±í™”** ë° **ë¹„ë°€ë²ˆí˜¸ì— ì‚¬ìš©ì ì´ë¦„ ë¹„í™œì„±í™”**ë¥¼ ìš”êµ¬í•˜ëŠ” ë¹„ë°€ë²ˆí˜¸ ì •ì±…ì„ êµ¬ì„±í•  ìˆ˜ë„ ìˆìŠµë‹ˆë‹¤. ê¸°ë³¸ì ìœ¼ë¡œ ëª¨ë‘ ë¹„í™œì„±í™”ë©ë‹ˆë‹¤.

**SQL Server**ëŠ” **Active Directory ì¸ì¦**ìœ¼ë¡œ êµ¬ì„±í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.

### ì¡´ ê°€ìš©ì„±

ë°ì´í„°ë² ì´ìŠ¤ëŠ” 1ê°œ ì¡´ ë˜ëŠ” ì—¬ëŸ¬ ì¡´ì—ì„œ ì‚¬ìš©í•  ìˆ˜ ìˆìœ¼ë©°, ì¤‘ìš”í•œ ë°ì´í„°ë² ì´ìŠ¤ëŠ” ì—¬ëŸ¬ ì¡´ì— ìˆì–´ì•¼ í•©ë‹ˆë‹¤.

### ì•”í˜¸í™”

ê¸°ë³¸ì ìœ¼ë¡œ Googleì´ ê´€ë¦¬í•˜ëŠ” ì•”í˜¸í™” í‚¤ë¥¼ ì‚¬ìš©í•˜ì§€ë§Œ **ê³ ê° ê´€ë¦¬í˜• ì•”í˜¸í™” í‚¤ (CMEK)**ë¥¼ ì„ íƒí•  ìˆ˜ë„ ìˆìŠµë‹ˆë‹¤.

### ì—°ê²°

* **ì‚¬ì„¤ IP**: VPC ë„¤íŠ¸ì›Œí¬ë¥¼ ì§€ì •í•˜ê³  ë°ì´í„°ë² ì´ìŠ¤ëŠ” ë„¤íŠ¸ì›Œí¬ ë‚´ë¶€ì— ì‚¬ì„¤ IPë¥¼ ë°›ìŠµë‹ˆë‹¤.
* **ê³µìš© IP**: ë°ì´í„°ë² ì´ìŠ¤ëŠ” ê³µìš© IPë¥¼ ë°›ì§€ë§Œ ê¸°ë³¸ì ìœ¼ë¡œ ì•„ë¬´ë„ ì—°ê²°í•  ìˆ˜ ì—†ìŠµë‹ˆë‹¤.
* **ì¸ê°€ëœ ë„¤íŠ¸ì›Œí¬**: ë°ì´í„°ë² ì´ìŠ¤ì— ì—°ê²°í•  ìˆ˜ ìˆëŠ” ê³µìš© **IP ë²”ìœ„ë¥¼ ì§€ì •**í•©ë‹ˆë‹¤.
* **ì‚¬ì„¤ ê²½ë¡œ**: DBê°€ íŠ¹ì • VPCì— ì—°ê²°ëœ ê²½ìš° ì´ ì˜µì…˜ì„ í™œì„±í™”í•˜ê³  **BigQueryì™€ ê°™ì€ ë‹¤ë¥¸ GCP ì„œë¹„ìŠ¤ì— ì•¡ì„¸ìŠ¤**ë¥¼ ì œê³µí•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.

<figure><img src="../../../.gitbook/assets/image (15).png" alt=""><figcaption></figcaption></figure>

### ë°ì´í„° ë³´í˜¸

* **ë§¤ì¼ ë°±ì—…**: ìë™ ë§¤ì¼ ë°±ì—…ì„ ìˆ˜í–‰í•˜ê³  ìœ ì§€í•  ë°±ì—… ìˆ˜ë¥¼ ì§€ì •í•©ë‹ˆë‹¤.
* **ì‹œê°„ë³„ ë³µêµ¬**: íŠ¹ì • ì‹œì ë¶€í„° ë°ì´í„°ë¥¼ ë³µêµ¬í•  ìˆ˜ ìˆë„ë¡ ì´ˆ ë‹¨ìœ„ë¡œ ì§€ì •í•©ë‹ˆë‹¤.
* **ì‚­ì œ ë³´í˜¸**: í™œì„±í™”ëœ ê²½ìš° ì´ ê¸°ëŠ¥ì´ ë¹„í™œì„±í™”ë  ë•Œê¹Œì§€ DBë¥¼ ì‚­ì œí•  ìˆ˜ ì—†ìŠµë‹ˆë‹¤.

### ì—´ê±°
```bash
# Get SQL instances
gcloud sql instances list
gcloud sql instances describe <inst-name> # get IPs, CACert, settings

# Get database names inside an instance (like information_schema, sys...)
gcloud sql databases list --instance <intance-name>
gcloud sql databases describe <db-name> --instance <intance-name>

# Get usernames inside the db instance
gcloud sql users list --instance <intance-name>

# Backups
gcloud sql backups list --instance <intance-name>
gcloud sql backups describe <backup-name> --instance <intance-name>
```
### ì¸ì¦ë˜ì§€ ì•Šì€ ì—´ê±°

{% content-ref url="../gcp-unaunthenticated-enum-and-access/gcp-cloud-sql-unauthenticated-enum.md" %}
[gcp-cloud-sql-unauthenticated-enum.md](../gcp-unaunthenticated-enum-and-access/gcp-cloud-sql-unauthenticated-enum.md)
{% endcontent-ref %}

### í›„ì† ê³µê²©

{% content-ref url="../gcp-post-exploitation/gcp-cloud-sql-post-exploitation.md" %}
[gcp-cloud-sql-post-exploitation.md](../gcp-post-exploitation/gcp-cloud-sql-post-exploitation.md)
{% endcontent-ref %}

### ì§€ì†ì„±

{% content-ref url="../gcp-persistence/gcp-cloud-sql-persistence.md" %}
[gcp-cloud-sql-persistence.md](../gcp-persistence/gcp-cloud-sql-persistence.md)
{% endcontent-ref %}

{% hint style="success" %}
AWS í•´í‚¹ í•™ìŠµ ë° ì‹¤ìŠµ:<img src="/.gitbook/assets/image.png" alt="" data-size="line">[**HackTricks Training AWS Red Team Expert (ARTE)**](https://training.hacktricks.xyz/courses/arte)<img src="/.gitbook/assets/image.png" alt="" data-size="line">\
GCP í•´í‚¹ í•™ìŠµ ë° ì‹¤ìŠµ: <img src="/.gitbook/assets/image (2).png" alt="" data-size="line">[**HackTricks Training GCP Red Team Expert (GRTE)**<img src="/.gitbook/assets/image (2).png" alt="" data-size="line">](https://training.hacktricks.xyz/courses/grte)

<details>

<summary>HackTricks ì§€ì›</summary>

* [**êµ¬ë… ìš”ê¸ˆì œ**](https://github.com/sponsors/carlospolop)ë¥¼ í™•ì¸í•˜ì„¸ìš”!
* ğŸ’¬ [**Discord ê·¸ë£¹**](https://discord.gg/hRep4RUj7f) ë˜ëŠ” [**í…”ë ˆê·¸ë¨ ê·¸ë£¹**](https://t.me/peass)ì— **ì°¸ì—¬**í•˜ê±°ë‚˜ **íŠ¸ìœ„í„°** ğŸ¦ [**@hacktricks\_live**](https://twitter.com/hacktricks\_live)**ë¥¼ íŒ”ë¡œìš°**í•˜ì„¸ìš”.
* [**HackTricks**](https://github.com/carlospolop/hacktricks) ë° [**HackTricks Cloud**](https://github.com/carlospolop/hacktricks-cloud) ê¹ƒí—™ ì €ì¥ì†Œì— PRì„ ì œì¶œí•˜ì—¬ í•´í‚¹ íŠ¸ë¦­ì„ ê³µìœ í•˜ì„¸ìš”.

</details>
{% endhint %}
