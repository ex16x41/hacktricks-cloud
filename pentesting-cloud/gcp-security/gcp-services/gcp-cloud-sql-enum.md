# GCP - Cloud SQL Enum

{% hint style="success" %}
Learn & practice AWS Hacking:<img src="../../../.gitbook/assets/image (1).png" alt="" data-size="line">[**HackTricks Training AWS Red Team Expert (ARTE)**](https://training.hacktricks.xyz/courses/arte)<img src="../../../.gitbook/assets/image (1).png" alt="" data-size="line">\
Learn & practice GCP Hacking: <img src="../../../.gitbook/assets/image (2).png" alt="" data-size="line">[**HackTricks Training GCP Red Team Expert (GRTE)**<img src="../../../.gitbook/assets/image (2).png" alt="" data-size="line">](https://training.hacktricks.xyz/courses/grte)

<details>

<summary>Support HackTricks</summary>

* Check the [**subscription plans**](https://github.com/sponsors/carlospolop)!
* **Join the** üí¨ [**Discord group**](https://discord.gg/hRep4RUj7f) or the [**telegram group**](https://t.me/peass) or **follow** us on **Twitter** üê¶ [**@hacktricks\_live**](https://twitter.com/hacktricks\_live)**.**
* **Share hacking tricks by submitting PRs to the** [**HackTricks**](https://github.com/carlospolop/hacktricks) and [**HackTricks Cloud**](https://github.com/carlospolop/hacktricks-cloud) github repos.

</details>
{% endhint %}

## Basic Information

Google Cloud SQL is 'n bestuurde diens wat **die opstelling, onderhoud en administrasie van relationele databasisse** soos MySQL, PostgreSQL en SQL Server op Google Cloud Platform vereenvoudig, wat die behoefte om take soos hardeware voorsiening, databasisopstelling, patching en rugsteun te hanteer, verwyder.

Belangrike kenmerke van Google Cloud SQL sluit in:

1. **Volledig bestuurde**: Google Cloud SQL is 'n volledig bestuurde diens, wat beteken dat Google databasis onderhoudstake soos patching, opdaterings, rugsteun en konfigurasie hanteer.
2. **Skaalbaarheid**: Dit bied die vermo√´ om die stoor kapasiteit en rekenaarhulpbronne van jou databasis te skaal, dikwels sonder stilstand.
3. **Ho√´ beskikbaarheid**: Bied ho√´ beskikbaarheid konfigurasies, wat verseker dat jou databasisdienste betroubaar is en teen sone of instansiefoute kan standhoud.
4. **Sekuriteit**: Bied robuuste sekuriteitskenmerke soos data-enkripsie, Identiteit en Toegang Bestuur (IAM) kontroles, en netwerk isolasie met behulp van private IP's en VPC.
5. **Rugsteun en Herstel**: Ondersteun outomatiese rugsteun en punt-in-tyd herstel, wat jou help om jou data te beskerm en te herstel.
6. **Integrasie**: Integreer naatloos met ander Google Cloud dienste, wat 'n omvattende oplossing bied vir die bou, ontplooiing en bestuur van toepassings.
7. **Prestasie**: Bied prestasiemetrieke en diagnostiek om databasisprestasie te monitor, probleemoplossing te doen en te verbeter.

### Password

In die webkonsol Cloud SQL laat die gebruiker toe om die **wagwoord** van die databasis te **stel**, daar is ook 'n genereer funksie, maar die belangrikste is, **MySQL** laat toe om 'n le√´ wagwoord te **laat** en al hulle laat toe om net die karakter "a" as wagwoord te stel: 

<figure><img src="../../../.gitbook/assets/image (14).png" alt=""><figcaption></figcaption></figure>

Dit is ook moontlik om 'n wagwoordbeleid te konfigureer wat **lengte**, **kompleksiteit**, **hergebruik deaktiveer** en **gebruikersnaam in wagwoord deaktiveer** vereis. Almal is standaard gedeaktiveer.

**SQL Server** kan geconfigureer word met **Active Directory Authentication**.

### Zone Availability

Die databasis kan **beskikbaar wees in 1 sone of in meerdere**, natuurlik, dit word aanbeveel om belangrike databasisse in meerdere sones te h√™.

### Encryption

Standaard word 'n Google-bestuurde enkripsiesleutel gebruik, maar dit is ook **moontlik om 'n Klant-bestuurde enkripsiesleutel (CMEK)** te kies.

### Connections

* **Private IP**: Gee die VPC-netwerk aan en die databasis sal 'n private IP binne die netwerk kry
* **Public IP**: Die databasis sal 'n publieke IP kry, maar standaard sal niemand in staat wees om te verbind nie
* **Authorized networks**: Gee publieke **IP-reekse aan wat toegelaat moet word** om met die databasis te verbind
* **Private Path**: As die DB aan 'n VPC gekoppel is, is dit moontlik om hierdie opsie in te skakel en **ander GCP-dienste soos BigQuery toegang daaroor te gee**

<figure><img src="../../../.gitbook/assets/image (15).png" alt=""><figcaption></figcaption></figure>

### Data Protection

* **Daaglikse rugsteun**: Voer outomatiese daaglikse rugsteun uit en gee die aantal rugsteun aan wat jy wil handhaaf.
* **Punt-in-tyd herstel**: Laat jou toe om data van 'n spesifieke tydstip te herstel, tot 'n fraksie van 'n sekonde.
* **Verwydering beskerming**: As geaktiveer, sal die DB nie verwyder kan word nie totdat hierdie funksie gedeaktiveer is.

### Enumeration
```bash
# Get SQL instances
gcloud sql instances list
gcloud sql instances describe <inst-name> # get IPs, CACert, settings

# Get database names inside an instance (like information_schema, sys...)
gcloud sql databases list --instance <intance-name>
gcloud sql databases describe <db-name> --instance <intance-name>

# Get usernames inside the db instance
gcloud sql users list --instance <intance-name>

# Backups
gcloud sql backups list --instance <intance-name>
gcloud sql backups describe <backup-name> --instance <intance-name>
```
### Unauthenticated Enum

{% content-ref url="../gcp-unauthenticated-enum-and-access/gcp-cloud-sql-unauthenticated-enum.md" %}
[gcp-cloud-sql-unauthenticated-enum.md](../gcp-unauthenticated-enum-and-access/gcp-cloud-sql-unauthenticated-enum.md)
{% endcontent-ref %}

### Post Exploitation

{% content-ref url="../gcp-post-exploitation/gcp-cloud-sql-post-exploitation.md" %}
[gcp-cloud-sql-post-exploitation.md](../gcp-post-exploitation/gcp-cloud-sql-post-exploitation.md)
{% endcontent-ref %}

### Persistence

{% content-ref url="../gcp-persistence/gcp-cloud-sql-persistence.md" %}
[gcp-cloud-sql-persistence.md](../gcp-persistence/gcp-cloud-sql-persistence.md)
{% endcontent-ref %}

{% hint style="success" %}
Leer & oefen AWS Hacking:<img src="../../../.gitbook/assets/image (1).png" alt="" data-size="line">[**HackTricks Training AWS Red Team Expert (ARTE)**](https://training.hacktricks.xyz/courses/arte)<img src="../../../.gitbook/assets/image (1).png" alt="" data-size="line">\
Leer & oefen GCP Hacking: <img src="../../../.gitbook/assets/image (2).png" alt="" data-size="line">[**HackTricks Training GCP Red Team Expert (GRTE)**<img src="../../../.gitbook/assets/image (2).png" alt="" data-size="line">](https://training.hacktricks.xyz/courses/grte)

<details>

<summary>Ondersteun HackTricks</summary>

* Kyk na die [**subskripsie planne**](https://github.com/sponsors/carlospolop)!
* **Sluit aan by die** üí¨ [**Discord groep**](https://discord.gg/hRep4RUj7f) of die [**telegram groep**](https://t.me/peass) of **volg** ons op **Twitter** üê¶ [**@hacktricks\_live**](https://twitter.com/hacktricks\_live)**.**
* **Deel hacking truuks deur PRs in te dien na die** [**HackTricks**](https://github.com/carlospolop/hacktricks) en [**HackTricks Cloud**](https://github.com/carlospolop/hacktricks-cloud) github repos.

</details>
{% endhint %}
