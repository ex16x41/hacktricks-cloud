# GCP - Cloud SQL Enum

{% hint style="success" %}
Learn & practice AWS Hacking:<img src="../../../.gitbook/assets/image (1).png" alt="" data-size="line">[**HackTricks Training AWS Red Team Expert (ARTE)**](https://training.hacktricks.xyz/courses/arte)<img src="../../../.gitbook/assets/image (1).png" alt="" data-size="line">\
Learn & practice GCP Hacking: <img src="../../../.gitbook/assets/image (2).png" alt="" data-size="line">[**HackTricks Training GCP Red Team Expert (GRTE)**<img src="../../../.gitbook/assets/image (2).png" alt="" data-size="line">](https://training.hacktricks.xyz/courses/grte)

<details>

<summary>Support HackTricks</summary>

* Check the [**subscription plans**](https://github.com/sponsors/carlospolop)!
* **Join the** üí¨ [**Discord group**](https://discord.gg/hRep4RUj7f) or the [**telegram group**](https://t.me/peass) or **follow** us on **Twitter** üê¶ [**@hacktricks\_live**](https://twitter.com/hacktricks\_live)**.**
* **Share hacking tricks by submitting PRs to the** [**HackTricks**](https://github.com/carlospolop/hacktricks) and [**HackTricks Cloud**](https://github.com/carlospolop/hacktricks-cloud) github repos.

</details>
{% endhint %}

## Basic Information

Google Cloud SQL ni huduma inayosimamiwa ambayo **inasanifisha kuweka, kudumisha, na kusimamia hifadhidata za uhusiano** kama MySQL, PostgreSQL, na SQL Server kwenye Google Cloud Platform, ikiondoa hitaji la kushughulikia kazi kama vile upatikanaji wa vifaa, kuweka hifadhidata, kusasisha, na nakala za akiba.

Vipengele muhimu vya Google Cloud SQL ni pamoja na:

1. **Imesimamiwa Kikamilifu**: Google Cloud SQL ni huduma inayosimamiwa kikamilifu, ikimaanisha kwamba Google inashughulikia kazi za matengenezo ya hifadhidata kama vile kusasisha, nakala za akiba, na usanidi.
2. **Uwezo wa Kupanua**: Inatoa uwezo wa kupanua uwezo wa hifadhi wa hifadhidata yako na rasilimali za kompyuta, mara nyingi bila kusimama.
3. **Upatikanaji wa Juu**: Inatoa usanidi wa upatikanaji wa juu, ikihakikisha kwamba huduma zako za hifadhidata ni za kuaminika na zinaweza kustahimili kushindwa kwa eneo au mfano.
4. **Usalama**: Inatoa vipengele vya usalama vilivyoimarishwa kama vile usimbaji wa data, udhibiti wa Utambulisho na Usimamizi wa Ufikiaji (IAM), na kutengwa kwa mtandao kwa kutumia IP za kibinafsi na VPC.
5. **Nakala za Akiba na Urejeleaji**: Inasaidia nakala za akiba za kiotomatiki na urejeleaji wa wakati maalum, ikikusaidia kulinda na kurejesha data yako.
6. **Ushirikiano**: Inajumuisha kwa urahisi na huduma nyingine za Google Cloud, ikitoa suluhisho kamili la kujenga, kutekeleza, na kusimamia programu.
7. **Utendaji**: Inatoa vipimo vya utendaji na uchambuzi wa matatizo ili kufuatilia, kutatua matatizo, na kuboresha utendaji wa hifadhidata.

### Password

Katika konsoli ya wavuti Cloud SQL inaruhusu mtumiaji **kueka** **nenosiri** la hifadhidata, pia kuna kipengele cha kuunda, lakini muhimu zaidi, **MySQL** inaruhusu **kuacha nenosiri tupu na zote zinaruhusu kuweka kama nenosiri herufi "a":**

<figure><img src="../../../.gitbook/assets/image (14).png" alt=""><figcaption></figcaption></figure>

Pia inawezekana kusanidi sera ya nenosiri inayohitaji **urefu**, **ugumu**, **kuondoa matumizi ya zamani** na **kuondoa jina la mtumiaji katika nenosiri**. Yote yamezimwa kwa default.

**SQL Server** inaweza kusanidiwa na **Uthibitishaji wa Active Directory**.

### Zone Availability

Hifadhidata inaweza kuwa **inapatikana katika eneo 1 au katika mengi**, bila shaka, inapendekezwa kuwa na hifadhidata muhimu katika maeneo mengi.

### Encryption

Kwa default, funguo za usimbaji zinazodhibitiwa na Google zinatumika, lakini pia ni **uwezekano kuchagua funguo za usimbaji zinazodhibitiwa na Mteja (CMEK)**.

### Connections

* **IP ya Kibinafsi**: Onyesha mtandao wa VPC na hifadhidata itapata IP ya kibinafsi ndani ya mtandao
* **IP ya Umma**: Hifadhidata itapata IP ya umma, lakini kwa default hakuna mtu atakayekuwa na uwezo wa kuungana
* **Mitandao Iliyothibitishwa**: Onyesha **mipangilio ya IP za umma ambazo zinapaswa kuruhusiwa** kuungana na hifadhidata
* **Njia ya Kibinafsi**: Ikiwa DB imeunganishwa katika VPC fulani, inawezekana kuwezesha chaguo hili na kutoa **huduma nyingine za GCP kama BigQuery ufikiaji juu yake**

<figure><img src="../../../.gitbook/assets/image (15).png" alt=""><figcaption></figcaption></figure>

### Data Protection

* **Nakala za akiba za kila siku**: Fanya nakala za akiba za kiotomatiki kila siku na onyesha idadi ya nakala za akiba unazotaka kudumisha.
* **Urejeleaji wa wakati maalum**: Inakuruhusu kurejesha data kutoka wakati maalum, hadi sehemu ya sekunde.
* **Ulinzi wa Kufuta**: Ikiwa imewezeshwa, DB haitakuwa na uwezo wa kufutwa hadi kipengele hiki kizimwe.

### Enumeration
```bash
# Get SQL instances
gcloud sql instances list
gcloud sql instances describe <inst-name> # get IPs, CACert, settings

# Get database names inside an instance (like information_schema, sys...)
gcloud sql databases list --instance <intance-name>
gcloud sql databases describe <db-name> --instance <intance-name>

# Get usernames inside the db instance
gcloud sql users list --instance <intance-name>

# Backups
gcloud sql backups list --instance <intance-name>
gcloud sql backups describe <backup-name> --instance <intance-name>
```
### Unauthenticated Enum

{% content-ref url="../gcp-unauthenticated-enum-and-access/gcp-cloud-sql-unauthenticated-enum.md" %}
[gcp-cloud-sql-unauthenticated-enum.md](../gcp-unauthenticated-enum-and-access/gcp-cloud-sql-unauthenticated-enum.md)
{% endcontent-ref %}

### Post Exploitation

{% content-ref url="../gcp-post-exploitation/gcp-cloud-sql-post-exploitation.md" %}
[gcp-cloud-sql-post-exploitation.md](../gcp-post-exploitation/gcp-cloud-sql-post-exploitation.md)
{% endcontent-ref %}

### Persistence

{% content-ref url="../gcp-persistence/gcp-cloud-sql-persistence.md" %}
[gcp-cloud-sql-persistence.md](../gcp-persistence/gcp-cloud-sql-persistence.md)
{% endcontent-ref %}

{% hint style="success" %}
Jifunze & fanya mazoezi ya AWS Hacking:<img src="../../../.gitbook/assets/image (1).png" alt="" data-size="line">[**HackTricks Training AWS Red Team Expert (ARTE)**](https://training.hacktricks.xyz/courses/arte)<img src="../../../.gitbook/assets/image (1).png" alt="" data-size="line">\
Jifunze & fanya mazoezi ya GCP Hacking: <img src="../../../.gitbook/assets/image (2).png" alt="" data-size="line">[**HackTricks Training GCP Red Team Expert (GRTE)**<img src="../../../.gitbook/assets/image (2).png" alt="" data-size="line">](https://training.hacktricks.xyz/courses/grte)

<details>

<summary>Support HackTricks</summary>

* Angalia [**mpango wa usajili**](https://github.com/sponsors/carlospolop)!
* **Jiunge na** üí¨ [**kikundi cha Discord**](https://discord.gg/hRep4RUj7f) au [**kikundi cha telegram**](https://t.me/peass) au **fuata** sisi kwenye **Twitter** üê¶ [**@hacktricks\_live**](https://twitter.com/hacktricks\_live)**.**
* **Shiriki mbinu za hacking kwa kuwasilisha PRs kwa** [**HackTricks**](https://github.com/carlospolop/hacktricks) na [**HackTricks Cloud**](https://github.com/carlospolop/hacktricks-cloud) github repos.

</details>
{% endhint %}
