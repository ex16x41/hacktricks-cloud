# GCP - Cloud SQL Enum

{% hint style="success" %}
Learn & practice AWS Hacking:<img src="../../../.gitbook/assets/image (1) (1) (1).png" alt="" data-size="line">[**HackTricks Training AWS Red Team Expert (ARTE)**](https://training.hacktricks.xyz/courses/arte)<img src="../../../.gitbook/assets/image (1) (1) (1).png" alt="" data-size="line">\
Learn & practice GCP Hacking: <img src="../../../.gitbook/assets/image (2).png" alt="" data-size="line">[**HackTricks Training GCP Red Team Expert (GRTE)**<img src="../../../.gitbook/assets/image (2).png" alt="" data-size="line">](https://training.hacktricks.xyz/courses/grte)

<details>

<summary>Support HackTricks</summary>

* Check the [**subscription plans**](https://github.com/sponsors/carlospolop)!
* **Join the** 💬 [**Discord group**](https://discord.gg/hRep4RUj7f) or the [**telegram group**](https://t.me/peass) or **follow** us on **Twitter** 🐦 [**@hacktricks\_live**](https://twitter.com/hacktricks_live)**.**
* **Share hacking tricks by submitting PRs to the** [**HackTricks**](https://github.com/carlospolop/hacktricks) and [**HackTricks Cloud**](https://github.com/carlospolop/hacktricks-cloud) github repos.

</details>
{% endhint %}

## Basic Information

Η Google Cloud SQL είναι μια διαχειριζόμενη υπηρεσία που **απλοποιεί την εγκατάσταση, τη συντήρηση και τη διαχείριση σχεσιακών βάσεων δεδομένων** όπως MySQL, PostgreSQL και SQL Server στην Google Cloud Platform, αφαιρώντας την ανάγκη να διαχειρίζεστε εργασίες όπως η προμήθεια υλικού, η ρύθμιση βάσεων δεδομένων, οι ενημερώσεις και τα αντίγραφα ασφαλείας.

Τα κύρια χαρακτηριστικά της Google Cloud SQL περιλαμβάνουν:

1. **Πλήρως Διαχειριζόμενη**: Η Google Cloud SQL είναι μια πλήρως διαχειριζόμενη υπηρεσία, πράγμα που σημαίνει ότι η Google αναλαμβάνει τις εργασίες συντήρησης της βάσης δεδομένων όπως οι ενημερώσεις, τα αντίγραφα ασφαλείας και η ρύθμιση.
2. **Κλιμάκωση**: Παρέχει τη δυνατότητα κλιμάκωσης της χωρητικότητας αποθήκευσης και των υπολογιστικών πόρων της βάσης δεδομένων σας, συχνά χωρίς διακοπή.
3. **Υψηλή Διαθεσιμότητα**: Προσφέρει ρυθμίσεις υψηλής διαθεσιμότητας, διασφαλίζοντας ότι οι υπηρεσίες βάσης δεδομένων σας είναι αξιόπιστες και μπορούν να αντέξουν αποτυχίες ζώνης ή παραδείγματος.
4. **Ασφάλεια**: Παρέχει ισχυρά χαρακτηριστικά ασφάλειας όπως κρυπτογράφηση δεδομένων, έλεγχο ταυτότητας και διαχείριση πρόσβασης (IAM) και απομόνωση δικτύου χρησιμοποιώντας ιδιωτικές διευθύνσεις IP και VPC.
5. **Αντίγραφα Ασφαλείας και Ανάκτηση**: Υποστηρίζει αυτόματα αντίγραφα ασφαλείας και ανάκτηση σε συγκεκριμένη χρονική στιγμή, βοηθώντας σας να προστατεύσετε και να αποκαταστήσετε τα δεδομένα σας.
6. **Ενοποίηση**: Ενοποιείται απρόσκοπτα με άλλες υπηρεσίες Google Cloud, παρέχοντας μια ολοκληρωμένη λύση για την κατασκευή, ανάπτυξη και διαχείριση εφαρμογών.
7. **Απόδοση**: Προσφέρει μετρήσεις απόδοσης και διαγνωστικά για την παρακολούθηση, την επίλυση προβλημάτων και τη βελτίωση της απόδοσης της βάσης δεδομένων.

### Password

Στην κονσόλα ιστού, η Cloud SQL επιτρέπει στον χρήστη να **ορίσει** τον **κωδικό πρόσβασης** της βάσης δεδομένων, υπάρχει επίσης μια δυνατότητα δημιουργίας, αλλά το πιο σημαντικό, **MySQL** επιτρέπει να **αφήσετε τον κωδικό πρόσβασης κενό και όλοι τους επιτρέπουν να ορίσουν ως κωδικό πρόσβασης μόνο τον χαρακτήρα "a":**

<figure><img src="../../../.gitbook/assets/image (14).png" alt=""><figcaption></figcaption></figure>

Είναι επίσης δυνατή η ρύθμιση μιας πολιτικής κωδικών πρόσβασης που απαιτεί **μήκος**, **πολυπλοκότητα**, **απενεργοποίηση επαναχρησιμοποίησης** και **απενεργοποίηση ονόματος χρήστη στον κωδικό πρόσβασης**. Όλα είναι απενεργοποιημένα από προεπιλογή.

**SQL Server** μπορεί να ρυθμιστεί με **Επαλήθευση Active Directory**.

### Zone Availability

Η βάση δεδομένων μπορεί να είναι **διαθέσιμη σε 1 ζώνη ή σε πολλές**, φυσικά, συνιστάται να έχετε σημαντικές βάσεις δεδομένων σε πολλές ζώνες.

### Encryption

Από προεπιλογή χρησιμοποιείται ένα κλειδί κρυπτογράφησης που διαχειρίζεται η Google, αλλά είναι επίσης **δυνατό να επιλέξετε ένα κλειδί κρυπτογράφησης που διαχειρίζεται ο πελάτης (CMEK)**.

### Connections

* **Ιδιωτική IP**: Υποδείξτε το δίκτυο VPC και η βάση δεδομένων θα αποκτήσει μια ιδιωτική IP μέσα στο δίκτυο
* **Δημόσια IP**: Η βάση δεδομένων θα αποκτήσει μια δημόσια IP, αλλά από προεπιλογή κανείς δεν θα μπορεί να συνδεθεί
* **Εξουσιοδοτημένα δίκτυα**: Υποδείξτε δημόσιες **εύρος IP που θα πρέπει να επιτρέπεται** να συνδεθούν στη βάση δεδομένων
* **Ιδιωτική Διαδρομή**: Εάν η DB είναι συνδεδεμένη σε κάποιο VPC, είναι δυνατή η ενεργοποίηση αυτής της επιλογής και η παροχή **πρόσβασης σε άλλες υπηρεσίες GCP όπως το BigQuery μέσω αυτής**

<figure><img src="../../../.gitbook/assets/image (15).png" alt=""><figcaption></figcaption></figure>

### Data Protection

* **Καθημερινά αντίγραφα ασφαλείας**: Εκτελέστε αυτόματα καθημερινά αντίγραφα ασφαλείας και υποδείξτε τον αριθμό των αντιγράφων ασφαλείας που θέλετε να διατηρήσετε.
* **Ανάκτηση σε συγκεκριμένη χρονική στιγμή**: Σας επιτρέπει να ανακτήσετε δεδομένα από μια συγκεκριμένη χρονική στιγμή, μέχρι ένα κλάσμα του δευτερολέπτου.
* **Προστασία Διαγραφής**: Εάν είναι ενεργοποιημένη, η DB δεν θα μπορεί να διαγραφεί μέχρι να απενεργοποιηθεί αυτή η δυνατότητα.

### Enumeration
```bash
# Get SQL instances
gcloud sql instances list
gcloud sql instances describe <inst-name> # get IPs, CACert, settings

# Get database names inside an instance (like information_schema, sys...)
gcloud sql databases list --instance <intance-name>
gcloud sql databases describe <db-name> --instance <intance-name>

# Get usernames inside the db instance
gcloud sql users list --instance <intance-name>

# Backups
gcloud sql backups list --instance <intance-name>
gcloud sql backups describe <backup-name> --instance <intance-name>
```
### Unauthenticated Enum

{% content-ref url="../gcp-unauthenticated-enum-and-access/gcp-cloud-sql-unauthenticated-enum.md" %}
[gcp-cloud-sql-unauthenticated-enum.md](../gcp-unauthenticated-enum-and-access/gcp-cloud-sql-unauthenticated-enum.md)
{% endcontent-ref %}

### Post Exploitation

{% content-ref url="../gcp-post-exploitation/gcp-cloud-sql-post-exploitation.md" %}
[gcp-cloud-sql-post-exploitation.md](../gcp-post-exploitation/gcp-cloud-sql-post-exploitation.md)
{% endcontent-ref %}

### Persistence

{% content-ref url="../gcp-persistence/gcp-cloud-sql-persistence.md" %}
[gcp-cloud-sql-persistence.md](../gcp-persistence/gcp-cloud-sql-persistence.md)
{% endcontent-ref %}

{% hint style="success" %}
Μάθετε & εξασκηθείτε στο AWS Hacking:<img src="../../../.gitbook/assets/image (1) (1) (1).png" alt="" data-size="line">[**HackTricks Training AWS Red Team Expert (ARTE)**](https://training.hacktricks.xyz/courses/arte)<img src="../../../.gitbook/assets/image (1) (1) (1).png" alt="" data-size="line">\
Μάθετε & εξασκηθείτε στο GCP Hacking: <img src="../../../.gitbook/assets/image (2).png" alt="" data-size="line">[**HackTricks Training GCP Red Team Expert (GRTE)**<img src="../../../.gitbook/assets/image (2).png" alt="" data-size="line">](https://training.hacktricks.xyz/courses/grte)

<details>

<summary>Support HackTricks</summary>

* Ελέγξτε τα [**σχέδια συνδρομής**](https://github.com/sponsors/carlospolop)!
* **Εγγραφείτε στην** 💬 [**ομάδα Discord**](https://discord.gg/hRep4RUj7f) ή στην [**ομάδα telegram**](https://t.me/peass) ή **ακολουθήστε** μας στο **Twitter** 🐦 [**@hacktricks\_live**](https://twitter.com/hacktricks_live)**.**
* **Μοιραστείτε κόλπα hacking υποβάλλοντας PRs στα** [**HackTricks**](https://github.com/carlospolop/hacktricks) και [**HackTricks Cloud**](https://github.com/carlospolop/hacktricks-cloud) github repos.

</details>
{% endhint %}
