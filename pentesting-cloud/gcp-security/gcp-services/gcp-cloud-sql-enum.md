# GCP - Cloud SQL Enum

{% hint style="success" %}
Learn & practice AWS Hacking:<img src="../../../.gitbook/assets/image (1) (1) (1).png" alt="" data-size="line">[**HackTricks Training AWS Red Team Expert (ARTE)**](https://training.hacktricks.xyz/courses/arte)<img src="../../../.gitbook/assets/image (1) (1) (1).png" alt="" data-size="line">\
Learn & practice GCP Hacking: <img src="../../../.gitbook/assets/image (2).png" alt="" data-size="line">[**HackTricks Training GCP Red Team Expert (GRTE)**<img src="../../../.gitbook/assets/image (2).png" alt="" data-size="line">](https://training.hacktricks.xyz/courses/grte)

<details>

<summary>Support HackTricks</summary>

* Check the [**subscription plans**](https://github.com/sponsors/carlospolop)!
* **Join the** ğŸ’¬ [**Discord group**](https://discord.gg/hRep4RUj7f) or the [**telegram group**](https://t.me/peass) or **follow** us on **Twitter** ğŸ¦ [**@hacktricks\_live**](https://twitter.com/hacktricks_live)**.**
* **Share hacking tricks by submitting PRs to the** [**HackTricks**](https://github.com/carlospolop/hacktricks) and [**HackTricks Cloud**](https://github.com/carlospolop/hacktricks-cloud) github repos.

</details>
{% endhint %}

## Basic Information

Google Cloud SQLì€ **MySQL, PostgreSQL ë° SQL Server**ì™€ ê°™ì€ ê´€ê³„í˜• ë°ì´í„°ë² ì´ìŠ¤ë¥¼ Google Cloud Platformì—ì„œ ì„¤ì •, ìœ ì§€ ê´€ë¦¬ ë° ê´€ë¦¬í•˜ëŠ” ê²ƒì„ **ê°„ì†Œí™”í•˜ëŠ” ê´€ë¦¬í˜• ì„œë¹„ìŠ¤**ì…ë‹ˆë‹¤. í•˜ë“œì›¨ì–´ í”„ë¡œë¹„ì €ë‹, ë°ì´í„°ë² ì´ìŠ¤ ì„¤ì •, íŒ¨ì¹˜ ë° ë°±ì—…ê³¼ ê°™ì€ ì‘ì—…ì„ ì²˜ë¦¬í•  í•„ìš”ê°€ ì—†ìŠµë‹ˆë‹¤.

Google Cloud SQLì˜ ì£¼ìš” ê¸°ëŠ¥ì€ ë‹¤ìŒê³¼ ê°™ìŠµë‹ˆë‹¤:

1. **ì™„ì „ ê´€ë¦¬í˜•**: Google Cloud SQLì€ ì™„ì „ ê´€ë¦¬í˜• ì„œë¹„ìŠ¤ë¡œ, Googleì´ íŒ¨ì¹˜, ì—…ë°ì´íŠ¸, ë°±ì—… ë° êµ¬ì„±ê³¼ ê°™ì€ ë°ì´í„°ë² ì´ìŠ¤ ìœ ì§€ ê´€ë¦¬ ì‘ì—…ì„ ì²˜ë¦¬í•©ë‹ˆë‹¤.
2. **í™•ì¥ì„±**: ë°ì´í„°ë² ì´ìŠ¤ì˜ ì €ì¥ ìš©ëŸ‰ê³¼ ì»´í“¨íŒ… ë¦¬ì†ŒìŠ¤ë¥¼ í™•ì¥í•  ìˆ˜ ìˆëŠ” ê¸°ëŠ¥ì„ ì œê³µí•˜ë©°, ì¢…ì¢… ë‹¤ìš´íƒ€ì„ ì—†ì´ ê°€ëŠ¥í•©ë‹ˆë‹¤.
3. **ê³ ê°€ìš©ì„±**: ê³ ê°€ìš©ì„± êµ¬ì„±ì„ ì œê³µí•˜ì—¬ ë°ì´í„°ë² ì´ìŠ¤ ì„œë¹„ìŠ¤ì˜ ì‹ ë¢°ì„±ì„ ë³´ì¥í•˜ê³  ì˜ì—­ ë˜ëŠ” ì¸ìŠ¤í„´ìŠ¤ ì¥ì• ë¥¼ ê²¬ë”œ ìˆ˜ ìˆìŠµë‹ˆë‹¤.
4. **ë³´ì•ˆ**: ë°ì´í„° ì•”í˜¸í™”, Identity and Access Management (IAM) ì œì–´ ë° ê°œì¸ IPì™€ VPCë¥¼ ì‚¬ìš©í•œ ë„¤íŠ¸ì›Œí¬ ê²©ë¦¬ì™€ ê°™ì€ ê°•ë ¥í•œ ë³´ì•ˆ ê¸°ëŠ¥ì„ ì œê³µí•©ë‹ˆë‹¤.
5. **ë°±ì—… ë° ë³µêµ¬**: ìë™ ë°±ì—… ë° ì‹œì  ë³µêµ¬ë¥¼ ì§€ì›í•˜ì—¬ ë°ì´í„°ë¥¼ ë³´í˜¸í•˜ê³  ë³µì›í•˜ëŠ” ë° ë„ì›€ì„ ì¤ë‹ˆë‹¤.
6. **í†µí•©**: ë‹¤ë¥¸ Google Cloud ì„œë¹„ìŠ¤ì™€ ì›í™œí•˜ê²Œ í†µí•©ë˜ì–´ ì• í”Œë¦¬ì¼€ì´ì…˜ì„ êµ¬ì¶•, ë°°í¬ ë° ê´€ë¦¬í•˜ëŠ” í¬ê´„ì ì¸ ì†”ë£¨ì…˜ì„ ì œê³µí•©ë‹ˆë‹¤.
7. **ì„±ëŠ¥**: ë°ì´í„°ë² ì´ìŠ¤ ì„±ëŠ¥ì„ ëª¨ë‹ˆí„°ë§, ë¬¸ì œ í•´ê²° ë° ê°œì„ í•˜ê¸° ìœ„í•œ ì„±ëŠ¥ ë©”íŠ¸ë¦­ ë° ì§„ë‹¨ì„ ì œê³µí•©ë‹ˆë‹¤.

### Password

ì›¹ ì½˜ì†”ì—ì„œ Cloud SQLì€ ì‚¬ìš©ìê°€ ë°ì´í„°ë² ì´ìŠ¤ì˜ **ë¹„ë°€ë²ˆí˜¸**ë¥¼ **ì„¤ì •**í•  ìˆ˜ ìˆë„ë¡ í•˜ë©°, ìƒì„± ê¸°ëŠ¥ë„ ìˆì§€ë§Œ, ê°€ì¥ ì¤‘ìš”í•œ ê²ƒì€ **MySQL**ì´ **ë¹ˆ ë¹„ë°€ë²ˆí˜¸ë¥¼ í—ˆìš©í•˜ê³  ëª¨ë“  ë°ì´í„°ë² ì´ìŠ¤ê°€ "a" ë¬¸ìë§Œ ë¹„ë°€ë²ˆí˜¸ë¡œ ì„¤ì •í•  ìˆ˜ ìˆë„ë¡ í—ˆìš©í•œë‹¤ëŠ” ê²ƒì…ë‹ˆë‹¤:**

<figure><img src="../../../.gitbook/assets/image (14).png" alt=""><figcaption></figcaption></figure>

ë¹„ë°€ë²ˆí˜¸ ì •ì±…ì„ êµ¬ì„±í•˜ì—¬ **ê¸¸ì´**, **ë³µì¡ì„±**, **ì¬ì‚¬ìš© ë¹„í™œì„±í™”** ë° **ë¹„ë°€ë²ˆí˜¸ì— ì‚¬ìš©ì ì´ë¦„ ë¹„í™œì„±í™”**ë¥¼ ìš”êµ¬í•  ìˆ˜ë„ ìˆìŠµë‹ˆë‹¤. ê¸°ë³¸ì ìœ¼ë¡œ ëª¨ë‘ ë¹„í™œì„±í™”ë˜ì–´ ìˆìŠµë‹ˆë‹¤.

**SQL Server**ëŠ” **Active Directory ì¸ì¦**ìœ¼ë¡œ êµ¬ì„±í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.

### Zone Availability

ë°ì´í„°ë² ì´ìŠ¤ëŠ” **1ê°œ ì˜ì—­ ë˜ëŠ” ì—¬ëŸ¬ ê°œ ì˜ì—­ì—ì„œ ì‚¬ìš©í•  ìˆ˜ ìˆìœ¼ë©°**, ë¬¼ë¡  ì¤‘ìš”í•œ ë°ì´í„°ë² ì´ìŠ¤ëŠ” ì—¬ëŸ¬ ê°œ ì˜ì—­ì— ë‘ëŠ” ê²ƒì´ ê¶Œì¥ë©ë‹ˆë‹¤.

### Encryption

ê¸°ë³¸ì ìœ¼ë¡œ Google ê´€ë¦¬ ì•”í˜¸í™” í‚¤ê°€ ì‚¬ìš©ë˜ì§€ë§Œ, **ê³ ê° ê´€ë¦¬ ì•”í˜¸í™” í‚¤(CMEK)**ë¥¼ ì„ íƒí•˜ëŠ” ê²ƒë„ **ê°€ëŠ¥í•©ë‹ˆë‹¤**.

### Connections

* **Private IP**: VPC ë„¤íŠ¸ì›Œí¬ë¥¼ ì§€ì •í•˜ë©´ ë°ì´í„°ë² ì´ìŠ¤ê°€ ë„¤íŠ¸ì›Œí¬ ë‚´ì—ì„œ ê°œì¸ IPë¥¼ ë°›ìŠµë‹ˆë‹¤.
* **Public IP**: ë°ì´í„°ë² ì´ìŠ¤ê°€ ê³µìš© IPë¥¼ ë°›ì§€ë§Œ ê¸°ë³¸ì ìœ¼ë¡œ ëˆ„êµ¬ë„ ì—°ê²°í•  ìˆ˜ ì—†ìŠµë‹ˆë‹¤.
* **Authorized networks**: ë°ì´í„°ë² ì´ìŠ¤ì— ì—°ê²°í•  ìˆ˜ ìˆë„ë¡ í—ˆìš©í•´ì•¼ í•˜ëŠ” ê³µìš© **IP ë²”ìœ„**ë¥¼ ì§€ì •í•©ë‹ˆë‹¤.
* **Private Path**: DBê°€ ì¼ë¶€ VPCì— ì—°ê²°ë˜ì–´ ìˆëŠ” ê²½ìš° ì´ ì˜µì…˜ì„ í™œì„±í™”í•˜ê³  **BigQueryì™€ ê°™ì€ ë‹¤ë¥¸ GCP ì„œë¹„ìŠ¤ì— ëŒ€í•œ ì•¡ì„¸ìŠ¤ë¥¼ ì œê³µí•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.**

<figure><img src="../../../.gitbook/assets/image (15).png" alt=""><figcaption></figcaption></figure>

### Data Protection

* **Daily backups**: ìë™ ì¼ì¼ ë°±ì—…ì„ ìˆ˜í–‰í•˜ê³  ìœ ì§€í•  ë°±ì—… ìˆ˜ë¥¼ ì§€ì •í•©ë‹ˆë‹¤.
* **Point-in-time recovery**: íŠ¹ì • ì‹œì ì—ì„œ ë°ì´í„°ë¥¼ ë³µêµ¬í•  ìˆ˜ ìˆìœ¼ë©°, ì´ˆ ë‹¨ìœ„ë¡œ ì„¸ë¶„í™”í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.
* **Deletion Protection**: í™œì„±í™”ë˜ë©´ ì´ ê¸°ëŠ¥ì´ ë¹„í™œì„±í™”ë  ë•Œê¹Œì§€ DBë¥¼ ì‚­ì œí•  ìˆ˜ ì—†ìŠµë‹ˆë‹¤.

### Enumeration
```bash
# Get SQL instances
gcloud sql instances list
gcloud sql instances describe <inst-name> # get IPs, CACert, settings

# Get database names inside an instance (like information_schema, sys...)
gcloud sql databases list --instance <intance-name>
gcloud sql databases describe <db-name> --instance <intance-name>

# Get usernames inside the db instance
gcloud sql users list --instance <intance-name>

# Backups
gcloud sql backups list --instance <intance-name>
gcloud sql backups describe <backup-name> --instance <intance-name>
```
### ì¸ì¦ë˜ì§€ ì•Šì€ ì—´ê±°

{% content-ref url="../gcp-unauthenticated-enum-and-access/gcp-cloud-sql-unauthenticated-enum.md" %}
[gcp-cloud-sql-unauthenticated-enum.md](../gcp-unauthenticated-enum-and-access/gcp-cloud-sql-unauthenticated-enum.md)
{% endcontent-ref %}

### í¬ìŠ¤íŠ¸ ìµìŠ¤í”Œë¡œì‡

{% content-ref url="../gcp-post-exploitation/gcp-cloud-sql-post-exploitation.md" %}
[gcp-cloud-sql-post-exploitation.md](../gcp-post-exploitation/gcp-cloud-sql-post-exploitation.md)
{% endcontent-ref %}

### ì§€ì†ì„±

{% content-ref url="../gcp-persistence/gcp-cloud-sql-persistence.md" %}
[gcp-cloud-sql-persistence.md](../gcp-persistence/gcp-cloud-sql-persistence.md)
{% endcontent-ref %}

{% hint style="success" %}
AWS í•´í‚¹ ë°°ìš°ê¸° ë° ì—°ìŠµí•˜ê¸°:<img src="../../../.gitbook/assets/image (1) (1) (1).png" alt="" data-size="line">[**HackTricks Training AWS Red Team Expert (ARTE)**](https://training.hacktricks.xyz/courses/arte)<img src="../../../.gitbook/assets/image (1) (1) (1).png" alt="" data-size="line">\
GCP í•´í‚¹ ë°°ìš°ê¸° ë° ì—°ìŠµí•˜ê¸°: <img src="../../../.gitbook/assets/image (2).png" alt="" data-size="line">[**HackTricks Training GCP Red Team Expert (GRTE)**<img src="../../../.gitbook/assets/image (2).png" alt="" data-size="line">](https://training.hacktricks.xyz/courses/grte)

<details>

<summary>HackTricks ì§€ì›í•˜ê¸°</summary>

* [**êµ¬ë… ê³„íš**](https://github.com/sponsors/carlospolop) í™•ì¸í•˜ê¸°!
* **ğŸ’¬ [**Discord ê·¸ë£¹**](https://discord.gg/hRep4RUj7f) ë˜ëŠ” [**í…”ë ˆê·¸ë¨ ê·¸ë£¹**](https://t.me/peass)ì— ì°¸ì—¬í•˜ê±°ë‚˜ **Twitter** ğŸ¦ [**@hacktricks\_live**](https://twitter.com/hacktricks_live)**ë¥¼ íŒ”ë¡œìš°í•˜ì„¸ìš”.**
* **[**HackTricks**](https://github.com/carlospolop/hacktricks) ë° [**HackTricks Cloud**](https://github.com/carlospolop/hacktricks-cloud) ê¹ƒí—ˆë¸Œ ë¦¬í¬ì§€í† ë¦¬ì— PRì„ ì œì¶œí•˜ì—¬ í•´í‚¹ íŒì„ ê³µìœ í•˜ì„¸ìš”.**

</details>
{% endhint %}
