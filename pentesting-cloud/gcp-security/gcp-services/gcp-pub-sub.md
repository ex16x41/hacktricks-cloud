# GCP - Pub/Sub SÄ±ralama

{% hint style="success" %}
AWS Hacking'i Ã¶ÄŸrenin ve uygulayÄ±n:<img src="/.gitbook/assets/image.png" alt="" data-size="line">[**HackTricks EÄŸitim AWS KÄ±rmÄ±zÄ± TakÄ±m UzmanÄ± (ARTE)**](https://training.hacktricks.xyz/courses/arte)<img src="/.gitbook/assets/image.png" alt="" data-size="line">\
GCP Hacking'i Ã¶ÄŸrenin ve uygulayÄ±n: <img src="/.gitbook/assets/image (2).png" alt="" data-size="line">[**HackTricks EÄŸitim GCP KÄ±rmÄ±zÄ± TakÄ±m UzmanÄ± (GRTE)**<img src="/.gitbook/assets/image (2).png" alt="" data-size="line">](https://training.hacktricks.xyz/courses/grte)

<details>

<summary>HackTricks'i Destekleyin</summary>

* [**Abonelik planlarÄ±nÄ±**](https://github.com/sponsors/carlospolop) kontrol edin!
* ğŸ’¬ [**Discord grubuna**](https://discord.gg/hRep4RUj7f) katÄ±lÄ±n veya [**telegram grubuna**](https://t.me/peass) katÄ±lÄ±n veya bizi **Twitter** ğŸ¦ [**@hacktricks\_live**](https://twitter.com/hacktricks\_live)** takip edin.**
* **Hacking pÃ¼f noktalarÄ±nÄ± paylaÅŸarak PR'ler gÃ¶ndererek** [**HackTricks**](https://github.com/carlospolop/hacktricks) ve [**HackTricks Cloud**](https://github.com/carlospolop/hacktricks-cloud) github depolarÄ±na katkÄ±da bulunun.

</details>
{% endhint %}

## Pub/Sub <a href="#reviewing-cloud-pubsub" id="reviewing-cloud-pubsub"></a>

[Google **Cloud Pub/Sub**](https://cloud.google.com/pubsub/), baÄŸÄ±msÄ±z uygulamalar arasÄ±nda mesaj alÄ±ÅŸveriÅŸini kolaylaÅŸtÄ±ran bir hizmet olarak tanÄ±mlanmaktadÄ±r. Temel bileÅŸenler arasÄ±nda **konular** bulunur, uygulamalarÄ±n **abone olabileceÄŸi** bileÅŸenler. Abone olan uygulamalar, **mesaj gÃ¶nderebilme ve alabilme** yeteneÄŸine sahiptir. Her mesaj, gerÃ§ek iÃ§eriÄŸi ve iliÅŸkili meta verileri iÃ§erir.

**Konu, mesajlarÄ±n gÃ¶nderileceÄŸi kuyruk** iken, **abonelikler**, kullanÄ±cÄ±larÄ±n **konulardaki mesajlara eriÅŸmek iÃ§in kullanacaklarÄ± nesnelerdir**. Bir konuda birden fazla **abonelik olabilir** ve 4 tÃ¼r abonelik bulunmaktadÄ±r:

* **Ã‡ekme**: Bu aboneliÄŸi kullanan kullanÄ±cÄ±(lar) mesajlarÄ± Ã§ekmelidir.
* **Ä°tme**: Bir URL uÃ§ noktasÄ± belirtilir ve mesajlar hemen oraya gÃ¶nderilir.
* **BÃ¼yÃ¼k sorgu tablosu**: Ä°tme gibi ancak mesajlarÄ± bir BÃ¼yÃ¼k sorgu tablosu iÃ§ine yerleÅŸtirme.
* **Cloud Depolama**: MesajlarÄ± doÄŸrudan varolan bir kovaya iletmek.

**VarsayÄ±lan olarak** bir **abonelik 31 gÃ¼n sonra sona erer**, ancak asla sona ermemesi iÃ§in ayarlanabilir.

**VarsayÄ±lan olarak**, bir mesaj **7 gÃ¼n boyunca saklanÄ±r**, ancak bu sÃ¼re **31 gÃ¼ne kadar artÄ±rÄ±labilir**. AyrÄ±ca, 10 saniye iÃ§inde **ACK alÄ±nmazsa** mesaj kuyruÄŸa geri dÃ¶ner. ACK alÄ±nmÄ±ÅŸ mesajlarÄ±n depolanmaya devam etmesi de ayarlanabilir.

Bir konu varsayÄ±lan olarak bir **Google tarafÄ±ndan yÃ¶netilen ÅŸifreleme anahtarÄ±** kullanÄ±larak ÅŸifrelenir. Ancak bir **KMS'den MÃ¼ÅŸteri YÃ¶netimli Åifreleme AnahtarÄ± (CMEK)** de seÃ§ilebilir.

**Ã–lÃ¼ mektup**: Abonelikler, bir **maksimum teslim deneme sayÄ±sÄ±** yapÄ±landÄ±rabilir. Bir mesaj teslim edilemezse, belirtilen Ã¶lÃ¼ mektup konusuna **yeniden yayÄ±mlanÄ±r**.

### AnlÄ±k GÃ¶rÃ¼ntÃ¼ler ve Åemalar

Bir anlÄ±k gÃ¶rÃ¼ntÃ¼, belirli bir zamandaki bir aboneliÄŸin durumunu **yakalar**. Temelde, bir anlÄ±k gÃ¶rÃ¼ntÃ¼, abonelikteki **ACK alÄ±nmamÄ±ÅŸ mesajlarÄ±n tutarlÄ± bir yedeÄŸidir**. Bir anlÄ±k gÃ¶rÃ¼ntÃ¼ oluÅŸturarak, aboneliÄŸin mesaj alÄ±m durumunu korursunuz ve orijinal mesajlar silinmiÅŸ olsa bile, anlÄ±k gÃ¶rÃ¼ntÃ¼nÃ¼n alÄ±ndÄ±ÄŸÄ± noktadan mesaj tÃ¼ketimine devam etmenizi saÄŸlar.\
Ã‡ok ÅŸanslÄ±ysanÄ±z, bir anlÄ±k gÃ¶rÃ¼ntÃ¼, anlÄ±k gÃ¶rÃ¼ntÃ¼nÃ¼n alÄ±ndÄ±ÄŸÄ± zamandaki **eski hassas bilgileri** iÃ§erebilir.

Bir konu oluÅŸtururken, **konu mesajlarÄ±nÄ±n bir ÅŸemaya uymasÄ± gerektiÄŸini** belirtebilirsiniz.

### SÄ±ralama
```bash
# Get a list of topics in the project
gcloud pubsub topics list
gcloud pubsub topics describe <topic>
gcloud pubsub topics list-subscriptions <topic>
gcloud pubsub topics get-iam-policy <topic>

# Get a list of subscriptions across all topics
gcloud pubsub subscriptions list
gcloud pubsub subscriptions describe <subscription>
gcloud pubsub subscriptions get-iam-policy <subscription>

# Get list of schemas
gcloud pubsub schemas list
gcloud pubsub schemas describe <schema>
gcloud pubsub schemas list-revisions <schema>

# Get list of snapshots
gcloud pubsub snapshots list
gcloud pubsub snapshots describe <snapshot>
```
Ancak, daha iyi sonuÃ§lar elde edebilirsiniz [**daha bÃ¼yÃ¼k bir veri kÃ¼mesi isteyerek**](https://cloud.google.com/pubsub/docs/replay-overview), dahil eski mesajlar. Bu bazÄ± Ã¶n koÅŸullara ve uygulamalarÄ± etkileyebileceÄŸine dair etkilere sahiptir, bu yÃ¼zden gerÃ§ekten ne yaptÄ±ÄŸÄ±nÄ±zÄ± iyi bildiÄŸinizden emin olun.

### AyrÄ±calÄ±k YÃ¼kseltme ve SaldÄ±rÄ± SonrasÄ±

{% content-ref url="../gcp-post-exploitation/gcp-pub-sub-post-exploitation.md" %}
[gcp-pub-sub-post-exploitation.md](../gcp-post-exploitation/gcp-pub-sub-post-exploitation.md)
{% endcontent-ref %}

## Pub/Sub Lite

[**Pub/Sub Lite**](https://cloud.google.com/pubsub/docs/choosing-pubsub-or-lite) zonal depolamaya sahip bir mesajlaÅŸma servisidir. Pub/Sub Lite, Pub/Sub'un bir kesri maliyetindedir ve maliyetin birincil dÃ¼ÅŸÃ¼nce olduÄŸu yÃ¼ksek hacimli akÄ±ÅŸ (saniyede 10 milyon mesaj) boru hatlarÄ± ve olay odaklÄ± sistemler iÃ§in tasarlanmÄ±ÅŸtÄ±r.

PubSub Lite'ta **konular** ve **abonelikler** bulunur, **anlÄ±k gÃ¶rÃ¼ntÃ¼ler** ve **ÅŸemalar** bulunmaz ve ÅŸunlar vardÄ±r:

* **Rezervasyonlar**: Pub/Sub Lite RezervasyonlarÄ±, kullanÄ±cÄ±larÄ±n mesaj akÄ±ÅŸlarÄ± iÃ§in belirli bir bÃ¶lgede kapasite ayÄ±rmalarÄ±na olanak tanÄ±yan bir Ã¶zelliktir.
* **Ä°ÅŸlemler**: Pub/Sub Lite'Ä± yÃ¶netme ve idare etmeyle ilgili iÅŸlemler ve gÃ¶revleri ifade eder.

### NumaralandÄ±rma
```bash
# lite-topics
gcloud pubsub lite-topics list
gcloud pubsub lite-topics describe <topic>
gcloud pubsub lite-topics list-subscriptions <topic>

# lite-subscriptions
gcloud pubsub lite-subscriptions list
gcloud pubsub lite-subscriptions describe <subscription>

# lite-reservations
gcloud pubsub lite-reservations list
gcloud pubsub lite-reservations describe <topic>
gcloud pubsub lite-reservations list-topics <topic>

# lite-operations
gcloud pubsub lite-operations list
gcloud pubsub lite-operations describe <topic>
```
{% hint style="success" %}
AWS Hacking'i Ã¶ÄŸrenin ve uygulayÄ±n: <img src="/.gitbook/assets/image.png" alt="" data-size="line">[**HackTricks EÄŸitim AWS KÄ±rmÄ±zÄ± TakÄ±m UzmanÄ± (ARTE)**](https://training.hacktricks.xyz/courses/arte)<img src="/.gitbook/assets/image.png" alt="" data-size="line">\
GCP Hacking'i Ã¶ÄŸrenin ve uygulayÄ±n: <img src="/.gitbook/assets/image (2).png" alt="" data-size="line">[**HackTricks EÄŸitim GCP KÄ±rmÄ±zÄ± TakÄ±m UzmanÄ± (GRTE)**<img src="/.gitbook/assets/image (2).png" alt="" data-size="line">](https://training.hacktricks.xyz/courses/grte)

<details>

<summary>HackTricks'i Destekleyin</summary>

* [**Abonelik planlarÄ±nÄ±**](https://github.com/sponsors/carlospolop) kontrol edin!
* ğŸ’¬ [**Discord grubuna**](https://discord.gg/hRep4RUj7f) katÄ±lÄ±n veya [**telegram grubuna**](https://t.me/peass) katÄ±lÄ±n veya bizi **Twitter** ğŸ¦ [**@hacktricks\_live**](https://twitter.com/hacktricks\_live)** takip edin.**
* **Hacking pÃ¼f noktalarÄ±nÄ± paylaÅŸarak PR'ler gÃ¶ndererek** [**HackTricks**](https://github.com/carlospolop/hacktricks) ve [**HackTricks Cloud**](https://github.com/carlospolop/hacktricks-cloud) github depolarÄ±na katkÄ±da bulunun.

</details>
{% endhint %}
