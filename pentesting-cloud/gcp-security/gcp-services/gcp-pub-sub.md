# GCP - Pub/Sub æšä¸¾

{% hint style="success" %}
å­¦ä¹ å¹¶ç»ƒä¹  AWS é»‘å®¢æŠ€æœ¯ï¼š<img src="/.gitbook/assets/image.png" alt="" data-size="line">[**HackTricks åŸ¹è®­ AWS çº¢é˜Ÿä¸“å®¶ (ARTE)**](https://training.hacktricks.xyz/courses/arte)<img src="/.gitbook/assets/image.png" alt="" data-size="line">\
å­¦ä¹ å¹¶ç»ƒä¹  GCP é»‘å®¢æŠ€æœ¯ï¼š<img src="/.gitbook/assets/image (2).png" alt="" data-size="line">[**HackTricks åŸ¹è®­ GCP çº¢é˜Ÿä¸“å®¶ (GRTE)**<img src="/.gitbook/assets/image (2).png" alt="" data-size="line">](https://training.hacktricks.xyz/courses/grte)

<details>

<summary>æ”¯æŒ HackTricks</summary>

* æŸ¥çœ‹[**è®¢é˜…è®¡åˆ’**](https://github.com/sponsors/carlospolop)!
* **åŠ å…¥** ğŸ’¬ [**Discord ç¾¤ç»„**](https://discord.gg/hRep4RUj7f) æˆ– [**ç”µæŠ¥ç¾¤ç»„**](https://t.me/peass) æˆ– **å…³æ³¨** æˆ‘ä»¬çš„ **Twitter** ğŸ¦ [**@hacktricks\_live**](https://twitter.com/hacktricks\_live)**.**
* é€šè¿‡å‘ [**HackTricks**](https://github.com/carlospolop/hacktricks) å’Œ [**HackTricks Cloud**](https://github.com/carlospolop/hacktricks-cloud) github ä»“åº“æäº¤ PR æ¥åˆ†äº«é»‘å®¢æŠ€å·§ã€‚

</details>
{% endhint %}

## Pub/Sub <a href="#reviewing-cloud-pubsub" id="reviewing-cloud-pubsub"></a>

[Google **Cloud Pub/Sub**](https://cloud.google.com/pubsub/) è¢«æè¿°ä¸ºä¸€ç§ä¿ƒè¿›ç‹¬ç«‹åº”ç”¨ç¨‹åºä¹‹é—´æ¶ˆæ¯äº¤æ¢çš„æœåŠ¡ã€‚æ ¸å¿ƒç»„ä»¶åŒ…æ‹¬**ä¸»é¢˜**ï¼Œåº”ç”¨ç¨‹åºå¯ä»¥**è®¢é˜…**è¿™äº›ä¸»é¢˜ã€‚è®¢é˜…çš„åº”ç”¨ç¨‹åºå…·æœ‰**å‘é€å’Œæ¥æ”¶æ¶ˆæ¯**çš„èƒ½åŠ›ã€‚æ¯æ¡æ¶ˆæ¯åŒ…æ‹¬å®é™…å†…å®¹ä»¥åŠç›¸å…³çš„å…ƒæ•°æ®ã€‚

**ä¸»é¢˜æ˜¯æ¶ˆæ¯å°†è¦å‘é€çš„é˜Ÿåˆ—**ï¼Œè€Œ**è®¢é˜…**æ˜¯ç”¨æˆ·å°†ç”¨æ¥**è®¿é—®ä¸»é¢˜ä¸­çš„æ¶ˆæ¯çš„å¯¹è±¡**ã€‚æ¯ä¸ªä¸»é¢˜å¯ä»¥æœ‰å¤šä¸ª**è®¢é˜…**ï¼Œå¹¶ä¸”æœ‰ 4 ç§ç±»å‹çš„è®¢é˜…ï¼š

- **Pull**ï¼šæ­¤è®¢é˜…çš„ç”¨æˆ·éœ€è¦æ‹‰å–æ¶ˆæ¯ã€‚
- **Push**ï¼šæŒ‡å®šä¸€ä¸ª URL ç»ˆç‚¹ï¼Œæ¶ˆæ¯å°†ç«‹å³å‘é€åˆ°è¯¥ç»ˆç‚¹ã€‚
- **BigQuery è¡¨**ï¼šç±»ä¼¼äº Pushï¼Œä½†å°†æ¶ˆæ¯è®¾ç½®åœ¨ BigQuery è¡¨ä¸­ã€‚
- **Cloud å­˜å‚¨**ï¼šç›´æ¥å°†æ¶ˆæ¯ä¼ é€’åˆ°ç°æœ‰å­˜å‚¨æ¡¶ã€‚

**é»˜è®¤æƒ…å†µä¸‹**ï¼Œè®¢é˜…åœ¨ 31 å¤©ååˆ°æœŸï¼Œä½†å¯ä»¥è®¾ç½®ä¸ºæ°¸ä¸è¿‡æœŸã€‚

**é»˜è®¤æƒ…å†µä¸‹**ï¼Œæ¶ˆæ¯ä¿ç•™ 7 å¤©ï¼Œä½†æ­¤æ—¶é—´å¯ä»¥**å¢åŠ åˆ° 31 å¤©**ã€‚æ­¤å¤–ï¼Œå¦‚æœåœ¨ 10 ç§’å†…æœª**ç¡®è®¤æ”¶åˆ°**ï¼Œæ¶ˆæ¯å°†è¿”å›åˆ°é˜Ÿåˆ—ã€‚è¿˜å¯ä»¥è®¾ç½®å·²ç¡®è®¤çš„æ¶ˆæ¯åº”ç»§ç»­å­˜å‚¨ã€‚

é»˜è®¤æƒ…å†µä¸‹ï¼Œä¸»é¢˜ä½¿ç”¨**Google ç®¡ç†çš„åŠ å¯†å¯†é’¥**è¿›è¡ŒåŠ å¯†ã€‚ä½†ä¹Ÿå¯ä»¥é€‰æ‹©æ¥è‡ª KMS çš„**CMEK**ï¼ˆå®¢æˆ·ç®¡ç†çš„åŠ å¯†å¯†é’¥ï¼‰ã€‚

**æ­»ä¿¡**ï¼šè®¢é˜…å¯ä»¥é…ç½®**æœ€å¤§äº¤ä»˜å°è¯•æ¬¡æ•°**ã€‚å½“æ— æ³•ä¼ é€’æ¶ˆæ¯æ—¶ï¼Œå®ƒå°†**é‡æ–°å‘å¸ƒåˆ°æŒ‡å®šçš„æ­»ä¿¡ä¸»é¢˜**ã€‚

### å¿«ç…§å’Œæ¨¡å¼

å¿«ç…§æ˜¯ä¸€ç§åŠŸèƒ½ï¼Œ**æ•è·ç‰¹å®šæ—¶é—´ç‚¹è®¢é˜…çš„çŠ¶æ€**ã€‚å®ƒæœ¬è´¨ä¸Šæ˜¯è®¢é˜…ä¸­æœªç¡®è®¤æ¶ˆæ¯çš„ä¸€è‡´**å¤‡ä»½**ã€‚é€šè¿‡åˆ›å»ºå¿«ç…§ï¼Œæ‚¨å¯ä»¥ä¿ç•™è®¢é˜…çš„æ¶ˆæ¯ç¡®è®¤çŠ¶æ€ï¼Œå³ä½¿åœ¨åŸå§‹æ¶ˆæ¯è¢«åˆ é™¤åï¼Œä¹Ÿå¯ä»¥ä»åˆ›å»ºå¿«ç…§çš„æ—¶é—´ç‚¹æ¢å¤æ¶ˆæ¯æ¶ˆè€—ã€‚\
å¦‚æœéå¸¸å¹¸è¿ï¼Œå¿«ç…§å¯èƒ½åŒ…å«**åˆ›å»ºå¿«ç…§æ—¶çš„æ—§æ•æ„Ÿä¿¡æ¯**ã€‚

åˆ›å»ºä¸»é¢˜æ—¶ï¼Œå¯ä»¥æŒ‡å®š**ä¸»é¢˜æ¶ˆæ¯å¿…é¡»éµå¾ªçš„æ¨¡å¼**ã€‚

### æšä¸¾
```bash
# Get a list of topics in the project
gcloud pubsub topics list
gcloud pubsub topics describe <topic>
gcloud pubsub topics list-subscriptions <topic>
gcloud pubsub topics get-iam-policy <topic>

# Get a list of subscriptions across all topics
gcloud pubsub subscriptions list
gcloud pubsub subscriptions describe <subscription>
gcloud pubsub subscriptions get-iam-policy <subscription>

# Get list of schemas
gcloud pubsub schemas list
gcloud pubsub schemas describe <schema>
gcloud pubsub schemas list-revisions <schema>

# Get list of snapshots
gcloud pubsub snapshots list
gcloud pubsub snapshots describe <snapshot>
```
ç„¶è€Œï¼Œæ‚¨å¯èƒ½ä¼šè·å¾—æ›´å¥½çš„ç»“æœ[**è¯·æ±‚æ›´å¤§çš„æ•°æ®é›†**](https://cloud.google.com/pubsub/docs/replay-overview)ï¼ŒåŒ…æ‹¬è¾ƒæ—§çš„æ¶ˆæ¯ã€‚è¿™éœ€è¦ä¸€äº›å…ˆå†³æ¡ä»¶ï¼Œå¯èƒ½ä¼šå½±å“åº”ç”¨ç¨‹åºï¼Œå› æ­¤ç¡®ä¿æ‚¨çœŸæ­£çŸ¥é“è‡ªå·±åœ¨åšä»€ä¹ˆã€‚

### ç‰¹æƒå‡çº§å’Œåæ¸—é€

{% content-ref url="../gcp-post-exploitation/gcp-pub-sub-post-exploitation.md" %}
[gcp-pub-sub-post-exploitation.md](../gcp-post-exploitation/gcp-pub-sub-post-exploitation.md)
{% endcontent-ref %}

## Pub/Sub Lite

[**Pub/Sub Lite**](https://cloud.google.com/pubsub/docs/choosing-pubsub-or-lite)æ˜¯ä¸€ç§å…·æœ‰**åˆ†åŒºå­˜å‚¨**çš„æ¶ˆæ¯æœåŠ¡ã€‚Pub/Sub Liteçš„æˆæœ¬ä»…ä¸ºPub/Subçš„ä¸€å°éƒ¨åˆ†ï¼Œé€‚ç”¨äº**é«˜å®¹é‡æµå¼å¤„ç†**ï¼ˆæ¯ç§’é«˜è¾¾1000ä¸‡æ¡æ¶ˆæ¯ï¼‰çš„ç®¡é“å’Œä»¥ä½æˆæœ¬ä¸ºä¸»è¦è€ƒè™‘å› ç´ çš„äº‹ä»¶é©±åŠ¨ç³»ç»Ÿã€‚

åœ¨PubSub Liteä¸­ï¼Œæœ‰**ä¸»é¢˜**å’Œ**è®¢é˜…**ï¼Œæ²¡æœ‰**å¿«ç…§**å’Œ**æ¨¡å¼**ï¼Œè¿˜æœ‰ï¼š

- **é¢„ç•™**: Pub/Sub Lite é¢„ç•™æ˜¯ä¸€é¡¹åŠŸèƒ½ï¼Œå…è®¸ç”¨æˆ·ä¸ºå…¶æ¶ˆæ¯æµåœ¨ç‰¹å®šåŒºåŸŸé¢„ç•™å®¹é‡ã€‚
- **æ“ä½œ**: æŒ‡ç®¡ç†å’Œç®¡ç†Pub/Sub Liteæ¶‰åŠçš„æ“ä½œå’Œä»»åŠ¡ã€‚ 

### æšä¸¾
```bash
# lite-topics
gcloud pubsub lite-topics list
gcloud pubsub lite-topics describe <topic>
gcloud pubsub lite-topics list-subscriptions <topic>

# lite-subscriptions
gcloud pubsub lite-subscriptions list
gcloud pubsub lite-subscriptions describe <subscription>

# lite-reservations
gcloud pubsub lite-reservations list
gcloud pubsub lite-reservations describe <topic>
gcloud pubsub lite-reservations list-topics <topic>

# lite-operations
gcloud pubsub lite-operations list
gcloud pubsub lite-operations describe <topic>
```
{% hint style="success" %}
å­¦ä¹ å¹¶ç»ƒä¹ AWS Hackingï¼š<img src="/.gitbook/assets/image.png" alt="" data-size="line">[**HackTricks åŸ¹è®­ AWS çº¢é˜Ÿä¸“å®¶ (ARTE)**](https://training.hacktricks.xyz/courses/arte)<img src="/.gitbook/assets/image.png" alt="" data-size="line">\
å­¦ä¹ å¹¶ç»ƒä¹ GCP Hacking: <img src="/.gitbook/assets/image (2).png" alt="" data-size="line">[**HackTricks åŸ¹è®­ GCP çº¢é˜Ÿä¸“å®¶ (GRTE)**<img src="/.gitbook/assets/image (2).png" alt="" data-size="line">](https://training.hacktricks.xyz/courses/grte)

<details>

<summary>æ”¯æŒ HackTricks</summary>

* æ£€æŸ¥[**è®¢é˜…è®¡åˆ’**](https://github.com/sponsors/carlospolop)!
* **åŠ å…¥** ğŸ’¬ [**Discord ç¾¤ç»„**](https://discord.gg/hRep4RUj7f) æˆ– [**ç”µæŠ¥ç¾¤ç»„**](https://t.me/peass) æˆ– **å…³æ³¨**æˆ‘ä»¬çš„ **Twitter** ğŸ¦ [**@hacktricks\_live**](https://twitter.com/hacktricks\_live)**.**
* é€šè¿‡å‘ [**HackTricks**](https://github.com/carlospolop/hacktricks) å’Œ [**HackTricks Cloud**](https://github.com/carlospolop/hacktricks-cloud) github ä»“åº“æäº¤ PR æ¥åˆ†äº«é»‘å®¢æŠ€å·§ã€‚

</details>
{% endhint %}
