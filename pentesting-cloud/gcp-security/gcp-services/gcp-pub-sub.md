# GCP - Pub/Sub Enum

{% hint style="success" %}
Learn & practice AWS Hacking:<img src="../../../.gitbook/assets/image (1).png" alt="" data-size="line">[**HackTricks Training AWS Red Team Expert (ARTE)**](https://training.hacktricks.xyz/courses/arte)<img src="../../../.gitbook/assets/image (1).png" alt="" data-size="line">\
Learn & practice GCP Hacking: <img src="../../../.gitbook/assets/image (2).png" alt="" data-size="line">[**HackTricks Training GCP Red Team Expert (GRTE)**<img src="../../../.gitbook/assets/image (2).png" alt="" data-size="line">](https://training.hacktricks.xyz/courses/grte)

<details>

<summary>Support HackTricks</summary>

* Check the [**subscription plans**](https://github.com/sponsors/carlospolop)!
* **Join the** ğŸ’¬ [**Discord group**](https://discord.gg/hRep4RUj7f) or the [**telegram group**](https://t.me/peass) or **follow** us on **Twitter** ğŸ¦ [**@hacktricks\_live**](https://twitter.com/hacktricks\_live)**.**
* **Share hacking tricks by submitting PRs to the** [**HackTricks**](https://github.com/carlospolop/hacktricks) and [**HackTricks Cloud**](https://github.com/carlospolop/hacktricks-cloud) github repos.

</details>
{% endhint %}

## Pub/Sub <a href="#reviewing-cloud-pubsub" id="reviewing-cloud-pubsub"></a>

[Google **Cloud Pub/Sub**](https://cloud.google.com/pubsub/) ã¯ã€ç‹¬ç«‹ã—ãŸã‚¢ãƒ—ãƒªã‚±ãƒ¼ã‚·ãƒ§ãƒ³é–“ã®ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸äº¤æ›ã‚’ä¿ƒé€²ã™ã‚‹ã‚µãƒ¼ãƒ“ã‚¹ã¨ã—ã¦èª¬æ˜ã•ã‚Œã¦ã„ã¾ã™ã€‚ã‚³ã‚¢ã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆã«ã¯ã€ã‚¢ãƒ—ãƒªã‚±ãƒ¼ã‚·ãƒ§ãƒ³ãŒ**ã‚µãƒ–ã‚¹ã‚¯ãƒ©ã‚¤ãƒ–**ã§ãã‚‹**ãƒˆãƒ”ãƒƒã‚¯**ãŒå«ã¾ã‚Œã¾ã™ã€‚ã‚µãƒ–ã‚¹ã‚¯ãƒ©ã‚¤ãƒ–ã•ã‚ŒãŸã‚¢ãƒ—ãƒªã‚±ãƒ¼ã‚·ãƒ§ãƒ³ã¯ã€**ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸ã®é€å—ä¿¡**ãŒå¯èƒ½ã§ã™ã€‚å„ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸ã¯ã€å®Ÿéš›ã®ã‚³ãƒ³ãƒ†ãƒ³ãƒ„ã¨é–¢é€£ã™ã‚‹ãƒ¡ã‚¿ãƒ‡ãƒ¼ã‚¿ã§æ§‹æˆã•ã‚Œã¦ã„ã¾ã™ã€‚

**ãƒˆãƒ”ãƒƒã‚¯ã¯ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸ãŒé€ä¿¡ã•ã‚Œã‚‹ã‚­ãƒ¥ãƒ¼**ã§ã‚ã‚Šã€**ã‚µãƒ–ã‚¹ã‚¯ãƒªãƒ—ã‚·ãƒ§ãƒ³**ã¯ãƒ¦ãƒ¼ã‚¶ãƒ¼ãŒ**ãƒˆãƒ”ãƒƒã‚¯å†…ã®ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸ã«ã‚¢ã‚¯ã‚»ã‚¹ã™ã‚‹ãŸã‚ã«ä½¿ç”¨ã™ã‚‹****ã‚ªãƒ–ã‚¸ã‚§ã‚¯ãƒˆ**ã§ã™ã€‚**ãƒˆãƒ”ãƒƒã‚¯ã”ã¨ã«1ã¤ä»¥ä¸Šã®ã‚µãƒ–ã‚¹ã‚¯ãƒªãƒ—ã‚·ãƒ§ãƒ³**ãŒå­˜åœ¨ã™ã‚‹ã“ã¨ãŒã§ãã€ã‚µãƒ–ã‚¹ã‚¯ãƒªãƒ—ã‚·ãƒ§ãƒ³ã«ã¯4ã¤ã®ã‚¿ã‚¤ãƒ—ãŒã‚ã‚Šã¾ã™ï¼š

* **ãƒ—ãƒ«**: ã“ã®ã‚µãƒ–ã‚¹ã‚¯ãƒªãƒ—ã‚·ãƒ§ãƒ³ã®ãƒ¦ãƒ¼ã‚¶ãƒ¼ã¯ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸ã‚’ãƒ—ãƒ«ã™ã‚‹å¿…è¦ãŒã‚ã‚Šã¾ã™ã€‚
* **ãƒ—ãƒƒã‚·ãƒ¥**: URLã‚¨ãƒ³ãƒ‰ãƒã‚¤ãƒ³ãƒˆãŒæŒ‡å®šã•ã‚Œã€ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸ã¯å³åº§ã«é€ä¿¡ã•ã‚Œã¾ã™ã€‚
* **ãƒ“ãƒƒã‚°ã‚¯ã‚¨ãƒªãƒ†ãƒ¼ãƒ–ãƒ«**: ãƒ—ãƒƒã‚·ãƒ¥ã¨åŒæ§˜ã§ã™ãŒã€ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸ã‚’ãƒ“ãƒƒã‚°ã‚¯ã‚¨ãƒªãƒ†ãƒ¼ãƒ–ãƒ«å†…ã«è¨­å®šã—ã¾ã™ã€‚
* **ã‚¯ãƒ©ã‚¦ãƒ‰ã‚¹ãƒˆãƒ¬ãƒ¼ã‚¸**: æ—¢å­˜ã®ãƒã‚±ãƒƒãƒˆã«ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸ã‚’ç›´æ¥é…ä¿¡ã—ã¾ã™ã€‚

**ãƒ‡ãƒ•ã‚©ãƒ«ãƒˆ**ã§ã¯ã€**ã‚µãƒ–ã‚¹ã‚¯ãƒªãƒ—ã‚·ãƒ§ãƒ³ã¯31æ—¥å¾Œã«æœŸé™åˆ‡ã‚Œ**ã«ãªã‚Šã¾ã™ãŒã€æœŸé™åˆ‡ã‚Œã«ã—ãªã„ã‚ˆã†ã«è¨­å®šã™ã‚‹ã“ã¨ã‚‚ã§ãã¾ã™ã€‚

**ãƒ‡ãƒ•ã‚©ãƒ«ãƒˆ**ã§ã¯ã€ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸ã¯**7æ—¥é–“ä¿æŒ**ã•ã‚Œã¾ã™ãŒã€ã“ã®æœŸé–“ã¯**æœ€å¤§31æ—¥é–“ã¾ã§å»¶é•·**ã§ãã¾ã™ã€‚ã¾ãŸã€**10ç§’ä»¥å†…ã«ACKã•ã‚Œãªã„**å ´åˆã€ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸ã¯ã‚­ãƒ¥ãƒ¼ã«æˆ»ã‚Šã¾ã™ã€‚ACKã•ã‚ŒãŸãƒ¡ãƒƒã‚»ãƒ¼ã‚¸ã‚’å¼•ãç¶šãä¿å­˜ã™ã‚‹ã‚ˆã†ã«è¨­å®šã™ã‚‹ã“ã¨ã‚‚ã§ãã¾ã™ã€‚

ãƒˆãƒ”ãƒƒã‚¯ã¯ãƒ‡ãƒ•ã‚©ãƒ«ãƒˆã§**Googleç®¡ç†ã®æš—å·åŒ–ã‚­ãƒ¼**ã‚’ä½¿ç”¨ã—ã¦æš—å·åŒ–ã•ã‚Œã¾ã™ã€‚ãŸã ã—ã€KMSã‹ã‚‰ã®**CMEK**ï¼ˆé¡§å®¢ç®¡ç†ã®æš—å·åŒ–ã‚­ãƒ¼ï¼‰ã‚’é¸æŠã™ã‚‹ã“ã¨ã‚‚ã§ãã¾ã™ã€‚

**ãƒ‡ãƒƒãƒ‰ãƒ¬ã‚¿ãƒ¼**: ã‚µãƒ–ã‚¹ã‚¯ãƒªãƒ—ã‚·ãƒ§ãƒ³ã¯**æœ€å¤§é…ä¿¡è©¦è¡Œå›æ•°**ã‚’è¨­å®šã§ãã¾ã™ã€‚ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸ãŒé…ä¿¡ã§ããªã„å ´åˆã€æŒ‡å®šã•ã‚ŒãŸãƒ‡ãƒƒãƒ‰ãƒ¬ã‚¿ãƒ¼ãƒˆãƒ”ãƒƒã‚¯ã«**å†å…¬é–‹**ã•ã‚Œã¾ã™ã€‚

### ã‚¹ãƒŠãƒƒãƒ—ã‚·ãƒ§ãƒƒãƒˆã¨ã‚¹ã‚­ãƒ¼ãƒ

ã‚¹ãƒŠãƒƒãƒ—ã‚·ãƒ§ãƒƒãƒˆã¯ã€**ç‰¹å®šã®æ™‚ç‚¹ã§ã®ã‚µãƒ–ã‚¹ã‚¯ãƒªãƒ—ã‚·ãƒ§ãƒ³ã®çŠ¶æ…‹ã‚’ã‚­ãƒ£ãƒ—ãƒãƒ£ã™ã‚‹**æ©Ÿèƒ½ã§ã™ã€‚ã“ã‚Œã¯æœ¬è³ªçš„ã«ã€ã‚µãƒ–ã‚¹ã‚¯ãƒªãƒ—ã‚·ãƒ§ãƒ³å†…ã®æœªç¢ºèªãƒ¡ãƒƒã‚»ãƒ¼ã‚¸ã®ä¸€è²«ã—ãŸ**ãƒãƒƒã‚¯ã‚¢ãƒƒãƒ—**ã§ã™ã€‚ã‚¹ãƒŠãƒƒãƒ—ã‚·ãƒ§ãƒƒãƒˆã‚’ä½œæˆã™ã‚‹ã“ã¨ã§ã€ã‚µãƒ–ã‚¹ã‚¯ãƒªãƒ—ã‚·ãƒ§ãƒ³ã®ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸ç¢ºèªçŠ¶æ…‹ã‚’ä¿æŒã—ã€ã‚¹ãƒŠãƒƒãƒ—ã‚·ãƒ§ãƒƒãƒˆãŒå–å¾—ã•ã‚ŒãŸæ™‚ç‚¹ã‹ã‚‰ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸ã®æ¶ˆè²»ã‚’å†é–‹ã™ã‚‹ã“ã¨ãŒã§ãã¾ã™ã€‚å…ƒã®ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸ãŒå‰Šé™¤ã•ã‚Œã‚‹å ´åˆã§ã‚‚ã€ã‚¹ãƒŠãƒƒãƒ—ã‚·ãƒ§ãƒƒãƒˆãŒå–å¾—ã•ã‚ŒãŸæ™‚ç‚¹ã®**å¤ã„æ©Ÿå¯†æƒ…å ±**ã‚’å«ã‚€å¯èƒ½æ€§ãŒã‚ã‚Šã¾ã™ã€‚

ãƒˆãƒ”ãƒƒã‚¯ã‚’ä½œæˆã™ã‚‹éš›ã«ã€**ãƒˆãƒ”ãƒƒã‚¯ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸ã¯ã‚¹ã‚­ãƒ¼ãƒã«å¾“ã†å¿…è¦ãŒã‚ã‚‹**ã“ã¨ã‚’ç¤ºã™ã“ã¨ãŒã§ãã¾ã™ã€‚

### åˆ—æŒ™
```bash
# Get a list of topics in the project
gcloud pubsub topics list
gcloud pubsub topics describe <topic>
gcloud pubsub topics list-subscriptions <topic>
gcloud pubsub topics get-iam-policy <topic>

# Get a list of subscriptions across all topics
gcloud pubsub subscriptions list
gcloud pubsub subscriptions describe <subscription>
gcloud pubsub subscriptions get-iam-policy <subscription>

# Get list of schemas
gcloud pubsub schemas list
gcloud pubsub schemas describe <schema>
gcloud pubsub schemas list-revisions <schema>

# Get list of snapshots
gcloud pubsub snapshots list
gcloud pubsub snapshots describe <snapshot>
```
ã—ã‹ã—ã€[**ã‚ˆã‚Šå¤§ããªãƒ‡ãƒ¼ã‚¿ã‚»ãƒƒãƒˆã‚’è¦æ±‚ã™ã‚‹**](https://cloud.google.com/pubsub/docs/replay-overview)ã“ã¨ã§ã€ã‚ˆã‚Šè‰¯ã„çµæœãŒå¾—ã‚‰ã‚Œã‚‹ã‹ã‚‚ã—ã‚Œã¾ã›ã‚“ã€‚ã“ã‚Œã«ã¯ã„ãã¤ã‹ã®å‰ææ¡ä»¶ãŒã‚ã‚Šã€ã‚¢ãƒ—ãƒªã‚±ãƒ¼ã‚·ãƒ§ãƒ³ã«å½±éŸ¿ã‚’ä¸ãˆã‚‹å¯èƒ½æ€§ãŒã‚ã‚‹ãŸã‚ã€æœ¬å½“ã«ä½•ã‚’ã—ã¦ã„ã‚‹ã®ã‹ã‚’ç†è§£ã—ã¦ã„ã‚‹ã“ã¨ã‚’ç¢ºèªã—ã¦ãã ã•ã„ã€‚

### æ¨©é™æ˜‡æ ¼ã¨ãƒã‚¹ãƒˆã‚¨ã‚¯ã‚¹ãƒ—ãƒ­ã‚¤ãƒˆ

{% content-ref url="../gcp-post-exploitation/gcp-pub-sub-post-exploitation.md" %}
[gcp-pub-sub-post-exploitation.md](../gcp-post-exploitation/gcp-pub-sub-post-exploitation.md)
{% endcontent-ref %}

## Pub/Sub Lite

[**Pub/Sub Lite**](https://cloud.google.com/pubsub/docs/choosing-pubsub-or-lite) ã¯ **ã‚¾ãƒ¼ãƒ³ã‚¹ãƒˆãƒ¬ãƒ¼ã‚¸**ã‚’æŒã¤ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸ãƒ³ã‚°ã‚µãƒ¼ãƒ“ã‚¹ã§ã™ã€‚Pub/Sub Liteã¯Pub/Subã®**ã”ãä¸€éƒ¨ã®ã‚³ã‚¹ãƒˆ**ã§ã€**é«˜ãƒœãƒªãƒ¥ãƒ¼ãƒ ã‚¹ãƒˆãƒªãƒ¼ãƒŸãƒ³ã‚°**ï¼ˆæ¯ç§’æœ€å¤§1000ä¸‡ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸ï¼‰ãƒ‘ã‚¤ãƒ—ãƒ©ã‚¤ãƒ³ã‚„ä½ã‚³ã‚¹ãƒˆãŒä¸»ãªè€ƒæ…®äº‹é …ã§ã‚ã‚‹ã‚¤ãƒ™ãƒ³ãƒˆé§†å‹•å‹ã‚·ã‚¹ãƒ†ãƒ å‘ã‘ã«è¨­è¨ˆã•ã‚Œã¦ã„ã¾ã™ã€‚

Pub/Sub Liteã«ã¯**ãƒˆãƒ”ãƒƒã‚¯**ã¨**ã‚µãƒ–ã‚¹ã‚¯ãƒªãƒ—ã‚·ãƒ§ãƒ³**ãŒã‚ã‚Šã€**ã‚¹ãƒŠãƒƒãƒ—ã‚·ãƒ§ãƒƒãƒˆ**ã‚„**ã‚¹ã‚­ãƒ¼ãƒ**ã¯ã‚ã‚Šã¾ã›ã‚“ã€‚ã¾ãŸã€ä»¥ä¸‹ãŒã‚ã‚Šã¾ã™ï¼š

* **äºˆç´„**: Pub/Sub Liteã®äºˆç´„ã¯ã€ãƒ¦ãƒ¼ã‚¶ãƒ¼ãŒç‰¹å®šã®åœ°åŸŸã§ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸ã‚¹ãƒˆãƒªãƒ¼ãƒ ã®ãŸã‚ã«å®¹é‡ã‚’äºˆç´„ã§ãã‚‹æ©Ÿèƒ½ã§ã™ã€‚
* **æ“ä½œ**: Pub/Sub Liteã®ç®¡ç†ãŠã‚ˆã³é‹å–¶ã«é–¢ã‚ã‚‹ã‚¢ã‚¯ã‚·ãƒ§ãƒ³ã‚„ã‚¿ã‚¹ã‚¯ã‚’æŒ‡ã—ã¾ã™ã€‚

### åˆ—æŒ™
```bash
# lite-topics
gcloud pubsub lite-topics list
gcloud pubsub lite-topics describe <topic>
gcloud pubsub lite-topics list-subscriptions <topic>

# lite-subscriptions
gcloud pubsub lite-subscriptions list
gcloud pubsub lite-subscriptions describe <subscription>

# lite-reservations
gcloud pubsub lite-reservations list
gcloud pubsub lite-reservations describe <topic>
gcloud pubsub lite-reservations list-topics <topic>

# lite-operations
gcloud pubsub lite-operations list
gcloud pubsub lite-operations describe <topic>
```
{% hint style="success" %}
AWSãƒãƒƒã‚­ãƒ³ã‚°ã‚’å­¦ã³ã€å®Ÿè·µã™ã‚‹ï¼š<img src="../../../.gitbook/assets/image (1).png" alt="" data-size="line">[**HackTricks Training AWS Red Team Expert (ARTE)**](https://training.hacktricks.xyz/courses/arte)<img src="../../../.gitbook/assets/image (1).png" alt="" data-size="line">\
GCPãƒãƒƒã‚­ãƒ³ã‚°ã‚’å­¦ã³ã€å®Ÿè·µã™ã‚‹ï¼š<img src="../../../.gitbook/assets/image (2).png" alt="" data-size="line">[**HackTricks Training GCP Red Team Expert (GRTE)**<img src="../../../.gitbook/assets/image (2).png" alt="" data-size="line">](https://training.hacktricks.xyz/courses/grte)

<details>

<summary>HackTricksã‚’ã‚µãƒãƒ¼ãƒˆã™ã‚‹</summary>

* [**ã‚µãƒ–ã‚¹ã‚¯ãƒªãƒ—ã‚·ãƒ§ãƒ³ãƒ—ãƒ©ãƒ³**](https://github.com/sponsors/carlospolop)ã‚’ç¢ºèªã—ã¦ãã ã•ã„ï¼
* **ğŸ’¬ [**Discordã‚°ãƒ«ãƒ¼ãƒ—**](https://discord.gg/hRep4RUj7f)ã¾ãŸã¯[**Telegramã‚°ãƒ«ãƒ¼ãƒ—**](https://t.me/peass)ã«å‚åŠ ã™ã‚‹ã‹ã€**Twitter** ğŸ¦ [**@hacktricks\_live**](https://twitter.com/hacktricks\_live)**ã‚’ãƒ•ã‚©ãƒ­ãƒ¼ã—ã¦ãã ã•ã„ã€‚**
* **ãƒãƒƒã‚­ãƒ³ã‚°ã®ãƒˆãƒªãƒƒã‚¯ã‚’å…±æœ‰ã™ã‚‹ã«ã¯ã€[**HackTricks**](https://github.com/carlospolop/hacktricks)ã¨[**HackTricks Cloud**](https://github.com/carlospolop/hacktricks-cloud)ã®GitHubãƒªãƒã‚¸ãƒˆãƒªã«PRã‚’æå‡ºã—ã¦ãã ã•ã„ã€‚**

</details>
{% endhint %}
