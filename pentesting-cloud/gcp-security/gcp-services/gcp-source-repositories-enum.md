# GCP - Source Repositories Enum

{% hint style="success" %}
Learn & practice AWS Hacking:<img src="../../../.gitbook/assets/image (1).png" alt="" data-size="line">[**HackTricks Training AWS Red Team Expert (ARTE)**](https://training.hacktricks.xyz/courses/arte)<img src="../../../.gitbook/assets/image (1).png" alt="" data-size="line">\
Learn & practice GCP Hacking: <img src="../../../.gitbook/assets/image (2).png" alt="" data-size="line">[**HackTricks Training GCP Red Team Expert (GRTE)**<img src="../../../.gitbook/assets/image (2).png" alt="" data-size="line">](https://training.hacktricks.xyz/courses/grte)

<details>

<summary>Support HackTricks</summary>

* Check the [**subscription plans**](https://github.com/sponsors/carlospolop)!
* **Join the** ğŸ’¬ [**Discord group**](https://discord.gg/hRep4RUj7f) or the [**telegram group**](https://t.me/peass) or **follow** us on **Twitter** ğŸ¦ [**@hacktricks\_live**](https://twitter.com/hacktricks\_live)**.**
* **Share hacking tricks by submitting PRs to the** [**HackTricks**](https://github.com/carlospolop/hacktricks) and [**HackTricks Cloud**](https://github.com/carlospolop/hacktricks-cloud) github repos.

</details>
{% endhint %}

## Basic Information <a href="#reviewing-cloud-git-repositories" id="reviewing-cloud-git-repositories"></a>

Google Cloud Source RepositoriesëŠ” ì™„ì „í•œ ê¸°ëŠ¥ì„ ê°–ì¶˜ í™•ì¥ ê°€ëŠ¥í•œ **ê°œì¸ Git ì €ì¥ì†Œ ì„œë¹„ìŠ¤**ì…ë‹ˆë‹¤. ì´ëŠ” **ì™„ì „ ê´€ë¦¬ë˜ëŠ” í™˜ê²½ì—ì„œ ì†ŒìŠ¤ ì½”ë“œë¥¼ í˜¸ìŠ¤íŒ…**í•˜ë„ë¡ ì„¤ê³„ë˜ì—ˆìœ¼ë©°, ë‹¤ë¥¸ GCP ë„êµ¬ ë° ì„œë¹„ìŠ¤ì™€ ì›í™œí•˜ê²Œ í†µí•©ë©ë‹ˆë‹¤. íŒ€ì´ ì½”ë“œë¥¼ ì €ì¥, ê´€ë¦¬ ë° ì¶”ì í•  ìˆ˜ ìˆëŠ” í˜‘ì—…ì ì´ê³  ì•ˆì „í•œ ì¥ì†Œë¥¼ ì œê³µí•©ë‹ˆë‹¤.

Cloud Source Repositoriesì˜ ì£¼ìš” ê¸°ëŠ¥ì€ ë‹¤ìŒê³¼ ê°™ìŠµë‹ˆë‹¤:

1. **ì™„ì „ ê´€ë¦¬ë˜ëŠ” Git í˜¸ìŠ¤íŒ…**: Gitì˜ ì¹œìˆ™í•œ ê¸°ëŠ¥ì„ ì œê³µí•˜ë¯€ë¡œ ì¼ë°˜ Git ëª…ë ¹ ë° ì›Œí¬í”Œë¡œë¥¼ ì‚¬ìš©í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.
2. **GCP ì„œë¹„ìŠ¤ì™€ì˜ í†µí•©**: Cloud Build, Pub/Sub ë° App Engineê³¼ ê°™ì€ ë‹¤ë¥¸ GCP ì„œë¹„ìŠ¤ì™€ í†µí•©ë˜ì–´ ì½”ë“œì—ì„œ ë°°í¬ê¹Œì§€ì˜ ì¢…ë‹¨ ê°„ ì¶”ì ì„±ì„ ì œê³µí•©ë‹ˆë‹¤.
3. **ê°œì¸ ì €ì¥ì†Œ**: ì½”ë“œê°€ ì•ˆì „í•˜ê³  ë¹„ê³µì‹ì ìœ¼ë¡œ ì €ì¥ë˜ë„ë¡ ë³´ì¥í•©ë‹ˆë‹¤. Cloud Identity ë° Access Management (IAM) ì—­í• ì„ ì‚¬ìš©í•˜ì—¬ ì•¡ì„¸ìŠ¤ë¥¼ ì œì–´í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.
4. **ì†ŒìŠ¤ ì½”ë“œ ë¶„ì„**: ë‹¤ë¥¸ GCP ë„êµ¬ì™€ í•¨ê»˜ ì‘ë™í•˜ì—¬ ì†ŒìŠ¤ ì½”ë“œì˜ ìë™ ë¶„ì„ì„ ì œê³µí•˜ë©°, ë²„ê·¸, ì·¨ì•½ì  ë˜ëŠ” ë‚˜ìœ ì½”ë”© ê´€í–‰ê³¼ ê°™ì€ ì ì¬ì ì¸ ë¬¸ì œë¥¼ ì‹ë³„í•©ë‹ˆë‹¤.
5. **í˜‘ì—… ë„êµ¬**: ë³‘í•© ìš”ì²­, ëŒ“ê¸€ ë° ë¦¬ë·°ì™€ ê°™ì€ ë„êµ¬ë¥¼ í†µí•´ í˜‘ì—… ì½”ë”©ì„ ì§€ì›í•©ë‹ˆë‹¤.
6. **ë¯¸ëŸ¬ ì§€ì›**: Cloud Source Repositoriesë¥¼ GitHub ë˜ëŠ” Bitbucketì— í˜¸ìŠ¤íŒ…ëœ ì €ì¥ì†Œì™€ ì—°ê²°í•  ìˆ˜ ìˆì–´ ìë™ ë™ê¸°í™”ê°€ ê°€ëŠ¥í•˜ë©° ëª¨ë“  ì €ì¥ì†Œì˜ í†µí•©ëœ ë³´ê¸°ë¥¼ ì œê³µí•©ë‹ˆë‹¤.

### OffSec information <a href="#reviewing-cloud-git-repositories" id="reviewing-cloud-git-repositories"></a>

* í”„ë¡œì íŠ¸ ë‚´ì˜ ì†ŒìŠ¤ ì €ì¥ì†Œ êµ¬ì„±ì€ Cloud Pub/Sub ë©”ì‹œì§€ë¥¼ ê²Œì‹œí•˜ëŠ” ë° ì‚¬ìš©ë˜ëŠ” **ì„œë¹„ìŠ¤ ê³„ì •**ì„ ê°€ì§‘ë‹ˆë‹¤. ê¸°ë³¸ì ìœ¼ë¡œ ì‚¬ìš©ë˜ëŠ” ê²ƒì€ **Compute SA**ì…ë‹ˆë‹¤. ê·¸ëŸ¬ë‚˜ **ì†ŒìŠ¤ ì €ì¥ì†Œì—ì„œ ê·¸ í† í°ì„ í›”ì¹˜ëŠ” ê²ƒì€ ë¶ˆê°€ëŠ¥í•˜ë‹¤ê³  ìƒê°í•©ë‹ˆë‹¤**. ì´ëŠ” ë°±ê·¸ë¼ìš´ë“œì—ì„œ ì‹¤í–‰ë˜ê³  ìˆê¸° ë•Œë¬¸ì…ë‹ˆë‹¤.
* GCP Cloud Source Repositories ì›¹ ì½˜ì†”([https://source.cloud.google.com/](https://source.cloud.google.com/))ì—ì„œ ì½”ë“œë¥¼ ë³´ë ¤ë©´ ì½”ë“œê°€ **ê¸°ë³¸ì ìœ¼ë¡œ ë§ˆìŠ¤í„° ë¸Œëœì¹˜ì— ìˆì–´ì•¼** í•©ë‹ˆë‹¤.
* **Github** ë˜ëŠ” **Bitbucket**ì˜ ì €ì¥ì†Œë¥¼ ê°€ë¦¬í‚¤ëŠ” **ë¯¸ëŸ¬ Cloud Repository**ë¥¼ **ìƒì„±í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤**(ì´ í”Œë«í¼ì— ëŒ€í•œ ì•¡ì„¸ìŠ¤ë¥¼ ì œê³µ).
* **GCP ë‚´ë¶€ì—ì„œ ì½”ë“œ ì‘ì„± ë° ë””ë²„ê¹…**ì´ ê°€ëŠ¥í•©ë‹ˆë‹¤.
* ê¸°ë³¸ì ìœ¼ë¡œ Source RepositoriesëŠ” **ì»¤ë°‹ì— ê°œì¸ í‚¤ê°€ í‘¸ì‹œë˜ëŠ” ê²ƒì„ ë°©ì§€**í•˜ì§€ë§Œ, ì´ëŠ” ë¹„í™œì„±í™”í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.

### Open In Cloud Shell

Cloud Shellì—ì„œ ì €ì¥ì†Œë¥¼ ì—´ ìˆ˜ ìˆìœ¼ë©°, ë‹¤ìŒê³¼ ê°™ì€ í”„ë¡¬í”„íŠ¸ê°€ ë‚˜íƒ€ë‚©ë‹ˆë‹¤:

<figure><img src="../../../.gitbook/assets/image (325).png" alt=""><figcaption></figcaption></figure>

ì´ê²ƒì€ Cloud Shellì—ì„œ ì½”ë“œ ì‘ì„± ë° ë””ë²„ê¹…ì„ ê°€ëŠ¥í•˜ê²Œ í•©ë‹ˆë‹¤(í´ë¼ìš°ë“œ ì…¸ì´ ì†ìƒë  ìˆ˜ ìˆìŠµë‹ˆë‹¤).

### Enumeration

{% code overflow="wrap" %}
```bash
# Repos enumeration
gcloud source repos list #Get names and URLs
gcloud source repos describe <repo_name>
gcloud source repos get-iam-policy <repo_name>

# gcloud repo clone
gcloud source repos clone <REPO NAME>
gcloud source repos get-iam-policy <REPO NAME>
... git add & git commit -m ...
git push --set-upstream origin master
git push -u origin master

# Access via git
## To add a SSH key go to https://source.cloud.google.com/user/ssh_keys (no gcloud command)
git clone ssh://username@domain.com@source.developers.google.com:2022/p/<proj-name>/r/<repo-name>
git add, commit, push...
```
{% endcode %}

### ê¶Œí•œ ìƒìŠ¹ ë° ì‚¬í›„ í™œìš©

{% content-ref url="../gcp-privilege-escalation/gcp-sourcerepos-privesc.md" %}
[gcp-sourcerepos-privesc.md](../gcp-privilege-escalation/gcp-sourcerepos-privesc.md)
{% endcontent-ref %}

### ì¸ì¦ë˜ì§€ ì•Šì€ ì—´ê±°

{% content-ref url="../gcp-unauthenticated-enum-and-access/gcp-source-repositories-unauthenticated-enum.md" %}
[gcp-source-repositories-unauthenticated-enum.md](../gcp-unauthenticated-enum-and-access/gcp-source-repositories-unauthenticated-enum.md)
{% endcontent-ref %}

{% hint style="success" %}
AWS í•´í‚¹ ë°°ìš°ê¸° ë° ì—°ìŠµí•˜ê¸°:<img src="../../../.gitbook/assets/image (1).png" alt="" data-size="line">[**HackTricks Training AWS Red Team Expert (ARTE)**](https://training.hacktricks.xyz/courses/arte)<img src="../../../.gitbook/assets/image (1).png" alt="" data-size="line">\
GCP í•´í‚¹ ë°°ìš°ê¸° ë° ì—°ìŠµí•˜ê¸°: <img src="../../../.gitbook/assets/image (2).png" alt="" data-size="line">[**HackTricks Training GCP Red Team Expert (GRTE)**<img src="../../../.gitbook/assets/image (2).png" alt="" data-size="line">](https://training.hacktricks.xyz/courses/grte)

<details>

<summary>HackTricks ì§€ì›í•˜ê¸°</summary>

* [**êµ¬ë… ê³„íš**](https://github.com/sponsors/carlospolop) í™•ì¸í•˜ê¸°!
* **ğŸ’¬ [**Discord ê·¸ë£¹**](https://discord.gg/hRep4RUj7f) ë˜ëŠ” [**í…”ë ˆê·¸ë¨ ê·¸ë£¹**](https://t.me/peass)ì— ì°¸ì—¬í•˜ê±°ë‚˜ **Twitter** ğŸ¦ [**@hacktricks\_live**](https://twitter.com/hacktricks\_live)**ë¥¼ íŒ”ë¡œìš°í•˜ì„¸ìš”.**
* **[**HackTricks**](https://github.com/carlospolop/hacktricks) ë° [**HackTricks Cloud**](https://github.com/carlospolop/hacktricks-cloud) ê¹ƒí—ˆë¸Œ ë¦¬í¬ì§€í† ë¦¬ì— PRì„ ì œì¶œí•˜ì—¬ í•´í‚¹ íŒì„ ê³µìœ í•˜ì„¸ìš”.**

</details>
{% endhint %}
