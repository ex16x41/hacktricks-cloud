# GCP - Source Repositories Enum

{% hint style="success" %}
Learn & practice AWS Hacking:<img src="../../../.gitbook/assets/image (1) (1) (1).png" alt="" data-size="line">[**HackTricks Training AWS Red Team Expert (ARTE)**](https://training.hacktricks.xyz/courses/arte)<img src="../../../.gitbook/assets/image (1) (1) (1).png" alt="" data-size="line">\
Learn & practice GCP Hacking: <img src="../../../.gitbook/assets/image (2).png" alt="" data-size="line">[**HackTricks Training GCP Red Team Expert (GRTE)**<img src="../../../.gitbook/assets/image (2).png" alt="" data-size="line">](https://training.hacktricks.xyz/courses/grte)

<details>

<summary>Support HackTricks</summary>

* Check the [**subscription plans**](https://github.com/sponsors/carlospolop)!
* **Join the** ğŸ’¬ [**Discord group**](https://discord.gg/hRep4RUj7f) or the [**telegram group**](https://t.me/peass) or **follow** us on **Twitter** ğŸ¦ [**@hacktricks\_live**](https://twitter.com/hacktricks_live)**.**
* **Share hacking tricks by submitting PRs to the** [**HackTricks**](https://github.com/carlospolop/hacktricks) and [**HackTricks Cloud**](https://github.com/carlospolop/hacktricks-cloud) github repos.

</details>
{% endhint %}

## Basic Information <a href="#reviewing-cloud-git-repositories" id="reviewing-cloud-git-repositories"></a>

Î— Google Cloud Source Repositories ÎµÎ¯Î½Î±Î¹ Î¼Î¹Î± Ï€Î»Î®ÏÏ‰Ï‚ Î»ÎµÎ¹Ï„Î¿Ï…ÏÎ³Î¹ÎºÎ®, ÎºÎ»Î¹Î¼Î±ÎºÎ¿ÏÎ¼ÎµÎ½Î·, **Î¹Î´Î¹Ï‰Ï„Î¹ÎºÎ® Ï…Ï€Î·ÏÎµÏƒÎ¯Î± Î±Ï€Î¿Î¸ÎµÏ„Î·ÏÎ¯Î¿Ï… Git**. Î•Î¯Î½Î±Î¹ ÏƒÏ‡ÎµÎ´Î¹Î±ÏƒÎ¼Î­Î½Î· Î³Î¹Î± Î½Î± **Ï†Î¹Î»Î¿Î¾ÎµÎ½ÎµÎ¯ Ï„Î¿Î½ Ï€Î·Î³Î±Î¯Î¿ ÎºÏÎ´Î¹ÎºÎ± ÏƒÎ±Ï‚ ÏƒÎµ Î­Î½Î± Ï€Î»Î®ÏÏ‰Ï‚ Î´Î¹Î±Ï‡ÎµÎ¹ÏÎ¹Î¶ÏŒÎ¼ÎµÎ½Î¿ Ï€ÎµÏÎ¹Î²Î¬Î»Î»Î¿Î½**, ÎµÎ½ÏƒÏ‰Î¼Î±Ï„ÏÎ½Î¿Î½Ï„Î±Ï‚ Î¿Î¼Î±Î»Î¬ Î¼Îµ Î¬Î»Î»Î± ÎµÏÎ³Î±Î»ÎµÎ¯Î± ÎºÎ±Î¹ Ï…Ï€Î·ÏÎµÏƒÎ¯ÎµÏ‚ GCP. Î ÏÎ¿ÏƒÏ†Î­ÏÎµÎ¹ Î­Î½Î±Î½ ÏƒÏ…Î½ÎµÏÎ³Î±Ï„Î¹ÎºÏŒ ÎºÎ±Î¹ Î±ÏƒÏ†Î±Î»Î® Ï‡ÏÏÎ¿ Î³Î¹Î± Ï„Î¹Ï‚ Î¿Î¼Î¬Î´ÎµÏ‚ Î½Î± Î±Ï€Î¿Î¸Î·ÎºÎµÏÎ¿Ï…Î½, Î½Î± Î´Î¹Î±Ï‡ÎµÎ¹ÏÎ¯Î¶Î¿Î½Ï„Î±Î¹ ÎºÎ±Î¹ Î½Î± Ï€Î±ÏÎ±ÎºÎ¿Î»Î¿Ï…Î¸Î¿ÏÎ½ Ï„Î¿Î½ ÎºÏÎ´Î¹ÎºÎ¬ Ï„Î¿Ï…Ï‚.

Î¤Î± ÎºÏÏÎ¹Î± Ï‡Î±ÏÎ±ÎºÏ„Î·ÏÎ¹ÏƒÏ„Î¹ÎºÎ¬ Ï„Ï‰Î½ Cloud Source Repositories Ï€ÎµÏÎ¹Î»Î±Î¼Î²Î¬Î½Î¿Ï…Î½:

1. **Î Î»Î®ÏÏ‰Ï‚ Î”Î¹Î±Ï‡ÎµÎ¹ÏÎ¹Î¶ÏŒÎ¼ÎµÎ½Î· Î¦Î¹Î»Î¿Î¾ÎµÎ½Î¯Î± Git**: Î ÏÎ¿ÏƒÏ†Î­ÏÎµÎ¹ Ï„Î· Î³Î½Ï‰ÏƒÏ„Î® Î»ÎµÎ¹Ï„Î¿Ï…ÏÎ³Î¹ÎºÏŒÏ„Î·Ï„Î± Ï„Î¿Ï… Git, Ï€Î¿Ï… ÏƒÎ·Î¼Î±Î¯Î½ÎµÎ¹ ÏŒÏ„Î¹ Î¼Ï€Î¿ÏÎµÎ¯Ï„Îµ Î½Î± Ï‡ÏÎ·ÏƒÎ¹Î¼Î¿Ï€Î¿Î¹ÎµÎ¯Ï„Îµ ÎºÎ±Î½Î¿Î½Î¹ÎºÎ­Ï‚ ÎµÎ½Ï„Î¿Î»Î­Ï‚ ÎºÎ±Î¹ ÏÎ¿Î­Ï‚ ÎµÏÎ³Î±ÏƒÎ¯Î±Ï‚ Git.
2. **Î•Î½ÏƒÏ‰Î¼Î¬Ï„Ï‰ÏƒÎ· Î¼Îµ Î¥Ï€Î·ÏÎµÏƒÎ¯ÎµÏ‚ GCP**: Î•Î½ÏƒÏ‰Î¼Î±Ï„ÏÎ½ÎµÏ„Î±Î¹ Î¼Îµ Î¬Î»Î»ÎµÏ‚ Ï…Ï€Î·ÏÎµÏƒÎ¯ÎµÏ‚ GCP ÏŒÏ€Ï‰Ï‚ Cloud Build, Pub/Sub ÎºÎ±Î¹ App Engine Î³Î¹Î± Ï€Î»Î®ÏÎ· Î¹Ï‡Î½Î·Î»Î±ÏƒÎ¹Î¼ÏŒÏ„Î·Ï„Î± Î±Ï€ÏŒ Ï„Î¿Î½ ÎºÏÎ´Î¹ÎºÎ± Î¼Î­Ï‡ÏÎ¹ Ï„Î·Î½ Î±Î½Î¬Ï€Ï„Ï…Î¾Î·.
3. **Î™Î´Î¹Ï‰Ï„Î¹ÎºÎ¬ Î‘Ï€Î¿Î¸ÎµÏ„Î®ÏÎ¹Î±**: Î”Î¹Î±ÏƒÏ†Î±Î»Î¯Î¶ÎµÎ¹ ÏŒÏ„Î¹ Î¿ ÎºÏÎ´Î¹ÎºÎ¬Ï‚ ÏƒÎ±Ï‚ Î±Ï€Î¿Î¸Î·ÎºÎµÏÎµÏ„Î±Î¹ Î¼Îµ Î±ÏƒÏ†Î¬Î»ÎµÎ¹Î± ÎºÎ±Î¹ Î¹Î´Î¹Ï‰Ï„Î¹ÎºÏŒÏ„Î·Ï„Î±. ÎœÏ€Î¿ÏÎµÎ¯Ï„Îµ Î½Î± ÎµÎ»Î­Î³Î¾ÎµÏ„Îµ Ï„Î·Î½ Ï€ÏÏŒÏƒÎ²Î±ÏƒÎ· Ï‡ÏÎ·ÏƒÎ¹Î¼Î¿Ï€Î¿Î¹ÏÎ½Ï„Î±Ï‚ ÏÏŒÎ»Î¿Ï…Ï‚ Cloud Identity and Access Management (IAM).
4. **Î‘Î½Î¬Î»Ï…ÏƒÎ· Î Î·Î³Î±Î¯Î¿Ï… ÎšÏÎ´Î¹ÎºÎ±**: Î£Ï…Î½ÎµÏÎ³Î¬Î¶ÎµÏ„Î±Î¹ Î¼Îµ Î¬Î»Î»Î± ÎµÏÎ³Î±Î»ÎµÎ¯Î± GCP Î³Î¹Î± Î½Î± Ï€Î±ÏÎ­Ï‡ÎµÎ¹ Î±Ï…Ï„Î¿Î¼Î±Ï„Î¿Ï€Î¿Î¹Î·Î¼Î­Î½Î· Î±Î½Î¬Î»Ï…ÏƒÎ· Ï„Î¿Ï… Ï€Î·Î³Î±Î¯Î¿Ï… ÎºÏÎ´Î¹ÎºÎ± ÏƒÎ±Ï‚, ÎµÎ½Ï„Î¿Ï€Î¯Î¶Î¿Î½Ï„Î±Ï‚ Ï€Î¹Î¸Î±Î½Î¬ Î¶Î·Ï„Î®Î¼Î±Ï„Î± ÏŒÏ€Ï‰Ï‚ ÏƒÏ†Î¬Î»Î¼Î±Ï„Î±, ÎµÏ…Ï€Î¬Î¸ÎµÎ¹ÎµÏ‚ Î® ÎºÎ±ÎºÎ­Ï‚ Ï€ÏÎ±ÎºÏ„Î¹ÎºÎ­Ï‚ Ï€ÏÎ¿Î³ÏÎ±Î¼Î¼Î±Ï„Î¹ÏƒÎ¼Î¿Ï.
5. **Î•ÏÎ³Î±Î»ÎµÎ¯Î± Î£Ï…Î½ÎµÏÎ³Î±ÏƒÎ¯Î±Ï‚**: Î¥Ï€Î¿ÏƒÏ„Î·ÏÎ¯Î¶ÎµÎ¹ ÏƒÏ…Î½ÎµÏÎ³Î±Ï„Î¹ÎºÏŒ Ï€ÏÎ¿Î³ÏÎ±Î¼Î¼Î±Ï„Î¹ÏƒÎ¼ÏŒ Î¼Îµ ÎµÏÎ³Î±Î»ÎµÎ¯Î± ÏŒÏ€Ï‰Ï‚ Î±Î¹Ï„Î®Î¼Î±Ï„Î± ÏƒÏ…Î³Ï‡ÏÎ½ÎµÏ…ÏƒÎ·Ï‚, ÏƒÏ‡ÏŒÎ»Î¹Î± ÎºÎ±Î¹ Î±Î½Î±Î¸ÎµÏ‰ÏÎ®ÏƒÎµÎ¹Ï‚.
6. **Î¥Ï€Î¿ÏƒÏ„Î®ÏÎ¹Î¾Î· ÎšÎ±Î¸ÏÎ­Ï†Ï„Î·**: Î£Î±Ï‚ ÎµÏ€Î¹Ï„ÏÎ­Ï€ÎµÎ¹ Î½Î± ÏƒÏ…Î½Î´Î­ÏƒÎµÏ„Îµ Ï„Î± Cloud Source Repositories Î¼Îµ Î±Ï€Î¿Î¸ÎµÏ„Î®ÏÎ¹Î± Ï€Î¿Ï… Ï†Î¹Î»Î¿Î¾ÎµÎ½Î¿ÏÎ½Ï„Î±Î¹ ÏƒÏ„Î¿ GitHub Î® Bitbucket, ÎµÏ€Î¹Ï„ÏÎ­Ï€Î¿Î½Ï„Î±Ï‚ Î±Ï…Ï„ÏŒÎ¼Î±Ï„Î· ÏƒÏ…Î³Ï‡ÏÎ¿Î½Î¹ÏƒÎ¼ÏŒ ÎºÎ±Î¹ Ï€Î±ÏÎ­Ï‡Î¿Î½Ï„Î±Ï‚ Î¼Î¹Î± ÎµÎ½Î¹Î±Î¯Î± ÎµÎ¹ÎºÏŒÎ½Î± ÏŒÎ»Ï‰Î½ Ï„Ï‰Î½ Î±Ï€Î¿Î¸ÎµÏ„Î·ÏÎ¯Ï‰Î½ ÏƒÎ±Ï‚.

### OffSec information <a href="#reviewing-cloud-git-repositories" id="reviewing-cloud-git-repositories"></a>

* Î— Î´Î¹Î±Î¼ÏŒÏÏ†Ï‰ÏƒÎ· Ï„Ï‰Î½ Î±Ï€Î¿Î¸ÎµÏ„Î·ÏÎ¯Ï‰Î½ Ï€Î·Î³Î®Ï‚ Î¼Î­ÏƒÎ± ÏƒÎµ Î­Î½Î± Î­ÏÎ³Î¿ Î¸Î± Î­Ï‡ÎµÎ¹ Î­Î½Î±Î½ **Î›Î¿Î³Î±ÏÎ¹Î±ÏƒÎ¼ÏŒ Î¥Ï€Î·ÏÎµÏƒÎ¯Î±Ï‚** Ï€Î¿Ï… Ï‡ÏÎ·ÏƒÎ¹Î¼Î¿Ï€Î¿Î¹ÎµÎ¯Ï„Î±Î¹ Î³Î¹Î± Ï„Î·Î½ Î±Ï€Î¿ÏƒÏ„Î¿Î»Î® Î¼Î·Î½Ï…Î¼Î¬Ï„Ï‰Î½ Cloud Pub/Sub. ÎŸ Ï€ÏÎ¿ÎµÏ€Î¹Î»ÎµÎ³Î¼Î­Î½Î¿Ï‚ Ï€Î¿Ï… Ï‡ÏÎ·ÏƒÎ¹Î¼Î¿Ï€Î¿Î¹ÎµÎ¯Ï„Î±Î¹ ÎµÎ¯Î½Î±Î¹ Î¿ **Compute SA**. Î©ÏƒÏ„ÏŒÏƒÎ¿, **Î´ÎµÎ½ Î½Î¿Î¼Î¯Î¶Ï‰ ÏŒÏ„Î¹ ÎµÎ¯Î½Î±Î¹ Î´Ï…Î½Î±Ï„ÏŒÎ½ Î½Î± ÎºÎ»Î­ÏˆÎµÏ„Îµ Ï„Î¿ token Ï„Î¿Ï…** Î±Ï€ÏŒ Ï„Î± Source Repositories ÎºÎ±Î¸ÏÏ‚ ÎµÎºÏ„ÎµÎ»ÎµÎ¯Ï„Î±Î¹ ÏƒÏ„Î¿ Ï€Î±ÏÎ±ÏƒÎºÎ®Î½Î¹Î¿.
* Î“Î¹Î± Î½Î± Î´ÎµÎ¯Ï„Îµ Ï„Î¿Î½ ÎºÏÎ´Î¹ÎºÎ± Î¼Î­ÏƒÎ± ÏƒÏ„Î·Î½ ÎºÎ¿Î½ÏƒÏŒÎ»Î± Î¹ÏƒÏ„Î¿Ï GCP Cloud Source Repositories ([https://source.cloud.google.com/](https://source.cloud.google.com/)), Ï‡ÏÎµÎ¹Î¬Î¶ÎµÏ„Î±Î¹ Î¿ ÎºÏÎ´Î¹ÎºÎ±Ï‚ Î½Î± ÎµÎ¯Î½Î±Î¹ **Î¼Î­ÏƒÎ± ÏƒÏ„Î¿ master branch Î±Ï€ÏŒ Ï€ÏÎ¿ÎµÏ€Î¹Î»Î¿Î³Î®**.
* ÎœÏ€Î¿ÏÎµÎ¯Ï„Îµ ÎµÏ€Î¯ÏƒÎ·Ï‚ Î½Î± **Î´Î·Î¼Î¹Î¿Ï…ÏÎ³Î®ÏƒÎµÏ„Îµ Î­Î½Î± ÎºÎ±Î¸ÏÎ­Ï†Ï„Î· Cloud Repository** Ï€Î¿Ï… Î½Î± Î´ÎµÎ¯Ï‡Î½ÎµÎ¹ ÏƒÎµ Î­Î½Î± repo Î±Ï€ÏŒ **Github** Î® **Bitbucket** (Î´Î¯Î½Î¿Î½Ï„Î±Ï‚ Ï€ÏÏŒÏƒÎ²Î±ÏƒÎ· ÏƒÎµ Î±Ï…Ï„Î­Ï‚ Ï„Î¹Ï‚ Ï€Î»Î±Ï„Ï†ÏŒÏÎ¼ÎµÏ‚).
* Î•Î¯Î½Î±Î¹ Î´Ï…Î½Î±Ï„ÏŒÎ½ Î½Î± **ÎºÏ‰Î´Î¹ÎºÎ¿Ï€Î¿Î¹Î®ÏƒÎµÏ„Îµ ÎºÎ±Î¹ Î½Î± Î±Ï€Î¿ÏƒÏ†Î±Î»Î¯ÏƒÎµÏ„Îµ Î±Ï€ÏŒ Î¼Î­ÏƒÎ± ÏƒÏ„Î¿ GCP**.
* Î‘Ï€ÏŒ Ï€ÏÎ¿ÎµÏ€Î¹Î»Î¿Î³Î®, Ï„Î± Source Repositories **Î±Ï€Î¿Ï„ÏÎ­Ï€Î¿Ï…Î½ Ï„Î·Î½ Î±Ï€Î¿ÏƒÏ„Î¿Î»Î® Î¹Î´Î¹Ï‰Ï„Î¹ÎºÏÎ½ ÎºÎ»ÎµÎ¹Î´Î¹ÏÎ½ ÏƒÎµ commits**, Î±Î»Î»Î¬ Î±Ï…Ï„ÏŒ Î¼Ï€Î¿ÏÎµÎ¯ Î½Î± Î±Ï€ÎµÎ½ÎµÏÎ³Î¿Ï€Î¿Î¹Î·Î¸ÎµÎ¯.

### Open In Cloud Shell

Î•Î¯Î½Î±Î¹ Î´Ï…Î½Î±Ï„ÏŒÎ½ Î½Î± Î±Î½Î¿Î¯Î¾ÎµÏ„Îµ Ï„Î¿ Î±Ï€Î¿Î¸ÎµÏ„Î®ÏÎ¹Î¿ ÏƒÏ„Î¿ Cloud Shell, Î¼Î¹Î± Ï€ÏÎ¿Ï„ÏÎ¿Ï€Î® ÏŒÏ€Ï‰Ï‚ Î±Ï…Ï„Î® Î¸Î± ÎµÎ¼Ï†Î±Î½Î¹ÏƒÏ„ÎµÎ¯:

<figure><img src="../../../.gitbook/assets/image (325).png" alt=""><figcaption></figcaption></figure>

Î‘Ï…Ï„ÏŒ Î¸Î± ÏƒÎ±Ï‚ ÎµÏ€Î¹Ï„ÏÎ­ÏˆÎµÎ¹ Î½Î± ÎºÏ‰Î´Î¹ÎºÎ¿Ï€Î¿Î¹Î®ÏƒÎµÏ„Îµ ÎºÎ±Î¹ Î½Î± Î±Ï€Î¿ÏƒÏ†Î±Î»Î¯ÏƒÎµÏ„Îµ ÏƒÏ„Î¿ Cloud Shell (Ï„Î¿ Î¿Ï€Î¿Î¯Î¿ Î¸Î± Î¼Ï€Î¿ÏÎ¿ÏÏƒÎµ Î½Î± Î­Ï‡ÎµÎ¹ Ï€Î±ÏÎ±Î²Î¹Î±ÏƒÏ„ÎµÎ¯ Ï„Î¿ cloudshell).

### Enumeration

{% code overflow="wrap" %}
```bash
# Repos enumeration
gcloud source repos list #Get names and URLs
gcloud source repos describe <repo_name>
gcloud source repos get-iam-policy <repo_name>

# gcloud repo clone
gcloud source repos clone <REPO NAME>
gcloud source repos get-iam-policy <REPO NAME>
... git add & git commit -m ...
git push --set-upstream origin master
git push -u origin master

# Access via git
## To add a SSH key go to https://source.cloud.google.com/user/ssh_keys (no gcloud command)
git clone ssh://username@domain.com@source.developers.google.com:2022/p/<proj-name>/r/<repo-name>
git add, commit, push...
```
{% endcode %}

### ÎšÎ»Î¹Î¼Î¬ÎºÏ‰ÏƒÎ· Î”Î¹ÎºÎ±Î¹Ï‰Î¼Î¬Ï„Ï‰Î½ & ÎœÎµÏ„Î¬ Ï„Î·Î½ Î•ÎºÎ¼ÎµÏ„Î¬Î»Î»ÎµÏ…ÏƒÎ·

{% content-ref url="../gcp-privilege-escalation/gcp-sourcerepos-privesc.md" %}
[gcp-sourcerepos-privesc.md](../gcp-privilege-escalation/gcp-sourcerepos-privesc.md)
{% endcontent-ref %}

### ÎœÎ· Î‘Ï…Î¸ÎµÎ½Ï„Î¹ÎºÎ¿Ï€Î¿Î¹Î·Î¼Î­Î½Î· Enum

{% content-ref url="../gcp-unauthenticated-enum-and-access/gcp-source-repositories-unauthenticated-enum.md" %}
[gcp-source-repositories-unauthenticated-enum.md](../gcp-unauthenticated-enum-and-access/gcp-source-repositories-unauthenticated-enum.md)
{% endcontent-ref %}

{% hint style="success" %}
ÎœÎ¬Î¸ÎµÏ„Îµ & ÎµÎ¾Î±ÏƒÎºÎ·Î¸ÎµÎ¯Ï„Îµ ÏƒÏ„Î¿ AWS Hacking:<img src="../../../.gitbook/assets/image (1) (1) (1).png" alt="" data-size="line">[**HackTricks Training AWS Red Team Expert (ARTE)**](https://training.hacktricks.xyz/courses/arte)<img src="../../../.gitbook/assets/image (1) (1) (1).png" alt="" data-size="line">\
ÎœÎ¬Î¸ÎµÏ„Îµ & ÎµÎ¾Î±ÏƒÎºÎ·Î¸ÎµÎ¯Ï„Îµ ÏƒÏ„Î¿ GCP Hacking: <img src="../../../.gitbook/assets/image (2).png" alt="" data-size="line">[**HackTricks Training GCP Red Team Expert (GRTE)**<img src="../../../.gitbook/assets/image (2).png" alt="" data-size="line">](https://training.hacktricks.xyz/courses/grte)

<details>

<summary>Î¥Ï€Î¿ÏƒÏ„Î®ÏÎ¹Î¾Î· HackTricks</summary>

* Î•Î»Î­Î³Î¾Ï„Îµ Ï„Î± [**ÏƒÏ‡Î­Î´Î¹Î± ÏƒÏ…Î½Î´ÏÎ¿Î¼Î®Ï‚**](https://github.com/sponsors/carlospolop)!
* **Î•Î³Î³ÏÎ±Ï†ÎµÎ¯Ï„Îµ ÏƒÏ„Î·Î½** ğŸ’¬ [**Î¿Î¼Î¬Î´Î± Discord**](https://discord.gg/hRep4RUj7f) Î® ÏƒÏ„Î·Î½ [**Î¿Î¼Î¬Î´Î± telegram**](https://t.me/peass) Î® **Î±ÎºÎ¿Î»Î¿Ï…Î¸Î®ÏƒÏ„Îµ** Î¼Î±Ï‚ ÏƒÏ„Î¿ **Twitter** ğŸ¦ [**@hacktricks\_live**](https://twitter.com/hacktricks_live)**.**
* **ÎœÎ¿Î¹ÏÎ±ÏƒÏ„ÎµÎ¯Ï„Îµ ÎºÏŒÎ»Ï€Î± hacking Ï…Ï€Î¿Î²Î¬Î»Î»Î¿Î½Ï„Î±Ï‚ PRs ÏƒÏ„Î±** [**HackTricks**](https://github.com/carlospolop/hacktricks) ÎºÎ±Î¹ [**HackTricks Cloud**](https://github.com/carlospolop/hacktricks-cloud) github repos.

</details>
{% endhint %}
