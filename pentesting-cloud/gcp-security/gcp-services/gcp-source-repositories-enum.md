# GCP - Source Repositories Enum

{% hint style="success" %}
Learn & practice AWS Hacking:<img src="../../../.gitbook/assets/image (1) (1).png" alt="" data-size="line">[**HackTricks Training AWS Red Team Expert (ARTE)**](https://training.hacktricks.xyz/courses/arte)<img src="../../../.gitbook/assets/image (1) (1).png" alt="" data-size="line">\
Learn & practice GCP Hacking: <img src="../../../.gitbook/assets/image (2).png" alt="" data-size="line">[**HackTricks Training GCP Red Team Expert (GRTE)**<img src="../../../.gitbook/assets/image (2).png" alt="" data-size="line">](https://training.hacktricks.xyz/courses/grte)

<details>

<summary>Support HackTricks</summary>

* Check the [**subscription plans**](https://github.com/sponsors/carlospolop)!
* **Join the** üí¨ [**Discord group**](https://discord.gg/hRep4RUj7f) or the [**telegram group**](https://t.me/peass) or **follow** us on **Twitter** üê¶ [**@hacktricks\_live**](https://twitter.com/hacktricks\_live)**.**
* **Share hacking tricks by submitting PRs to the** [**HackTricks**](https://github.com/carlospolop/hacktricks) and [**HackTricks Cloud**](https://github.com/carlospolop/hacktricks-cloud) github repos.

</details>
{% endhint %}

## Basic Information <a href="#reviewing-cloud-git-repositories" id="reviewing-cloud-git-repositories"></a>

Google Cloud Source Repositories ni **huduma ya hifadhi ya Git ya kibinafsi** yenye vipengele kamili na inayoweza kupanuka. Imeundwa ili **kuhifadhi msimbo wako wa chanzo katika mazingira yanayosimamiwa kikamilifu**, ikijumuisha kwa urahisi na zana na huduma nyingine za GCP. Inatoa mahali salama na ya ushirikiano kwa timu kuhifadhi, kusimamia, na kufuatilia msimbo wao.

Vipengele muhimu vya Cloud Source Repositories ni pamoja na:

1. **Hifadhi ya Git inayosimamiwa kikamilifu**: Inatoa kazi zinazofahamika za Git, ikimaanisha unaweza kutumia amri na michakato ya kawaida ya Git.
2. **Ujumuishaji na Huduma za GCP**: Inajumuisha na huduma nyingine za GCP kama Cloud Build, Pub/Sub, na App Engine kwa ufuatiliaji wa mwisho hadi mwisho kutoka msimbo hadi kutekelezwa.
3. **Hifadhi za Kibinafsi**: Inahakikisha msimbo wako unahifadhiwa kwa usalama na kwa kibinafsi. Unaweza kudhibiti ufikiaji kwa kutumia Cloud Identity na Usimamizi wa Ufikiaji (IAM) roles.
4. **Uchambuzi wa Msimbo wa Chanzo**: Inafanya kazi na zana nyingine za GCP kutoa uchambuzi wa kiotomatiki wa msimbo wako wa chanzo, ikitambua masuala yanayoweza kutokea kama makosa, udhaifu, au mbinu mbaya za uandishi wa msimbo.
5. **Zana za Ushirikiano**: Inasaidia uandishi wa msimbo kwa ushirikiano kwa kutumia zana kama maombi ya kuungana, maoni, na mapitio.
6. **Msaada wa Kioo**: Inakuruhusu kuunganisha Cloud Source Repositories na hifadhi zinazohifadhiwa kwenye GitHub au Bitbucket, ikiruhusu usawazishaji wa kiotomatiki na kutoa mtazamo mmoja wa hifadhi zako zote.

### OffSec information <a href="#reviewing-cloud-git-repositories" id="reviewing-cloud-git-repositories"></a>

* Usanidi wa hifadhi za chanzo ndani ya mradi utakuwa na **Akaunti ya Huduma** inayotumika kutuma ujumbe wa Cloud Pub/Sub. Ya kawaida inayotumika ni **Compute SA**. Hata hivyo, **sidhani kama inawezekana kuiba token yake** kutoka Hifadhi za Chanzo kwani inatekelezwa kwa nyuma.
* Ili kuona msimbo ndani ya GCP Cloud Source Repositories web console ([https://source.cloud.google.com/](https://source.cloud.google.com/)), unahitaji msimbo uwe **ndani ya tawi la master kwa kawaida**.
* Unaweza pia **kuunda Hifadhi ya Kioo ya Cloud** ikielekeza kwenye hifadhi kutoka **Github** au **Bitbucket** (ukitoa ufikiaji kwa majukwaa hayo).
* Inawezekana **kuandika na kutatua matatizo kutoka ndani ya GCP**.
* Kwa kawaida, Hifadhi za Chanzo **zinazuia funguo za kibinafsi kuingizwa katika commits**, lakini hii inaweza kuzuiliwa.

### Open In Cloud Shell

Inawezekana kufungua hifadhi katika Cloud Shell, dirisha kama hili litajitokeza:

<figure><img src="../../../.gitbook/assets/image (325).png" alt=""><figcaption></figcaption></figure>

Hii itakuruhusu kuandika na kutatua matatizo katika Cloud Shell (ambayo inaweza kuathiriwa). 

### Enumeration

{% code overflow="wrap" %}
```bash
# Repos enumeration
gcloud source repos list #Get names and URLs
gcloud source repos describe <repo_name>
gcloud source repos get-iam-policy <repo_name>

# gcloud repo clone
gcloud source repos clone <REPO NAME>
gcloud source repos get-iam-policy <REPO NAME>
... git add & git commit -m ...
git push --set-upstream origin master
git push -u origin master

# Access via git
## To add a SSH key go to https://source.cloud.google.com/user/ssh_keys (no gcloud command)
git clone ssh://username@domain.com@source.developers.google.com:2022/p/<proj-name>/r/<repo-name>
git add, commit, push...
```
{% endcode %}

### Kuinua Mamlaka & Baada ya Utekelezaji

{% content-ref url="../gcp-privilege-escalation/gcp-sourcerepos-privesc.md" %}
[gcp-sourcerepos-privesc.md](../gcp-privilege-escalation/gcp-sourcerepos-privesc.md)
{% endcontent-ref %}

### Enum Isiyo na Uthibitisho

{% content-ref url="../gcp-unauthenticated-enum-and-access/gcp-source-repositories-unauthenticated-enum.md" %}
[gcp-source-repositories-unauthenticated-enum.md](../gcp-unauthenticated-enum-and-access/gcp-source-repositories-unauthenticated-enum.md)
{% endcontent-ref %}

{% hint style="success" %}
Jifunze & fanya mazoezi ya AWS Hacking:<img src="../../../.gitbook/assets/image (1) (1).png" alt="" data-size="line">[**HackTricks Training AWS Red Team Expert (ARTE)**](https://training.hacktricks.xyz/courses/arte)<img src="../../../.gitbook/assets/image (1) (1).png" alt="" data-size="line">\
Jifunze & fanya mazoezi ya GCP Hacking: <img src="../../../.gitbook/assets/image (2).png" alt="" data-size="line">[**HackTricks Training GCP Red Team Expert (GRTE)**<img src="../../../.gitbook/assets/image (2).png" alt="" data-size="line">](https://training.hacktricks.xyz/courses/grte)

<details>

<summary>Support HackTricks</summary>

* Angalia [**mpango wa usajili**](https://github.com/sponsors/carlospolop)!
* **Jiunge na** üí¨ [**kikundi cha Discord**](https://discord.gg/hRep4RUj7f) au [**kikundi cha telegram**](https://t.me/peass) au **fuata** sisi kwenye **Twitter** üê¶ [**@hacktricks\_live**](https://twitter.com/hacktricks\_live)**.**
* **Shiriki mbinu za hacking kwa kuwasilisha PRs kwa** [**HackTricks**](https://github.com/carlospolop/hacktricks) na [**HackTricks Cloud**](https://github.com/carlospolop/hacktricks-cloud) github repos.

</details>
{% endhint %}
