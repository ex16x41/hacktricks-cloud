# GCP - Sanal Depo SÄ±ralama

<details>

<summary><strong>SÄ±fÄ±rdan kahraman olmak iÃ§in AWS hackleme Ã¶ÄŸrenin</strong> <a href="https://training.hacktricks.xyz/courses/arte"><strong>htARTE (HackTricks AWS KÄ±rmÄ±zÄ± TakÄ±m UzmanÄ±)</strong></a><strong>!</strong></summary>

HackTricks'Ä± desteklemenin diÄŸer yollarÄ±:

* **Åirketinizi HackTricks'te reklamÄ±nÄ± gÃ¶rmek istiyorsanÄ±z** veya **HackTricks'i PDF olarak indirmek istiyorsanÄ±z** [**ABONELÄ°K PLANLARI**]'na (https://github.com/sponsors/carlospolop) gÃ¶z atÄ±n!
* [**Resmi PEASS & HackTricks Ã¼rÃ¼nleri**]'ni alÄ±n (https://peass.creator-spring.com)
* [**PEASS Ailesi**]'ni keÅŸfedin (https://opensea.io/collection/the-peass-family), Ã¶zel [**NFT'ler**]'imiz koleksiyonumuz
* **KatÄ±lÄ±n** ğŸ’¬ [**Discord grubuna**](https://discord.gg/hRep4RUj7f) veya [**telegram grubuna**](https://t.me/peass) veya **Twitter** ğŸ¦ [**@carlospolopm**](https://twitter.com/carlospolopm)**'Ä± takip edin.**
* **Hacking pÃ¼f noktalarÄ±nÄ±zÄ± paylaÅŸarak PR'lar gÃ¶ndererek** [**HackTricks**](https://github.com/carlospolop/hacktricks) ve [**HackTricks Cloud**](https://github.com/carlospolop/hacktricks-cloud)
* &#x20;github depolarÄ±.

</details>

## Temel Bilgiler

Google Cloud Artifact Registry, yazÄ±lÄ±m artefaktlarÄ±nÄ±zÄ± **yÃ¶netmenize, depolamanÄ±za ve gÃ¼venliÄŸinizi saÄŸlamanÄ±za olanak tanÄ±yan tamamen yÃ¶netilen bir hizmettir**. Temelde, **Docker** gÃ¶rÃ¼ntÃ¼leri, **Maven**, npm paketleri ve diÄŸer tÃ¼rdeki artefaktlar gibi **derleme baÄŸÄ±mlÄ±lÄ±klarÄ±nÄ± depolamak iÃ§in bir depo** iÅŸlevi gÃ¶rÃ¼r. YazÄ±lÄ±m geliÅŸtirme sÃ¼reci sÄ±rasÄ±nda Ã¼retilen artefaktlarÄ±n depolanmasÄ± ve sÃ¼rÃ¼m kontrolÃ¼ iÃ§in **CI/CD borularÄ±nda yaygÄ±n olarak kullanÄ±lÄ±r**.

Artifact Registry'nin temel Ã¶zellikleri ÅŸunlarÄ± iÃ§erir:

1. **BirleÅŸik Depo**: **Ã‡eÅŸitli tÃ¼rdeki artefaktlarÄ± destekler**, Docker gÃ¶rÃ¼ntÃ¼leri, dil paketleri (Java'nÄ±n Maven'i, Node.js'nin npm'si gibi) ve diÄŸer tÃ¼rdeki artefaktlar iÃ§in tek bir depoya sahip olmanÄ±za olanak tanÄ±r, bÃ¶ylece tÃ¼m artefaktlarÄ±nÄ±zda tutarlÄ± eriÅŸim kontrolleri ve birleÅŸik bir gÃ¶rÃ¼nÃ¼m saÄŸlar.
2. **Tamamen YÃ¶netilen**: YÃ¶netilen bir hizmet olarak, altta yatan altyapÄ±yÄ±, Ã¶lÃ§eklendirmeyi ve gÃ¼venliÄŸi yÃ¶netir, kullanÄ±cÄ±lar iÃ§in bakÄ±m gereksinimlerini azaltÄ±r.
3. **Ä°nce TanÄ±mlÄ± EriÅŸim KontrolÃ¼**: Google Cloud'un Kimlik ve EriÅŸim YÃ¶netimi (IAM) ile entegre olur, depolarÄ±nÄ±zdaki artefaklara kimlerin eriÅŸebileceÄŸini, yÃ¼kleyebileceÄŸini veya indirebileceÄŸini tanÄ±mlamanÄ±za olanak tanÄ±r.
4. **CoÄŸrafi Ã‡oÄŸaltma**: Birden fazla bÃ¶lgeye artefaktlarÄ±n Ã§oÄŸaltÄ±lmasÄ±nÄ± destekler, indirme hÄ±zÄ±nÄ± artÄ±rÄ±r ve kullanÄ±labilirliÄŸi saÄŸlar.
5. **Google Cloud Hizmetleriyle Entegrasyon**: **Cloud Build, Kubernetes Engine ve Compute Engine gibi diÄŸer GCP hizmetleriyle sorunsuz Ã§alÄ±ÅŸÄ±r**, Google Cloud ekosistemi iÃ§inde zaten Ã§alÄ±ÅŸan ekipler iÃ§in uygun bir seÃ§enek olmasÄ±nÄ± saÄŸlar.
6. **GÃ¼venlik**: **Depolanan artefaktlarÄ±n gÃ¼venli ve bilinen gÃ¼venlik sorunlarÄ±ndan arÄ±ndÄ±ÄŸÄ±ndan emin olmak iÃ§in zayÄ±flÄ±k taramasÄ± ve konteyner analizi gibi Ã¶zellikler sunar**.

### BiÃ§imler ve Modlar

Yeni bir depo oluÅŸturulurken, depo **biÃ§im/tÃ¼rÃ¼** arasÄ±ndan Docker, Maven, npm, Python gibi Ã§eÅŸitli seÃ§enekler arasÄ±ndan seÃ§im yapÄ±labilir ve genellikle ÅŸu Ã¼Ã§ moddan biri olabilir:

* **Standart Depo**: **Kendi artefaktlarÄ±nÄ±zÄ± (Docker gÃ¶rÃ¼ntÃ¼leri, Maven paketleri gibi)** doÄŸrudan GCP'de depolamak iÃ§in varsayÄ±lan moddur. GÃ¼venlidir, Ã¶lÃ§eklenebilir ve Google Cloud ekosistemi iÃ§inde iyi entegre olur.
* **Uzak Depo** (mÃ¼saitse): DÄ±ÅŸ, genel depolardan **arteaktlarÄ± Ã¶nbelleÄŸe alan bir proxy** olarak hareket eder. YukarÄ± akÄ±ÅŸtaki baÄŸÄ±mlÄ±lÄ±klarÄ±n deÄŸiÅŸmesini Ã¶nler ve sÄ±k eriÅŸilen artefaktlarÄ± Ã¶nbelleÄŸe alarak gecikmeyi azaltÄ±r.
* **Sanal Depo** (mÃ¼saitse): **Tek bir uÃ§ noktadan birden fazla (standart veya uzak) depoya eriÅŸim saÄŸlayan bir birleÅŸik arayÃ¼z** sunar, farklÄ± depolara yayÄ±lmÄ±ÅŸ artefaktlar iÃ§in istemci tarafÄ± yapÄ±landÄ±rmasÄ±nÄ± ve eriÅŸim yÃ¶netimini basitleÅŸtirir.
* Sanal bir depo iÃ§in **depolarÄ± seÃ§meniz ve onlara bir Ã¶ncelik vermeniz gerekecektir** (en yÃ¼ksek Ã¶nceliÄŸe sahip depo kullanÄ±lacaktÄ±r).
* **Sanal** bir depoda **uzak ve standart** depolarÄ± **karÄ±ÅŸtÄ±rabilirsiniz**, **uzak** depodaki **Ã¶ncelik** standarttan **bÃ¼yÃ¼kse, uzaktan (Ã¶rneÄŸin PyPi) paketler kullanÄ±lacaktÄ±r**. Bu, bir **BaÄŸÄ±mlÄ±lÄ±k KarÄ±ÅŸÄ±klÄ±ÄŸÄ±na** yol aÃ§abilir.

Docker'Ä±n **Uzak sÃ¼rÃ¼mÃ¼nde** Docker Hub'a eriÅŸmek iÃ§in bir kullanÄ±cÄ± adÄ± ve belirteÃ§ vermek mÃ¼mkÃ¼ndÃ¼r. **BelirteÃ§ daha sonra Secret Manager'da saklanÄ±r**.

### Åifreleme

BeklendiÄŸi gibi, varsayÄ±lan olarak bir Google tarafÄ±ndan yÃ¶netilen anahtar kullanÄ±lÄ±r ancak MÃ¼ÅŸteri tarafÄ±ndan yÃ¶netilen bir anahtar belirtilebilir (CMEK).

### Temizleme PolitikalarÄ±

* **ArtefaktlarÄ± silme:** Artefaktlar, temizlik politikasÄ±na gÃ¶re **silinecektir**.
* **Kuru Ã§alÄ±ÅŸtÄ±rma:** (VarsayÄ±lan olan) Artefaktlar **silinmeyecek**. Temizlik politikalarÄ± deÄŸerlendirilecek ve test silme olaylarÄ± Cloud Audit Logging'e gÃ¶nderilecektir.

### ZayÄ±flÄ±k TaramasÄ±

**Konteyner gÃ¶rÃ¼ntÃ¼leri iÃ§indeki zayÄ±flÄ±klarÄ± kontrol edecek olan zayÄ±flÄ±k tarayÄ±cÄ±sÄ±nÄ± etkinleÅŸtirmek mÃ¼mkÃ¼ndÃ¼r**.

### SÄ±ralama
```bash
# Get repositories
gcloud artifacts repositories list
gcloud artifacts repositories describe --location <location> <repo-name>
gcloud artifacts versions list --repository=<repo-name> -location <location> --package <package-name>

# Get settings of a repository (example using python but could be other)
gcloud artifacts print-settings python --repository <repo-name> --location <location>

# Get docker images
gcloud artifacts docker images list us-central1-docker.pkg.dev/<proj-name>/<repo-name>

# Get packages (like python and others...)
gcloud artifacts packages list --repository <repo-name> --location <location>

# Get SBOMB artifacts
gcloud artifacts sbom list

# Get vulnerabilities (docker images)
gcloud artifacts vulnerabilities list us-east1-docker.pkg.dev/project123/repository123/someimage@sha256:49765698074d6d7baa82f
gcloud artifacts docker images list-vulnerabilities projects/<proj-name>/locations/<location>/scans/<scan-uuid>
```
### Yetki YÃ¼kseltme

{% content-ref url="../gcp-privilege-escalation/gcp-artifact-registry-privesc.md" %}
[gcp-artifact-registry-privesc.md](../gcp-privilege-escalation/gcp-artifact-registry-privesc.md)
{% endcontent-ref %}

### Kimlik DoÄŸrulamasÄ±z EriÅŸim

{% content-ref url="../gcp-unaunthenticated-enum-and-access/gcp-artifact-registry-unauthenticated-enum.md" %}
[gcp-artifact-registry-unauthenticated-enum.md](../gcp-unaunthenticated-enum-and-access/gcp-artifact-registry-unauthenticated-enum.md)
{% endcontent-ref %}

### SaldÄ±rÄ± SonrasÄ±

{% content-ref url="../gcp-post-exploitation/gcp-artifact-registry-post-exploitation.md" %}
[gcp-artifact-registry-post-exploitation.md](../gcp-post-exploitation/gcp-artifact-registry-post-exploitation.md)
{% endcontent-ref %}

### KalÄ±cÄ±lÄ±k

{% content-ref url="../gcp-persistence/gcp-artifact-registry-persistence.md" %}
[gcp-artifact-registry-persistence.md](../gcp-persistence/gcp-artifact-registry-persistence.md)
{% endcontent-ref %}

{% hint style="success" %}
AWS Hacking'i Ã¶ÄŸrenin ve uygulayÄ±n:<img src="/.gitbook/assets/image.png" alt="" data-size="line">[**HackTricks EÄŸitimi AWS KÄ±rmÄ±zÄ± TakÄ±m UzmanÄ± (ARTE)**](https://training.hacktricks.xyz/courses/arte)<img src="/.gitbook/assets/image.png" alt="" data-size="line">\
GCP Hacking'i Ã¶ÄŸrenin ve uygulayÄ±n: <img src="/.gitbook/assets/image (2).png" alt="" data-size="line">[**HackTricks EÄŸitimi GCP KÄ±rmÄ±zÄ± TakÄ±m UzmanÄ± (GRTE)**<img src="/.gitbook/assets/image (2).png" alt="" data-size="line">](https://training.hacktricks.xyz/courses/grte)

<details>

<summary>HackTricks'i Destekleyin</summary>

* [**Abonelik planlarÄ±nÄ±**](https://github.com/sponsors/carlospolop) kontrol edin!
* ğŸ’¬ [**Discord grubuna**](https://discord.gg/hRep4RUj7f) katÄ±lÄ±n veya [**telegram grubuna**](https://t.me/peass) katÄ±lÄ±n veya bizi **Twitter** ğŸ¦ [**@hacktricks\_live**](https://twitter.com/hacktricks\_live)** takip edin.**
* Hacking pÃ¼f noktalarÄ±nÄ± paylaÅŸarak PR'ler gÃ¶ndererek **HackTricks** ve **HackTricks Cloud** github depolarÄ±na katkÄ±da bulunun.

</details>
{% endhint %}
