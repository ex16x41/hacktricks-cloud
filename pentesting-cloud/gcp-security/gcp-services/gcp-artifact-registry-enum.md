# GCP - Artifact Registry Enum

{% hint style="success" %}
AWS Hacking Ã¶ÄŸrenin ve pratik yapÄ±n:<img src="/.gitbook/assets/image.png" alt="" data-size="line">[**HackTricks EÄŸitim AWS KÄ±rmÄ±zÄ± TakÄ±m UzmanÄ± (ARTE)**](https://training.hacktricks.xyz/courses/arte)<img src="/.gitbook/assets/image.png" alt="" data-size="line">\
GCP Hacking Ã¶ÄŸrenin ve pratik yapÄ±n: <img src="/.gitbook/assets/image (2).png" alt="" data-size="line">[**HackTricks EÄŸitim GCP KÄ±rmÄ±zÄ± TakÄ±m UzmanÄ± (GRTE)**<img src="/.gitbook/assets/image (2).png" alt="" data-size="line">](https://training.hacktricks.xyz/courses/grte)

<details>

<summary>HackTricks'i Destekleyin</summary>

* [**Abonelik planlarÄ±nÄ±**](https://github.com/sponsors/carlospolop) kontrol edin!
* ğŸ’¬ [**Discord grubuna**](https://discord.gg/hRep4RUj7f) katÄ±lÄ±n veya [**telegram grubuna**](https://t.me/peass) katÄ±lÄ±n veya bizi **Twitter** ğŸ¦ [**@hacktricks\_live**](https://twitter.com/hacktricks\_live)** takip edin.**
* Hacking pÃ¼f noktalarÄ±nÄ± paylaÅŸarak PR'ler gÃ¶ndererek **HackTricks** ve **HackTricks Cloud** github depolarÄ±na katkÄ±da bulunun.

</details>
{% endhint %}

## Temel Bilgiler

Google Cloud Artifact Registry, yazÄ±lÄ±m artefaktlarÄ±nÄ±zÄ± **yÃ¶netmenize, depolamanÄ±za ve gÃ¼venliÄŸinizi saÄŸlamanÄ±za olanak tanÄ±yan tamamen yÃ¶netilen bir hizmettir**. Temelde, **Docker** imajlarÄ±, **Maven**, npm paketleri ve diÄŸer tÃ¼rdeki artefaktlar gibi **derleme baÄŸÄ±mlÄ±lÄ±klarÄ±nÄ± depolamak** iÃ§in bir depo gÃ¶revi gÃ¶rÃ¼r. Genellikle, yazÄ±lÄ±m geliÅŸtirme sÃ¼reci sÄ±rasÄ±nda Ã¼retilen artefaktlarÄ± depolamak ve sÃ¼rÃ¼mlemek iÃ§in **CI/CD borularÄ±nda yaygÄ±n olarak kullanÄ±lÄ±r**.

Artifact Registry'nin temel Ã¶zellikleri ÅŸunlarÄ± iÃ§erir:

1. **BirleÅŸik Depo**: **Ã‡eÅŸitli tÃ¼rdeki artefaktlarÄ±** destekleyerek Docker imajlarÄ±, dil paketleri (Java'nÄ±n Maven'i, Node.js'nin npm'si) ve diÄŸer tÃ¼rdeki artefaktlar iÃ§in tek bir depoya sahip olmanÄ±za olanak tanÄ±r, bÃ¶ylece tÃ¼m artefaktlarÄ±nÄ±zda tutarlÄ± eriÅŸim kontrolleri ve birleÅŸik bir gÃ¶rÃ¼nÃ¼m saÄŸlar.
2. **Tamamen YÃ¶netilen**: YÃ¶netilen bir hizmet olarak, altta yatan altyapÄ±yÄ±, Ã¶lÃ§eklendirmeyi ve gÃ¼venliÄŸi yÃ¶netir, kullanÄ±cÄ±lar iÃ§in bakÄ±m gereksinimlerini azaltÄ±r.
3. **Ä°nce TanÄ±mlÄ± EriÅŸim KontrolÃ¼**: Google Cloud'un Kimlik ve EriÅŸim YÃ¶netimi (IAM) ile entegre olarak, depolarÄ±nÄ±zdaki artefaklara kimlerin eriÅŸebileceÄŸini, yÃ¼kleyebileceÄŸini veya indirebileceÄŸini tanÄ±mlamanÄ±za olanak tanÄ±r.
4. **CoÄŸrafi Ã‡oÄŸaltma**: Birden fazla bÃ¶lgeye artefaktlarÄ±n Ã§oÄŸaltÄ±lmasÄ±nÄ± destekler, indirme hÄ±zÄ±nÄ± artÄ±rÄ±r ve kullanÄ±labilirliÄŸi saÄŸlar.
5. **Google Cloud Hizmetleriyle Entegrasyon**: **Cloud Build, Kubernetes Engine ve Compute Engine** gibi **diÄŸer GCP hizmetleriyle sorunsuz Ã§alÄ±ÅŸÄ±r**, Google Cloud ekosistemi iÃ§inde zaten Ã§alÄ±ÅŸan ekipler iÃ§in uygun bir seÃ§enektir.
6. **GÃ¼venlik**: Depolanan artefaktlarÄ±n gÃ¼venli ve bilinen gÃ¼venlik sorunlarÄ±ndan arÄ±ndÄ±ÄŸÄ±ndan emin olmak iÃ§in **zayÄ±flÄ±k taramasÄ± ve konteyner analizi** gibi Ã¶zellikler sunar.

### Formatlar ve Modlar

Yeni bir depo oluÅŸturulurken, depo **format/tÃ¼rÃ¼** arasÄ±ndan Docker, Maven, npm, Python gibi birini seÃ§mek mÃ¼mkÃ¼ndÃ¼r ve genellikle ÅŸu Ã¼Ã§ten biri olabilir:

* **Standart Depo**: **Kendi artefaktlarÄ±nÄ±zÄ±** (Docker imajlarÄ±, Maven paketleri gibi) doÄŸrudan GCP'de depolamak iÃ§in varsayÄ±lan mod. GÃ¼venli, Ã¶lÃ§eklenebilir ve Google Cloud ekosistemi iÃ§inde iyi entegre olur.
* **Uzak Depo** (mÃ¼saitse): DÄ±ÅŸ, genel depolardan artefaktlarÄ± **Ã¶n belleÄŸe alan bir proxy** olarak gÃ¶rev yapar. BaÄŸÄ±mlÄ±lÄ±klarÄ±n yukarÄ± akÄ±ÅŸta deÄŸiÅŸmesini engeller ve sÄ±k eriÅŸilen artefaktlarÄ± Ã¶nbelleÄŸe alarak gecikmeyi azaltÄ±r.
* **Sanal Depo** (mÃ¼saitse): Birden fazla (standart veya uzak) depoya **tek bir uÃ§ noktadan eriÅŸim saÄŸlayan birleÅŸik bir arayÃ¼z** saÄŸlar, farklÄ± depolara yayÄ±lmÄ±ÅŸ artefaktlar iÃ§in istemci tarafÄ± yapÄ±landÄ±rmasÄ±nÄ± ve eriÅŸim yÃ¶netimini basitleÅŸtirir.
* Sanal bir depoda **depolarÄ± seÃ§meli ve onlara bir Ã¶ncelik vermeli**siniz (en bÃ¼yÃ¼k Ã¶nceliÄŸe sahip depo kullanÄ±lacaktÄ±r).
* **Sanal** bir depoda **uzak ve standart** depolarÄ± **karÄ±ÅŸtÄ±rabilirsiniz**, **uzak** depodaki **Ã¶ncelik**, **standart** depodan daha bÃ¼yÃ¼kse, **uzaktan (Ã¶rneÄŸin PyPi) paketler kullanÄ±lacaktÄ±r**. Bu, bir **BaÄŸÄ±mlÄ±lÄ±k KarÄ±ÅŸÄ±klÄ±ÄŸÄ±na** yol aÃ§abilir.

Docker'Ä±n **Uzak sÃ¼rÃ¼mÃ¼nde** Docker Hub'a eriÅŸmek iÃ§in bir kullanÄ±cÄ± adÄ± ve belirteÃ§ vermek mÃ¼mkÃ¼ndÃ¼r. **BelirteÃ§ daha sonra Secret Manager'da saklanÄ±r**.

### Åifreleme

BeklendiÄŸi gibi, varsayÄ±lan olarak bir Google tarafÄ±ndan yÃ¶netilen anahtar kullanÄ±lÄ±r, ancak MÃ¼ÅŸteri tarafÄ±ndan yÃ¶netilen bir anahtar (CMEK) belirtilebilir.

### Temizlik PolitikalarÄ±

* **ArtefaktlarÄ± sil:** Artefaktlar, temizlik politikasÄ± kriterlerine gÃ¶re **silinecektir**.
* **Kuru Ã§alÄ±ÅŸtÄ±rma:** (VarsayÄ±lan olan) Artefaktlar **silinmeyecek**. Temizlik politikalarÄ± deÄŸerlendirilecek ve test silme olaylarÄ± Cloud Audit Logging'e gÃ¶nderilecektir.

### ZayÄ±flÄ±k TaramasÄ±

**Konteyner imajlarÄ±** iÃ§indeki zayÄ±flÄ±klarÄ± kontrol edecek olan **zayÄ±flÄ±k tarayÄ±cÄ±sÄ±nÄ± etkinleÅŸtirmek mÃ¼mkÃ¼ndÃ¼r**.

### NumaralandÄ±rma
```bash
# Get repositories
gcloud artifacts repositories list
gcloud artifacts repositories describe --location <location> <repo-name>
gcloud artifacts versions list --repository=<repo-name> -location <location> --package <package-name>

# Get settings of a repository (example using python but could be other)
gcloud artifacts print-settings python --repository <repo-name> --location <location>

# Get docker images
gcloud artifacts docker images list us-central1-docker.pkg.dev/<proj-name>/<repo-name>

# Get packages (like python and others...)
gcloud artifacts packages list --repository <repo-name> --location <location>

# Get SBOMB artifacts
gcloud artifacts sbom list

# Get vulnerabilities (docker images)
gcloud artifacts vulnerabilities list us-east1-docker.pkg.dev/project123/repository123/someimage@sha256:49765698074d6d7baa82f
gcloud artifacts docker images list-vulnerabilities projects/<proj-name>/locations/<location>/scans/<scan-uuid>
```
### Yetki YÃ¼kseltme

{% content-ref url="../gcp-privilege-escalation/gcp-artifact-registry-privesc.md" %}
[gcp-artifact-registry-privesc.md](../gcp-privilege-escalation/gcp-artifact-registry-privesc.md)
{% endcontent-ref %}

### Kimlik DoÄŸrulamasÄ±z EriÅŸim

{% content-ref url="../gcp-unaunthenticated-enum-and-access/gcp-artifact-registry-unauthenticated-enum.md" %}
[gcp-artifact-registry-unauthenticated-enum.md](../gcp-unaunthenticated-enum-and-access/gcp-artifact-registry-unauthenticated-enum.md)
{% endcontent-ref %}

### SaldÄ±rÄ± SonrasÄ±

{% content-ref url="../gcp-post-exploitation/gcp-artifact-registry-post-exploitation.md" %}
[gcp-artifact-registry-post-exploitation.md](../gcp-post-exploitation/gcp-artifact-registry-post-exploitation.md)
{% endcontent-ref %}

### KalÄ±cÄ±lÄ±k

{% content-ref url="../gcp-persistence/gcp-artifact-registry-persistence.md" %}
[gcp-artifact-registry-persistence.md](../gcp-persistence/gcp-artifact-registry-persistence.md)
{% endcontent-ref %}

{% hint style="success" %}
AWS Hacking Ã¶ÄŸrenin ve pratik yapÄ±n:<img src="/.gitbook/assets/image.png" alt="" data-size="line">[**HackTricks EÄŸitimi AWS KÄ±rmÄ±zÄ± TakÄ±m UzmanÄ± (ARTE)**](https://training.hacktricks.xyz/courses/arte)<img src="/.gitbook/assets/image.png" alt="" data-size="line">\
GCP Hacking Ã¶ÄŸrenin ve pratik yapÄ±n: <img src="/.gitbook/assets/image (2).png" alt="" data-size="line">[**HackTricks EÄŸitimi GCP KÄ±rmÄ±zÄ± TakÄ±m UzmanÄ± (GRTE)**<img src="/.gitbook/assets/image (2).png" alt="" data-size="line">](https://training.hacktricks.xyz/courses/grte)

<details>

<summary>HackTricks'i Destekleyin</summary>

* [**Abonelik planlarÄ±nÄ±**](https://github.com/sponsors/carlospolop) kontrol edin!
* ğŸ’¬ [**Discord grubuna**](https://discord.gg/hRep4RUj7f) veya [**telegram grubuna**](https://t.me/peass) katÄ±lÄ±n veya bizi **Twitter** ğŸ¦ [**@hacktricks\_live**](https://twitter.com/hacktricks\_live)** takip edin.**
* **Hacking pÃ¼f noktalarÄ±nÄ± paylaÅŸarak PR gÃ¶ndererek** [**HackTricks**](https://github.com/carlospolop/hacktricks) ve [**HackTricks Cloud**](https://github.com/carlospolop/hacktricks-cloud) github depolarÄ±na katkÄ±da bulunun.

</details>
{% endhint %}
