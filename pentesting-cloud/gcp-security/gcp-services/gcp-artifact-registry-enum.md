# GCP - Artifact Registry Enum

{% hint style="success" %}
Learn & practice AWS Hacking:<img src="../../../.gitbook/assets/image (1) (1).png" alt="" data-size="line">[**HackTricks Training AWS Red Team Expert (ARTE)**](https://training.hacktricks.xyz/courses/arte)<img src="../../../.gitbook/assets/image (1) (1).png" alt="" data-size="line">\
Learn & practice GCP Hacking: <img src="../../../.gitbook/assets/image (2).png" alt="" data-size="line">[**HackTricks Training GCP Red Team Expert (GRTE)**<img src="../../../.gitbook/assets/image (2).png" alt="" data-size="line">](https://training.hacktricks.xyz/courses/grte)

<details>

<summary>Support HackTricks</summary>

* Check the [**subscription plans**](https://github.com/sponsors/carlospolop)!
* **Join the** ğŸ’¬ [**Discord group**](https://discord.gg/hRep4RUj7f) or the [**telegram group**](https://t.me/peass) or **follow** us on **Twitter** ğŸ¦ [**@hacktricks\_live**](https://twitter.com/hacktricks\_live)**.**
* **Share hacking tricks by submitting PRs to the** [**HackTricks**](https://github.com/carlospolop/hacktricks) and [**HackTricks Cloud**](https://github.com/carlospolop/hacktricks-cloud) github repos.

</details>
{% endhint %}

## åŸºæœ¬æƒ…å ±

Google Cloud Artifact Registryã¯ã€**ã‚½ãƒ•ãƒˆã‚¦ã‚§ã‚¢ã‚¢ãƒ¼ãƒ†ã‚£ãƒ•ã‚¡ã‚¯ãƒˆã‚’ç®¡ç†ã€ä¿å­˜ã€ä¿è­·ã™ã‚‹**ãŸã‚ã®å®Œå…¨ã«ç®¡ç†ã•ã‚ŒãŸã‚µãƒ¼ãƒ“ã‚¹ã§ã™ã€‚ã“ã‚Œã¯ã€**Docker**ã‚¤ãƒ¡ãƒ¼ã‚¸ã€**Maven**ã€npmãƒ‘ãƒƒã‚±ãƒ¼ã‚¸ã€ãã®ä»–ã®ã‚¿ã‚¤ãƒ—ã®ã‚¢ãƒ¼ãƒ†ã‚£ãƒ•ã‚¡ã‚¯ãƒˆãªã©ã€**ãƒ“ãƒ«ãƒ‰ä¾å­˜é–¢ä¿‚ã‚’ä¿å­˜ã™ã‚‹ãŸã‚ã®ãƒªãƒã‚¸ãƒˆãƒª**ã§ã™ã€‚ã“ã‚Œã¯ã€ã‚½ãƒ•ãƒˆã‚¦ã‚§ã‚¢é–‹ç™ºãƒ—ãƒ­ã‚»ã‚¹ä¸­ã«ç”Ÿæˆã•ã‚ŒãŸã‚¢ãƒ¼ãƒ†ã‚£ãƒ•ã‚¡ã‚¯ãƒˆã‚’ä¿å­˜ãŠã‚ˆã³ãƒãƒ¼ã‚¸ãƒ§ãƒ³ç®¡ç†ã™ã‚‹ãŸã‚ã«ã€**CI/CDãƒ‘ã‚¤ãƒ—ãƒ©ã‚¤ãƒ³ã§ä¸€èˆ¬çš„ã«ä½¿ç”¨ã•ã‚Œã¾ã™**ã€‚

Artifact Registryã®ä¸»ãªæ©Ÿèƒ½ã¯æ¬¡ã®ã¨ãŠã‚Šã§ã™ï¼š

1. **çµ±ä¸€ãƒªãƒã‚¸ãƒˆãƒª**ï¼š**è¤‡æ•°ã®ã‚¿ã‚¤ãƒ—ã®ã‚¢ãƒ¼ãƒ†ã‚£ãƒ•ã‚¡ã‚¯ãƒˆ**ã‚’ã‚µãƒãƒ¼ãƒˆã—ã€Dockerã‚¤ãƒ¡ãƒ¼ã‚¸ã€è¨€èªãƒ‘ãƒƒã‚±ãƒ¼ã‚¸ï¼ˆJavaã®Mavenã€Node.jsã®npmãªã©ï¼‰ã€ãŠã‚ˆã³ãã®ä»–ã®ã‚¿ã‚¤ãƒ—ã®ã‚¢ãƒ¼ãƒ†ã‚£ãƒ•ã‚¡ã‚¯ãƒˆã®ãŸã‚ã®å˜ä¸€ã®ãƒªãƒã‚¸ãƒˆãƒªã‚’æŒã¤ã“ã¨ãŒã§ãã€ä¸€è²«ã—ãŸã‚¢ã‚¯ã‚»ã‚¹åˆ¶å¾¡ã¨ã™ã¹ã¦ã®ã‚¢ãƒ¼ãƒ†ã‚£ãƒ•ã‚¡ã‚¯ãƒˆã«å¯¾ã™ã‚‹çµ±ä¸€ã•ã‚ŒãŸãƒ“ãƒ¥ãƒ¼ã‚’å¯èƒ½ã«ã—ã¾ã™ã€‚
2. **å®Œå…¨ç®¡ç†**ï¼šç®¡ç†ã•ã‚ŒãŸã‚µãƒ¼ãƒ“ã‚¹ã¨ã—ã¦ã€åŸºç›¤ã¨ãªã‚‹ã‚¤ãƒ³ãƒ•ãƒ©ã‚¹ãƒˆãƒ©ã‚¯ãƒãƒ£ã€ã‚¹ã‚±ãƒ¼ãƒªãƒ³ã‚°ã€ãŠã‚ˆã³ã‚»ã‚­ãƒ¥ãƒªãƒ†ã‚£ã‚’ç®¡ç†ã—ã€ãƒ¦ãƒ¼ã‚¶ãƒ¼ã®ãƒ¡ãƒ³ãƒ†ãƒŠãƒ³ã‚¹ã‚ªãƒ¼ãƒãƒ¼ãƒ˜ãƒƒãƒ‰ã‚’å‰Šæ¸›ã—ã¾ã™ã€‚
3. **ç´°ã‹ã„ã‚¢ã‚¯ã‚»ã‚¹åˆ¶å¾¡**ï¼šGoogle Cloudã®ã‚¢ã‚¤ãƒ‡ãƒ³ãƒ†ã‚£ãƒ†ã‚£ãŠã‚ˆã³ã‚¢ã‚¯ã‚»ã‚¹ç®¡ç†ï¼ˆIAMï¼‰ã¨çµ±åˆã•ã‚Œã€ãƒªãƒã‚¸ãƒˆãƒªå†…ã®ã‚¢ãƒ¼ãƒ†ã‚£ãƒ•ã‚¡ã‚¯ãƒˆã«ã‚¢ã‚¯ã‚»ã‚¹ã€ã‚¢ãƒƒãƒ—ãƒ­ãƒ¼ãƒ‰ã€ã¾ãŸã¯ãƒ€ã‚¦ãƒ³ãƒ­ãƒ¼ãƒ‰ã§ãã‚‹äººã‚’å®šç¾©ã§ãã¾ã™ã€‚
4. **åœ°ç†çš„ãƒ¬ãƒ—ãƒªã‚±ãƒ¼ã‚·ãƒ§ãƒ³**ï¼šè¤‡æ•°ã®åœ°åŸŸã«ã‚ãŸã‚‹ã‚¢ãƒ¼ãƒ†ã‚£ãƒ•ã‚¡ã‚¯ãƒˆã®ãƒ¬ãƒ—ãƒªã‚±ãƒ¼ã‚·ãƒ§ãƒ³ã‚’ã‚µãƒãƒ¼ãƒˆã—ã€ãƒ€ã‚¦ãƒ³ãƒ­ãƒ¼ãƒ‰ã®é€Ÿåº¦ã‚’å‘ä¸Šã•ã›ã€å¯ç”¨æ€§ã‚’ç¢ºä¿ã—ã¾ã™ã€‚
5. **Google Cloudã‚µãƒ¼ãƒ“ã‚¹ã¨ã®çµ±åˆ**ï¼š**Cloud Buildã€Kubernetes Engineã€Compute Engine**ãªã©ã®ä»–ã®GCPã‚µãƒ¼ãƒ“ã‚¹ã¨ã‚·ãƒ¼ãƒ ãƒ¬ã‚¹ã«é€£æºã—ã€Google Cloudã‚¨ã‚³ã‚·ã‚¹ãƒ†ãƒ å†…ã§ä½œæ¥­ã—ã¦ã„ã‚‹ãƒãƒ¼ãƒ ã«ã¨ã£ã¦ä¾¿åˆ©ãªé¸æŠè‚¢ã¨ãªã‚Šã¾ã™ã€‚
6. **ã‚»ã‚­ãƒ¥ãƒªãƒ†ã‚£**ï¼š**è„†å¼±æ€§ã‚¹ã‚­ãƒ£ãƒ³ã‚„ã‚³ãƒ³ãƒ†ãƒŠåˆ†æ**ãªã©ã®æ©Ÿèƒ½ã‚’æä¾›ã—ã€ä¿å­˜ã•ã‚ŒãŸã‚¢ãƒ¼ãƒ†ã‚£ãƒ•ã‚¡ã‚¯ãƒˆãŒå®‰å…¨ã§æ—¢çŸ¥ã®ã‚»ã‚­ãƒ¥ãƒªãƒ†ã‚£å•é¡ŒãŒãªã„ã“ã¨ã‚’ç¢ºèªã—ã¾ã™ã€‚

### ãƒ•ã‚©ãƒ¼ãƒãƒƒãƒˆã¨ãƒ¢ãƒ¼ãƒ‰

æ–°ã—ã„ãƒªãƒã‚¸ãƒˆãƒªã‚’ä½œæˆã™ã‚‹éš›ã«ã€Dockerã€Mavenã€npmã€Pythonãªã©ã®ä¸­ã‹ã‚‰**ãƒªãƒã‚¸ãƒˆãƒªã®ãƒ•ã‚©ãƒ¼ãƒãƒƒãƒˆ/ã‚¿ã‚¤ãƒ—ã‚’é¸æŠ**ã—ã€é€šå¸¸ã¯æ¬¡ã®3ã¤ã®ã„ãšã‚Œã‹ã®ãƒ¢ãƒ¼ãƒ‰ã‚’é¸æŠã§ãã¾ã™ï¼š

* **æ¨™æº–ãƒªãƒã‚¸ãƒˆãƒª**ï¼šGCPã«**è‡ªåˆ†ã®ã‚¢ãƒ¼ãƒ†ã‚£ãƒ•ã‚¡ã‚¯ãƒˆ**ï¼ˆDockerã‚¤ãƒ¡ãƒ¼ã‚¸ã€Mavenãƒ‘ãƒƒã‚±ãƒ¼ã‚¸ãªã©ï¼‰ã‚’ç›´æ¥ä¿å­˜ã™ã‚‹ãŸã‚ã®ãƒ‡ãƒ•ã‚©ãƒ«ãƒˆãƒ¢ãƒ¼ãƒ‰ã§ã™ã€‚å®‰å…¨ã§ã‚¹ã‚±ãƒ¼ãƒ©ãƒ–ãƒ«ã§ã‚ã‚Šã€Google Cloudã‚¨ã‚³ã‚·ã‚¹ãƒ†ãƒ å†…ã§ã†ã¾ãçµ±åˆã•ã‚Œã¾ã™ã€‚
* **ãƒªãƒ¢ãƒ¼ãƒˆãƒªãƒã‚¸ãƒˆãƒª**ï¼ˆåˆ©ç”¨å¯èƒ½ãªå ´åˆï¼‰ï¼š**å¤–éƒ¨ã®**å…¬é–‹ãƒªãƒã‚¸ãƒˆãƒªã‹ã‚‰ã‚¢ãƒ¼ãƒ†ã‚£ãƒ•ã‚¡ã‚¯ãƒˆã‚’ã‚­ãƒ£ãƒƒã‚·ãƒ¥ã™ã‚‹ãŸã‚ã®ãƒ—ãƒ­ã‚­ã‚·ã¨ã—ã¦æ©Ÿèƒ½ã—ã¾ã™ã€‚ä¸Šæµã®ä¾å­˜é–¢ä¿‚ã®å¤‰æ›´ã«ã‚ˆã‚‹å•é¡Œã‚’é˜²ãã€é »ç¹ã«ã‚¢ã‚¯ã‚»ã‚¹ã•ã‚Œã‚‹ã‚¢ãƒ¼ãƒ†ã‚£ãƒ•ã‚¡ã‚¯ãƒˆã‚’ã‚­ãƒ£ãƒƒã‚·ãƒ¥ã™ã‚‹ã“ã¨ã§ãƒ¬ã‚¤ãƒ†ãƒ³ã‚·ã‚’å‰Šæ¸›ã—ã¾ã™ã€‚
* **ä»®æƒ³ãƒªãƒã‚¸ãƒˆãƒª**ï¼ˆåˆ©ç”¨å¯èƒ½ãªå ´åˆï¼‰ï¼š**è¤‡æ•°ã®ï¼ˆæ¨™æº–ã¾ãŸã¯ãƒªãƒ¢ãƒ¼ãƒˆï¼‰ãƒªãƒã‚¸ãƒˆãƒªã«ã‚¢ã‚¯ã‚»ã‚¹ã™ã‚‹ãŸã‚ã®çµ±ä¸€ã‚¤ãƒ³ã‚¿ãƒ¼ãƒ•ã‚§ãƒ¼ã‚¹**ã‚’æä¾›ã—ã€ã•ã¾ã–ã¾ãªãƒªãƒã‚¸ãƒˆãƒªã«åˆ†æ•£ã—ãŸã‚¢ãƒ¼ãƒ†ã‚£ãƒ•ã‚¡ã‚¯ãƒˆã®ã‚¯ãƒ©ã‚¤ã‚¢ãƒ³ãƒˆå´ã®æ§‹æˆã¨ã‚¢ã‚¯ã‚»ã‚¹ç®¡ç†ã‚’ç°¡ç´ åŒ–ã—ã¾ã™ã€‚
* ä»®æƒ³ãƒªãƒã‚¸ãƒˆãƒªã§ã¯ã€**ãƒªãƒã‚¸ãƒˆãƒªã‚’é¸æŠã—ã€å„ªå…ˆé †ä½ã‚’ä»˜ã‘ã‚‹å¿…è¦ãŒã‚ã‚Šã¾ã™**ï¼ˆæœ€ã‚‚å„ªå…ˆé †ä½ã®é«˜ã„ãƒªãƒã‚¸ãƒˆãƒªãŒä½¿ç”¨ã•ã‚Œã¾ã™ï¼‰ã€‚
* **ãƒªãƒ¢ãƒ¼ãƒˆ**ã¨**æ¨™æº–**ã®ãƒªãƒã‚¸ãƒˆãƒªã‚’**ä»®æƒ³**ãƒªãƒã‚¸ãƒˆãƒªã§æ··åœ¨ã•ã›ã‚‹ã“ã¨ãŒã§ãã€**ãƒªãƒ¢ãƒ¼ãƒˆã®å„ªå…ˆé †ä½**ãŒæ¨™æº–ã‚ˆã‚Šã‚‚**å¤§ãã„**å ´åˆã€**ãƒªãƒ¢ãƒ¼ãƒˆã‹ã‚‰ã®ãƒ‘ãƒƒã‚±ãƒ¼ã‚¸ï¼ˆä¾‹ãˆã°PyPiï¼‰ãŒä½¿ç”¨ã•ã‚Œã¾ã™**ã€‚ã“ã‚Œã«ã‚ˆã‚Šã€**ä¾å­˜é–¢ä¿‚ã®æ··ä¹±**ãŒç”Ÿã˜ã‚‹å¯èƒ½æ€§ãŒã‚ã‚Šã¾ã™ã€‚

**ãƒªãƒ¢ãƒ¼ãƒˆç‰ˆã®Docker**ã§ã¯ã€Docker Hubã«ã‚¢ã‚¯ã‚»ã‚¹ã™ã‚‹ãŸã‚ã®ãƒ¦ãƒ¼ã‚¶ãƒ¼åã¨ãƒˆãƒ¼ã‚¯ãƒ³ã‚’æä¾›ã™ã‚‹ã“ã¨ãŒå¯èƒ½ã§ã™ã€‚**ãƒˆãƒ¼ã‚¯ãƒ³ã¯Secret Managerã«ä¿å­˜ã•ã‚Œã¾ã™**ã€‚

### æš—å·åŒ–

äºˆæƒ³é€šã‚Šã€ãƒ‡ãƒ•ã‚©ãƒ«ãƒˆã§ã¯Googleç®¡ç†ã®ã‚­ãƒ¼ãŒä½¿ç”¨ã•ã‚Œã¾ã™ãŒã€é¡§å®¢ç®¡ç†ã®ã‚­ãƒ¼ï¼ˆCMEKï¼‰ã‚’æŒ‡å®šã™ã‚‹ã“ã¨ã‚‚ã§ãã¾ã™ã€‚

### ã‚¯ãƒªãƒ¼ãƒ³ã‚¢ãƒƒãƒ—ãƒãƒªã‚·ãƒ¼

* **ã‚¢ãƒ¼ãƒ†ã‚£ãƒ•ã‚¡ã‚¯ãƒˆã®å‰Šé™¤**ï¼šã‚¢ãƒ¼ãƒ†ã‚£ãƒ•ã‚¡ã‚¯ãƒˆã¯**ã‚¯ãƒªãƒ¼ãƒ³ã‚¢ãƒƒãƒ—ãƒãƒªã‚·ãƒ¼**ã®åŸºæº–ã«å¾“ã£ã¦**å‰Šé™¤ã•ã‚Œã¾ã™**ã€‚
* **ãƒ‰ãƒ©ã‚¤ãƒ©ãƒ³**ï¼šï¼ˆãƒ‡ãƒ•ã‚©ãƒ«ãƒˆï¼‰ã‚¢ãƒ¼ãƒ†ã‚£ãƒ•ã‚¡ã‚¯ãƒˆã¯**å‰Šé™¤ã•ã‚Œã¾ã›ã‚“**ã€‚ã‚¯ãƒªãƒ¼ãƒ³ã‚¢ãƒƒãƒ—ãƒãƒªã‚·ãƒ¼ãŒè©•ä¾¡ã•ã‚Œã€ãƒ†ã‚¹ãƒˆå‰Šé™¤ã‚¤ãƒ™ãƒ³ãƒˆãŒCloud Audit Loggingã«é€ä¿¡ã•ã‚Œã¾ã™ã€‚

### è„†å¼±æ€§ã‚¹ã‚­ãƒ£ãƒ³

**ã‚³ãƒ³ãƒ†ãƒŠã‚¤ãƒ¡ãƒ¼ã‚¸**å†…ã®è„†å¼±æ€§ã‚’ãƒã‚§ãƒƒã‚¯ã™ã‚‹**è„†å¼±æ€§ã‚¹ã‚­ãƒ£ãƒŠãƒ¼**ã‚’æœ‰åŠ¹ã«ã™ã‚‹ã“ã¨ãŒå¯èƒ½ã§ã™ã€‚

### åˆ—æŒ™
```bash
# Get repositories
gcloud artifacts repositories list
gcloud artifacts repositories describe --location <location> <repo-name>
gcloud artifacts versions list --repository=<repo-name> -location <location> --package <package-name>

# Get settings of a repository (example using python but could be other)
gcloud artifacts print-settings python --repository <repo-name> --location <location>

# Get docker images
gcloud artifacts docker images list us-central1-docker.pkg.dev/<proj-name>/<repo-name>

# Get packages (like python and others...)
gcloud artifacts packages list --repository <repo-name> --location <location>

# Get SBOMB artifacts
gcloud artifacts sbom list

# Get vulnerabilities (docker images)
gcloud artifacts vulnerabilities list us-east1-docker.pkg.dev/project123/repository123/someimage@sha256:49765698074d6d7baa82f
gcloud artifacts docker images list-vulnerabilities projects/<proj-name>/locations/<location>/scans/<scan-uuid>
```
### æ¨©é™æ˜‡æ ¼

{% content-ref url="../gcp-privilege-escalation/gcp-artifact-registry-privesc.md" %}
[gcp-artifact-registry-privesc.md](../gcp-privilege-escalation/gcp-artifact-registry-privesc.md)
{% endcontent-ref %}

### èªè¨¼ã•ã‚Œã¦ã„ãªã„ã‚¢ã‚¯ã‚»ã‚¹

{% content-ref url="../gcp-unauthenticated-enum-and-access/gcp-artifact-registry-unauthenticated-enum.md" %}
[gcp-artifact-registry-unauthenticated-enum.md](../gcp-unauthenticated-enum-and-access/gcp-artifact-registry-unauthenticated-enum.md)
{% endcontent-ref %}

### ãƒã‚¹ãƒˆã‚¨ã‚¯ã‚¹ãƒ—ãƒ­ã‚¤ãƒˆ

{% content-ref url="../gcp-post-exploitation/gcp-artifact-registry-post-exploitation.md" %}
[gcp-artifact-registry-post-exploitation.md](../gcp-post-exploitation/gcp-artifact-registry-post-exploitation.md)
{% endcontent-ref %}

### æ°¸ç¶šæ€§

{% content-ref url="../gcp-persistence/gcp-artifact-registry-persistence.md" %}
[gcp-artifact-registry-persistence.md](../gcp-persistence/gcp-artifact-registry-persistence.md)
{% endcontent-ref %}

{% hint style="success" %}
AWSãƒãƒƒã‚­ãƒ³ã‚°ã‚’å­¦ã³ã€å®Ÿè·µã™ã‚‹ï¼š<img src="../../../.gitbook/assets/image (1) (1).png" alt="" data-size="line">[**HackTricks Training AWS Red Team Expert (ARTE)**](https://training.hacktricks.xyz/courses/arte)<img src="../../../.gitbook/assets/image (1) (1).png" alt="" data-size="line">\
GCPãƒãƒƒã‚­ãƒ³ã‚°ã‚’å­¦ã³ã€å®Ÿè·µã™ã‚‹ï¼š<img src="../../../.gitbook/assets/image (2).png" alt="" data-size="line">[**HackTricks Training GCP Red Team Expert (GRTE)**<img src="../../../.gitbook/assets/image (2).png" alt="" data-size="line">](https://training.hacktricks.xyz/courses/grte)

<details>

<summary>HackTricksã‚’ã‚µãƒãƒ¼ãƒˆã™ã‚‹</summary>

* [**ã‚µãƒ–ã‚¹ã‚¯ãƒªãƒ—ã‚·ãƒ§ãƒ³ãƒ—ãƒ©ãƒ³**](https://github.com/sponsors/carlospolop)ã‚’ç¢ºèªã—ã¦ãã ã•ã„ï¼
* **ğŸ’¬ [**Discordã‚°ãƒ«ãƒ¼ãƒ—**](https://discord.gg/hRep4RUj7f)ã¾ãŸã¯[**Telegramã‚°ãƒ«ãƒ¼ãƒ—**](https://t.me/peass)ã«å‚åŠ ã™ã‚‹ã‹ã€**Twitter** ğŸ¦ [**@hacktricks\_live**](https://twitter.com/hacktricks\_live)**ã‚’ãƒ•ã‚©ãƒ­ãƒ¼ã—ã¦ãã ã•ã„ã€‚**
* **[**HackTricks**](https://github.com/carlospolop/hacktricks)ãŠã‚ˆã³[**HackTricks Cloud**](https://github.com/carlospolop/hacktricks-cloud)ã®GitHubãƒªãƒã‚¸ãƒˆãƒªã«PRã‚’æå‡ºã—ã¦ãƒãƒƒã‚­ãƒ³ã‚°ãƒˆãƒªãƒƒã‚¯ã‚’å…±æœ‰ã—ã¦ãã ã•ã„ã€‚**

</details>
{% endhint %}
