# GCP - Artifact Registry Enum

{% hint style="success" %}
Learn & practice AWS Hacking:<img src="../../../.gitbook/assets/image (1) (1) (1).png" alt="" data-size="line">[**HackTricks Training AWS Red Team Expert (ARTE)**](https://training.hacktricks.xyz/courses/arte)<img src="../../../.gitbook/assets/image (1) (1) (1).png" alt="" data-size="line">\
Learn & practice GCP Hacking: <img src="../../../.gitbook/assets/image (2).png" alt="" data-size="line">[**HackTricks Training GCP Red Team Expert (GRTE)**<img src="../../../.gitbook/assets/image (2).png" alt="" data-size="line">](https://training.hacktricks.xyz/courses/grte)

<details>

<summary>Support HackTricks</summary>

* Check the [**subscription plans**](https://github.com/sponsors/carlospolop)!
* **Join the** ğŸ’¬ [**Discord group**](https://discord.gg/hRep4RUj7f) or the [**telegram group**](https://t.me/peass) or **follow** us on **Twitter** ğŸ¦ [**@hacktricks\_live**](https://twitter.com/hacktricks_live)**.**
* **Share hacking tricks by submitting PRs to the** [**HackTricks**](https://github.com/carlospolop/hacktricks) and [**HackTricks Cloud**](https://github.com/carlospolop/hacktricks-cloud) github repos.

</details>
{% endhint %}

## Temel Bilgiler

Google Cloud Artifact Registry, **yazÄ±lÄ±m artefaktlarÄ±nÄ±zÄ± yÃ¶netmenizi, depolamanÄ±zÄ± ve gÃ¼vence altÄ±na almanÄ±zÄ±** saÄŸlayan tamamen yÃ¶netilen bir hizmettir. Temelde, **Docker** gÃ¶rÃ¼ntÃ¼leri, **Maven**, npm paketleri ve diÄŸer tÃ¼rdeki artefaktlar gibi **derleme baÄŸÄ±mlÄ±lÄ±klarÄ±nÄ± depolamak iÃ§in** bir depo iÅŸlevi gÃ¶rÃ¼r. YazÄ±lÄ±m geliÅŸtirme sÃ¼reci sÄ±rasÄ±nda Ã¼retilen artefaktlarÄ± depolamak ve sÃ¼rÃ¼mlemek iÃ§in **CI/CD boru hatlarÄ±nda yaygÄ±n olarak kullanÄ±lÄ±r**.

Artifact Registry'nin ana Ã¶zellikleri ÅŸunlardÄ±r:

1. **BirleÅŸik Depo**: **Birden fazla tÃ¼rdeki artefaktlarÄ±** destekler, bÃ¶ylece Docker gÃ¶rÃ¼ntÃ¼leri, dil paketleri (Javaâ€™nÄ±n Mavenâ€™i, Node.jsâ€™nin npmâ€™i gibi) ve diÄŸer tÃ¼rdeki artefaktlar iÃ§in tek bir depo sahibi olmanÄ±zÄ± saÄŸlar, bu da tÃ¼m artefaktlarÄ±nÄ±zda tutarlÄ± eriÅŸim kontrolleri ve birleÅŸik bir gÃ¶rÃ¼nÃ¼m saÄŸlar.
2. **Tamamen YÃ¶netilen**: YÃ¶netilen bir hizmet olarak, altyapÄ±yÄ±, Ã¶lÃ§eklendirmeyi ve gÃ¼venliÄŸi Ã¼stlenir, kullanÄ±cÄ±lar iÃ§in bakÄ±m yÃ¼kÃ¼nÃ¼ azaltÄ±r.
3. **Ä°nce Taneli EriÅŸim KontrolÃ¼**: Google Cloudâ€™un Kimlik ve EriÅŸim YÃ¶netimi (IAM) ile entegre olur, bÃ¶ylece depolarÄ±nÄ±zdaki artefaktlara kimin eriÅŸebileceÄŸini, yÃ¼kleyebileceÄŸini veya indirebileceÄŸini tanÄ±mlamanÄ±za olanak tanÄ±r.
4. **CoÄŸrafi Yedekleme**: ArtefaktlarÄ±n birden fazla bÃ¶lgede Ã§oÄŸaltÄ±lmasÄ±nÄ± destekler, indirme hÄ±zÄ±nÄ± artÄ±rÄ±r ve kullanÄ±labilirliÄŸi garanti eder.
5. **Google Cloud Hizmetleri ile Entegrasyon**: **Cloud Build, Kubernetes Engine ve Compute Engine** gibi diÄŸer GCP hizmetleriyle sorunsuz bir ÅŸekilde Ã§alÄ±ÅŸÄ±r, bu da Google Cloud ekosisteminde zaten Ã§alÄ±ÅŸan ekipler iÃ§in uygun bir seÃ§im olmasÄ±nÄ± saÄŸlar.
6. **GÃ¼venlik**: Depolanan artefaktlarÄ±n gÃ¼venli ve bilinen gÃ¼venlik sorunlarÄ±ndan arÄ±ndÄ±rÄ±lmÄ±ÅŸ olmasÄ±nÄ± saÄŸlamak iÃ§in **zafiyet taramasÄ± ve konteyner analizi** gibi Ã¶zellikler sunar.

### Formatlar ve Modlar

Yeni bir depo oluÅŸtururken, **deponun formatÄ±nÄ±/tipini** Docker, Maven, npm, Python gibi birkaÃ§ seÃ§enek arasÄ±ndan **seÃ§mek mÃ¼mkÃ¼ndÃ¼r** ve mod genellikle bu Ã¼Ã§Ã¼nden biri olabilir:

* **Standart Depo**: GCP'de **kendi artefaktlarÄ±nÄ±zÄ±** (Docker gÃ¶rÃ¼ntÃ¼leri, Maven paketleri gibi) doÄŸrudan depolamak iÃ§in varsayÄ±lan moddur. GÃ¼venli, Ã¶lÃ§eklenebilir ve Google Cloud ekosisteminde iyi bir ÅŸekilde entegre olur.
* **Uzaktan Depo** (varsa): **Harici**, kamuya aÃ§Ä±k depolardan artefaktlarÄ± **Ã¶nbelleÄŸe almak iÃ§in** bir proxy olarak iÅŸlev gÃ¶rÃ¼r. YukarÄ± akÄ±ÅŸta baÄŸÄ±mlÄ±lÄ±klarÄ±n deÄŸiÅŸmesinden kaynaklanan sorunlarÄ± Ã¶nlemeye yardÄ±mcÄ± olur ve sÄ±k eriÅŸilen artefaktlarÄ± Ã¶nbelleÄŸe alarak gecikmeyi azaltÄ±r.
* **Sanal Depo** (varsa): **Birden fazla (standart veya uzaktan) depoya** tek bir uÃ§ nokta Ã¼zerinden eriÅŸim saÄŸlamak iÃ§in **birleÅŸik bir arayÃ¼z** sunar, bu da Ã§eÅŸitli depolar arasÄ±nda yayÄ±lmÄ±ÅŸ artefaktlar iÃ§in istemci tarafÄ± yapÄ±landÄ±rmasÄ±nÄ± ve eriÅŸim yÃ¶netimini basitleÅŸtirir.
* Sanal bir depo iÃ§in **depolarÄ± seÃ§meniz ve onlara bir Ã¶ncelik vermeniz** gerekecektir (en yÃ¼ksek Ã¶nceliÄŸe sahip depo kullanÄ±lacaktÄ±r).
* **Uzaktan ve standart** depolarÄ± bir **sanal** depoda **karÄ±ÅŸtÄ±rabilirsiniz**, eÄŸer **uzaktan** olanÄ±n **Ã¶nceliÄŸi** standart olandan **bÃ¼yÃ¼kse**, **uzaktan paketler (Ã¶rneÄŸin PyPi) kullanÄ±lacaktÄ±r**. Bu, **BaÄŸÄ±mlÄ±lÄ±k KarÄ±ÅŸÄ±klÄ±ÄŸÄ±na** yol aÃ§abilir.

**Docker'Ä±n Uzaktan versiyonunda**, Docker Hub'a eriÅŸmek iÃ§in bir kullanÄ±cÄ± adÄ± ve token vermek mÃ¼mkÃ¼ndÃ¼r. **Token daha sonra Secret Manager'da saklanÄ±r**.

### Åifreleme

BeklendiÄŸi gibi, varsayÄ±lan olarak Google tarafÄ±ndan yÃ¶netilen bir anahtar kullanÄ±lÄ±r, ancak MÃ¼ÅŸteri tarafÄ±ndan yÃ¶netilen bir anahtar belirtilebilir (CMEK).

### Temizleme PolitikalarÄ±

* **ArtefaktlarÄ± sil:** Artefaktlar, **temizleme politikasÄ±** kriterlerine gÃ¶re **silinecektir**.
* **Kuru Ã§alÄ±ÅŸtÄ±rma:** (VarsayÄ±lan olan) Artefaktlar **silinmeyecektir**. Temizleme politikalarÄ± deÄŸerlendirilecek ve test silme olaylarÄ± Cloud Audit Logging'e gÃ¶nderilecektir.

### Zafiyet TaramasÄ±

**Konteyner gÃ¶rÃ¼ntÃ¼leri** iÃ§indeki zafiyetleri kontrol edecek **zafiyet tarayÄ±cÄ±sÄ±nÄ±** etkinleÅŸtirmek mÃ¼mkÃ¼ndÃ¼r.

### SayÄ±m
```bash
# Get repositories
gcloud artifacts repositories list
gcloud artifacts repositories describe --location <location> <repo-name>
gcloud artifacts versions list --repository=<repo-name> -location <location> --package <package-name>

# Get settings of a repository (example using python but could be other)
gcloud artifacts print-settings python --repository <repo-name> --location <location>

# Get docker images
gcloud artifacts docker images list us-central1-docker.pkg.dev/<proj-name>/<repo-name>

# Get packages (like python and others...)
gcloud artifacts packages list --repository <repo-name> --location <location>

# Get SBOMB artifacts
gcloud artifacts sbom list

# Get vulnerabilities (docker images)
gcloud artifacts vulnerabilities list us-east1-docker.pkg.dev/project123/repository123/someimage@sha256:49765698074d6d7baa82f
gcloud artifacts docker images list-vulnerabilities projects/<proj-name>/locations/<location>/scans/<scan-uuid>
```
### Yetki YÃ¼kseltme

{% content-ref url="../gcp-privilege-escalation/gcp-artifact-registry-privesc.md" %}
[gcp-artifact-registry-privesc.md](../gcp-privilege-escalation/gcp-artifact-registry-privesc.md)
{% endcontent-ref %}

### Kimlik DoÄŸrulamasÄ± Olmadan EriÅŸim

{% content-ref url="../gcp-unauthenticated-enum-and-access/gcp-artifact-registry-unauthenticated-enum.md" %}
[gcp-artifact-registry-unauthenticated-enum.md](../gcp-unauthenticated-enum-and-access/gcp-artifact-registry-unauthenticated-enum.md)
{% endcontent-ref %}

### SonrasÄ± Ä°stismar

{% content-ref url="../gcp-post-exploitation/gcp-artifact-registry-post-exploitation.md" %}
[gcp-artifact-registry-post-exploitation.md](../gcp-post-exploitation/gcp-artifact-registry-post-exploitation.md)
{% endcontent-ref %}

### SÃ¼reklilik

{% content-ref url="../gcp-persistence/gcp-artifact-registry-persistence.md" %}
[gcp-artifact-registry-persistence.md](../gcp-persistence/gcp-artifact-registry-persistence.md)
{% endcontent-ref %}

{% hint style="success" %}
AWS Hacking'i Ã¶ÄŸrenin ve pratik yapÄ±n:<img src="../../../.gitbook/assets/image (1) (1) (1).png" alt="" data-size="line">[**HackTricks Training AWS Red Team Expert (ARTE)**](https://training.hacktricks.xyz/courses/arte)<img src="../../../.gitbook/assets/image (1) (1) (1).png" alt="" data-size="line">\
GCP Hacking'i Ã¶ÄŸrenin ve pratik yapÄ±n: <img src="../../../.gitbook/assets/image (2).png" alt="" data-size="line">[**HackTricks Training GCP Red Team Expert (GRTE)**<img src="../../../.gitbook/assets/image (2).png" alt="" data-size="line">](https://training.hacktricks.xyz/courses/grte)

<details>

<summary>HackTricks'i Destekleyin</summary>

* [**abonelik planlarÄ±nÄ±**](https://github.com/sponsors/carlospolop) kontrol edin!
* **ğŸ’¬ [**Discord grubuna**](https://discord.gg/hRep4RUj7f) veya [**telegram grubuna**](https://t.me/peass) katÄ±lÄ±n ya da **Twitter'da** ğŸ¦ [**@hacktricks\_live**](https://twitter.com/hacktricks_live)**'i takip edin.**
* **Hacking ipuÃ§larÄ±nÄ± paylaÅŸmak iÃ§in** [**HackTricks**](https://github.com/carlospolop/hacktricks) ve [**HackTricks Cloud**](https://github.com/carlospolop/hacktricks-cloud) github reposuna PR gÃ¶nderin.

</details>
{% endhint %}
