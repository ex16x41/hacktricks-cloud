# GCP - App Engine Enum

{% hint style="success" %}
Learn & practice AWS Hacking:<img src="../../../.gitbook/assets/image (1) (1) (1).png" alt="" data-size="line">[**HackTricks Training AWS Red Team Expert (ARTE)**](https://training.hacktricks.xyz/courses/arte)<img src="../../../.gitbook/assets/image (1) (1) (1).png" alt="" data-size="line">\
Learn & practice GCP Hacking: <img src="../../../.gitbook/assets/image (2).png" alt="" data-size="line">[**HackTricks Training GCP Red Team Expert (GRTE)**<img src="../../../.gitbook/assets/image (2).png" alt="" data-size="line">](https://training.hacktricks.xyz/courses/grte)

<details>

<summary>Support HackTricks</summary>

* Check the [**subscription plans**](https://github.com/sponsors/carlospolop)!
* **Join the** 💬 [**Discord group**](https://discord.gg/hRep4RUj7f) or the [**telegram group**](https://t.me/peass) or **follow** us on **Twitter** 🐦 [**@hacktricks\_live**](https://twitter.com/hacktricks_live)**.**
* **Share hacking tricks by submitting PRs to the** [**HackTricks**](https://github.com/carlospolop/hacktricks) and [**HackTricks Cloud**](https://github.com/carlospolop/hacktricks-cloud) github repos.

</details>
{% endhint %}

## Basic Information <a href="#reviewing-app-engine-configurations" id="reviewing-app-engine-configurations"></a>

Google Cloud Platform'ın (GCP) App Engine'i, **büyük ölçekli web uygulamalarının geliştirilmesi ve barındırılması için tasarlanmış sağlam, sunucusuz bir platformdur**. Bu platformun tasarımı, geliştirme sürecini kolaylaştırmaya ve uygulamaların yönetilebilirliğini artırmaya odaklanmaktadır. GCP'nin App Engine'inin ana özellikleri ve faydaları şunlardır:

1. **Sunucusuz Mimari**: App Engine, sunucu sağlama, yapılandırma ve ölçeklendirme dahil olmak üzere altyapıyı otomatik olarak yönetir. Bu, geliştiricilerin temel donanım hakkında endişelenmeden kod yazmaya odaklanmalarını sağlar.
2. **Otomatik Ölçeklendirme**: App Engine, aldığı trafik miktarına yanıt olarak uygulamanızı otomatik olarak ölçeklendirebilir. Artan trafiği karşılamak için ölçeklenir ve trafik azaldığında ölçeklenir, maliyet ve performansı optimize etmeye yardımcı olur.
3. **Dil ve Çalışma Zamanı Desteği**: Java, Python, Node.js, Go, Ruby, PHP ve .NET gibi popüler programlama dillerini destekler. Uygulamalarınızı standart veya esnek bir ortamda çalıştırabilirsiniz. Standart ortam daha kısıtlayıcıdır ancak belirli diller için yüksek derecede optimize edilmiştir, esnek ortam ise daha fazla özelleştirmeye izin verir.
4. **Entegre Hizmetler**: App Engine, Cloud SQL, Cloud Storage, Cloud Datastore gibi birçok diğer GCP hizmetiyle entegre olur. Bu entegrasyon, bulut tabanlı uygulamaların mimarisini basitleştirir.
5. **Sürümleme ve Trafik Bölme**: Uygulamanızın birden fazla sürümünü kolayca dağıtabilir ve ardından A/B testleri veya kademeli dağıtımlar için bunlar arasında trafiği bölebilirsiniz.
6. **Uygulama İçgörüleri**: App Engine, uygulamaları izlemek ve yönetmek için günlük kaydı, kullanıcı kimlik doğrulaması ve bir dizi geliştirici aracı gibi yerleşik hizmetler sunar.
7. **Güvenlik**: Uygulama sürümleme, güvenli bağlantılar için SSL/TLS sertifikaları ve kimlik ve erişim yönetimi gibi yerleşik güvenlik özellikleri sunar.

### Firewall

Uygulamaları çalıştıran örnekler için basit bir **firewall** aşağıdaki seçeneklerle yapılandırılabilir:

<figure><img src="../../../.gitbook/assets/image (246).png" alt=""><figcaption></figcaption></figure>

### SA

Bu Uygulamalar tarafından kullanılan varsayılan hizmet hesabı **`<proj-name>@appspot.gserviceaccount.com`** olup, projede **Editör** rolüne sahiptir ve APP Engine örneği içindeki SAs **cloud-platform kapsamıyla (diğerlerinin yanı sıra) çalışır.**

### Storage

Kaynak kodu ve meta veriler, **otomatik olarak** `<proj-id>.appspot.com` ve `staging.<proj-id>.appspot.com` ve `<country>.<proj-id>.appspot.com` gibi isimlere sahip bucket'larda saklanır.

**Uygulamanın her dosyası**, **içeriğin sha1'ini dosya adı olarak** saklar:

<figure><img src="../../../.gitbook/assets/image (82).png" alt=""><figcaption></figcaption></figure>

`staging.<proj-id>.appspot.com` içindeki **`ae`** klasöründe, **her sürüm için bir klasör bulunur** ve **`manifest.json`** dosyası ile birlikte **kaynak kodu** dosyaları içerir ve bu dosya **Uygulamanın bileşenlerini tanımlar**:

{% code overflow="wrap" %}
```json
{"requirements.txt":{"sourceUrl":"https://storage.googleapis.com/staging.onboarding-host-98efbf97812843.appspot.com/a270eedcbe2672c841251022b7105d340129d108","sha1Sum":"a270eedc_be2672c8_41251022_b7105d34_0129d108"},"main_test.py":{"sourceUrl":"https://storage.googleapis.com/staging.onboarding-host-98efbf97812843.appspot.com/0ca32fd70c953af94d02d8a36679153881943f32","sha1Sum":"0ca32fd7_0c953af9_4d02d8a ...
```
{% endcode %}

### Containers

Web uygulaması nihayetinde **bir konteyner içinde çalıştırılacaktır** ve **Code Build** konteyneri oluşturmak için kullanılır.

### URLs & Regions

**Varsayılan** web sayfası **`<project-uniq-name>.appspot.com`** URL'sinde yayınlanacaktır, ancak eski sürümlerin URL'si biraz farklı olacaktır, örneğin **`https://20240117t001540-dot-<project-uniq-name>.uc.r.appspot.com`** (ilk zaman damgasını not edin).

Sadece bir uygulama motoru web uygulamasını her bölgeye dağıtmanın mümkün olduğu gibi görünebilir, ancak **`app.yml`** dosyasında **`service: <servicename>`** belirtmek ve yeni bir hizmet (yeni bir web) oluşturmak mümkündür. Bu yeni web için URL formatı **`<servicename>-dot-<project-uniq-name>.appspot.com`** olacaktır.

### Enumeration

{% hint style="danger" %}
Her yeni kod yüklediğinizde, **yeni bir sürüm oluşturulur**. **Tüm sürümler saklanır** ve onlara erişmek için bir **URL'leri vardır**. Bu nedenle, eski bir sürümün kodunu değiştirmek **büyük bir kalıcılık tekniği** olabilir.
{% endhint %}

Cloud Functions ile olduğu gibi, **uygulamanın çalışma zamanında ortam değişkenleri aracılığıyla erişilen gizliliklere bağımlı olma ihtimali vardır**. Bu değişkenler **`app.yaml`** dosyasında saklanır ve şu şekilde erişilebilir:
```bash
# List the apps
gcloud app services list
gcloud app services describe <app-name>
# Access via browser to the specified app
gcloud app services browse <app-name>

# Get App versions
gcloud app versions list
# Get all the info of the app and version, included specific verion URL and the env
gcloud app versions describe -s <app-name> <version-id>

# Logs
gcloud app logs tail -s <app-name>

# Instances
## This is only valid if a flexible environment is used and not a standard one
gcloud app instances list
gcloud app instances describe -s <app-name> --version <version-id> <ID>
## Connect to the instance via ssh
gcloud app instances ssh --service <app-name> --version <version-id> <ID>

# Firewalls
gcloud app firewall-rules list
gcloud app firewall-rules describe <num_fw>

# Get domains
gcloud app domain-mappings list
gcloud app domain-mappings describe <name>

# SSl certificates
gcloud app ssl-certificates list
gcloud app ssl-certificates describe <name>
```
### Yetki Yükseltme

{% content-ref url="../gcp-privilege-escalation/gcp-appengine-privesc.md" %}
[gcp-appengine-privesc.md](../gcp-privilege-escalation/gcp-appengine-privesc.md)
{% endcontent-ref %}

### Kimlik Doğrulaması Olmayan Enum

{% content-ref url="../gcp-unauthenticated-enum-and-access/gcp-app-engine-unauthenticated-enum.md" %}
[gcp-app-engine-unauthenticated-enum.md](../gcp-unauthenticated-enum-and-access/gcp-app-engine-unauthenticated-enum.md)
{% endcontent-ref %}

### İstismar Sonrası

{% content-ref url="../gcp-post-exploitation/gcp-app-engine-post-exploitation.md" %}
[gcp-app-engine-post-exploitation.md](../gcp-post-exploitation/gcp-app-engine-post-exploitation.md)
{% endcontent-ref %}

### Süreklilik

{% content-ref url="../gcp-persistence/gcp-app-engine-persistence.md" %}
[gcp-app-engine-persistence.md](../gcp-persistence/gcp-app-engine-persistence.md)
{% endcontent-ref %}

{% hint style="success" %}
AWS Hacking'i öğrenin ve pratik yapın:<img src="../../../.gitbook/assets/image (1) (1) (1).png" alt="" data-size="line">[**HackTricks Training AWS Red Team Expert (ARTE)**](https://training.hacktricks.xyz/courses/arte)<img src="../../../.gitbook/assets/image (1) (1) (1).png" alt="" data-size="line">\
GCP Hacking'i öğrenin ve pratik yapın: <img src="../../../.gitbook/assets/image (2).png" alt="" data-size="line">[**HackTricks Training GCP Red Team Expert (GRTE)**<img src="../../../.gitbook/assets/image (2).png" alt="" data-size="line">](https://training.hacktricks.xyz/courses/grte)

<details>

<summary>HackTricks'i Destekleyin</summary>

* [**abonelik planlarını**](https://github.com/sponsors/carlospolop) kontrol edin!
* **💬 [**Discord grubuna**](https://discord.gg/hRep4RUj7f) veya [**telegram grubuna**](https://t.me/peass) katılın ya da **Twitter'da** 🐦 [**@hacktricks\_live**](https://twitter.com/hacktricks_live)**'i takip edin.**
* **Hacking ipuçlarını paylaşmak için** [**HackTricks**](https://github.com/carlospolop/hacktricks) ve [**HackTricks Cloud**](https://github.com/carlospolop/hacktricks-cloud) github reposuna PR gönderin.

</details>
{% endhint %}
