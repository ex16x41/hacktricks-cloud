# GCP - App Engine Enum

{% hint style="success" %}
Learn & practice AWS Hacking:<img src="../../../.gitbook/assets/image (1) (1).png" alt="" data-size="line">[**HackTricks Training AWS Red Team Expert (ARTE)**](https://training.hacktricks.xyz/courses/arte)<img src="../../../.gitbook/assets/image (1) (1).png" alt="" data-size="line">\
Learn & practice GCP Hacking: <img src="../../../.gitbook/assets/image (2).png" alt="" data-size="line">[**HackTricks Training GCP Red Team Expert (GRTE)**<img src="../../../.gitbook/assets/image (2).png" alt="" data-size="line">](https://training.hacktricks.xyz/courses/grte)

<details>

<summary>Support HackTricks</summary>

* Check the [**subscription plans**](https://github.com/sponsors/carlospolop)!
* **Join the** ğŸ’¬ [**Discord group**](https://discord.gg/hRep4RUj7f) or the [**telegram group**](https://t.me/peass) or **follow** us on **Twitter** ğŸ¦ [**@hacktricks\_live**](https://twitter.com/hacktricks\_live)**.**
* **Share hacking tricks by submitting PRs to the** [**HackTricks**](https://github.com/carlospolop/hacktricks) and [**HackTricks Cloud**](https://github.com/carlospolop/hacktricks-cloud) github repos.

</details>
{% endhint %}

## åŸºæœ¬æƒ…å ± <a href="#reviewing-app-engine-configurations" id="reviewing-app-engine-configurations"></a>

Google Cloud Platformï¼ˆGCPï¼‰ã®App Engineã¯ã€**å¤§è¦æ¨¡ãªã‚¦ã‚§ãƒ–ã‚¢ãƒ—ãƒªã‚±ãƒ¼ã‚·ãƒ§ãƒ³ã®é–‹ç™ºã¨ãƒ›ã‚¹ãƒ†ã‚£ãƒ³ã‚°ã«ç‰¹åŒ–ã—ãŸå …ç‰¢ãªã‚µãƒ¼ãƒãƒ¼ãƒ¬ã‚¹ãƒ—ãƒ©ãƒƒãƒˆãƒ•ã‚©ãƒ¼ãƒ **ã§ã™ã€‚ã“ã®ãƒ—ãƒ©ãƒƒãƒˆãƒ•ã‚©ãƒ¼ãƒ ã®è¨­è¨ˆã¯ã€é–‹ç™ºãƒ—ãƒ­ã‚»ã‚¹ã®åŠ¹ç‡åŒ–ã¨ã‚¢ãƒ—ãƒªã‚±ãƒ¼ã‚·ãƒ§ãƒ³ã®ç®¡ç†æ€§ã®å‘ä¸Šã«ç„¦ç‚¹ã‚’å½“ã¦ã¦ã„ã¾ã™ã€‚GCPã®App Engineã®ä¸»ãªæ©Ÿèƒ½ã¨åˆ©ç‚¹ã¯ä»¥ä¸‹ã®é€šã‚Šã§ã™ã€‚

1. **ã‚µãƒ¼ãƒãƒ¼ãƒ¬ã‚¹ã‚¢ãƒ¼ã‚­ãƒ†ã‚¯ãƒãƒ£**: App Engineã¯ã€ã‚µãƒ¼ãƒãƒ¼ã®ãƒ—ãƒ­ãƒ“ã‚¸ãƒ§ãƒ‹ãƒ³ã‚°ã€æ§‹æˆã€ã‚¹ã‚±ãƒ¼ãƒªãƒ³ã‚°ã‚’è‡ªå‹•çš„ã«å‡¦ç†ã—ã¾ã™ã€‚ã“ã‚Œã«ã‚ˆã‚Šã€é–‹ç™ºè€…ã¯åŸºç›¤ã¨ãªã‚‹ãƒãƒ¼ãƒ‰ã‚¦ã‚§ã‚¢ã‚’æ°—ã«ã›ãšã«ã‚³ãƒ¼ãƒ‰ã‚’æ›¸ãã“ã¨ã«é›†ä¸­ã§ãã¾ã™ã€‚
2. **è‡ªå‹•ã‚¹ã‚±ãƒ¼ãƒªãƒ³ã‚°**: App Engineã¯ã€å—ä¿¡ã™ã‚‹ãƒˆãƒ©ãƒ•ã‚£ãƒƒã‚¯ã®é‡ã«å¿œã˜ã¦ã‚¢ãƒ—ãƒªã‚±ãƒ¼ã‚·ãƒ§ãƒ³ã‚’è‡ªå‹•çš„ã«ã‚¹ã‚±ãƒ¼ãƒ«ã—ã¾ã™ã€‚ãƒˆãƒ©ãƒ•ã‚£ãƒƒã‚¯ãŒå¢—åŠ ã™ã‚‹ã¨ã‚¹ã‚±ãƒ¼ãƒ«ã‚¢ãƒƒãƒ—ã—ã€ãƒˆãƒ©ãƒ•ã‚£ãƒƒã‚¯ãŒæ¸›å°‘ã™ã‚‹ã¨ã‚¹ã‚±ãƒ¼ãƒ«ãƒ€ã‚¦ãƒ³ã™ã‚‹ã“ã¨ã§ã€ã‚³ã‚¹ãƒˆã¨ãƒ‘ãƒ•ã‚©ãƒ¼ãƒãƒ³ã‚¹ã‚’æœ€é©åŒ–ã—ã¾ã™ã€‚
3. **è¨€èªã¨ãƒ©ãƒ³ã‚¿ã‚¤ãƒ ã®ã‚µãƒãƒ¼ãƒˆ**: Javaã€Pythonã€Node.jsã€Goã€Rubyã€PHPã€.NETãªã©ã®äººæ°—ãƒ—ãƒ­ã‚°ãƒ©ãƒŸãƒ³ã‚°è¨€èªã‚’ã‚µãƒãƒ¼ãƒˆã—ã¦ã„ã¾ã™ã€‚ã‚¢ãƒ—ãƒªã‚±ãƒ¼ã‚·ãƒ§ãƒ³ã¯æ¨™æº–ç’°å¢ƒã¾ãŸã¯æŸ”è»Ÿç’°å¢ƒã§å®Ÿè¡Œã§ãã¾ã™ã€‚æ¨™æº–ç’°å¢ƒã¯åˆ¶ç´„ãŒå¤šã„ã§ã™ãŒç‰¹å®šã®è¨€èªã«æœ€é©åŒ–ã•ã‚Œã¦ãŠã‚Šã€æŸ”è»Ÿç’°å¢ƒã¯ã‚ˆã‚Šå¤šãã®ã‚«ã‚¹ã‚¿ãƒã‚¤ã‚ºãŒå¯èƒ½ã§ã™ã€‚
4. **çµ±åˆã‚µãƒ¼ãƒ“ã‚¹**: App Engineã¯ã€Cloud SQLã€Cloud Storageã€Cloud Datastoreãªã©ã®ä»–ã®å¤šãã®GCPã‚µãƒ¼ãƒ“ã‚¹ã¨çµ±åˆã•ã‚Œã¦ã„ã¾ã™ã€‚ã“ã®çµ±åˆã«ã‚ˆã‚Šã€ã‚¯ãƒ©ã‚¦ãƒ‰ãƒ™ãƒ¼ã‚¹ã®ã‚¢ãƒ—ãƒªã‚±ãƒ¼ã‚·ãƒ§ãƒ³ã®ã‚¢ãƒ¼ã‚­ãƒ†ã‚¯ãƒãƒ£ãŒç°¡ç´ åŒ–ã•ã‚Œã¾ã™ã€‚
5. **ãƒãƒ¼ã‚¸ãƒ§ãƒ³ç®¡ç†ã¨ãƒˆãƒ©ãƒ•ã‚£ãƒƒã‚¯ã‚¹ãƒ—ãƒªãƒƒãƒ†ã‚£ãƒ³ã‚°**: ã‚¢ãƒ—ãƒªã‚±ãƒ¼ã‚·ãƒ§ãƒ³ã®è¤‡æ•°ã®ãƒãƒ¼ã‚¸ãƒ§ãƒ³ã‚’ç°¡å˜ã«ãƒ‡ãƒ—ãƒ­ã‚¤ã—ã€A/Bãƒ†ã‚¹ãƒˆã‚„æ®µéšçš„ãªãƒ­ãƒ¼ãƒ«ã‚¢ã‚¦ãƒˆã®ãŸã‚ã«ãƒˆãƒ©ãƒ•ã‚£ãƒƒã‚¯ã‚’åˆ†å‰²ã§ãã¾ã™ã€‚
6. **ã‚¢ãƒ—ãƒªã‚±ãƒ¼ã‚·ãƒ§ãƒ³ã‚¤ãƒ³ã‚µã‚¤ãƒˆ**: App Engineã¯ã€ãƒ­ã‚°è¨˜éŒ²ã€ãƒ¦ãƒ¼ã‚¶ãƒ¼èªè¨¼ã€ã‚¢ãƒ—ãƒªã‚±ãƒ¼ã‚·ãƒ§ãƒ³ã®ç›£è¦–ã¨ç®¡ç†ã®ãŸã‚ã®é–‹ç™ºè€…ãƒ„ãƒ¼ãƒ«ã®ã‚¹ã‚¤ãƒ¼ãƒˆãªã©ã®çµ„ã¿è¾¼ã¿ã‚µãƒ¼ãƒ“ã‚¹ã‚’æä¾›ã—ã¾ã™ã€‚
7. **ã‚»ã‚­ãƒ¥ãƒªãƒ†ã‚£**: ã‚¢ãƒ—ãƒªã‚±ãƒ¼ã‚·ãƒ§ãƒ³ã®ãƒãƒ¼ã‚¸ãƒ§ãƒ³ç®¡ç†ã€SSL/TLSè¨¼æ˜æ›¸ã«ã‚ˆã‚‹å®‰å…¨ãªæ¥ç¶šã€ã‚¢ã‚¤ãƒ‡ãƒ³ãƒ†ã‚£ãƒ†ã‚£ã¨ã‚¢ã‚¯ã‚»ã‚¹ç®¡ç†ãªã©ã®çµ„ã¿è¾¼ã¿ã‚»ã‚­ãƒ¥ãƒªãƒ†ã‚£æ©Ÿèƒ½ã‚’æä¾›ã—ã¾ã™ã€‚

### ãƒ•ã‚¡ã‚¤ã‚¢ã‚¦ã‚©ãƒ¼ãƒ«

ã‚¢ãƒ—ãƒªã‚’å®Ÿè¡Œã—ã¦ã„ã‚‹ã‚¤ãƒ³ã‚¹ã‚¿ãƒ³ã‚¹ã®ãŸã‚ã«ã€ä»¥ä¸‹ã®ã‚ªãƒ—ã‚·ãƒ§ãƒ³ã§ã‚·ãƒ³ãƒ—ãƒ«ãª**ãƒ•ã‚¡ã‚¤ã‚¢ã‚¦ã‚©ãƒ¼ãƒ«**ã‚’æ§‹æˆã§ãã¾ã™ã€‚

<figure><img src="../../../.gitbook/assets/image (246).png" alt=""><figcaption></figcaption></figure>

### SA

ã“ã‚Œã‚‰ã®ã‚¢ãƒ—ãƒªã§ä½¿ç”¨ã•ã‚Œã‚‹ãƒ‡ãƒ•ã‚©ãƒ«ãƒˆã®ã‚µãƒ¼ãƒ“ã‚¹ã‚¢ã‚«ã‚¦ãƒ³ãƒˆã¯ã€**`<proj-name>@appspot.gserviceaccount.com`**ã§ã‚ã‚Šã€ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆã«å¯¾ã—ã¦**Editor**ãƒ­ãƒ¼ãƒ«ã‚’æŒã¡ã€APP Engineã‚¤ãƒ³ã‚¹ã‚¿ãƒ³ã‚¹å†…ã®SAã¯**cloud-platformã‚¹ã‚³ãƒ¼ãƒ—ï¼ˆä»–ã®ã‚¹ã‚³ãƒ¼ãƒ—ã‚‚å«ã‚€ï¼‰ã§å®Ÿè¡Œã•ã‚Œã¾ã™ã€‚**

### ã‚¹ãƒˆãƒ¬ãƒ¼ã‚¸

ã‚½ãƒ¼ã‚¹ã‚³ãƒ¼ãƒ‰ã¨ãƒ¡ã‚¿ãƒ‡ãƒ¼ã‚¿ã¯ã€**`<proj-id>.appspot.com`**ã‚„`staging.<proj-id>.appspot.com`ã€`<country>.<proj-id>.appspot.com`ãªã©ã®åå‰ã®ãƒã‚±ãƒƒãƒˆã«**è‡ªå‹•çš„ã«ä¿å­˜ã•ã‚Œã¾ã™**ã€‚

**ã‚¢ãƒ—ãƒªã®ã™ã¹ã¦ã®ãƒ•ã‚¡ã‚¤ãƒ«**ã¯ã€**ã‚³ãƒ³ãƒ†ãƒ³ãƒ„ã®sha1ã‚’ãƒ•ã‚¡ã‚¤ãƒ«åã¨ã—ã¦**ä¿å­˜ã•ã‚Œã¾ã™ï¼š

<figure><img src="../../../.gitbook/assets/image (82).png" alt=""><figcaption></figcaption></figure>

**`staging.<proj-id>.appspot.com`**ã®**`ae`**ãƒ•ã‚©ãƒ«ãƒ€ãƒ¼å†…ã«ã¯ã€**ãƒãƒ¼ã‚¸ãƒ§ãƒ³ã”ã¨ã«1ã¤ã®ãƒ•ã‚©ãƒ«ãƒ€ãƒ¼ãŒå­˜åœ¨ã—**ã€**ã‚½ãƒ¼ã‚¹ã‚³ãƒ¼ãƒ‰**ãƒ•ã‚¡ã‚¤ãƒ«ã¨**ã‚¢ãƒ—ãƒªã®ã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆã‚’èª¬æ˜ã™ã‚‹**`manifest.json`ãƒ•ã‚¡ã‚¤ãƒ«ãŒã‚ã‚Šã¾ã™ï¼š

{% code overflow="wrap" %}
```json
{"requirements.txt":{"sourceUrl":"https://storage.googleapis.com/staging.onboarding-host-98efbf97812843.appspot.com/a270eedcbe2672c841251022b7105d340129d108","sha1Sum":"a270eedc_be2672c8_41251022_b7105d34_0129d108"},"main_test.py":{"sourceUrl":"https://storage.googleapis.com/staging.onboarding-host-98efbf97812843.appspot.com/0ca32fd70c953af94d02d8a36679153881943f32","sha1Sum":"0ca32fd7_0c953af9_4d02d8a ...
```
{% endcode %}

### ã‚³ãƒ³ãƒ†ãƒŠ

ã‚¦ã‚§ãƒ–ã‚¢ãƒ—ãƒªã¯æœ€çµ‚çš„ã«**ã‚³ãƒ³ãƒ†ãƒŠå†…ã§å®Ÿè¡Œã•ã‚Œ**ã€**Code Build**ãŒã‚³ãƒ³ãƒ†ãƒŠã‚’ãƒ“ãƒ«ãƒ‰ã™ã‚‹ãŸã‚ã«ä½¿ç”¨ã•ã‚Œã¾ã™ã€‚

### URL ã¨ãƒªãƒ¼ã‚¸ãƒ§ãƒ³

**ãƒ‡ãƒ•ã‚©ãƒ«ãƒˆ**ã®ã‚¦ã‚§ãƒ–ãƒšãƒ¼ã‚¸ã¯URL **`<project-uniq-name>.appspot.com`** ã§å…¬é–‹ã•ã‚Œã¾ã™ãŒã€å¤ã„ãƒãƒ¼ã‚¸ãƒ§ãƒ³ã®URLã¯å°‘ã—ç•°ãªã‚Šã€ä¾‹ãˆã° **`https://20240117t001540-dot-<project-uniq-name>.uc.r.appspot.com`** ã«ãªã‚Šã¾ã™ï¼ˆæœ€åˆã®ã‚¿ã‚¤ãƒ ã‚¹ã‚¿ãƒ³ãƒ—ã«æ³¨æ„ï¼‰ã€‚

1ã¤ã®ãƒªãƒ¼ã‚¸ãƒ§ãƒ³ã«å¯¾ã—ã¦1ã¤ã®ã‚¢ãƒ—ãƒªã‚¨ãƒ³ã‚¸ãƒ³ã‚¦ã‚§ãƒ–ã‚¢ãƒ—ãƒªã‚±ãƒ¼ã‚·ãƒ§ãƒ³ã—ã‹ãƒ‡ãƒ—ãƒ­ã‚¤ã§ããªã„ã‚ˆã†ã«è¦‹ãˆã‚‹ã‹ã‚‚ã—ã‚Œã¾ã›ã‚“ãŒã€**`app.yml`** ã« **`service: <servicename>`** ã‚’æŒ‡å®šã™ã‚‹ã“ã¨ã§æ–°ã—ã„ã‚µãƒ¼ãƒ“ã‚¹ï¼ˆæ–°ã—ã„ã‚¦ã‚§ãƒ–ï¼‰ã‚’ä½œæˆã™ã‚‹ã“ã¨ãŒå¯èƒ½ã§ã™ã€‚ã“ã®æ–°ã—ã„ã‚¦ã‚§ãƒ–ã®URLã®å½¢å¼ã¯ **`<servicename>-dot-<project-uniq-name>.appspot.com`** ã«ãªã‚Šã¾ã™ã€‚

### åˆ—æŒ™

{% hint style="danger" %}
æ–°ã—ã„ã‚³ãƒ¼ãƒ‰ã‚’ã‚¢ãƒ—ãƒªã«ã‚¢ãƒƒãƒ—ãƒ­ãƒ¼ãƒ‰ã™ã‚‹ãŸã³ã«ã€**æ–°ã—ã„ãƒãƒ¼ã‚¸ãƒ§ãƒ³ãŒä½œæˆã•ã‚Œã¾ã™**ã€‚**ã™ã¹ã¦ã®ãƒãƒ¼ã‚¸ãƒ§ãƒ³ãŒä¿å­˜ã•ã‚Œ**ã€ãã‚Œã‚‰ã«ã‚¢ã‚¯ã‚»ã‚¹ã™ã‚‹ãŸã‚ã®**URLãŒã‚ã‚Šã¾ã™**ã€‚ã—ãŸãŒã£ã¦ã€å¤ã„ãƒãƒ¼ã‚¸ãƒ§ãƒ³ã®ã‚³ãƒ¼ãƒ‰ã‚’å¤‰æ›´ã™ã‚‹ã“ã¨ã¯**å„ªã‚ŒãŸæ°¸ç¶šæ€§æŠ€è¡“**ã¨ãªã‚‹å¯èƒ½æ€§ãŒã‚ã‚Šã¾ã™ã€‚
{% endhint %}

Cloud Functionsã¨åŒæ§˜ã«ã€**ã‚¢ãƒ—ãƒªã‚±ãƒ¼ã‚·ãƒ§ãƒ³ãŒå®Ÿè¡Œæ™‚ã«ç’°å¢ƒå¤‰æ•°ã‚’ä»‹ã—ã¦ã‚¢ã‚¯ã‚»ã‚¹ã•ã‚Œã‚‹ç§˜å¯†ã«ä¾å­˜ã™ã‚‹å¯èƒ½æ€§ãŒã‚ã‚Šã¾ã™**ã€‚ã“ã‚Œã‚‰ã®å¤‰æ•°ã¯**`app.yaml`** ãƒ•ã‚¡ã‚¤ãƒ«ã«ä¿å­˜ã•ã‚Œã¦ãŠã‚Šã€æ¬¡ã®ã‚ˆã†ã«ã‚¢ã‚¯ã‚»ã‚¹ã§ãã¾ã™ï¼š
```bash
# List the apps
gcloud app services list
gcloud app services describe <app-name>
# Access via browser to the specified app
gcloud app services browse <app-name>

# Get App versions
gcloud app versions list
# Get all the info of the app and version, included specific verion URL and the env
gcloud app versions describe -s <app-name> <version-id>

# Logs
gcloud app logs tail -s <app-name>

# Instances
## This is only valid if a flexible environment is used and not a standard one
gcloud app instances list
gcloud app instances describe -s <app-name> --version <version-id> <ID>
## Connect to the instance via ssh
gcloud app instances ssh --service <app-name> --version <version-id> <ID>

# Firewalls
gcloud app firewall-rules list
gcloud app firewall-rules describe <num_fw>

# Get domains
gcloud app domain-mappings list
gcloud app domain-mappings describe <name>

# SSl certificates
gcloud app ssl-certificates list
gcloud app ssl-certificates describe <name>
```
### æ¨©é™æ˜‡æ ¼

{% content-ref url="../gcp-privilege-escalation/gcp-appengine-privesc.md" %}
[gcp-appengine-privesc.md](../gcp-privilege-escalation/gcp-appengine-privesc.md)
{% endcontent-ref %}

### èªè¨¼ã•ã‚Œã¦ã„ãªã„åˆ—æŒ™

{% content-ref url="../gcp-unauthenticated-enum-and-access/gcp-app-engine-unauthenticated-enum.md" %}
[gcp-app-engine-unauthenticated-enum.md](../gcp-unauthenticated-enum-and-access/gcp-app-engine-unauthenticated-enum.md)
{% endcontent-ref %}

### ãƒã‚¹ãƒˆã‚¨ã‚¯ã‚¹ãƒ—ãƒ­ã‚¤ãƒˆ

{% content-ref url="../gcp-post-exploitation/gcp-app-engine-post-exploitation.md" %}
[gcp-app-engine-post-exploitation.md](../gcp-post-exploitation/gcp-app-engine-post-exploitation.md)
{% endcontent-ref %}

### æ°¸ç¶šæ€§

{% content-ref url="../gcp-persistence/gcp-app-engine-persistence.md" %}
[gcp-app-engine-persistence.md](../gcp-persistence/gcp-app-engine-persistence.md)
{% endcontent-ref %}

{% hint style="success" %}
AWSãƒãƒƒã‚­ãƒ³ã‚°ã‚’å­¦ã³ã€å®Ÿè·µã™ã‚‹ï¼š<img src="../../../.gitbook/assets/image (1) (1).png" alt="" data-size="line">[**HackTricks Training AWS Red Team Expert (ARTE)**](https://training.hacktricks.xyz/courses/arte)<img src="../../../.gitbook/assets/image (1) (1).png" alt="" data-size="line">\
GCPãƒãƒƒã‚­ãƒ³ã‚°ã‚’å­¦ã³ã€å®Ÿè·µã™ã‚‹ï¼š<img src="../../../.gitbook/assets/image (2).png" alt="" data-size="line">[**HackTricks Training GCP Red Team Expert (GRTE)**<img src="../../../.gitbook/assets/image (2).png" alt="" data-size="line">](https://training.hacktricks.xyz/courses/grte)

<details>

<summary>HackTricksã‚’ã‚µãƒãƒ¼ãƒˆã™ã‚‹</summary>

* [**ã‚µãƒ–ã‚¹ã‚¯ãƒªãƒ—ã‚·ãƒ§ãƒ³ãƒ—ãƒ©ãƒ³**](https://github.com/sponsors/carlospolop)ã‚’ç¢ºèªã—ã¦ãã ã•ã„ï¼
* **ğŸ’¬ [**Discordã‚°ãƒ«ãƒ¼ãƒ—**](https://discord.gg/hRep4RUj7f)ã¾ãŸã¯[**Telegramã‚°ãƒ«ãƒ¼ãƒ—**](https://t.me/peass)ã«å‚åŠ ã™ã‚‹ã‹ã€**Twitter** ğŸ¦ [**@hacktricks\_live**](https://twitter.com/hacktricks\_live)**ã‚’ãƒ•ã‚©ãƒ­ãƒ¼ã—ã¦ãã ã•ã„ã€‚**
* **[**HackTricks**](https://github.com/carlospolop/hacktricks)ãŠã‚ˆã³[**HackTricks Cloud**](https://github.com/carlospolop/hacktricks-cloud)ã®GitHubãƒªãƒã‚¸ãƒˆãƒªã«PRã‚’æå‡ºã—ã¦ãƒãƒƒã‚­ãƒ³ã‚°ãƒˆãƒªãƒƒã‚¯ã‚’å…±æœ‰ã—ã¦ãã ã•ã„ã€‚**

</details>
{% endhint %}
