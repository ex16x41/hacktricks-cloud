# GCP - Filestore Enum

{% hint style="success" %}
Learn & practice AWS Hacking:<img src="../../../.gitbook/assets/image (1).png" alt="" data-size="line">[**HackTricks Training AWS Red Team Expert (ARTE)**](https://training.hacktricks.xyz/courses/arte)<img src="../../../.gitbook/assets/image (1).png" alt="" data-size="line">\
Learn & practice GCP Hacking: <img src="../../../.gitbook/assets/image (2).png" alt="" data-size="line">[**HackTricks Training GCP Red Team Expert (GRTE)**<img src="../../../.gitbook/assets/image (2).png" alt="" data-size="line">](https://training.hacktricks.xyz/courses/grte)

<details>

<summary>Support HackTricks</summary>

* Check the [**subscription plans**](https://github.com/sponsors/carlospolop)!
* **Join the** üí¨ [**Discord group**](https://discord.gg/hRep4RUj7f) or the [**telegram group**](https://t.me/peass) or **follow** us on **Twitter** üê¶ [**@hacktricks\_live**](https://twitter.com/hacktricks\_live)**.**
* **Share hacking tricks by submitting PRs to the** [**HackTricks**](https://github.com/carlospolop/hacktricks) and [**HackTricks Cloud**](https://github.com/carlospolop/hacktricks-cloud) github repos.

</details>
{% endhint %}

## Basic Information

Google Cloud Filestore ni **huduma ya kuhifadhi faili inayosimamiwa** iliyoundwa kwa ajili ya programu zinazohitaji **kiolesura cha mfumo wa faili na mfumo wa faili wa pamoja kwa data**. Huduma hii inajulikana kwa kutoa sehemu za faili zenye utendaji wa juu, ambazo zinaweza kuunganishwa na huduma mbalimbali za GCP. Faida yake inaonekana katika hali ambapo violesura vya mfumo wa faili wa jadi na semantiki ni muhimu, kama vile katika usindikaji wa vyombo vya habari, usimamizi wa maudhui, na nakala za hifadhidata.

Unaweza kufikiria hii kama **NFS** **hifadhi ya hati za pamoja -** chanzo kinachoweza kuwa na habari nyeti.

### Connections

Unapounda mfano wa Filestore, inawezekana **kuchagua mtandao ambapo utaweza kuufikia**.

Zaidi ya hayo, kwa **kawaida wateja wote kwenye mtandao wa VPC uliochaguliwa na eneo wataweza kuufikia**, hata hivyo, inawezekana **kuzuia ufikiaji pia kwa anwani ya IP** au safu na kuashiria haki za ufikiaji (Admin, Admin Viewer, Editor, Viewer) ambazo mteja atapata **kulingana na anwani ya IP.**

Inaweza pia kupatikana kupitia **Muunganisho wa Ufikiaji wa Huduma Binafsi:**

* Ni za kila mtandao wa VPC na zinaweza kutumika katika huduma zote zinazodhibitiwa kama Memorystore, Tensorflow na SQL.
* Ni **kati ya mtandao wako wa VPC na mtandao unaomilikiwa na Google kwa kutumia VPC peering**, ikiruhusu mifano na huduma zako kuwasiliana kwa kipekee kwa **kutumia anwani za IP za ndani**.
* Unda mradi uliofungwa kwako kwenye upande wa mtengenezaji wa huduma, ikimaanisha hakuna wateja wengine wanaoshiriki. Utatozwa ada kwa rasilimali pekee unazotoa.
* VPC peering itaunda njia mpya kwa mtandao wako wa VPC

### Backups

Inawezekana kuunda **nakala za sehemu za faili**. Hizi zinaweza baadaye **kurudishwa katika mfano wa Fileshare wa asili** au katika **mpya**.

### Encryption

Kwa kawaida, **funguo za usimbaji zinazodhibitiwa na Google** zitatumika kusimbaja data, lakini inawezekana kuchagua **funguo za usimbaji zinazodhibitiwa na Mteja (CMEK)**.

### Enumeration

Ikiwa unapata filestore inayopatikana katika mradi, unaweza **kuunganisha** kutoka ndani ya Mfano wako wa Kompyuta ulioathiriwa. Tumia amri ifuatayo kuona kama kuna yoyote. 

{% code overflow="wrap" %}
```bash
# Instances
gcloud filestore instances list # Check the IP address
gcloud filestore instances describe --zone <zone> <name> # Check IP and access restrictions

# Backups
gcloud filestore backups list
gcloud filestore backups describe --region <region> <backup>

# Search for NFS shares in a VPC subnet
sudo nmap -n -T5 -Pn -p 2049 --min-parallelism 100 --min-rate 1000 --open 10.99.160.2/20
```
{% endcode %}

{% hint style="danger" %}
Kumbuka kwamba huduma ya filestore inaweza kuwa katika **subnetwork mpya kabisa iliyoundwa kwa ajili yake** (ndani ya Muunganisho wa Ufikiaji wa Huduma Binafsi, ambayo ni **VPC peer**).\
Hivyo unaweza kuhitaji **kuorodhesha VPC peers** ili pia ufanye nmap juu ya hizo anuwai za mtandao.

{% code overflow="wrap" %}
```bash
# Get peerings
gcloud compute networks peerings list
# Get routes imported from a peering
gcloud compute networks peerings list-routes <peering-name> --network=<network-name> --region=<region> --direction=INCOMING
```
{% endcode %}
{% endhint %}

### Kuinua Mamlaka & Baada ya Kutekeleza

Hakuna njia za kuinua mamlaka katika GCP kwa moja kwa moja kutumia huduma hii, lakini kwa kutumia baadhi ya **mbinu za Baada ya Kutekeleza inawezekana kupata ufikiaji wa data** na labda unaweza kupata baadhi ya akreditivu za kuinua mamlaka:

{% content-ref url="../gcp-post-exploitation/gcp-filestore-post-exploitation.md" %}
[gcp-filestore-post-exploitation.md](../gcp-post-exploitation/gcp-filestore-post-exploitation.md)
{% endcontent-ref %}

### Kudumu

{% content-ref url="../gcp-persistence/gcp-filestore-persistence.md" %}
[gcp-filestore-persistence.md](../gcp-persistence/gcp-filestore-persistence.md)
{% endcontent-ref %}

{% hint style="success" %}
Jifunze & fanya mazoezi ya AWS Hacking:<img src="../../../.gitbook/assets/image (1).png" alt="" data-size="line">[**HackTricks Training AWS Red Team Expert (ARTE)**](https://training.hacktricks.xyz/courses/arte)<img src="../../../.gitbook/assets/image (1).png" alt="" data-size="line">\
Jifunze & fanya mazoezi ya GCP Hacking: <img src="../../../.gitbook/assets/image (2).png" alt="" data-size="line">[**HackTricks Training GCP Red Team Expert (GRTE)**<img src="../../../.gitbook/assets/image (2).png" alt="" data-size="line">](https://training.hacktricks.xyz/courses/grte)

<details>

<summary>Support HackTricks</summary>

* Angalia [**mpango wa usajili**](https://github.com/sponsors/carlospolop)!
* **Jiunge na** üí¨ [**kikundi cha Discord**](https://discord.gg/hRep4RUj7f) au [**kikundi cha telegram**](https://t.me/peass) au **fuata** sisi kwenye **Twitter** üê¶ [**@hacktricks\_live**](https://twitter.com/hacktricks\_live)**.**
* **Shiriki mbinu za udukuzi kwa kuwasilisha PRs kwa** [**HackTricks**](https://github.com/carlospolop/hacktricks) na [**HackTricks Cloud**](https://github.com/carlospolop/hacktricks-cloud) github repos.

</details>
{% endhint %}
