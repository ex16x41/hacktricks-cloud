# GCP - Filestore Enum

{% hint style="success" %}
Learn & practice AWS Hacking:<img src="../../../.gitbook/assets/image (1) (1) (1).png" alt="" data-size="line">[**HackTricks Training AWS Red Team Expert (ARTE)**](https://training.hacktricks.xyz/courses/arte)<img src="../../../.gitbook/assets/image (1) (1) (1).png" alt="" data-size="line">\
Learn & practice GCP Hacking: <img src="../../../.gitbook/assets/image (2).png" alt="" data-size="line">[**HackTricks Training GCP Red Team Expert (GRTE)**<img src="../../../.gitbook/assets/image (2).png" alt="" data-size="line">](https://training.hacktricks.xyz/courses/grte)

<details>

<summary>Support HackTricks</summary>

* Check the [**subscription plans**](https://github.com/sponsors/carlospolop)!
* **Join the** ğŸ’¬ [**Discord group**](https://discord.gg/hRep4RUj7f) or the [**telegram group**](https://t.me/peass) or **follow** us on **Twitter** ğŸ¦ [**@hacktricks\_live**](https://twitter.com/hacktricks_live)**.**
* **Share hacking tricks by submitting PRs to the** [**HackTricks**](https://github.com/carlospolop/hacktricks) and [**HackTricks Cloud**](https://github.com/carlospolop/hacktricks-cloud) github repos.

</details>
{% endhint %}

## Temel Bilgiler

Google Cloud Filestore, **dosya sistemi arayÃ¼zÃ¼ ve veri iÃ§in paylaÅŸÄ±lan bir dosya sistemi** ihtiyacÄ± olan uygulamalar iÃ§in Ã¶zel olarak tasarlanmÄ±ÅŸ bir **yÃ¶netilen dosya depolama hizmetidir**. Bu hizmet, Ã§eÅŸitli GCP hizmetleriyle entegre edilebilen yÃ¼ksek performanslÄ± dosya paylaÅŸÄ±mlarÄ± sunarak Ã¶ne Ã§Ä±kar. Geleneksel dosya sistemi arayÃ¼zlerinin ve anlamlarÄ±nÄ±n kritik olduÄŸu medya iÅŸleme, iÃ§erik yÃ¶netimi ve veritabanlarÄ±nÄ±n yedeklenmesi gibi senaryolarda faydasÄ± belirgindir.

Bunu, herhangi bir **NFS** **paylaÅŸÄ±lan belge deposu** gibi dÃ¼ÅŸÃ¼nebilirsiniz - hassas bilgi kaynaÄŸÄ± olma potansiyeline sahip.

### BaÄŸlantÄ±lar

Bir Filestore Ã¶rneÄŸi oluÅŸtururken, **eriÅŸilebilir olacaÄŸÄ± aÄŸÄ± seÃ§mek mÃ¼mkÃ¼ndÃ¼r**.

AyrÄ±ca, **varsayÄ±lan olarak seÃ§ilen VPC aÄŸÄ± ve bÃ¶lgedeki tÃ¼m istemcilerin buna eriÅŸebilmesi saÄŸlanÄ±r**, ancak eriÅŸimi **IP adresi** veya aralÄ±ÄŸÄ± ile **kÄ±sÄ±tlamak da mÃ¼mkÃ¼ndÃ¼r** ve istemcinin alacaÄŸÄ± eriÅŸim ayrÄ±calÄ±ÄŸÄ±nÄ± (Admin, Admin Viewer, Editor, Viewer) IP adresine baÄŸlÄ± olarak belirtebilirsiniz.

AyrÄ±ca, **Ã–zel Hizmet EriÅŸim BaÄŸlantÄ±sÄ±** aracÄ±lÄ±ÄŸÄ±yla eriÅŸilebilir:

* VPC aÄŸÄ± baÅŸÄ±na olup, Memorystore, Tensorflow ve SQL gibi tÃ¼m yÃ¶netilen hizmetler arasÄ±nda kullanÄ±labilir.
* **VPC peering kullanarak Google'a ait bir aÄŸ ile VPC aÄŸÄ±nÄ±z arasÄ±nda** olup, Ã¶rneklerinizin ve hizmetlerinizin yalnÄ±zca **iÃ§ IP adreslerini kullanarak** iletiÅŸim kurmasÄ±nÄ± saÄŸlar.
* Hizmet Ã¼retici tarafÄ±nda sizin iÃ§in izole bir proje oluÅŸturur, yani baÅŸka mÃ¼ÅŸterilerin paylaÅŸmadÄ±ÄŸÄ± bir alan. Sadece saÄŸladÄ±ÄŸÄ±nÄ±z kaynaklar iÃ§in faturalandÄ±rÄ±lacaksÄ±nÄ±z.
* VPC peering, VPC'nize yeni yollar ekleyecektir.

### Yedeklemeler

**Dosya paylaÅŸÄ±mlarÄ±nÄ±n yedeklerini oluÅŸturmak mÃ¼mkÃ¼ndÃ¼r**. Bunlar daha sonra **orijinal** yeni Fileshare Ã¶rneÄŸine veya **yeni olanlara** **geri yÃ¼klenebilir**.

### Åifreleme

VarsayÄ±lan olarak, verileri ÅŸifrelemek iÃ§in **Google tarafÄ±ndan yÃ¶netilen bir ÅŸifreleme anahtarÄ±** kullanÄ±lacaktÄ±r, ancak **MÃ¼ÅŸteri tarafÄ±ndan yÃ¶netilen bir ÅŸifreleme anahtarÄ± (CMEK)** seÃ§mek de mÃ¼mkÃ¼ndÃ¼r.

### SayÄ±m

Projede mevcut bir filestore bulursanÄ±z, **onu** ele geÃ§irilmiÅŸ Compute Instance'Ä±nÄ±zdan **baÄŸlayabilirsiniz**. Herhangi birinin var olup olmadÄ±ÄŸÄ±nÄ± gÃ¶rmek iÃ§in aÅŸaÄŸÄ±daki komutu kullanÄ±n.

{% code overflow="wrap" %}
```bash
# Instances
gcloud filestore instances list # Check the IP address
gcloud filestore instances describe --zone <zone> <name> # Check IP and access restrictions

# Backups
gcloud filestore backups list
gcloud filestore backups describe --region <region> <backup>

# Search for NFS shares in a VPC subnet
sudo nmap -n -T5 -Pn -p 2049 --min-parallelism 100 --min-rate 1000 --open 10.99.160.2/20
```
{% endcode %}

{% hint style="danger" %}
Bir filestore hizmetinin **tamamen yeni bir alt aÄŸda** olabileceÄŸini unutmayÄ±n (bir Ã–zel Hizmet EriÅŸim BaÄŸlantÄ±sÄ± iÃ§inde, bu bir **VPC eÅŸidir**).\
Bu nedenle, bu aÄŸ aralÄ±klarÄ± Ã¼zerinde nmap Ã§alÄ±ÅŸtÄ±rmak iÃ§in **VPC eÅŸlerini** de **numaralandÄ±rmanÄ±z** gerekebilir.

{% code overflow="wrap" %}
```bash
# Get peerings
gcloud compute networks peerings list
# Get routes imported from a peering
gcloud compute networks peerings list-routes <peering-name> --network=<network-name> --region=<region> --direction=INCOMING
```
{% endcode %}
{% endhint %}

### Yetki YÃ¼kseltme & SonrasÄ± Ä°stismar

GCP'de bu hizmeti doÄŸrudan kÃ¶tÃ¼ye kullanarak yetki yÃ¼kseltmenin yollarÄ± yoktur, ancak bazÄ± **SonrasÄ± Ä°stismar hileleri ile verilere eriÅŸmek mÃ¼mkÃ¼ndÃ¼r** ve belki de yetki yÃ¼kseltmek iÃ§in bazÄ± kimlik bilgileri bulabilirsiniz:

{% content-ref url="../gcp-post-exploitation/gcp-filestore-post-exploitation.md" %}
[gcp-filestore-post-exploitation.md](../gcp-post-exploitation/gcp-filestore-post-exploitation.md)
{% endcontent-ref %}

### SÃ¼reklilik

{% content-ref url="../gcp-persistence/gcp-filestore-persistence.md" %}
[gcp-filestore-persistence.md](../gcp-persistence/gcp-filestore-persistence.md)
{% endcontent-ref %}

{% hint style="success" %}
AWS Hacking'i Ã¶ÄŸrenin ve pratik yapÄ±n:<img src="../../../.gitbook/assets/image (1) (1) (1).png" alt="" data-size="line">[**HackTricks Training AWS Red Team Expert (ARTE)**](https://training.hacktricks.xyz/courses/arte)<img src="../../../.gitbook/assets/image (1) (1) (1).png" alt="" data-size="line">\
GCP Hacking'i Ã¶ÄŸrenin ve pratik yapÄ±n: <img src="../../../.gitbook/assets/image (2).png" alt="" data-size="line">[**HackTricks Training GCP Red Team Expert (GRTE)**<img src="../../../.gitbook/assets/image (2).png" alt="" data-size="line">](https://training.hacktricks.xyz/courses/grte)

<details>

<summary>HackTricks'i Destekleyin</summary>

* [**abonelik planlarÄ±nÄ±**](https://github.com/sponsors/carlospolop) kontrol edin!
* **ğŸ’¬ [**Discord grubuna**](https://discord.gg/hRep4RUj7f) veya [**telegram grubuna**](https://t.me/peass) katÄ±lÄ±n ya da **Twitter'da** ğŸ¦ [**@hacktricks\_live**](https://twitter.com/hacktricks_live)**'i takip edin.**
* **Hacking hilelerini paylaÅŸmak iÃ§in** [**HackTricks**](https://github.com/carlospolop/hacktricks) ve [**HackTricks Cloud**](https://github.com/carlospolop/hacktricks-cloud) github reposuna PR gÃ¶nderin.

</details>
{% endhint %}
