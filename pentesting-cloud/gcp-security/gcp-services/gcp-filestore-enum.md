# GCP - Filestore Enum

{% hint style="success" %}
Learn & practice AWS Hacking:<img src="../../../.gitbook/assets/image (1) (1).png" alt="" data-size="line">[**HackTricks Training AWS Red Team Expert (ARTE)**](https://training.hacktricks.xyz/courses/arte)<img src="../../../.gitbook/assets/image (1) (1).png" alt="" data-size="line">\
Learn & practice GCP Hacking: <img src="../../../.gitbook/assets/image (2).png" alt="" data-size="line">[**HackTricks Training GCP Red Team Expert (GRTE)**<img src="../../../.gitbook/assets/image (2).png" alt="" data-size="line">](https://training.hacktricks.xyz/courses/grte)

<details>

<summary>Support HackTricks</summary>

* Check the [**subscription plans**](https://github.com/sponsors/carlospolop)!
* **Join the** üí¨ [**Discord group**](https://discord.gg/hRep4RUj7f) or the [**telegram group**](https://t.me/peass) or **follow** us on **Twitter** üê¶ [**@hacktricks\_live**](https://twitter.com/hacktricks\_live)**.**
* **Share hacking tricks by submitting PRs to the** [**HackTricks**](https://github.com/carlospolop/hacktricks) and [**HackTricks Cloud**](https://github.com/carlospolop/hacktricks-cloud) github repos.

</details>
{% endhint %}

## Basic Information

Google Cloud Filestore —î **–∫–µ—Ä–æ–≤–∞–Ω–æ—é —Å–ª—É–∂–±–æ—é –∑–±–µ—Ä—ñ–≥–∞–Ω–Ω—è —Ñ–∞–π–ª—ñ–≤**, –ø—Ä–∏–∑–Ω–∞—á–µ–Ω–æ—é –¥–ª—è –¥–æ–¥–∞—Ç–∫—ñ–≤, —è–∫—ñ –ø–æ—Ç—Ä–µ–±—É—é—Ç—å —è–∫ **—ñ–Ω—Ç–µ—Ä—Ñ–µ–π—Å—É —Ñ–∞–π–ª–æ–≤–æ—ó —Å–∏—Å—Ç–µ–º–∏, —Ç–∞–∫ —ñ —Å–ø—ñ–ª—å–Ω–æ—ó —Ñ–∞–π–ª–æ–≤–æ—ó —Å–∏—Å—Ç–µ–º–∏ –¥–ª—è –¥–∞–Ω–∏—Ö**. –¶—è —Å–ª—É–∂–±–∞ –≤—ñ–¥–∑–Ω–∞—á–∞—î—Ç—å—Å—è –≤–∏—Å–æ–∫–æ–ø—Ä–æ–¥—É–∫—Ç–∏–≤–Ω–∏–º–∏ —Ñ–∞–π–ª–æ–≤–∏–º–∏ —Å–ø—ñ–ª—å–Ω–æ—Ç–∞–º–∏, —è–∫—ñ –º–æ–∂–Ω–∞ —ñ–Ω—Ç–µ–≥—Ä—É–≤–∞—Ç–∏ –∑ —Ä—ñ–∑–Ω–∏–º–∏ —Å–ª—É–∂–±–∞–º–∏ GCP. –á—ó –∫–æ—Ä–∏—Å–Ω—ñ—Å—Ç—å –ø—Ä–æ—è–≤–ª—è—î—Ç—å—Å—è –≤ —Å—Ü–µ–Ω–∞—Ä—ñ—è—Ö, –¥–µ —Ç—Ä–∞–¥–∏—Ü—ñ–π–Ω—ñ —ñ–Ω—Ç–µ—Ä—Ñ–µ–π—Å–∏ —Ç–∞ —Å–µ–º–∞–Ω—Ç–∏–∫–∞ —Ñ–∞–π–ª–æ–≤–∏—Ö —Å–∏—Å—Ç–µ–º —î –∫—Ä–∏—Ç–∏—á–Ω–æ –≤–∞–∂–ª–∏–≤–∏–º–∏, —Ç–∞–∫–∏–º–∏ —è–∫ –æ–±—Ä–æ–±–∫–∞ –º–µ–¥—ñ–∞, —É–ø—Ä–∞–≤–ª—ñ–Ω–Ω—è –∫–æ–Ω—Ç–µ–Ω—Ç–æ–º —Ç–∞ —Ä–µ–∑–µ—Ä–≤–Ω–µ –∫–æ–ø—ñ—é–≤–∞–Ω–Ω—è –±–∞–∑ –¥–∞–Ω–∏—Ö.

–í–∏ –º–æ–∂–µ—Ç–µ —É—è–≤–∏—Ç–∏ —Ü–µ —è–∫ –±—É–¥—å-—è–∫–∏–π —ñ–Ω—à–∏–π **NFS** **—Å–ø—ñ–ª—å–Ω–∏–π —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä—ñ–π –¥–æ–∫—É–º–µ–Ω—Ç—ñ–≤ -** –ø–æ—Ç–µ–Ω—Ü—ñ–π–Ω–µ –¥–∂–µ—Ä–µ–ª–æ —á—É—Ç–ª–∏–≤–æ—ó —ñ–Ω—Ñ–æ—Ä–º–∞—Ü—ñ—ó.

### Connections

–ü—Ä–∏ —Å—Ç–≤–æ—Ä–µ–Ω–Ω—ñ –µ–∫–∑–µ–º–ø–ª—è—Ä–∞ Filestore –º–æ–∂–Ω–∞ **–≤–∏–±—Ä–∞—Ç–∏ –º–µ—Ä–µ–∂—É, –≤ —è–∫—ñ–π –≤—ñ–Ω –±—É–¥–µ –¥–æ—Å—Ç—É–ø–Ω–∏–π**.

–ë—ñ–ª—å—à–µ —Ç–æ–≥–æ, –∑–∞ **–∑–∞–º–æ–≤—á—É–≤–∞–Ω–Ω—è–º –≤—Å—ñ –∫–ª—ñ—î–Ω—Ç–∏ –≤ –æ–±—Ä–∞–Ω—ñ–π VPC-–º–µ—Ä–µ–∂—ñ —Ç–∞ —Ä–µ–≥—ñ–æ–Ω—ñ –∑–º–æ–∂—É—Ç—å –æ—Ç—Ä–∏–º–∞—Ç–∏ –¥–æ –Ω—å–æ–≥–æ –¥–æ—Å—Ç—É–ø**, –æ–¥–Ω–∞–∫, –º–æ–∂–ª–∏–≤–æ **–æ–±–º–µ–∂–∏—Ç–∏ –¥–æ—Å—Ç—É–ø —Ç–∞–∫–æ–∂ –∑–∞ IP-–∞–¥—Ä–µ—Å–æ—é** –∞–±–æ –¥—ñ–∞–ø–∞–∑–æ–Ω–æ–º —Ç–∞ –≤–∫–∞–∑–∞—Ç–∏ –ø—Ä–∏–≤—ñ–ª–µ–π –¥–æ—Å—Ç—É–ø—É (Admin, Admin Viewer, Editor, Viewer), —è–∫–∏–π –æ—Ç—Ä–∏–º–∞—î –∫–æ—Ä–∏—Å—Ç—É–≤–∞—á –∫–ª—ñ—î–Ω—Ç–∞ **–≤ –∑–∞–ª–µ–∂–Ω–æ—Å—Ç—ñ –≤—ñ–¥ IP-–∞–¥—Ä–µ—Å–∏.**

–í—ñ–Ω —Ç–∞–∫–æ–∂ –º–æ–∂–µ –±—É—Ç–∏ –¥–æ—Å—Ç—É–ø–Ω–∏–π —á–µ—Ä–µ–∑ **Private Service Access Connection:**

* –í–æ–Ω–∏ —î –¥–ª—è –∫–æ–∂–Ω–æ—ó VPC-–º–µ—Ä–µ–∂—ñ —ñ –º–æ–∂—É—Ç—å –≤–∏–∫–æ—Ä–∏—Å—Ç–æ–≤—É–≤–∞—Ç–∏—Å—è –¥–ª—è –≤—Å—ñ—Ö –∫–µ—Ä–æ–≤–∞–Ω–∏—Ö —Å–ª—É–∂–±, —Ç–∞–∫–∏—Ö —è–∫ Memorystore, Tensorflow —Ç–∞ SQL.
* –í–æ–Ω–∏ —î **–º—ñ–∂ –≤–∞—à–æ—é VPC-–º–µ—Ä–µ–∂–µ—é —Ç–∞ –º–µ—Ä–µ–∂–µ—é, —â–æ –Ω–∞–ª–µ–∂–∏—Ç—å Google, –≤–∏–∫–æ—Ä–∏—Å—Ç–æ–≤—É—é—á–∏ VPC peering**, —â–æ –¥–æ–∑–≤–æ–ª—è—î –≤–∞—à–∏–º –µ–∫–∑–µ–º–ø–ª—è—Ä–∞–º —Ç–∞ —Å–ª—É–∂–±–∞–º —Å–ø—ñ–ª–∫—É–≤–∞—Ç–∏—Å—è –≤–∏–∫–ª—é—á–Ω–æ –∑–∞ –¥–æ–ø–æ–º–æ–≥–æ—é **–≤–Ω—É—Ç—Ä—ñ—à–Ω—ñ—Ö IP-–∞–¥—Ä–µ—Å**.
* –°—Ç–≤–æ—Ä—ñ—Ç—å —ñ–∑–æ–ª—å–æ–≤–∞–Ω–∏–π –ø—Ä–æ–µ–∫—Ç –¥–ª—è –≤–∞—Å –Ω–∞ —Å—Ç–æ—Ä–æ–Ω—ñ –ø–æ—Å—Ç–∞—á–∞–ª—å–Ω–∏–∫–∞ –ø–æ—Å–ª—É–≥, —â–æ –æ–∑–Ω–∞—á–∞—î, —â–æ –∂–æ–¥–µ–Ω —ñ–Ω—à–∏–π –∫–ª—ñ—î–Ω—Ç –Ω–µ –¥—ñ–ª–∏—Ç—å—Å—è –Ω–∏–º. –í–∞–º –±—É–¥–µ –≤–∏—Å—Ç–∞–≤–ª–µ–Ω–æ —Ä–∞—Ö—É–Ω–æ–∫ –ª–∏—à–µ –∑–∞ —Ä–µ—Å—É—Ä—Å–∏, —è–∫—ñ –≤–∏ –Ω–∞–¥–∞—î—Ç–µ.
* VPC peering —ñ–º–ø–æ—Ä—Ç—É—î –Ω–æ–≤—ñ –º–∞—Ä—à—Ä—É—Ç–∏ –¥–æ –≤–∞—à–æ—ó VPC.

### Backups

–ú–æ–∂–Ω–∞ —Å—Ç–≤–æ—Ä–∏—Ç–∏ **—Ä–µ–∑–µ—Ä–≤–Ω—ñ –∫–æ–ø—ñ—ó —Ñ–∞–π–ª–æ–≤–∏—Ö —Å–ø—ñ–ª—å–Ω–æ—Ç**. –á—Ö –º–æ–∂–Ω–∞ –ø—ñ–∑–Ω—ñ—à–µ **–≤—ñ–¥–Ω–æ–≤–∏—Ç–∏ –≤ –æ—Ä–∏–≥—ñ–Ω–∞–ª—å–Ω–æ–º—É** –Ω–æ–≤–æ–º—É –µ–∫–∑–µ–º–ø–ª—è—Ä—ñ Fileshare –∞–±–æ –≤ **–Ω–æ–≤–∏—Ö**.

### Encryption

–ó–∞ –∑–∞–º–æ–≤—á—É–≤–∞–Ω–Ω—è–º –±—É–¥–µ –≤–∏–∫–æ—Ä–∏—Å—Ç–æ–≤—É–≤–∞—Ç–∏—Å—è **–∫–ª—é—á —à–∏—Ñ—Ä—É–≤–∞–Ω–Ω—è, –∫–µ—Ä–æ–≤–∞–Ω–∏–π Google**, –∞–ª–µ –º–æ–∂–Ω–∞ –≤–∏–±—Ä–∞—Ç–∏ **–∫–ª—é—á —à–∏—Ñ—Ä—É–≤–∞–Ω–Ω—è, –∫–µ—Ä–æ–≤–∞–Ω–∏–π –∫–ª—ñ—î–Ω—Ç–æ–º (CMEK)**.

### Enumeration

–Ø–∫—â–æ –≤–∏ –∑–Ω–∞–π–¥–µ—Ç–µ –¥–æ—Å—Ç—É–ø–Ω–∏–π filestore —É –ø—Ä–æ–µ–∫—Ç—ñ, –≤–∏ –º–æ–∂–µ—Ç–µ **–ø—ñ–¥–∫–ª—é—á–∏—Ç–∏ –π–æ–≥–æ** –∑ –≤–∞—à–æ–≥–æ —Å–∫–æ–º–ø—Ä–æ–º–µ—Ç–æ–≤–∞–Ω–æ–≥–æ –µ–∫–∑–µ–º–ø–ª—è—Ä–∞ Compute. –í–∏–∫–æ—Ä–∏—Å—Ç–æ–≤—É–π—Ç–µ –Ω–∞—Å—Ç—É–ø–Ω—É –∫–æ–º–∞–Ω–¥—É, —â–æ–± –ø–µ—Ä–µ–≤—ñ—Ä–∏—Ç–∏, —á–∏ —ñ—Å–Ω—É—é—Ç—å —è–∫—ñ—Å—å. 

{% code overflow="wrap" %}
```bash
# Instances
gcloud filestore instances list # Check the IP address
gcloud filestore instances describe --zone <zone> <name> # Check IP and access restrictions

# Backups
gcloud filestore backups list
gcloud filestore backups describe --region <region> <backup>

# Search for NFS shares in a VPC subnet
sudo nmap -n -T5 -Pn -p 2049 --min-parallelism 100 --min-rate 1000 --open 10.99.160.2/20
```
{% endcode %}

{% hint style="danger" %}
–ó–≤–µ—Ä–Ω—ñ—Ç—å —É–≤–∞–≥—É, —â–æ —Å–ª—É–∂–±–∞ filestore –º–æ–∂–µ –±—É—Ç–∏ –≤ **–∞–±—Å–æ–ª—é—Ç–Ω–æ –Ω–æ–≤—ñ–π –ø—ñ–¥–º–µ—Ä–µ–∂—ñ, —Å—Ç–≤–æ—Ä–µ–Ω—ñ–π –¥–ª—è –Ω–µ—ó** (–≤—Å–µ—Ä–µ–¥–∏–Ω—ñ –∑'—î–¥–Ω–∞–Ω–Ω—è Private Service Access, —è–∫–µ —î **VPC peer**).\
–û—Ç–∂–µ, –≤–∞–º –º–æ–∂–µ –∑–Ω–∞–¥–æ–±–∏—Ç–∏—Å—è **–ø–µ—Ä–µ—Ä–∞—Ö—É–≤–∞—Ç–∏ VPC peers**, —â–æ–± —Ç–∞–∫–æ–∂ –∑–∞–ø—É—Å—Ç–∏—Ç–∏ nmap –ø–æ —Ü–∏—Ö –º–µ—Ä–µ–∂–µ–≤–∏—Ö –¥—ñ–∞–ø–∞–∑–æ–Ω–∞—Ö.

{% code overflow="wrap" %}
```bash
# Get peerings
gcloud compute networks peerings list
# Get routes imported from a peering
gcloud compute networks peerings list-routes <peering-name> --network=<network-name> --region=<region> --direction=INCOMING
```
{% endcode %}
{% endhint %}

### –ü—ñ–¥–≤–∏—â–µ–Ω–Ω—è –ü—Ä–∏–≤—ñ–ª–µ—ó–≤ —Ç–∞ –ü–æ—Å—Ç–µ–∫—Å–ø–ª—É–∞—Ç–∞—Ü—ñ—è

–ù–µ–º–∞—î —Å–ø–æ—Å–æ–±—ñ–≤ –ø—ñ–¥–≤–∏—â–∏—Ç–∏ –ø—Ä–∏–≤—ñ–ª–µ—ó –≤ GCP, –±–µ–∑–ø–æ—Å–µ—Ä–µ–¥–Ω—å–æ –∑–ª–æ–≤–∂–∏–≤–∞—é—á–∏ —Ü–∏–º —Å–µ—Ä–≤—ñ—Å–æ–º, –∞–ª–µ –≤–∏–∫–æ—Ä–∏—Å—Ç–æ–≤—É—é—á–∏ –¥–µ—è–∫—ñ **—Ç—Ä—é–∫–∏ –ø–æ—Å—Ç–µ–∫—Å–ø–ª—É–∞—Ç–∞—Ü—ñ—ó, –º–æ–∂–ª–∏–≤–æ –æ—Ç—Ä–∏–º–∞—Ç–∏ –¥–æ—Å—Ç—É–ø –¥–æ –¥–∞–Ω–∏—Ö** —ñ, –º–æ–∂–ª–∏–≤–æ, –≤–∏ –∑–º–æ–∂–µ—Ç–µ –∑–Ω–∞–π—Ç–∏ –¥–µ—è–∫—ñ –æ–±–ª—ñ–∫–æ–≤—ñ –¥–∞–Ω—ñ –¥–ª—è –ø—ñ–¥–≤–∏—â–µ–Ω–Ω—è –ø—Ä–∏–≤—ñ–ª–µ—ó–≤:

{% content-ref url="../gcp-post-exploitation/gcp-filestore-post-exploitation.md" %}
[gcp-filestore-post-exploitation.md](../gcp-post-exploitation/gcp-filestore-post-exploitation.md)
{% endcontent-ref %}

### –ü–æ—Å—Ç—ñ–π–Ω—ñ—Å—Ç—å

{% content-ref url="../gcp-persistence/gcp-filestore-persistence.md" %}
[gcp-filestore-persistence.md](../gcp-persistence/gcp-filestore-persistence.md)
{% endcontent-ref %}

{% hint style="success" %}
–í–∏–≤—á–∞–π—Ç–µ —Ç–∞ –ø—Ä–∞–∫—Ç–∏–∫—É–π—Ç–µ Hacking AWS:<img src="../../../.gitbook/assets/image (1) (1).png" alt="" data-size="line">[**HackTricks Training AWS Red Team Expert (ARTE)**](https://training.hacktricks.xyz/courses/arte)<img src="../../../.gitbook/assets/image (1) (1).png" alt="" data-size="line">\
–í–∏–≤—á–∞–π—Ç–µ —Ç–∞ –ø—Ä–∞–∫—Ç–∏–∫—É–π—Ç–µ Hacking GCP: <img src="../../../.gitbook/assets/image (2).png" alt="" data-size="line">[**HackTricks Training GCP Red Team Expert (GRTE)**<img src="../../../.gitbook/assets/image (2).png" alt="" data-size="line">](https://training.hacktricks.xyz/courses/grte)

<details>

<summary>–ü—ñ–¥—Ç—Ä–∏–º–∞–π—Ç–µ HackTricks</summary>

* –ü–µ—Ä–µ–≤—ñ—Ä—Ç–µ [**–ø–ª–∞–Ω–∏ –ø—ñ–¥–ø–∏—Å–∫–∏**](https://github.com/sponsors/carlospolop)!
* **–ü—Ä–∏—î–¥–Ω—É–π—Ç–µ—Å—å –¥–æ** üí¨ [**–≥—Ä—É–ø–∏ Discord**](https://discord.gg/hRep4RUj7f) –∞–±–æ [**–≥—Ä—É–ø–∏ Telegram**](https://t.me/peass) –∞–±–æ **—Å–ª—ñ–¥–∫—É–π—Ç–µ** –∑–∞ –Ω–∞–º–∏ –≤ **Twitter** üê¶ [**@hacktricks\_live**](https://twitter.com/hacktricks\_live)**.**
* **–î—ñ–ª—ñ—Ç—å—Å—è —Ç—Ä—é–∫–∞–º–∏ —Ö–∞–∫—ñ–Ω–≥—É, –Ω–∞–¥—Å–∏–ª–∞—é—á–∏ PR –¥–æ** [**HackTricks**](https://github.com/carlospolop/hacktricks) —Ç–∞ [**HackTricks Cloud**](https://github.com/carlospolop/hacktricks-cloud) —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä—ñ—ó–≤ –Ω–∞ github.

</details>
{% endhint %}
