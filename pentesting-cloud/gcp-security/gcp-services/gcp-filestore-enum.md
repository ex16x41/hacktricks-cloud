# GCP - Filestore Enum

{% hint style="success" %}
Learn & practice AWS Hacking:<img src="../../../.gitbook/assets/image (1).png" alt="" data-size="line">[**HackTricks Training AWS Red Team Expert (ARTE)**](https://training.hacktricks.xyz/courses/arte)<img src="../../../.gitbook/assets/image (1).png" alt="" data-size="line">\
Learn & practice GCP Hacking: <img src="../../../.gitbook/assets/image (2).png" alt="" data-size="line">[**HackTricks Training GCP Red Team Expert (GRTE)**<img src="../../../.gitbook/assets/image (2).png" alt="" data-size="line">](https://training.hacktricks.xyz/courses/grte)

<details>

<summary>Support HackTricks</summary>

* Check the [**subscription plans**](https://github.com/sponsors/carlospolop)!
* **Join the** ЁЯТм [**Discord group**](https://discord.gg/hRep4RUj7f) or the [**telegram group**](https://t.me/peass) or **follow** us on **Twitter** ЁЯРж [**@hacktricks\_live**](https://twitter.com/hacktricks\_live)**.**
* **Share hacking tricks by submitting PRs to the** [**HackTricks**](https://github.com/carlospolop/hacktricks) and [**HackTricks Cloud**](https://github.com/carlospolop/hacktricks-cloud) github repos.

</details>
{% endhint %}

## Basic Information

Google Cloud Filestore рдПрдХ **рдкреНрд░рдмрдВрдзрд┐рдд рдлрд╝рд╛рдЗрд▓ рднрдВрдбрд╛рд░рдг рд╕реЗрд╡рд╛** рд╣реИ рдЬреЛ рдЙрди рдЕрдиреБрдкреНрд░рдпреЛрдЧреЛрдВ рдХреЗ рд▓рд┐рдП рддреИрдпрд╛рд░ рдХреА рдЧрдИ рд╣реИ рдЬрд┐рдиреНрд╣реЗрдВ **рдлрд╝рд╛рдЗрд▓ рд╕рд┐рд╕реНрдЯрдо рдЗрдВрдЯрд░рдлрд╝реЗрд╕ рдФрд░ рдбреЗрдЯрд╛ рдХреЗ рд▓рд┐рдП рд╕рд╛рдЭрд╛ рдлрд╝рд╛рдЗрд▓ рд╕рд┐рд╕реНрдЯрдо** рдХреА рдЖрд╡рд╢реНрдпрдХрддрд╛ рд╣реЛрддреА рд╣реИред рдпрд╣ рд╕реЗрд╡рд╛ рдЙрдЪреНрдЪ-рдкреНрд░рджрд░реНрд╢рди рдлрд╝рд╛рдЗрд▓ рд╢реЗрдпрд░ рдкреНрд░рджрд╛рди рдХрд░рдХреЗ рдЙрддреНрдХреГрд╖реНрдЯрддрд╛ рдкреНрд░рд╛рдкреНрдд рдХрд░рддреА рд╣реИ, рдЬрд┐рд╕реЗ рд╡рд┐рднрд┐рдиреНрди GCP рд╕реЗрд╡рд╛рдУрдВ рдХреЗ рд╕рд╛рде рдПрдХреАрдХреГрдд рдХрд┐рдпрд╛ рдЬрд╛ рд╕рдХрддрд╛ рд╣реИред рдЗрд╕рдХреА рдЙрдкрдпреЛрдЧрд┐рддрд╛ рдЙрди рдкрд░рд┐рджреГрд╢реНрдпреЛрдВ рдореЗрдВ рдЪрдордХрддреА рд╣реИ рдЬрд╣рд╛рдВ рдкрд╛рд░рдВрдкрд░рд┐рдХ рдлрд╝рд╛рдЗрд▓ рд╕рд┐рд╕реНрдЯрдо рдЗрдВрдЯрд░рдлрд╝реЗрд╕ рдФрд░ рдЕрд░реНрдерд╢рд╛рд╕реНрддреНрд░ рдорд╣рддреНрд╡рдкреВрд░реНрдг рд╣реЛрддреЗ рд╣реИрдВ, рдЬреИрд╕реЗ рдХрд┐ рдореАрдбрд┐рдпрд╛ рдкреНрд░реЛрд╕реЗрд╕рд┐рдВрдЧ, рд╕рд╛рдордЧреНрд░реА рдкреНрд░рдмрдВрдзрди, рдФрд░ рдбреЗрдЯрд╛рдмреЗрд╕ рдХрд╛ рдмреИрдХрдЕрдкред

рдЖрдк рдЗрд╕реЗ рдХрд┐рд╕реА рдЕрдиреНрдп **NFS** **рд╕рд╛рдЭрд╛ рджрд╕реНрддрд╛рд╡реЗрдЬрд╝ рднрдВрдбрд╛рд░** рдХреЗ рд░реВрдк рдореЗрдВ рд╕реЛрдЪ рд╕рдХрддреЗ рд╣реИрдВ - рд╕рдВрд╡реЗрджрдирд╢реАрд▓ рдЬрд╛рдирдХрд╛рд░реА рдХрд╛ рдПрдХ рд╕рдВрднрд╛рд╡рд┐рдд рд╕реНрд░реЛрддред

### Connections

рдЬрдм рдЖрдк рдПрдХ Filestore рдЙрджрд╛рд╣рд░рдг рдмрдирд╛рддреЗ рд╣реИрдВ, рддреЛ рдпрд╣ **рдиреЗрдЯрд╡рд░реНрдХ рдХрд╛ рдЪрдпрди рдХрд░рдирд╛ рд╕рдВрднрд╡ рд╣реИ рдЬрд╣рд╛рдВ рдпрд╣ рд╕реБрд▓рдн рд╣реЛрдЧрд╛**ред

рдЗрд╕рдХреЗ рдЕрд▓рд╛рд╡рд╛, **рдбрд┐рдлрд╝реЙрд▓реНрдЯ рд░реВрдк рд╕реЗ рдЪрдпрдирд┐рдд VPC рдиреЗрдЯрд╡рд░реНрдХ рдФрд░ рдХреНрд╖реЗрддреНрд░ рдкрд░ рд╕рднреА рдХреНрд▓рд╛рдЗрдВрдЯ рдЗрд╕реЗ рдПрдХреНрд╕реЗрд╕ рдХрд░ рд╕рдХреЗрдВрдЧреЗ**, рд╣рд╛рд▓рд╛рдБрдХрд┐, рдпрд╣ **IP рдкрддреЗ** рдпрд╛ рд░реЗрдВрдЬ рджреНрд╡рд╛рд░рд╛ рдПрдХреНрд╕реЗрд╕ рдХреЛ **рд╕реАрдорд┐рдд рдХрд░рдирд╛ рднреА рд╕рдВрднрд╡ рд╣реИ** рдФрд░ рдпрд╣ рдирд┐рд░реНрджрд┐рд╖реНрдЯ рдХрд░рдирд╛ рдХрд┐ рдХреНрд▓рд╛рдЗрдВрдЯ рдХреЛ **IP рдкрддреЗ рдХреЗ рдЖрдзрд╛рд░ рдкрд░ рдПрдХреНрд╕реЗрд╕ рд╡рд┐рд╢реЗрд╖рд╛рдзрд┐рдХрд╛рд░ (Admin, Admin Viewer, Editor, Viewer)** рдХреНрдпрд╛ рдорд┐рд▓реЗрдЧрд╛ред

рдпрд╣ **рдкреНрд░рд╛рдЗрд╡реЗрдЯ рд╕рд░реНрд╡рд┐рд╕ рдПрдХреНрд╕реЗрд╕ рдХрдиреЗрдХреНрд╢рди** рдХреЗ рдорд╛рдзреНрдпрдо рд╕реЗ рднреА рд╕реБрд▓рдн рд╣реЛ рд╕рдХрддрд╛ рд╣реИ:

* рдпреЗ VPC рдиреЗрдЯрд╡рд░реНрдХ рдХреЗ рдЕрдиреБрд╕рд╛рд░ рд╣реИрдВ рдФрд░ рд╕рднреА рдкреНрд░рдмрдВрдзрд┐рдд рд╕реЗрд╡рд╛рдУрдВ рдЬреИрд╕реЗ Memorystore, Tensorflow рдФрд░ SQL рдХреЗ рдмреАрдЪ рдЙрдкрдпреЛрдЧ рдХрд┐рдП рдЬрд╛ рд╕рдХрддреЗ рд╣реИрдВред
* рдпреЗ **рдЖрдкрдХреЗ VPC рдиреЗрдЯрд╡рд░реНрдХ рдФрд░ Google рджреНрд╡рд╛рд░рд╛ рд╕реНрд╡рд╛рдорд┐рддреНрд╡ рд╡рд╛рд▓реЗ рдиреЗрдЯрд╡рд░реНрдХ рдХреЗ рдмреАрдЪ VPC рдкреАрдпрд░рд┐рдВрдЧ** рдХрд╛ рдЙрдкрдпреЛрдЧ рдХрд░рддреЗ рд╣реИрдВ, рдЬрд┐рд╕рд╕реЗ рдЖрдкрдХреЗ рдЙрджрд╛рд╣рд░рдг рдФрд░ рд╕реЗрд╡рд╛рдПрдБ рдХреЗрд╡рд▓ **рдЖрдВрддрд░рд┐рдХ IP рдкрддреЗ** рдХрд╛ рдЙрдкрдпреЛрдЧ рдХрд░рдХреЗ рд╕рдВрд╡рд╛рдж рдХрд░ рд╕рдХреЗрдВред
* рд╕реЗрд╡рд╛-рдЙрддреНрдкрд╛рджрдХ рдкрдХреНрд╖ рдкрд░ рдЖрдкрдХреЗ рд▓рд┐рдП рдПрдХ рдЕрд▓рдЧ рдкрд░рд┐рдпреЛрдЬрдирд╛ рдмрдирд╛рдПрдВ, рдЬрд┐рд╕рдХрд╛ рдЕрд░реНрде рд╣реИ рдХрд┐ рдХреЛрдИ рдЕрдиреНрдп рдЧреНрд░рд╛рд╣рдХ рдЗрд╕реЗ рд╕рд╛рдЭрд╛ рдирд╣реАрдВ рдХрд░рддрд╛ред рдЖрдкрдХреЛ рдХреЗрд╡рд▓ рдЙрди рд╕рдВрд╕рд╛рдзрдиреЛрдВ рдХреЗ рд▓рд┐рдП рдмрд┐рд▓ рдХрд┐рдпрд╛ рдЬрд╛рдПрдЧрд╛ рдЬреЛ рдЖрдк рдкреНрд░рд╛рд╡рдзрд╛рди рдХрд░рддреЗ рд╣реИрдВред
* VPC рдкреАрдпрд░рд┐рдВрдЧ рдЖрдкрдХреЗ VPC рдореЗрдВ рдирдП рдорд╛рд░реНрдЧреЛрдВ рдХреЛ рдЖрдпрд╛рдд рдХрд░реЗрдЧрд╛ред

### Backups

**рдлрд╝рд╛рдЗрд▓ рд╢реЗрдпрд░реЛрдВ рдХреЗ рдмреИрдХрдЕрдк** рдмрдирд╛рдирд╛ рд╕рдВрднрд╡ рд╣реИред рдЗрдиреНрд╣реЗрдВ рдмрд╛рдж рдореЗрдВ **рдореВрд▓** рдирдП рдлрд╝рд╛рдЗрд▓ рд╢реЗрдпрд░ рдЙрджрд╛рд╣рд░рдг рдореЗрдВ рдпрд╛ **рдирдП** рдореЗрдВ **рдкреБрдирд░реНрд╕реНрдерд╛рдкрд┐рдд** рдХрд┐рдпрд╛ рдЬрд╛ рд╕рдХрддрд╛ рд╣реИред

### Encryption

рдбрд┐рдлрд╝реЙрд▓реНрдЯ рд░реВрдк рд╕реЗ **Google-рдкреНрд░рдмрдВрдзрд┐рдд рдПрдиреНрдХреНрд░рд┐рдкреНрд╢рди рдХреБрдВрдЬреА** рдХрд╛ рдЙрдкрдпреЛрдЧ рдбреЗрдЯрд╛ рдХреЛ рдПрдиреНрдХреНрд░рд┐рдкреНрдЯ рдХрд░рдиреЗ рдХреЗ рд▓рд┐рдП рдХрд┐рдпрд╛ рдЬрд╛рдПрдЧрд╛, рд▓реЗрдХрд┐рди **рдЧреНрд░рд╛рд╣рдХ-рдкреНрд░рдмрдВрдзрд┐рдд рдПрдиреНрдХреНрд░рд┐рдкреНрд╢рди рдХреБрдВрдЬреА (CMEK)** рдХрд╛ рдЪрдпрди рдХрд░рдирд╛ рд╕рдВрднрд╡ рд╣реИред

### Enumeration

рдпрджрд┐ рдЖрдк рдкрд░рд┐рдпреЛрдЬрдирд╛ рдореЗрдВ рдПрдХ рдлрд╝рд╛рдЗрд▓ рд╕реНрдЯреЛрд░ рдЙрдкрд▓рдмреНрдз рдкрд╛рддреЗ рд╣реИрдВ, рддреЛ рдЖрдк рдЗрд╕реЗ рдЕрдкрдиреЗ рд╕рдордЭреМрддрд╛ рдХрд┐рдП рдЧрдП рдХрдВрдкреНрдпреВрдЯ рдЙрджрд╛рд╣рд░рдг рд╕реЗ **рдорд╛рдЙрдВрдЯ** рдХрд░ рд╕рдХрддреЗ рд╣реИрдВред рдпрд╣ рджреЗрдЦрдиреЗ рдХреЗ рд▓рд┐рдП рдирд┐рдореНрдирд▓рд┐рдЦрд┐рдд рдХрдорд╛рдВрдб рдХрд╛ рдЙрдкрдпреЛрдЧ рдХрд░реЗрдВред

{% code overflow="wrap" %}
```bash
# Instances
gcloud filestore instances list # Check the IP address
gcloud filestore instances describe --zone <zone> <name> # Check IP and access restrictions

# Backups
gcloud filestore backups list
gcloud filestore backups describe --region <region> <backup>

# Search for NFS shares in a VPC subnet
sudo nmap -n -T5 -Pn -p 2049 --min-parallelism 100 --min-rate 1000 --open 10.99.160.2/20
```
{% endcode %}

{% hint style="danger" %}
рдзреНрдпрд╛рди рджреЗрдВ рдХрд┐ рдПрдХ filestore рд╕реЗрд╡рд╛ **рдЗрд╕рдХреЗ рд▓рд┐рдП рдмрдирд╛рдП рдЧрдП рдПрдХ рдкреВрд░реА рддрд░рд╣ рд╕реЗ рдирдП рдЙрдкрдиреЗрдЯрд╡рд░реНрдХ** рдореЗрдВ рд╣реЛ рд╕рдХрддреА рд╣реИ (рдПрдХ рдкреНрд░рд╛рдЗрд╡реЗрдЯ рд╕рд░реНрд╡рд┐рд╕ рдПрдХреНрд╕реЗрд╕ рдХрдиреЗрдХреНрд╢рди рдХреЗ рдЕрдВрджрд░, рдЬреЛ рдПрдХ **VPC рдкреАрдпрд░** рд╣реИ)ред\
рдЗрд╕рд▓рд┐рдП рдЖрдкрдХреЛ **VPC рдкреАрдпрд░реНрд╕ рдХреЛ рдПрдиреНрдпреВрдорд░реЗрдЯ** рдХрд░рдиреЗ рдХреА рдЖрд╡рд╢реНрдпрдХрддрд╛ рд╣реЛ рд╕рдХрддреА рд╣реИ рддрд╛рдХрд┐ рдЖрдк рдЙрди рдиреЗрдЯрд╡рд░реНрдХ рд░реЗрдВрдЬ рдкрд░ nmap рдЪрд▓рд╛ рд╕рдХреЗрдВред

{% code overflow="wrap" %}
```bash
# Get peerings
gcloud compute networks peerings list
# Get routes imported from a peering
gcloud compute networks peerings list-routes <peering-name> --network=<network-name> --region=<region> --direction=INCOMING
```
{% endcode %}
{% endhint %}

### рд╡рд┐рд╢реЗрд╖рд╛рдзрд┐рдХрд╛рд░ рд╡реГрджреНрдзрд┐ рдФрд░ рдкреЛрд╕реНрдЯ рд╢реЛрд╖рдг

GCP рдореЗрдВ рдЗрд╕ рд╕реЗрд╡рд╛ рдХрд╛ рд╕реАрдзреЗ рджреБрд░реБрдкрдпреЛрдЧ рдХрд░рдХреЗ рд╡рд┐рд╢реЗрд╖рд╛рдзрд┐рдХрд╛рд░ рдмрдврд╝рд╛рдиреЗ рдХреЗ рддрд░реАрдХреЗ рдирд╣реАрдВ рд╣реИрдВ, рд▓реЗрдХрд┐рди рдХреБрдЫ **рдкреЛрд╕реНрдЯ рд╢реЛрд╖рдг рддрдХрдиреАрдХреЛрдВ рдХрд╛ рдЙрдкрдпреЛрдЧ рдХрд░рдХреЗ рдбреЗрдЯрд╛ рддрдХ рдкрд╣реБрдВрдЪ рдкреНрд░рд╛рдкреНрдд рдХрд░рдирд╛ рд╕рдВрднрд╡ рд╣реИ** рдФрд░ рд╢рд╛рдпрдж рдЖрдк рдХреБрдЫ рдХреНрд░реЗрдбреЗрдВрд╢рд┐рдпрд▓реНрд╕ рдкрд╛ рд╕рдХрддреЗ рд╣реИрдВ рдЬреЛ рд╡рд┐рд╢реЗрд╖рд╛рдзрд┐рдХрд╛рд░ рдмрдврд╝рд╛рдиреЗ рдореЗрдВ рдорджрдж рдХрд░ рд╕рдХрддреЗ рд╣реИрдВ:

{% content-ref url="../gcp-post-exploitation/gcp-filestore-post-exploitation.md" %}
[gcp-filestore-post-exploitation.md](../gcp-post-exploitation/gcp-filestore-post-exploitation.md)
{% endcontent-ref %}

### рд╕реНрдерд┐рд░рддрд╛

{% content-ref url="../gcp-persistence/gcp-filestore-persistence.md" %}
[gcp-filestore-persistence.md](../gcp-persistence/gcp-filestore-persistence.md)
{% endcontent-ref %}

{% hint style="success" %}
AWS рд╣реИрдХрд┐рдВрдЧ рд╕реАрдЦреЗрдВ рдФрд░ рдЕрднреНрдпрд╛рд╕ рдХрд░реЗрдВ:<img src="../../../.gitbook/assets/image (1).png" alt="" data-size="line">[**HackTricks Training AWS Red Team Expert (ARTE)**](https://training.hacktricks.xyz/courses/arte)<img src="../../../.gitbook/assets/image (1).png" alt="" data-size="line">\
GCP рд╣реИрдХрд┐рдВрдЧ рд╕реАрдЦреЗрдВ рдФрд░ рдЕрднреНрдпрд╛рд╕ рдХрд░реЗрдВ: <img src="../../../.gitbook/assets/image (2).png" alt="" data-size="line">[**HackTricks Training GCP Red Team Expert (GRTE)**<img src="../../../.gitbook/assets/image (2).png" alt="" data-size="line">](https://training.hacktricks.xyz/courses/grte)

<details>

<summary>HackTricks рдХрд╛ рд╕рдорд░реНрдерди рдХрд░реЗрдВ</summary>

* [**рд╕рджрд╕реНрдпрддрд╛ рдпреЛрдЬрдирд╛рдУрдВ**](https://github.com/sponsors/carlospolop) рдХреА рдЬрд╛рдВрдЪ рдХрд░реЗрдВ!
* **рд╣рдорд╛рд░реЗ** ЁЯТм [**Discord рд╕рдореВрд╣**](https://discord.gg/hRep4RUj7f) рдпрд╛ [**рдЯреЗрд▓реАрдЧреНрд░рд╛рдо рд╕рдореВрд╣**](https://t.me/peass) рдореЗрдВ рд╢рд╛рдорд┐рд▓ рд╣реЛрдВ рдпрд╛ **рд╣рдореЗрдВ** **Twitter** ЁЯРж [**@hacktricks\_live**](https://twitter.com/hacktricks\_live)** рдкрд░ рдлреЙрд▓реЛ рдХрд░реЗрдВред**
* **рд╣реИрдХрд┐рдВрдЧ рдЯреНрд░рд┐рдХреНрд╕ рд╕рд╛рдЭрд╛ рдХрд░реЗрдВ рдФрд░** [**HackTricks**](https://github.com/carlospolop/hacktricks) рдФрд░ [**HackTricks Cloud**](https://github.com/carlospolop/hacktricks-cloud) рдЧрд┐рдЯрд╣рдм рд░рд┐рдкреЛрдЬрд┐рдЯрд░реА рдореЗрдВ PR рд╕рдмрдорд┐рдЯ рдХрд░реЗрдВред

</details>
{% endhint %}
