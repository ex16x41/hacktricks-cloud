# GCP Pentesting

{% hint style="success" %}
Learn & practice AWS Hacking:<img src="../../.gitbook/assets/image (1).png" alt="" data-size="line">[**HackTricks Training AWS Red Team Expert (ARTE)**](https://training.hacktricks.xyz/courses/arte)<img src="../../.gitbook/assets/image (1).png" alt="" data-size="line">\
Learn & practice GCP Hacking: <img src="../../.gitbook/assets/image (2).png" alt="" data-size="line">[**HackTricks Training GCP Red Team Expert (GRTE)**<img src="../../.gitbook/assets/image (2).png" alt="" data-size="line">](https://training.hacktricks.xyz/courses/grte)

<details>

<summary>Support HackTricks</summary>

* Check the [**subscription plans**](https://github.com/sponsors/carlospolop)!
* **Join the** ğŸ’¬ [**Discord group**](https://discord.gg/hRep4RUj7f) or the [**telegram group**](https://t.me/peass) or **follow** us on **Twitter** ğŸ¦ [**@hacktricks\_live**](https://twitter.com/hacktricks\_live)**.**
* **Share hacking tricks by submitting PRs to the** [**HackTricks**](https://github.com/carlospolop/hacktricks) and [**HackTricks Cloud**](https://github.com/carlospolop/hacktricks-cloud) github repos.

</details>
{% endhint %}

## Basic Information

**GCP** í™˜ê²½ì—ì„œ **íœí…ŒìŠ¤íŒ…**ì„ ì‹œì‘í•˜ê¸° ì „ì—, ì–´ë–»ê²Œ ì‘ë™í•˜ëŠ”ì§€ì— ëŒ€í•œ ëª‡ ê°€ì§€ **ê¸°ë³¸ ì‚¬í•­**ì„ ì•Œì•„ì•¼ í•©ë‹ˆë‹¤. ì´ëŠ” ë‹¹ì‹ ì´ ë¬´ì—‡ì„ í•´ì•¼ í•˜ëŠ”ì§€, ì˜ëª»ëœ êµ¬ì„±ì€ ì–´ë–»ê²Œ ì°¾ëŠ”ì§€, ê·¸ë¦¬ê³  ê·¸ê²ƒë“¤ì„ ì–´ë–»ê²Œ ì•…ìš©í•˜ëŠ”ì§€ ì´í•´í•˜ëŠ” ë° ë„ì›€ì´ ë©ë‹ˆë‹¤.

**ì¡°ì§** ê³„ì¸µ, **ê¶Œí•œ** ë° ê¸°íƒ€ ê¸°ë³¸ ê°œë…ì€ ë‹¤ìŒì—ì„œ ì„¤ëª…ë©ë‹ˆë‹¤:

{% content-ref url="gcp-basic-information/" %}
[gcp-basic-information](gcp-basic-information/)
{% endcontent-ref %}

## Labs to learn

* [https://gcpgoat.joshuajebaraj.com/](https://gcpgoat.joshuajebaraj.com/)
* [https://github.com/ine-labs/GCPGoat](https://github.com/ine-labs/GCPGoat)
* [https://github.com/lacioffi/GCP-pentest-lab/](https://github.com/lacioffi/GCP-pentest-lab/)
* [https://github.com/carlospolop/gcp\_privesc\_scripts](https://github.com/carlospolop/gcp\_privesc\_scripts)

## GCP Pentester/Red Team Methodology

GCP í™˜ê²½ì„ ê°ì‚¬í•˜ê¸° ìœ„í•´ì„œëŠ” ì–´ë–¤ **ì„œë¹„ìŠ¤ê°€ ì‚¬ìš©ë˜ê³  ìˆëŠ”ì§€**, ë¬´ì—‡ì´ **ë…¸ì¶œë˜ê³  ìˆëŠ”ì§€**, ëˆ„ê°€ ë¬´ì—‡ì— **ì ‘ê·¼í•  ìˆ˜ ìˆëŠ”ì§€**, ê·¸ë¦¬ê³  ë‚´ë¶€ GCP ì„œë¹„ìŠ¤ì™€ **ì™¸ë¶€ ì„œë¹„ìŠ¤**ê°€ ì–´ë–»ê²Œ ì—°ê²°ë˜ì–´ ìˆëŠ”ì§€ë¥¼ ì•„ëŠ” ê²ƒì´ ë§¤ìš° ì¤‘ìš”í•©ë‹ˆë‹¤.

Red Team ê´€ì ì—ì„œ, **GCP í™˜ê²½ì„ ì¹¨í•´í•˜ê¸° ìœ„í•œ ì²« ë²ˆì§¸ ë‹¨ê³„**ëŠ” ì¼ë¶€ **ìê²© ì¦ëª…**ì„ ì–»ëŠ” ê²ƒì…ë‹ˆë‹¤. ë‹¤ìŒì€ ì´ë¥¼ ìˆ˜í–‰í•˜ëŠ” ë°©ë²•ì— ëŒ€í•œ ëª‡ ê°€ì§€ ì•„ì´ë””ì–´ì…ë‹ˆë‹¤:

* github (ë˜ëŠ” ìœ ì‚¬í•œ ê³³)ì—ì„œì˜ **ìœ ì¶œ** - OSINT
* **ì‚¬íšŒì ** ê³µí•™ (í˜ì´ì§€ [**Workspace Security**](../workspace-security/) í™•ì¸)
* **ë¹„ë°€ë²ˆí˜¸** ì¬ì‚¬ìš© (ë¹„ë°€ë²ˆí˜¸ ìœ ì¶œ)
* GCP í˜¸ìŠ¤íŒ… ì• í”Œë¦¬ì¼€ì´ì…˜ì˜ ì·¨ì•½ì 
* [**ì„œë²„ ì¸¡ ìš”ì²­ ìœ„ì¡°**](https://book.hacktricks.xyz/pentesting-web/ssrf-server-side-request-forgery/cloud-ssrf) ë©”íƒ€ë°ì´í„° ì—”ë“œí¬ì¸íŠ¸ì— ëŒ€í•œ ì ‘ê·¼
* **ë¡œì»¬ íŒŒì¼ ì½ê¸°**
* `/home/USERNAME/.config/gcloud/*`
* `C:\Users\USERNAME\.config\gcloud\*`
* ì œ3ì **ì¹¨í•´**
* **ë‚´ë¶€** ì§ì›

ë˜ëŠ” **ì¸ì¦ë˜ì§€ ì•Šì€ ì„œë¹„ìŠ¤**ë¥¼ **ì¹¨í•´í•˜ì—¬**:

{% content-ref url="gcp-unauthenticated-enum-and-access/" %}
[gcp-unauthenticated-enum-and-access](gcp-unauthenticated-enum-and-access/)
{% endcontent-ref %}

ë˜ëŠ” **ê²€í† **ë¥¼ ìˆ˜í–‰í•˜ëŠ” ê²½ìš°, ë‹¤ìŒ ì—­í• ë¡œ **ìê²© ì¦ëª… ìš”ì²­**ì„ í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤:

{% content-ref url="gcp-permissions-for-a-pentest.md" %}
[gcp-permissions-for-a-pentest.md](gcp-permissions-for-a-pentest.md)
{% endcontent-ref %}

{% hint style="info" %}
ìê²© ì¦ëª…ì„ ì–»ì€ í›„, **ê·¸ ìê²© ì¦ëª…ì´ ëˆ„êµ¬ì—ê²Œ ì†í•˜ëŠ”ì§€**ì™€ **ê·¸ë“¤ì´ ë¬´ì—‡ì— ì ‘ê·¼í•  ìˆ˜ ìˆëŠ”ì§€** ì•Œì•„ì•¼ í•˜ë¯€ë¡œ, ê¸°ë³¸ì ì¸ ì—´ê±° ì‘ì—…ì„ ìˆ˜í–‰í•´ì•¼ í•©ë‹ˆë‹¤:
{% endhint %}

## Basic Enumeration

### **SSRF**

GCP ë©”íƒ€ë°ì´í„°ë¥¼ **ì—´ê±°í•˜ëŠ” ë°©ë²•**ì— ëŒ€í•œ ìì„¸í•œ ì •ë³´ëŠ” ë‹¤ìŒ HackTricks í˜ì´ì§€ë¥¼ í™•ì¸í•˜ì„¸ìš”:

{% embed url="https://book.hacktricks.xyz/pentesting-web/ssrf-server-side-request-forgery/cloud-ssrf#6440" %}

### Whoami

GCPì—ì„œëŠ” ìì‹ ì´ ëˆ„êµ¬ì¸ì§€ ì¶”ì¸¡í•˜ê¸° ìœ„í•´ ì—¬ëŸ¬ ì˜µì…˜ì„ ì‹œë„í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤:

{% code overflow="wrap" %}
```bash
#If you are inside a compromise machine
gcloud auth list
curl -H "Content-Type: application/x-www-form-urlencoded" -d "access_token=$(gcloud auth print-access-token)" https://www.googleapis.com/oauth2/v1/tokeninfo
gcloud auth print-identity-token #Get info from the token

#If you compromised a metadata token or somehow found an OAuth token
curl -H "Content-Type: application/x-www-form-urlencoded" -d "access_token=<token>" https://www.googleapis.com/oauth2/v1/tokeninfo
```
{% endcode %}

### ì¡°ì§ ì—´ê±°
```bash
# Get organizations
gcloud organizations list #The DIRECTORY_CUSTOMER_ID is the Workspace ID
gcloud resource-manager folders list --organization <org_number> # Get folders
gcloud projects list # Get projects
```
### Principals & IAM Enumeration

ì¶©ë¶„í•œ ê¶Œí•œì´ ìˆë‹¤ë©´, **GCP ê³„ì • ë‚´ ê° ì—”í„°í‹°ì˜ ê¶Œí•œì„ í™•ì¸í•˜ëŠ” ê²ƒ**ì€ ë‹¹ì‹ ê³¼ ë‹¤ë¥¸ ì•„ì´ë´í‹°í‹°ê°€ ë¬´ì—‡ì„ í•  ìˆ˜ ìˆëŠ”ì§€, ê·¸ë¦¬ê³  ì–´ë–»ê²Œ **ê¶Œí•œì„ ìƒìŠ¹ì‹œí‚¬ ìˆ˜ ìˆëŠ”ì§€** ì´í•´í•˜ëŠ” ë° ë„ì›€ì´ ë©ë‹ˆë‹¤.

IAMì„ ì—´ê±°í•  ì¶©ë¶„í•œ ê¶Œí•œì´ ì—†ë‹¤ë©´, **ë¬´ì°¨ë³„ ëŒ€ì… ê³µê²©ì„ í†µí•´** ì•Œì•„ë‚¼ ìˆ˜ ìˆìŠµë‹ˆë‹¤.\
**ì—´ê±° ë° ë¬´ì°¨ë³„ ëŒ€ì… ê³µê²©ì„ ìˆ˜í–‰í•˜ëŠ” ë°©ë²•**ì„ í™•ì¸í•˜ì„¸ìš”:

{% content-ref url="gcp-services/gcp-iam-and-org-policies-enum.md" %}
[gcp-iam-and-org-policies-enum.md](gcp-services/gcp-iam-and-org-policies-enum.md)
{% endcontent-ref %}

{% hint style="info" %}
ì´ì œ **ìì‹ ì˜ ìê²© ì¦ëª…ì— ëŒ€í•œ ì •ë³´ê°€ ìˆëŠ” ìƒíƒœ**ì…ë‹ˆë‹¤ (ê·¸ë¦¬ê³  ë ˆë“œ íŒ€ì´ë¼ë©´ **ë°œê²¬ë˜ì§€ ì•Šì•˜ê¸°ë¥¼ ë°”ëë‹ˆë‹¤**). í™˜ê²½ì—ì„œ ì‚¬ìš© ì¤‘ì¸ ì„œë¹„ìŠ¤ê°€ ë¬´ì—‡ì¸ì§€ íŒŒì•…í•  ì‹œê°„ì…ë‹ˆë‹¤.\
ë‹¤ìŒ ì„¹ì…˜ì—ì„œëŠ” **ì¼ë°˜ ì„œë¹„ìŠ¤ ì—´ê±° ë°©ë²•**ì„ í™•ì¸í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.
{% endhint %}

## Services Enumeration

GCPëŠ” ë†€ë¼ìš´ ì–‘ì˜ ì„œë¹„ìŠ¤ë¥¼ ì œê³µí•©ë‹ˆë‹¤. ë‹¤ìŒ í˜ì´ì§€ì—ì„œëŠ” **ê¸°ë³¸ ì •ë³´, ì—´ê±°** ì¹˜íŠ¸ ì‹œíŠ¸, **íƒì§€ë¥¼ í”¼í•˜ëŠ” ë°©ë²•**, **ì§€ì†ì„±** í™•ë³´ ë° ê¸°íƒ€ **ì‚¬í›„ í™œìš©** íŠ¸ë¦­ì— ëŒ€í•œ ì •ë³´ë¥¼ ì°¾ì„ ìˆ˜ ìˆìŠµë‹ˆë‹¤:

{% content-ref url="gcp-services/" %}
[gcp-services](gcp-services/)
{% endcontent-ref %}

ëª¨ë“  ì‘ì—…ì„ **ìˆ˜ë™ìœ¼ë¡œ** ìˆ˜í–‰í•  í•„ìš”ëŠ” ì—†ë‹¤ëŠ” ì ì— ìœ ì˜í•˜ì„¸ìš”. ì´ ê²Œì‹œë¬¼ ì•„ë˜ì—ì„œ [**ìë™ ë„êµ¬**](./#automatic-tools)ì— ëŒ€í•œ **ì„¹ì…˜**ì„ ì°¾ì„ ìˆ˜ ìˆìŠµë‹ˆë‹¤.

ë˜í•œ, ì´ ë‹¨ê³„ì—ì„œ **ì¸ì¦ë˜ì§€ ì•Šì€ ì‚¬ìš©ìì—ê²Œ ë…¸ì¶œëœ ë” ë§ì€ ì„œë¹„ìŠ¤**ë¥¼ ë°œê²¬í–ˆì„ ìˆ˜ ìˆìœ¼ë©°, ì´ë¥¼ ì•…ìš©í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤:

{% content-ref url="gcp-unauthenticated-enum-and-access/" %}
[gcp-unauthenticated-enum-and-access](gcp-unauthenticated-enum-and-access/)
{% endcontent-ref %}

## Privilege Escalation, Post Exploitation & Persistence

í´ë¼ìš°ë“œ ìê²© ì¦ëª…ì„ ì–»ê±°ë‚˜ í´ë¼ìš°ë“œ ë‚´ì—ì„œ ì‹¤í–‰ ì¤‘ì¸ ì„œë¹„ìŠ¤ë¥¼ ì†ìƒì‹œí‚¨ í›„ ê°€ì¥ ì¼ë°˜ì ì¸ ë°©ë²•ì€ **ì˜ëª» êµ¬ì„±ëœ ê¶Œí•œì„ ì•…ìš©í•˜ëŠ” ê²ƒ**ì…ë‹ˆë‹¤. ë”°ë¼ì„œ ê°€ì¥ ë¨¼ì € í•´ì•¼ í•  ì¼ì€ ìì‹ ì˜ ê¶Œí•œì„ ì—´ê±°í•˜ëŠ” ê²ƒì…ë‹ˆë‹¤.

ë˜í•œ, ì´ ì—´ê±° ê³¼ì •ì—ì„œ **"ì¡°ì§"**ì˜ ê°€ì¥ ë†’ì€ ìˆ˜ì¤€ì—ì„œ ê¶Œí•œì´ ì„¤ì •ë  ìˆ˜ ìˆë‹¤ëŠ” ì ì„ ê¸°ì–µí•˜ì„¸ìš”.

{% content-ref url="gcp-privilege-escalation/" %}
[gcp-privilege-escalation](gcp-privilege-escalation/)
{% endcontent-ref %}

{% content-ref url="gcp-post-exploitation/" %}
[gcp-post-exploitation](gcp-post-exploitation/)
{% endcontent-ref %}

{% content-ref url="gcp-persistence/" %}
[gcp-persistence](gcp-persistence/)
{% endcontent-ref %}

### Publicly Exposed Services

GCP ì„œë¹„ìŠ¤ë¥¼ ì—´ê±°í•˜ëŠ” ë™ì•ˆ ì¼ë¶€ ì„œë¹„ìŠ¤ê°€ **ì¸í„°ë„·ì— ìš”ì†Œë¥¼ ë…¸ì¶œí•˜ê³  ìˆëŠ” ê²ƒì„ ë°œê²¬í–ˆì„ ìˆ˜ ìˆìŠµë‹ˆë‹¤** (VM/ì»¨í…Œì´ë„ˆ í¬íŠ¸, ë°ì´í„°ë² ì´ìŠ¤ ë˜ëŠ” í ì„œë¹„ìŠ¤, ìŠ¤ëƒ…ìƒ· ë˜ëŠ” ë²„í‚·...).\
íœí…ŒìŠ¤í„°/ë ˆë“œ íŒ€ì›ìœ¼ë¡œì„œ í•­ìƒ **ë¯¼ê°í•œ ì •ë³´/ì·¨ì•½ì **ì„ ì°¾ì„ ìˆ˜ ìˆëŠ”ì§€ í™•ì¸í•´ì•¼ í•©ë‹ˆë‹¤. ì´ëŠ” **AWS ê³„ì •ì— ëŒ€í•œ ì¶”ê°€ ì ‘ê·¼ì„ ì œê³µí•  ìˆ˜ ìˆìŠµë‹ˆë‹¤**.

ì´ ì±…ì—ì„œëŠ” **ë…¸ì¶œëœ GCP ì„œë¹„ìŠ¤ ì°¾ê¸° ë° í™•ì¸ ë°©ë²•**ì— ëŒ€í•œ **ì •ë³´**ë¥¼ ì°¾ì„ ìˆ˜ ìˆìŠµë‹ˆë‹¤. **ë…¸ì¶œëœ ë„¤íŠ¸ì›Œí¬ ì„œë¹„ìŠ¤ì˜ ì·¨ì•½ì **ì„ ì°¾ëŠ” ë°©ë²•ì— ëŒ€í•´ì„œëŠ” íŠ¹ì • **ì„œë¹„ìŠ¤**ë¥¼ ê²€ìƒ‰í•  ê²ƒì„ ê¶Œì¥í•©ë‹ˆë‹¤:

{% embed url="https://book.hacktricks.xyz/" %}

## GCP <--> Workspace Pivoting

**í•˜ë‚˜ì˜** í”Œë«í¼ì—ì„œ **ì£¼ì²´ë¥¼ ì†ìƒì‹œí‚¤ëŠ” ê²ƒ**ì€ ê³µê²©ìê°€ **ë‹¤ë¥¸ í”Œë«í¼ì„ ì†ìƒì‹œí‚¬ ìˆ˜ ìˆê²Œ í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤**, í™•ì¸í•˜ì„¸ìš”:

{% content-ref url="gcp-to-workspace-pivoting/" %}
[gcp-to-workspace-pivoting](gcp-to-workspace-pivoting/)
{% endcontent-ref %}

## Automatic Tools

* **GCloud ì½˜ì†”**ì—ì„œ [https://console.cloud.google.com/iam-admin/asset-inventory/dashboard](https://console.cloud.google.com/iam-admin/asset-inventory/dashboard) ë¥¼ í†µí•´ í”„ë¡œì íŠ¸ì—ì„œ ì‚¬ìš© ì¤‘ì¸ ë¦¬ì†ŒìŠ¤ì™€ IAMì„ ë³¼ ìˆ˜ ìˆìŠµë‹ˆë‹¤.
* ì´ APIì—ì„œ ì§€ì›í•˜ëŠ” ìì‚°ì„ í™•ì¸í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤: [https://cloud.google.com/asset-inventory/docs/supported-asset-types](https://cloud.google.com/asset-inventory/docs/supported-asset-types)
* [**ì—¬ê¸°ì—ì„œ ì—¬ëŸ¬ í´ë¼ìš°ë“œì—ì„œ ì‚¬ìš©í•  ìˆ˜ ìˆëŠ” ë„êµ¬**](../pentesting-cloud-methodology.md)ë¥¼ í™•ì¸í•˜ì„¸ìš”.
* [**gcp\_scanner**](https://github.com/google/gcp\_scanner): ì´ëŠ” GCPì—ì„œ íŠ¹ì • ìê²© ì¦ëª…ì´ **ì–´ë–¤ ìˆ˜ì¤€ì˜ ì ‘ê·¼ ê¶Œí•œì„ ê°€ì§€ê³  ìˆëŠ”ì§€** íŒë‹¨í•˜ëŠ” ë° ë„ì›€ì´ ë˜ëŠ” GCP ë¦¬ì†ŒìŠ¤ ìŠ¤ìºë„ˆì…ë‹ˆë‹¤.
```bash
# Install
git clone https://github.com/google/gcp_scanner.git
cd gcp_scanner
virtualenv -p python3 venv
source venv/bin/activate
pip install -r requirements.txt
# Execute with gcloud creds
python3 __main__.py -o /tmp/output/ -g "$HOME/.config/gcloud"
```
* [**gcp\_enum**](https://gitlab.com/gitlab-com/gl-security/threatmanagement/redteam/redteam-public/gcp\_enum): gcloud clië¥¼ ì‚¬ìš©í•˜ì—¬ GCP í™˜ê²½ì„ ì—´ê±°í•˜ê³  ê²°ê³¼ë¥¼ íŒŒì¼ì— ì €ì¥í•˜ëŠ” Bash ìŠ¤í¬ë¦½íŠ¸ì…ë‹ˆë‹¤.
* [**GCP-IAM-Privilege-Escalation**](https://github.com/RhinoSecurityLabs/GCP-IAM-Privilege-Escalation): ë†’ì€ IAM ê¶Œí•œì„ ì—´ê±°í•˜ê³  ì´ë¥¼ ì•…ìš©í•˜ì—¬ GCPì—ì„œ ê¶Œí•œì„ ìƒìŠ¹ì‹œí‚¤ëŠ” ìŠ¤í¬ë¦½íŠ¸ì…ë‹ˆë‹¤ (ì—´ê±° ìŠ¤í¬ë¦½íŠ¸ë¥¼ ì‹¤í–‰í•  ìˆ˜ ì—†ì—ˆìŠµë‹ˆë‹¤).
* [**BF My GCP Permissions**](https://github.com/carlospolop/bf\_my\_gcp\_permissions): ê¶Œí•œì„ ë¬´ì‘ìœ„ ëŒ€ì…í•˜ëŠ” ìŠ¤í¬ë¦½íŠ¸ì…ë‹ˆë‹¤.

## gcloud config & debug
```bash
# Login so gcloud can use your credentials
gcloud auth login
gcloud config set project security-devbox
gcloud auth print-access-token

# Login so SDKs can use your user credentials
gcloud auth application-default login
gcloud auth application-default set-quota-project security-devbox
gcloud auth application-default print-access-token

# Update gcloud
gcloud components update
```
### Capture gcloud, gsutil... network

**`gcloud`** CLIì™€ í•¨ê»˜ **`--log-http`** **ë§¤ê°œë³€ìˆ˜**ë¥¼ ì‚¬ìš©í•˜ì—¬ ë„êµ¬ê°€ ìˆ˜í–‰í•˜ëŠ” **ìš”ì²­**ì„ **ì¶œë ¥**í•  ìˆ˜ ìˆë‹¤ëŠ” ì ì„ ê¸°ì–µí•˜ì„¸ìš”. ë¡œê·¸ì—ì„œ í† í° ê°’ì„ ìˆ˜ì •í•˜ì§€ ì•Šìœ¼ë ¤ë©´ `gcloud config set log_http_redact_token false`ë¥¼ ì‚¬ìš©í•˜ì„¸ìš”.

ë˜í•œ, í†µì‹ ì„ ê°€ë¡œì±„ë ¤ë©´:
```bash
gcloud config set proxy/address 127.0.0.1
gcloud config set proxy/port 8080
gcloud config set proxy/type http
gcloud config set auth/disable_ssl_validation True

# If you don't want to completely disable ssl_validation use:
gcloud config set core/custom_ca_certs_file cert.pem

# Back to normal
gcloud config unset proxy/address
gcloud config unset proxy/port
gcloud config unset proxy/type
gcloud config unset auth/disable_ssl_validation
gcloud config unset core/custom_ca_certs_file
```
### OAuth í† í°ì„ gcloudì—ì„œ êµ¬ì„±í•˜ê¸°

**ë©”íƒ€ë°ì´í„° ì—”ë“œí¬ì¸íŠ¸ì—ì„œ ìœ ì¶œëœ ì„œë¹„ìŠ¤ ê³„ì • OAuth í† í°ì„ ì‚¬ìš©í•˜ê¸° ìœ„í•´** ë‹¤ìŒê³¼ ê°™ì´ í•˜ë©´ ë©ë‹ˆë‹¤:
```bash
# Via env vars
export CLOUDSDK_AUTH_ACCESS_TOKEN=<token>
gcloud projects list

# Via setup
echo "<token>" > /some/path/to/token
gcloud config set auth/access_token_file /some/path/to/token
gcloud projects list
gcloud config unset auth/access_token_file
```
## References

* [https://about.gitlab.com/blog/2020/02/12/plundering-gcp-escalating-privileges-in-google-cloud-platform/](https://about.gitlab.com/blog/2020/02/12/plundering-gcp-escalating-privileges-in-google-cloud-platform/)

{% hint style="success" %}
AWS í•´í‚¹ ë°°ìš°ê¸° ë° ì—°ìŠµí•˜ê¸°:<img src="../../.gitbook/assets/image (1).png" alt="" data-size="line">[**HackTricks Training AWS Red Team Expert (ARTE)**](https://training.hacktricks.xyz/courses/arte)<img src="../../.gitbook/assets/image (1).png" alt="" data-size="line">\
GCP í•´í‚¹ ë°°ìš°ê¸° ë° ì—°ìŠµí•˜ê¸°: <img src="../../.gitbook/assets/image (2).png" alt="" data-size="line">[**HackTricks Training GCP Red Team Expert (GRTE)**<img src="../../.gitbook/assets/image (2).png" alt="" data-size="line">](https://training.hacktricks.xyz/courses/grte)

<details>

<summary>HackTricks ì§€ì›í•˜ê¸°</summary>

* [**êµ¬ë… ê³„íš**](https://github.com/sponsors/carlospolop) í™•ì¸í•˜ê¸°!
* **ğŸ’¬ [**Discord ê·¸ë£¹**](https://discord.gg/hRep4RUj7f) ë˜ëŠ” [**í…”ë ˆê·¸ë¨ ê·¸ë£¹**](https://t.me/peass)ì— ì°¸ì—¬í•˜ê±°ë‚˜ **Twitter** ğŸ¦ [**@hacktricks\_live**](https://twitter.com/hacktricks\_live)**ë¥¼ íŒ”ë¡œìš°í•˜ì„¸ìš”.**
* **[**HackTricks**](https://github.com/carlospolop/hacktricks) ë° [**HackTricks Cloud**](https://github.com/carlospolop/hacktricks-cloud) ê¹ƒí—ˆë¸Œ ë¦¬í¬ì§€í† ë¦¬ì— PRì„ ì œì¶œí•˜ì—¬ í•´í‚¹ íŒì„ ê³µìœ í•˜ì„¸ìš”.**

</details>
{% endhint %}
