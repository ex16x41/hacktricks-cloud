# GCP - Deploymentmaneger Privesc

{% hint style="success" %}
å­¦ä¹ å’Œå®è·µ AWS é»‘å®¢æŠ€æœ¯ï¼š<img src="../../../.gitbook/assets/image (1).png" alt="" data-size="line">[**HackTricks åŸ¹è®­ AWS çº¢é˜Ÿä¸“å®¶ (ARTE)**](https://training.hacktricks.xyz/courses/arte)<img src="../../../.gitbook/assets/image (1).png" alt="" data-size="line">\
å­¦ä¹ å’Œå®è·µ GCP é»‘å®¢æŠ€æœ¯ï¼š<img src="../../../.gitbook/assets/image (2).png" alt="" data-size="line">[**HackTricks åŸ¹è®­ GCP çº¢é˜Ÿä¸“å®¶ (GRTE)**<img src="../../../.gitbook/assets/image (2).png" alt="" data-size="line">](https://training.hacktricks.xyz/courses/grte)

<details>

<summary>æ”¯æŒ HackTricks</summary>

* æŸ¥çœ‹ [**è®¢é˜…è®¡åˆ’**](https://github.com/sponsors/carlospolop)!
* **åŠ å…¥** ğŸ’¬ [**Discord ç¾¤ç»„**](https://discord.gg/hRep4RUj7f) æˆ– [**ç”µæŠ¥ç¾¤ç»„**](https://t.me/peass) æˆ– **åœ¨** **Twitter** ğŸ¦ [**@hacktricks\_live**](https://twitter.com/hacktricks\_live)** ä¸Šå…³æ³¨æˆ‘ä»¬ã€‚**
* **é€šè¿‡å‘** [**HackTricks**](https://github.com/carlospolop/hacktricks) å’Œ [**HackTricks Cloud**](https://github.com/carlospolop/hacktricks-cloud) github ä»“åº“æäº¤ PR åˆ†äº«é»‘å®¢æŠ€å·§ã€‚

</details>
{% endhint %}

## deploymentmanager

### `deploymentmanager.deployments.create`

æ­¤å•ä¸€æƒé™å…è®¸æ‚¨ **åœ¨ GCP ä¸­å¯åŠ¨æ–°èµ„æºçš„éƒ¨ç½²**ï¼Œä½¿ç”¨ä»»æ„æœåŠ¡è´¦æˆ·ã€‚ä¾‹å¦‚ï¼Œæ‚¨å¯ä»¥å¯åŠ¨ä¸€ä¸ªè®¡ç®—å®ä¾‹å¹¶ä½¿ç”¨ SA è¿›è¡Œæƒé™æå‡ã€‚

æ‚¨å®é™…ä¸Šå¯ä»¥ **å¯åŠ¨ä»»ä½•èµ„æº**ï¼Œè¯¥èµ„æºåœ¨ `gcloud deployment-manager types list` ä¸­åˆ—å‡ºã€‚

åœ¨ [**åŸå§‹ç ”ç©¶**](https://rhinosecuritylabs.com/gcp/privilege-escalation-google-cloud-platform-part-1/) ä¸­ï¼Œä½¿ç”¨ä»¥ä¸‹ [**è„šæœ¬**](https://github.com/RhinoSecurityLabs/GCP-IAM-Privilege-Escalation/blob/master/ExploitScripts/deploymentmanager.deployments.create.py) æ¥éƒ¨ç½²è®¡ç®—å®ä¾‹ï¼Œä½†è¯¥è„šæœ¬å°†æ— æ³•å·¥ä½œã€‚æŸ¥çœ‹ä¸€ä¸ªè„šæœ¬ä»¥è‡ªåŠ¨åŒ– [**åˆ›å»ºã€åˆ©ç”¨å’Œæ¸…ç†æ¼æ´ç¯å¢ƒ**](https://github.com/carlospolop/gcp\_privesc\_scripts/blob/main/tests/1-deploymentmanager.deployments.create.sh)**ã€‚**

### `deploymentmanager.deployments.update`

è¿™ç±»ä¼¼äºä¹‹å‰çš„æ»¥ç”¨ï¼Œä½†ä¸æ˜¯åˆ›å»ºæ–°çš„éƒ¨ç½²ï¼Œè€Œæ˜¯ä¿®æ”¹ä¸€ä¸ªå·²ç»å­˜åœ¨çš„ï¼ˆæ‰€ä»¥è¦å°å¿ƒï¼‰ã€‚

æŸ¥çœ‹ä¸€ä¸ªè„šæœ¬ä»¥è‡ªåŠ¨åŒ– [**åˆ›å»ºã€åˆ©ç”¨å’Œæ¸…ç†æ¼æ´ç¯å¢ƒ**](https://github.com/carlospolop/gcp\_privesc\_scripts/blob/main/tests/e-deploymentmanager.deployments.update.sh)**ã€‚**

### `deploymentmanager.deployments.setIamPolicy`

è¿™ç±»ä¼¼äºä¹‹å‰çš„æ»¥ç”¨ï¼Œä½†ä¸æ˜¯ç›´æ¥åˆ›å»ºæ–°çš„éƒ¨ç½²ï¼Œè€Œæ˜¯å…ˆæˆäºˆæ‚¨è¯¥è®¿é—®æƒé™ï¼Œç„¶åå¦‚å‰é¢ _deploymentmanager.deployments.create_ éƒ¨åˆ†æ‰€è¿°æ»¥ç”¨è¯¥æƒé™ã€‚

## References

* [https://rhinosecuritylabs.com/gcp/privilege-escalation-google-cloud-platform-part-1/](https://rhinosecuritylabs.com/gcp/privilege-escalation-google-cloud-platform-part-1/)

{% hint style="success" %}
å­¦ä¹ å’Œå®è·µ AWS é»‘å®¢æŠ€æœ¯ï¼š<img src="../../../.gitbook/assets/image (1).png" alt="" data-size="line">[**HackTricks åŸ¹è®­ AWS çº¢é˜Ÿä¸“å®¶ (ARTE)**](https://training.hacktricks.xyz/courses/arte)<img src="../../../.gitbook/assets/image (1).png" alt="" data-size="line">\
å­¦ä¹ å’Œå®è·µ GCP é»‘å®¢æŠ€æœ¯ï¼š<img src="../../../.gitbook/assets/image (2).png" alt="" data-size="line">[**HackTricks åŸ¹è®­ GCP çº¢é˜Ÿä¸“å®¶ (GRTE)**<img src="../../../.gitbook/assets/image (2).png" alt="" data-size="line">](https://training.hacktricks.xyz/courses/grte)

<details>

<summary>æ”¯æŒ HackTricks</summary>

* æŸ¥çœ‹ [**è®¢é˜…è®¡åˆ’**](https://github.com/sponsors/carlospolop)!
* **åŠ å…¥** ğŸ’¬ [**Discord ç¾¤ç»„**](https://discord.gg/hRep4RUj7f) æˆ– [**ç”µæŠ¥ç¾¤ç»„**](https://t.me/peass) æˆ– **åœ¨** **Twitter** ğŸ¦ [**@hacktricks\_live**](https://twitter.com/hacktricks\_live)** ä¸Šå…³æ³¨æˆ‘ä»¬ã€‚**
* **é€šè¿‡å‘** [**HackTricks**](https://github.com/carlospolop/hacktricks) å’Œ [**HackTricks Cloud**](https://github.com/carlospolop/hacktricks-cloud) github ä»“åº“æäº¤ PR åˆ†äº«é»‘å®¢æŠ€å·§ã€‚

</details>
{% endhint %}
