# GCP - Eskalacija privilegija putem kori코캖enja usluga

{% hint style="success" %}
Nau캜ite i ve쬭ajte hakovanje AWS-a: <img src="/.gitbook/assets/image.png" alt="" data-size="line">[**HackTricks Training AWS Red Team Expert (ARTE)**](https://training.hacktricks.xyz/courses/arte)<img src="/.gitbook/assets/image.png" alt="" data-size="line">\
Nau캜ite i ve쬭ajte hakovanje GCP-a: <img src="/.gitbook/assets/image (2).png" alt="" data-size="line">[**HackTricks Training GCP Red Team Expert (GRTE)**<img src="/.gitbook/assets/image (2).png" alt="" data-size="line">](https://training.hacktricks.xyz/courses/grte)

<details>

<summary>Podr쬴te HackTricks</summary>

* Proverite [**planove pretplate**](https://github.com/sponsors/carlospolop)!
* **Pridru쬴te se** 游눫 [**Discord grupi**](https://discord.gg/hRep4RUj7f) ili [**telegram grupi**](https://t.me/peass) ili nas **pratite** na **Twitteru** 游냕 [**@hacktricks\_live**](https://twitter.com/hacktricks\_live)**.**
* **Podelite hakovanje trikova slanjem PR-ova na** [**HackTricks**](https://github.com/carlospolop/hacktricks) i [**HackTricks Cloud**](https://github.com/carlospolop/hacktricks-cloud) github repozitorijume.

</details>
{% endhint %}

## serviceusage

Slede캖e dozvole su korisne za kreiranje i kra캠u API klju캜eva, ne ovih iz dokumenata: _API klju캜 je jednostavan 코ifrovan niz koji **identifikuje aplikaciju bez bilo kog principa**. Korisni su za pristupanje **javim podacima anonimno**, i koriste se za **povezivanje** API zahteva sa va코im projektom radi kvote i **naplate**._

Stoga, sa API klju캜em mo쬰te naterati tu kompaniju da plati za va코e kori코캖enje API-ja, ali ne캖ete mo캖i da eskalirate privilegije.

Za u캜enje drugih dozvola i na캜ina generisanja API klju캜eva proverite:

{% content-ref url="gcp-apikeys-privesc.md" %}
[gcp-apikeys-privesc.md](gcp-apikeys-privesc.md)
{% endcontent-ref %}

### `serviceusage.apiKeys.create`

Otkrivena je nedokumentovana API koja se mo쬰 koristiti za **kreiranje API klju캜eva:**

{% code overflow="wrap" %}
```bash
curl -XPOST "https://apikeys.clients6.google.com/v1/projects/<project-uniq-name>/apiKeys?access_token=$(gcloud auth print-access-token)"
```
### `serviceusage.apiKeys.list`

Jo코 jedan nedokumentovani API je prona캠en za listanje API klju캜eva koji su ve캖 kreirani (klju캜evi API-ja se pojavljuju u odgovoru):
```bash
curl "https://apikeys.clients6.google.com/v1/projects/<project-uniq-name>/apiKeys?access_token=$(gcloud auth print-access-token)"
```
{% endcode %}

### **`serviceusage.services.enable`** , **`serviceusage.services.use`**

Sa ovim dozvolama napada캜 mo쬰 omogu캖iti i koristiti nove usluge u projektu. Ovo bi moglo omogu캖iti **napada캜u da omogu캖i uslugu poput admin ili cloudidentity** kako bi poku코ao pristupiti informacijama Workspace-a, ili druge usluge za pristup zanimljivim podacima.&#x20;

## **Reference**

* [https://rhinosecuritylabs.com/cloud-security/privilege-escalation-google-cloud-platform-part-2/](https://rhinosecuritylabs.com/cloud-security/privilege-escalation-google-cloud-platform-part-2/)

<details>

<summary><strong>Podr쬴te HackTricks i ostvarite beneficije!</strong></summary>

Da li radite u **kompaniji za kiberneti캜ku bezbednost**? 콯elite li da vidite svoju **kompaniju reklamiranu na HackTricks**? ili 쬰lite da pristupite **najnovijoj verziji PEASS ili preuzmete HackTricks u PDF formatu**? Proverite [**PLANOVE ZA PRETPLATU**](https://github.com/sponsors/carlospolop)!

Otkrijte [**Porodicu PEASS**](https://opensea.io/collection/the-peass-family), na코u kolekciju ekskluzivnih [**NFT-ova**](https://opensea.io/collection/the-peass-family)

Pribavite [**zvani캜ni PEASS & HackTricks swag**](https://peass.creator-spring.com)

**Pridru쬴te se** [**游눫**](https://emojipedia.org/speech-balloon/) [**Discord grupi**](https://discord.gg/hRep4RUj7f) ili [**telegram grupi**](https://t.me/peass) ili me **pratite** na **Twitteru** [**游냕**](https://github.com/carlospolop/hacktricks/tree/7af18b62b3bdc423e11444677a6a73d4043511e9/\[https:/emojipedia.org/bird/README.md)[**@carlospolopm**](https://twitter.com/carlospolopm)**.**

**Podelite svoje hakovanje trikove podno코enjem PR-ova** [**hacktricks github repozitorijumu**](https://github.com/carlospolop/hacktricks)\*\*\*\*

**.**

</details>
