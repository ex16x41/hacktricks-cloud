# GCP - Storage Privesc

{% hint style="success" %}
Learn & practice AWS Hacking:<img src="../../../.gitbook/assets/image (1).png" alt="" data-size="line">[**HackTricks Training AWS Red Team Expert (ARTE)**](https://training.hacktricks.xyz/courses/arte)<img src="../../../.gitbook/assets/image (1).png" alt="" data-size="line">\
Learn & practice GCP Hacking: <img src="../../../.gitbook/assets/image (2).png" alt="" data-size="line">[**HackTricks Training GCP Red Team Expert (GRTE)**<img src="../../../.gitbook/assets/image (2).png" alt="" data-size="line">](https://training.hacktricks.xyz/courses/grte)

<details>

<summary>Support HackTricks</summary>

* Check the [**subscription plans**](https://github.com/sponsors/carlospolop)!
* **Join the** üí¨ [**Discord group**](https://discord.gg/hRep4RUj7f) or the [**telegram group**](https://t.me/peass) or **follow** us on **Twitter** üê¶ [**@hacktricks\_live**](https://twitter.com/hacktricks\_live)**.**
* **Share hacking tricks by submitting PRs to the** [**HackTricks**](https://github.com/carlospolop/hacktricks) and [**HackTricks Cloud**](https://github.com/carlospolop/hacktricks-cloud) github repos.

</details>
{% endhint %}

## Storage

‡§¨‡•Å‡§®‡§ø‡§Ø‡§æ‡§¶‡•Ä ‡§ú‡§æ‡§®‡§ï‡§æ‡§∞‡•Ä:

{% content-ref url="../gcp-services/gcp-storage-enum.md" %}
[gcp-storage-enum.md](../gcp-services/gcp-storage-enum.md)
{% endcontent-ref %}

### `storage.objects.get`

‡§Ø‡§π ‡§Ö‡§®‡•Å‡§Æ‡§§‡§ø ‡§Ü‡§™‡§ï‡•ã **Cloud Storage ‡§ï‡•á ‡§Ö‡§Ç‡§¶‡§∞ ‡§∏‡§Ç‡§ó‡•ç‡§∞‡§π‡•Ä‡§§ ‡§´‡§º‡§æ‡§á‡§≤‡•ã‡§Ç ‡§ï‡•ã ‡§°‡§æ‡§â‡§®‡§≤‡•ã‡§° ‡§ï‡§∞‡§®‡•á** ‡§ï‡•Ä ‡§Ö‡§®‡•Å‡§Æ‡§§‡§ø ‡§¶‡•á‡§§‡•Ä ‡§π‡•à‡•§ ‡§Ø‡§π ‡§∏‡§Ç‡§≠‡§æ‡§µ‡§ø‡§§ ‡§∞‡•Ç‡§™ ‡§∏‡•á ‡§Ü‡§™‡§ï‡•ã ‡§µ‡§ø‡§∂‡•á‡§∑‡§æ‡§ß‡§ø‡§ï‡§æ‡§∞ ‡§¨‡§¢‡§º‡§æ‡§®‡•á ‡§ï‡•Ä ‡§Ö‡§®‡•Å‡§Æ‡§§‡§ø ‡§¶‡•á‡§ó‡•Ä ‡§ï‡•ç‡§Ø‡•ã‡§Ç‡§ï‡§ø ‡§ï‡•Å‡§õ ‡§Ö‡§µ‡§∏‡§∞‡•ã‡§Ç ‡§™‡§∞ **‡§∏‡§Ç‡§µ‡•á‡§¶‡§®‡§∂‡•Ä‡§≤ ‡§ú‡§æ‡§®‡§ï‡§æ‡§∞‡•Ä ‡§µ‡§π‡§æ‡§Å ‡§∏‡§Ç‡§ó‡•ç‡§∞‡§π‡•Ä‡§§ ‡§π‡•ã‡§§‡•Ä ‡§π‡•à**‡•§ ‡§á‡§∏‡§ï‡•á ‡§Ö‡§≤‡§æ‡§µ‡§æ, ‡§ï‡•Å‡§õ GCP ‡§∏‡•á‡§µ‡§æ‡§è‡§Å ‡§Ö‡§™‡§®‡•Ä ‡§ú‡§æ‡§®‡§ï‡§æ‡§∞‡•Ä ‡§¨‡§ï‡•á‡§ü ‡§Æ‡•á‡§Ç ‡§∏‡§Ç‡§ó‡•ç‡§∞‡§π‡•Ä‡§§ ‡§ï‡§∞‡§§‡•Ä ‡§π‡•à‡§Ç:

* **GCP Composer**: ‡§ú‡§¨ ‡§Ü‡§™ ‡§è‡§ï Composer Environment ‡§¨‡§®‡§æ‡§§‡•á ‡§π‡•à‡§Ç, ‡§§‡•ã **‡§∏‡§≠‡•Ä DAGs ‡§ï‡§æ ‡§ï‡•ã‡§°** ‡§è‡§ï **‡§¨‡§ï‡•á‡§ü** ‡§ï‡•á ‡§Ö‡§Ç‡§¶‡§∞ ‡§∏‡§Ç‡§ó‡•ç‡§∞‡§π‡•Ä‡§§ ‡§ï‡§ø‡§Ø‡§æ ‡§ú‡§æ‡§è‡§ó‡§æ‡•§ ‡§á‡§® ‡§ï‡§æ‡§∞‡•ç‡§Ø‡•ã‡§Ç ‡§Æ‡•á‡§Ç ‡§â‡§®‡§ï‡•á ‡§ï‡•ã‡§° ‡§ï‡•á ‡§Ö‡§Ç‡§¶‡§∞ ‡§¶‡§ø‡§≤‡§ö‡§∏‡•ç‡§™ ‡§ú‡§æ‡§®‡§ï‡§æ‡§∞‡•Ä ‡§π‡•ã ‡§∏‡§ï‡§§‡•Ä ‡§π‡•à‡•§
* **GCR (Container Registry)**: ‡§ï‡§Ç‡§ü‡•á‡§®‡§∞‡•ã‡§Ç ‡§ï‡•Ä **‡§õ‡§µ‡§ø** **‡§¨‡§ï‡•á‡§ü** ‡§ï‡•á ‡§Ö‡§Ç‡§¶‡§∞ ‡§∏‡§Ç‡§ó‡•ç‡§∞‡§π‡•Ä‡§§ ‡§π‡•ã‡§§‡•Ä ‡§π‡•à, ‡§ú‡§ø‡§∏‡§ï‡§æ ‡§Ö‡§∞‡•ç‡§• ‡§π‡•à ‡§ï‡§ø ‡§Ø‡§¶‡§ø ‡§Ü‡§™ ‡§¨‡§ï‡•á‡§ü ‡§ï‡•ã ‡§™‡§¢‡§º ‡§∏‡§ï‡§§‡•á ‡§π‡•à‡§Ç, ‡§§‡•ã ‡§Ü‡§™ ‡§õ‡§µ‡§ø‡§Ø‡•ã‡§Ç ‡§ï‡•ã ‡§°‡§æ‡§â‡§®‡§≤‡•ã‡§° ‡§ï‡§∞ ‡§∏‡§ï‡•á‡§Ç‡§ó‡•á ‡§î‡§∞ **‡§≤‡•Ä‡§ï ‡§î‡§∞/‡§Ø‡§æ ‡§∏‡•ç‡§∞‡•ã‡§§ ‡§ï‡•ã‡§°** ‡§ï‡•Ä ‡§ñ‡•ã‡§ú ‡§ï‡§∞ ‡§∏‡§ï‡•á‡§Ç‡§ó‡•á‡•§

### `storage.objects.setIamPolicy`

‡§Ü‡§™‡§ï‡•ã **‡§á‡§∏ ‡§Ö‡§®‡•Å‡§≠‡§æ‡§ó ‡§ï‡•á ‡§™‡§ø‡§õ‡§≤‡•á ‡§™‡§∞‡§ø‡§¶‡•É‡§∂‡•ç‡§Ø‡•ã‡§Ç ‡§ï‡§æ ‡§¶‡•Å‡§∞‡•Å‡§™‡§Ø‡•ã‡§ó ‡§ï‡§∞‡§®‡•á** ‡§ï‡•Ä ‡§Ö‡§®‡•Å‡§Æ‡§§‡§ø ‡§¶‡•á ‡§∏‡§ï‡§§‡•á ‡§π‡•à‡§Ç‡•§

### **`storage.buckets.setIamPolicy`**

‡§á‡§∏ ‡§Ö‡§®‡•Å‡§Æ‡§§‡§ø ‡§ï‡•á ‡§∏‡§æ‡§• ‡§Ö‡§®‡•Å‡§Æ‡§§‡§ø‡§Ø‡•ã‡§Ç ‡§ï‡•ã ‡§∏‡§Ç‡§∂‡•ã‡§ß‡§ø‡§§ ‡§ï‡§∞‡§®‡•á ‡§ï‡•á ‡§≤‡§ø‡§è ‡§è‡§ï ‡§â‡§¶‡§æ‡§π‡§∞‡§£ ‡§ï‡•á ‡§≤‡§ø‡§è ‡§á‡§∏ ‡§™‡•É‡§∑‡•ç‡§† ‡§ï‡•Ä ‡§ú‡§æ‡§Ç‡§ö ‡§ï‡§∞‡•á‡§Ç:

{% content-ref url="../gcp-unaunthenticated-enum-and-access/gcp-storage-unauthenticated-enum/gcp-public-buckets-privilege-escalation.md" %}
[gcp-public-buckets-privilege-escalation.md](../gcp-unaunthenticated-enum-and-access/gcp-storage-unauthenticated-enum/gcp-public-buckets-privilege-escalation.md)
{% endcontent-ref %}

### `storage.hmacKeys.create`

Cloud Storage ‡§ï‡•Ä "‡§á‡§Ç‡§ü‡§∞‡§ë‡§™‡§∞‡•á‡§¨‡§ø‡§≤‡§ø‡§ü‡•Ä" ‡§µ‡§ø‡§∂‡•á‡§∑‡§§‡§æ, ‡§ú‡•ã **AWS S3 ‡§ï‡•á ‡§∏‡§æ‡§• ‡§ï‡•ç‡§∞‡•â‡§∏-‡§ï‡•ç‡§≤‡§æ‡§â‡§° ‡§á‡§Ç‡§ü‡§∞‡•à‡§ï‡•ç‡§∂‡§®** ‡§ï‡•á ‡§≤‡§ø‡§è ‡§°‡§ø‡§ú‡§º‡§æ‡§á‡§® ‡§ï‡•Ä ‡§ó‡§à ‡§π‡•à, ‡§Æ‡•á‡§Ç **‡§∏‡•á‡§µ‡§æ ‡§ñ‡§æ‡§§‡•ã‡§Ç ‡§î‡§∞ ‡§â‡§™‡§Ø‡•ã‡§ó‡§ï‡§∞‡•ç‡§§‡§æ‡§ì‡§Ç ‡§ï‡•á ‡§≤‡§ø‡§è HMAC ‡§ï‡•Å‡§Ç‡§ú‡•Ä ‡§ï‡§æ ‡§®‡§ø‡§∞‡•ç‡§Æ‡§æ‡§£** ‡§∂‡§æ‡§Æ‡§ø‡§≤ ‡§π‡•à‡•§ ‡§è‡§ï ‡§π‡§Æ‡§≤‡§æ‡§µ‡§∞ ‡§á‡§∏‡§ï‡§æ ‡§≤‡§æ‡§≠ ‡§â‡§†‡§æ‡§ï‡§∞ **‡§â‡§ö‡•ç‡§ö ‡§µ‡§ø‡§∂‡•á‡§∑‡§æ‡§ß‡§ø‡§ï‡§æ‡§∞ ‡§µ‡§æ‡§≤‡•á ‡§∏‡•á‡§µ‡§æ ‡§ñ‡§æ‡§§‡•á ‡§ï‡•á ‡§≤‡§ø‡§è HMAC ‡§ï‡•Å‡§Ç‡§ú‡•Ä ‡§â‡§§‡•ç‡§™‡§®‡•ç‡§®** ‡§ï‡§∞ ‡§∏‡§ï‡§§‡§æ ‡§π‡•à, ‡§á‡§∏ ‡§™‡•ç‡§∞‡§ï‡§æ‡§∞ **Cloud Storage ‡§ï‡•á ‡§≠‡•Ä‡§§‡§∞ ‡§µ‡§ø‡§∂‡•á‡§∑‡§æ‡§ß‡§ø‡§ï‡§æ‡§∞ ‡§¨‡§¢‡§º‡§æ ‡§∏‡§ï‡§§‡§æ ‡§π‡•à**‡•§ ‡§ú‡§¨‡§ï‡§ø ‡§â‡§™‡§Ø‡•ã‡§ó‡§ï‡§∞‡•ç‡§§‡§æ ‡§∏‡•á ‡§∏‡§Ç‡§¨‡§Ç‡§ß‡§ø‡§§ HMAC ‡§ï‡•Å‡§Ç‡§ú‡•Ä ‡§ï‡•á‡§µ‡§≤ ‡§µ‡•á‡§¨ ‡§ï‡§Ç‡§∏‡•ã‡§≤ ‡§ï‡•á ‡§Æ‡§æ‡§ß‡•ç‡§Ø‡§Æ ‡§∏‡•á ‡§™‡•ç‡§∞‡§æ‡§™‡•ç‡§§ ‡§ï‡•Ä ‡§ú‡§æ ‡§∏‡§ï‡§§‡•Ä ‡§π‡•à‡§Ç, ‡§¶‡•ã‡§®‡•ã‡§Ç ‡§è‡§ï‡•ç‡§∏‡•á‡§∏ ‡§î‡§∞ ‡§∏‡•Ä‡§ï‡•ç‡§∞‡•á‡§ü ‡§ï‡•Å‡§Ç‡§ú‡•Ä **‡§∏‡§¶‡§æ ‡§ï‡•á ‡§≤‡§ø‡§è ‡§∏‡•Å‡§≤‡§≠** ‡§∞‡§π‡§§‡•Ä ‡§π‡•à‡§Ç, ‡§ú‡§ø‡§∏‡§∏‡•á ‡§∏‡§Ç‡§≠‡§æ‡§µ‡§ø‡§§ ‡§¨‡•à‡§ï‡§Ö‡§™ ‡§è‡§ï‡•ç‡§∏‡•á‡§∏ ‡§∏‡•ç‡§ü‡•ã‡§∞‡•á‡§ú ‡§ï‡•Ä ‡§Ö‡§®‡•Å‡§Æ‡§§‡§ø ‡§Æ‡§ø‡§≤‡§§‡•Ä ‡§π‡•à‡•§ ‡§á‡§∏‡§ï‡•á ‡§µ‡§ø‡§™‡§∞‡•Ä‡§§, ‡§∏‡•á‡§µ‡§æ ‡§ñ‡§æ‡§§‡§æ ‡§∏‡•á ‡§ú‡•Å‡§°‡§º‡•á HMAC ‡§ï‡•Å‡§Ç‡§ú‡•Ä API-‡§∏‡•Å‡§≤‡§≠ ‡§π‡•ã‡§§‡•Ä ‡§π‡•à‡§Ç, ‡§≤‡•á‡§ï‡§ø‡§® ‡§â‡§®‡§ï‡•Ä ‡§è‡§ï‡•ç‡§∏‡•á‡§∏ ‡§î‡§∞ ‡§∏‡•Ä‡§ï‡•ç‡§∞‡•á‡§ü ‡§ï‡•Å‡§Ç‡§ú‡•Ä ‡§®‡§ø‡§∞‡•ç‡§Æ‡§æ‡§£ ‡§ï‡•á ‡§¨‡§æ‡§¶ ‡§™‡•ç‡§∞‡§æ‡§™‡•ç‡§§ ‡§®‡§π‡•Ä‡§Ç ‡§ï‡•Ä ‡§ú‡§æ ‡§∏‡§ï‡§§‡•Ä, ‡§ú‡§ø‡§∏‡§∏‡•á ‡§®‡§ø‡§∞‡§Ç‡§§‡§∞ ‡§è‡§ï‡•ç‡§∏‡•á‡§∏ ‡§ï‡•á ‡§≤‡§ø‡§è ‡§ú‡§ü‡§ø‡§≤‡§§‡§æ ‡§ï‡§æ ‡§è‡§ï ‡§∏‡•ç‡§§‡§∞ ‡§ú‡•Å‡§°‡§º‡§§‡§æ ‡§π‡•à‡•§

{% code overflow="wrap" %}
```bash
# Create key
gsutil hmac create <sa-email> # You might need to execute this inside a VM instance

## If you have TROUBLES creating the HMAC key this was you can also do it contacting the API directly:
PROJECT_ID = '$PROJECT_ID'
TARGET_SERVICE_ACCOUNT = f"exam-storage-sa-read-flag-3@{PROJECT_ID}.iam.gserviceaccount.com"
ACCESS_TOKEN = "$CLOUDSDK_AUTH_ACCESS_TOKEN"
import requests
import json
key = requests.post(
f'https://www.googleapis.com/storage/v1/projects/{PROJECT_ID}/hmacKeys',
params={'access_token': ACCESS_TOKEN, 'serviceAccountEmail': TARGET_SERVICE_ACCOUNT}
).json()
#print(json.dumps(key, indent=4))
print(f'ID: {key["metadata"]["accessId"]}')
print(f'Secret: {key["secret"]}')


# Configure gsutil to use the HMAC key
gcloud config set pass_credentials_to_gsutil false
gsutil config -a

# Use it
gsutil ls gs://[BUCKET_NAME]

# Restore
gcloud config set pass_credentials_to_gsutil true
```
{% endcode %}

‡§á‡§∏ ‡§µ‡§ø‡§ß‡§ø ‡§ï‡•á ‡§≤‡§ø‡§è ‡§è‡§ï ‡§î‡§∞ ‡§∂‡•ã‡§∑‡§£ ‡§∏‡•ç‡§ï‡•ç‡§∞‡§ø‡§™‡•ç‡§ü [‡§Ø‡§π‡§æ‡§Å](https://github.com/RhinoSecurityLabs/GCP-IAM-Privilege-Escalation/blob/master/ExploitScripts/storage.hmacKeys.create.py) ‡§Æ‡§ø‡§≤ ‡§∏‡§ï‡§§‡•Ä ‡§π‡•à‡•§

## `storage.objects.create`, `storage.objects.delete` = ‡§∏‡•ç‡§ü‡•ã‡§∞‡•á‡§ú ‡§≤‡§ø‡§ñ‡§®‡•á ‡§ï‡•Ä ‡§Ö‡§®‡•Å‡§Æ‡§§‡§ø

‡§è‡§ï ‡§¨‡§ï‡•á‡§ü ‡§ï‡•á ‡§Ö‡§Ç‡§¶‡§∞ **‡§®‡§Ø‡§æ ‡§ë‡§¨‡•ç‡§ú‡•á‡§ï‡•ç‡§ü ‡§¨‡§®‡§æ‡§®‡•á** ‡§ï‡•á ‡§≤‡§ø‡§è ‡§Ü‡§™‡§ï‡•ã `storage.objects.create` ‡§ï‡•Ä ‡§Ü‡§µ‡§∂‡•ç‡§Ø‡§ï‡§§‡§æ ‡§π‡•à ‡§î‡§∞, [‡§¶‡§∏‡•ç‡§§‡§æ‡§µ‡•á‡§ú‡§º‡•ã‡§Ç](https://cloud.google.com/storage/docs/access-control/iam-permissions#object\_permissions) ‡§ï‡•á ‡§Ö‡§®‡•Å‡§∏‡§æ‡§∞, ‡§Ü‡§™‡§ï‡•ã ‡§è‡§ï ‡§Æ‡•å‡§ú‡•Ç‡§¶‡§æ ‡§ë‡§¨‡•ç‡§ú‡•á‡§ï‡•ç‡§ü ‡§ï‡•ã **‡§∏‡§Ç‡§∂‡•ã‡§ß‡§ø‡§§** ‡§ï‡§∞‡§®‡•á ‡§ï‡•á ‡§≤‡§ø‡§è `storage.objects.delete` ‡§ï‡•Ä ‡§≠‡•Ä ‡§Ü‡§µ‡§∂‡•ç‡§Ø‡§ï‡§§‡§æ ‡§π‡•à‡•§

‡§ï‡•ç‡§≤‡§æ‡§â‡§° ‡§Æ‡•á‡§Ç ‡§≤‡§ø‡§ñ‡§®‡•á ‡§ï‡•á ‡§≤‡§ø‡§è ‡§¨‡§ï‡•á‡§ü ‡§ï‡§æ ‡§è‡§ï ‡§¨‡§π‡•Å‡§§ **‡§∏‡§æ‡§Æ‡§æ‡§®‡•ç‡§Ø ‡§∂‡•ã‡§∑‡§£** ‡§§‡§¨ ‡§π‡•ã‡§§‡§æ ‡§π‡•à ‡§ú‡§¨ **‡§¨‡§ï‡•á‡§ü ‡§µ‡•á‡§¨ ‡§∏‡§∞‡•ç‡§µ‡§∞ ‡§´‡§º‡§æ‡§á‡§≤‡•ã‡§Ç ‡§ï‡•ã ‡§∏‡§π‡•á‡§ú ‡§∞‡§π‡§æ ‡§π‡•à**, ‡§Ü‡§™ **‡§®‡§Ø‡§æ ‡§ï‡•ã‡§° ‡§∏‡•ç‡§ü‡•ã‡§∞** ‡§ï‡§∞‡§®‡•á ‡§Æ‡•á‡§Ç ‡§∏‡§ï‡•ç‡§∑‡§Æ ‡§π‡•ã ‡§∏‡§ï‡§§‡•á ‡§π‡•à‡§Ç ‡§ú‡•ã ‡§µ‡•á‡§¨ ‡§è‡§™‡•ç‡§≤‡§ø‡§ï‡•á‡§∂‡§® ‡§¶‡•ç‡§µ‡§æ‡§∞‡§æ ‡§â‡§™‡§Ø‡•ã‡§ó ‡§ï‡§ø‡§Ø‡§æ ‡§ú‡§æ‡§è‡§ó‡§æ‡•§

### Composer

**Composer** **Apache Airflow** ‡§π‡•à ‡§ú‡•ã GCP ‡§ï‡•á ‡§Ö‡§Ç‡§¶‡§∞ ‡§™‡•ç‡§∞‡§¨‡§Ç‡§ß‡§ø‡§§ ‡§π‡•à‡•§ ‡§á‡§∏‡§Æ‡•á‡§Ç ‡§ï‡§à ‡§¶‡§ø‡§≤‡§ö‡§∏‡•ç‡§™ ‡§µ‡§ø‡§∂‡•á‡§∑‡§§‡§æ‡§è‡§Å ‡§π‡•à‡§Ç:

* ‡§Ø‡§π ‡§è‡§ï **GKE ‡§ï‡•ç‡§≤‡§∏‡•ç‡§ü‡§∞** ‡§ï‡•á ‡§Ö‡§Ç‡§¶‡§∞ ‡§ö‡§≤‡§§‡§æ ‡§π‡•à, ‡§á‡§∏‡§≤‡§ø‡§è **‡§ï‡•ç‡§≤‡§∏‡•ç‡§ü‡§∞ ‡§¶‡•ç‡§µ‡§æ‡§∞‡§æ ‡§â‡§™‡§Ø‡•ã‡§ó ‡§ï‡§ø‡§Ø‡§æ ‡§ú‡§æ‡§®‡•á ‡§µ‡§æ‡§≤‡§æ SA ‡§ï‡•ã‡§° ‡§ï‡•á ‡§¶‡•ç‡§µ‡§æ‡§∞‡§æ ‡§™‡§π‡•Å‡§Å‡§ö ‡§Ø‡•ã‡§ó‡•ç‡§Ø ‡§π‡•à ‡§ú‡•ã Composer ‡§ï‡•á ‡§Ö‡§Ç‡§¶‡§∞ ‡§ö‡§≤ ‡§∞‡§π‡§æ ‡§π‡•à**
* ‡§è‡§ï ‡§ï‡§Ç‡§™‡•ã‡§ú‡§º‡§∞ ‡§µ‡§æ‡§§‡§æ‡§µ‡§∞‡§£ ‡§ï‡•á ‡§∏‡§≠‡•Ä ‡§ò‡§ü‡§ï (**DAGs ‡§ï‡§æ ‡§ï‡•ã‡§°**, ‡§™‡•ç‡§≤‡§ó‡§á‡§®‡•ç‡§∏ ‡§î‡§∞ ‡§°‡•á‡§ü‡§æ) ‡§è‡§ï GCP ‡§¨‡§ï‡•á‡§ü ‡§ï‡•á ‡§Ö‡§Ç‡§¶‡§∞ ‡§∏‡§Ç‡§ó‡•ç‡§∞‡§π‡•Ä‡§§ ‡§π‡•ã‡§§‡•á ‡§π‡•à‡§Ç‡•§ ‡§Ø‡§¶‡§ø ‡§π‡§Æ‡§≤‡§æ‡§µ‡§∞ ‡§ï‡•á ‡§™‡§æ‡§∏ ‡§á‡§∏‡§ï‡•á ‡§ä‡§™‡§∞ ‡§™‡§¢‡§º‡§®‡•á ‡§î‡§∞ ‡§≤‡§ø‡§ñ‡§®‡•á ‡§ï‡•Ä ‡§Ö‡§®‡•Å‡§Æ‡§§‡§ø ‡§π‡•à, ‡§§‡•ã ‡§µ‡§π ‡§¨‡§ï‡•á‡§ü ‡§ï‡•Ä ‡§®‡§ø‡§ó‡§∞‡§æ‡§®‡•Ä ‡§ï‡§∞ ‡§∏‡§ï‡§§‡§æ ‡§π‡•à ‡§î‡§∞ **‡§ú‡§¨ ‡§≠‡•Ä ‡§è‡§ï DAG ‡§¨‡§®‡§æ‡§Ø‡§æ ‡§Ø‡§æ ‡§Ö‡§™‡§°‡•á‡§ü ‡§ï‡§ø‡§Ø‡§æ ‡§ú‡§æ‡§§‡§æ ‡§π‡•à, ‡§è‡§ï ‡§¨‡•à‡§ï‡§°‡•ã‡§∞ ‡§∏‡§Ç‡§∏‡•ç‡§ï‡§∞‡§£ ‡§∏‡§¨‡§Æ‡§ø‡§ü ‡§ï‡§∞ ‡§∏‡§ï‡§§‡§æ ‡§π‡•à** ‡§§‡§æ‡§ï‡§ø ‡§ï‡§Ç‡§™‡•ã‡§ú‡§º‡§∞ ‡§µ‡§æ‡§§‡§æ‡§µ‡§∞‡§£ ‡§∏‡•ç‡§ü‡•ã‡§∞‡•á‡§ú ‡§∏‡•á ‡§¨‡•à‡§ï‡§°‡•ã‡§∞ ‡§∏‡§Ç‡§∏‡•ç‡§ï‡§∞‡§£ ‡§™‡•ç‡§∞‡§æ‡§™‡•ç‡§§ ‡§ï‡§∞ ‡§∏‡§ï‡•á‡•§

**‡§Ü‡§™ ‡§á‡§∏ ‡§π‡§Æ‡§≤‡•á ‡§ï‡§æ PoC ‡§á‡§∏ ‡§∞‡§ø‡§™‡•â‡§ú‡§ø‡§ü‡§∞‡•Ä ‡§Æ‡•á‡§Ç ‡§™‡§æ ‡§∏‡§ï‡§§‡•á ‡§π‡•à‡§Ç:** [**https://github.com/carlospolop/Monitor-Backdoor-Composer-DAGs**](https://github.com/carlospolop/Monitor-Backdoor-Composer-DAGs)

### Cloud Functions

* Cloud Functions ‡§ï‡§æ ‡§ï‡•ã‡§° ‡§∏‡•ç‡§ü‡•ã‡§∞‡•á‡§ú ‡§Æ‡•á‡§Ç ‡§∏‡§Ç‡§ó‡•ç‡§∞‡§π‡•Ä‡§§ ‡§π‡•ã‡§§‡§æ ‡§π‡•à ‡§î‡§∞ ‡§ú‡§¨ ‡§≠‡•Ä ‡§è‡§ï ‡§®‡§Ø‡§æ ‡§∏‡§Ç‡§∏‡•ç‡§ï‡§∞‡§£ ‡§¨‡§®‡§æ‡§Ø‡§æ ‡§ú‡§æ‡§§‡§æ ‡§π‡•à, ‡§§‡•ã ‡§ï‡•ã‡§° ‡§¨‡§ï‡•á‡§ü ‡§Æ‡•á‡§Ç ‡§™‡•Å‡§∂ ‡§ï‡§ø‡§Ø‡§æ ‡§ú‡§æ‡§§‡§æ ‡§π‡•à ‡§î‡§∞ ‡§´‡§ø‡§∞ ‡§á‡§∏ ‡§ï‡•ã‡§° ‡§∏‡•á ‡§®‡§Ø‡§æ ‡§ï‡§Ç‡§ü‡•á‡§®‡§∞ ‡§¨‡§®‡§æ‡§Ø‡§æ ‡§ú‡§æ‡§§‡§æ ‡§π‡•à‡•§ ‡§á‡§∏‡§≤‡§ø‡§è, **‡§®‡§è ‡§∏‡§Ç‡§∏‡•ç‡§ï‡§∞‡§£ ‡§ï‡•á ‡§¨‡§®‡§®‡•á ‡§∏‡•á ‡§™‡§π‡§≤‡•á ‡§ï‡•ã‡§° ‡§ï‡•ã ‡§ì‡§µ‡§∞‡§∞‡§æ‡§á‡§ü ‡§ï‡§∞‡§®‡§æ ‡§∏‡§Ç‡§≠‡§µ ‡§π‡•à ‡§§‡§æ‡§ï‡§ø ‡§ï‡•ç‡§≤‡§æ‡§â‡§° ‡§´‡§º‡§Ç‡§ï‡•ç‡§∂‡§® ‡§Æ‡§®‡§Æ‡§æ‡§®‡§æ ‡§ï‡•ã‡§° ‡§®‡§ø‡§∑‡•ç‡§™‡§æ‡§¶‡§ø‡§§ ‡§ï‡§∞ ‡§∏‡§ï‡•á**‡•§

**‡§Ü‡§™ ‡§á‡§∏ ‡§π‡§Æ‡§≤‡•á ‡§ï‡§æ PoC ‡§á‡§∏ ‡§∞‡§ø‡§™‡•â‡§ú‡§ø‡§ü‡§∞‡•Ä ‡§Æ‡•á‡§Ç ‡§™‡§æ ‡§∏‡§ï‡§§‡•á ‡§π‡•à‡§Ç:** [**https://github.com/carlospolop/Monitor-Backdoor-Cloud-Functions**](https://github.com/carlospolop/Monitor-Backdoor-Cloud-Functions)

### App Engine

* App Engine ‡§ï‡§æ ‡§∏‡•ç‡§∞‡•ã‡§§ ‡§ï‡•ã‡§° ‡§¨‡§ï‡•á‡§ü ‡§Æ‡•á‡§Ç ‡§∏‡§Ç‡§ó‡•ç‡§∞‡§π‡•Ä‡§§ ‡§π‡•ã‡§§‡§æ ‡§π‡•à, **‡§ï‡•ã‡§° ‡§ï‡•ã ‡§ì‡§µ‡§∞‡§∞‡§æ‡§á‡§ü ‡§ï‡§∞‡§®‡•á ‡§∏‡•á ‡§Æ‡§®‡§Æ‡§æ‡§®‡§æ ‡§ï‡•ã‡§° ‡§®‡§ø‡§∑‡•ç‡§™‡§æ‡§¶‡§ø‡§§ ‡§ï‡§∞‡§®‡§æ ‡§∏‡§Ç‡§≠‡§µ ‡§π‡•ã ‡§∏‡§ï‡§§‡§æ ‡§π‡•à‡•§ ‡§Ø‡§π ‡§∏‡§Ç‡§≠‡§µ ‡§®‡§π‡•Ä‡§Ç ‡§π‡•à**
* **‡§ê‡§∏‡§æ ‡§≤‡§ó‡§§‡§æ ‡§π‡•à ‡§ï‡§ø ‡§ï‡§Ç‡§ü‡•á‡§®‡§∞ ‡§™‡§∞‡§§‡•á‡§Ç ‡§¨‡§ï‡•á‡§ü ‡§Æ‡•á‡§Ç ‡§∏‡§Ç‡§ó‡•ç‡§∞‡§π‡•Ä‡§§ ‡§π‡•à‡§Ç, ‡§∂‡§æ‡§Ø‡§¶ ‡§â‡§®‡•ç‡§π‡•á‡§Ç ‡§¨‡§¶‡§≤‡§®‡§æ?**

### GCR

* **Google Container Registry** ‡§¨‡§ï‡•á‡§ü ‡§ï‡•á ‡§Ö‡§Ç‡§¶‡§∞ ‡§õ‡§µ‡§ø‡§Ø‡•ã‡§Ç ‡§ï‡•ã ‡§∏‡§Ç‡§ó‡•ç‡§∞‡§π‡•Ä‡§§ ‡§ï‡§∞‡§§‡§æ ‡§π‡•à, ‡§Ø‡§¶‡§ø ‡§Ü‡§™ **‡§â‡§® ‡§¨‡§ï‡•á‡§ü‡•ç‡§∏ ‡§Æ‡•á‡§Ç ‡§≤‡§ø‡§ñ ‡§∏‡§ï‡§§‡•á ‡§π‡•à‡§Ç** ‡§§‡•ã ‡§Ü‡§™ **‡§â‡§® ‡§¨‡§ï‡•á‡§ü‡•ç‡§∏ ‡§ï‡•á ‡§ö‡§≤‡§®‡•á ‡§ï‡•á ‡§∏‡•ç‡§•‡§æ‡§® ‡§™‡§∞ ‡§≤‡•á‡§ü‡§∞‡§≤‡•Ä ‡§Æ‡•Ç‡§µ ‡§ï‡§∞‡§®‡•á ‡§Æ‡•á‡§Ç ‡§∏‡§ï‡•ç‡§∑‡§Æ ‡§π‡•ã ‡§∏‡§ï‡§§‡•á ‡§π‡•à‡§Ç‡•§**
* GCR ‡§¶‡•ç‡§µ‡§æ‡§∞‡§æ ‡§â‡§™‡§Ø‡•ã‡§ó ‡§ï‡§ø‡§Ø‡§æ ‡§ú‡§æ‡§®‡•á ‡§µ‡§æ‡§≤‡§æ ‡§¨‡§ï‡•á‡§ü ‡§è‡§ï URL ‡§ï‡•á ‡§∏‡§Æ‡§æ‡§® ‡§π‡•ã‡§ó‡§æ `gs://<eu/usa/asia/nothing>.artifacts.<project>.appspot.com` (‡§∂‡•Ä‡§∞‡•ç‡§∑ ‡§∏‡•ç‡§§‡§∞ ‡§ï‡•á ‡§â‡§™‡§°‡•ã‡§Æ‡•á‡§® [‡§Ø‡§π‡§æ‡§Å](https://cloud.google.com/container-registry/docs/pushing-and-pulling) ‡§®‡§ø‡§∞‡•ç‡§¶‡§ø‡§∑‡•ç‡§ü ‡§π‡•à‡§Ç)‡•§

{% hint style="success" %}
‡§Ø‡§π ‡§∏‡•á‡§µ‡§æ ‡§Ö‡§™‡•ç‡§∞‡§ö‡§≤‡§ø‡§§ ‡§π‡•à ‡§á‡§∏‡§≤‡§ø‡§è ‡§Ø‡§π ‡§π‡§Æ‡§≤‡§æ ‡§Ö‡§¨ ‡§â‡§™‡§Ø‡•ã‡§ó‡•Ä ‡§®‡§π‡•Ä‡§Ç ‡§π‡•à‡•§ ‡§á‡§∏‡§ï‡•á ‡§Ö‡§≤‡§æ‡§µ‡§æ, Artifactory, ‡§ú‡•ã ‡§á‡§∏ ‡§∏‡•á‡§µ‡§æ ‡§ï‡§æ ‡§∏‡•ç‡§•‡§æ‡§®‡§æ‡§™‡§®‡•ç‡§® ‡§π‡•à, ‡§¨‡§ï‡•á‡§ü ‡§Æ‡•á‡§Ç ‡§õ‡§µ‡§ø‡§Ø‡•ã‡§Ç ‡§ï‡•ã ‡§∏‡§Ç‡§ó‡•ç‡§∞‡§π‡•Ä‡§§ ‡§®‡§π‡•Ä‡§Ç ‡§ï‡§∞‡§§‡§æ ‡§π‡•à‡•§
{% endhint %}

## **‡§∏‡§Ç‡§¶‡§∞‡•ç‡§≠**

* [https://rhinosecuritylabs.com/cloud-security/privilege-escalation-google-cloud-platform-part-2/#:\~:text=apiKeys.-,create,privileges%20than%20our%20own%20user.](https://rhinosecuritylabs.com/cloud-security/privilege-escalation-google-cloud-platform-part-2/)

{% hint style="success" %}
AWS ‡§π‡•à‡§ï‡§ø‡§Ç‡§ó ‡§∏‡•Ä‡§ñ‡•á‡§Ç ‡§î‡§∞ ‡§Ö‡§≠‡•ç‡§Ø‡§æ‡§∏ ‡§ï‡§∞‡•á‡§Ç:<img src="../../../.gitbook/assets/image (1).png" alt="" data-size="line">[**HackTricks Training AWS Red Team Expert (ARTE)**](https://training.hacktricks.xyz/courses/arte)<img src="../../../.gitbook/assets/image (1).png" alt="" data-size="line">\
GCP ‡§π‡•à‡§ï‡§ø‡§Ç‡§ó ‡§∏‡•Ä‡§ñ‡•á‡§Ç ‡§î‡§∞ ‡§Ö‡§≠‡•ç‡§Ø‡§æ‡§∏ ‡§ï‡§∞‡•á‡§Ç: <img src="../../../.gitbook/assets/image (2).png" alt="" data-size="line">[**HackTricks Training GCP Red Team Expert (GRTE)**<img src="../../../.gitbook/assets/image (2).png" alt="" data-size="line">](https://training.hacktricks.xyz/courses/grte)

<details>

<summary>HackTricks ‡§ï‡§æ ‡§∏‡§Æ‡§∞‡•ç‡§•‡§® ‡§ï‡§∞‡•á‡§Ç</summary>

* [**‡§∏‡§¶‡§∏‡•ç‡§Ø‡§§‡§æ ‡§Ø‡•ã‡§ú‡§®‡§æ‡§è‡§Å**](https://github.com/sponsors/carlospolop) ‡§¶‡•á‡§ñ‡•á‡§Ç!
* **üí¨ [**Discord ‡§∏‡§Æ‡•Ç‡§π**](https://discord.gg/hRep4RUj7f) ‡§Ø‡§æ [**‡§ü‡•á‡§≤‡•Ä‡§ó‡•ç‡§∞‡§æ‡§Æ ‡§∏‡§Æ‡•Ç‡§π**](https://t.me/peass) ‡§Æ‡•á‡§Ç ‡§∂‡§æ‡§Æ‡§ø‡§≤ ‡§π‡•ã‡§Ç ‡§Ø‡§æ **Twitter** ‡§™‡§∞ ‡§π‡§Æ‡•á‡§Ç **‡§´‡•â‡§≤‡•ã ‡§ï‡§∞‡•á‡§Ç** üê¶ [**@hacktricks\_live**](https://twitter.com/hacktricks\_live)**.**
* **‡§π‡•à‡§ï‡§ø‡§Ç‡§ó ‡§ü‡•ç‡§∞‡§ø‡§ï‡•ç‡§∏ ‡§∏‡§æ‡§ù‡§æ ‡§ï‡§∞‡•á‡§Ç ‡§î‡§∞ [**HackTricks**](https://github.com/carlospolop/hacktricks) ‡§î‡§∞ [**HackTricks Cloud**](https://github.com/carlospolop/hacktricks-cloud) ‡§ó‡§ø‡§ü‡§π‡§¨ ‡§∞‡§ø‡§™‡•â‡§ú‡§ø‡§ü‡§∞‡•Ä ‡§Æ‡•á‡§Ç PR ‡§∏‡§¨‡§Æ‡§ø‡§ü ‡§ï‡§∞‡•á‡§Ç‡•§**

</details>
{% endhint %}
