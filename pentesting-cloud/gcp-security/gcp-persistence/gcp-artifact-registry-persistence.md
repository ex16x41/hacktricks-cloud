# GCP - Artifact Registry Persistence

{% hint style="success" %}
AWS Hacking'i Ã¶ÄŸrenin ve pratik yapÄ±n:<img src="../../../.gitbook/assets/image (1).png" alt="" data-size="line">[**HackTricks Training AWS Red Team Expert (ARTE)**](https://training.hacktricks.xyz/courses/arte)<img src="../../../.gitbook/assets/image (1).png" alt="" data-size="line">\
GCP Hacking'i Ã¶ÄŸrenin ve pratik yapÄ±n: <img src="../../../.gitbook/assets/image (2).png" alt="" data-size="line">[**HackTricks Training GCP Red Team Expert (GRTE)**<img src="../../../.gitbook/assets/image (2).png" alt="" data-size="line">](https://training.hacktricks.xyz/courses/grte)

<details>

<summary>HackTricks'i Destekleyin</summary>

* [**abonelik planlarÄ±nÄ±**](https://github.com/sponsors/carlospolop) kontrol edin!
* **ğŸ’¬ [**Discord grubuna**](https://discord.gg/hRep4RUj7f) veya [**telegram grubuna**](https://t.me/peass) katÄ±lÄ±n ya da **Twitter**'da **bizi takip edin** ğŸ¦ [**@hacktricks\_live**](https://twitter.com/hacktricks\_live)**.**
* **Hacking ipuÃ§larÄ±nÄ± paylaÅŸmak iÃ§in** [**HackTricks**](https://github.com/carlospolop/hacktricks) ve [**HackTricks Cloud**](https://github.com/carlospolop/hacktricks-cloud) github reposuna PR gÃ¶nderin.

</details>
{% endhint %}

## Artifact Registry

Artifact Registry hakkÄ±nda daha fazla bilgi iÃ§in kontrol edin:

{% content-ref url="../gcp-services/gcp-artifact-registry-enum.md" %}
[gcp-artifact-registry-enum.md](../gcp-services/gcp-artifact-registry-enum.md)
{% endcontent-ref %}

### BaÄŸÄ±mlÄ±lÄ±k KarÄ±ÅŸÄ±klÄ±ÄŸÄ±

* **Uzak ve standart** depolar **sanaldaki** bir depoda karÄ±ÅŸtÄ±rÄ±lÄ±rsa ve her ikisinde de bir paket varsa ne olur?
* **Sanal depoda en yÃ¼ksek Ã¶nceliÄŸe sahip olan** kullanÄ±lÄ±r
* EÄŸer **Ã¶ncelik aynÄ±ysa**:
* EÄŸer **sÃ¼rÃ¼m** **aynÄ±ysa**, sanal depodaki **politika adÄ± alfabetik olarak** Ã¶nce gelir
* EÄŸer deÄŸilse, **en yÃ¼ksek sÃ¼rÃ¼m** kullanÄ±lÄ±r

{% hint style="danger" %}
Bu nedenle, eÄŸer uzak depo daha yÃ¼ksek veya aynÄ± Ã¶nceliÄŸe sahipse, bir kamu paket kayÄ±t defterinde **en yÃ¼ksek sÃ¼rÃ¼mÃ¼n (baÄŸÄ±mlÄ±lÄ±k karÄ±ÅŸÄ±klÄ±ÄŸÄ±) kÃ¶tÃ¼ye kullanÄ±lmasÄ±** mÃ¼mkÃ¼ndÃ¼r.
{% endhint %}

Bu teknik, **kalÄ±cÄ±lÄ±k** ve **kimlik doÄŸrulamasÄ± yapÄ±lmamÄ±ÅŸ eriÅŸim** iÃ§in yararlÄ± olabilir; Ã§Ã¼nkÃ¼ bunu kÃ¶tÃ¼ye kullanmak iÃ§in sadece Artifact Registry'de saklanan bir **kÃ¼tÃ¼phane adÄ±nÄ± bilmek** ve **aynÄ± kÃ¼tÃ¼phaneyi kamu deposunda (Ã¶rneÄŸin Python iÃ§in PyPi)** daha yÃ¼ksek bir sÃ¼rÃ¼mle oluÅŸturmak gerekir.

KalÄ±cÄ±lÄ±k iÃ§in takip etmeniz gereken adÄ±mlar ÅŸunlardÄ±r:

* **Gereksinimler**: Bir **sanal depo** **var olmalÄ±** ve kullanÄ±lmalÄ±, **kamu deposunda** mevcut olmayan bir **isim** ile bir **iÃ§ paket** kullanÄ±lmalÄ±dÄ±r.
* EÄŸer yoksa bir uzak depo oluÅŸturun
* Uzak depoyu sanal depoya ekleyin
* Uzak depoya daha yÃ¼ksek (veya aynÄ±) Ã¶ncelik vermek iÃ§in sanal kayÄ±t defterinin politikalarÄ±nÄ± dÃ¼zenleyin.\
Åu ÅŸekilde bir ÅŸey Ã§alÄ±ÅŸtÄ±rÄ±n:
* [gcloud artifacts repositories update --upstream-policy-file ...](https://cloud.google.com/sdk/gcloud/reference/artifacts/repositories/update#--upstream-policy-file)
* MeÅŸru paketi indirin, kÃ¶tÃ¼ niyetli kodunuzu ekleyin ve aynÄ± sÃ¼rÃ¼mle kamu deposuna kaydedin. Her seferinde bir geliÅŸtirici bunu yÃ¼klediÄŸinde, sizin paketiniz yÃ¼klenmiÅŸ olacak!

BaÄŸÄ±mlÄ±lÄ±k karÄ±ÅŸÄ±klÄ±ÄŸÄ± hakkÄ±nda daha fazla bilgi iÃ§in kontrol edin:

{% embed url="https://book.hacktricks.xyz/pentesting-web/dependency-confusion" %}

{% hint style="success" %}
AWS Hacking'i Ã¶ÄŸrenin ve pratik yapÄ±n:<img src="../../../.gitbook/assets/image (1).png" alt="" data-size="line">[**HackTricks Training AWS Red Team Expert (ARTE)**](https://training.hacktricks.xyz/courses/arte)<img src="../../../.gitbook/assets/image (1).png" alt="" data-size="line">\
GCP Hacking'i Ã¶ÄŸrenin ve pratik yapÄ±n: <img src="../../../.gitbook/assets/image (2).png" alt="" data-size="line">[**HackTricks Training GCP Red Team Expert (GRTE)**<img src="../../../.gitbook/assets/image (2).png" alt="" data-size="line">](https://training.hacktricks.xyz/courses/grte)

<details>

<summary>HackTricks'i Destekleyin</summary>

* [**abonelik planlarÄ±nÄ±**](https://github.com/sponsors/carlospolop) kontrol edin!
* **ğŸ’¬ [**Discord grubuna**](https://discord.gg/hRep4RUj7f) veya [**telegram grubuna**](https://t.me/peass) katÄ±lÄ±n ya da **Twitter**'da **bizi takip edin** ğŸ¦ [**@hacktricks\_live**](https://twitter.com/hacktricks\_live)**.**
* **Hacking ipuÃ§larÄ±nÄ± paylaÅŸmak iÃ§in** [**HackTricks**](https://github.com/carlospolop/hacktricks) ve [**HackTricks Cloud**](https://github.com/carlospolop/hacktricks-cloud) github reposuna PR gÃ¶nderin.

</details>
{% endhint %}
