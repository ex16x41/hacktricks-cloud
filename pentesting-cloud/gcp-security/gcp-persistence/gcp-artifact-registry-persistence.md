# GCP - Artifact Registry Persistence

{% hint style="success" %}
Learn & practice AWS Hacking:<img src="../../../.gitbook/assets/image (1) (1) (1).png" alt="" data-size="line">[**HackTricks Training AWS Red Team Expert (ARTE)**](https://training.hacktricks.xyz/courses/arte)<img src="../../../.gitbook/assets/image (1) (1) (1).png" alt="" data-size="line">\
Learn & practice GCP Hacking: <img src="../../../.gitbook/assets/image (2).png" alt="" data-size="line">[**HackTricks Training GCP Red Team Expert (GRTE)**<img src="../../../.gitbook/assets/image (2).png" alt="" data-size="line">](https://training.hacktricks.xyz/courses/grte)

<details>

<summary>Support HackTricks</summary>

* Check the [**subscription plans**](https://github.com/sponsors/carlospolop)!
* **Join the** ğŸ’¬ [**Discord group**](https://discord.gg/hRep4RUj7f) or the [**telegram group**](https://t.me/peass) or **follow** us on **Twitter** ğŸ¦ [**@hacktricks\_live**](https://twitter.com/hacktricks_live)**.**
* **Share hacking tricks by submitting PRs to the** [**HackTricks**](https://github.com/carlospolop/hacktricks) and [**HackTricks Cloud**](https://github.com/carlospolop/hacktricks-cloud) github repos.

</details>
{% endhint %}

## Artifact Registry

Artifact Registryì— ëŒ€í•œ ìì„¸í•œ ì •ë³´ëŠ” ë‹¤ìŒì„ í™•ì¸í•˜ì„¸ìš”:

{% content-ref url="../gcp-services/gcp-artifact-registry-enum.md" %}
[gcp-artifact-registry-enum.md](../gcp-services/gcp-artifact-registry-enum.md)
{% endcontent-ref %}

### Dependency Confusion

* **ì›ê²© ë° í‘œì¤€** ì €ì¥ì†Œê°€ **ê°€ìƒ** ì €ì¥ì†Œì—ì„œ í˜¼í•©ë˜ê³  ë‘ ê³³ì— íŒ¨í‚¤ì§€ê°€ ì¡´ì¬í•˜ë©´ ì–´ë–»ê²Œ ë©ë‹ˆê¹Œ?
* **ê°€ìƒ ì €ì¥ì†Œì—ì„œ ì„¤ì •ëœ ìš°ì„  ìˆœìœ„ê°€ ê°€ì¥ ë†’ì€** ê²ƒì´ ì‚¬ìš©ë©ë‹ˆë‹¤.
* **ìš°ì„  ìˆœìœ„ê°€ ë™ì¼í•œ ê²½ìš°**:
* **ë²„ì „**ì´ **ë™ì¼í•œ ê²½ìš°**, ê°€ìƒ ì €ì¥ì†Œì—ì„œ **ì •ì±… ì´ë¦„ì´ ì•ŒíŒŒë²³ ìˆœì„œë¡œ ë¨¼ì €** ì‚¬ìš©ë©ë‹ˆë‹¤.
* ê·¸ë ‡ì§€ ì•Šìœ¼ë©´ **ê°€ì¥ ë†’ì€ ë²„ì „**ì´ ì‚¬ìš©ë©ë‹ˆë‹¤.

{% hint style="danger" %}
ë”°ë¼ì„œ ì›ê²© ì €ì¥ì†Œì˜ ìš°ì„  ìˆœìœ„ê°€ ë” ë†’ê±°ë‚˜ ë™ì¼í•œ ê²½ìš° ê³µê°œ íŒ¨í‚¤ì§€ ë ˆì§€ìŠ¤íŠ¸ë¦¬ì—ì„œ **ê°€ì¥ ë†’ì€ ë²„ì „(ì˜ì¡´ì„± í˜¼ë€)**ì„ **ì•…ìš©**í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.
{% endhint %}

ì´ ê¸°ìˆ ì€ **ì§€ì†ì„±** ë° **ì¸ì¦ë˜ì§€ ì•Šì€ ì ‘ê·¼**ì— ìœ ìš©í•  ìˆ˜ ìˆìœ¼ë©°, ì´ë¥¼ ì•…ìš©í•˜ë ¤ë©´ Artifact Registryì— ì €ì¥ëœ **ë¼ì´ë¸ŒëŸ¬ë¦¬ ì´ë¦„**ì„ **ì•Œê³ ** ìˆì–´ì•¼ í•˜ê³ , **ê³µê°œ ì €ì¥ì†Œ(ì˜ˆ: Pythonì˜ PyPi)**ì— ë™ì¼í•œ ë¼ì´ë¸ŒëŸ¬ë¦¬ë¥¼ ë” ë†’ì€ ë²„ì „ìœ¼ë¡œ **ìƒì„±**í•´ì•¼ í•©ë‹ˆë‹¤.

ì§€ì†ì„±ì„ ìœ„í•´ ë”°ë¼ì•¼ í•  ë‹¨ê³„ëŠ” ë‹¤ìŒê³¼ ê°™ìŠµë‹ˆë‹¤:

* **ìš”êµ¬ ì‚¬í•­**: **ê°€ìƒ ì €ì¥ì†Œ**ê°€ **ì¡´ì¬**í•˜ê³  ì‚¬ìš©ë˜ì–´ì•¼ í•˜ë©°, **ê³µê°œ ì €ì¥ì†Œ**ì— ì¡´ì¬í•˜ì§€ ì•ŠëŠ” **ì´ë¦„**ì„ ê°€ì§„ **ë‚´ë¶€ íŒ¨í‚¤ì§€**ê°€ ì‚¬ìš©ë˜ì–´ì•¼ í•©ë‹ˆë‹¤.
* ì›ê²© ì €ì¥ì†Œê°€ ì¡´ì¬í•˜ì§€ ì•Šìœ¼ë©´ ìƒì„±í•©ë‹ˆë‹¤.
* ì›ê²© ì €ì¥ì†Œë¥¼ ê°€ìƒ ì €ì¥ì†Œì— ì¶”ê°€í•©ë‹ˆë‹¤.
* ì›ê²© ì €ì¥ì†Œì— ë” ë†’ì€ ìš°ì„  ìˆœìœ„(ë˜ëŠ” ë™ì¼í•œ)ë¥¼ ë¶€ì—¬í•˜ë„ë¡ ê°€ìƒ ë ˆì§€ìŠ¤íŠ¸ë¦¬ì˜ ì •ì±…ì„ í¸ì§‘í•©ë‹ˆë‹¤.\
ë‹¤ìŒê³¼ ê°™ì€ ëª…ë ¹ì„ ì‹¤í–‰í•©ë‹ˆë‹¤:
* [gcloud artifacts repositories update --upstream-policy-file ...](https://cloud.google.com/sdk/gcloud/reference/artifacts/repositories/update#--upstream-policy-file)
* í•©ë²•ì ì¸ íŒ¨í‚¤ì§€ë¥¼ ë‹¤ìš´ë¡œë“œí•˜ê³ , ì•…ì„± ì½”ë“œë¥¼ ì¶”ê°€í•œ í›„ ë™ì¼í•œ ë²„ì „ìœ¼ë¡œ ê³µê°œ ì €ì¥ì†Œì— ë“±ë¡í•©ë‹ˆë‹¤. ê°œë°œìê°€ ì´ë¥¼ ì„¤ì¹˜í•  ë•Œë§ˆë‹¤ ìì‹ ì˜ íŒ¨í‚¤ì§€ê°€ ì„¤ì¹˜ë©ë‹ˆë‹¤!

ì˜ì¡´ì„± í˜¼ë€ì— ëŒ€í•œ ìì„¸í•œ ì •ë³´ëŠ” ë‹¤ìŒì„ í™•ì¸í•˜ì„¸ìš”:

{% embed url="https://book.hacktricks.xyz/pentesting-web/dependency-confusion" %}

{% hint style="success" %}
Learn & practice AWS Hacking:<img src="../../../.gitbook/assets/image (1) (1) (1).png" alt="" data-size="line">[**HackTricks Training AWS Red Team Expert (ARTE)**](https://training.hacktricks.xyz/courses/arte)<img src="../../../.gitbook/assets/image (1) (1) (1).png" alt="" data-size="line">\
Learn & practice GCP Hacking: <img src="../../../.gitbook/assets/image (2).png" alt="" data-size="line">[**HackTricks Training GCP Red Team Expert (GRTE)**<img src="../../../.gitbook/assets/image (2).png" alt="" data-size="line">](https://training.hacktricks.xyz/courses/grte)

<details>

<summary>Support HackTricks</summary>

* Check the [**subscription plans**](https://github.com/sponsors/carlospolop)!
* **Join the** ğŸ’¬ [**Discord group**](https://discord.gg/hRep4RUj7f) or the [**telegram group**](https://t.me/peass) or **follow** us on **Twitter** ğŸ¦ [**@hacktricks\_live**](https://twitter.com/hacktricks_live)**.**
* **Share hacking tricks by submitting PRs to the** [**HackTricks**](https://github.com/carlospolop/hacktricks) and [**HackTricks Cloud**](https://github.com/carlospolop/hacktricks-cloud) github repos.

</details>
{% endhint %}
