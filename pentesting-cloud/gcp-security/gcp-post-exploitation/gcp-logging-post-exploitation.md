# GCP - Logging Post Exploitation

{% hint style="success" %}
AWS Hacking Ã¶ÄŸrenin ve pratik yapÄ±n:<img src="/.gitbook/assets/image.png" alt="" data-size="line">[**HackTricks Training AWS Red Team Expert (ARTE)**](https://training.hacktricks.xyz/courses/arte)<img src="/.gitbook/assets/image.png" alt="" data-size="line">\
GCP Hacking Ã¶ÄŸrenin ve pratik yapÄ±n: <img src="/.gitbook/assets/image (2).png" alt="" data-size="line">[**HackTricks Training GCP Red Team Expert (GRTE)**<img src="/.gitbook/assets/image (2).png" alt="" data-size="line">](https://training.hacktricks.xyz/courses/grte)

<details>

<summary>HackTricks'i Destekleyin</summary>

* [**Abonelik planlarÄ±nÄ±**](https://github.com/sponsors/carlospolop) kontrol edin!
* **ğŸ’¬ Discord grubuna** [**katÄ±lÄ±n**](https://discord.gg/hRep4RUj7f) veya [**telegram grubuna**](https://t.me/peass) katÄ±lÄ±n ya da **Twitter'da** ğŸ¦ [**@hacktricks\_live**](https://twitter.com/hacktricks\_live)**'Ä± takip edin.**
* **HackTricks'e PR gÃ¶ndererek hacking ipuÃ§larÄ±nÄ± paylaÅŸÄ±n** [**HackTricks**](https://github.com/carlospolop/hacktricks) ve [**HackTricks Cloud**](https://github.com/carlospolop/hacktricks-cloud) github depolarÄ±na.

</details>
{% endhint %}

## Temel Bilgiler

Daha fazla bilgi iÃ§in kontrol edin:

{% content-ref url="../gcp-services/gcp-logging-enum.md" %}
[gcp-logging-enum.md](../gcp-services/gcp-logging-enum.md)
{% endcontent-ref %}

DiÄŸer izleme bozma yÃ¶ntemleri iÃ§in kontrol edin:

{% content-ref url="gcp-monitoring-post-exploitation.md" %}
[gcp-monitoring-post-exploitation.md](gcp-monitoring-post-exploitation.md)
{% endcontent-ref %}

### VarsayÄ±lan Logging

**VarsayÄ±lan olarak sadece okuma iÅŸlemleri gerÃ§ekleÅŸtirdiÄŸiniz iÃ§in yakalanmazsÄ±nÄ±z. Daha fazla bilgi iÃ§in Logging Enum bÃ¶lÃ¼mÃ¼ne bakÄ±n.**

### HariÃ§ Tutulan Principal Ekle

[https://console.cloud.google.com/iam-admin/audit/allservices](https://console.cloud.google.com/iam-admin/audit/allservices) ve [https://console.cloud.google.com/iam-admin/audit](https://console.cloud.google.com/iam-admin/audit) adreslerinde log oluÅŸturulmamasÄ± iÃ§in principal eklemek mÃ¼mkÃ¼ndÃ¼r. Bir saldÄ±rgan, yakalanmamak iÃ§in bunu kÃ¶tÃ¼ye kullanabilir.

### LoglarÄ± Oku - `logging.logEntries.list`

{% code overflow="wrap" %}
```bash
# Read logs
gcloud logging read "logName=projects/your-project-id/logs/log-id" --limit=10 --format=json

# Everything from a timestamp
gcloud logging read "timestamp >= \"2023-01-01T00:00:00Z\"" --limit=10 --format=json

# Use these options to indicate a different bucket or view to use: --bucket=_Required  --view=_Default
```
{% endcode %}

### `logging.logs.delete`

{% code overflow="wrap" %}
```bash
# Delete all entries from a log in the _Default log bucket - logging.logs.delete
gcloud logging logs delete <log-name>
```
{% endcode %}

### Log yazma - `logging.logEntries.create`

{% code overflow="wrap" %}
```bash
# Write a log entry to try to disrupt some system
gcloud logging write LOG_NAME "A deceptive log entry" --severity=ERROR
```
{% endcode %}

### `logging.buckets.update`

{% code overflow="wrap" %}
```bash
# Set retention period to 1 day (_Required has a fixed one of 400days)

gcloud logging buckets update bucketlog --location=<location> --description="New description" --retention-days=1
```
{% endcode %}

### `logging.buckets.delete`

### `logging.buckets.delete`

Bu izin, bir Logging bucket'Ä±nÄ± silmenize olanak tanÄ±r. Bu, saldÄ±rganÄ±n izlerini Ã¶rtmek iÃ§in kullanabileceÄŸi bir yÃ¶ntemdir. 

### `logging.buckets.update`

Bu izin, bir Logging bucket'Ä±nÄ± gÃ¼ncellemenize olanak tanÄ±r. SaldÄ±rganlar, log verilerini deÄŸiÅŸtirmek veya loglamayÄ± devre dÄ±ÅŸÄ± bÄ±rakmak iÃ§in bu izni kullanabilirler.

### `logging.logEntries.create`

Bu izin, yeni log girdileri oluÅŸturmanÄ±za olanak tanÄ±r. SaldÄ±rganlar, sahte loglar ekleyerek izlerini gizleyebilirler.

### `logging.logEntries.delete`

Bu izin, mevcut log girdilerini silmenize olanak tanÄ±r. SaldÄ±rganlar, kendi aktivitelerini gizlemek iÃ§in bu izni kullanabilirler.

### `logging.logMetrics.create`

Bu izin, yeni log metrikleri oluÅŸturmanÄ±za olanak tanÄ±r. SaldÄ±rganlar, log verilerini manipÃ¼le etmek iÃ§in bu izni kullanabilirler.

### `logging.logMetrics.delete`

Bu izin, mevcut log metriklerini silmenize olanak tanÄ±r. SaldÄ±rganlar, log verilerini manipÃ¼le etmek iÃ§in bu izni kullanabilirler.

### `logging.logMetrics.update`

Bu izin, mevcut log metriklerini gÃ¼ncellemenize olanak tanÄ±r. SaldÄ±rganlar, log verilerini manipÃ¼le etmek iÃ§in bu izni kullanabilirler.

### `logging.sinks.create`

Bu izin, yeni log sink'leri oluÅŸturmanÄ±za olanak tanÄ±r. SaldÄ±rganlar, log verilerini baÅŸka bir yere yÃ¶nlendirmek iÃ§in bu izni kullanabilirler.

### `logging.sinks.delete`

Bu izin, mevcut log sink'lerini silmenize olanak tanÄ±r. SaldÄ±rganlar, log verilerini baÅŸka bir yere yÃ¶nlendirmek iÃ§in bu izni kullanabilirler.

### `logging.sinks.update`

Bu izin, mevcut log sink'lerini gÃ¼ncellemenize olanak tanÄ±r. SaldÄ±rganlar, log verilerini baÅŸka bir yere yÃ¶nlendirmek iÃ§in bu izni kullanabilirler.

### `logging.views.create`

Bu izin, yeni log gÃ¶rÃ¼nÃ¼mleri oluÅŸturmanÄ±za olanak tanÄ±r. SaldÄ±rganlar, log verilerini manipÃ¼le etmek iÃ§in bu izni kullanabilirler.

### `logging.views.delete`

Bu izin, mevcut log gÃ¶rÃ¼nÃ¼mlerini silmenize olanak tanÄ±r. SaldÄ±rganlar, log verilerini manipÃ¼le etmek iÃ§in bu izni kullanabilirler.

### `logging.views.update`

Bu izin, mevcut log gÃ¶rÃ¼nÃ¼mlerini gÃ¼ncellemenize olanak tanÄ±r. SaldÄ±rganlar, log verilerini manipÃ¼le etmek iÃ§in bu izni kullanabilirler.
```bash
# Delete log bucket
gcloud logging buckets delete BUCKET_NAME --location=<location>
```
### `logging.links.delete`

{% code overflow="wrap" %}
```bash
# Delete link
gcloud logging links delete <link-id> --bucket <bucket> --location <location>
```
{% endcode %}

### `logging.views.delete`

### `logging.views.delete` izni

Bu izin, bir kullanÄ±cÄ±nÄ±n belirli bir proje veya organizasyon iÃ§indeki Logging View'leri silmesine olanak tanÄ±r. Bu izni kÃ¶tÃ¼ye kullanmak, bir saldÄ±rganÄ±n belirli log verilerini gizlemesine veya log yÃ¶netimini bozmasÄ±na olanak tanÄ±yabilir.

### `logging.sinks.delete` izni

Bu izin, bir kullanÄ±cÄ±nÄ±n belirli bir proje veya organizasyon iÃ§indeki Logging Sink'leri silmesine olanak tanÄ±r. Bu izni kÃ¶tÃ¼ye kullanmak, bir saldÄ±rganÄ±n log verilerinin belirli bir hedefe yÃ¶nlendirilmesini durdurmasÄ±na olanak tanÄ±yabilir.

### `logging.exclusions.delete` izni

Bu izin, bir kullanÄ±cÄ±nÄ±n belirli bir proje veya organizasyon iÃ§indeki Logging Exclusion'larÄ± silmesine olanak tanÄ±r. Bu izni kÃ¶tÃ¼ye kullanmak, bir saldÄ±rganÄ±n belirli log verilerinin Logging'den hariÃ§ tutulmasÄ±nÄ± durdurmasÄ±na olanak tanÄ±yabilir.

### `logging.logs.delete` izni

Bu izin, bir kullanÄ±cÄ±nÄ±n belirli bir proje veya organizasyon iÃ§indeki loglarÄ± silmesine olanak tanÄ±r. Bu izni kÃ¶tÃ¼ye kullanmak, bir saldÄ±rganÄ±n belirli log verilerini tamamen ortadan kaldÄ±rmasÄ±na olanak tanÄ±yabilir.

### `logging.privateLogEntries.list` izni

Bu izin, bir kullanÄ±cÄ±nÄ±n belirli bir proje veya organizasyon iÃ§indeki Ã¶zel log giriÅŸlerini listelemesine olanak tanÄ±r. Bu izni kÃ¶tÃ¼ye kullanmak, bir saldÄ±rganÄ±n hassas veya gizli log verilerini gÃ¶rÃ¼ntÃ¼lemesine olanak tanÄ±yabilir.

### `logging.privateLogEntries.delete` izni

Bu izin, bir kullanÄ±cÄ±nÄ±n belirli bir proje veya organizasyon iÃ§indeki Ã¶zel log giriÅŸlerini silmesine olanak tanÄ±r. Bu izni kÃ¶tÃ¼ye kullanmak, bir saldÄ±rganÄ±n hassas veya gizli log verilerini ortadan kaldÄ±rmasÄ±na olanak tanÄ±yabilir.
```bash
# Delete a logging view to remove access to anyone using it
gcloud logging views delete <view-id> --bucket=<bucket> --location=global
```
### `logging.views.update`

{% code overflow="wrap" %}
```bash
# Update a logging view to hide data
gcloud logging views update <view-id> --log-filter="resource.type=gce_instance" --bucket=<bucket> --location=global --description="New description for the log view"
```
{% endcode %}

### `logging.logMetrics.update`

{% code overflow="wrap" %}
```bash
# Update log based metrics - logging.logMetrics.update
gcloud logging metrics update <metric-name> --description="Changed metric description" --log-filter="severity>CRITICAL" --project=PROJECT_ID
```
{% endcode %}

### `logging.logMetrics.delete`

### `logging.logMetrics.delete`

Bu izin, bir saldÄ±rganÄ±n bir log metric'i silmesine olanak tanÄ±r. Bu, saldÄ±rganÄ±n kÃ¶tÃ¼ niyetli etkinliklerini gizlemek iÃ§in loglarÄ± manipÃ¼le etmesine yardÄ±mcÄ± olabilir.

### `logging.logMetrics.list`

Bu izin, bir saldÄ±rganÄ±n mevcut log metric'lerini listelemesine olanak tanÄ±r. Bu, saldÄ±rganÄ±n hangi log metric'lerinin mevcut olduÄŸunu ve hangilerinin silinmesi gerektiÄŸini belirlemesine yardÄ±mcÄ± olabilir.

### `logging.logMetrics.update`

Bu izin, bir saldÄ±rganÄ±n mevcut log metric'lerini gÃ¼ncellemesine olanak tanÄ±r. Bu, saldÄ±rganÄ±n log metric'lerini manipÃ¼le ederek kÃ¶tÃ¼ niyetli etkinliklerini gizlemesine yardÄ±mcÄ± olabilir.

### `logging.logMetrics.create`

Bu izin, bir saldÄ±rganÄ±n yeni log metric'leri oluÅŸturmasÄ±na olanak tanÄ±r. Bu, saldÄ±rganÄ±n kendi log metric'lerini ekleyerek kÃ¶tÃ¼ niyetli etkinliklerini gizlemesine yardÄ±mcÄ± olabilir.

### `logging.sinks.delete`

Bu izin, bir saldÄ±rganÄ±n bir log sink'i silmesine olanak tanÄ±r. Bu, saldÄ±rganÄ±n log verilerini baÅŸka bir yere yÃ¶nlendirmesini ve ardÄ±ndan bu yÃ¶nlendirmeyi gizlemek iÃ§in log sink'ini silmesini saÄŸlar.

### `logging.sinks.list`

Bu izin, bir saldÄ±rganÄ±n mevcut log sink'lerini listelemesine olanak tanÄ±r. Bu, saldÄ±rganÄ±n hangi log sink'lerinin mevcut olduÄŸunu ve hangilerinin silinmesi gerektiÄŸini belirlemesine yardÄ±mcÄ± olabilir.

### `logging.sinks.update`

Bu izin, bir saldÄ±rganÄ±n mevcut log sink'lerini gÃ¼ncellemesine olanak tanÄ±r. Bu, saldÄ±rganÄ±n log verilerini baÅŸka bir yere yÃ¶nlendirmesini ve ardÄ±ndan bu yÃ¶nlendirmeyi gizlemek iÃ§in log sink'ini gÃ¼ncellemesini saÄŸlar.

### `logging.sinks.create`

Bu izin, bir saldÄ±rganÄ±n yeni log sink'leri oluÅŸturmasÄ±na olanak tanÄ±r. Bu, saldÄ±rganÄ±n log verilerini baÅŸka bir yere yÃ¶nlendirmesini ve ardÄ±ndan bu yÃ¶nlendirmeyi gizlemek iÃ§in yeni log sink'leri oluÅŸturmasÄ±nÄ± saÄŸlar.

### `logging.views.delete`

Bu izin, bir saldÄ±rganÄ±n bir log view'i silmesine olanak tanÄ±r. Bu, saldÄ±rganÄ±n belirli log verilerini gizlemek iÃ§in log view'lerini manipÃ¼le etmesine yardÄ±mcÄ± olabilir.

### `logging.views.list`

Bu izin, bir saldÄ±rganÄ±n mevcut log view'lerini listelemesine olanak tanÄ±r. Bu, saldÄ±rganÄ±n hangi log view'lerinin mevcut olduÄŸunu ve hangilerinin silinmesi gerektiÄŸini belirlemesine yardÄ±mcÄ± olabilir.

### `logging.views.update`

Bu izin, bir saldÄ±rganÄ±n mevcut log view'lerini gÃ¼ncellemesine olanak tanÄ±r. Bu, saldÄ±rganÄ±n log view'lerini manipÃ¼le ederek belirli log verilerini gizlemesine yardÄ±mcÄ± olabilir.

### `logging.views.create`

Bu izin, bir saldÄ±rganÄ±n yeni log view'leri oluÅŸturmasÄ±na olanak tanÄ±r. Bu, saldÄ±rganÄ±n kendi log view'lerini ekleyerek belirli log verilerini gizlemesine yardÄ±mcÄ± olabilir.
```bash
# Delete log based metrics - logging.logMetrics.delete
gcloud logging metrics delete <metric-name>
```
### `logging.sinks.delete`

`logging.sinks.delete` izni, bir saldÄ±rganÄ±n log sink'leri silmesine olanak tanÄ±r. Bu, loglarÄ±n belirli bir hedefe yÃ¶nlendirilmesini durdurabilir ve potansiyel olarak olay yanÄ±t ekiplerinin saldÄ±rÄ±yÄ± tespit etmesini zorlaÅŸtÄ±rabilir.

```bash
gcloud logging sinks delete [SINK_NAME]
```

### `logging.logs.delete`

`logging.logs.delete` izni, bir saldÄ±rganÄ±n belirli loglarÄ± silmesine olanak tanÄ±r. Bu, saldÄ±rganÄ±n izlerini Ã¶rtmek iÃ§in kullanabileceÄŸi bir tekniktir.

```bash
gcloud logging logs delete [LOG_NAME]
```

### `logging.exclusions.create`

`logging.exclusions.create` izni, bir saldÄ±rganÄ±n belirli loglarÄ± hariÃ§ tutmasÄ±na olanak tanÄ±r. Bu, belirli olaylarÄ±n loglanmasÄ±nÄ± engelleyebilir ve saldÄ±rÄ±nÄ±n tespit edilmesini zorlaÅŸtÄ±rabilir.

```bash
gcloud logging exclusions create [EXCLUSION_NAME] --log-filter="[FILTER]"
```

### `logging.exclusions.delete`

`logging.exclusions.delete` izni, bir saldÄ±rganÄ±n mevcut log hariÃ§ tutmalarÄ±nÄ± silmesine olanak tanÄ±r. Bu, daha Ã¶nce hariÃ§ tutulan loglarÄ±n tekrar loglanmasÄ±nÄ± saÄŸlayabilir.

```bash
gcloud logging exclusions delete [EXCLUSION_NAME]
```

### `logging.sinks.update`

`logging.sinks.update` izni, bir saldÄ±rganÄ±n mevcut log sink'lerini gÃ¼ncellemesine olanak tanÄ±r. Bu, loglarÄ±n farklÄ± bir hedefe yÃ¶nlendirilmesini saÄŸlayabilir.

```bash
gcloud logging sinks update [SINK_NAME] --destination=[NEW_DESTINATION]
```

### `logging.sinks.create`

`logging.sinks.create` izni, bir saldÄ±rganÄ±n yeni log sink'leri oluÅŸturmasÄ±na olanak tanÄ±r. Bu, loglarÄ±n belirli bir hedefe yÃ¶nlendirilmesini saÄŸlayabilir.

```bash
gcloud logging sinks create [SINK_NAME] --destination=[DESTINATION]
```

### `logging.metrics.create`

`logging.metrics.create` izni, bir saldÄ±rganÄ±n log tabanlÄ± metrikler oluÅŸturmasÄ±na olanak tanÄ±r. Bu, belirli olaylarÄ±n izlenmesini saÄŸlayabilir.

```bash
gcloud logging metrics create [METRIC_NAME] --log-filter="[FILTER]"
```

### `logging.metrics.delete`

`logging.metrics.delete` izni, bir saldÄ±rganÄ±n mevcut log tabanlÄ± metrikleri silmesine olanak tanÄ±r. Bu, belirli olaylarÄ±n izlenmesini durdurabilir.

```bash
gcloud logging metrics delete [METRIC_NAME]
```
```bash
# Delete sink - logging.sinks.delete
gcloud logging sinks delete <sink-name>
```
### `logging.sinks.update`

{% code overflow="wrap" %}
```bash
# Disable sink - logging.sinks.update
gcloud logging sinks update <sink-name> --disabled

# Createa filter to exclude attackers logs - logging.sinks.update
gcloud logging sinks update SINK_NAME --add-exclusion="name=exclude-info-logs,filter=severity<INFO"

# Change where the sink is storing the data - logging.sinks.update
gcloud logging sinks update <sink-name> new-destination

# Change the service account to one withuot permissions to write in the destination - logging.sinks.update
gcloud logging sinks update SINK_NAME --custom-writer-identity=attacker-service-account-email --project=PROJECT_ID

# Remove explusions to try to overload with logs - logging.sinks.update
gcloud logging sinks update SINK_NAME --clear-exclusions

# If the sink exports to BigQuery, an attacker might enable or disable the use of partitioned tables, potentially leading to inefficient querying and higher costs. - logging.sinks.update
gcloud logging sinks update SINK_NAME --use-partitioned-tables
gcloud logging sinks update SINK_NAME --no-use-partitioned-tables
```
{% endcode %}

{% hint style="success" %}
AWS Hacking Ã¶ÄŸrenin ve pratik yapÄ±n:<img src="/.gitbook/assets/image.png" alt="" data-size="line">[**HackTricks Training AWS Red Team Expert (ARTE)**](https://training.hacktricks.xyz/courses/arte)<img src="/.gitbook/assets/image.png" alt="" data-size="line">\
GCP Hacking Ã¶ÄŸrenin ve pratik yapÄ±n: <img src="/.gitbook/assets/image (2).png" alt="" data-size="line">[**HackTricks Training GCP Red Team Expert (GRTE)**<img src="/.gitbook/assets/image (2).png" alt="" data-size="line">](https://training.hacktricks.xyz/courses/grte)

<details>

<summary>HackTricks'i Destekleyin</summary>

* [**Abonelik planlarÄ±nÄ±**](https://github.com/sponsors/carlospolop) kontrol edin!
* **ğŸ’¬ [**Discord grubuna**](https://discord.gg/hRep4RUj7f) veya [**telegram grubuna**](https://t.me/peass) katÄ±lÄ±n ya da **Twitter'da** ğŸ¦ [**@hacktricks\_live**](https://twitter.com/hacktricks\_live)**'Ä± takip edin.**
* **HackTricks** ve [**HackTricks Cloud**](https://github.com/carlospolop/hacktricks-cloud) github depolarÄ±na PR gÃ¶ndererek hacking ipuÃ§larÄ±nÄ± paylaÅŸÄ±n.

</details>
{% endhint %}
