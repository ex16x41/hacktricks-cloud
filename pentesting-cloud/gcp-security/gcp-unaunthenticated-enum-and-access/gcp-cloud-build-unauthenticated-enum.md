# GCP - Cloud Build Unauthenticated Enum

{% hint style="success" %}
Lerne & √ºbe AWS Hacking:<img src="../../../.gitbook/assets/image (1).png" alt="" data-size="line">[**HackTricks Training AWS Red Team Expert (ARTE)**](https://training.hacktricks.xyz/courses/arte)<img src="../../../.gitbook/assets/image (1).png" alt="" data-size="line">\
Lerne & √ºbe GCP Hacking: <img src="../../../.gitbook/assets/image (2).png" alt="" data-size="line">[**HackTricks Training GCP Red Team Expert (GRTE)**<img src="../../../.gitbook/assets/image (2).png" alt="" data-size="line">](https://training.hacktricks.xyz/courses/grte)

<details>

<summary>Support HackTricks</summary>

* √úberpr√ºfe die [**Abonnementpl√§ne**](https://github.com/sponsors/carlospolop)!
* **Tritt der** üí¨ [**Discord-Gruppe**](https://discord.gg/hRep4RUj7f) oder der [**Telegram-Gruppe**](https://t.me/peass) bei oder **folge** uns auf **Twitter** üê¶ [**@hacktricks\_live**](https://twitter.com/hacktricks\_live)**.**
* **Teile Hacking-Tricks, indem du PRs zu den** [**HackTricks**](https://github.com/carlospolop/hacktricks) und [**HackTricks Cloud**](https://github.com/carlospolop/hacktricks-cloud) GitHub-Repos einreichst.

</details>
{% endhint %}

## Cloud Build

F√ºr weitere Informationen √ºber Cloud Build siehe:

{% content-ref url="../gcp-services/gcp-cloud-build-enum.md" %}
[gcp-cloud-build-enum.md](../gcp-services/gcp-cloud-build-enum.md)
{% endcontent-ref %}

### cloudbuild.yml

Wenn du Schreibzugriff auf ein Repository mit einer Datei namens **`cloudbuild.yml`** erlangst, k√∂nntest du diese Datei **hintert√ºren**, die die **Befehle angibt, die innerhalb eines Cloud Builds ausgef√ºhrt werden sollen** und die Geheimnisse exfiltrieren, was durchgef√ºhrt wird und auch das **Cloud Build-Dienstkonto kompromittieren.**

{% hint style="info" %}
Beachte, dass GCP die Option hat, Administratoren zu erlauben, die Ausf√ºhrung von Build-Systemen aus externen PRs √ºber "Comment Control" zu steuern. Comment Control ist eine Funktion, bei der Mitwirkende/Projektbesitzer **kommentieren m√ºssen ‚Äú/gcbrun‚Äù, um den Build** gegen den PR auszul√∂sen, und die Verwendung dieser Funktion verhindert von Natur aus, dass jemand im Internet deine Build-Systeme ausl√∂st.
{% endhint %}

F√ºr einige verwandte Informationen kannst du die Seite √ºber den Angriff auf Github Actions (√§hnlich wie dies) √ºberpr√ºfen:

{% content-ref url="../../../pentesting-ci-cd/github-security/abusing-github-actions/" %}
[abusing-github-actions](../../../pentesting-ci-cd/github-security/abusing-github-actions/)
{% endcontent-ref %}

### PR Genehmigungen

Wenn der Trigger PR ist, weil **jeder PRs zu √∂ffentlichen Repositories durchf√ºhren kann**, w√§re es sehr gef√§hrlich, einfach **die Ausf√ºhrung des Triggers mit jedem PR zuzulassen**. Daher wird die Ausf√ºhrung standardm√§√üig nur **automatisch f√ºr Besitzer und Mitwirkende** sein, und um den Trigger mit PRs anderer Benutzer auszuf√ºhren, muss ein Besitzer oder Mitwirkender `/gcbrun` kommentieren.

<figure><img src="../../../.gitbook/assets/image (339).png" alt="" width="563"><figcaption></figcaption></figure>

{% hint style="danger" %}
Wenn dies also auf **`Not required`** gesetzt ist, k√∂nnte ein Angreifer einen **PR zum Branch** durchf√ºhren, der die Ausf√ºhrung ausl√∂st, indem er die b√∂sartige Codeausf√ºhrung zur **`cloudbuild.yml`**-Datei hinzuf√ºgt und die cloudbuild-Ausf√ºhrung kompromittiert (beachte, dass cloudbuild den Code VON dem PR herunterladen wird, sodass es die b√∂sartige **`cloudbuild.yml`** ausf√ºhren wird).
{% endhint %}

Dar√ºber hinaus ist es einfach zu sehen, ob eine cloudbuild-Ausf√ºhrung durchgef√ºhrt werden muss, wenn du einen PR sendest, da sie in Github erscheint:

<figure><img src="../../../.gitbook/assets/image (340).png" alt=""><figcaption></figcaption></figure>

{% hint style="warning" %}
Selbst wenn der cloudbuild nicht ausgef√ºhrt wird, wird der Angreifer in der Lage sein, den **Projektnamen eines GCP-Projekts** zu sehen, das zur Firma geh√∂rt.
{% endhint %}

{% hint style="success" %}
Lerne & √ºbe AWS Hacking:<img src="../../../.gitbook/assets/image (1).png" alt="" data-size="line">[**HackTricks Training AWS Red Team Expert (ARTE)**](https://training.hacktricks.xyz/courses/arte)<img src="../../../.gitbook/assets/image (1).png" alt="" data-size="line">\
Lerne & √ºbe GCP Hacking: <img src="../../../.gitbook/assets/image (2).png" alt="" data-size="line">[**HackTricks Training GCP Red Team Expert (GRTE)**<img src="../../../.gitbook/assets/image (2).png" alt="" data-size="line">](https://training.hacktricks.xyz/courses/grte)

<details>

<summary>Support HackTricks</summary>

* √úberpr√ºfe die [**Abonnementpl√§ne**](https://github.com/sponsors/carlospolop)!
* **Tritt der** üí¨ [**Discord-Gruppe**](https://discord.gg/hRep4RUj7f) oder der [**Telegram-Gruppe**](https://t.me/peass) bei oder **folge** uns auf **Twitter** üê¶ [**@hacktricks\_live**](https://twitter.com/hacktricks\_live)**.**
* **Teile Hacking-Tricks, indem du PRs zu den** [**HackTricks**](https://github.com/carlospolop/hacktricks) und [**HackTricks Cloud**](https://github.com/carlospolop/hacktricks-cloud) GitHub-Repos einreichst.

</details>
{% endhint %}
