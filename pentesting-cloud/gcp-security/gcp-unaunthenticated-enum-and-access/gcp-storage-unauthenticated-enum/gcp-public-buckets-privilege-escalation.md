# GCP - Kamu Bucket'larÄ± Yetki YÃ¼kseltme

{% hint style="success" %}
AWS Hacking'i Ã¶ÄŸrenin ve pratik yapÄ±n:<img src="../../../../.gitbook/assets/image (1).png" alt="" data-size="line">[**HackTricks EÄŸitim AWS KÄ±rmÄ±zÄ± Ekip UzmanÄ± (ARTE)**](https://training.hacktricks.xyz/courses/arte)<img src="../../../../.gitbook/assets/image (1).png" alt="" data-size="line">\
GCP Hacking'i Ã¶ÄŸrenin ve pratik yapÄ±n: <img src="../../../../.gitbook/assets/image (2).png" alt="" data-size="line">[**HackTricks EÄŸitim GCP KÄ±rmÄ±zÄ± Ekip UzmanÄ± (GRTE)**<img src="../../../../.gitbook/assets/image (2).png" alt="" data-size="line">](https://training.hacktricks.xyz/courses/grte)

<details>

<summary>HackTricks'i Destekleyin</summary>

* [**abonelik planlarÄ±nÄ±**](https://github.com/sponsors/carlospolop) kontrol edin!
* **ğŸ’¬ [**Discord grubuna**](https://discord.gg/hRep4RUj7f) veya [**telegram grubuna**](https://t.me/peass) katÄ±lÄ±n ya da **Twitter'da** ğŸ¦ [**@hacktricks\_live**](https://twitter.com/hacktricks\_live)** bizi takip edin.**
* **Hacking ipuÃ§larÄ±nÄ± paylaÅŸmak iÃ§in** [**HackTricks**](https://github.com/carlospolop/hacktricks) ve [**HackTricks Cloud**](https://github.com/carlospolop/hacktricks-cloud) github reposuna PR gÃ¶nderin.

</details>
{% endhint %}

## Bucket'larda Yetki YÃ¼kseltme

EÄŸer bucket politikasÄ± â€œallUsersâ€ veya â€œallAuthenticatedUsersâ€'Ä±n **bucket politikasÄ±nÄ± yazmasÄ±na** (**storage.buckets.setIamPolicy** izni)** izin veriyorsa,** o zaman herkes bucket politikasÄ±nÄ± deÄŸiÅŸtirebilir ve kendisine tam eriÅŸim verebilir.

### Ä°zinleri Kontrol Etme

Bir bucket Ã¼zerindeki izinleri kontrol etmenin 2 yolu vardÄ±r. Birincisi, `https://www.googleapis.com/storage/v1/b/BUCKET_NAME/iam` adresine bir istek yaparak veya `gsutil iam get gs://BUCKET_NAME` komutunu Ã§alÄ±ÅŸtÄ±rarak istemektir.

Ancak, eÄŸer kullanÄ±cÄ±nÄ±z (potansiyel olarak allUsers veya allAuthenticatedUsers'a ait) bucket'Ä±n iam politikasÄ±nÄ± okuma iznine sahip deÄŸilse (storage.buckets.getIamPolicy), bu iÅŸe yaramaz.

Her zaman iÅŸe yarayacak diÄŸer seÃ§enek, bucket'Ä±n testPermissions uÃ§ noktasÄ±nÄ± kullanarak belirtilen izne sahip olup olmadÄ±ÄŸÄ±nÄ±zÄ± belirlemektir. Ã–rneÄŸin, ÅŸu adresi ziyaret ederek: `https://www.googleapis.com/storage/v1/b/BUCKET_NAME/iam/testPermissions?permissions=storage.buckets.delete&permissions=storage.buckets.get&permissions=storage.buckets.getIamPolicy&permissions=storage.buckets.setIamPolicy&permissions=storage.buckets.update&permissions=storage.objects.create&permissions=storage.objects.delete&permissions=storage.objects.get&permissions=storage.objects.list&permissions=storage.objects.update`

### YÃ¼kseltme

`Storage Admin` yetkisini `allAuthenticatedUsers`'a vermek iÃ§in ÅŸu komut Ã§alÄ±ÅŸtÄ±rÄ±labilir:
```bash
gsutil iam ch allAuthenticatedUsers:admin gs://BUCKET_NAME
```
BaÅŸka bir saldÄ±rÄ±, **bucket'Ä± kaldÄ±rmak ve onu kendi hesabÄ±nÄ±zda yeniden oluÅŸturmak suretiyle sahipliÄŸi Ã§almaktÄ±r**.

## References

* [https://rhinosecuritylabs.com/gcp/google-cloud-platform-gcp-bucket-enumeration/](https://rhinosecuritylabs.com/gcp/google-cloud-platform-gcp-bucket-enumeration/)

{% hint style="success" %}
Learn & practice AWS Hacking:<img src="../../../../.gitbook/assets/image (1).png" alt="" data-size="line">[**HackTricks Training AWS Red Team Expert (ARTE)**](https://training.hacktricks.xyz/courses/arte)<img src="../../../../.gitbook/assets/image (1).png" alt="" data-size="line">\
Learn & practice GCP Hacking: <img src="../../../../.gitbook/assets/image (2).png" alt="" data-size="line">[**HackTricks Training GCP Red Team Expert (GRTE)**<img src="../../../../.gitbook/assets/image (2).png" alt="" data-size="line">](https://training.hacktricks.xyz/courses/grte)

<details>

<summary>Support HackTricks</summary>

* Check the [**subscription plans**](https://github.com/sponsors/carlospolop)!
* **Join the** ğŸ’¬ [**Discord group**](https://discord.gg/hRep4RUj7f) or the [**telegram group**](https://t.me/peass) or **follow** us on **Twitter** ğŸ¦ [**@hacktricks\_live**](https://twitter.com/hacktricks\_live)**.**
* **Share hacking tricks by submitting PRs to the** [**HackTricks**](https://github.com/carlospolop/hacktricks) and [**HackTricks Cloud**](https://github.com/carlospolop/hacktricks-cloud) github repos.

</details>
{% endhint %}
