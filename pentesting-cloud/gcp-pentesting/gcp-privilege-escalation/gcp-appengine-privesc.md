# GCP - AppEngine Privesc

{% hint style="success" %}
Nau캜ite i ve쬭ajte hakovanje AWS-a: <img src="/.gitbook/assets/image.png" alt="" data-size="line">[**HackTricks Training AWS Red Team Expert (ARTE)**](https://training.hacktricks.xyz/courses/arte)<img src="/.gitbook/assets/image.png" alt="" data-size="line">\
Nau캜ite i ve쬭ajte hakovanje GCP-a: <img src="/.gitbook/assets/image (2).png" alt="" data-size="line">[**HackTricks Training GCP Red Team Expert (GRTE)**<img src="/.gitbook/assets/image (2).png" alt="" data-size="line">](https://training.hacktricks.xyz/courses/grte)

<details>

<summary>Podr쬴te HackTricks</summary>

* Proverite [**planove pretplate**](https://github.com/sponsors/carlospolop)!
* **Pridru쬴te se** 游눫 [**Discord grupi**](https://discord.gg/hRep4RUj7f) ili [**telegram grupi**](https://t.me/peass) ili nas **pratite** na **Twitteru** 游냕 [**@hacktricks\_live**](https://twitter.com/hacktricks\_live)**.**
* **Podelite hakovanje trikova slanjem PR-ova na** [**HackTricks**](https://github.com/carlospolop/hacktricks) i [**HackTricks Cloud**](https://github.com/carlospolop/hacktricks-cloud) github repozitorijume.

</details>
{% endhint %}

## App Engine

Za vi코e informacija o App Engine proverite:

{% content-ref url="../gcp-services/gcp-app-engine-enum.md" %}
[gcp-app-engine-enum.md](../gcp-services/gcp-app-engine-enum.md)
{% endcontent-ref %}

### `appengine.applications.get`, `appengine.instances.get`, `appengine.instances.list`, `appengine.operations.get`, `appengine.operations.list`, `appengine.services.get`, `appengine.services.list`, `appengine.versions.create`, `appengine.versions.get`, `appengine.versions.list`, `cloudbuild.builds.get`,`iam.serviceAccounts.actAs`, `resourcemanager.projects.get`, `storage.objects.create`, `storage.objects.list`

Ovo su potrebne dozvole za **implementaciju aplikacije kori코캖enjem `gcloud` cli**. Mo쬯a se **`get`** i **`list`** mogu **izbe캖i**.

Mo쬰te prona캖i primere Python koda na [https://github.com/GoogleCloudPlatform/python-docs-samples/tree/main/appengine](https://github.com/GoogleCloudPlatform/python-docs-samples/tree/main/appengine)

Podrazumevano, ime usluge aplikacije 캖e biti **`default`**, i mo쬰 postojati samo 1 instanca sa istim imenom.\
Da biste promenili to i kreirali drugu aplikaciju, u **`app.yaml`**, promenite vrednost klju캜a na ne코to poput **`service: my-second-app`**
```bash
cd python-docs-samples/appengine/flexible/hello_world
gcloud app deploy #Upload and start application inside the folder
```
Dajte mu bar 10-15 minuta, ako ne uspe, pozovite **jo코 jednom da implementira** i sa캜ekajte nekoliko minuta.

{% hint style="info" %}
**Mogu캖e je nazna캜iti koji Servisni nalog koristiti** ali se podrazumevano koristi podrazumevani SA za App Engine.
{% endhint %}

URL aplikacije je ne코to poput `https://<ime-projekta>.oa.r.appspot.com/` ili `https://<ime-servisa>-dot-<ime-projekta>.oa.r.appspot.com`

### `appengine.instances.enableDebug`, `appengine.instances.get`, `appengine.instances.list`, `appengine.operations.get`, `appengine.services.get`, `appengine.services.list`, `appengine.versions.get`, `appengine.versions.list`, `compute.projects.get`

Sa ovim dozvolama, mogu캖e je **prijaviti se putem ssh na instance App Engine** tipa **fleksibilne** (ne standardne). Neki od dozvola **`list`** i **`get`** **mo쬯a nisu zaista potrebni**.
```bash
gcloud app instances ssh --service <app-name> --version <version-id> <ID>
```
### `appengine.applications.update`, `appengine.operations.get`

Mislim da ovo samo menja pozadinski SA koji 캖e Google koristiti za postavljanje aplikacija, tako da ne mislim da mo쬰te zloupotrebiti ovo da biste ukrali nalog za usluge.

{% code overflow="wrap" %}
```bash
gcloud app update --service-account=<sa_email>
```
{% endcode %}

### `appengine.versions.getFileContents`, `appengine.versions.update`

Nisam siguran kako koristiti ove dozvole ili da li su korisne (napomena da kada promenite kod, nova verzija se kreira pa ne znam da li mo쬰te jednostavno a쬿rirati kod ili IAM ulogu jednog, ali pretpostavljam da biste trebali mo캖i, mo쬯a menjaju캖i kod unutar kante??).

### Pristup za pisanje preko kanti

캛ak i sa pristupom za pisanje preko kanti gde se nalazi izvorni kod **NIJE BILO mogu캖e izvr코iti proizvoljni kod modifikuju캖i izvorni kod i `manifest.json`**.\
Mo쬯a ako pratite kantu i otkrijete trenutak kada se kreira nova verzija i kada se izvorni kod i manifest otpremaju, mogu캖e je promeniti ih tako da nova verzija koristi one sa zadnjim vratima??

Izgleda da su slojevi kontejnera tako캠e sme코teni u kanti, mo쬯a ih menjaju캖i?

{% hint style="success" %}
Nau캜ite i ve쬭ajte hakovanje AWS-a:<img src="/.gitbook/assets/image.png" alt="" data-size="line">[**HackTricks Obuka AWS Crveni Tim Stru캜njak (ARTE)**](https://training.hacktricks.xyz/courses/arte)<img src="/.gitbook/assets/image.png" alt="" data-size="line">\
Nau캜ite i ve쬭ajte hakovanje GCP-a: <img src="/.gitbook/assets/image (2).png" alt="" data-size="line">[**HackTricks Obuka GCP Crveni Tim Stru캜njak (GRTE)**<img src="/.gitbook/assets/image (2).png" alt="" data-size="line">](https://training.hacktricks.xyz/courses/grte)

<details>

<summary>Podr쬴te HackTricks</summary>

* Proverite [**planove pretplate**](https://github.com/sponsors/carlospolop)!
* **Pridru쬴te se** 游눫 [**Discord grupi**](https://discord.gg/hRep4RUj7f) ili [**telegram grupi**](https://t.me/peass) ili **pratite** nas na **Twitteru** 游냕 [**@hacktricks\_live**](https://twitter.com/hacktricks\_live)**.**
* **Podelite hakovanje trikova podno코enjem PR-ova na** [**HackTricks**](https://github.com/carlospolop/hacktricks) i [**HackTricks Cloud**](https://github.com/carlospolop/hacktricks-cloud) github repozitorijumima.

</details>
{% endhint %}
