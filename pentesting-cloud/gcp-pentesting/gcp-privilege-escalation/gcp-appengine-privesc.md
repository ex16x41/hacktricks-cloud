# GCP - AppEngine Privilege Escalation

{% hint style="success" %}
AWS Hacking'Ä± Ã¶ÄŸrenin ve uygulayÄ±n: <img src="/.gitbook/assets/image.png" alt="" data-size="line">[**HackTricks EÄŸitim AWS KÄ±rmÄ±zÄ± TakÄ±m UzmanÄ± (ARTE)**](https://training.hacktricks.xyz/courses/arte)<img src="/.gitbook/assets/image.png" alt="" data-size="line">\
GCP Hacking'i Ã¶ÄŸrenin ve uygulayÄ±n: <img src="/.gitbook/assets/image (2).png" alt="" data-size="line">[**HackTricks EÄŸitim GCP KÄ±rmÄ±zÄ± TakÄ±m UzmanÄ± (GRTE)**<img src="/.gitbook/assets/image (2).png" alt="" data-size="line">](https://training.hacktricks.xyz/courses/grte)

<details>

<summary>HackTricks'i Destekleyin</summary>

* [**Abonelik planlarÄ±nÄ±**](https://github.com/sponsors/carlospolop) kontrol edin!
* ğŸ’¬ [**Discord grubuna**](https://discord.gg/hRep4RUj7f) katÄ±lÄ±n veya [**telegram grubuna**](https://t.me/peass) katÄ±lÄ±n veya bizi **Twitter** ğŸ¦ [**@hacktricks\_live**](https://twitter.com/hacktricks\_live)** takip edin.**
* **Hacking pÃ¼f noktalarÄ±nÄ± paylaÅŸarak PR'ler gÃ¶ndererek** [**HackTricks**](https://github.com/carlospolop/hacktricks) ve [**HackTricks Cloud**](https://github.com/carlospolop/hacktricks-cloud) github depolarÄ±na katkÄ±da bulunun.

</details>
{% endhint %}

## App Engine

App Engine hakkÄ±nda daha fazla bilgi iÃ§in ÅŸuraya bakÄ±n:

{% content-ref url="../gcp-services/gcp-app-engine-enum.md" %}
[gcp-app-engine-enum.md](../gcp-services/gcp-app-engine-enum.md)
{% endcontent-ref %}

### `appengine.applications.get`, `appengine.instances.get`, `appengine.instances.list`, `appengine.operations.get`, `appengine.operations.list`, `appengine.services.get`, `appengine.services.list`, `appengine.versions.create`, `appengine.versions.get`, `appengine.versions.list`, `cloudbuild.builds.get`,`iam.serviceAccounts.actAs`, `resourcemanager.projects.get`, `storage.objects.create`, `storage.objects.list`

Bunlar, **`gcloud` cli** kullanarak bir Uygulama daÄŸÄ±tmak iÃ§in gerekli izinlerdir. Belki **`get`** ve **`list`** olanlar **Ã¶nlenmiÅŸ** olabilir.

Python kod Ã¶rneklerini [https://github.com/GoogleCloudPlatform/python-docs-samples/tree/main/appengine](https://github.com/GoogleCloudPlatform/python-docs-samples/tree/main/appengine) adresinde bulabilirsiniz.

VarsayÄ±lan olarak, Uygulama servisinin adÄ± **`default`** olacaktÄ±r ve aynÄ± ada sahip yalnÄ±zca 1 Ã¶rnek olabilir.\
Bunu deÄŸiÅŸtirmek ve ikinci bir Uygulama oluÅŸturmak iÃ§in, **`app.yaml`** dosyasÄ±nda kÃ¶k anahtarÄ±nÄ±n deÄŸerini **`service: my-second-app`** gibi bir ÅŸeye deÄŸiÅŸtirin.
```bash
cd python-docs-samples/appengine/flexible/hello_world
gcloud app deploy #Upload and start application inside the folder
```
En az 10-15 dakika bekleyin, iÅŸe yaramazsa **baÅŸka bir daÄŸÄ±tÄ±m** Ã§aÄŸÄ±rÄ±n ve birkaÃ§ dakika bekleyin.

{% hint style="info" %}
**KullanÄ±lacak Hizmet HesabÄ±nÄ± belirtmek mÃ¼mkÃ¼ndÃ¼r** ancak varsayÄ±lan olarak, App Engine varsayÄ±lan Hizmet HesabÄ± kullanÄ±lÄ±r.
{% endhint %}

UygulamanÄ±n URL'si `https://<proj-adÄ±>.oa.r.appspot.com/` veya `https://<servis_adÄ±>-dot-<proj-adÄ±>.oa.r.appspot.com` gibi bir ÅŸeydir.

### `appengine.instances.enableDebug`, `appengine.instances.get`, `appengine.instances.list`, `appengine.operations.get`, `appengine.services.get`, `appengine.services.list`, `appengine.versions.get`, `appengine.versions.list`, `compute.projects.get`

Bu izinlerle, **esnek** tÃ¼rÃ¼ndeki App Engine Ã¶rneklerine **ssh Ã¼zerinden giriÅŸ yapmak mÃ¼mkÃ¼ndÃ¼r**. BazÄ± **`list`** ve **`get`** izinlerinin **gerÃ§ekten gerekli olmayabileceÄŸi** unutulmamalÄ±dÄ±r.
```bash
gcloud app instances ssh --service <app-name> --version <version-id> <ID>
```
### `appengine.applications.update`, `appengine.operations.get`

Bence bu sadece arka planda kullanÄ±lacak SA google'Ä± deÄŸiÅŸtirir, bu yÃ¼zden bu Ã¶zelliÄŸi kÃ¶tÃ¼ye kullanarak hizmet hesabÄ±nÄ± Ã§alamazsÄ±nÄ±z.

{% code overflow="wrap" %}
```bash
gcloud app update --service-account=<sa_email>
```
### `appengine.versions.getFileContents`, `appengine.versions.update`

Bu izinleri nasÄ±l kullanacaÄŸÄ±nÄ±zdan emin deÄŸilim veya bunlarÄ±n faydalÄ± olup olmadÄ±ÄŸÄ±nÄ± (kodu deÄŸiÅŸtirdiÄŸinizde yeni bir sÃ¼rÃ¼m oluÅŸturulur, bu yÃ¼zden sadece kodu mu yoksa birinin IAM rolÃ¼nÃ¼ mÃ¼ gÃ¼ncelleyebileceÄŸinizi bilmiyorum, ancak muhtemelen bunu yapabilirsiniz, belki kovadaki kodu deÄŸiÅŸtirerek??).

### Kovalar Ã¼zerinde Yazma EriÅŸimi

Kaynak kodunun bulunduÄŸu kovalara yazma eriÅŸimi olsa bile **kaynak kodunu ve `manifest.json`'Ä± deÄŸiÅŸtirerek keyfi kodu yÃ¼rÃ¼tmek MÃœMKÃœN DEÄÄ°LDÄ°R**.\
Belki yeni bir sÃ¼rÃ¼m oluÅŸturulduÄŸu anda ve kaynak kodu ile manifest yÃ¼klendiÄŸi anda bu anÄ± tespit edip, onlarÄ± deÄŸiÅŸtirerek yeni sÃ¼rÃ¼mÃ¼n backdoored olanlarÄ± kullanmasÄ±nÄ± saÄŸlamak mÃ¼mkÃ¼n olabilir mi??

AyrÄ±ca, konteyner katmanlarÄ±nÄ±n kovada depolandÄ±ÄŸÄ± gÃ¶rÃ¼nÃ¼yor, belki onlarÄ± deÄŸiÅŸtirmek mÃ¼mkÃ¼n olabilir?

{% hint style="success" %}
AWS Hacking'i Ã¶ÄŸrenin ve uygulayÄ±n:<img src="/.gitbook/assets/image.png" alt="" data-size="line">[**HackTricks EÄŸitimi AWS KÄ±rmÄ±zÄ± TakÄ±m UzmanÄ± (ARTE)**](https://training.hacktricks.xyz/courses/arte)<img src="/.gitbook/assets/image.png" alt="" data-size="line">\
GCP Hacking'i Ã¶ÄŸrenin ve uygulayÄ±n: <img src="/.gitbook/assets/image (2).png" alt="" data-size="line">[**HackTricks EÄŸitimi GCP KÄ±rmÄ±zÄ± TakÄ±m UzmanÄ± (GRTE)**<img src="/.gitbook/assets/image (2).png" alt="" data-size="line">](https://training.hacktricks.xyz/courses/grte)

<details>

<summary>HackTricks'i Destekleyin</summary>

* [**Abonelik planlarÄ±nÄ±**](https://github.com/sponsors/carlospolop) kontrol edin!
* ğŸ’¬ [**Discord grubuna**](https://discord.gg/hRep4RUj7f) katÄ±lÄ±n veya [**telegram grubuna**](https://t.me/peass) katÄ±lÄ±n veya bizi **Twitter** ğŸ¦ [**@hacktricks\_live**](https://twitter.com/hacktricks\_live)** takip edin.**
* **Hacking pÃ¼f noktalarÄ±nÄ± paylaÅŸarak PR'ler gÃ¶ndererek** [**HackTricks**](https://github.com/carlospolop/hacktricks) ve [**HackTricks Cloud**](https://github.com/carlospolop/hacktricks-cloud) github depolarÄ±na katkÄ±da bulunun.

</details>
{% endhint %}
