# GCP - Cloud Run Enum

{% hint style="success" %}
AWS Hacking'Ä± Ã¶ÄŸrenin ve uygulayÄ±n: <img src="/.gitbook/assets/image.png" alt="" data-size="line">[**HackTricks EÄŸitim AWS KÄ±rmÄ±zÄ± TakÄ±m UzmanÄ± (ARTE)**](https://training.hacktricks.xyz/courses/arte)<img src="/.gitbook/assets/image.png" alt="" data-size="line">\
GCP Hacking'ini Ã¶ÄŸrenin ve uygulayÄ±n: <img src="/.gitbook/assets/image (2).png" alt="" data-size="line">[**HackTricks EÄŸitim GCP KÄ±rmÄ±zÄ± TakÄ±m UzmanÄ± (GRTE)**<img src="/.gitbook/assets/image (2).png" alt="" data-size="line">](https://training.hacktricks.xyz/courses/grte)

<details>

<summary>HackTricks'i Destekleyin</summary>

* [**Abonelik planlarÄ±nÄ±**](https://github.com/sponsors/carlospolop) kontrol edin!
* ğŸ’¬ [**Discord grubuna**](https://discord.gg/hRep4RUj7f) katÄ±lÄ±n veya [**telegram grubuna**](https://t.me/peass) katÄ±lÄ±n veya bizi **Twitter** ğŸ¦ [**@hacktricks\_live**](https://twitter.com/hacktricks\_live)** takip edin.**
* **Hacking pÃ¼f noktalarÄ±nÄ± paylaÅŸarak PR'ler gÃ¶ndererek** [**HackTricks**](https://github.com/carlospolop/hacktricks) ve [**HackTricks Cloud**](https://github.com/carlospolop/hacktricks-cloud) github depolarÄ±na katkÄ±da bulunun.

</details>
{% endhint %}

## Cloud Run <a href="#reviewing-cloud-run-configurations" id="reviewing-cloud-run-configurations"></a>

Cloud Run, Google'Ä±n Ã¶lÃ§eklenebilir altyapÄ±sÄ±nda doÄŸrudan **konteynerleri Ã§alÄ±ÅŸtÄ±rmanÄ±za** olanak tanÄ±yan sunucusuz yÃ¶netilen bir hesaplama platformudur.

Konteynerinizi Ã§alÄ±ÅŸtÄ±rabilir veya Go, Node.js, Python, Java, .NET Core veya Ruby kullanÄ±yorsanÄ±z, sizin iÃ§in **konteyneri oluÅŸturan** [kaynak tabanlÄ± daÄŸÄ±tÄ±m](https://cloud.google.com/run/docs/deploying-source-code) seÃ§eneÄŸini kullanabilirsiniz.

Google, Cloud Run'Ä± **Google Cloud'daki diÄŸer hizmetlerle iyi Ã§alÄ±ÅŸacak ÅŸekilde inÅŸa etmiÅŸtir**, bÃ¶ylece tam Ã¶zellikli uygulamalar oluÅŸturabilirsiniz.

### Hizmetler ve iÅŸler <a href="#services-and-jobs" id="services-and-jobs"></a>

Cloud Run'da, kodunuz ya bir _**hizmet**_ olarak sÃ¼rekli Ã§alÄ±ÅŸabilir ya da bir _**iÅŸ**_ olarak Ã§alÄ±ÅŸabilir. Hem hizmetler hem de iÅŸler aynÄ± ortamda Ã§alÄ±ÅŸÄ±r ve Google Cloud'daki diÄŸer hizmetlerle aynÄ± entegrasyonlarÄ± kullanabilir.

* **Cloud Run hizmetleri.** Web isteklerine veya olaylara yanÄ±t veren kodu Ã§alÄ±ÅŸtÄ±rmak iÃ§in kullanÄ±lÄ±r.
* **Cloud Run iÅŸleri.** Bir iÅŸi gerÃ§ekleÅŸtiren (bir iÅŸ) ve iÅŸ tamamlandÄ±ÄŸÄ±nda sona eren kodu Ã§alÄ±ÅŸtÄ±rmak iÃ§in kullanÄ±lÄ±r.

## Cloud Run Hizmeti

Google [Cloud Run](https://cloud.google.com/run), env deÄŸiÅŸkenlerini arayabileceÄŸiniz baÅŸka bir sunucusuz tekliftir. Cloud Run, varsayÄ±lan olarak konteyner iÃ§inde 8080 numaralÄ± baÄŸlantÄ± noktasÄ±nda Ã§alÄ±ÅŸan kÃ¼Ã§Ã¼k bir web sunucusu oluÅŸturur ve bir HTTP GET isteÄŸi bekleyen bir iÅŸlemi baÅŸlatÄ±r. Ä°stek alÄ±ndÄ±ÄŸÄ±nda bir iÅŸlem yÃ¼rÃ¼tÃ¼lÃ¼r ve iÅŸlem gÃ¼nlÃ¼ÄŸÃ¼ bir HTTP yanÄ±tÄ± aracÄ±lÄ±ÄŸÄ±yla Ã§Ä±ktÄ±lanÄ±r.

### Ä°lgili detaylar

* **VarsayÄ±lan olarak**, web sunucusuna **eriÅŸim** **genel** olmasÄ±na raÄŸmen, aynÄ± zamanda **dahili trafiÄŸe sÄ±nÄ±rlanabilir** (VPC...)\
AyrÄ±ca, web sunucusuna eriÅŸim iÃ§in **kimlik doÄŸrulama** ya **tÃ¼mÃ¼ne izin verilebilir** ya da **IAM aracÄ±lÄ±ÄŸÄ±yla kimlik doÄŸrulama gerektirebilir**.
* VarsayÄ±lan olarak, **ÅŸifreleme** Google tarafÄ±ndan yÃ¶netilen bir anahtar kullanÄ±r, ancak **KMS**'den bir **MÃ¼ÅŸteri YÃ¶netimli Åifreleme AnahtarÄ± (CMEK)** de **seÃ§ilebilir**.
* VarsayÄ±lan olarak, kullanÄ±lan **hizmet hesabÄ±** proje Ã¼zerinde **EditÃ¶r** eriÅŸimine sahip olan **Compute Engine varsayÄ±lanÄ±dÄ±r** ve **`cloud-platform`** kapsamÄ±na sahiptir.
* YÃ¼rÃ¼tme iÃ§in **aÃ§Ä±k metin ortam deÄŸiÅŸkenleri** tanÄ±mlamak mÃ¼mkÃ¼ndÃ¼r ve hatta **bulut sÄ±rlarÄ±nÄ± baÄŸlamak** veya **bulut sÄ±rlarÄ±nÄ± ortam deÄŸiÅŸkenlerine eklemek** mÃ¼mkÃ¼ndÃ¼r.
* AyrÄ±ca **Cloud SQL ile baÄŸlantÄ±lar eklemek** ve **bir dosya sistemi baÄŸlamak** mÃ¼mkÃ¼ndÃ¼r.
* DaÄŸÄ±tÄ±lan hizmetlerin **URL'leri** ÅŸuna benzer: **`https://<svc-name>-<random>.a.run.app`**
* Bir Ã‡alÄ±ÅŸtÄ±rma Hizmeti **birden fazla sÃ¼rÃ¼m veya revizyon**a sahip olabilir ve **trafiÄŸi** Ã§eÅŸitli revizyonlar arasÄ±nda **bÃ¶lÃ¼ÅŸtÃ¼rebilir**.

### NumaralandÄ±rma
```bash
# List services
gcloud run services list
gcloud run services list --platform=managed
gcloud run services list --platform=gke

# Get info of a service
gcloud run services describe --region <region> <svc-name>

# Get info of all the services together
gcloud run services list --format=yaml
gcloud run services list --platform=managed --format=json
gcloud run services list --platform=gke --format=json

# Get policy
gcloud run services get-iam-policy --region <region> <svc-name>

# Get revisions
gcloud run revisions list --region <region>
gcloud run revisions describe --region <region> <revision>

# Get domains
gcloud run domain-mappings list
gcloud run domain-mappings describe <name>

# Attempt to trigger a job unauthenticated
curl <url>

# Attempt to trigger a job with your current gcloud authorization
curl -H "Authorization: Bearer $(gcloud auth print-identity-token)" <url>
```
## Bulut Ã‡alÄ±ÅŸtÄ±rma Ä°ÅŸleri

Bulut Ã‡alÄ±ÅŸtÄ±rma iÅŸleri, **tamamlanana kadar Ã§alÄ±ÅŸan ve istekleri karÅŸÄ±lamayan konteynerler iÃ§in daha uygun olabilir**. Ä°ÅŸlerin istekleri karÅŸÄ±lamak veya bir baÄŸlantÄ± noktasÄ±nda dinlemek gibi bir yeteneÄŸi yoktur. Bu, Bulut Ã‡alÄ±ÅŸtÄ±rma hizmetlerinin aksine, iÅŸlerin bir web sunucusu iÃ§ermemesi gerektiÄŸi anlamÄ±na gelir. Bunun yerine, iÅŸ konteynerleri iÅŸlerini bitirdiklerinde Ã§Ä±kmalÄ±dÄ±r.

### NumaralandÄ±rma
```bash
gcloud beta run jobs list
gcloud beta run jobs describe --region <region> <job-name>
gcloud beta run jobs get-iam-policy --region <region> <job-name>
```
## Yetki YÃ¼kseltme

AÅŸaÄŸÄ±daki sayfada, **yetkileri yÃ¼kseltmek iÃ§in bulut Ã§alÄ±ÅŸtÄ±rma izinlerini kÃ¶tÃ¼ye kullanma** yÃ¶ntemlerini kontrol edebilirsiniz:

{% content-ref url="../../gcp-security/gcp-privilege-escalation/gcp-run-privesc.md" %}
[gcp-run-privesc.md](../../gcp-security/gcp-privilege-escalation/gcp-run-privesc.md)
{% endcontent-ref %}

## Kimlik DoÄŸrulamasÄ±z EriÅŸim

{% content-ref url="../../gcp-security/gcp-unaunthenticated-enum-and-access/gcp-cloud-run-unauthenticated-enum.md" %}
[gcp-cloud-run-unauthenticated-enum.md](../../gcp-security/gcp-unaunthenticated-enum-and-access/gcp-cloud-run-unauthenticated-enum.md)
{% endcontent-ref %}

## SaldÄ±rÄ± SonrasÄ± Ä°ÅŸlemler

{% content-ref url="../../gcp-security/gcp-post-exploitation/gcp-cloud-run-post-exploitation.md" %}
[gcp-cloud-run-post-exploitation.md](../../gcp-security/gcp-post-exploitation/gcp-cloud-run-post-exploitation.md)
{% endcontent-ref %}

## KalÄ±cÄ±lÄ±k

{% content-ref url="../../gcp-security/gcp-persistence/gcp-cloud-run-persistence.md" %}
[gcp-cloud-run-persistence.md](../../gcp-security/gcp-persistence/gcp-cloud-run-persistence.md)
{% endcontent-ref %}

## Referanslar

* [https://cloud.google.com/run/docs/overview/what-is-cloud-run](https://cloud.google.com/run/docs/overview/what-is-cloud-run)

{% hint style="success" %}
AWS Hacking Ã¶ÄŸrenin ve pratik yapÄ±n:<img src="/.gitbook/assets/image.png" alt="" data-size="line">[**HackTricks EÄŸitimi AWS Red Team Expert (ARTE)**](https://training.hacktricks.xyz/courses/arte)<img src="/.gitbook/assets/image.png" alt="" data-size="line">\
GCP Hacking Ã¶ÄŸrenin ve pratik yapÄ±n: <img src="/.gitbook/assets/image (2).png" alt="" data-size="line">[**HackTricks EÄŸitimi GCP Red Team Expert (GRTE)**<img src="/.gitbook/assets/image (2).png" alt="" data-size="line">](https://training.hacktricks.xyz/courses/grte)

<details>

<summary>HackTricks'i Destekleyin</summary>

* [**Abonelik planlarÄ±nÄ±**](https://github.com/sponsors/carlospolop) kontrol edin!
* ğŸ’¬ [**Discord grubuna**](https://discord.gg/hRep4RUj7f) katÄ±lÄ±n veya [**telegram grubuna**](https://t.me/peass) katÄ±lÄ±n veya bizi **Twitter** ğŸ¦ [**@hacktricks\_live**](https://twitter.com/hacktricks\_live)** takip edin.**
* **Hacking pÃ¼f noktalarÄ±nÄ± paylaÅŸarak PR'ler gÃ¶ndererek** [**HackTricks**](https://github.com/carlospolop/hacktricks) ve [**HackTricks Cloud**](https://github.com/carlospolop/hacktricks-cloud) github depolarÄ±na katkÄ±da bulunun.

</details>
{% endhint %}
