# Kubernetes Pentesting

{% hint style="success" %}
Μάθετε & εξασκηθείτε στο AWS Hacking:<img src="../../.gitbook/assets/image (1) (1) (1).png" alt="" data-size="line">[**HackTricks Training AWS Red Team Expert (ARTE)**](https://training.hacktricks.xyz/courses/arte)<img src="../../.gitbook/assets/image (1) (1) (1).png" alt="" data-size="line">\
Μάθετε & εξασκηθείτε στο GCP Hacking: <img src="../../.gitbook/assets/image (2).png" alt="" data-size="line">[**HackTricks Training GCP Red Team Expert (GRTE)**<img src="../../.gitbook/assets/image (2).png" alt="" data-size="line">](https://training.hacktricks.xyz/courses/grte)

<details>

<summary>Υποστήριξη HackTricks</summary>

* Ελέγξτε τα [**σχέδια συνδρομής**](https://github.com/sponsors/carlospolop)!
* **Εγγραφείτε στην** 💬 [**ομάδα Discord**](https://discord.gg/hRep4RUj7f) ή στην [**ομάδα telegram**](https://t.me/peass) ή **ακολουθήστε** μας στο **Twitter** 🐦 [**@hacktricks\_live**](https://twitter.com/hacktricks_live)**.**
* **Μοιραστείτε κόλπα hacking υποβάλλοντας PRs στα** [**HackTricks**](https://github.com/carlospolop/hacktricks) και [**HackTricks Cloud**](https://github.com/carlospolop/hacktricks-cloud) github repos.

</details>
{% endhint %}

## Kubernetes Basics

Αν δεν γνωρίζετε τίποτα για το Kubernetes, αυτό είναι ένα **καλό ξεκίνημα**. Διαβάστε το για να μάθετε για την **αρχιτεκτονική, τα συστατικά και τις βασικές ενέργειες** στο Kubernetes:

{% content-ref url="kubernetes-basics.md" %}
[kubernetes-basics.md](kubernetes-basics.md)
{% endcontent-ref %}

### Labs to practice and learn

* [https://securekubernetes.com/](https://securekubernetes.com)
* [https://madhuakula.com/kubernetes-goat/index.html](https://madhuakula.com/kubernetes-goat/index.html)

## Hardening Kubernetes / Automatic Tools

{% content-ref url="kubernetes-hardening/" %}
[kubernetes-hardening](kubernetes-hardening/)
{% endcontent-ref %}

## Manual Kubernetes Pentest

### From the Outside

Υπάρχουν αρκετές πιθανές **υπηρεσίες Kubernetes που θα μπορούσατε να βρείτε εκτεθειμένες** στο Διαδίκτυο (ή μέσα σε εσωτερικά δίκτυα). Αν τις βρείτε, ξέρετε ότι υπάρχει περιβάλλον Kubernetes εκεί.

Ανάλογα με τη διαμόρφωση και τα προνόμιά σας, μπορεί να είστε σε θέση να εκμεταλλευτείτε αυτό το περιβάλλον, για περισσότερες πληροφορίες:

{% content-ref url="pentesting-kubernetes-services/" %}
[pentesting-kubernetes-services](pentesting-kubernetes-services/)
{% endcontent-ref %}

### Enumeration inside a Pod

Αν καταφέρετε να **συμβιβάσετε ένα Pod**, διαβάστε την επόμενη σελίδα για να μάθετε πώς να καταμετρήσετε και να προσπαθήσετε να **ανεβάσετε προνόμια/διαφύγετε**:

{% content-ref url="attacking-kubernetes-from-inside-a-pod.md" %}
[attacking-kubernetes-from-inside-a-pod.md](attacking-kubernetes-from-inside-a-pod.md)
{% endcontent-ref %}

### Enumerating Kubernetes with Credentials

Μπορεί να έχετε καταφέρει να συμβιβάσετε **διαπιστευτήρια χρήστη, ένα token χρήστη ή κάποιο token υπηρεσίας**. Μπορείτε να το χρησιμοποιήσετε για να μιλήσετε με την υπηρεσία API του Kubernetes και να προσπαθήσετε να **καταμετρήσετε για να μάθετε περισσότερα** γι' αυτό:

{% content-ref url="kubernetes-enumeration.md" %}
[kubernetes-enumeration.md](kubernetes-enumeration.md)
{% endcontent-ref %}

Ένα άλλο σημαντικό στοιχείο σχετικά με την καταμέτρηση και την κακή χρήση των δικαιωμάτων Kubernetes είναι ο **Κανόνας Ελέγχου Πρόσβασης με Βάση Ρόλους (RBAC)**. Αν θέλετε να εκμεταλλευτείτε τα δικαιώματα, θα πρέπει πρώτα να διαβάσετε γι' αυτό εδώ:

{% content-ref url="kubernetes-role-based-access-control-rbac.md" %}
[kubernetes-role-based-access-control-rbac.md](kubernetes-role-based-access-control-rbac.md)
{% endcontent-ref %}

#### Γνωρίζοντας για το RBAC και έχοντας καταμετρήσει το περιβάλλον, μπορείτε τώρα να προσπαθήσετε να εκμεταλλευτείτε τα δικαιώματα με:

{% content-ref url="abusing-roles-clusterroles-in-kubernetes/" %}
[abusing-roles-clusterroles-in-kubernetes](abusing-roles-clusterroles-in-kubernetes/)
{% endcontent-ref %}

### Privesc to a different Namespace

Αν έχετε συμβιβάσει ένα namespace, μπορείτε δυνητικά να διαφύγετε σε άλλα namespaces με πιο ενδιαφέροντα δικαιώματα/πόρους:

{% content-ref url="kubernetes-namespace-escalation.md" %}
[kubernetes-namespace-escalation.md](kubernetes-namespace-escalation.md)
{% endcontent-ref %}

### From Kubernetes to the Cloud

Αν έχετε συμβιβάσει έναν λογαριασμό K8s ή ένα pod, μπορεί να είστε σε θέση να μετακινηθείτε σε άλλες υπηρεσίες cloud. Αυτό συμβαίνει επειδή σε υπηρεσίες cloud όπως το AWS ή το GCP είναι δυνατό να **δώσετε δικαιώματα σε έναν K8s SA πάνω από το cloud**.

{% content-ref url="kubernetes-pivoting-to-clouds.md" %}
[kubernetes-pivoting-to-clouds.md](kubernetes-pivoting-to-clouds.md)
{% endcontent-ref %}

{% hint style="success" %}
Μάθετε & εξασκηθείτε στο AWS Hacking:<img src="../../.gitbook/assets/image (1) (1) (1).png" alt="" data-size="line">[**HackTricks Training AWS Red Team Expert (ARTE)**](https://training.hacktricks.xyz/courses/arte)<img src="../../.gitbook/assets/image (1) (1) (1).png" alt="" data-size="line">\
Μάθετε & εξασκηθείτε στο GCP Hacking: <img src="../../.gitbook/assets/image (2).png" alt="" data-size="line">[**HackTricks Training GCP Red Team Expert (GRTE)**<img src="../../.gitbook/assets/image (2).png" alt="" data-size="line">](https://training.hacktricks.xyz/courses/grte)

<details>

<summary>Υποστήριξη HackTricks</summary>

* Ελέγξτε τα [**σχέδια συνδρομής**](https://github.com/sponsors/carlospolop)!
* **Εγγραφείτε στην** 💬 [**ομάδα Discord**](https://discord.gg/hRep4RUj7f) ή στην [**ομάδα telegram**](https://t.me/peass) ή **ακολουθήστε** μας στο **Twitter** 🐦 [**@hacktricks\_live**](https://twitter.com/hacktricks_live)**.**
* **Μοιραστείτε κόλπα hacking υποβάλλοντας PRs στα** [**HackTricks**](https://github.com/carlospolop/hacktricks) και [**HackTricks Cloud**](https://github.com/carlospolop/hacktricks-cloud) github repos.

</details>
{% endhint %}
