# Kubernetes Pentesting

{% hint style="success" %}
Aprenda e pratique Hacking AWS:<img src="../../.gitbook/assets/image (1) (1).png" alt="" data-size="line">[**HackTricks Training AWS Red Team Expert (ARTE)**](https://training.hacktricks.xyz/courses/arte)<img src="../../.gitbook/assets/image (1) (1).png" alt="" data-size="line">\
Aprenda e pratique Hacking GCP: <img src="../../.gitbook/assets/image (2).png" alt="" data-size="line">[**HackTricks Training GCP Red Team Expert (GRTE)**<img src="../../.gitbook/assets/image (2).png" alt="" data-size="line">](https://training.hacktricks.xyz/courses/grte)

<details>

<summary>Support HackTricks</summary>

* Confira os [**planos de assinatura**](https://github.com/sponsors/carlospolop)!
* **Junte-se ao** ğŸ’¬ [**grupo do Discord**](https://discord.gg/hRep4RUj7f) ou ao [**grupo do telegram**](https://t.me/peass) ou **siga**-nos no **Twitter** ğŸ¦ [**@hacktricks\_live**](https://twitter.com/hacktricks\_live)**.**
* **Compartilhe truques de hacking enviando PRs para o** [**HackTricks**](https://github.com/carlospolop/hacktricks) e [**HackTricks Cloud**](https://github.com/carlospolop/hacktricks-cloud) repositÃ³rios do github.

</details>
{% endhint %}

## Kubernetes Basics

Se vocÃª nÃ£o sabe nada sobre Kubernetes, este Ã© um **bom comeÃ§o**. Leia para aprender sobre a **arquitetura, componentes e aÃ§Ãµes bÃ¡sicas** no Kubernetes:

{% content-ref url="kubernetes-basics.md" %}
[kubernetes-basics.md](kubernetes-basics.md)
{% endcontent-ref %}

### Labs to practice and learn

* [https://securekubernetes.com/](https://securekubernetes.com)
* [https://madhuakula.com/kubernetes-goat/index.html](https://madhuakula.com/kubernetes-goat/index.html)

## Hardening Kubernetes / Automatic Tools

{% content-ref url="kubernetes-hardening/" %}
[kubernetes-hardening](kubernetes-hardening/)
{% endcontent-ref %}

## Manual Kubernetes Pentest

### From the Outside

Existem vÃ¡rios **serviÃ§os Kubernetes que vocÃª pode encontrar expostos** na Internet (ou dentro de redes internas). Se vocÃª encontrÃ¡-los, sabe que hÃ¡ um ambiente Kubernetes lÃ¡.

Dependendo da configuraÃ§Ã£o e de seus privilÃ©gios, vocÃª pode ser capaz de abusar desse ambiente, para mais informaÃ§Ãµes:

{% content-ref url="pentesting-kubernetes-services/" %}
[pentesting-kubernetes-services](pentesting-kubernetes-services/)
{% endcontent-ref %}

### Enumeration inside a Pod

Se vocÃª conseguir **comprometer um Pod**, leia a pÃ¡gina seguinte para aprender como enumerar e tentar **escalar privilÃ©gios/escapar**:

{% content-ref url="attacking-kubernetes-from-inside-a-pod.md" %}
[attacking-kubernetes-from-inside-a-pod.md](attacking-kubernetes-from-inside-a-pod.md)
{% endcontent-ref %}

### Enumerating Kubernetes with Credentials

VocÃª pode ter conseguido comprometer **credenciais de usuÃ¡rio, um token de usuÃ¡rio ou algum token de conta de serviÃ§o**. VocÃª pode usÃ¡-lo para se comunicar com o serviÃ§o API do Kubernetes e tentar **enumerÃ¡-lo para aprender mais** sobre ele:

{% content-ref url="kubernetes-enumeration.md" %}
[kubernetes-enumeration.md](kubernetes-enumeration.md)
{% endcontent-ref %}

Outro detalhe importante sobre enumeraÃ§Ã£o e abuso de permissÃµes no Kubernetes Ã© o **Controle de Acesso Baseado em FunÃ§Ãµes (RBAC)** do Kubernetes. Se vocÃª quiser abusar de permissÃµes, primeiro deve ler sobre isso aqui:

{% content-ref url="kubernetes-role-based-access-control-rbac.md" %}
[kubernetes-role-based-access-control-rbac.md](kubernetes-role-based-access-control-rbac.md)
{% endcontent-ref %}

#### Sabendo sobre RBAC e tendo enumerado o ambiente, vocÃª pode agora tentar abusar das permissÃµes com:

{% content-ref url="abusing-roles-clusterroles-in-kubernetes/" %}
[abusing-roles-clusterroles-in-kubernetes](abusing-roles-clusterroles-in-kubernetes/)
{% endcontent-ref %}

### Privesc to a different Namespace

Se vocÃª comprometeu um namespace, pode potencialmente escapar para outros namespaces com permissÃµes/recursos mais interessantes:

{% content-ref url="kubernetes-namespace-escalation.md" %}
[kubernetes-namespace-escalation.md](kubernetes-namespace-escalation.md)
{% endcontent-ref %}

### From Kubernetes to the Cloud

Se vocÃª comprometeu uma conta K8s ou um pod, pode ser capaz de se mover para outras nuvens. Isso ocorre porque em nuvens como AWS ou GCP Ã© possÃ­vel **dar permissÃµes a um SA K8s sobre a nuvem**.

{% content-ref url="kubernetes-pivoting-to-clouds.md" %}
[kubernetes-pivoting-to-clouds.md](kubernetes-pivoting-to-clouds.md)
{% endcontent-ref %}

{% hint style="success" %}
Aprenda e pratique Hacking AWS:<img src="../../.gitbook/assets/image (1) (1).png" alt="" data-size="line">[**HackTricks Training AWS Red Team Expert (ARTE)**](https://training.hacktricks.xyz/courses/arte)<img src="../../.gitbook/assets/image (1) (1).png" alt="" data-size="line">\
Aprenda e pratique Hacking GCP: <img src="../../.gitbook/assets/image (2).png" alt="" data-size="line">[**HackTricks Training GCP Red Team Expert (GRTE)**<img src="../../.gitbook/assets/image (2).png" alt="" data-size="line">](https://training.hacktricks.xyz/courses/grte)

<details>

<summary>Support HackTricks</summary>

* Confira os [**planos de assinatura**](https://github.com/sponsors/carlospolop)!
* **Junte-se ao** ğŸ’¬ [**grupo do Discord**](https://discord.gg/hRep4RUj7f) ou ao [**grupo do telegram**](https://t.me/peass) ou **siga**-nos no **Twitter** ğŸ¦ [**@hacktricks\_live**](https://twitter.com/hacktricks\_live)**.**
* **Compartilhe truques de hacking enviando PRs para o** [**HackTricks**](https://github.com/carlospolop/hacktricks) e [**HackTricks Cloud**](https://github.com/carlospolop/hacktricks-cloud) repositÃ³rios do github.

</details>
{% endhint %}
