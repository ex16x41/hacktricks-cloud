# Kubernetes Namespace Escalation

{% hint style="success" %}
Leer & oefen AWS Hacking:<img src="../../.gitbook/assets/image (1).png" alt="" data-size="line">[**HackTricks Training AWS Red Team Expert (ARTE)**](https://training.hacktricks.xyz/courses/arte)<img src="../../.gitbook/assets/image (1).png" alt="" data-size="line">\
Leer & oefen GCP Hacking: <img src="../../.gitbook/assets/image (2).png" alt="" data-size="line">[**HackTricks Training GCP Red Team Expert (GRTE)**<img src="../../.gitbook/assets/image (2).png" alt="" data-size="line">](https://training.hacktricks.xyz/courses/grte)

<details>

<summary>Support HackTricks</summary>

* Kyk na die [**subskripsie planne**](https://github.com/sponsors/carlospolop)!
* **Sluit aan by die** üí¨ [**Discord groep**](https://discord.gg/hRep4RUj7f) of die [**telegram groep**](https://t.me/peass) of **volg** ons op **Twitter** üê¶ [**@hacktricks\_live**](https://twitter.com/hacktricks\_live)**.**
* **Deel hacking truuks deur PRs in te dien na die** [**HackTricks**](https://github.com/carlospolop/hacktricks) en [**HackTricks Cloud**](https://github.com/carlospolop/hacktricks-cloud) github repos.

</details>
{% endhint %}

In Kubernetes is dit redelik algemeen dat jy op een of ander manier **binne 'n namespace slaag** (deur sommige gebruikersakkrediteer te steel of deur 'n pod te kompromitteer). egter, gewoonlik sal jy belangstel in **eskalering na 'n ander namespace aangesien daar meer interessante dinge gevind kan word**.

Hier is 'n paar tegnieke wat jy kan probeer om na 'n ander namespace te ontsnap:

### Misbruik K8s voorregte

Dit is duidelik dat as die rekening wat jy gesteel het sensitiewe voorregte oor die namespace het waartoe jy kan eskaleer, jy aksies soos **om pods te skep** met diensrekeninge in die NS, **uit te voer** 'n skulp in 'n reeds bestaande pod binne die ns, of die **geheime** SA tokens te lees, kan misbruik.

Vir meer inligting oor watter voorregte jy kan misbruik, lees:

{% content-ref url="abusing-roles-clusterroles-in-kubernetes/" %}
[abusing-roles-clusterroles-in-kubernetes](abusing-roles-clusterroles-in-kubernetes/)
{% endcontent-ref %}

### Ontsnap na die node

As jy na die node kan ontsnap, hetsy omdat jy 'n pod gecompromitteer het en jy kan ontsnap of omdat jy 'n bevoorregte pod kan skep en ontsnap, kan jy verskeie dinge doen om ander SA tokens te steel:

* Kyk vir **SA tokens wat in ander docker houers gemonteer is** wat in die node loop
* Kyk vir nuwe **kubeconfig l√™ers in die node met ekstra toestemmings** gegee aan die node
* As geaktiveer (of aktiveer dit jouself) probeer om **gemirroreerde pods van ander namespaces te skep** aangesien jy toegang tot daardie namespaces se standaard token rekeninge mag kry (Ek het dit nog nie getoets nie)

Al hierdie tegnieke word verduidelik in:

{% content-ref url="attacking-kubernetes-from-inside-a-pod.md" %}
[attacking-kubernetes-from-inside-a-pod.md](attacking-kubernetes-from-inside-a-pod.md)
{% endcontent-ref %}

{% hint style="success" %}
Leer & oefen AWS Hacking:<img src="../../.gitbook/assets/image (1).png" alt="" data-size="line">[**HackTricks Training AWS Red Team Expert (ARTE)**](https://training.hacktricks.xyz/courses/arte)<img src="../../.gitbook/assets/image (1).png" alt="" data-size="line">\
Leer & oefen GCP Hacking: <img src="../../.gitbook/assets/image (2).png" alt="" data-size="line">[**HackTricks Training GCP Red Team Expert (GRTE)**<img src="../../.gitbook/assets/image (2).png" alt="" data-size="line">](https://training.hacktricks.xyz/courses/grte)

<details>

<summary>Support HackTricks</summary>

* Kyk na die [**subskripsie planne**](https://github.com/sponsors/carlospolop)!
* **Sluit aan by die** üí¨ [**Discord groep**](https://discord.gg/hRep4RUj7f) of die [**telegram groep**](https://t.me/peass) of **volg** ons op **Twitter** üê¶ [**@hacktricks\_live**](https://twitter.com/hacktricks\_live)**.**
* **Deel hacking truuks deur PRs in te dien na die** [**HackTricks**](https://github.com/carlospolop/hacktricks) en [**HackTricks Cloud**](https://github.com/carlospolop/hacktricks-cloud) github repos.

</details>
{% endhint %}
