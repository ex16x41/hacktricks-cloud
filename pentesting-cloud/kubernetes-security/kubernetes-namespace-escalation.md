# Eskalacja przestrzeni nazw Kubernetes

{% hint style="success" %}
Dowiedz siÄ™ i Ä‡wicz Hacking AWS:<img src="/.gitbook/assets/image.png" alt="" data-size="line">[**HackTricks Training AWS Red Team Expert (ARTE)**](https://training.hacktricks.xyz/courses/arte)<img src="/.gitbook/assets/image.png" alt="" data-size="line">\
Dowiedz siÄ™ i Ä‡wicz Hacking GCP: <img src="/.gitbook/assets/image (2).png" alt="" data-size="line">[**HackTricks Training GCP Red Team Expert (GRTE)**<img src="/.gitbook/assets/image (2).png" alt="" data-size="line">](https://training.hacktricks.xyz/courses/grte)

<details>

<summary>Wesprzyj HackTricks</summary>

* SprawdÅº [**plany subskrypcyjne**](https://github.com/sponsors/carlospolop)!
* **DoÅ‚Ä…cz do** ğŸ’¬ [**grupy Discord**](https://discord.gg/hRep4RUj7f) lub [**grupy telegramowej**](https://t.me/peass) lub **Å›ledÅº** nas na **Twitterze** ğŸ¦ [**@hacktricks\_live**](https://twitter.com/hacktricks\_live)**.**
* **UdostÄ™pniaj sztuczki hakerskie, przesyÅ‚ajÄ…c PR-y do** [**HackTricks**](https://github.com/carlospolop/hacktricks) i [**HackTricks Cloud**](https://github.com/carlospolop/hacktricks-cloud) repozytoriÃ³w na GitHubie.

</details>
{% endhint %}

W Kubernetes jest doÅ›Ä‡ powszechne, Å¼e w jakiÅ› sposÃ³b **uda ci siÄ™ dostaÄ‡ do przestrzeni nazw** (poprzez kradzieÅ¼ pewnych poÅ›wiadczeÅ„ uÅ¼ytkownika lub kompromitacjÄ™ poda). Zazwyczaj jednak bÄ™dziesz zainteresowany **eskalacjÄ… do innej przestrzeni nazw, poniewaÅ¼ tam moÅ¼na znaleÅºÄ‡ bardziej interesujÄ…ce rzeczy**.

Oto kilka technik, ktÃ³rych moÅ¼esz sprÃ³bowaÄ‡, aby uciec do innej przestrzeni nazw:

### NaduÅ¼yj uprawnienia K8s

OczywiÅ›cie, jeÅ›li konto, ktÃ³re udaÅ‚o ci siÄ™ ukraÅ›Ä‡, ma wraÅ¼liwe uprawnienia w przestrzeni nazw, do ktÃ³rej chcesz siÄ™ zescalowaÄ‡, moÅ¼esz naduÅ¼yÄ‡ dziaÅ‚aÅ„ takie jak **tworzenie podÃ³w** z kontami usÅ‚ug w NS, **wykonywanie** powÅ‚oki w juÅ¼ istniejÄ…cym podzie wewnÄ…trz ns, lub odczytaj **tajne** tokeny SA.

Aby uzyskaÄ‡ wiÄ™cej informacji na temat uprawnieÅ„, ktÃ³re moÅ¼esz naduÅ¼yÄ‡, przeczytaj:

{% content-ref url="abusing-roles-clusterroles-in-kubernetes/" %}
[abusing-roles-clusterroles-in-kubernetes](abusing-roles-clusterroles-in-kubernetes/)
{% endcontent-ref %}

### Ucieczka do wÄ™zÅ‚a

JeÅ›li moÅ¼esz uciec do wÄ™zÅ‚a, albo dlatego, Å¼e skompromitowaÅ‚eÅ› poda i moÅ¼esz uciec, albo dlatego, Å¼e moÅ¼esz utworzyÄ‡ pod uprzywilejowany i uciec, moÅ¼esz zrobiÄ‡ kilka rzeczy, aby ukraÅ›Ä‡ inne tokeny SA:

* SprawdÅº **tokeny SA zamontowane w innych kontenerach Docker** dziaÅ‚ajÄ…cych na wÄ™Åºle
* SprawdÅº nowe **pliki kubeconfig na wÄ™Åºle z dodatkowymi uprawnieniami** udzielonymi wÄ™zÅ‚owi
* JeÅ›li jest to wÅ‚Ä…czone (lub wÅ‚Ä…cz to samodzielnie), sprÃ³buj **tworzyÄ‡ odbite podÃ³w z innych przestrzeni nazw**, poniewaÅ¼ moÅ¼esz uzyskaÄ‡ dostÄ™p do kont tokenÃ³w domyÅ›lnych tych przestrzeni nazw (jeszcze tego nie testowaÅ‚em)

Wszystkie te techniki sÄ… wyjaÅ›nione w:

{% content-ref url="attacking-kubernetes-from-inside-a-pod.md" %}
[attacking-kubernetes-from-inside-a-pod.md](attacking-kubernetes-from-inside-a-pod.md)
{% endcontent-ref %}

{% hint style="success" %}
Dowiedz siÄ™ i Ä‡wicz Hacking AWS:<img src="/.gitbook/assets/image.png" alt="" data-size="line">[**HackTricks Training AWS Red Team Expert (ARTE)**](https://training.hacktricks.xyz/courses/arte)<img src="/.gitbook/assets/image.png" alt="" data-size="line">\
Dowiedz siÄ™ i Ä‡wicz Hacking GCP: <img src="/.gitbook/assets/image (2).png" alt="" data-size="line">[**HackTricks Training GCP Red Team Expert (GRTE)**<img src="/.gitbook/assets/image (2).png" alt="" data-size="line">](https://training.hacktricks.xyz/courses/grte)

<details>

<summary>Wesprzyj HackTricks</summary>

* SprawdÅº [**plany subskrypcyjne**](https://github.com/sponsors/carlospolop)!
* **DoÅ‚Ä…cz do** ğŸ’¬ [**grupy Discord**](https://discord.gg/hRep4RUj7f) lub [**grupy telegramowej**](https://t.me/peass) lub **Å›ledÅº** nas na **Twitterze** ğŸ¦ [**@hacktricks\_live**](https://twitter.com/hacktricks\_live)**.**
* **UdostÄ™pniaj sztuczki hakerskie, przesyÅ‚ajÄ…c PR-y do** [**HackTricks**](https://github.com/carlospolop/hacktricks) i [**HackTricks Cloud**](https://github.com/carlospolop/hacktricks-cloud) repozytoriÃ³w na GitHubie.

</details>
{% endhint %}
