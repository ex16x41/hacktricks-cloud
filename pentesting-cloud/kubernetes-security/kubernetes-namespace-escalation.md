# Kubernetes Namespace Escalation

{% hint style="success" %}
Lerne & √ºbe AWS Hacking:<img src="../../.gitbook/assets/image (1).png" alt="" data-size="line">[**HackTricks Training AWS Red Team Expert (ARTE)**](https://training.hacktricks.xyz/courses/arte)<img src="../../.gitbook/assets/image (1).png" alt="" data-size="line">\
Lerne & √ºbe GCP Hacking: <img src="../../.gitbook/assets/image (2).png" alt="" data-size="line">[**HackTricks Training GCP Red Team Expert (GRTE)**<img src="../../.gitbook/assets/image (2).png" alt="" data-size="line">](https://training.hacktricks.xyz/courses/grte)

<details>

<summary>Support HackTricks</summary>

* √úberpr√ºfe die [**Abonnementpl√§ne**](https://github.com/sponsors/carlospolop)!
* **Tritt der** üí¨ [**Discord-Gruppe**](https://discord.gg/hRep4RUj7f) oder der [**Telegram-Gruppe**](https://t.me/peass) bei oder **folge** uns auf **Twitter** üê¶ [**@hacktricks\_live**](https://twitter.com/hacktricks\_live)**.**
* **Teile Hacking-Tricks, indem du PRs zu den** [**HackTricks**](https://github.com/carlospolop/hacktricks) und [**HackTricks Cloud**](https://github.com/carlospolop/hacktricks-cloud) GitHub-Repos einreichst.

</details>
{% endhint %}

In Kubernetes ist es ziemlich h√§ufig, dass **du es schaffst, in einen Namespace zu gelangen** (indem du einige Benutzeranmeldeinformationen stiehlst oder einen Pod kompromittierst). In der Regel wirst du jedoch daran interessiert sein, **in einen anderen Namespace zu eskalieren, da dort interessantere Dinge zu finden sind**.

Hier sind einige Techniken, die du ausprobieren kannst, um in einen anderen Namespace zu entkommen:

### Missbrauch von K8s-Rechten

Offensichtlich kannst du, wenn das Konto, das du gestohlen hast, sensible Berechtigungen √ºber den Namespace hat, in den du eskalieren m√∂chtest, Aktionen wie **Pods erstellen** mit Dienstkonten im NS, **eine** Shell in einem bereits existierenden Pod innerhalb des NS **ausf√ºhren** oder die **Secret** SA-Tokens lesen.

F√ºr weitere Informationen dar√ºber, welche Berechtigungen du missbrauchen kannst, lies:

{% content-ref url="abusing-roles-clusterroles-in-kubernetes/" %}
[abusing-roles-clusterroles-in-kubernetes](abusing-roles-clusterroles-in-kubernetes/)
{% endcontent-ref %}

### Entkommen zum Knoten

Wenn du zum Knoten entkommen kannst, entweder weil du einen Pod kompromittiert hast und entkommen kannst oder weil du einen privilegierten Pod erstellen und entkommen kannst, k√∂nntest du mehrere Dinge tun, um andere SA-Tokens zu stehlen:

* √úberpr√ºfe auf **SA-Tokens, die in anderen Docker-Containern** laufen, die im Knoten ausgef√ºhrt werden
* √úberpr√ºfe auf neue **kubeconfig-Dateien im Knoten mit zus√§tzlichen Berechtigungen**, die dem Knoten gegeben wurden
* Wenn aktiviert (oder aktiviere es selbst), versuche **gespiegelte Pods anderer Namespaces zu erstellen**, da du m√∂glicherweise Zugriff auf die Standard-Token-Konten dieser Namespaces erh√§ltst (ich habe dies noch nicht getestet)

All diese Techniken sind erkl√§rt in:

{% content-ref url="attacking-kubernetes-from-inside-a-pod.md" %}
[attacking-kubernetes-from-inside-a-pod.md](attacking-kubernetes-from-inside-a-pod.md)
{% endcontent-ref %}

{% hint style="success" %}
Lerne & √ºbe AWS Hacking:<img src="../../.gitbook/assets/image (1).png" alt="" data-size="line">[**HackTricks Training AWS Red Team Expert (ARTE)**](https://training.hacktricks.xyz/courses/arte)<img src="../../.gitbook/assets/image (1).png" alt="" data-size="line">\
Lerne & √ºbe GCP Hacking: <img src="../../.gitbook/assets/image (2).png" alt="" data-size="line">[**HackTricks Training GCP Red Team Expert (GRTE)**<img src="../../.gitbook/assets/image (2).png" alt="" data-size="line">](https://training.hacktricks.xyz/courses/grte)

<details>

<summary>Support HackTricks</summary>

* √úberpr√ºfe die [**Abonnementpl√§ne**](https://github.com/sponsors/carlospolop)!
* **Tritt der** üí¨ [**Discord-Gruppe**](https://discord.gg/hRep4RUj7f) oder der [**Telegram-Gruppe**](https://t.me/peass) bei oder **folge** uns auf **Twitter** üê¶ [**@hacktricks\_live**](https://twitter.com/hacktricks\_live)**.**
* **Teile Hacking-Tricks, indem du PRs zu den** [**HackTricks**](https://github.com/carlospolop/hacktricks) und [**HackTricks Cloud**](https://github.com/carlospolop/hacktricks-cloud) GitHub-Repos einreichst.

</details>
{% endhint %}
