# Kubernetes GÃ¼venlik BaÄŸlam(lar)Ä±

{% hint style="success" %}
AWS Hacking'i Ã¶ÄŸrenin ve uygulayÄ±n:<img src="/.gitbook/assets/image.png" alt="" data-size="line">[**HackTricks EÄŸitim AWS KÄ±rmÄ±zÄ± TakÄ±m UzmanÄ± (ARTE)**](https://training.hacktricks.xyz/courses/arte)<img src="/.gitbook/assets/image.png" alt="" data-size="line">\
GCP Hacking'i Ã¶ÄŸrenin ve uygulayÄ±n: <img src="/.gitbook/assets/image (2).png" alt="" data-size="line">[**HackTricks EÄŸitim GCP KÄ±rmÄ±zÄ± TakÄ±m UzmanÄ± (GRTE)**<img src="/.gitbook/assets/image (2).png" alt="" data-size="line">](https://training.hacktricks.xyz/courses/grte)

<details>

<summary>HackTricks'i Destekleyin</summary>

* [**Abonelik planlarÄ±nÄ±**](https://github.com/sponsors/carlospolop) kontrol edin!
* ğŸ’¬ [**Discord grubuna**](https://discord.gg/hRep4RUj7f) katÄ±lÄ±n veya [**telegram grubuna**](https://t.me/peass) katÄ±lÄ±n veya bizi **Twitter** ğŸ¦ [**@hacktricks\_live**](https://twitter.com/hacktricks\_live)** takip edin.**
* **HackTricks** ve **HackTricks Cloud** github depolarÄ±na PR gÃ¶ndererek hacking pÃ¼f noktalarÄ±nÄ± paylaÅŸÄ±n.

</details>
{% endhint %}

## PodSecurityContext <a href="#podsecuritycontext-v1-core" id="podsecuritycontext-v1-core"></a>

[**DokÃ¼mantasyondan:**](https://kubernetes.io/docs/reference/generated/kubernetes-api/v1.23/#podsecuritycontext-v1-core)

Bir Pod'un gÃ¼venlik baÄŸlamÄ±nÄ± belirlerken birkaÃ§ Ã¶zellik kullanabilirsiniz. Savunma odaklÄ± bir gÃ¼venlik aÃ§Ä±sÄ±ndan ÅŸunlarÄ± dÃ¼ÅŸÃ¼nmelisiniz:

* **runASNonRoot**'u **True** olarak ayarlamak
* **runAsUser**'Ä± yapÄ±landÄ±rmak
* MÃ¼mkÃ¼nse, **seLinuxOptions** ve **seccompProfile**'Ä± belirterek **izinleri sÄ±nÄ±rlamak**
* **runAsGroup** ve **supplementaryGroups** aracÄ±lÄ±ÄŸÄ±yla **ayrÄ±calÄ±k grubu** eriÅŸimi vermemek

| <p><a href="https://kubernetes.io/docs/reference/generated/kubernetes-api/v1.23/#podsecuritycontext-v1-core"><strong>fsGroup</strong></a><br><em>tam sayÄ±</em></p>                                                                                                                                                                                                                                                 | <p>Bir Pod'daki **tÃ¼m konteynerlere uygulanan Ã¶zel bir ek grup**. BazÄ± hacim tÃ¼rleri Kubelet'e bu hacmin sahipliÄŸini Pod tarafÄ±ndan sahiplenilen ÅŸekilde deÄŸiÅŸtirme izni verir:<br>1. Sahip olan GID FSGroup olacaktÄ±r<br>2. setgid biti ayarlanÄ±r (hacimde oluÅŸturulan yeni dosyalar FSGroup'a ait olacaktÄ±r)<br>3. Ä°zin bitleri rw-rw---- ile OR'lanÄ±r. BelirtilmemiÅŸse, Kubelet hiÃ§bir hacmin sahipliÄŸini ve izinlerini deÄŸiÅŸtirmez</p> |
| ----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------- | ------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------- |
| <p><a href="https://kubernetes.io/docs/reference/generated/kubernetes-api/v1.23/#podsecuritycontext-v1-core"><strong>fsGroupChangePolicy</strong></a><br><em>dize</em></p>                                                                                                                                                                                                                                      | Bu, Pod iÃ§inde aÃ§Ä±klanmadan Ã¶nce hacmin sahipliÄŸini ve iznini deÄŸiÅŸtirme davranÄ±ÅŸÄ±nÄ± tanÄ±mlar.                                                                                                                                                                                                                                                                                                                                                                         |
| <p><a href="https://kubernetes.io/docs/reference/generated/kubernetes-api/v1.23/#podsecuritycontext-v1-core"><strong>runAsGroup</strong></a><br><em>tam sayÄ±</em></p>                                                                                                                                                                                                                                              | Konteyner iÅŸlemi giriÅŸ noktasÄ±nÄ± Ã§alÄ±ÅŸtÄ±rmak iÃ§in kullanÄ±lacak **GID**. BelirtilmemiÅŸse Ã§alÄ±ÅŸma zamanÄ± varsayÄ±lanÄ±nÄ± kullanÄ±r. AyrÄ±ca SecurityContext iÃ§inde de ayarlanabilir.                                                                                                                                                                                                                                                                                                                                                        |
| <p><a href="https://kubernetes.io/docs/reference/generated/kubernetes-api/v1.23/#podsecuritycontext-v1-core"><strong>runAsNonRoot</strong></a><br><em>mantÄ±ksal</em></p>                                                                                                                                                                                                                                            | Konteynerin bir kÃ¶k kullanÄ±cÄ± olarak Ã§alÄ±ÅŸtÄ±rÄ±lmamasÄ± gerektiÄŸini belirtir. EÄŸer doÄŸruysa, Kubelet Ã§alÄ±ÅŸma zamanÄ±nda gÃ¶rÃ¼ntÃ¼yÃ¼ doÄŸrular ve UID 0 (kÃ¶k) olarak Ã§alÄ±ÅŸtÄ±rÄ±lmadÄ±ÄŸÄ±ndan emin olur ve konteyneri baÅŸlatmaz.                                                                                                                                                                                                                                                                          |
| <p><a href="https://kubernetes.io/docs/reference/generated/kubernetes-api/v1.23/#podsecuritycontext-v1-core"><strong>runAsUser</strong></a><br><em>tam sayÄ±</em></p>                                                                                                                                                                                                                                               | Konteyner iÅŸlemi giriÅŸ noktasÄ±nÄ± Ã§alÄ±ÅŸtÄ±rmak iÃ§in kullanÄ±lacak **UID**. BelirtilmemiÅŸse, gÃ¶rÃ¼ntÃ¼ meta verilerinde belirtilen kullanÄ±cÄ±ya varsayÄ±lan olarak ayarlanÄ±r.                                                                                                                                                                                                                                                                                                                                                              |
| <p><a href="https://kubernetes.io/docs/reference/generated/kubernetes-api/v1.23/#podsecuritycontext-v1-core"><strong>seLinuxOptions</strong></a><br><a href="https://kubernetes.io/docs/reference/generated/kubernetes-api/v1.23/#selinuxoptions-v1-core"><em>SELinuxOptions</em></a><br><em>seLinux</em> hakkÄ±nda daha fazla bilgi</p>                                                           | **TÃ¼m konteynerlere uygulanacak SELinux baÄŸlamÄ±**. BelirtilmemiÅŸse, konteyner Ã§alÄ±ÅŸma zamanÄ± her bir konteyner iÃ§in rastgele bir SELinux baÄŸlamÄ± tahsis eder.                                                                                                                                                                                                                                                                                                                             |
| <p><a href="https://kubernetes.io/docs/reference/generated/kubernetes-api/v1.23/#podsecuritycontext-v1-core"><strong>seccompProfile</strong></a><br><a href="https://kubernetes.io/docs/reference/generated/kubernetes-api/v1.23/#seccompprofile-v1-core"><em>SeccompProfile</em></a><br><em>Seccomp</em> hakkÄ±nda daha fazla bilgi</p>                                                           | Bu Pod'daki konteynerler tarafÄ±ndan kullanÄ±lacak **seccomp seÃ§enekleri**.                                                                                                                                                                                                                                                                                                                                                                                                                         |
| <p><a href="https://kubernetes.io/docs/reference/generated/kubernetes-api/v1.23/#podsecuritycontext-v1-core"><strong>supplementalGroups</strong></a><br><em>tam sayÄ± dizisi</em></p>                                                                                                                                                                                                                                | Her konteynerde Ã§alÄ±ÅŸtÄ±rÄ±lan ilk iÅŸleme uygulanan **gruplarÄ±n listesi**, konteynerin birincil GID'sine ek olarak.                                                                                                                                                                                                                                                                                                                                                                  |
| <p><a href="https://kubernetes.io/docs/reference/generated/kubernetes-api/v1.23/#podsecuritycontext-v1-core"><strong>sysctls</strong></a><br><a href="https://kubernetes.io/docs/reference/generated/kubernetes-api/v1.23/#sysctl-v1-core"><em>Sysctl</em></a> <em>dizi</em><br><em>Sysctl</em> hakkÄ±nda daha fazla bilgi</p> | Sysctls, Pod iÃ§in kullanÄ±lan **isim alanlÄ± sysctl'leri** iÃ§eren bir liste tutar. Desteklenmeyen sysctls'ye sahip Pod'lar (konteyner Ã§alÄ±ÅŸma zamanÄ± tarafÄ±ndan) baÅŸlatÄ±lamayabilir.                                                                                                                                                                                                                                                                                                                                        |
| <p><a href="https://kubernetes.io/docs/reference/generated/kubernetes-api/v1.23/#podsecuritycontext-v1-core"><strong>windowsOptions</strong></a><br><a href="https://kubernetes.io/docs/reference/generated/kubernetes-api/v1.23/#windowssecuritycontextoptions-v1-core"><em>WindowsSecurityContextOptions</em></a></p>                                                                                           | TÃ¼m konteynerlere uygulanan Windows'a Ã¶zgÃ¼ ayarlar. BelirtilmemiÅŸse, bir konteynerin SecurityContext iÃ§indeki seÃ§enekler kullanÄ±lacaktÄ±r.                                                                                                                                                                                                                                                                                                                                               |
## SecurityContext

[**DokÃ¼mantasyondan:**](https://kubernetes.io/docs/reference/generated/kubernetes-api/v1.23/#securitycontext-v1-core)

Bu baÄŸlam **konteyner tanÄ±mlarÄ±** iÃ§inde ayarlanÄ±r. Savunma odaklÄ± bir gÃ¼venlik aÃ§Ä±sÄ±ndan ÅŸunlarÄ± dÃ¼ÅŸÃ¼nmelisiniz:

* **allowPrivilegeEscalation**'Ä± **False** olarak ayarlayÄ±n
* Hassas **yetenekleri** eklemeyin (ve ihtiyacÄ±nÄ±z olmayanlarÄ± kaldÄ±rÄ±n)
* **privileged**'Ä± **False** olarak ayarlayÄ±n
* MÃ¼mkÃ¼nse, **readOnlyFilesystem**'i **True** olarak ayarlayÄ±n
* **runAsNonRoot**'u **True** olarak ayarlayÄ±n ve bir **runAsUser** belirleyin
* MÃ¼mkÃ¼nse, **seLinuxOptions** ve **seccompProfile**'Ä± belirterek **izinleri sÄ±nÄ±rlamayÄ±** dÃ¼ÅŸÃ¼nÃ¼n
* **runAsGroup** aracÄ±lÄ±ÄŸÄ±yla **ayrÄ±calÄ±k grubu** eriÅŸimi **VERMEYÄ°N.**

**SecurityContext ve PodSecurityContext** iÃ§inde ayarlanan Ã¶zelliklerin, **SecurityContext**'te belirtilen deÄŸeri **Ã¶nceliklidir**.

| <p><a href="https://kubernetes.io/docs/reference/generated/kubernetes-api/v1.23/#securitycontext-v1-core"><strong>allowPrivilegeEscalation</strong></a><br><em>boolean</em></p>                                                                                                                                                                      | **AllowPrivilegeEscalation**, bir iÅŸlemin **ebeveyn iÅŸleminden daha fazla ayrÄ±calÄ±k kazanÄ±p kazanamayacaÄŸÄ±nÄ± kontrol eder**. Bu bool, konteyner iÅŸleminde no\_new\_privs bayraÄŸÄ±nÄ±n ayarlanÄ±p ayarlanmayacaÄŸÄ±nÄ± doÄŸrudan kontrol eder. AllowPrivilegeEscalation, konteyner **Privileged** olarak Ã§alÄ±ÅŸtÄ±rÄ±ldÄ±ÄŸÄ±nda veya **CAP\_SYS\_ADMIN**'e sahip olduÄŸunda her zaman true'dur. |
| ---------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------- | ------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------- |
| <p><a href="https://kubernetes.io/docs/reference/generated/kubernetes-api/v1.23/#securitycontext-v1-core"><strong>capabilities</strong></a><br><a href="https://kubernetes.io/docs/reference/generated/kubernetes-api/v1.23/#capabilities-v1-core"><em>Capabilities</em></a><br><em>Capabilities</em> <em>hakkÄ±nda daha fazla bilgi</em></p>  | **Konteynerleri Ã§alÄ±ÅŸtÄ±rÄ±rken eklemek/Ã§Ä±karmak iÃ§in yetenekler**. VarsayÄ±lan olarak, yeteneklerin varsayÄ±lan kÃ¼mesi kullanÄ±lÄ±r.                                                                                                                                                                                                                    |
| <p><a href="https://kubernetes.io/docs/reference/generated/kubernetes-api/v1.23/#securitycontext-v1-core"><strong>privileged</strong></a><br><em>boolean</em></p>                                                                                                                                                                                    | AyrÄ±calÄ±klÄ± modda konteyneri Ã§alÄ±ÅŸtÄ±rÄ±n. AyrÄ±calÄ±klÄ± konteynerlerdeki iÅŸlemler, temelde **ana makinedeki root ile eÅŸdeÄŸerdir**. VarsayÄ±lan olarak false'dur.                                                                                                                                                                               |
| <p><a href="https://kubernetes.io/docs/reference/generated/kubernetes-api/v1.23/#securitycontext-v1-core"><strong>procMount</strong></a><br><em>string</em></p>                                                                                                                                                                                      | procMount, konteynerler iÃ§in kullanÄ±lacak **proc mount tÃ¼rÃ¼nÃ¼ belirtir**. VarsayÄ±lan, salt okunur yollar ve maskelenmiÅŸ yollar iÃ§in konteyner Ã§alÄ±ÅŸma zamanÄ± varsayÄ±lanlarÄ±nÄ± kullanan DefaultProcMount'tur.                                                                                                                                    |
| <p><a href="https://kubernetes.io/docs/reference/generated/kubernetes-api/v1.23/#securitycontext-v1-core"><strong>readOnlyRootFilesystem</strong></a><br><em>boolean</em></p>                                                                                                                                                                        | Bu **konteynerin salt okunur kÃ¶k dosya sistemi olup olmadÄ±ÄŸÄ±nÄ±** belirtir. VarsayÄ±lan false'dur.                                                                                                                                                                                                                                             |
| <p><a href="https://kubernetes.io/docs/reference/generated/kubernetes-api/v1.23/#securitycontext-v1-core"><strong>runAsGroup</strong></a><br><em>integer</em></p>                                                                                                                                                                                    | Konteyner iÅŸlemi giriÅŸ noktasÄ±nÄ± Ã§alÄ±ÅŸtÄ±rmak iÃ§in **GID'yi belirtir**. BelirtilmemiÅŸse Ã§alÄ±ÅŸma zamanÄ± varsayÄ±lanÄ± kullanÄ±lÄ±r.                                                                                                                                                                                                |
| <p><a href="https://kubernetes.io/docs/reference/generated/kubernetes-api/v1.23/#securitycontext-v1-core"><strong>runAsNonRoot</strong></a><br><em>boolean</em></p>                                                                                                                                                                                  | Konteynerin **bir kÃ¶k kullanÄ±cÄ± olarak Ã§alÄ±ÅŸtÄ±rÄ±lmamasÄ± gerektiÄŸini** belirtir. True ise, Kubelet, Ã§alÄ±ÅŸma zamanÄ±nda gÃ¶rÃ¼ntÃ¼nÃ¼n UID 0 (kÃ¶k) olarak Ã§alÄ±ÅŸtÄ±rÄ±lmadÄ±ÄŸÄ±ndan emin olmak iÃ§in doÄŸrular ve gerektiÄŸinde konteyneri baÅŸlatmayÄ± reddeder.                                                                                                          |
| <p><a href="https://kubernetes.io/docs/reference/generated/kubernetes-api/v1.23/#securitycontext-v1-core"><strong>runAsUser</strong></a><br><em>integer</em></p>                                                                                                                                                                                     | Konteyner iÅŸlemi giriÅŸ noktasÄ±nÄ± Ã§alÄ±ÅŸtÄ±rmak iÃ§in **UID'yi belirtir**. BelirtilmemiÅŸse, gÃ¶rÃ¼ntÃ¼ meta verilerinde belirtilen kullanÄ±cÄ±ya varsayÄ±lan olarak ayarlanÄ±r.                                                                                                                                                                                                  |
| <p><a href="https://kubernetes.io/docs/reference/generated/kubernetes-api/v1.23/#securitycontext-v1-core"><strong>seLinuxOptions</strong></a><br><a href="https://kubernetes.io/docs/reference/generated/kubernetes-api/v1.23/#selinuxoptions-v1-core"><em>SELinuxOptions</em></a><br><em>SELinux</em> <em>hakkÄ±nda daha fazla bilgi</em></p> | Konteynere uygulanacak **SELinux baÄŸlamÄ±nÄ± belirtir**. BelirtilmemiÅŸse, konteyner Ã§alÄ±ÅŸma zamanÄ± her konteyner iÃ§in rastgele bir SELinux baÄŸlamÄ± ayÄ±rÄ±r.                                                                                                                                                                  |
| <p><a href="https://kubernetes.io/docs/reference/generated/kubernetes-api/v1.23/#securitycontext-v1-core"><strong>seccompProfile</strong></a><br><a href="https://kubernetes.io/docs/reference/generated/kubernetes-api/v1.23/#seccompprofile-v1-core"><em>SeccompProfile</em></a></p>                                                               | Bu konteyner tarafÄ±ndan kullanÄ±lacak **seccomp seÃ§enekleri**.                                                                                                                                                                                                                                                                         |
| <p><a href="https://kubernetes.io/docs/reference/generated/kubernetes-api/v1.23/#securitycontext-v1-core"><strong>windowsOptions</strong></a><br><a href="https://kubernetes.io/docs/reference/generated/kubernetes-api/v1.23/#windowssecuritycontextoptions-v1-core"><em>WindowsSecurityContextOptions</em></a></p>                                 | TÃ¼m konteynerlere uygulanan **Windows Ã¶zel ayarlarÄ±**.                                                                                                                                                                                                                                                              |

## Referanslar

* [https://kubernetes.io/docs/reference/generated/kubernetes-api/v1.23/#podsecuritycontext-v1-core](https://kubernetes.io/docs/reference/generated/kubernetes-api/v1.23/#podsecuritycontext-v1-core)
* [https://kubernetes.io/docs/reference/generated/kubernetes-api/v1.23/#securitycontext-v1-core](https://kubernetes.io/docs/reference/generated/kubernetes-api/v1.23/#securitycontext-v1-core)

{% hint style="success" %}
AWS Hacking Ã¶ÄŸrenin ve pratik yapÄ±n:<img src="/.gitbook/assets/image.png" alt="" data-size="line">[**HackTricks EÄŸitim AWS KÄ±rmÄ±zÄ± TakÄ±m UzmanÄ± (ARTE)**](https://training.hacktricks.xyz/courses/arte)<img src="/.gitbook/assets/image.png" alt="" data-size="line">\
GCP Hacking Ã¶ÄŸrenin ve pratik yapÄ±n: <img src="/.gitbook/assets/image (2).png" alt="" data-size="line">[**HackTricks EÄŸitim GCP KÄ±rmÄ±zÄ± TakÄ±m UzmanÄ± (GRTE)**<img src="/.gitbook/assets/image (2).png" alt="" data-size="line">](https://training.hacktricks.xyz/courses/grte)

<details>

<summary>HackTricks'i Destekleyin</summary>

* [**Abonelik planlarÄ±nÄ±**](https://github.com/sponsors/carlospolop) kontrol edin!
* ğŸ’¬ [**Discord grubuna**](https://discord.gg/hRep4RUj7f) veya [**telegram grubuna**](https://t.me/peass) katÄ±lÄ±n veya bizi Twitter'da takip edin ğŸ¦ [**@hacktricks\_live**](https://twitter.com/hacktricks\_live)**.**
* **Hacking pÃ¼f noktalarÄ±nÄ± gÃ¶ndererek HackTricks ve HackTricks Cloud** github depolarÄ±na PR gÃ¶ndererek paylaÅŸÄ±n.

</details>
{% endhint %}
