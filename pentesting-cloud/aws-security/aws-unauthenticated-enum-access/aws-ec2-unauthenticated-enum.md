# AWS - EC2 Unauthenticated Enum

{% hint style="success" %}
AWS í•´í‚¹ì„ ë°°ìš°ê³  ì‹¤ìŠµí•˜ì„¸ìš”:<img src="/.gitbook/assets/image.png" alt="" data-size="line">[**HackTricks Training AWS Red Team Expert (ARTE)**](https://training.hacktricks.xyz/courses/arte)<img src="/.gitbook/assets/image.png" alt="" data-size="line">\
GCP í•´í‚¹ì„ ë°°ìš°ê³  ì‹¤ìŠµí•˜ì„¸ìš”: <img src="/.gitbook/assets/image (2).png" alt="" data-size="line">[**HackTricks Training GCP Red Team Expert (GRTE)**<img src="/.gitbook/assets/image (2).png" alt="" data-size="line">](https://training.hacktricks.xyz/courses/grte)

<details>

<summary>HackTricks ì§€ì›í•˜ê¸°</summary>

* [**êµ¬ë… ìš”ê¸ˆì œ**](https://github.com/sponsors/carlospolop)ë¥¼ í™•ì¸í•˜ì„¸ìš”!
* ğŸ’¬ [**Discord ê·¸ë£¹**](https://discord.gg/hRep4RUj7f) ë˜ëŠ” [**í…”ë ˆê·¸ë¨ ê·¸ë£¹**](https://t.me/peass)ì— **ê°€ì…**í•˜ê±°ë‚˜ **íŠ¸ìœ„í„°** ğŸ¦ [**@hacktricks\_live**](https://twitter.com/hacktricks\_live)**ë¥¼ íŒ”ë¡œìš°**í•˜ì„¸ìš”.
* **HackTricks** ë° **HackTricks Cloud** ê¹ƒí—ˆë¸Œ ì €ì¥ì†Œì— PRì„ ì œì¶œí•˜ì—¬ í•´í‚¹ íŠ¸ë¦­ì„ ê³µìœ í•˜ì„¸ìš”.

</details>
{% endhint %}

## EC2 ë° ê´€ë ¨ ì„œë¹„ìŠ¤

ì´ í˜ì´ì§€ì—ì„œ ë” ë§ì€ ì •ë³´ë¥¼ í™•ì¸í•˜ì„¸ìš”:

{% content-ref url="../aws-services/aws-ec2-ebs-elb-ssm-vpc-and-vpn-enum/" %}
[aws-ec2-ebs-elb-ssm-vpc-and-vpn-enum](../aws-services/aws-ec2-ebs-elb-ssm-vpc-and-vpn-enum/)
{% endcontent-ref %}

### ê³µê°œ í¬íŠ¸

**ê°€ìƒ ë¨¸ì‹ ì˜ ëª¨ë“  í¬íŠ¸ë¥¼ ì¸í„°ë„·ì— ë…¸ì¶œ**í•˜ëŠ” ê²ƒì´ ê°€ëŠ¥í•©ë‹ˆë‹¤. ë…¸ì¶œëœ í¬íŠ¸ì—ì„œ ë¬´ì—‡ì´ ì‹¤í–‰ë˜ê³  ìˆëŠ”ì§€ì— ë”°ë¼ ê³µê²©ìê°€ ì•…ìš©í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.

#### SSRF

{% embed url="https://book.hacktricks.xyz/pentesting-web/ssrf-server-side-request-forgery/cloud-ssrf" %}

### ê³µê°œ AMI ë° EBS ìŠ¤ëƒ…ìƒ·

AWSëŠ” **ëˆ„êµ¬ì—ê²Œë‚˜ AMI ë° ìŠ¤ëƒ…ìƒ·ì„ ë‹¤ìš´ë¡œë“œí•  ìˆ˜ ìˆëŠ” ì•¡ì„¸ìŠ¤ ê¶Œí•œì„ ë¶€ì—¬**í•©ë‹ˆë‹¤. ìì‹ ì˜ ê³„ì •ì—ì„œ ì´ëŸ¬í•œ ë¦¬ì†ŒìŠ¤ë¥¼ ë§¤ìš° ì‰½ê²Œ ë‚˜ì—´í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤:

{% code overflow="wrap" %}
```bash
# Public AMIs
aws ec2 describe-images --executable-users all

## Search AMI by ownerID
aws ec2 describe-images --executable-users all --query 'Images[?contains(ImageLocation, `967541184254/`) == `true`]'

## Search AMI by substr ("shared" in the example)
aws ec2 describe-images --executable-users all --query 'Images[?contains(ImageLocation, `shared`) == `true`]'

# Public EBS snapshots (hard-drive copies)
aws ec2 describe-snapshots --restorable-by-user-ids all
aws ec2 describe-snapshots --restorable-by-user-ids all | jq '.Snapshots[] | select(.OwnerId == "099720109477")'
```
{% endcode %}

ë§Œì•½ ëˆ„êµ¬ë‚˜ ë³µì›í•  ìˆ˜ ìˆëŠ” ìŠ¤ëƒ…ìƒ·ì„ ë°œê²¬í•˜ë©´, [AWS - EBS ìŠ¤ëƒ…ìƒ· ë¤í”„](https://cloud.hacktricks.xyz/pentesting-cloud/aws-security/aws-post-exploitation/aws-ec2-ebs-ssm-and-vpc-post-exploitation/aws-ebs-snapshot-dump)ì—ì„œ ìŠ¤ëƒ…ìƒ·ì„ ë‹¤ìš´ë¡œë“œí•˜ê³  ì•½íƒˆí•˜ëŠ” ë°©ë²•ì„ í™•ì¸í•˜ì„¸ìš”.

#### ê³µê°œ URL í…œí”Œë¦¿
```bash
# EC2
ec2-{ip-seperated}.compute-1.amazonaws.com
# ELB
http://{user_provided}-{random_id}.{region}.elb.amazonaws.com:80/443
https://{user_provided}-{random_id}.{region}.elb.amazonaws.com
```
### ê³µê°œ IPë¥¼ ê°€ì§„ EC2 ì¸ìŠ¤í„´ìŠ¤ ì—´ê±°

{% code overflow="wrap" %}
```bash
aws ec2 describe-instances --query "Reservations[].Instances[?PublicIpAddress!=null].PublicIpAddress" --output text
```
{% endcode %}

{% hint style="success" %}
AWS í•´í‚¹ ë°°ìš°ê³  ì‹¤ìŠµí•˜ê¸°:<img src="/.gitbook/assets/image.png" alt="" data-size="line">[**HackTricks Training AWS Red Team Expert (ARTE)**](https://training.hacktricks.xyz/courses/arte)<img src="/.gitbook/assets/image.png" alt="" data-size="line">\
GCP í•´í‚¹ ë°°ìš°ê³  ì‹¤ìŠµí•˜ê¸°: <img src="/.gitbook/assets/image (2).png" alt="" data-size="line">[**HackTricks Training GCP Red Team Expert (GRTE)**<img src="/.gitbook/assets/image (2).png" alt="" data-size="line">](https://training.hacktricks.xyz/courses/grte)

<details>

<summary>HackTricks ì§€ì›í•˜ê¸°</summary>

* [**êµ¬ë… ìš”ê¸ˆì œ**](https://github.com/sponsors/carlospolop)ë¥¼ í™•ì¸í•˜ì„¸ìš”!
* ğŸ’¬ [**ë””ìŠ¤ì½”ë“œ ê·¸ë£¹**](https://discord.gg/hRep4RUj7f) ë˜ëŠ” [**í…”ë ˆê·¸ë¨ ê·¸ë£¹**](https://t.me/peass)ì— **ì°¸ì—¬**í•˜ê±°ë‚˜ **íŠ¸ìœ„í„°** ğŸ¦ [**@hacktricks\_live**](https://twitter.com/hacktricks\_live)**ë¥¼ íŒ”ë¡œìš°**í•˜ì„¸ìš”.
* í•´í‚¹ íŒì„ ê³µìœ í•˜ë ¤ë©´ [**HackTricks**](https://github.com/carlospolop/hacktricks) ë° [**HackTricks Cloud**](https://github.com/carlospolop/hacktricks-cloud) github ì €ì¥ì†Œì— PRì„ ì œì¶œí•˜ì„¸ìš”.

</details>
{% endhint %}
