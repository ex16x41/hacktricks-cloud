# AWS - S3 Unauthenticated Enum

{% hint style="success" %}
Learn & practice AWS Hacking:<img src="../../../.gitbook/assets/image (1) (1).png" alt="" data-size="line">[**HackTricks Training AWS Red Team Expert (ARTE)**](https://training.hacktricks.xyz/courses/arte)<img src="../../../.gitbook/assets/image (1) (1).png" alt="" data-size="line">\
Learn & practice GCP Hacking: <img src="../../../.gitbook/assets/image (2).png" alt="" data-size="line">[**HackTricks Training GCP Red Team Expert (GRTE)**<img src="../../../.gitbook/assets/image (2).png" alt="" data-size="line">](https://training.hacktricks.xyz/courses/grte)

<details>

<summary>Support HackTricks</summary>

* Check the [**subscription plans**](https://github.com/sponsors/carlospolop)!
* **Join the** ЁЯТм [**Discord group**](https://discord.gg/hRep4RUj7f) or the [**telegram group**](https://t.me/peass) or **follow** us on **Twitter** ЁЯРж [**@hacktricks\_live**](https://twitter.com/hacktricks\_live)**.**
* **Share hacking tricks by submitting PRs to the** [**HackTricks**](https://github.com/carlospolop/hacktricks) and [**HackTricks Cloud**](https://github.com/carlospolop/hacktricks-cloud) github repos.

</details>
{% endhint %}

## S3 Public Buckets

рдПрдХ рдмрдХреЗрдЯ рдХреЛ **тАЬрд╕рд╛рд░реНрд╡рдЬрдирд┐рдХтАЭ** рдорд╛рдирд╛ рдЬрд╛рддрд╛ рд╣реИ рдпрджрд┐ **рдХреЛрдИ рднреА рдЙрдкрдпреЛрдЧрдХрд░реНрддрд╛ рдмрдХреЗрдЯ рдХреА рд╕рд╛рдордЧреНрд░реА рдХреЛ рд╕реВрдЪреАрдмрджреНрдз рдХрд░ рд╕рдХрддрд╛ рд╣реИ**, рдФрд░ **тАЬрдирд┐рдЬреАтАЭ** рдпрджрд┐ рдмрдХреЗрдЯ рдХреА рд╕рд╛рдордЧреНрд░реА рдХреЛ **рдХреЗрд╡рд▓ рдХреБрдЫ рдЙрдкрдпреЛрдЧрдХрд░реНрддрд╛рдУрдВ рджреНрд╡рд╛рд░рд╛ рд╕реВрдЪреАрдмрджреНрдз рдпрд╛ рд▓рд┐рдЦрд╛ рдЬрд╛ рд╕рдХрддрд╛ рд╣реИ**ред

рдХрдВрдкрдирд┐рдпреЛрдВ рдХреЗ рдкрд╛рд╕ **рдмрдХреЗрдЯ рдЕрдиреБрдорддрд┐рдпрд╛рдБ рдЧрд▓рдд рдХреЙрдиреНрдлрд╝рд┐рдЧрд░ рдХреА рдЧрдИ рд╣реЛ рд╕рдХрддреА рд╣реИрдВ** рдЬреЛ рдпрд╛ рддреЛ рд╕рдм рдХреБрдЫ рдпрд╛ AWS рдореЗрдВ рдХрд┐рд╕реА рднреА рдЦрд╛рддреЗ рдореЗрдВ рдкреНрд░рдорд╛рдгрд┐рдд рд╕рднреА рдХреЛ рдкрд╣реБрдБрдЪ рджреЗрддреА рд╣реИрдВ (рддреЛ рдХрд┐рд╕реА рдХреЛ рднреА)ред рдзреНрдпрд╛рди рджреЗрдВ, рдХрд┐ рдРрд╕реА рдЧрд▓рдд рдХреЙрдиреНрдлрд╝рд┐рдЧрд░реЗрд╢рди рдХреЗ рд╕рд╛рде рднреА рдХреБрдЫ рдХреНрд░рд┐рдпрд╛рдПрдБ рдирд╣реАрдВ рдХреА рдЬрд╛ рд╕рдХрддреА рд╣реИрдВ рдХреНрдпреЛрдВрдХрд┐ рдмрдХреЗрдЯ рдХреА рдЕрдкрдиреА рдкрд╣реБрдБрдЪ рдирд┐рдпрдВрддреНрд░рдг рд╕реВрдЪрд┐рдпрд╛рдБ (ACLs) рд╣реЛ рд╕рдХрддреА рд╣реИрдВред

**AWS-S3 рдЧрд▓рдд рдХреЙрдиреНрдлрд╝рд┐рдЧрд░реЗрд╢рди рдХреЗ рдмрд╛рд░реЗ рдореЗрдВ рдпрд╣рд╛рдБ рдЬрд╛рдиреЗрдВ:** [**http://flaws.cloud**](http://flaws.cloud/) **рдФрд░** [**http://flaws2.cloud/**](http://flaws2.cloud)

### Finding AWS Buckets

рдЬрдм рдПрдХ рд╡реЗрдмрдкреГрд╖реНрда рдХреБрдЫ рд╕рдВрд╕рд╛рдзрдиреЛрдВ рдХреЛ рд╕реНрдЯреЛрд░ рдХрд░рдиреЗ рдХреЗ рд▓рд┐рдП AWS рдХрд╛ рдЙрдкрдпреЛрдЧ рдХрд░ рд░рд╣рд╛ рд╣реИ, рддреЛ рдЦреЛрдЬрдиреЗ рдХреЗ рд╡рд┐рднрд┐рдиреНрди рддрд░реАрдХреЗ:

#### Enumeration & OSINT:

* **wappalyzer** рдмреНрд░рд╛рдЙрдЬрд╝рд░ рдкреНрд▓рдЧрдЗрди рдХрд╛ рдЙрдкрдпреЛрдЧ рдХрд░рдирд╛
* рдмрд░реНрдк рдХрд╛ рдЙрдкрдпреЛрдЧ рдХрд░рдирд╛ (**рд╕реНрдкрд╛рдЗрдбрд░рд┐рдВрдЧ** рд╡реЗрдм) рдпрд╛ рдкреГрд╖реНрда рдХреЗ рдорд╛рдзреНрдпрдо рд╕реЗ рдореИрдиреНрдпреБрдЕрд▓ рд░реВрдк рд╕реЗ рдиреЗрд╡рд┐рдЧреЗрдЯ рдХрд░рдХреЗ рд╕рднреА **рд╕рдВрд╕рд╛рдзрдиреЛрдВ** **рдХреЛ рд▓реЛрдб** рдХрд┐рдпрд╛ рдЬрд╛рдПрдЧрд╛ рдЬреЛ рдЗрддрд┐рд╣рд╛рд╕ рдореЗрдВ рд╕рд╣реЗрдЬреЗ рдЬрд╛рдПрдВрдЧреЗред
*   **рд╕рдВрд╕рд╛рдзрдиреЛрдВ рдХреЗ рд▓рд┐рдП рдЬрд╛рдБрдЪ рдХрд░реЗрдВ** рдЬреИрд╕реЗ рдбреЛрдореЗрди рдореЗрдВ:

```
http://s3.amazonaws.com/[bucket_name]/
http://[bucket_name].s3.amazonaws.com/
```
* **CNAMES** рдХреЗ рд▓рд┐рдП рдЬрд╛рдБрдЪ рдХрд░реЗрдВ рдХреНрдпреЛрдВрдХрд┐ `resources.domain.com` рдореЗрдВ CNAME `bucket.s3.amazonaws.com` рд╣реЛ рд╕рдХрддрд╛ рд╣реИ
* [https://buckets.grayhatwarfare.com](https://buckets.grayhatwarfare.com/), рдПрдХ рд╡реЗрдм рдЬреЛ рдкрд╣рд▓реЗ рд╕реЗ рд╣реА **рдЦреБрд▓реЗ рдмрдХреЗрдЯ** рдЦреЛрдЬ рдЪреБрдХрд╛ рд╣реИред
* **рдмрдХреЗрдЯ рдирд╛рдо** рдФрд░ **рдмрдХреЗрдЯ рдбреЛрдореЗрди рдирд╛рдо** рдХреЛ **рдПрдХ рд╕рдорд╛рди рд╣реЛрдирд╛ рдЪрд╛рд╣рд┐рдПред**
* **flaws.cloud** **IP** 52.92.181.107 рдкрд░ рд╣реИ рдФрд░ рдпрджрд┐ рдЖрдк рд╡рд╣рд╛рдВ рдЬрд╛рддреЗ рд╣реИрдВ рддреЛ рдпрд╣ рдЖрдкрдХреЛ [https://aws.amazon.com/s3/](https://aws.amazon.com/s3/) рдкрд░ рд░реАрдбрд╛рдпрд░реЗрдХреНрдЯ рдХрд░рддрд╛ рд╣реИред рдЗрд╕рдХреЗ рдЕрд▓рд╛рд╡рд╛, `dig -x 52.92.181.107` `s3-website-us-west-2.amazonaws.com` рджреЗрддрд╛ рд╣реИред
* рдпрд╣ рдЬрд╛рдБрдЪрдиреЗ рдХреЗ рд▓рд┐рдП рдХрд┐ рдпрд╣ рдПрдХ рдмрдХреЗрдЯ рд╣реИ, рдЖрдк **рдпрд╣рд╛рдБ рднреА рдЬрд╛ рд╕рдХрддреЗ рд╣реИрдВ** [https://flaws.cloud.s3.amazonaws.com/](https://flaws.cloud.s3.amazonaws.com/)ред

#### Brute-Force

рдЖрдк рдмрдХреЗрдЯ рдХреЛ **рдХрдВрдкрдиреА рд╕реЗ рд╕рдВрдмрдВрдзрд┐рдд рдирд╛рдореЛрдВ рдХреЛ рдмреНрд░реВрдЯ-рдлреЛрд░реНрд╕ рдХрд░рдХреЗ** рдЦреЛрдЬ рд╕рдХрддреЗ рд╣реИрдВ рдЬрд┐рд╕реЗ рдЖрдк рдкреЗрдВрдЯреЗрд╕реНрдЯ рдХрд░ рд░рд╣реЗ рд╣реИрдВ:

* [https://github.com/sa7mon/S3Scanner](https://github.com/sa7mon/S3Scanner)
* [https://github.com/clario-tech/s3-inspector](https://github.com/clario-tech/s3-inspector)
* [https://github.com/jordanpotti/AWSBucketDump](https://github.com/jordanpotti/AWSBucketDump) (рд╕рдВрднрд╛рд╡рд┐рдд рдмрдХреЗрдЯ рдирд╛рдореЛрдВ рдХреА рдПрдХ рд╕реВрдЪреА рд╢рд╛рдорд┐рд▓ рд╣реИ)
* [https://github.com/fellchase/flumberboozle/tree/master/flumberbuckets](https://github.com/fellchase/flumberboozle/tree/master/flumberbuckets)
* [https://github.com/smaranchand/bucky](https://github.com/smaranchand/bucky)
* [https://github.com/tomdev/teh\_s3\_bucketeers](https://github.com/tomdev/teh\_s3\_bucketeers)
* [https://github.com/RhinoSecurityLabs/Security-Research/tree/master/tools/aws-pentest-tools/s3](https://github.com/RhinoSecurityLabs/Security-Research/tree/master/tools/aws-pentest-tools/s3)
* [https://github.com/Eilonh/s3crets\_scanner](https://github.com/Eilonh/s3crets\_scanner)
* [https://github.com/belane/CloudHunter](https://github.com/belane/CloudHunter)

<pre class="language-bash"><code class="lang-bash"># Generate a wordlist to create permutations
curl -s https://raw.githubusercontent.com/cujanovic/goaltdns/master/words.txt > /tmp/words-s3.txt.temp
curl -s https://raw.githubusercontent.com/jordanpotti/AWSBucketDump/master/BucketNames.txt >>/tmp/words-s3.txt.temp
cat /tmp/words-s3.txt.temp | sort -u > /tmp/words-s3.txt

# Generate a wordlist based on the domains and subdomains to test
## Write those domains and subdomains in subdomains.txt
cat subdomains.txt > /tmp/words-hosts-s3.txt
cat subdomains.txt | tr "." "-" >> /tmp/words-hosts-s3.txt
cat subdomains.txt | tr "." "\n" | sort -u >> /tmp/words-hosts-s3.txt

# Create permutations based in a list with the domains and subdomains to attack
goaltdns -l /tmp/words-hosts-s3.txt -w /tmp/words-s3.txt -o /tmp/final-words-s3.txt.temp
## The previous tool is specialized increating permutations for subdomains, lets filter that list
<strong>### Remove lines ending with "."
</strong>cat /tmp/final-words-s3.txt.temp | grep -Ev "\.$" > /tmp/final-words-s3.txt.temp2
### Create list without TLD
cat /tmp/final-words-s3.txt.temp2 | sed -E 's/\.[a-zA-Z0-9]+$//' > /tmp/final-words-s3.txt.temp3
### Create list without dots
cat /tmp/final-words-s3.txt.temp3 | tr -d "." > /tmp/final-words-s3.txt.temp4http://phantom.s3.amazonaws.com/
### Create list without hyphens
cat /tmp/final-words-s3.txt.temp3 | tr "." "-" > /tmp/final-words-s3.txt.temp5

## Generate the final wordlist
cat /tmp/final-words-s3.txt.temp2 /tmp/final-words-s3.txt.temp3 /tmp/final-words-s3.txt.temp4 /tmp/final-words-s3.txt.temp5 | grep -v -- "-\." | awk '{print tolower($0)}' | sort -u > /tmp/final-words-s3.txt

## Call s3scanner
s3scanner --threads 100 scan --buckets-file /tmp/final-words-s3.txt  | grep bucket_exists
</code></pre>

#### Loot S3 Buckets

рдЦреБрд▓реЗ S3 рдмрдХреЗрдЯ рджрд┐рдП рдЧрдП, [**BucketLoot**](https://github.com/redhuntlabs/BucketLoot) рд╕реНрд╡рдЪрд╛рд▓рд┐рдд рд░реВрдк рд╕реЗ **рджрд┐рд▓рдЪрд╕реНрдк рдЬрд╛рдирдХрд╛рд░реА** рдХреЗ рд▓рд┐рдП **рдЦреЛрдЬ рд╕рдХрддрд╛ рд╣реИ**ред

### Find the Region

рдЖрдк рд╕рднреА рд╕рдорд░реНрдерд┐рдд рдХреНрд╖реЗрддреНрд░реЛрдВ рдХреЛ AWS рдореЗрдВ [**https://docs.aws.amazon.com/general/latest/gr/s3.html**](https://docs.aws.amazon.com/general/latest/gr/s3.html) рдкрд░ рдкрд╛ рд╕рдХрддреЗ рд╣реИрдВред

#### By DNS

рдЖрдк **`dig`** рдФрд░ **`nslookup`** рдХреЗ рд╕рд╛рде рдПрдХ рдмрдХреЗрдЯ рдХреЗ рдХреНрд╖реЗрддреНрд░ рдХреЛ рдкреНрд░рд╛рдкреНрдд рдХрд░ рд╕рдХрддреЗ рд╣реИрдВ **рдЦреЛрдЬреЗ рдЧрдП IP** рдХрд╛ **DNS рдЕрдиреБрд░реЛрдз рдХрд░рдХреЗ**:
```bash
dig flaws.cloud
;; ANSWER SECTION:
flaws.cloud.    5    IN    A    52.218.192.11

nslookup 52.218.192.11
Non-authoritative answer:
11.192.218.52.in-addr.arpa name = s3-website-us-west-2.amazonaws.com.
```
Check that the resolved domain have the word "website".\
You can access the static website going to: `flaws.cloud.s3-website-us-west-2.amazonaws.com`\
or you can access the bucket visiting: `flaws.cloud.s3-us-west-2.amazonaws.com`

#### By Trying

If you try to access a bucket, but in the **domain name you specify another region** (for example the bucket is in `bucket.s3.amazonaws.com` but you try to access `bucket.s3-website-us-west-2.amazonaws.com`, then you will be **indicated to the correct location**:

![](<../../../.gitbook/assets/image (106).png>)

### Enumerating the bucket

To test the openness of the bucket a user can just enter the URL in their web browser. A private bucket will respond with "Access Denied". A public bucket will list the first 1,000 objects that have been stored.

Open to everyone:

![](<../../../.gitbook/assets/image (201).png>)

Private:

![](<../../../.gitbook/assets/image (83).png>)

You can also check this with the cli:
```bash
#Use --no-sign-request for check Everyones permissions
#Use --profile <PROFILE_NAME> to indicate the AWS profile(keys) that youwant to use: Check for "Any Authenticated AWS User" permissions
#--recursive if you want list recursivelyls
#Opcionally you can select the region if you now it
aws s3 ls s3://flaws.cloud/ [--no-sign-request] [--profile <PROFILE_NAME>] [ --recursive] [--region us-west-2]
```
рдпрджрд┐ рдмрдХреЗрдЯ рдХрд╛ рдбреЛрдореЗрди рдирд╛рдо рдирд╣реАрдВ рд╣реИ, рддреЛ рдЗрд╕реЗ рд╕реВрдЪреАрдмрджреНрдз рдХрд░рдиреЗ рдХрд╛ рдкреНрд░рдпрд╛рд╕ рдХрд░рддреЗ рд╕рдордп, **рдХреЗрд╡рд▓ рдмрдХреЗрдЯ рдХрд╛ рдирд╛рдо рдбрд╛рд▓реЗрдВ** рдФрд░ рдкреВрд░реЗ AWSs3 рдбреЛрдореЗрди рдХреЛ рдирд╣реАрдВред рдЙрджрд╛рд╣рд░рдг: `s3://<BUCKETNAME>`

### рд╕рд╛рд░реНрд╡рдЬрдирд┐рдХ URL рдЯреЗрдореНрдкрд▓реЗрдЯ
```
https://{user_provided}.s3.amazonaws.com
```
### Get Account ID from public Bucket

рдпрд╣ рд╕рдВрднрд╡ рд╣реИ рдХрд┐ рдПрдХ AWS рдЦрд╛рддрд╛ рдирд┐рд░реНрдзрд╛рд░рд┐рдд рдХрд┐рдпрд╛ рдЬрд╛рдП **`S3:ResourceAccount`** **рдиреАрддрд┐ рд╕реНрдерд┐рддрд┐ рдХреБрдВрдЬреА** рдХрд╛ рд▓рд╛рдн рдЙрдард╛рдХрд░ред рдпрд╣ рд╕реНрдерд┐рддрд┐ **рдПрдХ рдЦрд╛рддреЗ рдореЗрдВ S3 рдмрдХреЗрдЯ рдХреЗ рдЖрдзрд╛рд░ рдкрд░ рдкрд╣реБрдВрдЪ рдХреЛ рдкреНрд░рддрд┐рдмрдВрдзрд┐рдд рдХрд░рддреА рд╣реИ** (рдЕрдиреНрдп рдЦрд╛рддрд╛-рдЖрдзрд╛рд░рд┐рдд рдиреАрддрд┐рдпрд╛рдБ рдЙрд╕ рдЦрд╛рддреЗ рдХреЗ рдЖрдзрд╛рд░ рдкрд░ рдкрд╣реБрдВрдЪ рдХреЛ рдкреНрд░рддрд┐рдмрдВрдзрд┐рдд рдХрд░рддреА рд╣реИрдВ рдЬрд┐рд╕рдореЗрдВ рдЕрдиреБрд░реЛрдз рдХрд░рдиреЗ рд╡рд╛рд▓рд╛ рдкреНрд░рдореБрдЦ рд╣реИ)ред\
рдФрд░ рдХреНрдпреЛрдВрдХрд┐ рдиреАрддрд┐ рдореЗрдВ **рд╡рд╛рдЗрд▓реНрдбрдХрд╛рд░реНрдб** рд╣реЛ рд╕рдХрддреЗ рд╣реИрдВ, рдЗрд╕рд▓рд┐рдП рдЦрд╛рддрд╛ рд╕рдВрдЦреНрдпрд╛ **рдХреЗрд╡рд▓ рдПрдХ рд╕рдВрдЦреНрдпрд╛ рдореЗрдВ рдПрдХ рдмрд╛рд░** рдкрд╛рдИ рдЬрд╛ рд╕рдХрддреА рд╣реИред

рдпрд╣ рдЙрдкрдХрд░рдг рдкреНрд░рдХреНрд░рд┐рдпрд╛ рдХреЛ рд╕реНрд╡рдЪрд╛рд▓рд┐рдд рдХрд░рддрд╛ рд╣реИ:
```bash
# Installation
pipx install s3-account-search
pip install s3-account-search
# With a bucket
s3-account-search arn:aws:iam::123456789012:role/s3_read s3://my-bucket
# With an object
s3-account-search arn:aws:iam::123456789012:role/s3_read s3://my-bucket/path/to/object.ext
```
рдпрд╣ рддрдХрдиреАрдХ API рдЧреЗрдЯрд╡реЗ URLs, Lambda URLs, рдбреЗрдЯрд╛ рдПрдХреНрд╕рдЪреЗрдВрдЬ рдбреЗрдЯрд╛ рд╕реЗрдЯ рдФрд░ рдпрд╣рд╛рдВ рддрдХ рдХрд┐ рдЯреИрдЧ рдХреЗ рдорд╛рди рдкреНрд░рд╛рдкреНрдд рдХрд░рдиреЗ рдХреЗ рд▓рд┐рдП рднреА рдХрд╛рдо рдХрд░рддреА рд╣реИ (рдпрджрд┐ рдЖрдк рдЯреИрдЧ рдХреБрдВрдЬреА рдЬрд╛рдирддреЗ рд╣реИрдВ)ред рдЖрдк [**рдореВрд▓ рд╢реЛрдз**](https://blog.plerion.com/conditional-love-for-aws-metadata-enumeration/) рдФрд░ рдЗрд╕ рд╢реЛрд╖рдг рдХреЛ рд╕реНрд╡рдЪрд╛рд▓рд┐рдд рдХрд░рдиреЗ рдХреЗ рд▓рд┐рдП рдЙрдкрдХрд░рдг [**conditional-love**](https://github.com/plerionhq/conditional-love/) рдореЗрдВ рдЕрдзрд┐рдХ рдЬрд╛рдирдХрд╛рд░реА рдкреНрд░рд╛рдкреНрдд рдХрд░ рд╕рдХрддреЗ рд╣реИрдВред

### рдПрдХ рдмрдХреЗрдЯ рдХреА рдкреБрд╖реНрдЯрд┐ рдХрд░рдирд╛ рдХрд┐ рдпрд╣ AWS рдЦрд╛рддреЗ рд╕реЗ рд╕рдВрдмрдВрдзрд┐рдд рд╣реИ

рдЬреИрд╕рд╛ рдХрд┐ [**рдЗрд╕ рдмреНрд▓реЙрдЧ рдкреЛрд╕реНрдЯ**](https://blog.plerion.com/things-you-wish-you-didnt-need-to-know-about-s3/) рдореЗрдВ рд╕рдордЭрд╛рдпрд╛ рдЧрдпрд╛ рд╣реИ, **рдпрджрд┐ рдЖрдкрдХреЗ рдкрд╛рд╕ рдПрдХ рдмрдХреЗрдЯ рдХреЛ рд╕реВрдЪреАрдмрджреНрдз рдХрд░рдиреЗ рдХреА рдЕрдиреБрдорддрд┐ рд╣реИ** рддреЛ рдпрд╣ рд╕рдВрднрд╡ рд╣реИ рдХрд┐ рдЖрдк рдПрдХ рдЦрд╛рддрд╛ID рдХреА рдкреБрд╖реНрдЯрд┐ рдХрд░ рд╕рдХреЗрдВ рдЬрд┐рд╕рд╕реЗ рдмрдХреЗрдЯ рд╕рдВрдмрдВрдзрд┐рдд рд╣реИ, рдПрдХ рдЕрдиреБрд░реЛрдз рднреЗрдЬрдХрд░ рдЬреИрд╕реЗ:
```bash
curl -X GET "[bucketname].amazonaws.com/" \
-H "x-amz-expected-bucket-owner: [correct-account-id]"

<?xml version="1.0" encoding="UTF-8"?>
<ListBucketResult xmlns="http://s3.amazonaws.com/doc/2006-03-01/">...</ListBucketResult>
```
рдпрджрд┐ рддреНрд░реБрдЯрд┐ "Access Denied" рд╣реИ, рддреЛ рдЗрд╕рдХрд╛ рдорддрд▓рдм рд╣реИ рдХрд┐ рдЦрд╛рддрд╛ рдЖрдИрдбреА рдЧрд▓рдд рдереАред

### рд░реВрдЯ рдЦрд╛рддрд╛ enumeration рдХреЗ рд░реВрдк рдореЗрдВ рдЙрдкрдпреЛрдЧ рдХрд┐рдП рдЧрдП рдИрдореЗрд▓

рдЬреИрд╕рд╛ рдХрд┐ [**рдЗрд╕ рдмреНрд▓реЙрдЧ рдкреЛрд╕реНрдЯ**](https://blog.plerion.com/things-you-wish-you-didnt-need-to-know-about-s3/) рдореЗрдВ рд╕рдордЭрд╛рдпрд╛ рдЧрдпрд╛ рд╣реИ, рдпрд╣ рдЬрд╛рдВрдЪрдирд╛ рд╕рдВрднрд╡ рд╣реИ рдХрд┐ рдХреНрдпрд╛ рдХреЛрдИ рдИрдореЗрд▓ рдкрддрд╛ рдХрд┐рд╕реА AWS рдЦрд╛рддреЗ рд╕реЗ рд╕рдВрдмрдВрдзрд┐рдд рд╣реИ **S3 рдмрдХреЗрдЯ рдкрд░ ACLs рдХреЗ рдорд╛рдзреНрдпрдо рд╕реЗ рдИрдореЗрд▓ рдХреЛ рдЕрдиреБрдорддрд┐рдпрд╛рдБ рджреЗрдиреЗ рдХреА рдХреЛрд╢рд┐рд╢ рдХрд░рдХреЗ**ред рдпрджрд┐ рдпрд╣ рдХреЛрдИ рддреНрд░реБрдЯрд┐ рдЙрддреНрдкрдиреНрди рдирд╣реАрдВ рдХрд░рддрд╛ рд╣реИ, рддреЛ рдЗрд╕рдХрд╛ рдорддрд▓рдм рд╣реИ рдХрд┐ рдИрдореЗрд▓ рдХрд┐рд╕реА AWS рдЦрд╛рддреЗ рдХрд╛ рд░реВрдЯ рдЙрдкрдпреЛрдЧрдХрд░реНрддрд╛ рд╣реИ:
```python
s3_client.put_bucket_acl(
Bucket=bucket_name,
AccessControlPolicy={
'Grants': [
{
'Grantee': {
'EmailAddress': 'some@emailtotest.com',
'Type': 'AmazonCustomerByEmail',
},
'Permission': 'READ'
},
],
'Owner': {
'DisplayName': 'Whatever',
'ID': 'c3d78ab5093a9ab8a5184de715d409c2ab5a0e2da66f08c2f6cc5c0bdeadbeef'
}
}
)
```
## рд╕рдВрджрд░реНрдн

* [https://www.youtube.com/watch?v=8ZXRw4Ry3mQ](https://www.youtube.com/watch?v=8ZXRw4Ry3mQ)
* [https://cloudar.be/awsblog/finding-the-account-id-of-any-public-s3-bucket/](https://cloudar.be/awsblog/finding-the-account-id-of-any-public-s3-bucket/)

{% hint style="success" %}
AWS рд╣реИрдХрд┐рдВрдЧ рд╕реАрдЦреЗрдВ рдФрд░ рдЕрднреНрдпрд╛рд╕ рдХрд░реЗрдВ:<img src="../../../.gitbook/assets/image (1) (1).png" alt="" data-size="line">[**HackTricks Training AWS Red Team Expert (ARTE)**](https://training.hacktricks.xyz/courses/arte)<img src="../../../.gitbook/assets/image (1) (1).png" alt="" data-size="line">\
GCP рд╣реИрдХрд┐рдВрдЧ рд╕реАрдЦреЗрдВ рдФрд░ рдЕрднреНрдпрд╛рд╕ рдХрд░реЗрдВ: <img src="../../../.gitbook/assets/image (2).png" alt="" data-size="line">[**HackTricks Training GCP Red Team Expert (GRTE)**<img src="../../../.gitbook/assets/image (2).png" alt="" data-size="line">](https://training.hacktricks.xyz/courses/grte)

<details>

<summary>HackTricks рдХрд╛ рд╕рдорд░реНрдерди рдХрд░реЗрдВ</summary>

* [**рд╕рджрд╕реНрдпрддрд╛ рдпреЛрдЬрдирд╛рдПрдБ**](https://github.com/sponsors/carlospolop) рджреЗрдЦреЗрдВ!
* **рд╣рдорд╛рд░реЗ** ЁЯТм [**Discord рд╕рдореВрд╣**](https://discord.gg/hRep4RUj7f) рдпрд╛ [**telegram рд╕рдореВрд╣**](https://t.me/peass) рдореЗрдВ рд╢рд╛рдорд┐рд▓ рд╣реЛрдВ рдпрд╛ **Twitter** ЁЯРж рдкрд░ рд╣рдореЗрдВ **рдлреЙрд▓реЛ рдХрд░реЗрдВ** [**@hacktricks\_live**](https://twitter.com/hacktricks\_live)**.**
* **рд╣реИрдХрд┐рдВрдЧ рдЯреНрд░рд┐рдХреНрд╕ рд╕рд╛рдЭрд╛ рдХрд░реЗрдВ рдФрд░** [**HackTricks**](https://github.com/carlospolop/hacktricks) рдФрд░ [**HackTricks Cloud**](https://github.com/carlospolop/hacktricks-cloud) рдЧрд┐рдЯрд╣рдм рд░рд┐рдкреЛрдЬрд┐рдЯрд░реА рдореЗрдВ PR рд╕рдмрдорд┐рдЯ рдХрд░реЗрдВред

</details>
{% endhint %}
