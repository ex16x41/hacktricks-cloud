# AWS - CodeBuild Unauthenticated Access

{% hint style="success" %}
Learn & practice AWS Hacking:<img src="../../../.gitbook/assets/image (1) (1) (1).png" alt="" data-size="line">[**HackTricks Training AWS Red Team Expert (ARTE)**](https://training.hacktricks.xyz/courses/arte)<img src="../../../.gitbook/assets/image (1) (1) (1).png" alt="" data-size="line">\
Learn & practice GCP Hacking: <img src="../../../.gitbook/assets/image (2).png" alt="" data-size="line">[**HackTricks Training GCP Red Team Expert (GRTE)**<img src="../../../.gitbook/assets/image (2).png" alt="" data-size="line">](https://training.hacktricks.xyz/courses/grte)

<details>

<summary>Support HackTricks</summary>

* Check the [**subscription plans**](https://github.com/sponsors/carlospolop)!
* **Join the** 💬 [**Discord group**](https://discord.gg/hRep4RUj7f) or the [**telegram group**](https://t.me/peass) or **follow** us on **Twitter** 🐦 [**@hacktricks\_live**](https://twitter.com/hacktricks_live)**.**
* **Share hacking tricks by submitting PRs to the** [**HackTricks**](https://github.com/carlospolop/hacktricks) and [**HackTricks Cloud**](https://github.com/carlospolop/hacktricks-cloud) github repos.

</details>
{% endhint %}

## CodeBuild

Για περισσότερες πληροφορίες, ελέγξτε αυτή τη σελίδα:

{% content-ref url="../aws-services/aws-codebuild-enum.md" %}
[aws-codebuild-enum.md](../aws-services/aws-codebuild-enum.md)
{% endcontent-ref %}

### buildspec.yml

Εάν αποκτήσετε πρόσβαση εγγραφής σε ένα αποθετήριο που περιέχει ένα αρχείο με όνομα **`buildspec.yml`**, θα μπορούσατε να **backdoor** αυτό το αρχείο, το οποίο καθορίζει τις **εντολές που θα εκτελούνται** μέσα σε ένα έργο CodeBuild και να εξάγετε τα μυστικά, να συμβιβάσετε ό,τι γίνεται και επίσης να συμβιβάσετε τις **credentials ρόλου IAM του CodeBuild**.

Σημειώστε ότι ακόμη και αν δεν υπάρχει κανένα αρχείο **`buildspec.yml`** αλλά γνωρίζετε ότι χρησιμοποιείται το Codebuild (ή μια διαφορετική CI/CD) **η τροποποίηση κάποιου νόμιμου κώδικα** που πρόκειται να εκτελεστεί μπορεί επίσης να σας δώσει μια αντίστροφη κονσόλα, για παράδειγμα.

Για κάποιες σχετικές πληροφορίες, μπορείτε να ελέγξετε τη σελίδα σχετικά με το πώς να επιτεθείτε στις Github Actions (παρόμοια με αυτό):

{% content-ref url="../../../pentesting-ci-cd/github-security/abusing-github-actions/" %}
[abusing-github-actions](../../../pentesting-ci-cd/github-security/abusing-github-actions/)
{% endcontent-ref %}

## Self-hosted GitHub Actions runners in AWS CodeBuild <a href="#action-runner" id="action-runner"></a>

Όπως [**υποδεικνύεται στα έγγραφα**](https://docs.aws.amazon.com/codebuild/latest/userguide/action-runner.html), είναι δυνατόν να ρυθμίσετε το **CodeBuild** να εκτελεί **self-hosted Github actions** όταν ενεργοποιείται μια ροή εργασίας μέσα σε ένα ρυθμισμένο αποθετήριο Github. Αυτό μπορεί να ανιχνευθεί ελέγχοντας τη ρύθμιση του έργου CodeBuild, επειδή ο **τύπος γεγονότος** πρέπει να περιέχει: **`WORKFLOW_JOB_QUEUED`** και σε μια Ροή Εργασίας Github επειδή θα επιλέξει έναν **self-hosted** runner όπως αυτός:
```bash
runs-on: codebuild-<project-name>-${{ github.run_id }}-${{ github.run_attempt }}
```
Αυτή η νέα σχέση μεταξύ του Github Actions και του AWS δημιουργεί έναν άλλο τρόπο για να παραβιαστεί το AWS από το Github, καθώς ο κώδικας στο Github θα εκτελείται σε ένα έργο CodeBuild με έναν ρόλο IAM συνδεδεμένο.

{% hint style="success" %}
Μάθετε & εξασκηθείτε στο AWS Hacking:<img src="../../../.gitbook/assets/image (1) (1) (1).png" alt="" data-size="line">[**HackTricks Training AWS Red Team Expert (ARTE)**](https://training.hacktricks.xyz/courses/arte)<img src="../../../.gitbook/assets/image (1) (1) (1).png" alt="" data-size="line">\
Μάθετε & εξασκηθείτε στο GCP Hacking: <img src="../../../.gitbook/assets/image (2).png" alt="" data-size="line">[**HackTricks Training GCP Red Team Expert (GRTE)**<img src="../../../.gitbook/assets/image (2).png" alt="" data-size="line">](https://training.hacktricks.xyz/courses/grte)

<details>

<summary>Υποστήριξη HackTricks</summary>

* Ελέγξτε τα [**σχέδια συνδρομής**](https://github.com/sponsors/carlospolop)!
* **Εγγραφείτε στην** 💬 [**ομάδα Discord**](https://discord.gg/hRep4RUj7f) ή στην [**ομάδα telegram**](https://t.me/peass) ή **ακολουθήστε** μας στο **Twitter** 🐦 [**@hacktricks\_live**](https://twitter.com/hacktricks_live)**.**
* **Μοιραστείτε κόλπα hacking υποβάλλοντας PRs στα** [**HackTricks**](https://github.com/carlospolop/hacktricks) και [**HackTricks Cloud**](https://github.com/carlospolop/hacktricks-cloud) github repos.

</details>
{% endhint %}
