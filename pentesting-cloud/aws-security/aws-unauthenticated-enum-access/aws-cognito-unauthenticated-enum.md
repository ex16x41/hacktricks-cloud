# AWS - Cognito Kimlik DoÄŸrulamasÄ±z Enum

{% hint style="success" %}
AWS Hacking'i Ã¶ÄŸrenin ve uygulayÄ±n:<img src="/.gitbook/assets/image.png" alt="" data-size="line">[**HackTricks EÄŸitim AWS KÄ±rmÄ±zÄ± TakÄ±m UzmanÄ± (ARTE)**](https://training.hacktricks.xyz/courses/arte)<img src="/.gitbook/assets/image.png" alt="" data-size="line">\
GCP Hacking'i Ã¶ÄŸrenin ve uygulayÄ±n: <img src="/.gitbook/assets/image (2).png" alt="" data-size="line">[**HackTricks EÄŸitim GCP KÄ±rmÄ±zÄ± TakÄ±m UzmanÄ± (GRTE)**<img src="/.gitbook/assets/image (2).png" alt="" data-size="line">](https://training.hacktricks.xyz/courses/grte)

<details>

<summary>HackTricks'i Destekleyin</summary>

* [**Abonelik planlarÄ±nÄ±**](https://github.com/sponsors/carlospolop) kontrol edin!
* ğŸ’¬ [**Discord grubuna**](https://discord.gg/hRep4RUj7f) katÄ±lÄ±n veya [**telegram grubuna**](https://t.me/peass) katÄ±lÄ±n veya bizi **Twitter** ğŸ¦ [**@hacktricks\_live**](https://twitter.com/hacktricks\_live)** takip edin.**
* **Hacking pÃ¼f noktalarÄ±nÄ± paylaÅŸarak PR'ler gÃ¶ndererek HackTricks ve HackTricks Cloud github depolarÄ±na katkÄ±da bulunun.**

</details>
{% endhint %}

## Kimlik DoÄŸrulamasÄ±z Cognito

Cognito, geliÅŸtiricilere **uygulama kullanÄ±cÄ±larÄ±na AWS hizmetlerine eriÅŸim verme** olanaÄŸÄ± saÄŸlayan bir AWS hizmetidir. GeliÅŸtiriciler, uygulamalarÄ±nda **kimlik doÄŸrulamasÄ± yapÄ±lmÄ±ÅŸ kullanÄ±cÄ±lara IAM rolleri vereceklerdir** (muhtemelen insanlar sadece kaydolabilecekler) ve ayrÄ±ca **kimlik doÄŸrulamasÄ±z kullanÄ±cÄ±lara bir IAM rolÃ¼ verebilirler**.

Cognito hakkÄ±nda temel bilgiler iÃ§in ÅŸuraya bakÄ±n:

{% content-ref url="../aws-services/aws-cognito-enum/" %}
[aws-cognito-enum](../aws-services/aws-cognito-enum/)
{% endcontent-ref %}

### Pentesting ve enumarasyon iÃ§in Pacu modÃ¼lleri

[Pacu](https://github.com/RhinoSecurityLabs/pacu), AWS istismar Ã§erÃ§evesi, artÄ±k hesaptaki tÃ¼m Cognito varlÄ±klarÄ±nÄ±n enumarasyonunu otomatikleÅŸtiren "cognito__enum" ve "cognito__attack" modÃ¼llerini iÃ§erir ve zayÄ±f yapÄ±landÄ±rmalarÄ±, eriÅŸim kontrolÃ¼ iÃ§in kullanÄ±lan kullanÄ±cÄ± Ã¶zniteliklerini vb. iÅŸaretler, ayrÄ±ca kullanÄ±cÄ± oluÅŸturmayÄ± (MFA desteÄŸi de dahil) ve deÄŸiÅŸtirilebilir Ã¶zel Ã¶zniteliklere dayalÄ± ayrÄ±calÄ±k yÃ¼kseltmeyi otomatikleÅŸtirir, kullanÄ±labilir kimlik havuzu kimlik bilgileri, id belgelerindeki rol alÄ±nabilir roller vb.

ModÃ¼llerin iÅŸlevlerinin aÃ§Ä±klamasÄ± iÃ§in [blog yazÄ±sÄ±nÄ±n](https://rhinosecuritylabs.com/aws/attacking-aws-cognito-with-pacu-p2) 2. bÃ¶lÃ¼mÃ¼ne bakÄ±n. Kurulum talimatlarÄ± iÃ§in ana [Pacu](https://github.com/RhinoSecurityLabs/pacu) sayfasÄ±na bakÄ±n.

### KullanÄ±m

Belirli bir kimlik havuzu ve kullanÄ±cÄ± havuzu istemcisine karÅŸÄ± kullanÄ±cÄ± oluÅŸturma ve tÃ¼m ayrÄ±calÄ±k yÃ¼kseltme vektÃ¶rlerini denemek iÃ§in Ã¶rnek cognito__attack kullanÄ±mÄ±:
```bash
Pacu (new:test) > run cognito__attack --username randomuser --email XX+sdfs2@gmail.com --identity_pools
us-east-2:a06XXXXX-c9XX-4aXX-9a33-9ceXXXXXXXXX --user_pool_clients
59f6tuhfXXXXXXXXXXXXXXXXXX@us-east-2_0aXXXXXXX
```
Ã–rnek cognito__enum kullanÄ±mÄ±, mevcut AWS hesabÄ±nda gÃ¶rÃ¼lebilen tÃ¼m kullanÄ±cÄ± havuzlarÄ±, kullanÄ±cÄ± havuzu istemcileri, kimlik havuzlarÄ±, kullanÄ±cÄ±lar vb. bilgileri toplamak iÃ§in:
```bash
Pacu (new:test) > run cognito__enum
```
### Kimlik Havuzu KimliÄŸi

Kimlik HavuzlarÄ±, yalnÄ±zca **Kimlik Havuzu KimliÄŸini bilen kimlik doÄŸrulanmamÄ±ÅŸ kullanÄ±cÄ±lara IAM rolleri verebilir** (oldukÃ§a yaygÄ±n olarak **bulunabilir**), ve bu bilgiye sahip bir saldÄ±rgan bu IAM rolÃ¼ne **eriÅŸmeye Ã§alÄ±ÅŸabilir** ve bunu istismar edebilir.\
AyrÄ±ca, IAM rolleri, Kimlik Havuzuna eriÅŸen **kimlik doÄŸrulanmÄ±ÅŸ kullanÄ±cÄ±lara atanabilir**. Bir saldÄ±rgan bir kullanÄ±cÄ± **kaydettirebilirse** veya zaten Kimlik Havuzunda kullanÄ±lan **kimlik saÄŸlayÄ±cÄ±ya eriÅŸimi varsa**, kimlik doÄŸrulanmÄ±ÅŸ kullanÄ±cÄ±lara verilen **IAM rolÃ¼ne eriÅŸebilir** ve ayrÄ±calÄ±klarÄ±nÄ± istismar edebilir.

[**Bunu nasÄ±l yapacaÄŸÄ±nÄ±zÄ± buradan kontrol edin**](../aws-services/aws-cognito-enum/cognito-identity-pools.md).

### KullanÄ±cÄ± Havuzu KimliÄŸi

VarsayÄ±lan olarak Cognito, **yeni kullanÄ±cÄ± kaydÄ± yapmanÄ±za izin verir**. Bir kullanÄ±cÄ± kaydÄ± yapabilme yeteneÄŸi, size **altta yatan uygulamaya eriÅŸim** veya Cognito KullanÄ±cÄ± Havuzu'nu kimlik saÄŸlayÄ±cÄ± olarak kabul eden bir Kimlik Havuzunun **kimlik doÄŸrulanmÄ±ÅŸ IAM eriÅŸim rolÃ¼ne eriÅŸim** saÄŸlayabilir. [**Bunu nasÄ±l yapacaÄŸÄ±nÄ±zÄ± buradan kontrol edin**](../aws-services/aws-cognito-enum/cognito-user-pools.md#registration).
