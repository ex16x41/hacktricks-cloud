# AWS - Cognito Yetkisiz Enum

{% hint style="success" %}
AWS Hacking'i Ã¶ÄŸrenin ve pratik yapÄ±n:<img src="../../../.gitbook/assets/image (1).png" alt="" data-size="line">[**HackTricks EÄŸitim AWS KÄ±rmÄ±zÄ± Ekip UzmanÄ± (ARTE)**](https://training.hacktricks.xyz/courses/arte)<img src="../../../.gitbook/assets/image (1).png" alt="" data-size="line">\
GCP Hacking'i Ã¶ÄŸrenin ve pratik yapÄ±n: <img src="../../../.gitbook/assets/image (2).png" alt="" data-size="line">[**HackTricks EÄŸitim GCP KÄ±rmÄ±zÄ± Ekip UzmanÄ± (GRTE)**<img src="../../../.gitbook/assets/image (2).png" alt="" data-size="line">](https://training.hacktricks.xyz/courses/grte)

<details>

<summary>HackTricks'i Destekleyin</summary>

* [**abonelik planlarÄ±nÄ±**](https://github.com/sponsors/carlospolop) kontrol edin!
* **ğŸ’¬ [**Discord grubuna**](https://discord.gg/hRep4RUj7f) veya [**telegram grubuna**](https://t.me/peass) katÄ±lÄ±n ya da **Twitter**'da **bizi takip edin** ğŸ¦ [**@hacktricks\_live**](https://twitter.com/hacktricks\_live)**.**
* **Hacking ipuÃ§larÄ±nÄ± paylaÅŸmak iÃ§in** [**HackTricks**](https://github.com/carlospolop/hacktricks) ve [**HackTricks Cloud**](https://github.com/carlospolop/hacktricks-cloud) github reposuna PR gÃ¶nderin.

</details>
{% endhint %}

## Yetkisiz Cognito

Cognito, geliÅŸtiricilerin **uygulama kullanÄ±cÄ±larÄ±na AWS hizmetlerine eriÅŸim vermesini** saÄŸlayan bir AWS hizmetidir. GeliÅŸtiriciler, uygulamalarÄ±ndaki **kimlik doÄŸrulama yapÄ±lmÄ±ÅŸ kullanÄ±cÄ±lara IAM rolleri vereceklerdir** (potansiyel olarak insanlar sadece kaydolabilecek) ve ayrÄ±ca **yetkisiz kullanÄ±cÄ±lara IAM rolÃ¼ verebilirler**.

Cognito hakkÄ±nda temel bilgi iÃ§in kontrol edin:

{% content-ref url="../aws-services/aws-cognito-enum/" %}
[aws-cognito-enum](../aws-services/aws-cognito-enum/)
{% endcontent-ref %}

### Kimlik Havuzu ID'si

Kimlik HavuzlarÄ±, sadece **Kimlik Havuzu ID'sini bilen** **yetkisiz kullanÄ±cÄ±lara IAM rolleri verebilir** (bu oldukÃ§a yaygÄ±n bir ÅŸekilde **bulunabilir**), ve bu bilgiye sahip bir saldÄ±rgan **o IAM rolÃ¼ne eriÅŸmeye** Ã§alÄ±ÅŸabilir ve bunu istismar edebilir.\
AyrÄ±ca, IAM rolleri, Kimlik Havuzuna eriÅŸen **kimlik doÄŸrulama yapÄ±lmÄ±ÅŸ kullanÄ±cÄ±lara** da atanabilir. EÄŸer bir saldÄ±rgan **bir kullanÄ±cÄ± kaydedebilirse** veya zaten kimlik havuzunda kullanÄ±lan **kimlik saÄŸlayÄ±cÄ±sÄ±na eriÅŸimi varsa**, **kimlik doÄŸrulama yapÄ±lmÄ±ÅŸ** kullanÄ±cÄ±lara verilen **IAM rolÃ¼ne eriÅŸebilir** ve ayrÄ±calÄ±klarÄ±nÄ± kÃ¶tÃ¼ye kullanabilir.

[**Bunu nasÄ±l yapacaÄŸÄ±nÄ±zÄ± buradan kontrol edin**](../aws-services/aws-cognito-enum/cognito-identity-pools.md).

### KullanÄ±cÄ± Havuzu ID'si

VarsayÄ±lan olarak Cognito, **yeni kullanÄ±cÄ± kaydetmeye** izin verir. Bir kullanÄ±cÄ± kaydedebilmek, size **temel uygulamaya** veya **Cognito KullanÄ±cÄ± Havuzunu kimlik saÄŸlayÄ±cÄ± olarak kabul eden bir Kimlik Havuzunun kimlik doÄŸrulama yapÄ±lmÄ±ÅŸ IAM eriÅŸim rolÃ¼ne** **eriÅŸim** verebilir. [**Bunu nasÄ±l yapacaÄŸÄ±nÄ±zÄ± buradan kontrol edin**](../aws-services/aws-cognito-enum/cognito-user-pools.md#registration).

### Pentesting ve enum iÃ§in Pacu modÃ¼lleri

[Pacu](https://github.com/RhinoSecurityLabs/pacu), AWS istismar Ã§erÃ§evesi, artÄ±k bir hesapta tÃ¼m Cognito varlÄ±klarÄ±nÄ±n enum'lanmasÄ±nÄ± otomatikleÅŸtiren ve zayÄ±f yapÄ±landÄ±rmalarÄ±, eriÅŸim kontrolÃ¼ iÃ§in kullanÄ±lan kullanÄ±cÄ± Ã¶zelliklerini vb. iÅŸaret eden "cognito\_\_enum" ve "cognito\_\_attack" modÃ¼llerini iÃ§ermektedir. AyrÄ±ca, kullanÄ±cÄ± oluÅŸturmayÄ± (MFA desteÄŸi dahil) ve deÄŸiÅŸtirilebilir Ã¶zel Ã¶zelliklere, kullanÄ±labilir kimlik havuzu kimlik bilgilerine, id token'larÄ±ndaki Ã¼stlenilebilir rollere dayalÄ± ayrÄ±calÄ±k yÃ¼kseltmeyi otomatikleÅŸtirir.

ModÃ¼llerin iÅŸlevlerinin aÃ§Ä±klamasÄ± iÃ§in [blog yazÄ±sÄ±nÄ±n](https://rhinosecuritylabs.com/aws/attacking-aws-cognito-with-pacu-p2) 2. kÄ±smÄ±na bakÄ±n. Kurulum talimatlarÄ± iÃ§in ana [Pacu](https://github.com/RhinoSecurityLabs/pacu) sayfasÄ±na bakÄ±n.

#### KullanÄ±m

Belirli bir kimlik havuzu ve kullanÄ±cÄ± havuzu istemcisi iÃ§in kullanÄ±cÄ± oluÅŸturma ve tÃ¼m ayrÄ±calÄ±k yÃ¼kseltme vektÃ¶rlerini denemek iÃ§in Ã¶rnek `cognito__attack` kullanÄ±mÄ±:
```bash
Pacu (new:test) > run cognito__attack --username randomuser --email XX+sdfs2@gmail.com --identity_pools
us-east-2:a06XXXXX-c9XX-4aXX-9a33-9ceXXXXXXXXX --user_pool_clients
59f6tuhfXXXXXXXXXXXXXXXXXX@us-east-2_0aXXXXXXX
```
Cognito\_\_enum kullanÄ±mÄ±na Ã¶rnek, mevcut AWS hesabÄ±nda gÃ¶rÃ¼lebilen tÃ¼m kullanÄ±cÄ± havuzlarÄ±nÄ±, kullanÄ±cÄ± havuzu istemcilerini, kimlik havuzlarÄ±nÄ±, kullanÄ±cÄ±larÄ± vb. toplamak iÃ§in:
```bash
Pacu (new:test) > run cognito__enum
```
{% hint style="success" %}
AWS Hacking'i Ã¶ÄŸrenin ve pratik yapÄ±n:<img src="../../../.gitbook/assets/image (1).png" alt="" data-size="line">[**HackTricks EÄŸitim AWS KÄ±rmÄ±zÄ± TakÄ±m UzmanÄ± (ARTE)**](https://training.hacktricks.xyz/courses/arte)<img src="../../../.gitbook/assets/image (1).png" alt="" data-size="line">\
GCP Hacking'i Ã¶ÄŸrenin ve pratik yapÄ±n: <img src="../../../.gitbook/assets/image (2).png" alt="" data-size="line">[**HackTricks EÄŸitim GCP KÄ±rmÄ±zÄ± TakÄ±m UzmanÄ± (GRTE)**<img src="../../../.gitbook/assets/image (2).png" alt="" data-size="line">](https://training.hacktricks.xyz/courses/grte)

<details>

<summary>HackTricks'i Destekleyin</summary>

* [**abonelik planlarÄ±nÄ±**](https://github.com/sponsors/carlospolop) kontrol edin!
* **ğŸ’¬ [**Discord grubuna**](https://discord.gg/hRep4RUj7f) veya [**telegram grubuna**](https://t.me/peass) katÄ±lÄ±n ya da **Twitter'da** ğŸ¦ [**@hacktricks\_live**](https://twitter.com/hacktricks\_live)**'i takip edin.**
* **Hacking ipuÃ§larÄ±nÄ± paylaÅŸmak iÃ§in** [**HackTricks**](https://github.com/carlospolop/hacktricks) ve [**HackTricks Cloud**](https://github.com/carlospolop/hacktricks-cloud) github reposuna PR gÃ¶nderin.

</details>
{% endhint %}
