# AWS - Cognito Unauthenticated Enum

{% hint style="success" %}
Learn & practice AWS Hacking:<img src="../../../.gitbook/assets/image (1).png" alt="" data-size="line">[**HackTricks Training AWS Red Team Expert (ARTE)**](https://training.hacktricks.xyz/courses/arte)<img src="../../../.gitbook/assets/image (1).png" alt="" data-size="line">\
Learn & practice GCP Hacking: <img src="../../../.gitbook/assets/image (2).png" alt="" data-size="line">[**HackTricks Training GCP Red Team Expert (GRTE)**<img src="../../../.gitbook/assets/image (2).png" alt="" data-size="line">](https://training.hacktricks.xyz/courses/grte)

<details>

<summary>Support HackTricks</summary>

* Check the [**subscription plans**](https://github.com/sponsors/carlospolop)!
* **Join the** üí¨ [**Discord group**](https://discord.gg/hRep4RUj7f) or the [**telegram group**](https://t.me/peass) or **follow** us on **Twitter** üê¶ [**@hacktricks\_live**](https://twitter.com/hacktricks\_live)**.**
* **Share hacking tricks by submitting PRs to the** [**HackTricks**](https://github.com/carlospolop/hacktricks) and [**HackTricks Cloud**](https://github.com/carlospolop/hacktricks-cloud) github repos.

</details>
{% endhint %}

## Unauthenticated Cognito

Cognito ‡§è‡§ï AWS ‡§∏‡•á‡§µ‡§æ ‡§π‡•à ‡§ú‡•ã ‡§°‡•á‡§µ‡§≤‡§™‡§∞‡•ç‡§∏ ‡§ï‡•ã **‡§Ö‡§™‡§®‡•á ‡§ê‡§™ ‡§â‡§™‡§Ø‡•ã‡§ó‡§ï‡§∞‡•ç‡§§‡§æ‡§ì‡§Ç ‡§ï‡•ã AWS ‡§∏‡•á‡§µ‡§æ‡§ì‡§Ç ‡§§‡§ï ‡§™‡§π‡•Å‡§Ç‡§ö ‡§™‡•ç‡§∞‡§¶‡§æ‡§® ‡§ï‡§∞‡§®‡•á** ‡§ï‡•Ä ‡§Ö‡§®‡•Å‡§Æ‡§§‡§ø ‡§¶‡•á‡§§‡•Ä ‡§π‡•à‡•§ ‡§°‡•á‡§µ‡§≤‡§™‡§∞‡•ç‡§∏ **‡§™‡•ç‡§∞‡§Æ‡§æ‡§£‡§ø‡§§ ‡§â‡§™‡§Ø‡•ã‡§ó‡§ï‡§∞‡•ç‡§§‡§æ‡§ì‡§Ç** ‡§ï‡•ã ‡§Ö‡§™‡§®‡•á ‡§ê‡§™ ‡§Æ‡•á‡§Ç **IAM ‡§≠‡•Ç‡§Æ‡§ø‡§ï‡§æ‡§è‡§Å** ‡§™‡•ç‡§∞‡§¶‡§æ‡§® ‡§ï‡§∞‡•á‡§Ç‡§ó‡•á (‡§∏‡§Ç‡§≠‡§µ‡§§‡§É ‡§≤‡•ã‡§ó ‡§ï‡•á‡§µ‡§≤ ‡§∏‡§æ‡§á‡§® ‡§Ö‡§™ ‡§ï‡§∞ ‡§∏‡§ï‡•á‡§Ç‡§ó‡•á) ‡§î‡§∞ ‡§µ‡•á **‡§Ö‡§®‡§™‡•ç‡§∞‡§Æ‡§æ‡§£‡§ø‡§§ ‡§â‡§™‡§Ø‡•ã‡§ó‡§ï‡§∞‡•ç‡§§‡§æ‡§ì‡§Ç** ‡§ï‡•ã ‡§≠‡•Ä **IAM ‡§≠‡•Ç‡§Æ‡§ø‡§ï‡§æ** ‡§™‡•ç‡§∞‡§¶‡§æ‡§® ‡§ï‡§∞ ‡§∏‡§ï‡§§‡•á ‡§π‡•à‡§Ç‡•§

Cognito ‡§ï‡•á ‡§¨‡§æ‡§∞‡•á ‡§Æ‡•á‡§Ç ‡§¨‡•Å‡§®‡§ø‡§Ø‡§æ‡§¶‡•Ä ‡§ú‡§æ‡§®‡§ï‡§æ‡§∞‡•Ä ‡§ï‡•á ‡§≤‡§ø‡§è ‡§¶‡•á‡§ñ‡•á‡§Ç:

{% content-ref url="../aws-services/aws-cognito-enum/" %}
[aws-cognito-enum](../aws-services/aws-cognito-enum/)
{% endcontent-ref %}

### Identity Pool ID

Identity Pools **‡§Ö‡§®‡§™‡•ç‡§∞‡§Æ‡§æ‡§£‡§ø‡§§ ‡§â‡§™‡§Ø‡•ã‡§ó‡§ï‡§∞‡•ç‡§§‡§æ‡§ì‡§Ç** ‡§ï‡•ã **IAM ‡§≠‡•Ç‡§Æ‡§ø‡§ï‡§æ‡§è‡§Å** ‡§™‡•ç‡§∞‡§¶‡§æ‡§® ‡§ï‡§∞ ‡§∏‡§ï‡§§‡•á ‡§π‡•à‡§Ç ‡§ú‡•ã ‡§ï‡•á‡§µ‡§≤ **Identity Pool ID** ‡§ï‡•ã **‡§ú‡§æ‡§®‡§§‡•á ‡§π‡•à‡§Ç** (‡§ú‡•ã ‡§ï‡§ø **‡§ñ‡•ã‡§ú‡§®‡§æ** ‡§ï‡§æ‡§´‡•Ä ‡§∏‡§æ‡§Æ‡§æ‡§®‡•ç‡§Ø ‡§π‡•à), ‡§î‡§∞ ‡§á‡§∏ ‡§ú‡§æ‡§®‡§ï‡§æ‡§∞‡•Ä ‡§ï‡•á ‡§∏‡§æ‡§• ‡§è‡§ï ‡§π‡§Æ‡§≤‡§æ‡§µ‡§∞ **IAM ‡§≠‡•Ç‡§Æ‡§ø‡§ï‡§æ** ‡§§‡§ï ‡§™‡§π‡•Å‡§Å‡§ö‡§®‡•á ‡§î‡§∞ ‡§á‡§∏‡§ï‡§æ ‡§¶‡•Å‡§∞‡•Å‡§™‡§Ø‡•ã‡§ó ‡§ï‡§∞‡§®‡•á ‡§ï‡•Ä ‡§ï‡•ã‡§∂‡§ø‡§∂ ‡§ï‡§∞ ‡§∏‡§ï‡§§‡§æ ‡§π‡•à‡•§\
‡§á‡§∏‡§ï‡•á ‡§Ö‡§≤‡§æ‡§µ‡§æ, IAM ‡§≠‡•Ç‡§Æ‡§ø‡§ï‡§æ‡§è‡§Å **‡§™‡•ç‡§∞‡§Æ‡§æ‡§£‡§ø‡§§ ‡§â‡§™‡§Ø‡•ã‡§ó‡§ï‡§∞‡•ç‡§§‡§æ‡§ì‡§Ç** ‡§ï‡•ã ‡§≠‡•Ä ‡§∏‡•å‡§Ç‡§™‡•á ‡§ú‡§æ ‡§∏‡§ï‡§§‡•á ‡§π‡•à‡§Ç ‡§ú‡•ã Identity Pool ‡§§‡§ï ‡§™‡§π‡•Å‡§Å‡§ö‡§§‡•á ‡§π‡•à‡§Ç‡•§ ‡§Ø‡§¶‡§ø ‡§è‡§ï ‡§π‡§Æ‡§≤‡§æ‡§µ‡§∞ **‡§è‡§ï ‡§â‡§™‡§Ø‡•ã‡§ó‡§ï‡§∞‡•ç‡§§‡§æ ‡§™‡§Ç‡§ú‡•Ä‡§ï‡•É‡§§ ‡§ï‡§∞ ‡§∏‡§ï‡§§‡§æ ‡§π‡•à** ‡§Ø‡§æ ‡§™‡§π‡§≤‡•á ‡§∏‡•á ‡§π‡•Ä Identity Pool ‡§Æ‡•á‡§Ç ‡§â‡§™‡§Ø‡•ã‡§ó ‡§ï‡§ø‡§è ‡§ú‡§æ‡§®‡•á ‡§µ‡§æ‡§≤‡•á **‡§™‡§π‡§ö‡§æ‡§® ‡§™‡•ç‡§∞‡§¶‡§æ‡§§‡§æ** ‡§§‡§ï **‡§™‡§π‡•Å‡§Å‡§ö** ‡§∞‡§ñ‡§§‡§æ ‡§π‡•à, ‡§§‡•ã ‡§µ‡§π **‡§™‡•ç‡§∞‡§Æ‡§æ‡§£‡§ø‡§§** ‡§â‡§™‡§Ø‡•ã‡§ó‡§ï‡§∞‡•ç‡§§‡§æ‡§ì‡§Ç ‡§ï‡•ã ‡§¶‡•Ä ‡§ó‡§à **IAM ‡§≠‡•Ç‡§Æ‡§ø‡§ï‡§æ** ‡§§‡§ï ‡§™‡§π‡•Å‡§Å‡§ö ‡§∏‡§ï‡§§‡§æ ‡§π‡•à ‡§î‡§∞ ‡§á‡§∏‡§ï‡•á ‡§µ‡§ø‡§∂‡•á‡§∑‡§æ‡§ß‡§ø‡§ï‡§æ‡§∞‡•ã‡§Ç ‡§ï‡§æ ‡§¶‡•Å‡§∞‡•Å‡§™‡§Ø‡•ã‡§ó ‡§ï‡§∞ ‡§∏‡§ï‡§§‡§æ ‡§π‡•à‡•§

[**‡§Ø‡§π‡§æ‡§Å ‡§¶‡•á‡§ñ‡•á‡§Ç ‡§ï‡§ø ‡§ï‡•à‡§∏‡•á ‡§ï‡§∞‡•á‡§Ç**](../aws-services/aws-cognito-enum/cognito-identity-pools.md).

### User Pool ID

‡§°‡§ø‡§´‡§º‡•â‡§≤‡•ç‡§ü ‡§∞‡•Ç‡§™ ‡§∏‡•á Cognito **‡§®‡§è ‡§â‡§™‡§Ø‡•ã‡§ó‡§ï‡§∞‡•ç‡§§‡§æ ‡§ï‡•ã ‡§™‡§Ç‡§ú‡•Ä‡§ï‡•É‡§§ ‡§ï‡§∞‡§®‡•á** ‡§ï‡•Ä ‡§Ö‡§®‡•Å‡§Æ‡§§‡§ø ‡§¶‡•á‡§§‡§æ ‡§π‡•à‡•§ ‡§è‡§ï ‡§â‡§™‡§Ø‡•ã‡§ó‡§ï‡§∞‡•ç‡§§‡§æ ‡§ï‡•ã ‡§™‡§Ç‡§ú‡•Ä‡§ï‡•É‡§§ ‡§ï‡§∞‡§®‡•á ‡§Æ‡•á‡§Ç ‡§∏‡§ï‡•ç‡§∑‡§Æ ‡§π‡•ã‡§®‡§æ ‡§Ü‡§™‡§ï‡•ã **‡§®‡•Ä‡§Ç‡§µ ‡§è‡§™‡•ç‡§≤‡§ø‡§ï‡•á‡§∂‡§®** ‡§Ø‡§æ **‡§è‡§ï Identity Pool ‡§ï‡•á ‡§™‡•ç‡§∞‡§Æ‡§æ‡§£‡§ø‡§§ IAM ‡§è‡§ï‡•ç‡§∏‡•á‡§∏ ‡§≠‡•Ç‡§Æ‡§ø‡§ï‡§æ** ‡§§‡§ï **‡§™‡§π‡•Å‡§Å‡§ö** ‡§¶‡•á ‡§∏‡§ï‡§§‡§æ ‡§π‡•à ‡§ú‡•ã Cognito User Pool ‡§ï‡•ã ‡§™‡§π‡§ö‡§æ‡§® ‡§™‡•ç‡§∞‡§¶‡§æ‡§§‡§æ ‡§ï‡•á ‡§∞‡•Ç‡§™ ‡§Æ‡•á‡§Ç ‡§∏‡•ç‡§µ‡•Ä‡§ï‡§æ‡§∞ ‡§ï‡§∞ ‡§∞‡§π‡§æ ‡§π‡•à‡•§ [**‡§Ø‡§π‡§æ‡§Å ‡§¶‡•á‡§ñ‡•á‡§Ç ‡§ï‡§ø ‡§ï‡•à‡§∏‡•á ‡§ï‡§∞‡•á‡§Ç**](../aws-services/aws-cognito-enum/cognito-user-pools.md#registration).

### Pacu modules for pentesting and enumeration

[Pacu](https://github.com/RhinoSecurityLabs/pacu), AWS ‡§∂‡•ã‡§∑‡§£ ‡§¢‡§æ‡§Ç‡§ö‡§æ, ‡§Ö‡§¨ "cognito\_\_enum" ‡§î‡§∞ "cognito\_\_attack" ‡§Æ‡•â‡§°‡•ç‡§Ø‡•Ç‡§≤ ‡§∂‡§æ‡§Æ‡§ø‡§≤ ‡§ï‡§∞‡§§‡§æ ‡§π‡•à ‡§ú‡•ã ‡§è‡§ï ‡§ñ‡§æ‡§§‡•á ‡§Æ‡•á‡§Ç ‡§∏‡§≠‡•Ä Cognito ‡§∏‡§Ç‡§™‡§§‡•ç‡§§‡§ø‡§Ø‡•ã‡§Ç ‡§ï‡•Ä ‡§ó‡§£‡§®‡§æ ‡§ï‡•ã ‡§∏‡•ç‡§µ‡§ö‡§æ‡§≤‡§ø‡§§ ‡§ï‡§∞‡§§‡§æ ‡§π‡•à ‡§î‡§∞ ‡§ï‡§Æ‡§ú‡•ã‡§∞ ‡§ï‡•â‡§®‡•ç‡§´‡§º‡§ø‡§ó‡§∞‡•á‡§∂‡§®, ‡§â‡§™‡§Ø‡•ã‡§ó‡§ï‡§∞‡•ç‡§§‡§æ ‡§µ‡§ø‡§∂‡•á‡§∑‡§§‡§æ‡§ì‡§Ç ‡§ï‡§æ ‡§â‡§™‡§Ø‡•ã‡§ó ‡§ú‡•ã ‡§™‡§π‡•Å‡§Å‡§ö ‡§®‡§ø‡§Ø‡§Ç‡§§‡•ç‡§∞‡§£ ‡§ï‡•á ‡§≤‡§ø‡§è ‡§π‡•à‡§Ç, ‡§Ü‡§¶‡§ø ‡§ï‡•ã ‡§ö‡§ø‡§π‡•ç‡§®‡§ø‡§§ ‡§ï‡§∞‡§§‡§æ ‡§π‡•à, ‡§î‡§∞ ‡§â‡§™‡§Ø‡•ã‡§ó‡§ï‡§∞‡•ç‡§§‡§æ ‡§®‡§ø‡§∞‡•ç‡§Æ‡§æ‡§£ (MFA ‡§∏‡§Æ‡§∞‡•ç‡§•‡§® ‡§∏‡§π‡§ø‡§§) ‡§î‡§∞ ‡§™‡§∞‡§ø‡§µ‡§∞‡•ç‡§§‡§®‡•Ä‡§Ø ‡§ï‡§∏‡•ç‡§ü‡§Æ ‡§µ‡§ø‡§∂‡•á‡§∑‡§§‡§æ‡§ì‡§Ç, ‡§â‡§™‡§Ø‡•ã‡§ó ‡§Ø‡•ã‡§ó‡•ç‡§Ø ‡§™‡§π‡§ö‡§æ‡§® ‡§™‡•Ç‡§≤ ‡§ï‡•ç‡§∞‡•á‡§°‡•á‡§Ç‡§∂‡§ø‡§Ø‡§≤‡•ç‡§∏, ‡§Ü‡§à‡§°‡•Ä ‡§ü‡•ã‡§ï‡§® ‡§Æ‡•á‡§Ç ‡§Ö‡§∏‡•ç‡§µ‡•Ä‡§ï‡§æ‡§∞ ‡§Ø‡•ã‡§ó‡•ç‡§Ø ‡§≠‡•Ç‡§Æ‡§ø‡§ï‡§æ‡§ì‡§Ç ‡§ï‡•á ‡§Ü‡§ß‡§æ‡§∞ ‡§™‡§∞ ‡§µ‡§ø‡§∂‡•á‡§∑‡§æ‡§ß‡§ø‡§ï‡§æ‡§∞ ‡§µ‡•É‡§¶‡•ç‡§ß‡§ø ‡§ï‡•ã ‡§≠‡•Ä ‡§∏‡•ç‡§µ‡§ö‡§æ‡§≤‡§ø‡§§ ‡§ï‡§∞‡§§‡§æ ‡§π‡•à‡•§

‡§Æ‡•â‡§°‡•ç‡§Ø‡•Ç‡§≤ ‡§ï‡•á ‡§ï‡§æ‡§∞‡•ç‡§Ø‡•ã‡§Ç ‡§ï‡§æ ‡§µ‡§ø‡§µ‡§∞‡§£ ‡§¶‡•á‡§ñ‡§®‡•á ‡§ï‡•á ‡§≤‡§ø‡§è [‡§¨‡•ç‡§≤‡•â‡§ó ‡§™‡•ã‡§∏‡•ç‡§ü](https://rhinosecuritylabs.com/aws/attacking-aws-cognito-with-pacu-p2) ‡§ï‡•á ‡§≠‡§æ‡§ó 2 ‡§ï‡•ã ‡§¶‡•á‡§ñ‡•á‡§Ç‡•§ ‡§∏‡•ç‡§•‡§æ‡§™‡§®‡§æ ‡§®‡§ø‡§∞‡•ç‡§¶‡•á‡§∂‡•ã‡§Ç ‡§ï‡•á ‡§≤‡§ø‡§è ‡§Æ‡•Å‡§ñ‡•ç‡§Ø [Pacu](https://github.com/RhinoSecurityLabs/pacu) ‡§™‡•É‡§∑‡•ç‡§† ‡§¶‡•á‡§ñ‡•á‡§Ç‡•§

#### Usage

Sample `cognito__attack` ‡§â‡§™‡§Ø‡•ã‡§ó ‡§è‡§ï ‡§¶‡§ø‡§è ‡§ó‡§è ‡§™‡§π‡§ö‡§æ‡§® ‡§™‡•Ç‡§≤ ‡§î‡§∞ ‡§â‡§™‡§Ø‡•ã‡§ó‡§ï‡§∞‡•ç‡§§‡§æ ‡§™‡•Ç‡§≤ ‡§ï‡•ç‡§≤‡§æ‡§á‡§Ç‡§ü ‡§ï‡•á ‡§ñ‡§ø‡§≤‡§æ‡§´ ‡§â‡§™‡§Ø‡•ã‡§ó‡§ï‡§∞‡•ç‡§§‡§æ ‡§®‡§ø‡§∞‡•ç‡§Æ‡§æ‡§£ ‡§î‡§∞ ‡§∏‡§≠‡•Ä ‡§™‡•ç‡§∞‡§ø‡§µ‡•á‡§∏‡•ç‡§ï ‡§µ‡•á‡§ï‡•ç‡§ü‡§∞ ‡§ï‡§æ ‡§™‡•ç‡§∞‡§Ø‡§æ‡§∏ ‡§ï‡§∞‡§®‡•á ‡§ï‡•á ‡§≤‡§ø‡§è:
```bash
Pacu (new:test) > run cognito__attack --username randomuser --email XX+sdfs2@gmail.com --identity_pools
us-east-2:a06XXXXX-c9XX-4aXX-9a33-9ceXXXXXXXXX --user_pool_clients
59f6tuhfXXXXXXXXXXXXXXXXXX@us-east-2_0aXXXXXXX
```
‡§∏‡•à‡§Ç‡§™‡§≤ cognito\_\_enum ‡§ï‡§æ ‡§â‡§™‡§Ø‡•ã‡§ó ‡§µ‡§∞‡•ç‡§§‡§Æ‡§æ‡§® AWS ‡§ñ‡§æ‡§§‡•á ‡§Æ‡•á‡§Ç ‡§¶‡•É‡§∂‡•ç‡§Ø ‡§∏‡§≠‡•Ä ‡§â‡§™‡§Ø‡•ã‡§ó‡§ï‡§∞‡•ç‡§§‡§æ ‡§™‡•Ç‡§≤, ‡§â‡§™‡§Ø‡•ã‡§ó‡§ï‡§∞‡•ç‡§§‡§æ ‡§™‡•Ç‡§≤ ‡§ï‡•ç‡§≤‡§æ‡§á‡§Ç‡§ü, ‡§™‡§π‡§ö‡§æ‡§® ‡§™‡•Ç‡§≤, ‡§â‡§™‡§Ø‡•ã‡§ó‡§ï‡§∞‡•ç‡§§‡§æ ‡§Ü‡§¶‡§ø ‡§è‡§ï‡§§‡•ç‡§∞ ‡§ï‡§∞‡§®‡•á ‡§ï‡•á ‡§≤‡§ø‡§è:
```bash
Pacu (new:test) > run cognito__enum
```
{% hint style="success" %}
Learn & practice AWS Hacking:<img src="../../../.gitbook/assets/image (1).png" alt="" data-size="line">[**HackTricks Training AWS Red Team Expert (ARTE)**](https://training.hacktricks.xyz/courses/arte)<img src="../../../.gitbook/assets/image (1).png" alt="" data-size="line">\
Learn & practice GCP Hacking: <img src="../../../.gitbook/assets/image (2).png" alt="" data-size="line">[**HackTricks Training GCP Red Team Expert (GRTE)**<img src="../../../.gitbook/assets/image (2).png" alt="" data-size="line">](https://training.hacktricks.xyz/courses/grte)

<details>

<summary>Support HackTricks</summary>

* Check the [**subscription plans**](https://github.com/sponsors/carlospolop)!
* **Join the** üí¨ [**Discord group**](https://discord.gg/hRep4RUj7f) or the [**telegram group**](https://t.me/peass) or **follow** us on **Twitter** üê¶ [**@hacktricks\_live**](https://twitter.com/hacktricks\_live)**.**
* **‡§π‡•à‡§ï‡§ø‡§Ç‡§ó ‡§ü‡•ç‡§∞‡§ø‡§ï‡•ç‡§∏ ‡§∏‡§æ‡§ù‡§æ ‡§ï‡§∞‡•á‡§Ç PRs ‡§ï‡•ã** [**HackTricks**](https://github.com/carlospolop/hacktricks) ‡§î‡§∞ [**HackTricks Cloud**](https://github.com/carlospolop/hacktricks-cloud) ‡§ó‡§ø‡§ü‡§π‡§¨ ‡§∞‡§ø‡§™‡•ã‡§ú‡§ø‡§ü‡§∞‡•Ä ‡§Æ‡•á‡§Ç ‡§∏‡§¨‡§Æ‡§ø‡§ü ‡§ï‡§∞‡§ï‡•á‡•§

</details>
{% endhint %}
