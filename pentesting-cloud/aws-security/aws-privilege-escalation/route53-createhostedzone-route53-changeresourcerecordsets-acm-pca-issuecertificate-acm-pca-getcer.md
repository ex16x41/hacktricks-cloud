# AWS - Route53 Yetki YÃ¼kseltme

{% hint style="success" %}
AWS Hacking'i Ã¶ÄŸrenin ve uygulayÄ±n:<img src="/.gitbook/assets/image.png" alt="" data-size="line">[**HackTricks EÄŸitim AWS KÄ±rmÄ±zÄ± TakÄ±m UzmanÄ± (ARTE)**](https://training.hacktricks.xyz/courses/arte)<img src="/.gitbook/assets/image.png" alt="" data-size="line">\
GCP Hacking'i Ã¶ÄŸrenin ve uygulayÄ±n: <img src="/.gitbook/assets/image (2).png" alt="" data-size="line">[**HackTricks EÄŸitim GCP KÄ±rmÄ±zÄ± TakÄ±m UzmanÄ± (GRTE)**<img src="/.gitbook/assets/image (2).png" alt="" data-size="line">](https://training.hacktricks.xyz/courses/grte)

<details>

<summary>HackTricks'i Destekleyin</summary>

* [**Abonelik planlarÄ±nÄ±**](https://github.com/sponsors/carlospolop) kontrol edin!
* ğŸ’¬ [**Discord grubuna**](https://discord.gg/hRep4RUj7f) veya [**telegram grubuna**](https://t.me/peass) katÄ±lÄ±n veya bizi **Twitter** ğŸ¦ [**@hacktricks\_live**](https://twitter.com/hacktricks\_live)** takip edin.**
* **Hacking pÃ¼f noktalarÄ±nÄ± paylaÅŸarak PR'ler gÃ¶ndererek HackTricks ve HackTricks Cloud github depolarÄ±na katkÄ±da bulunun.**

</details>
{% endhint %}

Route53 hakkÄ±nda daha fazla bilgi iÃ§in ÅŸu adrese bakÄ±n:

{% content-ref url="../aws-services/aws-route53-enum.md" %}
[aws-route53-enum.md](../aws-services/aws-route53-enum.md)
{% endcontent-ref %}

### `route53:CreateHostedZone`, `route53:ChangeResourceRecordSets`, `acm-pca:IssueCertificate`, `acm-pca:GetCertificate`

{% hint style="info" %}
Bu saldÄ±rÄ±yÄ± gerÃ§ekleÅŸtirmek iÃ§in hedef hesabÄ±n zaten bir [**AWS Sertifika YÃ¶neticisi Ã–zel Sertifika Yetkilisi**](https://aws.amazon.com/certificate-manager/private-certificate-authority/) **(AWS-PCA)** kurulumuna sahip olmasÄ± ve VPC(ler) iÃ§indeki EC2 Ã¶rneklerinin zaten gÃ¼venmesi iÃ§in sertifikalarÄ± iÃ§e aktarmÄ±ÅŸ olmasÄ± gerekmektedir. Bu altyapÄ± mevcut olduÄŸunda, aÅŸaÄŸÄ±daki saldÄ±rÄ± AWS API trafiÄŸini ele geÃ§irmek iÃ§in gerÃ§ekleÅŸtirilebilir.
{% endhint %}

DiÄŸer izinler **enumarasyon iÃ§in Ã¶nerilir ancak zorunlu deÄŸildir**: `route53:GetHostedZone`, `route53:ListHostedZones`, `acm-pca:ListCertificateAuthorities`, `ec2:DescribeVpcs`

Bir AWS VPC'sinin birbirleriyle ve AWS API'leriyle iletiÅŸim kuran birden fazla bulut doÄŸal uygulamaya sahip olduÄŸunu varsayalÄ±m. Mikroservisler arasÄ±ndaki iletiÅŸim genellikle TLS ÅŸifreli olduÄŸundan, bu hizmetler iÃ§in geÃ§erli sertifikalarÄ± vermek iÃ§in Ã¶zel bir CA olmalÄ±dÄ±r. **EÄŸer ACM-PCA bunun iÃ§in kullanÄ±lÄ±yorsa** ve saldÄ±rgan **hem route53'Ã¼ hem de acm-pca Ã¶zel CA'yÄ± kontrol etmeyi baÅŸarÄ±rsa** yukarÄ±da tanÄ±mlanan minimum izin seti ile, uygulama Ã§aÄŸrÄ±larÄ±nÄ± AWS API'lerine ele geÃ§irerek bunlarÄ±n IAM izinlerini ele geÃ§irebilir.

Bu mÃ¼mkÃ¼ndÃ¼r Ã§Ã¼nkÃ¼:

* AWS SDK'larÄ±na [Sertifika Pinleme](https://www.digicert.com/blog/certificate-pinning-what-is-certificate-pinning) Ã¶zelliÄŸi yoktur
* Route53, AWS API'leri alan adlarÄ± iÃ§in Ã–zel BarÄ±ndÄ±rÄ±lan BÃ¶lge ve DNS kayÄ±tlarÄ± oluÅŸturmaya izin verir
* ACM-PCA'daki Ã–zel CA, yalnÄ±zca belirli Ortak Adlar iÃ§in sertifika imzalamaya kÄ±sÄ±tlanamaz

**Potansiyel Etki:** Trafikte hassas bilgileri ele geÃ§irerek dolaylÄ± yetki yÃ¼kseltme.

#### SÃ¶mÃ¼rÃ¼ <a href="#discovery" id="discovery"></a>

Orijinal araÅŸtÄ±rmada sÃ¶mÃ¼rÃ¼ adÄ±mlarÄ±nÄ± bulun: [**https://niebardzo.github.io/2022-03-11-aws-hijacking-route53/**](https://niebardzo.github.io/2022-03-11-aws-hijacking-route53/)

{% hint style="success" %}
AWS Hacking'i Ã¶ÄŸrenin ve uygulayÄ±n:<img src="/.gitbook/assets/image.png" alt="" data-size="line">[**HackTricks EÄŸitim AWS KÄ±rmÄ±zÄ± TakÄ±m UzmanÄ± (ARTE)**](https://training.hacktricks.xyz/courses/arte)<img src="/.gitbook/assets/image.png" alt="" data-size="line">\
GCP Hacking'i Ã¶ÄŸrenin ve uygulayÄ±n: <img src="/.gitbook/assets/image (2).png" alt="" data-size="line">[**HackTricks EÄŸitim GCP KÄ±rmÄ±zÄ± TakÄ±m UzmanÄ± (GRTE)**<img src="/.gitbook/assets/image (2).png" alt="" data-size="line">](https://training.hacktricks.xyz/courses/grte)

<details>

<summary>HackTricks'i Destekleyin</summary>

* [**Abonelik planlarÄ±nÄ±**](https://github.com/sponsors/carlospolop) kontrol edin!
* ğŸ’¬ [**Discord grubuna**](https://discord.gg/hRep4RUj7f) veya [**telegram grubuna**](https://t.me/peass) katÄ±lÄ±n veya bizi **Twitter** ğŸ¦ [**@hacktricks\_live**](https://twitter.com/hacktricks\_live)** takip edin.**
* **Hacking pÃ¼f noktalarÄ±nÄ± paylaÅŸarak PR'ler gÃ¶ndererek HackTricks ve HackTricks Cloud github depolarÄ±na katkÄ±da bulunun.**

</details>
{% endhint %}
