# AWS - IAM Persistence

{% hint style="success" %}
Learn & practice AWS Hacking:<img src="../../../.gitbook/assets/image (1).png" alt="" data-size="line">[**HackTricks Training AWS Red Team Expert (ARTE)**](https://training.hacktricks.xyz/courses/arte)<img src="../../../.gitbook/assets/image (1).png" alt="" data-size="line">\
Learn & practice GCP Hacking: <img src="../../../.gitbook/assets/image (2).png" alt="" data-size="line">[**HackTricks Training GCP Red Team Expert (GRTE)**<img src="../../../.gitbook/assets/image (2).png" alt="" data-size="line">](https://training.hacktricks.xyz/courses/grte)

<details>

<summary>Support HackTricks</summary>

* Check the [**subscription plans**](https://github.com/sponsors/carlospolop)!
* **Join the** ЁЯТм [**Discord group**](https://discord.gg/hRep4RUj7f) or the [**telegram group**](https://t.me/peass) or **follow** us on **Twitter** ЁЯРж [**@hacktricks\_live**](https://twitter.com/hacktricks\_live)**.**
* **Share hacking tricks by submitting PRs to the** [**HackTricks**](https://github.com/carlospolop/hacktricks) and [**HackTricks Cloud**](https://github.com/carlospolop/hacktricks-cloud) github repos.

</details>
{% endhint %}

## IAM

рдЕрдзрд┐рдХ рдЬрд╛рдирдХрд╛рд░реА рдХреЗ рд▓рд┐рдП рдкрд╣реБрдБрдЪреЗрдВ:

{% content-ref url="../aws-services/aws-iam-enum.md" %}
[aws-iam-enum.md](../aws-services/aws-iam-enum.md)
{% endcontent-ref %}

### рд╕рд╛рдорд╛рдиреНрдп IAM рд╕реНрдерд┐рд░рддрд╛

* рдПрдХ рдЙрдкрдпреЛрдЧрдХрд░реНрддрд╛ рдмрдирд╛рдПрдВ
* рдПрдХ рдирд┐рдпрдВрддреНрд░рд┐рдд рдЙрдкрдпреЛрдЧрдХрд░реНрддрд╛ рдХреЛ рдПрдХ рд╡рд┐рд╢реЗрд╖ рд╕рдореВрд╣ рдореЗрдВ рдЬреЛрдбрд╝реЗрдВ
* рдПрдХреНрд╕реЗрд╕ рдХреБрдВрдЬреА рдмрдирд╛рдПрдВ (рдирдП рдЙрдкрдпреЛрдЧрдХрд░реНрддрд╛ рдпрд╛ рд╕рднреА рдЙрдкрдпреЛрдЧрдХрд░реНрддрд╛рдУрдВ рдХреА)
* рдирд┐рдпрдВрддреНрд░рд┐рдд рдЙрдкрдпреЛрдЧрдХрд░реНрддрд╛рдУрдВ/рд╕рдореВрд╣реЛрдВ рдХреЛ рдЕрддрд┐рд░рд┐рдХреНрдд рдЕрдиреБрдорддрд┐рдпрд╛рдБ рджреЗрдВ (рд╕рдВрд▓рдЧреНрди рдиреАрддрд┐рдпрд╛рдБ рдпрд╛ рдЗрдирд▓рд╛рдЗрди рдиреАрддрд┐рдпрд╛рдБ)
* MFA рдмрдВрдж рдХрд░реЗрдВ / рдЕрдкрдирд╛ рдЦреБрдж рдХрд╛ MFA рдЙрдкрдХрд░рдг рдЬреЛрдбрд╝реЗрдВ
* рдПрдХ рднреВрдорд┐рдХрд╛ рд╢реНрд░реГрдВрдЦрд▓рд╛ рдЬреБрдЧреНрдЧрд▓рд┐рдВрдЧ рд╕реНрдерд┐рддрд┐ рдмрдирд╛рдПрдВ (рдЗрд╕ рдкрд░ рдиреАрдЪреЗ STS рд╕реНрдерд┐рд░рддрд╛ рдореЗрдВ рдЕрдзрд┐рдХ)

### рдмреИрдХрдбреЛрд░ рднреВрдорд┐рдХрд╛ рдЯреНрд░рд╕реНрдЯ рдиреАрддрд┐рдпрд╛рдБ

рдЖрдк рдПрдХ рдЯреНрд░рд╕реНрдЯ рдиреАрддрд┐ рдХреЛ рдмреИрдХрдбреЛрд░ рдХрд░ рд╕рдХрддреЗ рд╣реИрдВ рддрд╛рдХрд┐ рдЖрдк рдЗрд╕реЗ рдПрдХ рдмрд╛рд╣рд░реА рд╕рдВрд╕рд╛рдзрди рдХреЗ рд▓рд┐рдП рдорд╛рди рд▓реЗрдВ рдЬреЛ рдЖрдкрдХреЗ рджреНрд╡рд╛рд░рд╛ рдирд┐рдпрдВрддреНрд░рд┐рдд рд╣реИ (рдпрд╛ рд╕рднреА рдХреЗ рд▓рд┐рдП):
```json
{
"Version": "2012-10-17",
"Statement": [
{
"Effect": "Allow",
"Principal": {
"AWS": [
"*",
"arn:aws:iam::123213123123:root"
]
},
"Action": "sts:AssumeRole"
}
]
}
```
### рдмреИрдХрдбреЛрд░ рдиреАрддрд┐ рд╕рдВрд╕реНрдХрд░рдг

рдПрдХ рдиреАрддрд┐ рдХреЛ рдЙрд╕рдХреЗ рдЕрдВрддрд┐рдо рд╕рдВрд╕реНрдХрд░рдг рдореЗрдВ рдирд╣реАрдВ, рдмрд▓реНрдХрд┐ рдкреНрд░рд╢рд╛рд╕рдирд┐рдХ рдЕрдиреБрдорддрд┐рдпрд╛рдБ рджреЗрдВ (рдЕрдВрддрд┐рдо рд╕рдВрд╕реНрдХрд░рдг рд╡реИрдз рджрд┐рдЦрдирд╛ рдЪрд╛рд╣рд┐рдП), рдлрд┐рд░ рдЙрд╕ рдиреАрддрд┐ рдХреЗ рд╕рдВрд╕реНрдХрд░рдг рдХреЛ рдПрдХ рдирд┐рдпрдВрддреНрд░рд┐рдд рдЙрдкрдпреЛрдЧрдХрд░реНрддрд╛/рд╕рдореВрд╣ рдХреЛ рд╕реМрдВрдкреЗрдВред

### рдмреИрдХрдбреЛрд░ / рдкрд╣рдЪрд╛рди рдкреНрд░рджрд╛рддрд╛ рдмрдирд╛рдПрдВ

рдпрджрд┐ рдЦрд╛рддрд╛ рдкрд╣рд▓реЗ рд╕реЗ рд╣реА рдПрдХ рд╕рд╛рдорд╛рдиреНрдп рдкрд╣рдЪрд╛рди рдкреНрд░рджрд╛рддрд╛ (рдЬреИрд╕реЗ Github) рдкрд░ рднрд░реЛрд╕рд╛ рдХрд░ рд░рд╣рд╛ рд╣реИ, рддреЛ рд╡рд┐рд╢реНрд╡рд╛рд╕ рдХреА рд╢рд░реНрддреЛрдВ рдХреЛ рдмрдврд╝рд╛рдпрд╛ рдЬрд╛ рд╕рдХрддрд╛ рд╣реИ рддрд╛рдХрд┐ рд╣рдорд▓рд╛рд╡рд░ рдЙрдирдХрд╛ рджреБрд░реБрдкрдпреЛрдЧ рдХрд░ рд╕рдХреЗред

{% hint style="success" %}
Learn & practice AWS Hacking:<img src="../../../.gitbook/assets/image (1).png" alt="" data-size="line">[**HackTricks Training AWS Red Team Expert (ARTE)**](https://training.hacktricks.xyz/courses/arte)<img src="../../../.gitbook/assets/image (1).png" alt="" data-size="line">\
Learn & practice GCP Hacking: <img src="../../../.gitbook/assets/image (2).png" alt="" data-size="line">[**HackTricks Training GCP Red Team Expert (GRTE)**<img src="../../../.gitbook/assets/image (2).png" alt="" data-size="line">](https://training.hacktricks.xyz/courses/grte)

<details>

<summary>Support HackTricks</summary>

* Check the [**subscription plans**](https://github.com/sponsors/carlospolop)!
* **Join the** ЁЯТм [**Discord group**](https://discord.gg/hRep4RUj7f) or the [**telegram group**](https://t.me/peass) or **follow** us on **Twitter** ЁЯРж [**@hacktricks\_live**](https://twitter.com/hacktricks\_live)**.**
* **Share hacking tricks by submitting PRs to the** [**HackTricks**](https://github.com/carlospolop/hacktricks) and [**HackTricks Cloud**](https://github.com/carlospolop/hacktricks-cloud) github repos.

</details>
{% endhint %}
