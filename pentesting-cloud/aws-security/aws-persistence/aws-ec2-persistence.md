# AWS - EC2 Persistence

{% hint style="success" %}
AWS Hacking'i Ã¶ÄŸrenin ve pratik yapÄ±n:<img src="../../../.gitbook/assets/image (1).png" alt="" data-size="line">[**HackTricks Training AWS Red Team Expert (ARTE)**](https://training.hacktricks.xyz/courses/arte)<img src="../../../.gitbook/assets/image (1).png" alt="" data-size="line">\
GCP Hacking'i Ã¶ÄŸrenin ve pratik yapÄ±n: <img src="../../../.gitbook/assets/image (2).png" alt="" data-size="line">[**HackTricks Training GCP Red Team Expert (GRTE)**<img src="../../../.gitbook/assets/image (2).png" alt="" data-size="line">](https://training.hacktricks.xyz/courses/grte)

<details>

<summary>HackTricks'i Destekleyin</summary>

* [**abonelik planlarÄ±nÄ±**](https://github.com/sponsors/carlospolop) kontrol edin!
* **ğŸ’¬ [**Discord grubuna**](https://discord.gg/hRep4RUj7f) veya [**telegram grubuna**](https://t.me/peass) katÄ±lÄ±n ya da **Twitter**'da **bizi takip edin** ğŸ¦ [**@hacktricks\_live**](https://twitter.com/hacktricks\_live)**.**
* **Hacking ipuÃ§larÄ±nÄ± paylaÅŸmak iÃ§in** [**HackTricks**](https://github.com/carlospolop/hacktricks) ve [**HackTricks Cloud**](https://github.com/carlospolop/hacktricks-cloud) github reposuna PR gÃ¶nderin.

</details>
{% endhint %}

## EC2

Daha fazla bilgi iÃ§in kontrol edin:

{% content-ref url="../aws-services/aws-ec2-ebs-elb-ssm-vpc-and-vpn-enum/" %}
[aws-ec2-ebs-elb-ssm-vpc-and-vpn-enum](../aws-services/aws-ec2-ebs-elb-ssm-vpc-and-vpn-enum/)
{% endcontent-ref %}

### GÃ¼venlik Grubu BaÄŸlantÄ± Ä°zleme SÃ¼rekliliÄŸi

EÄŸer bir savunucu **EC2 Ã¶rneÄŸinin tehlikeye girdiÄŸini** fark ederse, muhtemelen makinenin **aÄŸÄ±nÄ± izole etmeye** Ã§alÄ±ÅŸacaktÄ±r. Bunu aÃ§Ä±k bir **Deny NACL** ile yapabilir (ancak NACL'ler tÃ¼m alt aÄŸa etki eder), ya da **gÃ¼venlik grubunu deÄŸiÅŸtirerek** **herhangi bir tÃ¼rde gelen veya giden** trafiÄŸe izin vermeyebilir.

EÄŸer saldÄ±rganÄ±n makineden kaynaklanan bir **ters kablosu** varsa, SG deÄŸiÅŸtirildiÄŸinde bile gelen veya giden trafiÄŸe izin vermeyen, **baÄŸlantÄ± [**GÃ¼venlik Grubu BaÄŸlantÄ± Ä°zleme**](https://docs.aws.amazon.com/AWSEC2/latest/UserGuide/security-group-connection-tracking.html)** nedeniyle kesilmeyecektir.**

### EC2 YaÅŸam DÃ¶ngÃ¼sÃ¼ YÃ¶neticisi

Bu hizmet, **AMI'lerin ve anlÄ±k gÃ¶rÃ¼ntÃ¼lerin oluÅŸturulmasÄ±nÄ±** **planlamaya** ve hatta **baÅŸka hesaplarla paylaÅŸmaya** olanak tanÄ±r.\
Bir saldÄ±rgan, **her hafta** tÃ¼m gÃ¶rÃ¼ntÃ¼lerin veya tÃ¼m hacimlerin **AMI'lerini veya anlÄ±k gÃ¶rÃ¼ntÃ¼lerini oluÅŸturmak iÃ§in** yapÄ±landÄ±rabilir ve **kendi hesabÄ±yla paylaÅŸabilir**.

### PlanlÄ± Ã–rnekler

Ã–rneklerin gÃ¼nlÃ¼k, haftalÄ±k veya hatta aylÄ±k olarak Ã§alÄ±ÅŸtÄ±rÄ±lmasÄ± mÃ¼mkÃ¼ndÃ¼r. Bir saldÄ±rgan, eriÅŸebileceÄŸi yÃ¼ksek ayrÄ±calÄ±klara sahip veya ilginÃ§ bir eriÅŸim saÄŸlayan bir makine Ã§alÄ±ÅŸtÄ±rabilir.

### Spot Filosu Talebi

Spot Ã¶rnekleri, normal Ã¶rneklerden **daha ucuzdur**. Bir saldÄ±rgan, **otomatik IP** atamasÄ± ve saldÄ±rgana **spot Ã¶rneÄŸi baÅŸladÄ±ÄŸÄ±nda** ve **IP adresi** ile birlikte **yÃ¼ksek ayrÄ±calÄ±klÄ± IAM rolÃ¼** ile **5 yÄ±l iÃ§in kÃ¼Ã§Ã¼k bir spot filosu talebi** baÅŸlatabilir.

### Arka KapÄ± Ã–rnekleri

Bir saldÄ±rgan, Ã¶rneklere eriÅŸebilir ve onlarÄ± arka kapÄ± ile donatabilir:

* Ã–rneÄŸin, geleneksel bir **rootkit** kullanarak
* Yeni bir **genel SSH anahtarÄ±** ekleyerek (bkz. [EC2 ayrÄ±calÄ±k yÃ¼kseltme seÃ§enekleri](../aws-privilege-escalation/aws-ec2-privesc.md))
* **KullanÄ±cÄ± Verisini** arka kapÄ± ile donatarak

### **Arka KapÄ± BaÅŸlatma YapÄ±landÄ±rmasÄ±**

* KullanÄ±lan AMI'yi arka kapÄ± ile donatmak
* KullanÄ±cÄ± Verisini arka kapÄ± ile donatmak
* Anahtar Ã§iftini arka kapÄ± ile donatmak

### VPN

SaldÄ±rganÄ±n VPC'ye doÄŸrudan baÄŸlanabilmesi iÃ§in bir VPN oluÅŸturun.

### VPC Peering

Kurban VPC ile saldÄ±rgan VPC arasÄ±nda bir peering baÄŸlantÄ±sÄ± oluÅŸturun, bÃ¶ylece kurban VPC'ye eriÅŸebilir. 

{% hint style="success" %}
AWS Hacking'i Ã¶ÄŸrenin ve pratik yapÄ±n:<img src="../../../.gitbook/assets/image (1).png" alt="" data-size="line">[**HackTricks Training AWS Red Team Expert (ARTE)**](https://training.hacktricks.xyz/courses/arte)<img src="../../../.gitbook/assets/image (1).png" alt="" data-size="line">\
GCP Hacking'i Ã¶ÄŸrenin ve pratik yapÄ±n: <img src="../../../.gitbook/assets/image (2).png" alt="" data-size="line">[**HackTricks Training GCP Red Team Expert (GRTE)**<img src="../../../.gitbook/assets/image (2).png" alt="" data-size="line">](https://training.hacktricks.xyz/courses/grte)

<details>

<summary>HackTricks'i Destekleyin</summary>

* [**abonelik planlarÄ±nÄ±**](https://github.com/sponsors/carlospolop) kontrol edin!
* **ğŸ’¬ [**Discord grubuna**](https://discord.gg/hRep4RUj7f) veya [**telegram grubuna**](https://t.me/peass) katÄ±lÄ±n ya da **Twitter**'da **bizi takip edin** ğŸ¦ [**@hacktricks\_live**](https://twitter.com/hacktricks\_live)**.**
* **Hacking ipuÃ§larÄ±nÄ± paylaÅŸmak iÃ§in** [**HackTricks**](https://github.com/carlospolop/hacktricks) ve [**HackTricks Cloud**](https://github.com/carlospolop/hacktricks-cloud) github reposuna PR gÃ¶nderin.

</details>
{% endhint %}
