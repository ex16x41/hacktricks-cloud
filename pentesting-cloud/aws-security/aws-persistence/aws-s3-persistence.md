# AWS - S3 Persistence

{% hint style="success" %}
AWS í•´í‚¹ ë°°ìš°ê¸° ë° ì—°ìŠµí•˜ê¸°:<img src="../../../.gitbook/assets/image (1) (1) (1).png" alt="" data-size="line">[**HackTricks Training AWS Red Team Expert (ARTE)**](https://training.hacktricks.xyz/courses/arte)<img src="../../../.gitbook/assets/image (1) (1) (1).png" alt="" data-size="line">\
GCP í•´í‚¹ ë°°ìš°ê¸° ë° ì—°ìŠµí•˜ê¸°: <img src="../../../.gitbook/assets/image (2).png" alt="" data-size="line">[**HackTricks Training GCP Red Team Expert (GRTE)**<img src="../../../.gitbook/assets/image (2).png" alt="" data-size="line">](https://training.hacktricks.xyz/courses/grte)

<details>

<summary>HackTricks ì§€ì›í•˜ê¸°</summary>

* [**êµ¬ë… ê³„íš**](https://github.com/sponsors/carlospolop) í™•ì¸í•˜ê¸°!
* **ğŸ’¬ [**Discord ê·¸ë£¹**](https://discord.gg/hRep4RUj7f) ë˜ëŠ” [**í…”ë ˆê·¸ë¨ ê·¸ë£¹**](https://t.me/peass)ì— ì°¸ì—¬í•˜ê±°ë‚˜ **Twitter** ğŸ¦ [**@hacktricks\_live**](https://twitter.com/hacktricks_live)**ë¥¼ íŒ”ë¡œìš°í•˜ì„¸ìš”.**
* **[**HackTricks**](https://github.com/carlospolop/hacktricks) ë° [**HackTricks Cloud**](https://github.com/carlospolop/hacktricks-cloud) ê¹ƒí—ˆë¸Œ ë¦¬í¬ì§€í† ë¦¬ì— PRì„ ì œì¶œí•˜ì—¬ í•´í‚¹ íŠ¸ë¦­ì„ ê³µìœ í•˜ì„¸ìš”.**

</details>
{% endhint %}

## S3

ìì„¸í•œ ì •ë³´ëŠ” ë‹¤ìŒì„ í™•ì¸í•˜ì„¸ìš”:

{% content-ref url="../aws-services/aws-s3-athena-and-glacier-enum.md" %}
[aws-s3-athena-and-glacier-enum.md](../aws-services/aws-s3-athena-and-glacier-enum.md)
{% endcontent-ref %}

### KMS í´ë¼ì´ì–¸íŠ¸ ì¸¡ ì•”í˜¸í™”

ì•”í˜¸í™” í”„ë¡œì„¸ìŠ¤ê°€ ì™„ë£Œë˜ë©´ ì‚¬ìš©ìëŠ” KMS APIë¥¼ ì‚¬ìš©í•˜ì—¬ ìƒˆ í‚¤(`aws kms generate-data-key`)ë¥¼ ìƒì„±í•˜ê³  **ìƒì„±ëœ ì•”í˜¸í™”ëœ í‚¤ë¥¼ íŒŒì¼ì˜ ë©”íƒ€ë°ì´í„°ì— ì €ì¥í•©ë‹ˆë‹¤** ([python ì½”ë“œ ì˜ˆì œ](https://aioboto3.readthedocs.io/en/latest/cse.html#how-it-works-kms-managed-keys)) ê·¸ë˜ì„œ ë³µí˜¸í™”ê°€ ë°œìƒí•  ë•Œ KMSë¥¼ ì‚¬ìš©í•˜ì—¬ ë‹¤ì‹œ ë³µí˜¸í™”í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤:

<figure><img src="../../../.gitbook/assets/image (226).png" alt=""><figcaption></figcaption></figure>

ë”°ë¼ì„œ ê³µê²©ìëŠ” ë©”íƒ€ë°ì´í„°ì—ì„œ ì´ í‚¤ë¥¼ ê°€ì ¸ì™€ KMS(`aws kms decrypt`)ë¡œ ë³µí˜¸í™”í•˜ì—¬ ì •ë³´ë¥¼ ì•”í˜¸í™”í•˜ëŠ” ë° ì‚¬ìš©ëœ í‚¤ë¥¼ ì–»ì„ ìˆ˜ ìˆìŠµë‹ˆë‹¤. ì´ë ‡ê²Œ í•˜ë©´ ê³µê²©ìëŠ” ì•”í˜¸í™” í‚¤ë¥¼ ê°€ì§€ê²Œ ë˜ê³ , ê·¸ í‚¤ê°€ ë‹¤ë¥¸ íŒŒì¼ì„ ì•”í˜¸í™”í•˜ëŠ” ë° ì¬ì‚¬ìš©ëœë‹¤ë©´ ì´ë¥¼ ì‚¬ìš©í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.

### S3 ACL ì‚¬ìš©í•˜ê¸°

ì¼ë°˜ì ìœ¼ë¡œ ë²„í‚·ì˜ ACLì€ ë¹„í™œì„±í™”ë˜ì–´ ìˆì§€ë§Œ, ì¶©ë¶„í•œ ê¶Œí•œì„ ê°€ì§„ ê³µê²©ìëŠ” ì´ë¥¼ ë‚¨ìš©í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤(í™œì„±í™”ëœ ê²½ìš° ë˜ëŠ” ê³µê²©ìê°€ ì´ë¥¼ í™œì„±í™”í•  ìˆ˜ ìˆëŠ” ê²½ìš°) S3 ë²„í‚·ì— ëŒ€í•œ ì ‘ê·¼ì„ ìœ ì§€í•˜ê¸° ìœ„í•´.

{% hint style="success" %}
AWS í•´í‚¹ ë°°ìš°ê¸° ë° ì—°ìŠµí•˜ê¸°:<img src="../../../.gitbook/assets/image (1) (1) (1).png" alt="" data-size="line">[**HackTricks Training AWS Red Team Expert (ARTE)**](https://training.hacktricks.xyz/courses/arte)<img src="../../../.gitbook/assets/image (1) (1) (1).png" alt="" data-size="line">\
GCP í•´í‚¹ ë°°ìš°ê¸° ë° ì—°ìŠµí•˜ê¸°: <img src="../../../.gitbook/assets/image (2).png" alt="" data-size="line">[**HackTricks Training GCP Red Team Expert (GRTE)**<img src="../../../.gitbook/assets/image (2).png" alt="" data-size="line">](https://training.hacktricks.xyz/courses/grte)

<details>

<summary>HackTricks ì§€ì›í•˜ê¸°</summary>

* [**êµ¬ë… ê³„íš**](https://github.com/sponsors/carlospolop) í™•ì¸í•˜ê¸°!
* **ğŸ’¬ [**Discord ê·¸ë£¹**](https://discord.gg/hRep4RUj7f) ë˜ëŠ” [**í…”ë ˆê·¸ë¨ ê·¸ë£¹**](https://t.me/peass)ì— ì°¸ì—¬í•˜ê±°ë‚˜ **Twitter** ğŸ¦ [**@hacktricks\_live**](https://twitter.com/hacktricks_live)**ë¥¼ íŒ”ë¡œìš°í•˜ì„¸ìš”.**
* **[**HackTricks**](https://github.com/carlospolop/hacktricks) ë° [**HackTricks Cloud**](https://github.com/carlospolop/hacktricks-cloud) ê¹ƒí—ˆë¸Œ ë¦¬í¬ì§€í† ë¦¬ì— PRì„ ì œì¶œí•˜ì—¬ í•´í‚¹ íŠ¸ë¦­ì„ ê³µìœ í•˜ì„¸ìš”.**

</details>
{% endhint %}
