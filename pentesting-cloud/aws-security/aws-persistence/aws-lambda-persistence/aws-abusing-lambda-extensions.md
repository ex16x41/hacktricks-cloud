# AWS - Lambda UzantÄ±larÄ±nÄ± KÃ¶tÃ¼ye Kullanma

{% hint style="success" %}
AWS Hacking'i Ã¶ÄŸrenin ve pratik yapÄ±n:<img src="../../../../.gitbook/assets/image (1).png" alt="" data-size="line">[**HackTricks EÄŸitim AWS KÄ±rmÄ±zÄ± TakÄ±m UzmanÄ± (ARTE)**](https://training.hacktricks.xyz/courses/arte)<img src="../../../../.gitbook/assets/image (1).png" alt="" data-size="line">\
GCP Hacking'i Ã¶ÄŸrenin ve pratik yapÄ±n: <img src="../../../../.gitbook/assets/image (2).png" alt="" data-size="line">[**HackTricks EÄŸitim GCP KÄ±rmÄ±zÄ± TakÄ±m UzmanÄ± (GRTE)**<img src="../../../../.gitbook/assets/image (2).png" alt="" data-size="line">](https://training.hacktricks.xyz/courses/grte)

<details>

<summary>HackTricks'i Destekleyin</summary>

* [**abonelik planlarÄ±nÄ±**](https://github.com/sponsors/carlospolop) kontrol edin!
* **ğŸ’¬ [**Discord grubuna**](https://discord.gg/hRep4RUj7f) veya [**telegram grubuna**](https://t.me/peass) katÄ±lÄ±n ya da **Twitter**'da **bizi takip edin** ğŸ¦ [**@hacktricks\_live**](https://twitter.com/hacktricks\_live)**.**
* **Hacking ipuÃ§larÄ±nÄ± paylaÅŸmak iÃ§in** [**HackTricks**](https://github.com/carlospolop/hacktricks) ve [**HackTricks Cloud**](https://github.com/carlospolop/hacktricks-cloud) github reposuna PR gÃ¶nderin.

</details>
{% endhint %}

## Lambda UzantÄ±larÄ±

Lambda uzantÄ±larÄ±, Ã§eÅŸitli **izleme, gÃ¶zlemlenebilirlik, gÃ¼venlik ve yÃ¶netiÅŸim araÃ§larÄ±** ile entegre olarak iÅŸlevleri geliÅŸtirir. Bu uzantÄ±lar, [.zip arÅŸivleri kullanarak Lambda katmanlarÄ±](https://docs.aws.amazon.com/lambda/latest/dg/configuration-layers.html) aracÄ±lÄ±ÄŸÄ±yla eklenir veya [konteyner gÃ¶rÃ¼ntÃ¼sÃ¼ daÄŸÄ±tÄ±mlarÄ±nda](https://aws.amazon.com/blogs/compute/working-with-lambda-layers-and-extensions-in-container-images/) yer alÄ±r ve iki modda Ã§alÄ±ÅŸÄ±r: **iÃ§** ve **dÄ±ÅŸ**.

* **Ä°Ã§ uzantÄ±lar**, Ã§alÄ±ÅŸma zamanÄ± sÃ¼reci ile birleÅŸir, **dil spesifik ortam deÄŸiÅŸkenleri** ve **sarmalayÄ±cÄ± betikler** kullanarak baÅŸlangÄ±cÄ±nÄ± manipÃ¼le eder. Bu Ã¶zelleÅŸtirme, **Java Correto 8 ve 11, Node.js 10 ve 12, ve .NET Core 3.1** dahil olmak Ã¼zere Ã§eÅŸitli Ã§alÄ±ÅŸma zamanlarÄ±na uygulanÄ±r.
* **DÄ±ÅŸ uzantÄ±lar**, ayrÄ± sÃ¼reÃ§ler olarak Ã§alÄ±ÅŸÄ±r ve Lambda iÅŸlevinin yaÅŸam dÃ¶ngÃ¼sÃ¼ ile operasyon uyumunu korur. **Node.js 10 ve 12, Python 3.7 ve 3.8, Ruby 2.5 ve 2.7, Java Corretto 8 ve 11, .NET Core 3.1** ve **Ã¶zel Ã§alÄ±ÅŸma zamanlarÄ±** gibi Ã§eÅŸitli Ã§alÄ±ÅŸma zamanlarÄ±yla uyumludur.

[**Lambda uzantÄ±larÄ±nÄ±n nasÄ±l Ã§alÄ±ÅŸtÄ±ÄŸÄ± hakkÄ±nda daha fazla bilgi iÃ§in belgeleri kontrol edin**](https://docs.aws.amazon.com/lambda/latest/dg/runtimes-extensions-api.html).

### SÃ¼reklilik, Ä°stekleri Ã‡alma ve Ä°stekleri DeÄŸiÅŸtirme iÃ§in DÄ±ÅŸ UzantÄ±

Bu, bu yazÄ±da Ã¶nerilen tekniÄŸin bir Ã¶zetidir: [https://www.clearvector.com/blog/lambda-spy/](https://www.clearvector.com/blog/lambda-spy/)

Lambda Ã§alÄ±ÅŸma zamanÄ± ortamÄ±ndaki varsayÄ±lan Linux Ã§ekirdeÄŸinin â€œ**process\_vm\_readv**â€ ve â€œ**process\_vm\_writev**â€ sistem Ã§aÄŸrÄ±larÄ± ile derlendiÄŸi bulunmuÅŸtur. Ve tÃ¼m sÃ¼reÃ§ler aynÄ± kullanÄ±cÄ± kimliÄŸi ile Ã§alÄ±ÅŸÄ±r, dÄ±ÅŸ uzantÄ± iÃ§in oluÅŸturulan yeni sÃ¼reÃ§ bile. **Bu, dÄ±ÅŸ bir uzantÄ±nÄ±n tasarÄ±m gereÄŸi Rapidâ€™in yÄ±ÄŸÄ±n belleÄŸine tam okuma ve yazma eriÅŸimine sahip olduÄŸu anlamÄ±na gelir.**

AyrÄ±ca, Lambda uzantÄ±larÄ± **Ã§aÄŸrÄ± olaylarÄ±na abone olma** yeteneÄŸine sahip olsa da, AWS bu uzantÄ±lara ham verileri aÃ§Ä±klamaz. Bu, **uzantÄ±larÄ±n HTTP isteÄŸi aracÄ±lÄ±ÄŸÄ±yla iletilen hassas bilgilere eriÅŸemeyeceÄŸini** garanti eder.

Init (Rapid) sÃ¼reci, Lambda uzantÄ±larÄ± baÅŸlatÄ±ldÄ±ÄŸÄ±nda ve herhangi bir Ã§alÄ±ÅŸma zamanÄ± kodu yÃ¼rÃ¼tÃ¼lmeden Ã¶nce, ancak Rapid'ten sonra, tÃ¼m API isteklerini [http://127.0.0.1:9001](http://127.0.0.1:9001/) adresinde izler.

<figure><img src="../../../../.gitbook/assets/image (254).png" alt=""><figcaption><p><a href="https://www.clearvector.com/blog/content/images/size/w1000/2022/11/2022110801.rapid.default.png">https://www.clearvector.com/blog/content/images/size/w1000/2022/11/2022110801.rapid.default.png</a></p></figcaption></figure>

**`AWS_LAMBDA_RUNTIME_API`** deÄŸiÅŸkeni, **Ã§ocuk Ã§alÄ±ÅŸma zamanÄ± sÃ¼reÃ§lerine** ve ek uzantÄ±lara Rapid API'nin **IP** adresini ve **port** numarasÄ±nÄ± gÃ¶sterir.

{% hint style="warning" %}
**`AWS_LAMBDA_RUNTIME_API`** ortam deÄŸiÅŸkenini eriÅŸim saÄŸladÄ±ÄŸÄ±mÄ±z bir **`port`** ile deÄŸiÅŸtirerek, Lambda Ã§alÄ±ÅŸma zamanÄ± iÃ§indeki tÃ¼m eylemleri kesmek mÃ¼mkÃ¼ndÃ¼r (**man-in-the-middle**). Bu, uzantÄ±nÄ±n Rapid Init ile aynÄ± ayrÄ±calÄ±klara sahip olmasÄ± ve sistemin Ã§ekirdeÄŸinin **iÅŸlem belleÄŸini deÄŸiÅŸtirmeye** izin vermesi nedeniyle mÃ¼mkÃ¼ndÃ¼r; bu da port numarasÄ±nÄ±n deÄŸiÅŸtirilmesini saÄŸlar.
{% endhint %}

**UzantÄ±lar herhangi bir Ã§alÄ±ÅŸma zamanÄ± kodundan Ã¶nce Ã§alÄ±ÅŸtÄ±ÄŸÄ± iÃ§in**, ortam deÄŸiÅŸkenini deÄŸiÅŸtirmek, Ã§alÄ±ÅŸma zamanÄ± sÃ¼reci (Ã¶rneÄŸin, Python, Java, Node, Ruby) baÅŸlarken etkileyecektir. AyrÄ±ca, bu deÄŸiÅŸkene baÄŸlÄ± olarak **bizimkinden sonra yÃ¼klenen uzantÄ±lar** da uzantÄ±mÄ±z Ã¼zerinden yÃ¶nlendirilecektir. Bu yapÄ±, kÃ¶tÃ¼ amaÃ§lÄ± yazÄ±lÄ±mlarÄ±n gÃ¼venlik Ã¶nlemlerini veya gÃ¼nlÃ¼k uzantÄ±larÄ±nÄ± tamamen atlamasÄ±na olanak tanÄ±yabilir.

<figure><img src="../../../../.gitbook/assets/image (267).png" alt=""><figcaption><p><a href="https://www.clearvector.com/blog/content/images/size/w1000/2022/11/2022110801.rapid.mitm.png">https://www.clearvector.com/blog/content/images/size/w1000/2022/11/2022110801.rapid.mitm.png</a></p></figcaption></figure>

[**lambda-spy**](https://github.com/clearvector/lambda-spy) aracÄ±, bu **bellek yazma** iÅŸlemini gerÃ§ekleÅŸtirmek ve lambda isteklerinden hassas bilgileri **Ã§alÄ±p** **deÄŸiÅŸtirmek** iÃ§in oluÅŸturulmuÅŸtur.

## Referanslar

* [https://aws.amazon.com/blogs/compute/building-extensions-for-aws-lambda-in-preview/](https://aws.amazon.com/blogs/compute/building-extensions-for-aws-lambda-in-preview/)
* [https://www.clearvector.com/blog/lambda-spy/](https://www.clearvector.com/blog/lambda-spy/)

{% hint style="success" %}
AWS Hacking'i Ã¶ÄŸrenin ve pratik yapÄ±n:<img src="../../../../.gitbook/assets/image (1).png" alt="" data-size="line">[**HackTricks EÄŸitim AWS KÄ±rmÄ±zÄ± TakÄ±m UzmanÄ± (ARTE)**](https://training.hacktricks.xyz/courses/arte)<img src="../../../../.gitbook/assets/image (1).png" alt="" data-size="line">\
GCP Hacking'i Ã¶ÄŸrenin ve pratik yapÄ±n: <img src="../../../../.gitbook/assets/image (2).png" alt="" data-size="line">[**HackTricks EÄŸitim GCP KÄ±rmÄ±zÄ± TakÄ±m UzmanÄ± (GRTE)**<img src="../../../../.gitbook/assets/image (2).png" alt="" data-size="line">](https://training.hacktricks.xyz/courses/grte)

<details>

<summary>HackTricks'i Destekleyin</summary>

* [**abonelik planlarÄ±nÄ±**](https://github.com/sponsors/carlospolop) kontrol edin!
* **ğŸ’¬ [**Discord grubuna**](https://discord.gg/hRep4RUj7f) veya [**telegram grubuna**](https://t.me/peass) katÄ±lÄ±n ya da **Twitter**'da **bizi takip edin** ğŸ¦ [**@hacktricks\_live**](https://twitter.com/hacktricks\_live)**.**
* **Hacking ipuÃ§larÄ±nÄ± paylaÅŸmak iÃ§in** [**HackTricks**](https://github.com/carlospolop/hacktricks) ve [**HackTricks Cloud**](https://github.com/carlospolop/hacktricks-cloud) github reposuna PR gÃ¶nderin.

</details>
{% endhint %}
