# AWS - CloudFront Enum

{% hint style="success" %}
Lernen & √ºben Sie AWS Hacking:<img src="../../../.gitbook/assets/image (1) (1).png" alt="" data-size="line">[**HackTricks Training AWS Red Team Expert (ARTE)**](https://training.hacktricks.xyz/courses/arte)<img src="../../../.gitbook/assets/image (1) (1).png" alt="" data-size="line">\
Lernen & √ºben Sie GCP Hacking: <img src="../../../.gitbook/assets/image (2).png" alt="" data-size="line">[**HackTricks Training GCP Red Team Expert (GRTE)**<img src="../../../.gitbook/assets/image (2).png" alt="" data-size="line">](https://training.hacktricks.xyz/courses/grte)

<details>

<summary>Unterst√ºtzen Sie HackTricks</summary>

* √úberpr√ºfen Sie die [**Abonnementpl√§ne**](https://github.com/sponsors/carlospolop)!
* **Treten Sie der** üí¨ [**Discord-Gruppe**](https://discord.gg/hRep4RUj7f) oder der [**Telegram-Gruppe**](https://t.me/peass) bei oder **folgen** Sie uns auf **Twitter** üê¶ [**@hacktricks\_live**](https://twitter.com/hacktricks\_live)**.**
* **Teilen Sie Hacking-Tricks, indem Sie PRs an die** [**HackTricks**](https://github.com/carlospolop/hacktricks) und [**HackTricks Cloud**](https://github.com/carlospolop/hacktricks-cloud) GitHub-Repos senden.

</details>
{% endhint %}

## CloudFront

CloudFront ist AWS's **Content Delivery Network, das die Verteilung** Ihrer statischen und dynamischen Inhalte √ºber sein weltweites Netzwerk von Edge-Standorten beschleunigt. Wenn Sie eine Anfrage f√ºr Inhalte stellen, die Sie √ºber Amazon CloudFront hosten, wird die Anfrage an den n√§chstgelegenen Edge-Standort weitergeleitet, der die niedrigste Latenz bietet, um die beste Leistung zu liefern. Wenn **CloudFront-Zugriffsprotokolle** aktiviert sind, k√∂nnen Sie die Anfragen von jedem Benutzer aufzeichnen, der Zugriff auf Ihre Website und Verteilung anfordert. Wie bei S3-Zugriffsprotokollen werden diese Protokolle ebenfalls **auf Amazon S3 f√ºr dauerhafte und persistente Speicherung** gespeichert. Es fallen keine Geb√ºhren f√ºr die Aktivierung des Protokollierens selbst an, jedoch werden Ihnen die Kosten f√ºr den von S3 genutzten Speicher in Rechnung gestellt.

Die Protokolldateien erfassen Daten √ºber einen bestimmten Zeitraum, und die Anzahl der Protokolldateien, die generiert werden, h√§ngt von der Anzahl der Anfragen ab, die Amazon CloudFront f√ºr diese Verteilung erh√§lt. Es ist wichtig zu wissen, dass diese Protokolldateien nicht auf S3 erstellt oder geschrieben werden. S3 ist einfach der Ort, an den sie geliefert werden, sobald die Protokolldatei voll ist. **Amazon CloudFront beh√§lt diese Protokolle, bis sie bereit sind, an S3 geliefert zu werden**. Je nach Gr√∂√üe dieser Protokolldateien kann diese Lieferung **zwischen ein und 24 Stunden** dauern.

**Standardm√§√üig ist das Cookie-Protokollieren deaktiviert**, aber Sie k√∂nnen es aktivieren.

### Funktionen

Sie k√∂nnen Funktionen in CloudFront erstellen. Diese Funktionen haben ihren **Endpunkt in CloudFront** definiert und f√ºhren einen deklarierten **NodeJS-Code** aus. Dieser Code wird in einer **Sandbox** auf einer unter AWS verwalteten Maschine ausgef√ºhrt (Sie ben√∂tigen einen Sandbox-Umgehung, um auf das zugrunde liegende Betriebssystem zu entkommen).

Da die Funktionen nicht im AWS-Konto der Benutzer ausgef√ºhrt werden, ist keine IAM-Rolle angeh√§ngt, sodass kein direkter Privilegienausstieg durch den Missbrauch dieser Funktion m√∂glich ist.

### Enumeration
```bash
aws cloudfront list-distributions
aws cloudfront get-distribution --id <id> # Just get 1
aws cloudfront get-distribution-config --id <id>

aws cloudfront list-functions
aws cloudfront get-function --name TestFunction function_code.js

aws cloudfront list-distributions | jq ".DistributionList.Items[] | .Id, .Origins.Items[].Id, .Origins.Items[].DomainName, .AliasICPRecordals[].CNAME"
```
## Unauthenticated Access

{% content-ref url="../aws-unauthenticated-enum-access/aws-cloudfront-unauthenticated-enum.md" %}
[aws-cloudfront-unauthenticated-enum.md](../aws-unauthenticated-enum-access/aws-cloudfront-unauthenticated-enum.md)
{% endcontent-ref %}

## Post Exploitation

{% content-ref url="../aws-post-exploitation/aws-cloudfront-post-exploitation.md" %}
[aws-cloudfront-post-exploitation.md](../aws-post-exploitation/aws-cloudfront-post-exploitation.md)
{% endcontent-ref %}

{% hint style="success" %}
Lernen & √ºben Sie AWS Hacking:<img src="../../../.gitbook/assets/image (1) (1).png" alt="" data-size="line">[**HackTricks Training AWS Red Team Expert (ARTE)**](https://training.hacktricks.xyz/courses/arte)<img src="../../../.gitbook/assets/image (1) (1).png" alt="" data-size="line">\
Lernen & √ºben Sie GCP Hacking: <img src="../../../.gitbook/assets/image (2).png" alt="" data-size="line">[**HackTricks Training GCP Red Team Expert (GRTE)**<img src="../../../.gitbook/assets/image (2).png" alt="" data-size="line">](https://training.hacktricks.xyz/courses/grte)

<details>

<summary>Support HackTricks</summary>

* √úberpr√ºfen Sie die [**Abonnementpl√§ne**](https://github.com/sponsors/carlospolop)!
* **Treten Sie der** üí¨ [**Discord-Gruppe**](https://discord.gg/hRep4RUj7f) oder der [**Telegram-Gruppe**](https://t.me/peass) bei oder **folgen** Sie uns auf **Twitter** üê¶ [**@hacktricks\_live**](https://twitter.com/hacktricks\_live)**.**
* **Teilen Sie Hacking-Tricks, indem Sie PRs an die** [**HackTricks**](https://github.com/carlospolop/hacktricks) und [**HackTricks Cloud**](https://github.com/carlospolop/hacktricks-cloud) GitHub-Repos senden.

</details>
{% endhint %}
