# AWS - CloudFront Enum

{% hint style="success" %}
Learn & practice AWS Hacking:<img src="../../../.gitbook/assets/image (1) (1) (1).png" alt="" data-size="line">[**HackTricks Training AWS Red Team Expert (ARTE)**](https://training.hacktricks.xyz/courses/arte)<img src="../../../.gitbook/assets/image (1) (1) (1).png" alt="" data-size="line">\
Learn & practice GCP Hacking: <img src="../../../.gitbook/assets/image (2).png" alt="" data-size="line">[**HackTricks Training GCP Red Team Expert (GRTE)**<img src="../../../.gitbook/assets/image (2).png" alt="" data-size="line">](https://training.hacktricks.xyz/courses/grte)

<details>

<summary>Support HackTricks</summary>

* Check the [**subscription plans**](https://github.com/sponsors/carlospolop)!
* **Join the** 💬 [**Discord group**](https://discord.gg/hRep4RUj7f) or the [**telegram group**](https://t.me/peass) or **follow** us on **Twitter** 🐦 [**@hacktricks\_live**](https://twitter.com/hacktricks_live)**.**
* **Share hacking tricks by submitting PRs to the** [**HackTricks**](https://github.com/carlospolop/hacktricks) and [**HackTricks Cloud**](https://github.com/carlospolop/hacktricks-cloud) github repos.

</details>
{% endhint %}

## CloudFront

Το CloudFront είναι το **δίκτυο παράδοσης περιεχομένου της AWS που επιταχύνει τη διανομή** του στατικού και δυναμικού περιεχομένου σας μέσω του παγκόσμιου δικτύου των edge τοποθεσιών του. Όταν χρησιμοποιείτε ένα αίτημα περιεχομένου που φιλοξενείτε μέσω του Amazon CloudFront, το αίτημα δρομολογείται στην πλησιέστερη edge τοποθεσία που παρέχει τη χαμηλότερη καθυστέρηση για να παραδώσει την καλύτερη απόδοση. Όταν **οι καταγραφές πρόσβασης του CloudFront** είναι ενεργοποιημένες, μπορείτε να καταγράφετε το αίτημα από κάθε χρήστη που ζητά πρόσβαση στον ιστότοπό σας και τη διανομή. Όπως και με τις καταγραφές πρόσβασης S3, αυτές οι καταγραφές είναι επίσης **αποθηκευμένες στο Amazon S3 για ανθεκτική και μόνιμη αποθήκευση**. Δεν υπάρχουν χρεώσεις για την ενεργοποίηση της καταγραφής, ωστόσο, καθώς οι καταγραφές αποθηκεύονται στο S3, θα χρεωθείτε για την αποθήκευση που χρησιμοποιείται από το S3.

Τα αρχεία καταγραφής καταγράφουν δεδομένα σε μια χρονική περίοδο και ανάλογα με τον αριθμό των αιτημάτων που λαμβάνει το Amazon CloudFront για αυτή τη διανομή, θα εξαρτηθεί ο αριθμός των αρχείων καταγραφής που παράγονται. Είναι σημαντικό να γνωρίζετε ότι αυτά τα αρχεία καταγραφής δεν δημιουργούνται ή γράφονται στο S3. Το S3 είναι απλώς ο τόπος όπου παραδίδονται μόλις το αρχείο καταγραφής είναι γεμάτο. **Το Amazon CloudFront διατηρεί αυτές τις καταγραφές μέχρι να είναι έτοιμες να παραδοθούν στο S3**. Και πάλι, ανάλογα με το μέγεθος αυτών των αρχείων καταγραφής, αυτή η παράδοση μπορεί να διαρκέσει **από μία έως 24 ώρες**.

**Από προεπιλογή, η καταγραφή cookie είναι απενεργοποιημένη** αλλά μπορείτε να την ενεργοποιήσετε.

### Functions

Μπορείτε να δημιουργήσετε συναρτήσεις στο CloudFront. Αυτές οι συναρτήσεις θα έχουν το **endpoint στο cloudfront** καθορισμένο και θα εκτελούν έναν δηλωμένο **κώδικα NodeJS**. Αυτός ο κώδικας θα εκτελείται μέσα σε ένα **sandbox** σε μια μηχανή που λειτουργεί υπό τη διαχείριση της AWS (θα χρειαστείτε μια παράκαμψη sandbox για να καταφέρετε να ξεφύγετε στο υποκείμενο λειτουργικό σύστημα).

Δεδομένου ότι οι συναρτήσεις δεν εκτελούνται στον λογαριασμό AWS των χρηστών, δεν έχει συσχετιστεί κανένας ρόλος IAM, επομένως δεν είναι δυνατή η άμεση εκμετάλλευση αυτής της δυνατότητας.

### Enumeration
```bash
aws cloudfront list-distributions
aws cloudfront get-distribution --id <id> # Just get 1
aws cloudfront get-distribution-config --id <id>

aws cloudfront list-functions
aws cloudfront get-function --name TestFunction function_code.js

aws cloudfront list-distributions | jq ".DistributionList.Items[] | .Id, .Origins.Items[].Id, .Origins.Items[].DomainName, .AliasICPRecordals[].CNAME"
```
## Μη Αυθεντική Πρόσβαση

{% content-ref url="../aws-unauthenticated-enum-access/aws-cloudfront-unauthenticated-enum.md" %}
[aws-cloudfront-unauthenticated-enum.md](../aws-unauthenticated-enum-access/aws-cloudfront-unauthenticated-enum.md)
{% endcontent-ref %}

## Μετά την Εκμετάλλευση

{% content-ref url="../aws-post-exploitation/aws-cloudfront-post-exploitation.md" %}
[aws-cloudfront-post-exploitation.md](../aws-post-exploitation/aws-cloudfront-post-exploitation.md)
{% endcontent-ref %}

{% hint style="success" %}
Μάθετε & εξασκηθείτε στο AWS Hacking:<img src="../../../.gitbook/assets/image (1) (1) (1).png" alt="" data-size="line">[**HackTricks Training AWS Red Team Expert (ARTE)**](https://training.hacktricks.xyz/courses/arte)<img src="../../../.gitbook/assets/image (1) (1) (1).png" alt="" data-size="line">\
Μάθετε & εξασκηθείτε στο GCP Hacking: <img src="../../../.gitbook/assets/image (2).png" alt="" data-size="line">[**HackTricks Training GCP Red Team Expert (GRTE)**<img src="../../../.gitbook/assets/image (2).png" alt="" data-size="line">](https://training.hacktricks.xyz/courses/grte)

<details>

<summary>Υποστήριξη HackTricks</summary>

* Ελέγξτε τα [**σχέδια συνδρομής**](https://github.com/sponsors/carlospolop)!
* **Εγγραφείτε στην** 💬 [**ομάδα Discord**](https://discord.gg/hRep4RUj7f) ή στην [**ομάδα telegram**](https://t.me/peass) ή **ακολουθήστε** μας στο **Twitter** 🐦 [**@hacktricks\_live**](https://twitter.com/hacktricks_live)**.**
* **Μοιραστείτε κόλπα hacking υποβάλλοντας PRs στα** [**HackTricks**](https://github.com/carlospolop/hacktricks) και [**HackTricks Cloud**](https://github.com/carlospolop/hacktricks-cloud) github repos.

</details>
{% endhint %}
