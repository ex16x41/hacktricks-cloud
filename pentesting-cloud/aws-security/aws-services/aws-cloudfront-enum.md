# AWS - CloudFront Enum

{% hint style="success" %}
Learn & practice AWS Hacking:<img src="../../../.gitbook/assets/image (1) (1).png" alt="" data-size="line">[**HackTricks Training AWS Red Team Expert (ARTE)**](https://training.hacktricks.xyz/courses/arte)<img src="../../../.gitbook/assets/image (1) (1).png" alt="" data-size="line">\
Learn & practice GCP Hacking: <img src="../../../.gitbook/assets/image (2).png" alt="" data-size="line">[**HackTricks Training GCP Red Team Expert (GRTE)**<img src="../../../.gitbook/assets/image (2).png" alt="" data-size="line">](https://training.hacktricks.xyz/courses/grte)

<details>

<summary>Support HackTricks</summary>

* Check the [**subscription plans**](https://github.com/sponsors/carlospolop)!
* **Join the** 游눫 [**Discord group**](https://discord.gg/hRep4RUj7f) or the [**telegram group**](https://t.me/peass) or **follow** us on **Twitter** 游냕 [**@hacktricks\_live**](https://twitter.com/hacktricks\_live)**.**
* **Share hacking tricks by submitting PRs to the** [**HackTricks**](https://github.com/carlospolop/hacktricks) and [**HackTricks Cloud**](https://github.com/carlospolop/hacktricks-cloud) github repos.

</details>
{% endhint %}

## CloudFront

CloudFront je AWS-ova **mre쬬 za isporuku sadr쬬ja koja ubrzava distribuciju** va코eg stati캜kog i dinami캜kog sadr쬬ja kroz svoju svetsku mre쬿 ivica. Kada koristite zahtev za sadr쬬jem koji hostujete putem Amazon CloudFront-a, zahtev se usmerava na najbli쬿 ivicu koja pru쬬 najni쬿 latenciju za najbolju performansu. Kada su **CloudFront pristupni logovi** omogu캖eni, mo쬰te zabele쬴ti zahtev svakog korisnika koji tra쬴 pristup va코em veb sajtu i distribuciji. Kao i kod S3 pristupnih logova, ovi logovi su tako캠e **sme코teni na Amazon S3 za trajno i postojano skladi코tenje**. Nema tro코kova za omogu캖avanje logovanja, me캠utim, po코to su logovi sme코teni u S3, bi캖ete napla캖eni za skladi코tenje koje koristi S3.

Log fajlovi bele쬰 podatke tokom odre캠enog vremenskog perioda i zavisno od broja zahteva koje Amazon CloudFront primi za tu distribuciju, zavisi캖e i koli캜ina generisanih log fajlova. Va쬹o je znati da se ovi log fajlovi ne kreiraju ili ne pi코u na S3. S3 je jednostavno mesto gde se isporu캜uju kada je log fajl pun. **Amazon CloudFront zadr쬬va ove logove dok nisu spremni za isporuku na S3**. Ponovo, u zavisnosti od veli캜ine ovih log fajlova, ova isporuka mo쬰 trajati **izme캠u jednog i 24 sata**.

**Podrazumevano je logovanje kola캜i캖a onemogu캖eno** ali ga mo쬰te omogu캖iti.

### Functions

Mo쬰te kreirati funkcije u CloudFront-u. Ove funkcije 캖e imati svoj **endpoint u cloudfront-u** definisan i izvr코i캖e deklarisani **NodeJS kod**. Ovaj kod 캖e se izvr코avati unutar **sandbox-a** na ma코ini koja radi pod AWS upravljanom ma코inom (bi캖e vam potreban zaobila쬰nje sandbox-a da biste uspeli da pobegnete na osnovni OS).

Po코to se funkcije ne izvr코avaju u korisnikovom AWS nalogu, nijedna IAM uloga nije povezana, tako da nije mogu캖e direktno pove캖ati privilegije zloupotrebom ove funkcije.

### Enumeration
```bash
aws cloudfront list-distributions
aws cloudfront get-distribution --id <id> # Just get 1
aws cloudfront get-distribution-config --id <id>

aws cloudfront list-functions
aws cloudfront get-function --name TestFunction function_code.js

aws cloudfront list-distributions | jq ".DistributionList.Items[] | .Id, .Origins.Items[].Id, .Origins.Items[].DomainName, .AliasICPRecordals[].CNAME"
```
## Neautentifikovani pristup

{% content-ref url="../aws-unauthenticated-enum-access/aws-cloudfront-unauthenticated-enum.md" %}
[aws-cloudfront-unauthenticated-enum.md](../aws-unauthenticated-enum-access/aws-cloudfront-unauthenticated-enum.md)
{% endcontent-ref %}

## Post eksploatacija

{% content-ref url="../aws-post-exploitation/aws-cloudfront-post-exploitation.md" %}
[aws-cloudfront-post-exploitation.md](../aws-post-exploitation/aws-cloudfront-post-exploitation.md)
{% endcontent-ref %}

{% hint style="success" %}
U캜ite i ve쬭ajte AWS Hacking:<img src="../../../.gitbook/assets/image (1) (1).png" alt="" data-size="line">[**HackTricks Training AWS Red Team Expert (ARTE)**](https://training.hacktricks.xyz/courses/arte)<img src="../../../.gitbook/assets/image (1) (1).png" alt="" data-size="line">\
U캜ite i ve쬭ajte GCP Hacking: <img src="../../../.gitbook/assets/image (2).png" alt="" data-size="line">[**HackTricks Training GCP Red Team Expert (GRTE)**<img src="../../../.gitbook/assets/image (2).png" alt="" data-size="line">](https://training.hacktricks.xyz/courses/grte)

<details>

<summary>Podr쬴te HackTricks</summary>

* Proverite [**planove pretplate**](https://github.com/sponsors/carlospolop)!
* **Pridru쬴te se** 游눫 [**Discord grupi**](https://discord.gg/hRep4RUj7f) ili [**telegram grupi**](https://t.me/peass) ili **pratite** nas na **Twitteru** 游냕 [**@hacktricks\_live**](https://twitter.com/hacktricks\_live)**.**
* **Podelite hakerske trikove slanjem PR-ova na** [**HackTricks**](https://github.com/carlospolop/hacktricks) i [**HackTricks Cloud**](https://github.com/carlospolop/hacktricks-cloud) github repozitorijume.

</details>
{% endhint %}
