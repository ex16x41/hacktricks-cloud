# AWS - CloudFront Enum

{% hint style="success" %}
Dowiedz siÄ™ i Ä‡wicz Hacking AWS: <img src="/.gitbook/assets/image.png" alt="" data-size="line">[**HackTricks Training AWS Red Team Expert (ARTE)**](https://training.hacktricks.xyz/courses/arte)<img src="/.gitbook/assets/image.png" alt="" data-size="line">\
Dowiedz siÄ™ i Ä‡wicz Hacking GCP: <img src="/.gitbook/assets/image (2).png" alt="" data-size="line">[**HackTricks Training GCP Red Team Expert (GRTE)**<img src="/.gitbook/assets/image (2).png" alt="" data-size="line">](https://training.hacktricks.xyz/courses/grte)

<details>

<summary>Wesprzyj HackTricks</summary>

* SprawdÅº [**plany subskrypcyjne**](https://github.com/sponsors/carlospolop)!
* **DoÅ‚Ä…cz do** ğŸ’¬ [**grupy Discord**](https://discord.gg/hRep4RUj7f) lub [**grupy telegramowej**](https://t.me/peass) lub **Å›ledÅº** nas na **Twitterze** ğŸ¦ [**@hacktricks\_live**](https://twitter.com/hacktricks\_live)**.**
* **UdostÄ™pnij sztuczki hakerskie, przesyÅ‚ajÄ…c PR-y do** [**HackTricks**](https://github.com/carlospolop/hacktricks) i [**HackTricks Cloud**](https://github.com/carlospolop/hacktricks-cloud) github repos.

</details>
{% endhint %}

## CloudFront

CloudFront to **sieÄ‡ dostarczania treÅ›ci AWS, ktÃ³ra przyspiesza dystrybucjÄ™** twojej statycznej i dynamicznej treÅ›ci poprzez swojÄ… Å›wiatowÄ… sieÄ‡ lokalizacji krawÄ™dziowych. Gdy Å¼Ä…dasz treÅ›ci, ktÃ³rÄ… hostujesz za poÅ›rednictwem Amazon CloudFront, Å¼Ä…danie jest kierowane do najbliÅ¼szej lokalizacji krawÄ™dziowej, co zapewnia najniÅ¼sze opÃ³Åºnienie w dostarczaniu najlepszej wydajnoÅ›ci. Gdy **dzienniki dostÄ™pu CloudFront** sÄ… wÅ‚Ä…czone, moÅ¼na rejestrowaÄ‡ Å¼Ä…dania od kaÅ¼dego uÅ¼ytkownika Å¼Ä…dajÄ…cego dostÄ™pu do twojej witryny i dystrybucji. Podobnie jak w przypadku dziennikÃ³w dostÄ™pu S3, te dzienniki sÄ… rÃ³wnieÅ¼ **przechowywane w Amazon S3 dla trwaÅ‚ego i trwaÅ‚ego przechowywania**. Nie ma opÅ‚at za wÅ‚Ä…czenie samego rejestrowania, jednak, poniewaÅ¼ dzienniki sÄ… przechowywane w S3, zostanÄ… przechowywane za uÅ¼ywanie miejsca w S3.

Pliki dziennika przechwytujÄ… dane przez okreÅ›lony czas, a w zaleÅ¼noÅ›ci od iloÅ›ci Å¼Ä…daÅ„ otrzymywanych przez Amazon CloudFront dla tej dystrybucji, zaleÅ¼y iloÅ›Ä‡ plikÃ³w dziennika generowanych. WaÅ¼ne jest, aby wiedzieÄ‡, Å¼e te pliki dziennika nie sÄ… tworzone ani zapisywane w S3. S3 to po prostu miejsce, do ktÃ³rego sÄ… dostarczane, gdy plik dziennika jest peÅ‚ny. **Amazon CloudFront przechowuje te dzienniki do momentu, gdy sÄ… gotowe do dostarczenia do S3**. Ponownie, w zaleÅ¼noÅ›ci od rozmiaru tych plikÃ³w dziennika, dostarczenie to moÅ¼e zajÄ…Ä‡ **od jednej do 24 godzin**.

**DomyÅ›lnie rejestrowanie plikÃ³w cookie jest wyÅ‚Ä…czone**, ale moÅ¼na je wÅ‚Ä…czyÄ‡.

### Funkcje

MoÅ¼esz tworzyÄ‡ funkcje w CloudFront. Te funkcje bÄ™dÄ… miaÅ‚y swoje **zakoÅ„czenie w cloudfront** zdefiniowane i bÄ™dÄ… uruchamiaÄ‡ okreÅ›lony **kod NodeJS**. Ten kod bÄ™dzie uruchamiany wewnÄ…trz **piaskownicy** na maszynie dziaÅ‚ajÄ…cej pod zarzÄ…dzaniem maszyny AWS (bÄ™dziesz potrzebowaÄ‡ pominiÄ™cia piaskownicy, aby uciec do podstawowego systemu operacyjnego).

PoniewaÅ¼ funkcje nie sÄ… uruchamiane w koncie AWS uÅ¼ytkownikÃ³w, nie jest doÅ‚Ä…czona Å¼adna rola IAM, wiÄ™c nie ma moÅ¼liwoÅ›ci bezpoÅ›redniego podniesienia uprawnieÅ„ wykorzystujÄ…c tÄ™ funkcjÄ™.

### Wyliczanie
```bash
aws cloudfront list-distributions
aws cloudfront get-distribution --id <id> # Just get 1
aws cloudfront get-distribution-config --id <id>

aws cloudfront list-functions
aws cloudfront get-function --name TestFunction function_code.js

aws cloudfront list-distributions | jq ".DistributionList.Items[] | .Id, .Origins.Items[].Id, .Origins.Items[].DomainName, .AliasICPRecordals[].CNAME"
```
## Nieuwierzytelniony dostÄ™p

{% content-ref url="../aws-unauthenticated-enum-access/aws-cloudfront-unauthenticated-enum.md" %}
[aws-cloudfront-unauthenticated-enum.md](../aws-unauthenticated-enum-access/aws-cloudfront-unauthenticated-enum.md)
{% endcontent-ref %}

## Po eksploatacji

{% content-ref url="../aws-post-exploitation/aws-cloudfront-post-exploitation.md" %}
[aws-cloudfront-post-exploitation.md](../aws-post-exploitation/aws-cloudfront-post-exploitation.md)
{% endcontent-ref %}

{% hint style="success" %}
Dowiedz siÄ™ i Ä‡wicz Hacking AWS:<img src="/.gitbook/assets/image.png" alt="" data-size="line">[**HackTricks Training AWS Red Team Expert (ARTE)**](https://training.hacktricks.xyz/courses/arte)<img src="/.gitbook/assets/image.png" alt="" data-size="line">\
Dowiedz siÄ™ i Ä‡wicz Hacking GCP: <img src="/.gitbook/assets/image (2).png" alt="" data-size="line">[**HackTricks Training GCP Red Team Expert (GRTE)**<img src="/.gitbook/assets/image (2).png" alt="" data-size="line">](https://training.hacktricks.xyz/courses/grte)

<details>

<summary>Wesprzyj HackTricks</summary>

* SprawdÅº [**plany subskrypcyjne**](https://github.com/sponsors/carlospolop)!
* **DoÅ‚Ä…cz do** ğŸ’¬ [**grupy Discord**](https://discord.gg/hRep4RUj7f) lub [**grupy telegramowej**](https://t.me/peass) lub **Å›ledÅº** nas na **Twitterze** ğŸ¦ [**@hacktricks\_live**](https://twitter.com/hacktricks\_live)**.**
* **Podziel siÄ™ trikami hakerskimi, przesyÅ‚ajÄ…c PR-y do** [**HackTricks**](https://github.com/carlospolop/hacktricks) i [**HackTricks Cloud**](https://github.com/carlospolop/hacktricks-cloud) github repos.

</details>
{% endhint %}
