# AWS - CloudFront Enum

{% hint style="success" %}
UÄite i veÅ¾bajte hakovanje AWS-a:<img src="/.gitbook/assets/image.png" alt="" data-size="line">[**HackTricks Obuka AWS Crveni Tim StruÄnjak (ARTE)**](https://training.hacktricks.xyz/courses/arte)<img src="/.gitbook/assets/image.png" alt="" data-size="line">\
UÄite i veÅ¾bajte hakovanje GCP-a: <img src="/.gitbook/assets/image (2).png" alt="" data-size="line">[**HackTricks Obuka GCP Crveni Tim StruÄnjak (GRTE)**<img src="/.gitbook/assets/image (2).png" alt="" data-size="line">](https://training.hacktricks.xyz/courses/grte)

<details>

<summary>Pomozite HackTricks</summary>

* Proverite [**planove pretplate**](https://github.com/sponsors/carlospolop)!
* **PridruÅ¾ite se** ğŸ’¬ [**Discord grupi**](https://discord.gg/hRep4RUj7f) ili [**telegram grupi**](https://t.me/peass) ili nas **pratite** na **Twitteru** ğŸ¦ [**@hacktricks\_live**](https://twitter.com/hacktricks\_live)**.**
* **Podelite hakovanje trikova slanjem PR-ova na** [**HackTricks**](https://github.com/carlospolop/hacktricks) i [**HackTricks Cloud**](https://github.com/carlospolop/hacktricks-cloud) github repozitorijume.

</details>
{% endhint %}

## CloudFront

CloudFront je **mreÅ¾a za isporuku sadrÅ¾aja AWS-a koja ubrzava distribuciju** vaÅ¡eg statiÄkog i dinamiÄkog sadrÅ¾aja putem svoje svetske mreÅ¾e lokacija na ivici. Kada koristite zahtev sadrÅ¾aja koji hostujete putem Amazon CloudFront-a, zahtev se rutira do najbliÅ¾e lokacije na ivici koja pruÅ¾a najmanju latenciju za pruÅ¾anje najboljih performansi. Kada su **CloudFront pristupni zapisi** omoguÄ‡eni, moÅ¾ete zabeleÅ¾iti zahtev od svakog korisnika koji traÅ¾i pristup vaÅ¡em veb-sajtu i distribuciji. Kao i kod S3 pristupnih zapisa, ovi zapisi se takoÄ‘e **skladiÅ¡te na Amazon S3 radi trajnog i postojanog skladiÅ¡tenja**. Ne naplaÄ‡uju se naknade za omoguÄ‡avanje samog voÄ‘enja evidencije, meÄ‘utim, poÅ¡to se zapisi skladiÅ¡te u S3, biÄ‡ete naplaÄ‡eni za skladiÅ¡tenje koje koristi S3.

Datoteke zapisa beleÅ¾e podatke tokom odreÄ‘enog vremenskog perioda i zaviseÄ‡i od koliÄine zahteva koji su primljeni od strane Amazon CloudFront-a za tu distribuciju, zavisiÄ‡e i od koliÄine datoteka zapisa koje su generisane. VaÅ¾no je znati da ove datoteke zapisa nisu kreirane ili pisane na S3. S3 je jednostavno mesto gde se dostavljaju nakon Å¡to je datoteka zapisa puna. **Amazon CloudFront zadrÅ¾ava ove zapise dok ne budu spremni za dostavu na S3**. Ponovo, zavisno o veliÄini ovih datoteka zapisa, ova dostava moÅ¾e trajati **izmeÄ‘u jednog i 24 sata**.

**Podrazumevano je onemoguÄ‡eno voÄ‘enje evidencije kolaÄiÄ‡a** ali ga moÅ¾ete omoguÄ‡iti.

### Funkcije

MoÅ¾ete kreirati funkcije u CloudFront-u. Ove funkcije Ä‡e imati svoj **krajnji poen u cloudfront-u** definisan i pokrenuÄ‡e deklarisani **NodeJS kod**. Ovaj kod Ä‡e se izvrÅ¡avati unutar **peska** na maÅ¡ini koja radi pod upravljanjem AWS upravljane maÅ¡ine (trebaÄ‡e vam zaobilaÅ¾enje peska da biste uspeli da pobegnete do osnovnog OS-a).

PoÅ¡to funkcije nisu pokrenute u korisniÄkom AWS nalogu, nijedna IAM uloga nije pridruÅ¾ena tako da nije moguÄ‡e zloupotrebiti ovu funkciju za direktno privesc. 

### Enumeracija
```bash
aws cloudfront list-distributions
aws cloudfront get-distribution --id <id> # Just get 1
aws cloudfront get-distribution-config --id <id>

aws cloudfront list-functions
aws cloudfront get-function --name TestFunction function_code.js

aws cloudfront list-distributions | jq ".DistributionList.Items[] | .Id, .Origins.Items[].Id, .Origins.Items[].DomainName, .AliasICPRecordals[].CNAME"
```
## Neautentifikovan pristup

{% content-ref url="../aws-unauthenticated-enum-access/aws-cloudfront-unauthenticated-enum.md" %}
[aws-cloudfront-unauthenticated-enum.md](../aws-unauthenticated-enum-access/aws-cloudfront-unauthenticated-enum.md)
{% endcontent-ref %}

## Post Eksploatacija

{% content-ref url="../aws-post-exploitation/aws-cloudfront-post-exploitation.md" %}
[aws-cloudfront-post-exploitation.md](../aws-post-exploitation/aws-cloudfront-post-exploitation.md)
{% endcontent-ref %}

{% hint style="success" %}
UÄite i veÅ¾bajte AWS Hakovanje:<img src="/.gitbook/assets/image.png" alt="" data-size="line">[**HackTricks Obuka AWS Crveni Tim Ekspert (ARTE)**](https://training.hacktricks.xyz/courses/arte)<img src="/.gitbook/assets/image.png" alt="" data-size="line">\
UÄite i veÅ¾bajte GCP Hakovanje: <img src="/.gitbook/assets/image (2).png" alt="" data-size="line">[**HackTricks Obuka GCP Crveni Tim Ekspert (GRTE)**<img src="/.gitbook/assets/image (2).png" alt="" data-size="line">](https://training.hacktricks.xyz/courses/grte)

<details>

<summary>PodrÅ¾ite HackTricks</summary>

* Proverite [**planove pretplate**](https://github.com/sponsors/carlospolop)!
* **PridruÅ¾ite se** ğŸ’¬ [**Discord grupi**](https://discord.gg/hRep4RUj7f) ili [**telegram grupi**](https://t.me/peass) ili nas **pratite** na **Twitteru** ğŸ¦ [**@hacktricks\_live**](https://twitter.com/hacktricks\_live)**.**
* **Podelite hakovanje trikove slanjem PR-ova na** [**HackTricks**](https://github.com/carlospolop/hacktricks) i [**HackTricks Cloud**](https://github.com/carlospolop/hacktricks-cloud) github repozitorijume.

</details>
{% endhint %}
