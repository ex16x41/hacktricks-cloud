# AWS - CloudFront Enum

{% hint style="success" %}
Learn & practice AWS Hacking:<img src="../../../.gitbook/assets/image (1).png" alt="" data-size="line">[**HackTricks Training AWS Red Team Expert (ARTE)**](https://training.hacktricks.xyz/courses/arte)<img src="../../../.gitbook/assets/image (1).png" alt="" data-size="line">\
Learn & practice GCP Hacking: <img src="../../../.gitbook/assets/image (2).png" alt="" data-size="line">[**HackTricks Training GCP Red Team Expert (GRTE)**<img src="../../../.gitbook/assets/image (2).png" alt="" data-size="line">](https://training.hacktricks.xyz/courses/grte)

<details>

<summary>Support HackTricks</summary>

* Check the [**subscription plans**](https://github.com/sponsors/carlospolop)!
* **Join the**  [**Discord group**](https://discord.gg/hRep4RUj7f) or the [**telegram group**](https://t.me/peass) or **follow** us on **Twitter**  [**@hacktricks\_live**](https://twitter.com/hacktricks\_live)**.**
* **Share hacking tricks by submitting PRs to the** [**HackTricks**](https://github.com/carlospolop/hacktricks) and [**HackTricks Cloud**](https://github.com/carlospolop/hacktricks-cloud) github repos.

</details>
{% endhint %}

## CloudFront

CloudFront to **sie dostarczania treci AWS, kt贸ra przyspiesza dystrybucj** Twoich statycznych i dynamicznych treci za porednictwem swojej globalnej sieci lokalizacji brzegowych. Gdy korzystasz z treci, kt贸r hostujesz za porednictwem Amazon CloudFront, 偶danie jest kierowane do najbli偶szej lokalizacji brzegowej, co zapewnia najni偶sz latencj, aby dostarczy najlepsz wydajno. Gdy **dzienniki dostpu CloudFront** s wczone, mo偶esz rejestrowa 偶dania od ka偶dego u偶ytkownika 偶dajcego dostpu do Twojej witryny i dystrybucji. Podobnie jak w przypadku dziennik贸w dostpu S3, te dzienniki s r贸wnie偶 **przechowywane na Amazon S3 dla trwaego i staego przechowywania**. Nie ma opat za wczenie samego logowania, jednak poniewa偶 dzienniki s przechowywane w S3, bdziesz obci偶ony za przechowywanie u偶ywane przez S3.

Pliki dziennik贸w rejestruj dane przez pewien czas, a w zale偶noci od liczby 偶da otrzymywanych przez Amazon CloudFront dla tej dystrybucji, zale偶y to od liczby generowanych plik贸w dziennik贸w. Wa偶ne jest, aby wiedzie, 偶e te pliki dziennik贸w nie s tworzone ani zapisywane na S3. S3 to po prostu miejsce, do kt贸rego s dostarczane, gdy plik dziennika jest peny. **Amazon CloudFront przechowuje te dzienniki, a偶 bd gotowe do dostarczenia do S3**. Ponownie, w zale偶noci od rozmiaru tych plik贸w dziennik贸w, dostarczenie to mo偶e zaj **od jednej do 24 godzin**.

**Domylnie logowanie ciasteczek jest wyczone**, ale mo偶esz je wczy.

### Functions

Mo偶esz tworzy funkcje w CloudFront. Te funkcje bd miay sw贸j **punkt kocowy w cloudfront** zdefiniowany i bd uruchamia zadeklarowany **kod NodeJS**. Ten kod bdzie dziaa w **piaskownicy** na maszynie dziaajcej pod zarzdzan przez AWS maszyn (musisz mie obejcie piaskownicy, aby udao si uciec do podstawowego systemu operacyjnego).

Poniewa偶 funkcje nie s uruchamiane w koncie AWS u偶ytkownika, nie jest doczona 偶adna rola IAM, wic nie ma mo偶liwoci bezporedniego podniesienia uprawnie, wykorzystujc t funkcj.

### Enumeration
```bash
aws cloudfront list-distributions
aws cloudfront get-distribution --id <id> # Just get 1
aws cloudfront get-distribution-config --id <id>

aws cloudfront list-functions
aws cloudfront get-function --name TestFunction function_code.js

aws cloudfront list-distributions | jq ".DistributionList.Items[] | .Id, .Origins.Items[].Id, .Origins.Items[].DomainName, .AliasICPRecordals[].CNAME"
```
## Nieautoryzowany dostp

{% content-ref url="../aws-unauthenticated-enum-access/aws-cloudfront-unauthenticated-enum.md" %}
[aws-cloudfront-unauthenticated-enum.md](../aws-unauthenticated-enum-access/aws-cloudfront-unauthenticated-enum.md)
{% endcontent-ref %}

## Po eksploatacji

{% content-ref url="../aws-post-exploitation/aws-cloudfront-post-exploitation.md" %}
[aws-cloudfront-post-exploitation.md](../aws-post-exploitation/aws-cloudfront-post-exploitation.md)
{% endcontent-ref %}

{% hint style="success" %}
Ucz si i wicz Hacking AWS:<img src="../../../.gitbook/assets/image (1).png" alt="" data-size="line">[**HackTricks Training AWS Red Team Expert (ARTE)**](https://training.hacktricks.xyz/courses/arte)<img src="../../../.gitbook/assets/image (1).png" alt="" data-size="line">\
Ucz si i wicz Hacking GCP: <img src="../../../.gitbook/assets/image (2).png" alt="" data-size="line">[**HackTricks Training GCP Red Team Expert (GRTE)**<img src="../../../.gitbook/assets/image (2).png" alt="" data-size="line">](https://training.hacktricks.xyz/courses/grte)

<details>

<summary>Wsparcie dla HackTricks</summary>

* Sprawd藕 [**plany subskrypcyjne**](https://github.com/sponsors/carlospolop)!
* **Docz do**  [**grupy Discord**](https://discord.gg/hRep4RUj7f) lub [**grupy telegramowej**](https://t.me/peass) lub **led藕** nas na **Twitterze**  [**@hacktricks\_live**](https://twitter.com/hacktricks\_live)**.**
* **Dziel si trikami hackingowymi, przesyajc PR-y do** [**HackTricks**](https://github.com/carlospolop/hacktricks) i [**HackTricks Cloud**](https://github.com/carlospolop/hacktricks-cloud) repozytori贸w github.

</details>
{% endhint %}
