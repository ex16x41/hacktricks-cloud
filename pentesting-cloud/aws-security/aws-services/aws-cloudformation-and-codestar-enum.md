# AWS - CloudFormation & Codestar Enum

{% hint style="success" %}
Learn & practice AWS Hacking:<img src="../../../.gitbook/assets/image (1) (1).png" alt="" data-size="line">[**HackTricks Training AWS Red Team Expert (ARTE)**](https://training.hacktricks.xyz/courses/arte)<img src="../../../.gitbook/assets/image (1) (1).png" alt="" data-size="line">\
Learn & practice GCP Hacking: <img src="../../../.gitbook/assets/image (2).png" alt="" data-size="line">[**HackTricks Training GCP Red Team Expert (GRTE)**<img src="../../../.gitbook/assets/image (2).png" alt="" data-size="line">](https://training.hacktricks.xyz/courses/grte)

<details>

<summary>Support HackTricks</summary>

* Check the [**subscription plans**](https://github.com/sponsors/carlospolop)!
* **Join the** 💬 [**Discord group**](https://discord.gg/hRep4RUj7f) or the [**telegram group**](https://t.me/peass) or **follow** us on **Twitter** 🐦 [**@hacktricks\_live**](https://twitter.com/hacktricks\_live)**.**
* **Share hacking tricks by submitting PRs to the** [**HackTricks**](https://github.com/carlospolop/hacktricks) and [**HackTricks Cloud**](https://github.com/carlospolop/hacktricks-cloud) github repos.

</details>
{% endhint %}

## CloudFormation

AWS CloudFormation είναι μια υπηρεσία σχεδιασμένη να **απλοποιεί τη διαχείριση των πόρων AWS**. Επιτρέπει στους χρήστες να επικεντρώνονται περισσότερο στις εφαρμογές τους που εκτελούνται στο AWS, **ελαχιστοποιώντας τον χρόνο που δαπανάται για τη διαχείριση πόρων**. Η κύρια δυνατότητα αυτής της υπηρεσίας είναι το **πρότυπο**—ένα περιγραφικό μοντέλο των επιθυμητών πόρων AWS. Μόλις παρασχεθεί αυτό το πρότυπο, το CloudFormation είναι υπεύθυνο για την **παροχή και ρύθμιση** των καθορισμένων πόρων. Αυτή η αυτοματοποίηση διευκολύνει μια πιο αποτελεσματική και χωρίς σφάλματα διαχείριση της υποδομής AWS.

### Enumeration
```bash
# Stacks
aws cloudformation list-stacks
aws cloudformation describe-stacks # You could find sensitive information here
aws cloudformation list-stack-resources --stack-name <name>

## Show params and outputs
aws cloudformation describe-stacks | jq ".Stacks[] | .StackId, .StackName, .Parameters, .Outputs"

# Export
aws cloudformation list-exports
aws cloudformation list-imports --export-name <x_name>

# Stack Sets
aws cloudformation list-stack-sets
aws cloudformation describe-stack-set --stack-set-name <name>
aws cloudformation list-stack-instances --stack-set-name <name>
aws cloudformation list-stack-set-operations --stack-set-name <name>
aws cloudformation list-stack-set-operation-results --stack-set-name <name> --operation-id <id>
```
### Privesc

In the following page you can check how to **abuse cloudformation permissions to escalate privileges**:

{% content-ref url="../aws-privilege-escalation/aws-cloudformation-privesc/" %}
[aws-cloudformation-privesc](../aws-privilege-escalation/aws-cloudformation-privesc/)
{% endcontent-ref %}

### Post-Exploitation

Check for **secrets** or sensitive information in the **template, parameters & output** of each CloudFormation

## Codestar

AWS CodeStar είναι μια υπηρεσία για τη δημιουργία, διαχείριση και εργασία με έργα ανάπτυξης λογισμικού στο AWS. Μπορείτε να αναπτύξετε, κατασκευάσετε και αναπτύξετε εφαρμογές στο AWS γρήγορα με ένα έργο AWS CodeStar. Ένα έργο AWS CodeStar δημιουργεί και **ενσωματώνει τις υπηρεσίες AWS** για την αλυσίδα εργαλείων ανάπτυξης του έργου σας. Ανάλογα με την επιλογή σας για το πρότυπο έργου AWS CodeStar, αυτή η αλυσίδα εργαλείων μπορεί να περιλαμβάνει έλεγχο πηγής, κατασκευή, ανάπτυξη, εικονικούς διακομιστές ή πόρους χωρίς διακομιστές, και άλλα. Το AWS CodeStar επίσης **διαχειρίζεται τις άδειες που απαιτούνται για τους χρήστες του έργου** (που ονομάζονται μέλη της ομάδας).

### Enumeration
```bash
# Get projects information
aws codestar list-projects
aws codestar describe-project --id <project_id>
aws codestar list-resources --project-id <project_id>
aws codestar list-team-members --project-id <project_id>

aws codestar list-user-profiles
aws codestar describe-user-profile --user-arn <arn>
```
### Privesc

Στην επόμενη σελίδα μπορείτε να ελέγξετε πώς να **καταχραστείτε τις άδειες του codestar για να κλιμακώσετε τα προνόμια**:

{% content-ref url="../aws-privilege-escalation/aws-codestar-privesc/" %}
[aws-codestar-privesc](../aws-privilege-escalation/aws-codestar-privesc/)
{% endcontent-ref %}

## References

* [https://docs.aws.amazon.com/cloudformation/](https://docs.aws.amazon.com/cloudformation/)

{% hint style="success" %}
Μάθετε & εξασκηθείτε στο AWS Hacking:<img src="../../../.gitbook/assets/image (1) (1).png" alt="" data-size="line">[**HackTricks Training AWS Red Team Expert (ARTE)**](https://training.hacktricks.xyz/courses/arte)<img src="../../../.gitbook/assets/image (1) (1).png" alt="" data-size="line">\
Μάθετε & εξασκηθείτε στο GCP Hacking: <img src="../../../.gitbook/assets/image (2).png" alt="" data-size="line">[**HackTricks Training GCP Red Team Expert (GRTE)**<img src="../../../.gitbook/assets/image (2).png" alt="" data-size="line">](https://training.hacktricks.xyz/courses/grte)

<details>

<summary>Support HackTricks</summary>

* Ελέγξτε τα [**σχέδια συνδρομής**](https://github.com/sponsors/carlospolop)!
* **Εγγραφείτε στην** 💬 [**ομάδα Discord**](https://discord.gg/hRep4RUj7f) ή στην [**ομάδα telegram**](https://t.me/peass) ή **ακολουθήστε** μας στο **Twitter** 🐦 [**@hacktricks\_live**](https://twitter.com/hacktricks\_live)**.**
* **Μοιραστείτε κόλπα hacking υποβάλλοντας PRs στα** [**HackTricks**](https://github.com/carlospolop/hacktricks) και [**HackTricks Cloud**](https://github.com/carlospolop/hacktricks-cloud) github repos.

</details>
{% endhint %}
