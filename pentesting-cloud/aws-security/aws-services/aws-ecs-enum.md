# AWS - ECS Enum

{% hint style="success" %}
AWS í•´í‚¹ì„ ë°°ìš°ê³  ì‹¤ìŠµí•˜ì„¸ìš”:<img src="/.gitbook/assets/image.png" alt="" data-size="line">[**HackTricks Training AWS Red Team Expert (ARTE)**](https://training.hacktricks.xyz/courses/arte)<img src="/.gitbook/assets/image.png" alt="" data-size="line">\
GCP í•´í‚¹ì„ ë°°ìš°ê³  ì‹¤ìŠµí•˜ì„¸ìš”: <img src="/.gitbook/assets/image (2).png" alt="" data-size="line">[**HackTricks Training GCP Red Team Expert (GRTE)**<img src="/.gitbook/assets/image (2).png" alt="" data-size="line">](https://training.hacktricks.xyz/courses/grte)

<details>

<summary>HackTricks ì§€ì›</summary>

* [**êµ¬ë… ìš”ê¸ˆì œ**](https://github.com/sponsors/carlospolop)ë¥¼ í™•ì¸í•˜ì„¸ìš”!
* ğŸ’¬ [**ë””ìŠ¤ì½”ë“œ ê·¸ë£¹**](https://discord.gg/hRep4RUj7f)ì— ê°€ì…í•˜ê±°ë‚˜ [**í…”ë ˆê·¸ë¨ ê·¸ë£¹**](https://t.me/peass)ì— ê°€ì…í•˜ê±°ë‚˜ **íŠ¸ìœ„í„°** ğŸ¦ [**@hacktricks\_live**](https://twitter.com/hacktricks\_live)**ë¥¼ íŒ”ë¡œìš°**í•˜ì„¸ìš”.
* **HackTricks** ë° **HackTricks Cloud** ê¹ƒí—ˆë¸Œ ì €ì¥ì†Œì— PRì„ ì œì¶œí•˜ì—¬ í•´í‚¹ íŠ¸ë¦­ì„ ê³µìœ í•˜ì„¸ìš”.

</details>
{% endhint %}

## ECS

### ê¸°ë³¸ ì •ë³´

Amazon **Elastic Container Services** ë˜ëŠ” ECSëŠ” **ì»¨í…Œì´ë„ˆí™”ëœ ì‘ìš© í”„ë¡œê·¸ë¨ì„ í´ë¼ìš°ë“œì—ì„œ í˜¸ìŠ¤íŒ…**í•  ìˆ˜ ìˆëŠ” í”Œë«í¼ì„ ì œê³µí•©ë‹ˆë‹¤. ECSì—ëŠ” **EC2** ì¸ìŠ¤í„´ìŠ¤ ìœ í˜•ê³¼ **ì„œë²„ë¦¬ìŠ¤** ì˜µì…˜ ì¸ **Fargate** ë‘ ê°€ì§€ **ë°°í¬** ë°©ë²•ì´ ìˆìŠµë‹ˆë‹¤. ì´ ì„œë¹„ìŠ¤ëŠ” **í´ë¼ìš°ë“œì—ì„œ ì»¨í…Œì´ë„ˆë¥¼ ì‹¤í–‰í•˜ëŠ” ê²ƒì„ ë§¤ìš° ì‰½ê³  ë¬´ë£Œ**í•˜ê²Œ ë§Œë“­ë‹ˆë‹¤.

ECSëŠ” ë‹¤ìŒ ì„¸ ê°€ì§€ êµ¬ì„± ìš”ì†Œë¥¼ ì‚¬ìš©í•˜ì—¬ ì‘ë™í•©ë‹ˆë‹¤: **í´ëŸ¬ìŠ¤í„°**, **ì„œë¹„ìŠ¤** ë° **ì‘ì—… ì •ì˜**.

* **í´ëŸ¬ìŠ¤í„°**ëŠ” í´ë¼ìš°ë“œì—ì„œ ì‹¤í–‰ ì¤‘ì¸ **ì»¨í…Œì´ë„ˆ ê·¸ë£¹**ì…ë‹ˆë‹¤. ì´ì „ì— ì–¸ê¸‰í–ˆë“¯ì´ ì»¨í…Œì´ë„ˆì—ëŠ” EC2 ë° Fargate ë‘ ê°€ì§€ **ë¡œì»¬** ìœ í˜•ì´ ìˆìŠµë‹ˆë‹¤. AWSëŠ” **EC2** ë¡œì»¬ ìœ í˜•ì„ "Amazon EC2 ì¸ìŠ¤í„´ìŠ¤ í´ëŸ¬ìŠ¤í„°ì—ì„œ \[ê³ ê°ì´] ì»¨í…Œì´ë„ˆí™”ëœ ì‘ìš© í”„ë¡œê·¸ë¨ì„ ì‹¤í–‰í•  ìˆ˜ ìˆê²Œ í•´ì¤€ë‹¤"ê³  ì •ì˜í•©ë‹ˆë‹¤. **Fargate**ëŠ” ìœ ì‚¬í•˜ë©° "ë°±ì—”ë“œ ì¸í”„ë¼ë¥¼ í”„ë¡œë¹„ì €ë‹í•˜ê³  ê´€ë¦¬í•  í•„ìš” ì—†ì´ ì»¨í…Œì´ë„ˆí™”ëœ ì‘ìš© í”„ë¡œê·¸ë¨ì„ ì‹¤í–‰í•  ìˆ˜ ìˆê²Œ í•´ì¤ë‹ˆë‹¤".
* **ì„œë¹„ìŠ¤**ëŠ” í´ëŸ¬ìŠ¤í„° ë‚´ì—ì„œ ìƒì„±ë˜ë©° **ì‘ì—… ì‹¤í–‰**ì„ ë‹´ë‹¹í•©ë‹ˆë‹¤. ì„œë¹„ìŠ¤ ì •ì˜ ë‚´ì—ì„œ **ì‹¤í–‰í•  ì‘ì—… ìˆ˜, ìë™ í™•ì¥, ìš©ëŸ‰ ì œê³µì (Fargate/EC2/ì™¸ë¶€),** VPC, ì„œë¸Œë„· ë° ë³´ì•ˆ ê·¸ë£¹ê³¼ ê°™ì€ **ë„¤íŠ¸ì›Œí‚¹** ì •ë³´ë¥¼ ì •ì˜í•©ë‹ˆë‹¤.
* **2 ì¢…ë¥˜ì˜ ì‘ìš© í”„ë¡œê·¸ë¨**ì´ ìˆìŠµë‹ˆë‹¤:
* **ì„œë¹„ìŠ¤**: ì¤‘ë‹¨ë˜ê³  ë‹¤ì‹œ ì‹œì‘í•  ìˆ˜ ìˆëŠ” ì¥ê¸° ì‹¤í–‰ ì»´í“¨íŒ… ì‘ì—…ì„ ì²˜ë¦¬í•˜ëŠ” ì‘ì—… ê·¸ë£¹ì…ë‹ˆë‹¤. ì˜ˆë¥¼ ë“¤ì–´, ì›¹ ì‘ìš© í”„ë¡œê·¸ë¨.
* **ì‘ì—…**: ì‹¤í–‰ë˜ê³  ì¢…ë£Œë˜ëŠ” ë…ë¦½ì ì¸ ì‘ì—…ì…ë‹ˆë‹¤. ì˜ˆë¥¼ ë“¤ì–´, ì¼ê´„ ì‘ì—….
* ì„œë¹„ìŠ¤ ì‘ìš© í”„ë¡œê·¸ë¨ ì¤‘ì—ëŠ” **2 ì¢…ë¥˜ì˜ ì„œë¹„ìŠ¤ ìŠ¤ì¼€ì¤„ëŸ¬**ê°€ ìˆìŠµë‹ˆë‹¤:
* [**REPLICA**](https://docs.aws.amazon.com/AmazonECS/latest/developerguide/ecs\_services.html): ë³µì œ ìŠ¤ì¼€ì¤„ë§ ì „ëµì€ í´ëŸ¬ìŠ¤í„° ì „ì²´ì— **ì›í•˜ëŠ” ìˆ˜**ì˜ ì‘ì—…ì„ ë°°ì¹˜í•˜ê³  **ìœ ì§€**í•©ë‹ˆë‹¤. ì–´ë–¤ ì´ìœ ë¡œë“  ì‘ì—…ì´ ì¢…ë£Œë˜ë©´ ë™ì¼í•œ ë…¸ë“œ ë˜ëŠ” ë‹¤ë¥¸ ë…¸ë“œì— ìƒˆ ì‘ì—…ì´ ì‹œì‘ë©ë‹ˆë‹¤.
* [**DAEMON**](https://docs.aws.amazon.com/AmazonECS/latest/developerguide/ecs\_services.html): í•„ìš”í•œ ìš”êµ¬ ì‚¬í•­ì„ ê°–ì¶˜ ê° í™œì„± ì»¨í…Œì´ë„ˆ ì¸ìŠ¤í„´ìŠ¤ì— ì •í™•íˆ í•˜ë‚˜ì˜ ì‘ì—…ì„ ë°°í¬í•©ë‹ˆë‹¤. ì›í•˜ëŠ” ì‘ì—… ìˆ˜, ì‘ì—… ë°°ì¹˜ ì „ëµ ë˜ëŠ” ì„œë¹„ìŠ¤ ìë™ í™•ì¥ ì •ì±…ì„ ì§€ì •í•  í•„ìš”ê°€ ì—†ìŠµë‹ˆë‹¤.
* **ì‘ì—… ì •ì˜**ëŠ” ì‹¤í–‰í•  ì»¨í…Œì´ë„ˆì™€ ì»¨í…Œì´ë„ˆì™€ ê´€ë ¨ëœ ë‹¤ì–‘í•œ ë§¤ê°œë³€ìˆ˜ë¥¼ ì •ì˜í•˜ëŠ” ë° ì±…ì„ì´ ìˆìŠµë‹ˆë‹¤. í˜¸ìŠ¤íŠ¸ì™€ì˜ **í¬íŠ¸ ë§¤í•‘**, **í™˜ê²½ ë³€ìˆ˜**, Docker **ì§„ì…ì **ê³¼ ê°™ì€ ì»¨í…Œì´ë„ˆì™€ êµ¬ì„±í•  ë§¤ê°œë³€ìˆ˜ë¥¼ ì •ì˜í•©ë‹ˆë‹¤.
* **ë¯¼ê°í•œ ì •ë³´ë¥¼ ìœ„í•œ í™˜ê²½ ë³€ìˆ˜ë¥¼ í™•ì¸í•˜ì„¸ìš”**!

### ì‘ì—… ì •ì˜ì—ì„œ ë¯¼ê°í•œ ë°ì´í„°

ì‘ì—… ì •ì˜ëŠ” ECSì—ì„œ ì‹¤í–‰ë  **ì‹¤ì œ ì»¨í…Œì´ë„ˆë¥¼ êµ¬ì„±**í•˜ëŠ” ë° ì±…ì„ì´ ìˆìŠµë‹ˆë‹¤. ì‘ì—… ì •ì˜ëŠ” ì»¨í…Œì´ë„ˆê°€ ì–´ë–»ê²Œ ì‹¤í–‰ë ì§€ ì •ì˜í•˜ë¯€ë¡œ ë‹¤ì–‘í•œ ì •ë³´ê°€ í¬í•¨ë  ìˆ˜ ìˆìŠµë‹ˆë‹¤.

PacuëŠ” ECSë¥¼ ì—´ê±°í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤ (list-clusters, list-container-instances, list-services, list-task-definitions) ë° ì‘ì—… ì •ì˜ë¥¼ ë¤í”„í•  ìˆ˜ë„ ìˆìŠµë‹ˆë‹¤.

### ì—´ê±°
```bash
# Clusters info
aws ecs list-clusters
aws ecs describe-clusters --clusters <cluster>

# Container instances
## An Amazon ECS container instance is an Amazon EC2 instance that is running the Amazon ECS container agent and has been registered into an Amazon ECS cluster.
aws ecs list-container-instances --cluster <cluster>
aws ecs describe-container-instances --cluster <cluster> --container-instances <container_instance_arn>

# Services info
aws ecs list-services --cluster <cluster>
aws ecs describe-services --cluster <cluster> --services <services>
aws ecs describe-task-sets --cluster <cluster> --service <service>

# Task definitions
aws ecs list-task-definition-families
aws ecs list-task-definitions
aws ecs list-tasks --cluster <cluster>
aws ecs describe-tasks --cluster <cluster> --tasks <tasks>
## Look for env vars and secrets used from the task definition
aws ecs describe-task-definition --task-definition <TASK_NAME>:<VERSION>
```
### ì¸ì¦ë˜ì§€ ì•Šì€ ì•¡ì„¸ìŠ¤

{% content-ref url="../aws-unauthenticated-enum-access/aws-ecs-unauthenticated-enum.md" %}
[aws-ecs-unauthenticated-enum.md](../aws-unauthenticated-enum-access/aws-ecs-unauthenticated-enum.md)
{% endcontent-ref %}

### ê¶Œí•œ ìƒìŠ¹

ë‹¤ìŒ í˜ì´ì§€ì—ì„œ **ECS ê¶Œí•œì„ ë‚¨ìš©í•˜ì—¬ ê¶Œí•œ ìƒìŠ¹í•˜ëŠ” ë°©ë²•**ì„ í™•ì¸í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤:

{% content-ref url="../aws-privilege-escalation/aws-ecs-privesc.md" %}
[aws-ecs-privesc.md](../aws-privilege-escalation/aws-ecs-privesc.md)
{% endcontent-ref %}

### ì‚¬í›„ ê³µê²©

{% content-ref url="../aws-post-exploitation/aws-ecs-post-exploitation.md" %}
[aws-ecs-post-exploitation.md](../aws-post-exploitation/aws-ecs-post-exploitation.md)
{% endcontent-ref %}

### ì§€ì†ì„±

{% content-ref url="../aws-persistence/aws-ecs-persistence.md" %}
[aws-ecs-persistence.md](../aws-persistence/aws-ecs-persistence.md)
{% endcontent-ref %}

{% hint style="success" %}
AWS í•´í‚¹ í•™ìŠµ ë° ì‹¤ìŠµ:<img src="/.gitbook/assets/image.png" alt="" data-size="line">[**HackTricks Training AWS Red Team Expert (ARTE)**](https://training.hacktricks.xyz/courses/arte)<img src="/.gitbook/assets/image.png" alt="" data-size="line">\
GCP í•´í‚¹ í•™ìŠµ ë° ì‹¤ìŠµ: <img src="/.gitbook/assets/image (2).png" alt="" data-size="line">[**HackTricks Training GCP Red Team Expert (GRTE)**<img src="/.gitbook/assets/image (2).png" alt="" data-size="line">](https://training.hacktricks.xyz/courses/grte)

<details>

<summary>HackTricks ì§€ì›</summary>

* [**êµ¬ë… ìš”ê¸ˆì œ**](https://github.com/sponsors/carlospolop)ë¥¼ í™•ì¸í•˜ì„¸ìš”!
* ğŸ’¬ [**ë””ìŠ¤ì½”ë“œ ê·¸ë£¹**](https://discord.gg/hRep4RUj7f) ë˜ëŠ” [**í…”ë ˆê·¸ë¨ ê·¸ë£¹**](https://t.me/peass)ì— **ì°¸ì—¬**í•˜ê±°ë‚˜ **íŠ¸ìœ„í„°** ğŸ¦ [**@hacktricks\_live**](https://twitter.com/hacktricks\_live)**ë¥¼ íŒ”ë¡œìš°**í•˜ì„¸ìš”.
* [**HackTricks**](https://github.com/carlospolop/hacktricks) ë° [**HackTricks Cloud**](https://github.com/carlospolop/hacktricks-cloud) ê¹ƒí—™ ë ˆí¬ì§€í† ë¦¬ì— PRì„ ì œì¶œí•˜ì—¬ í•´í‚¹ íŠ¸ë¦­ì„ ê³µìœ í•˜ì„¸ìš”.

</details>
{% endhint %}
