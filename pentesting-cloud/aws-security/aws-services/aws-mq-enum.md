# AWS - MQ Enum

{% hint style="success" %}
AWSãƒãƒƒã‚­ãƒ³ã‚°ã®å­¦ç¿’ã¨ç·´ç¿’:<img src="/.gitbook/assets/image.png" alt="" data-size="line">[**HackTricks Training AWS Red Team Expert (ARTE)**](https://training.hacktricks.xyz/courses/arte)<img src="/.gitbook/assets/image.png" alt="" data-size="line">\
GCPãƒãƒƒã‚­ãƒ³ã‚°ã®å­¦ç¿’ã¨ç·´ç¿’: <img src="/.gitbook/assets/image (2).png" alt="" data-size="line">[**HackTricks Training GCP Red Team Expert (GRTE)**<img src="/.gitbook/assets/image (2).png" alt="" data-size="line">](https://training.hacktricks.xyz/courses/grte)

<details>

<summary>HackTricksã®ã‚µãƒãƒ¼ãƒˆ</summary>

* [**ã‚µãƒ–ã‚¹ã‚¯ãƒªãƒ—ã‚·ãƒ§ãƒ³ãƒ—ãƒ©ãƒ³**](https://github.com/sponsors/carlospolop)ã‚’ãƒã‚§ãƒƒã‚¯ï¼
* ğŸ’¬ [**Discordã‚°ãƒ«ãƒ¼ãƒ—**](https://discord.gg/hRep4RUj7f)ã¾ãŸã¯[**telegramã‚°ãƒ«ãƒ¼ãƒ—**](https://t.me/peass)ã«**å‚åŠ **ã™ã‚‹ã‹ã€**Twitter** ğŸ¦ [**@hacktricks\_live**](https://twitter.com/hacktricks\_live)**ã‚’ãƒ•ã‚©ãƒ­ãƒ¼**ã—ã¦ãã ã•ã„ã€‚
* **HackTricks**ã¨**HackTricks Cloud**ã®githubãƒªãƒã‚¸ãƒˆãƒªã«PRã‚’æå‡ºã—ã¦ã€ãƒãƒƒã‚­ãƒ³ã‚°ãƒˆãƒªãƒƒã‚¯ã‚’å…±æœ‰ã—ã¦ãã ã•ã„ã€‚

</details>
{% endhint %}

## Amazon MQ

### ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸ãƒ–ãƒ­ãƒ¼ã‚«ãƒ¼ã¸ã®å°å…¥
**ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸ãƒ–ãƒ­ãƒ¼ã‚«ãƒ¼**ã¯ã€ç•°ãªã‚‹ã‚½ãƒ•ãƒˆã‚¦ã‚§ã‚¢ã‚·ã‚¹ãƒ†ãƒ é–“ã®é€šä¿¡ã‚’å®¹æ˜“ã«ã™ã‚‹ä¸­é–“æ¥­è€…ã¨ã—ã¦æ©Ÿèƒ½ã—ã€ã•ã¾ã–ã¾ãªãƒ—ãƒ©ãƒƒãƒˆãƒ•ã‚©ãƒ¼ãƒ ã§æ§‹ç¯‰ã•ã‚Œã€ç•°ãªã‚‹è¨€èªã§ãƒ—ãƒ­ã‚°ãƒ©ãƒ ã•ã‚Œã¦ã„ã‚‹å¯èƒ½æ€§ãŒã‚ã‚Šã¾ã™ã€‚**Amazon MQ**ã¯ã€AWSä¸Šã§ã®ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸ãƒ–ãƒ­ãƒ¼ã‚«ãƒ¼ã®å±•é–‹ã€é‹ç”¨ã€ãŠã‚ˆã³ãƒ¡ãƒ³ãƒ†ãƒŠãƒ³ã‚¹ã‚’ç°¡ç´ åŒ–ã—ã¾ã™ã€‚**Apache ActiveMQ**ãŠã‚ˆã³**RabbitMQ**ã®ãŸã‚ã®ç®¡ç†ã•ã‚ŒãŸã‚µãƒ¼ãƒ“ã‚¹ã‚’æä¾›ã—ã€ã‚·ãƒ¼ãƒ ãƒ¬ã‚¹ãªãƒ—ãƒ­ãƒ“ã‚¸ãƒ§ãƒ‹ãƒ³ã‚°ã¨è‡ªå‹•ã‚½ãƒ•ãƒˆã‚¦ã‚§ã‚¢ãƒãƒ¼ã‚¸ãƒ§ãƒ³ã®æ›´æ–°ã‚’ä¿è¨¼ã—ã¾ã™ã€‚

### AWS - RabbitMQ
RabbitMQã¯ã€é¡•è‘—ãª**ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸ã‚­ãƒ¥ãƒ¼ã‚½ãƒ•ãƒˆã‚¦ã‚§ã‚¢**ã§ã‚ã‚Šã€_ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸ãƒ–ãƒ­ãƒ¼ã‚«ãƒ¼_ã¾ãŸã¯_ã‚­ãƒ¥ãƒ¼ãƒãƒãƒ¼ã‚¸ãƒ£ãƒ¼_ã¨ã—ã¦ã‚‚çŸ¥ã‚‰ã‚Œã¦ã„ã¾ã™ã€‚åŸºæœ¬çš„ã«ã¯ã€ã‚­ãƒ¥ãƒ¼ãŒæ§‹æˆã•ã‚Œã‚‹ã‚·ã‚¹ãƒ†ãƒ ã§ã™ã€‚ã‚¢ãƒ—ãƒªã‚±ãƒ¼ã‚·ãƒ§ãƒ³ã¯ã“ã‚Œã‚‰ã®ã‚­ãƒ¥ãƒ¼ã¨ã‚¤ãƒ³ã‚¿ãƒ¼ãƒ•ã‚§ãƒ¼ã‚¹ã—ã¦**ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸ã®é€å—ä¿¡**ã‚’è¡Œã„ã¾ã™ã€‚ã“ã®æ–‡è„ˆã§ã®ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸ã«ã¯ã€ä»–ã®ã‚¢ãƒ—ãƒªã‚±ãƒ¼ã‚·ãƒ§ãƒ³ä¸Šã§ãƒ—ãƒ­ã‚»ã‚¹ã‚’é–‹å§‹ã™ã‚‹ãŸã‚ã®ã‚³ãƒãƒ³ãƒ‰ã‹ã‚‰ï¼ˆãŠãã‚‰ãç•°ãªã‚‹ã‚µãƒ¼ãƒãƒ¼ä¸Šã§ï¼‰ã‚·ãƒ³ãƒ—ãƒ«ãªãƒ†ã‚­ã‚¹ãƒˆãƒ¡ãƒƒã‚»ãƒ¼ã‚¸ã¾ã§ã€ã•ã¾ã–ã¾ãªæƒ…å ±ãŒå«ã¾ã‚Œã‚‹ã“ã¨ãŒã‚ã‚Šã¾ã™ã€‚ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸ã¯ã€å—ä¿¡ã‚¢ãƒ—ãƒªã‚±ãƒ¼ã‚·ãƒ§ãƒ³ã«ã‚ˆã£ã¦å–å¾—ãŠã‚ˆã³å‡¦ç†ã•ã‚Œã‚‹ã¾ã§ã€ã‚­ãƒ¥ãƒ¼ãƒãƒãƒ¼ã‚¸ãƒ£ãƒ¼ã‚½ãƒ•ãƒˆã‚¦ã‚§ã‚¢ã«ã‚ˆã£ã¦ä¿æŒã•ã‚Œã¾ã™ã€‚AWSã¯ã€RabbitMQã‚µãƒ¼ãƒãƒ¼ã®ãƒ›ã‚¹ãƒ†ã‚£ãƒ³ã‚°ã¨ç®¡ç†ã‚’å®¹æ˜“ã«ã™ã‚‹ã‚½ãƒªãƒ¥ãƒ¼ã‚·ãƒ§ãƒ³ã‚’æä¾›ã—ã¦ã„ã¾ã™ã€‚

### AWS - ActiveMQ
Apache ActiveMQÂ®ã¯ã€ãã®æ±ç”¨æ€§ã§çŸ¥ã‚‰ã‚Œã‚‹ä¸»è¦ãªã‚ªãƒ¼ãƒ—ãƒ³ã‚½ãƒ¼ã‚¹ã®Javaãƒ™ãƒ¼ã‚¹ã®**ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸ãƒ–ãƒ­ãƒ¼ã‚«ãƒ¼**ã§ã™ã€‚è¤‡æ•°ã®æ¥­ç•Œæ¨™æº–ãƒ—ãƒ­ãƒˆã‚³ãƒ«ã‚’ã‚µãƒãƒ¼ãƒˆã—ã€ã•ã¾ã–ã¾ãªè¨€èªã‚„ãƒ—ãƒ©ãƒƒãƒˆãƒ•ã‚©ãƒ¼ãƒ ã§åºƒç¯„ãªã‚¯ãƒ©ã‚¤ã‚¢ãƒ³ãƒˆäº’æ›æ€§ã‚’æä¾›ã—ã¦ã„ã¾ã™ã€‚ãƒ¦ãƒ¼ã‚¶ãƒ¼ã¯æ¬¡ã®ã“ã¨ãŒã§ãã¾ã™ï¼š

- JavaScriptã€Cã€C++ã€Pythonã€.Netãªã©ã§æ›¸ã‹ã‚ŒãŸã‚¯ãƒ©ã‚¤ã‚¢ãƒ³ãƒˆã¨æ¥ç¶šã™ã‚‹ã€‚
- ç•°ãªã‚‹ãƒ—ãƒ©ãƒƒãƒˆãƒ•ã‚©ãƒ¼ãƒ ã‹ã‚‰ã®ã‚¢ãƒ—ãƒªã‚±ãƒ¼ã‚·ãƒ§ãƒ³ã‚’çµ±åˆã™ã‚‹ãŸã‚ã«**AMQP**ãƒ—ãƒ­ãƒˆã‚³ãƒ«ã‚’æ´»ç”¨ã™ã‚‹ã€‚
- ã‚¦ã‚§ãƒ–ã‚¢ãƒ—ãƒªã‚±ãƒ¼ã‚·ãƒ§ãƒ³ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸ã®äº¤æ›ã®ãŸã‚ã«**STOMP** over websocketsã‚’ä½¿ç”¨ã™ã‚‹ã€‚
- **MQTT**ã‚’ä½¿ç”¨ã—ã¦IoTãƒ‡ãƒã‚¤ã‚¹ã‚’ç®¡ç†ã™ã‚‹ã€‚
- æ—¢å­˜ã®**JMS**ã‚¤ãƒ³ãƒ•ãƒ©ã‚¹ãƒˆãƒ©ã‚¯ãƒãƒ£ã‚’ç¶­æŒã—ã€ãã®æ©Ÿèƒ½ã‚’æ‹¡å¼µã™ã‚‹ã€‚

ActiveMQã®å …ç‰¢ã•ã¨æŸ”è»Ÿæ€§ã¯ã€ã•ã¾ã–ã¾ãªãƒ¡ãƒƒã‚»ãƒ¼ã‚¸ãƒ³ã‚°è¦ä»¶ã«é©ã—ã¦ã„ã¾ã™ã€‚


## åˆ—æŒ™
```bash
# List brokers
aws mq list-brokers

# Get broker info
aws mq describe-broker --broker-id <broker-id>
## Find endpoints in .BrokerInstances
## Find if public accessible in .PubliclyAccessible

# List usernames (only for ActiveMQ)
aws mq list-users --broker-id <broker-id>

# Get user info (PASSWORD NOT INCLUDED)
aws mq describe-user --broker-id <broker-id> --username <username>

# Lits configurations (only for ActiveMQ)
aws mq list-configurations
## Here you can find if simple or LDAP authentication is used

# Creacte Active MQ user
aws mq create-user --broker-id <value> --password <value> --username <value> --console-access
```
{% hint style="warning" %}
TODO: RabbitMQã¨ActiveMQã‚’å†…éƒ¨ã§åˆ—æŒ™ã—ã€ã™ã¹ã¦ã®ã‚­ãƒ¥ãƒ¼ã‚’ç›£è¦–ã—ã¦ãƒ‡ãƒ¼ã‚¿ã‚’é€ä¿¡ã™ã‚‹æ–¹æ³•ã‚’ç¤ºã—ã¦ãã ã•ã„ï¼ˆã“ã‚Œã‚’è¡Œã†æ–¹æ³•ã‚’çŸ¥ã£ã¦ã„ã‚‹å ´åˆã¯PRã‚’é€ä¿¡ã—ã¦ãã ã•ã„ï¼‰
{% endhint %}

## Privesc

{% content-ref url="../aws-privilege-escalation/aws-mq-privesc.md" %}
[aws-mq-privesc.md](../aws-privilege-escalation/aws-mq-privesc.md)
{% endcontent-ref %}

## èªè¨¼ãªã—ã‚¢ã‚¯ã‚»ã‚¹

{% content-ref url="../aws-unauthenticated-enum-access/aws-mq-unauthenticated-enum.md" %}
[aws-mq-unauthenticated-enum.md](../aws-unauthenticated-enum-access/aws-mq-unauthenticated-enum.md)
{% endcontent-ref %}

## æ°¸ç¶šæ€§

RabbitMQã®Webã‚³ãƒ³ã‚½ãƒ¼ãƒ«ã«ã‚¢ã‚¯ã‚»ã‚¹ã™ã‚‹è³‡æ ¼æƒ…å ±ã‚’çŸ¥ã£ã¦ã„ã‚‹å ´åˆã€ç®¡ç†è€…æ¨©é™ã‚’æŒã¤æ–°ã—ã„ãƒ¦ãƒ¼ã‚¶ãƒ¼ã‚’ä½œæˆã§ãã¾ã™ã€‚

## å‚è€ƒæ–‡çŒ®

* [https://www.cloudamqp.com/blog/part1-rabbitmq-for-beginners-what-is-rabbitmq.html](https://www.cloudamqp.com/blog/part1-rabbitmq-for-beginners-what-is-rabbitmq.html)
* [https://activemq.apache.org/](https://activemq.apache.org/)

{% hint style="success" %}
AWSãƒãƒƒã‚­ãƒ³ã‚°ã‚’å­¦ã³ã€å®Ÿè·µã™ã‚‹ï¼š<img src="/.gitbook/assets/image.png" alt="" data-size="line">[**HackTricks Training AWS Red Team Expert (ARTE)**](https://training.hacktricks.xyz/courses/arte)<img src="/.gitbook/assets/image.png" alt="" data-size="line">\
GCPãƒãƒƒã‚­ãƒ³ã‚°ã‚’å­¦ã³ã€å®Ÿè·µã™ã‚‹ï¼š<img src="/.gitbook/assets/image (2).png" alt="" data-size="line">[**HackTricks Training GCP Red Team Expert (GRTE)**<img src="/.gitbook/assets/image (2).png" alt="" data-size="line">](https://training.hacktricks.xyz/courses/grte)

<details>

<summary>HackTricksã®ã‚µãƒãƒ¼ãƒˆ</summary>

* [**ã‚µãƒ–ã‚¹ã‚¯ãƒªãƒ—ã‚·ãƒ§ãƒ³ãƒ—ãƒ©ãƒ³**](https://github.com/sponsors/carlospolop)ã‚’ãƒã‚§ãƒƒã‚¯ï¼
* ğŸ’¬ [**Discordã‚°ãƒ«ãƒ¼ãƒ—**](https://discord.gg/hRep4RUj7f)ã«å‚åŠ ã™ã‚‹ã‹ã€[**telegramã‚°ãƒ«ãƒ¼ãƒ—**](https://t.me/peass)ã«å‚åŠ ã™ã‚‹ã‹ã€**Twitter** ğŸ¦ [**@hacktricks\_live**](https://twitter.com/hacktricks\_live)**ã‚’ãƒ•ã‚©ãƒ­ãƒ¼**ã—ã¦ãã ã•ã„ã€‚
* **HackTricks**ã¨**HackTricks Cloud**ã®GitHubãƒªãƒã‚¸ãƒˆãƒªã«PRã‚’æå‡ºã—ã¦ã€ãƒãƒƒã‚­ãƒ³ã‚°ãƒˆãƒªãƒƒã‚¯ã‚’å…±æœ‰ã—ã¦ãã ã•ã„ã€‚

</details>
{% endhint %}
