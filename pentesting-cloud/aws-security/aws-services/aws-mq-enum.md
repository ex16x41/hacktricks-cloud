# AWS - MQ Enum

{% hint style="success" %}
Learn & practice AWS Hacking:<img src="../../../.gitbook/assets/image (1).png" alt="" data-size="line">[**HackTricks Training AWS Red Team Expert (ARTE)**](https://training.hacktricks.xyz/courses/arte)<img src="../../../.gitbook/assets/image (1).png" alt="" data-size="line">\
Learn & practice GCP Hacking: <img src="../../../.gitbook/assets/image (2).png" alt="" data-size="line">[**HackTricks Training GCP Red Team Expert (GRTE)**<img src="../../../.gitbook/assets/image (2).png" alt="" data-size="line">](https://training.hacktricks.xyz/courses/grte)

<details>

<summary>Support HackTricks</summary>

* Check the [**subscription plans**](https://github.com/sponsors/carlospolop)!
* **Join the** 游눫 [**Discord group**](https://discord.gg/hRep4RUj7f) or the [**telegram group**](https://t.me/peass) or **follow** us on **Twitter** 游냕 [**@hacktricks\_live**](https://twitter.com/hacktricks\_live)**.**
* **Share hacking tricks by submitting PRs to the** [**HackTricks**](https://github.com/carlospolop/hacktricks) and [**HackTricks Cloud**](https://github.com/carlospolop/hacktricks-cloud) github repos.

</details>
{% endhint %}

## Amazon MQ

### Introduction to Message Brokers

**Message brokers** slu쬰 kao posrednici, olak코avaju캖i komunikaciju izme캠u razli캜itih softverskih sistema, koji mogu biti izgra캠eni na razli캜itim platformama i programirani na razli캜itim jezicima. **Amazon MQ** pojednostavljuje implementaciju, rad i odr쬬vanje message brokera na AWS-u. Pru쬬 upravljane usluge za **Apache ActiveMQ** i **RabbitMQ**, osiguravaju캖i neometano snabdevanje i automatske nadogradnje verzija softvera.

### AWS - RabbitMQ

RabbitMQ je istaknuti **softver za redove poruka**, poznat i kao _message broker_ ili _manager reda_. U su코tini, to je sistem u kojem su redovi konfigurisani. Aplikacije komuniciraju sa ovim redovima da bi **slale i primale poruke**. Poruke u ovom kontekstu mogu nositi razne informacije, od komandi za pokretanje procesa na drugim aplikacijama (potencijalno na razli캜itim serverima) do jednostavnih tekstualnih poruka. Poruke dr쬴 softver za upravljanje redovima dok ih ne preuzme i obradi aplikacija koja prima. AWS pru쬬 jednostavno re코enje za hostovanje i upravljanje RabbitMQ serverima.

### AWS - ActiveMQ

Apache ActiveMQ춽 je vode캖i open-source, Java-bazirani **message broker** poznat po svojoj svestranosti. Podr쬬va vi코e industrijskih standardnih protokola, nude캖i 코iroku kompatibilnost klijenata kroz razne jezike i platforme. Korisnici mogu:

* Povezati se sa klijentima napisanim u JavaScript-u, C, C++, Python-u, .Net-u i drugim.
* Iskoristiti **AMQP** protokol za integraciju aplikacija sa razli캜itih platformi.
* Koristiti **STOMP** preko websockets za razmenu poruka u web aplikacijama.
* Upravljati IoT ure캠ajima sa **MQTT**.
* Odr쬬vati postoje캖u **JMS** infrastrukturu i pro코iriti njene mogu캖nosti.

Robusnost i fleksibilnost ActiveMQ-a 캜ine ga pogodnim za mno코tvo zahteva za razmenu poruka.

## Enumeration
```bash
# List brokers
aws mq list-brokers

# Get broker info
aws mq describe-broker --broker-id <broker-id>
## Find endpoints in .BrokerInstances
## Find if public accessible in .PubliclyAccessible

# List usernames (only for ActiveMQ)
aws mq list-users --broker-id <broker-id>

# Get user info (PASSWORD NOT INCLUDED)
aws mq describe-user --broker-id <broker-id> --username <username>

# Lits configurations (only for ActiveMQ)
aws mq list-configurations
## Here you can find if simple or LDAP authentication is used

# Creacte Active MQ user
aws mq create-user --broker-id <value> --password <value> --username <value> --console-access
```
{% hint style="warning" %}
TODO: Nazna캜ite kako da enumeri코ete RabbitMQ i ActiveMQ interno i kako da slu코ate u svim redovima i 코aljete podatke (po코aljite PR ako znate kako to da uradite)
{% endhint %}

## Privesc

{% content-ref url="../aws-privilege-escalation/aws-mq-privesc.md" %}
[aws-mq-privesc.md](../aws-privilege-escalation/aws-mq-privesc.md)
{% endcontent-ref %}

## Neautentifikovani pristup

{% content-ref url="../aws-unauthenticated-enum-access/aws-mq-unauthenticated-enum.md" %}
[aws-mq-unauthenticated-enum.md](../aws-unauthenticated-enum-access/aws-mq-unauthenticated-enum.md)
{% endcontent-ref %}

## Postojanost

Ako znate akreditive za pristup RabbitMQ web konzoli, mo쬰te kreirati novog korisnika sa administratorskim privilegijama.

## Reference

* [https://www.cloudamqp.com/blog/part1-rabbitmq-for-beginners-what-is-rabbitmq.html](https://www.cloudamqp.com/blog/part1-rabbitmq-for-beginners-what-is-rabbitmq.html)
* [https://activemq.apache.org/](https://activemq.apache.org/)

{% hint style="success" %}
U캜ite i ve쬭ajte AWS Hacking:<img src="../../../.gitbook/assets/image (1).png" alt="" data-size="line">[**HackTricks Training AWS Red Team Expert (ARTE)**](https://training.hacktricks.xyz/courses/arte)<img src="../../../.gitbook/assets/image (1).png" alt="" data-size="line">\
U캜ite i ve쬭ajte GCP Hacking: <img src="../../../.gitbook/assets/image (2).png" alt="" data-size="line">[**HackTricks Training GCP Red Team Expert (GRTE)**<img src="../../../.gitbook/assets/image (2).png" alt="" data-size="line">](https://training.hacktricks.xyz/courses/grte)

<details>

<summary>Podr쬴te HackTricks</summary>

* Proverite [**planove pretplate**](https://github.com/sponsors/carlospolop)!
* **Pridru쬴te se** 游눫 [**Discord grupi**](https://discord.gg/hRep4RUj7f) ili [**telegram grupi**](https://t.me/peass) ili **pratite** nas na **Twitteru** 游냕 [**@hacktricks\_live**](https://twitter.com/hacktricks\_live)**.**
* **Podelite hakerske trikove slanjem PR-ova na** [**HackTricks**](https://github.com/carlospolop/hacktricks) i [**HackTricks Cloud**](https://github.com/carlospolop/hacktricks-cloud) github repozitorijume.

</details>
{% endhint %}
