# AWS - MQ Enum

{% hint style="success" %}
Learn & practice AWS Hacking:<img src="../../../.gitbook/assets/image (1).png" alt="" data-size="line">[**HackTricks Training AWS Red Team Expert (ARTE)**](https://training.hacktricks.xyz/courses/arte)<img src="../../../.gitbook/assets/image (1).png" alt="" data-size="line">\
Learn & practice GCP Hacking: <img src="../../../.gitbook/assets/image (2).png" alt="" data-size="line">[**HackTricks Training GCP Red Team Expert (GRTE)**<img src="../../../.gitbook/assets/image (2).png" alt="" data-size="line">](https://training.hacktricks.xyz/courses/grte)

<details>

<summary>Support HackTricks</summary>

* Check the [**subscription plans**](https://github.com/sponsors/carlospolop)!
* **Join the** ğŸ’¬ [**Discord group**](https://discord.gg/hRep4RUj7f) or the [**telegram group**](https://t.me/peass) or **follow** us on **Twitter** ğŸ¦ [**@hacktricks\_live**](https://twitter.com/hacktricks\_live)**.**
* **Share hacking tricks by submitting PRs to the** [**HackTricks**](https://github.com/carlospolop/hacktricks) and [**HackTricks Cloud**](https://github.com/carlospolop/hacktricks-cloud) github repos.

</details>
{% endhint %}

## Amazon MQ

### Introduction to Message Brokers

**ë©”ì‹œì§€ ë¸Œë¡œì»¤**ëŠ” ì„œë¡œ ë‹¤ë¥¸ ì†Œí”„íŠ¸ì›¨ì–´ ì‹œìŠ¤í…œ ê°„ì˜ í†µì‹ ì„ ì´‰ì§„í•˜ëŠ” ì¤‘ê°œì ì—­í• ì„ í•©ë‹ˆë‹¤. ì´ëŸ¬í•œ ì‹œìŠ¤í…œì€ ë‹¤ì–‘í•œ í”Œë«í¼ì—ì„œ êµ¬ì¶•ë˜ê³  ì„œë¡œ ë‹¤ë¥¸ ì–¸ì–´ë¡œ í”„ë¡œê·¸ë˜ë°ë  ìˆ˜ ìˆìŠµë‹ˆë‹¤. **Amazon MQ**ëŠ” AWSì—ì„œ ë©”ì‹œì§€ ë¸Œë¡œì»¤ì˜ ë°°í¬, ìš´ì˜ ë° ìœ ì§€ ê´€ë¦¬ë¥¼ ê°„ì†Œí™”í•©ë‹ˆë‹¤. **Apache ActiveMQ** ë° **RabbitMQ**ì— ëŒ€í•œ ê´€ë¦¬í˜• ì„œë¹„ìŠ¤ë¥¼ ì œê³µí•˜ì—¬ ì›í™œí•œ í”„ë¡œë¹„ì €ë‹ê³¼ ìë™ ì†Œí”„íŠ¸ì›¨ì–´ ë²„ì „ ì—…ë°ì´íŠ¸ë¥¼ ë³´ì¥í•©ë‹ˆë‹¤.

### AWS - RabbitMQ

RabbitMQëŠ” ì €ëª…í•œ **ë©”ì‹œì§€ íì‰ ì†Œí”„íŠ¸ì›¨ì–´**ë¡œ, _ë©”ì‹œì§€ ë¸Œë¡œì»¤_ ë˜ëŠ” _í ê´€ë¦¬ì_ë¡œë„ ì•Œë ¤ì ¸ ìˆìŠµë‹ˆë‹¤. ë³¸ì§ˆì ìœ¼ë¡œ íê°€ êµ¬ì„±ëœ ì‹œìŠ¤í…œì…ë‹ˆë‹¤. ì• í”Œë¦¬ì¼€ì´ì…˜ì€ ì´ëŸ¬í•œ íì™€ ì¸í„°í˜ì´ìŠ¤í•˜ì—¬ **ë©”ì‹œì§€ë¥¼ ì „ì†¡í•˜ê³  ìˆ˜ì‹ **í•©ë‹ˆë‹¤. ì´ ë§¥ë½ì—ì„œ ë©”ì‹œì§€ëŠ” ë‹¤ë¥¸ ì• í”Œë¦¬ì¼€ì´ì…˜(ì ì¬ì ìœ¼ë¡œ ë‹¤ë¥¸ ì„œë²„ì—ì„œ)ì˜ í”„ë¡œì„¸ìŠ¤ë¥¼ ì‹œì‘í•˜ëŠ” ëª…ë ¹ì—ì„œ ê°„ë‹¨í•œ í…ìŠ¤íŠ¸ ë©”ì‹œì§€ì— ì´ë¥´ê¸°ê¹Œì§€ ë‹¤ì–‘í•œ ì •ë³´ë¥¼ ë‹´ì„ ìˆ˜ ìˆìŠµë‹ˆë‹¤. ë©”ì‹œì§€ëŠ” ìˆ˜ì‹  ì• í”Œë¦¬ì¼€ì´ì…˜ì— ì˜í•´ ê²€ìƒ‰ë˜ê³  ì²˜ë¦¬ë  ë•Œê¹Œì§€ í ê´€ë¦¬ì ì†Œí”„íŠ¸ì›¨ì–´ì— ì˜í•´ ë³´ê´€ë©ë‹ˆë‹¤. AWSëŠ” RabbitMQ ì„œë²„ë¥¼ í˜¸ìŠ¤íŒ…í•˜ê³  ê´€ë¦¬í•˜ê¸° ìœ„í•œ ì‚¬ìš©í•˜ê¸° ì‰¬ìš´ ì†”ë£¨ì…˜ì„ ì œê³µí•©ë‹ˆë‹¤.

### AWS - ActiveMQ

Apache ActiveMQÂ®ëŠ” ë‹¤ì¬ë‹¤ëŠ¥í•¨ìœ¼ë¡œ ì˜ ì•Œë ¤ì§„ ì„ ë„ì ì¸ ì˜¤í”ˆ ì†ŒìŠ¤ Java ê¸°ë°˜ **ë©”ì‹œì§€ ë¸Œë¡œì»¤**ì…ë‹ˆë‹¤. ì—¬ëŸ¬ ì‚°ì—… í‘œì¤€ í”„ë¡œí† ì½œì„ ì§€ì›í•˜ì—¬ ë‹¤ì–‘í•œ ì–¸ì–´ì™€ í”Œë«í¼ì—ì„œ ê´‘ë²”ìœ„í•œ í´ë¼ì´ì–¸íŠ¸ í˜¸í™˜ì„±ì„ ì œê³µí•©ë‹ˆë‹¤. ì‚¬ìš©ìëŠ”:

* JavaScript, C, C++, Python, .Net ë“±ìœ¼ë¡œ ì‘ì„±ëœ í´ë¼ì´ì–¸íŠ¸ì™€ ì—°ê²°í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.
* **AMQP** í”„ë¡œí† ì½œì„ í™œìš©í•˜ì—¬ ì„œë¡œ ë‹¤ë¥¸ í”Œë«í¼ì˜ ì• í”Œë¦¬ì¼€ì´ì…˜ì„ í†µí•©í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.
* ì›¹ ì• í”Œë¦¬ì¼€ì´ì…˜ ë©”ì‹œì§€ êµí™˜ì„ ìœ„í•´ ì›¹ì†Œì¼“ì„ í†µí•œ **STOMP**ë¥¼ ì‚¬ìš©í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.
* **MQTT**ë¡œ IoT ì¥ì¹˜ë¥¼ ê´€ë¦¬í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.
* ê¸°ì¡´ **JMS** ì¸í”„ë¼ë¥¼ ìœ ì§€í•˜ê³  ê·¸ ê¸°ëŠ¥ì„ í™•ì¥í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.

ActiveMQì˜ ê°•ë ¥í•¨ê³¼ ìœ ì—°ì„±ì€ ë‹¤ì–‘í•œ ë©”ì‹œì§• ìš”êµ¬ ì‚¬í•­ì— ì í•©í•˜ê²Œ ë§Œë“­ë‹ˆë‹¤.

## Enumeration
```bash
# List brokers
aws mq list-brokers

# Get broker info
aws mq describe-broker --broker-id <broker-id>
## Find endpoints in .BrokerInstances
## Find if public accessible in .PubliclyAccessible

# List usernames (only for ActiveMQ)
aws mq list-users --broker-id <broker-id>

# Get user info (PASSWORD NOT INCLUDED)
aws mq describe-user --broker-id <broker-id> --username <username>

# Lits configurations (only for ActiveMQ)
aws mq list-configurations
## Here you can find if simple or LDAP authentication is used

# Creacte Active MQ user
aws mq create-user --broker-id <value> --password <value> --username <value> --console-access
```
{% hint style="warning" %}
TODO: RabbitMQì™€ ActiveMQë¥¼ ë‚´ë¶€ì ìœ¼ë¡œ ì—´ê±°í•˜ëŠ” ë°©ë²•ê³¼ ëª¨ë“  íì—ì„œ ìˆ˜ì‹ í•˜ê³  ë°ì´í„°ë¥¼ ì „ì†¡í•˜ëŠ” ë°©ë²•ì„ í‘œì‹œí•˜ì‹­ì‹œì˜¤ (ë°©ë²•ì„ ì•„ëŠ” ê²½ìš° PRì„ ë³´ë‚´ì‹­ì‹œì˜¤)
{% endhint %}

## Privesc

{% content-ref url="../aws-privilege-escalation/aws-mq-privesc.md" %}
[aws-mq-privesc.md](../aws-privilege-escalation/aws-mq-privesc.md)
{% endcontent-ref %}

## ì¸ì¦ë˜ì§€ ì•Šì€ ì ‘ê·¼

{% content-ref url="../aws-unauthenticated-enum-access/aws-mq-unauthenticated-enum.md" %}
[aws-mq-unauthenticated-enum.md](../aws-unauthenticated-enum-access/aws-mq-unauthenticated-enum.md)
{% endcontent-ref %}

## ì§€ì†ì„±

RabbitMQ ì›¹ ì½˜ì†”ì— ì ‘ê·¼í•  ìˆ˜ ìˆëŠ” ìê²© ì¦ëª…ì„ ì•Œê³  ìˆë‹¤ë©´, ê´€ë¦¬ì ê¶Œí•œì„ ê°€ì§„ ìƒˆë¡œìš´ ì‚¬ìš©ìë¥¼ ìƒì„±í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.

## ì°¸ê³ ìë£Œ

* [https://www.cloudamqp.com/blog/part1-rabbitmq-for-beginners-what-is-rabbitmq.html](https://www.cloudamqp.com/blog/part1-rabbitmq-for-beginners-what-is-rabbitmq.html)
* [https://activemq.apache.org/](https://activemq.apache.org/)

{% hint style="success" %}
AWS í•´í‚¹ ë°°ìš°ê¸° ë° ì—°ìŠµí•˜ê¸°:<img src="../../../.gitbook/assets/image (1).png" alt="" data-size="line">[**HackTricks Training AWS Red Team Expert (ARTE)**](https://training.hacktricks.xyz/courses/arte)<img src="../../../.gitbook/assets/image (1).png" alt="" data-size="line">\
GCP í•´í‚¹ ë°°ìš°ê¸° ë° ì—°ìŠµí•˜ê¸°: <img src="../../../.gitbook/assets/image (2).png" alt="" data-size="line">[**HackTricks Training GCP Red Team Expert (GRTE)**<img src="../../../.gitbook/assets/image (2).png" alt="" data-size="line">](https://training.hacktricks.xyz/courses/grte)

<details>

<summary>HackTricks ì§€ì›í•˜ê¸°</summary>

* [**êµ¬ë… ê³„íš**](https://github.com/sponsors/carlospolop) í™•ì¸í•˜ê¸°!
* **ğŸ’¬ [**Discord ê·¸ë£¹**](https://discord.gg/hRep4RUj7f) ë˜ëŠ” [**í…”ë ˆê·¸ë¨ ê·¸ë£¹**](https://t.me/peass)ì— ì°¸ì—¬í•˜ê±°ë‚˜ **Twitter** ğŸ¦ [**@hacktricks\_live**](https://twitter.com/hacktricks\_live)**ë¥¼ íŒ”ë¡œìš°í•˜ì„¸ìš”.**
* **[**HackTricks**](https://github.com/carlospolop/hacktricks) ë° [**HackTricks Cloud**](https://github.com/carlospolop/hacktricks-cloud) ê¹ƒí—ˆë¸Œ ë¦¬í¬ì§€í† ë¦¬ì— PRì„ ì œì¶œí•˜ì—¬ í•´í‚¹ íŒì„ ê³µìœ í•˜ì„¸ìš”.**

</details>
{% endhint %}
