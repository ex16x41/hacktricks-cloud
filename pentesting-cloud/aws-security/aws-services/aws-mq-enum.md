# AWS - MQ Enum

{% hint style="success" %}
Lernen & √ºben Sie AWS Hacking:<img src="../../../.gitbook/assets/image (1) (1).png" alt="" data-size="line">[**HackTricks Training AWS Red Team Expert (ARTE)**](https://training.hacktricks.xyz/courses/arte)<img src="../../../.gitbook/assets/image (1) (1).png" alt="" data-size="line">\
Lernen & √ºben Sie GCP Hacking: <img src="../../../.gitbook/assets/image (2).png" alt="" data-size="line">[**HackTricks Training GCP Red Team Expert (GRTE)**<img src="../../../.gitbook/assets/image (2).png" alt="" data-size="line">](https://training.hacktricks.xyz/courses/grte)

<details>

<summary>Support HackTricks</summary>

* √úberpr√ºfen Sie die [**Abonnementpl√§ne**](https://github.com/sponsors/carlospolop)!
* **Treten Sie der** üí¨ [**Discord-Gruppe**](https://discord.gg/hRep4RUj7f) oder der [**Telegram-Gruppe**](https://t.me/peass) bei oder **folgen** Sie uns auf **Twitter** üê¶ [**@hacktricks\_live**](https://twitter.com/hacktricks\_live)**.**
* **Teilen Sie Hacking-Tricks, indem Sie PRs an die** [**HackTricks**](https://github.com/carlospolop/hacktricks) und [**HackTricks Cloud**](https://github.com/carlospolop/hacktricks-cloud) GitHub-Repos senden.

</details>
{% endhint %}

## Amazon MQ

### Einf√ºhrung in Message Broker

**Message Broker** fungieren als Vermittler und erleichtern die Kommunikation zwischen verschiedenen Softwaresystemen, die auf unterschiedlichen Plattformen basieren und in verschiedenen Sprachen programmiert sein k√∂nnen. **Amazon MQ** vereinfacht die Bereitstellung, den Betrieb und die Wartung von Message Brokern auf AWS. Es bietet verwaltete Dienste f√ºr **Apache ActiveMQ** und **RabbitMQ** und sorgt f√ºr nahtlose Bereitstellung und automatische Softwareversionsupdates.

### AWS - RabbitMQ

RabbitMQ ist eine prominente **Message-Queueing-Software**, auch bekannt als _Message Broker_ oder _Queue Manager_. Es ist grunds√§tzlich ein System, in dem Warteschlangen konfiguriert sind. Anwendungen interagieren mit diesen Warteschlangen, um **Nachrichten zu senden und zu empfangen**. Nachrichten k√∂nnen in diesem Kontext eine Vielzahl von Informationen tragen, von Befehlen zur Initiierung von Prozessen in anderen Anwendungen (m√∂glicherweise auf anderen Servern) bis hin zu einfachen Textnachrichten. Die Nachrichten werden von der Queue-Manager-Software gehalten, bis sie von einer empfangenden Anwendung abgerufen und verarbeitet werden. AWS bietet eine benutzerfreundliche L√∂sung zum Hosten und Verwalten von RabbitMQ-Servern.

### AWS - ActiveMQ

Apache ActiveMQ¬Æ ist ein f√ºhrender Open-Source, Java-basierter **Message Broker**, der f√ºr seine Vielseitigkeit bekannt ist. Er unterst√ºtzt mehrere branchen√ºbliche Protokolle und bietet umfassende Client-Kompatibilit√§t √ºber eine Vielzahl von Sprachen und Plattformen. Benutzer k√∂nnen:

* Mit Clients verbinden, die in JavaScript, C, C++, Python, .Net und mehr geschrieben sind.
* Das **AMQP**-Protokoll nutzen, um Anwendungen von verschiedenen Plattformen zu integrieren.
* **STOMP** √ºber Websockets f√ºr den Nachrichtenaustausch in Webanwendungen verwenden.
* IoT-Ger√§te mit **MQTT** verwalten.
* Bestehende **JMS**-Infrastruktur beibehalten und deren F√§higkeiten erweitern.

Die Robustheit und Flexibilit√§t von ActiveMQ machen es geeignet f√ºr eine Vielzahl von Messaging-Anforderungen.

## Enumeration
```bash
# List brokers
aws mq list-brokers

# Get broker info
aws mq describe-broker --broker-id <broker-id>
## Find endpoints in .BrokerInstances
## Find if public accessible in .PubliclyAccessible

# List usernames (only for ActiveMQ)
aws mq list-users --broker-id <broker-id>

# Get user info (PASSWORD NOT INCLUDED)
aws mq describe-user --broker-id <broker-id> --username <username>

# Lits configurations (only for ActiveMQ)
aws mq list-configurations
## Here you can find if simple or LDAP authentication is used

# Creacte Active MQ user
aws mq create-user --broker-id <value> --password <value> --username <value> --console-access
```
{% hint style="warning" %}
TODO: Geben Sie an, wie man RabbitMQ und ActiveMQ intern enumeriert und wie man in allen Warteschlangen mith√∂rt und Daten sendet (senden Sie einen PR, wenn Sie wissen, wie man das macht)
{% endhint %}

## Privesc

{% content-ref url="../aws-privilege-escalation/aws-mq-privesc.md" %}
[aws-mq-privesc.md](../aws-privilege-escalation/aws-mq-privesc.md)
{% endcontent-ref %}

## Unauthenticated Access

{% content-ref url="../aws-unauthenticated-enum-access/aws-mq-unauthenticated-enum.md" %}
[aws-mq-unauthenticated-enum.md](../aws-unauthenticated-enum-access/aws-mq-unauthenticated-enum.md)
{% endcontent-ref %}

## Persistence

Wenn Sie die Anmeldeinformationen zum Zugriff auf die RabbitMQ-Webkonsole kennen, k√∂nnen Sie einen neuen Benutzer mit Administratorrechten erstellen.

## References

* [https://www.cloudamqp.com/blog/part1-rabbitmq-for-beginners-what-is-rabbitmq.html](https://www.cloudamqp.com/blog/part1-rabbitmq-for-beginners-what-is-rabbitmq.html)
* [https://activemq.apache.org/](https://activemq.apache.org/)

{% hint style="success" %}
Lernen & √ºben Sie AWS Hacking:<img src="../../../.gitbook/assets/image (1) (1).png" alt="" data-size="line">[**HackTricks Training AWS Red Team Expert (ARTE)**](https://training.hacktricks.xyz/courses/arte)<img src="../../../.gitbook/assets/image (1) (1).png" alt="" data-size="line">\
Lernen & √ºben Sie GCP Hacking: <img src="../../../.gitbook/assets/image (2).png" alt="" data-size="line">[**HackTricks Training GCP Red Team Expert (GRTE)**<img src="../../../.gitbook/assets/image (2).png" alt="" data-size="line">](https://training.hacktricks.xyz/courses/grte)

<details>

<summary>Support HackTricks</summary>

* √úberpr√ºfen Sie die [**Abonnementpl√§ne**](https://github.com/sponsors/carlospolop)!
* **Treten Sie der** üí¨ [**Discord-Gruppe**](https://discord.gg/hRep4RUj7f) oder der [**Telegram-Gruppe**](https://t.me/peass) bei oder **folgen** Sie uns auf **Twitter** üê¶ [**@hacktricks\_live**](https://twitter.com/hacktricks\_live)**.**
* **Teilen Sie Hacking-Tricks, indem Sie PRs an die** [**HackTricks**](https://github.com/carlospolop/hacktricks) und [**HackTricks Cloud**](https://github.com/carlospolop/hacktricks-cloud) GitHub-Repos senden.

</details>
{% endhint %}
