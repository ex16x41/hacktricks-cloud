# AWS - EventBridge Scheduler Enum

## EventBridge Scheduler

{% hint style="success" %}
Learn & practice AWS Hacking:<img src="../../../.gitbook/assets/image (1).png" alt="" data-size="line">[**HackTricks Training AWS Red Team Expert (ARTE)**](https://training.hacktricks.xyz/courses/arte)<img src="../../../.gitbook/assets/image (1).png" alt="" data-size="line">\
Learn & practice GCP Hacking: <img src="../../../.gitbook/assets/image (2).png" alt="" data-size="line">[**HackTricks Training GCP Red Team Expert (GRTE)**<img src="../../../.gitbook/assets/image (2).png" alt="" data-size="line">](https://training.hacktricks.xyz/courses/grte)

<details>

<summary>Support HackTricks</summary>

* Check the [**subscription plans**](https://github.com/sponsors/carlospolop)!
* **Join the** 💬 [**Discord group**](https://discord.gg/hRep4RUj7f) or the [**telegram group**](https://t.me/peass) or **follow** us on **Twitter** 🐦 [**@hacktricks\_live**](https://twitter.com/hacktricks\_live)**.**
* **Share hacking tricks by submitting PRs to the** [**HackTricks**](https://github.com/carlospolop/hacktricks) and [**HackTricks Cloud**](https://github.com/carlospolop/hacktricks-cloud) github repos.

</details>
{% endhint %}

## EventBridge Scheduler

**Amazon EventBridge Scheduler** は、タスクをスケールで作成、実行、管理するために設計された完全に管理された**サーバーレススケジューラー**です。これにより、270以上のAWSサービスと6,000以上のAPI操作にわたって数百万のタスクをスケジュールできます。すべては中央サービスから行えます。組み込みの信頼性と管理するインフラストラクチャがないため、EventBridge Schedulerはスケジューリングを簡素化し、メンテナンスコストを削減し、需要に応じて自動的にスケールします。定期的なスケジュールのためにcronまたはレート式を設定し、一度限りの呼び出しを設定し、リトライオプションを持つ柔軟な配信ウィンドウを定義することで、下流ターゲットの可用性に基づいてタスクが確実に配信されるようにします。EventBridge Schedulerの主な機能は以下の通りです：

1. **テンプレート化されたターゲット** – Amazon SQS、SNS、Lambda、EventBridgeの一般的なAPI操作をサポートし、コンソール、SDK、CLIを使用してスケジュールを迅速に設定できます。
2. **ユニバーサルターゲット (UTP)** – コンソール、SDK、CLIを通じて270以上のAWSサービスと6,000以上のAPI操作のためにカスタマイズされたトリガーを作成します。
3. **柔軟な時間ウィンドウ** – 正確なタイミングが必要ない場合に、信頼性を向上させるための分散スケジューリングを可能にします。
4. **リトライ** – 失敗したタスクをリトライするオプションを持つ、少なくとも1回の配信を提供し、ターゲットの可用性を確保します。

地域ごとにアカウントあたり1,000,000スケジュールの初期制限があります。公式のクォーターページでも「完了した一度限りのスケジュールは削除することをお勧めします」と示唆しています。残念ながら、現在自動削除の機能はなく、これは少しの欠点です。

### スケジュールの種類
EventBridge Schedulerのスケジュールの種類：

1. **一度限りのスケジュール** – 特定の時間にタスクを実行します。例：12月21日午前7時UTC。
2. **レートベースのスケジュール** – 周期的なタスクを頻度に基づいて設定します。例：2時間ごと。
3. **Cronベースのスケジュール** – cron式を使用して周期的なタスクを設定します。例：毎週金曜日午後4時。

失敗したイベントを処理するための2つのメカニズム：
1. **リトライポリシー** – 失敗したイベントのリトライ試行回数と、失敗と見なす前に未処理のまま保持する時間を定義します。
2. **デッドレターキュー (DLQ)** – リトライが尽きた後に失敗したイベントが配信される標準のAmazon SQSキュー。DLQは、スケジュールやその下流ターゲットの問題をトラブルシューティングするのに役立ちます。

### Enumeration
```bash
# List all EventBridge Scheduler schedules
aws scheduler list-schedules

# List all EventBridge Scheduler schedule groups
aws scheduler list-schedule-groups

# Describe a specific schedule to retrieve more details
aws scheduler get-schedule --name <schedule_name>

# Describe a specific schedule group
aws scheduler get-schedule-group --name <group_name>

# List tags for a specific schedule (helpful in identifying any custom tags or permissions)
aws scheduler list-tags-for-resource --resource-arn <schedule_group_arn>
```
### Privesc

次のページでは、**eventbridge schedulerの権限を悪用して特権を昇格させる方法**を確認できます：

{% content-ref url="../aws-privilege-escalation/eventbridgescheduler-privesc.md" %}
[eventbridgescheduler-privesc.md](../aws-privilege-escalation/eventbridgescheduler-privesc.md)
{% endcontent-ref %}


## References

* [https://docs.aws.amazon.com/scheduler/latest/UserGuide/what-is-scheduler.html]https://docs.aws.amazon.com/scheduler/latest/UserGuide/what-is-scheduler.html)

{% hint style="success" %}
AWSハッキングを学び、実践する：<img src="../../../.gitbook/assets/image (1).png" alt="" data-size="line">[**HackTricks Training AWS Red Team Expert (ARTE)**](https://training.hacktricks.xyz/courses/arte)<img src="../../../.gitbook/assets/image (1).png" alt="" data-size="line">\
GCPハッキングを学び、実践する：<img src="../../../.gitbook/assets/image (2).png" alt="" data-size="line">[**HackTricks Training GCP Red Team Expert (GRTE)**<img src="../../../.gitbook/assets/image (2).png" alt="" data-size="line">](https://training.hacktricks.xyz/courses/grte)

<details>

<summary>HackTricksをサポートする</summary>

* [**サブスクリプションプラン**](https://github.com/sponsors/carlospolop)を確認してください！
* **💬 [**Discordグループ**](https://discord.gg/hRep4RUj7f)または[**Telegramグループ**](https://t.me/peass)に参加するか、**Twitter** 🐦 [**@hacktricks\_live**](https://twitter.com/hacktricks\_live)**をフォローしてください。**
* **[**HackTricks**](https://github.com/carlospolop/hacktricks)および[**HackTricks Cloud**](https://github.com/carlospolop/hacktricks-cloud)のGitHubリポジトリにPRを提出してハッキングトリックを共有してください。**

</details>
{% endhint %}
