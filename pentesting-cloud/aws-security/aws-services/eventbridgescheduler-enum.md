# AWS - EventBridge Scheduler Enum

## EventBridge Scheduler

{% hint style="success" %}
Impara e pratica Hacking AWS:<img src="../../../.gitbook/assets/image (1) (1).png" alt="" data-size="line">[**HackTricks Training AWS Red Team Expert (ARTE)**](https://training.hacktricks.xyz/courses/arte)<img src="../../../.gitbook/assets/image (1) (1).png" alt="" data-size="line">\
Impara e pratica Hacking GCP: <img src="../../../.gitbook/assets/image (2).png" alt="" data-size="line">[**HackTricks Training GCP Red Team Expert (GRTE)**<img src="../../../.gitbook/assets/image (2).png" alt="" data-size="line">](https://training.hacktricks.xyz/courses/grte)

<details>

<summary>Supporta HackTricks</summary>

* Controlla i [**piani di abbonamento**](https://github.com/sponsors/carlospolop)!
* **Unisciti al** üí¨ [**gruppo Discord**](https://discord.gg/hRep4RUj7f) o al [**gruppo telegram**](https://t.me/peass) o **seguici** su **Twitter** üê¶ [**@hacktricks\_live**](https://twitter.com/hacktricks\_live)**.**
* **Condividi trucchi di hacking inviando PR ai** [**HackTricks**](https://github.com/carlospolop/hacktricks) e [**HackTricks Cloud**](https://github.com/carlospolop/hacktricks-cloud) repos di github.

</details>
{% endhint %}

## EventBridge Scheduler

**Amazon EventBridge Scheduler** √® un scheduler completamente gestito e **serverless progettato per creare, eseguire e gestire attivit√†** su larga scala. Ti consente di pianificare milioni di attivit√† su oltre 270 servizi AWS e oltre 6.000 operazioni API, tutto da un servizio centrale. Con affidabilit√† integrata e senza infrastruttura da gestire, EventBridge Scheduler semplifica la pianificazione, riduce i costi di manutenzione e si scala automaticamente per soddisfare la domanda. Puoi configurare espressioni cron o di frequenza per pianificazioni ricorrenti, impostare invocazioni una tantum e definire finestre di consegna flessibili con opzioni di ripetizione, garantendo che le attivit√† vengano consegnate in modo affidabile in base alla disponibilit√† degli obiettivi downstream.

C'√® un limite iniziale di 1.000.000 di pianificazioni per regione per account. Anche la pagina ufficiale delle quote suggerisce: "Si raccomanda di eliminare le pianificazioni una tantum una volta completate."&#x20;

### Tipi di Pianificazioni

Tipi di Pianificazioni in EventBridge Scheduler:

1. **Pianificazioni una tantum** ‚Äì Esegui un'attivit√† a un orario specifico, ad esempio, 21 dicembre alle 7 AM UTC.
2. **Pianificazioni basate su frequenza** ‚Äì Imposta attivit√† ricorrenti in base a una frequenza, ad esempio, ogni 2 ore.
3. **Pianificazioni basate su cron** ‚Äì Imposta attivit√† ricorrenti utilizzando un'espressione cron, ad esempio, ogni venerd√¨ alle 4 PM.

Due meccanismi per gestire eventi non riusciti:

1. **Politica di Ripetizione** ‚Äì Definisce il numero di tentativi di ripetizione per un evento non riuscito e per quanto tempo mantenerlo non elaborato prima di considerarlo un fallimento.
2. **Coda di Messaggi Non Elaborati (DLQ)** ‚Äì Una coda standard Amazon SQS dove gli eventi non riusciti vengono consegnati dopo che i tentativi di ripetizione sono esauriti. Le DLQ aiutano nella risoluzione dei problemi con la tua pianificazione o il suo obiettivo downstream.

### Obiettivi

Ci sono 2 tipi di obiettivi per uno scheduler [**templated (docs)**](https://docs.aws.amazon.com/scheduler/latest/UserGuide/managing-targets-templated.html), che sono comunemente usati e AWS li ha resi pi√π facili da configurare, e [**universali (docs)**](https://docs.aws.amazon.com/scheduler/latest/UserGuide/managing-targets-universal.html), che possono essere utilizzati per chiamare qualsiasi API AWS.

**Obiettivi templated** supportano i seguenti servizi:

* CodeBuild ‚Äì StartBuild
* CodePipeline ‚Äì StartPipelineExecution
* Amazon ECS ‚Äì RunTask
* Parametri: EcsParameters
* EventBridge ‚Äì PutEvents
* Parametri: EventBridgeParameters
* Amazon Inspector ‚Äì StartAssessmentRun
* Kinesis ‚Äì PutRecord
* Parametri: KinesisParameters
* Firehose ‚Äì PutRecord
* Lambda ‚Äì Invoke
* SageMaker ‚Äì StartPipelineExecution
* Parametri: SageMakerPipelineParameters
* Amazon SNS ‚Äì Publish
* Amazon SQS ‚Äì SendMessage
* Parametri: SqsParameters
* Step Functions ‚Äì StartExecution

### Enumerazione
```bash
# List all EventBridge Scheduler schedules
aws scheduler list-schedules

# List all EventBridge Scheduler schedule groups
aws scheduler list-schedule-groups

# Describe a specific schedule to retrieve more details
aws scheduler get-schedule --name <schedule_name>

# Describe a specific schedule group
aws scheduler get-schedule-group --name <group_name>

# List tags for a specific schedule (helpful in identifying any custom tags or permissions)
aws scheduler list-tags-for-resource --resource-arn <schedule_group_arn>
```
### Privesc

Nella pagina seguente, puoi controllare come **abuse eventbridge scheduler permissions to escalate privileges**:

{% content-ref url="../aws-privilege-escalation/eventbridgescheduler-privesc.md" %}
[eventbridgescheduler-privesc.md](../aws-privilege-escalation/eventbridgescheduler-privesc.md)
{% endcontent-ref %}

## Riferimenti

* [https://docs.aws.amazon.com/scheduler/latest/UserGuide/what-is-scheduler.html](https://docs.aws.amazon.com/scheduler/latest/UserGuide/what-is-scheduler.html)

{% hint style="success" %}
Impara e pratica AWS Hacking:<img src="../../../.gitbook/assets/image (1) (1).png" alt="" data-size="line">[**HackTricks Training AWS Red Team Expert (ARTE)**](https://training.hacktricks.xyz/courses/arte)<img src="../../../.gitbook/assets/image (1) (1).png" alt="" data-size="line">\
Impara e pratica GCP Hacking: <img src="../../../.gitbook/assets/image (2).png" alt="" data-size="line">[**HackTricks Training GCP Red Team Expert (GRTE)**<img src="../../../.gitbook/assets/image (2).png" alt="" data-size="line">](https://training.hacktricks.xyz/courses/grte)

<details>

<summary>Supporta HackTricks</summary>

* Controlla i [**piani di abbonamento**](https://github.com/sponsors/carlospolop)!
* **Unisciti al** üí¨ [**gruppo Discord**](https://discord.gg/hRep4RUj7f) o al [**gruppo telegram**](https://t.me/peass) o **seguici** su **Twitter** üê¶ [**@hacktricks\_live**](https://twitter.com/hacktricks\_live)**.**
* **Condividi trucchi di hacking inviando PR ai** [**HackTricks**](https://github.com/carlospolop/hacktricks) e [**HackTricks Cloud**](https://github.com/carlospolop/hacktricks-cloud) repos di github.

</details>
{% endhint %}
