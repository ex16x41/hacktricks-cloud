# AWS - EMR Enum

{% hint style="success" %}
Learn & practice AWS Hacking:<img src="/.gitbook/assets/image.png" alt="" data-size="line">[**HackTricks Training AWS Red Team Expert (ARTE)**](https://training.hacktricks.xyz/courses/arte)<img src="/.gitbook/assets/image.png" alt="" data-size="line">\
Learn & practice GCP Hacking: <img src="/.gitbook/assets/image (2).png" alt="" data-size="line">[**HackTricks Training GCP Red Team Expert (GRTE)**<img src="/.gitbook/assets/image (2).png" alt="" data-size="line">](https://training.hacktricks.xyz/courses/grte)

<details>

<summary>Support HackTricks</summary>

* Check the [**subscription plans**](https://github.com/sponsors/carlospolop)!
* **Join the** ğŸ’¬ [**Discord group**](https://discord.gg/hRep4RUj7f) or the [**telegram group**](https://t.me/peass) or **follow** us on **Twitter** ğŸ¦ [**@hacktricks\_live**](https://twitter.com/hacktricks\_live)**.**
* **Share hacking tricks by submitting PRs to the** [**HackTricks**](https://github.com/carlospolop/hacktricks) and [**HackTricks Cloud**](https://github.com/carlospolop/hacktricks-cloud) github repos.

</details>
{% endhint %}

## EMR

AWSì˜ Elastic MapReduce (EMR) ì„œë¹„ìŠ¤ëŠ” ë²„ì „ 4.8.0ë¶€í„° ë°ì´í„° ë³´í˜¸ë¥¼ ê°•í™”í•˜ëŠ” **ë³´ì•ˆ êµ¬ì„±** ê¸°ëŠ¥ì„ ë„ì…í•˜ì—¬ ì‚¬ìš©ìê°€ EMR í´ëŸ¬ìŠ¤í„° ë‚´ì—ì„œ ë°ì´í„°ì˜ ì €ì¥ ë° ì „ì†¡ ì‹œ ì•”í˜¸í™” ì„¤ì •ì„ ì§€ì •í•  ìˆ˜ ìˆê²Œ í–ˆìŠµë‹ˆë‹¤. EMR í´ëŸ¬ìŠ¤í„°ëŠ” Apache Hadoop ë° Sparkì™€ ê°™ì€ ë¹… ë°ì´í„° í”„ë ˆì„ì›Œí¬ë¥¼ ì²˜ë¦¬í•˜ë„ë¡ ì„¤ê³„ëœ í™•ì¥ ê°€ëŠ¥í•œ EC2 ì¸ìŠ¤í„´ìŠ¤ ê·¸ë£¹ì…ë‹ˆë‹¤.

ì£¼ìš” íŠ¹ì§•ì€ ë‹¤ìŒê³¼ ê°™ìŠµë‹ˆë‹¤:

* **í´ëŸ¬ìŠ¤í„° ì•”í˜¸í™” ê¸°ë³¸ê°’**: ê¸°ë³¸ì ìœ¼ë¡œ í´ëŸ¬ìŠ¤í„° ë‚´ì˜ ë°ì´í„°ëŠ” ì•”í˜¸í™”ë˜ì§€ ì•ŠìŠµë‹ˆë‹¤. ê·¸ëŸ¬ë‚˜ ì•”í˜¸í™”ë¥¼ í™œì„±í™”í•˜ë©´ ì—¬ëŸ¬ ê¸°ëŠ¥ì— ì•¡ì„¸ìŠ¤í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤:
* **Linux Unified Key Setup**: EBS í´ëŸ¬ìŠ¤í„° ë³¼ë¥¨ì„ ì•”í˜¸í™”í•©ë‹ˆë‹¤. ì‚¬ìš©ìëŠ” AWS Key Management Service (KMS) ë˜ëŠ” ì‚¬ìš©ì ì •ì˜ í‚¤ ì œê³µìë¥¼ ì„ íƒí•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.
* **ì˜¤í”ˆ ì†ŒìŠ¤ HDFS ì•”í˜¸í™”**: Hadoopì— ëŒ€í•´ ë‘ ê°€ì§€ ì•”í˜¸í™” ì˜µì…˜ì„ ì œê³µí•©ë‹ˆë‹¤:
* Secure Hadoop RPC (Remote Procedure Call), Simple Authentication Security Layerë¥¼ í™œìš©í•˜ì—¬ í”„ë¼ì´ë²„ì‹œë¡œ ì„¤ì •ë©ë‹ˆë‹¤.
* HDFS ë¸”ë¡ ì „ì†¡ ì•”í˜¸í™”, trueë¡œ ì„¤ì •ë˜ë©° AES-256 ì•Œê³ ë¦¬ì¦˜ì„ ì‚¬ìš©í•©ë‹ˆë‹¤.
* **ì „ì†¡ ì¤‘ ì•”í˜¸í™”**: ë°ì´í„° ì „ì†¡ ì¤‘ ë³´ì•ˆì„ ê°•í™”í•©ë‹ˆë‹¤. ì˜µì…˜ì€ ë‹¤ìŒê³¼ ê°™ìŠµë‹ˆë‹¤:
* **ì˜¤í”ˆ ì†ŒìŠ¤ Transport Layer Security (TLS)**: ì•”í˜¸í™”ëŠ” ì¸ì¦ì„œ ì œê³µìë¥¼ ì„ íƒí•˜ì—¬ í™œì„±í™”í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤:
* **PEM**: PEM ì¸ì¦ì„œë¥¼ ìˆ˜ë™ìœ¼ë¡œ ìƒì„±í•˜ê³  zip íŒŒì¼ë¡œ ë²ˆë“¤ë§í•˜ì—¬ S3 ë²„í‚·ì—ì„œ ì°¸ì¡°í•´ì•¼ í•©ë‹ˆë‹¤.
* **Custom**: ì‚¬ìš©ì ì •ì˜ Java í´ë˜ìŠ¤ë¥¼ ì¸ì¦ì„œ ì œê³µìë¡œ ì¶”ê°€í•˜ì—¬ ì•”í˜¸í™” ì•„í‹°íŒ©íŠ¸ë¥¼ ì œê³µí•©ë‹ˆë‹¤.

TLS ì¸ì¦ì„œ ì œê³µìê°€ ë³´ì•ˆ êµ¬ì„±ì— í†µí•©ë˜ë©´ EMR ë²„ì „ì— ë”°ë¼ ë‹¤ìŒê³¼ ê°™ì€ ì• í”Œë¦¬ì¼€ì´ì…˜ë³„ ì•”í˜¸í™” ê¸°ëŠ¥ì„ í™œì„±í™”í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤:

* **Hadoop**:
* TLSë¥¼ ì‚¬ìš©í•˜ì—¬ ì•”í˜¸í™”ëœ ì…”í”Œì„ ì¤„ì¼ ìˆ˜ ìˆìŠµë‹ˆë‹¤.
* Simple Authentication Security Layerì™€ AES-256ì„ ì‚¬ìš©í•œ HDFS ë¸”ë¡ ì „ì†¡ê³¼ í•¨ê»˜ ì €ì¥ ì‹œ ì•”í˜¸í™”ê°€ í™œì„±í™”ë©ë‹ˆë‹¤.
* **Presto** (EMR ë²„ì „ 5.6.0+):
* Presto ë…¸ë“œ ê°„ì˜ ë‚´ë¶€ í†µì‹ ì€ SSL ë° TLSë¥¼ ì‚¬ìš©í•˜ì—¬ ë³´ì•ˆì´ ìœ ì§€ë©ë‹ˆë‹¤.
* **Tez Shuffle Handler**:
* TLSë¥¼ ì‚¬ìš©í•˜ì—¬ ì•”í˜¸í™”í•©ë‹ˆë‹¤.
* **Spark**:
* Akka í”„ë¡œí† ì½œì— TLSë¥¼ ì‚¬ìš©í•©ë‹ˆë‹¤.
* Simple Authentication Security Layerì™€ 3DESë¥¼ ì‚¬ìš©í•˜ì—¬ ë¸”ë¡ ì „ì†¡ ì„œë¹„ìŠ¤ë¥¼ ì œê³µí•©ë‹ˆë‹¤.
* ì™¸ë¶€ ì…”í”Œ ì„œë¹„ìŠ¤ëŠ” Simple Authentication Security Layerë¡œ ë³´ì•ˆì´ ìœ ì§€ë©ë‹ˆë‹¤.

ì´ëŸ¬í•œ ê¸°ëŠ¥ì€ íŠ¹íˆ ì €ì¥ ë° ì „ì†¡ ë‹¨ê³„ì—ì„œ ë°ì´í„° ë³´í˜¸ì™€ ê´€ë ¨í•˜ì—¬ EMR í´ëŸ¬ìŠ¤í„°ì˜ ë³´ì•ˆ íƒœì„¸ë¥¼ í–¥ìƒì‹œí‚µë‹ˆë‹¤.

#### Enumeration
```bash
aws emr list-clusters
aws emr describe-cluster --cluster-id <id>
aws emr list-instances --cluster-id <id>
aws emr list-instance-fleets --cluster-id <id>
aws emr list-steps --cluster-id <id>
aws emr list-notebook-executions
aws emr list-security-configurations
aws emr list-studios #Get studio URLs
```
#### Privesc

{% content-ref url="../aws-privilege-escalation/aws-emr-privesc.md" %}
[aws-emr-privesc.md](../aws-privilege-escalation/aws-emr-privesc.md)
{% endcontent-ref %}

## References

* [https://cloudacademy.com/course/domain-three-designing-secure-applications-and-architectures/elastic-mapreduce-emr-encryption-1/](https://cloudacademy.com/course/domain-three-designing-secure-applications-and-architectures/elastic-mapreduce-emr-encryption-1/)

{% hint style="success" %}
AWS Hacking ë°°ìš°ê¸° ë° ì—°ìŠµí•˜ê¸°:<img src="/.gitbook/assets/image.png" alt="" data-size="line">[**HackTricks Training AWS Red Team Expert (ARTE)**](https://training.hacktricks.xyz/courses/arte)<img src="/.gitbook/assets/image.png" alt="" data-size="line">\
GCP Hacking ë°°ìš°ê¸° ë° ì—°ìŠµí•˜ê¸°: <img src="/.gitbook/assets/image (2).png" alt="" data-size="line">[**HackTricks Training GCP Red Team Expert (GRTE)**<img src="/.gitbook/assets/image (2).png" alt="" data-size="line">](https://training.hacktricks.xyz/courses/grte)

<details>

<summary>HackTricks ì§€ì›í•˜ê¸°</summary>

* [**subscription plans**](https://github.com/sponsors/carlospolop) í™•ì¸í•˜ê¸°!
* ğŸ’¬ [**Discord group**](https://discord.gg/hRep4RUj7f) ë˜ëŠ” [**telegram group**](https://t.me/peass) ì— ê°€ì…í•˜ê±°ë‚˜ **Twitter** ğŸ¦ [**@hacktricks\_live**](https://twitter.com/hacktricks\_live) ë¥¼ íŒ”ë¡œìš°í•˜ì„¸ìš”.
* **PRì„ ì œì¶œí•˜ì—¬** [**HackTricks**](https://github.com/carlospolop/hacktricks) ë° [**HackTricks Cloud**](https://github.com/carlospolop/hacktricks-cloud) github ì €ì¥ì†Œì— í•´í‚¹ íŠ¸ë¦­ì„ ê³µìœ í•˜ì„¸ìš”.

</details>
{% endhint %}
