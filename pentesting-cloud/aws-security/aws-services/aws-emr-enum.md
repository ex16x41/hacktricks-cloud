# AWS - EMR Enum

{% hint style="success" %}
Leer & oefen AWS Hacking:<img src="../../../.gitbook/assets/image (1) (1) (1).png" alt="" data-size="line">[**HackTricks Training AWS Red Team Expert (ARTE)**](https://training.hacktricks.xyz/courses/arte)<img src="../../../.gitbook/assets/image (1) (1) (1).png" alt="" data-size="line">\
Leer & oefen GCP Hacking: <img src="../../../.gitbook/assets/image (2).png" alt="" data-size="line">[**HackTricks Training GCP Red Team Expert (GRTE)**<img src="../../../.gitbook/assets/image (2).png" alt="" data-size="line">](https://training.hacktricks.xyz/courses/grte)

<details>

<summary>Support HackTricks</summary>

* Kyk na die [**subskripsie planne**](https://github.com/sponsors/carlospolop)!
* **Sluit aan by die** üí¨ [**Discord groep**](https://discord.gg/hRep4RUj7f) of die [**telegram groep**](https://t.me/peass) of **volg** ons op **Twitter** üê¶ [**@hacktricks\_live**](https://twitter.com/hacktricks_live)**.**
* **Deel hacking truuks deur PR's in te dien na die** [**HackTricks**](https://github.com/carlospolop/hacktricks) en [**HackTricks Cloud**](https://github.com/carlospolop/hacktricks-cloud) github repos.

</details>
{% endhint %}

## EMR

AWS se Elastic MapReduce (EMR) diens, wat begin het met weergawe 4.8.0, het 'n **veiligheidskonfigurasie** kenmerk bekendgestel wat dataprotectie verbeter deur gebruikers toe te laat om versleutelinginstellings vir data in rus en in oordrag binne EMR-klusters, wat skaalbare groepe van EC2-instanties is wat ontwerp is om groot data raamwerke soos Apache Hadoop en Spark te verwerk, te spesifiseer.

Belangrike kenmerke sluit in:

* **Kluster Versleuteling Standaard**: Standaard is data in rus binne 'n kluster nie versleuteld nie. Dit is egter moontlik om versleuteling in te skakel wat toegang bied tot verskeie funksies:
* **Linux Unified Key Setup**: Versleutelt EBS kluster volumes. Gebruikers kan kies vir AWS Key Management Service (KMS) of 'n pasgemaakte sleutelverskaffer.
* **Open-Source HDFS Versleuteling**: Bied twee versleuteling opsies vir Hadoop:
* Veilige Hadoop RPC (Remote Procedure Call), gestel op privaatheid, wat die Simple Authentication Security Layer benut.
* HDFS Blok oordrag versleuteling, gestel op waar, gebruik die AES-256 algoritme.
* **Versleuteling in Oordrag**: Fokus op die beveiliging van data tydens oordrag. Opsies sluit in:
* **Open Source Transport Layer Security (TLS)**: Versleuteling kan geaktiveer word deur 'n sertifikaatverskaffer te kies:
* **PEM**: Vereis handmatige skepping en bundeling van PEM sertifikate in 'n zip-l√™er, waarna verwys word vanaf 'n S3-bucket.
* **Pasgemaak**: Betrek die toevoeging van 'n pasgemaakte Java-klas as 'n sertifikaatverskaffer wat versleuteling artefakte verskaf.

Sodra 'n TLS-sertifikaatverskaffer in die veiligheidskonfigurasie ge√Øntegreer is, kan die volgende toepassingspesifieke versleuteling funksies geaktiveer word, wat wissel op grond van die EMR weergawe:

* **Hadoop**:
* Mag versleutelde shuffle met TLS verminder.
* Veilige Hadoop RPC met Simple Authentication Security Layer en HDFS Blok Oordrag met AES-256 word geaktiveer met versleuteling in rus.
* **Presto** (EMR weergawe 5.6.0+):
* Interne kommunikasie tussen Presto knope is beveilig met SSL en TLS.
* **Tez Shuffle Handler**:
* Gebruik TLS vir versleuteling.
* **Spark**:
* Gebruik TLS vir die Akka protokol.
* Gebruik Simple Authentication Security Layer en 3DES vir Blok Oordrag Diens.
* Eksterne shuffle diens is beveilig met die Simple Authentication Security Layer.

Hierdie funksies verbeter saam die sekuriteitsposisie van EMR-klusters, veral met betrekking tot dataprotectie tydens berging en oordrag fases.

#### Enumeration
```bash
aws emr list-clusters
aws emr describe-cluster --cluster-id <id>
aws emr list-instances --cluster-id <id>
aws emr list-instance-fleets --cluster-id <id>
aws emr list-steps --cluster-id <id>
aws emr list-notebook-executions
aws emr list-security-configurations
aws emr list-studios #Get studio URLs
```
#### Privesc

{% content-ref url="../aws-privilege-escalation/aws-emr-privesc.md" %}
[aws-emr-privesc.md](../aws-privilege-escalation/aws-emr-privesc.md)
{% endcontent-ref %}

## Verwysings

* [https://cloudacademy.com/course/domain-three-designing-secure-applications-and-architectures/elastic-mapreduce-emr-encryption-1/](https://cloudacademy.com/course/domain-three-designing-secure-applications-and-architectures/elastic-mapreduce-emr-encryption-1/)

{% hint style="success" %}
Leer & oefen AWS Hacking:<img src="../../../.gitbook/assets/image (1) (1) (1).png" alt="" data-size="line">[**HackTricks Training AWS Red Team Expert (ARTE)**](https://training.hacktricks.xyz/courses/arte)<img src="../../../.gitbook/assets/image (1) (1) (1).png" alt="" data-size="line">\
Leer & oefen GCP Hacking: <img src="../../../.gitbook/assets/image (2).png" alt="" data-size="line">[**HackTricks Training GCP Red Team Expert (GRTE)**<img src="../../../.gitbook/assets/image (2).png" alt="" data-size="line">](https://training.hacktricks.xyz/courses/grte)

<details>

<summary>Ondersteun HackTricks</summary>

* Kyk na die [**subskripsie planne**](https://github.com/sponsors/carlospolop)!
* **Sluit aan by die** üí¨ [**Discord groep**](https://discord.gg/hRep4RUj7f) of die [**telegram groep**](https://t.me/peass) of **volg** ons op **Twitter** üê¶ [**@hacktricks\_live**](https://twitter.com/hacktricks_live)**.**
* **Deel hacking truuks deur PRs in te dien na die** [**HackTricks**](https://github.com/carlospolop/hacktricks) en [**HackTricks Cloud**](https://github.com/carlospolop/hacktricks-cloud) github repos.

</details>
{% endhint %}
