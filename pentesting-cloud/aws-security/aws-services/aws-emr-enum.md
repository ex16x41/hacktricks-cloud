# AWS - EMR Enum

{% hint style="success" %}
Learn & practice AWS Hacking:<img src="../../../.gitbook/assets/image (1) (1).png" alt="" data-size="line">[**HackTricks Training AWS Red Team Expert (ARTE)**](https://training.hacktricks.xyz/courses/arte)<img src="../../../.gitbook/assets/image (1) (1).png" alt="" data-size="line">\
Learn & practice GCP Hacking: <img src="../../../.gitbook/assets/image (2).png" alt="" data-size="line">[**HackTricks Training GCP Red Team Expert (GRTE)**<img src="../../../.gitbook/assets/image (2).png" alt="" data-size="line">](https://training.hacktricks.xyz/courses/grte)

<details>

<summary>Support HackTricks</summary>

* Check the [**subscription plans**](https://github.com/sponsors/carlospolop)!
* **Join the** üí¨ [**Discord group**](https://discord.gg/hRep4RUj7f) or the [**telegram group**](https://t.me/peass) or **follow** us on **Twitter** üê¶ [**@hacktricks\_live**](https://twitter.com/hacktricks\_live)**.**
* **Share hacking tricks by submitting PRs to the** [**HackTricks**](https://github.com/carlospolop/hacktricks) and [**HackTricks Cloud**](https://github.com/carlospolop/hacktricks-cloud) github repos.

</details>
{% endhint %}

## EMR

Huduma ya Elastic MapReduce (EMR) ya AWS, kuanzia toleo la 4.8.0, ilianzisha kipengele cha **mipangilio ya usalama** ambacho kinaboresha ulinzi wa data kwa kuruhusu watumiaji kuweka mipangilio ya usimbuaji kwa data iliyohifadhiwa na katika usafirishaji ndani ya vikundi vya EMR, ambavyo ni vikundi vinavyoweza kupanuliwa vya EC2 instances vilivyoundwa kushughulikia mifumo mikubwa ya data kama Apache Hadoop na Spark.

Sifa kuu ni pamoja na:

* **Usimbuaji wa Kiwango cha Default**: Kwa default, data iliyohifadhiwa ndani ya kundi haijatumika usimbuaji. Hata hivyo, kuwezesha usimbuaji kunatoa ufikiaji wa vipengele kadhaa:
* **Linux Unified Key Setup**: Inasimbua volumu za kundi la EBS. Watumiaji wanaweza kuchagua huduma ya Usimamizi wa Funguo za AWS (KMS) au mtoa funguo wa kawaida.
* **Usimbuaji wa HDFS wa Chanzo Huria**: Inatoa chaguzi mbili za usimbuaji kwa Hadoop:
* Usimbuaji wa Hadoop RPC (Remote Procedure Call), uliowekwa kwa faragha, ukitumia Safu ya Usalama wa Uthibitishaji Rahisi.
* Usimbuaji wa uhamishaji wa HDFS Block, uliowekwa kuwa kweli, unatumia algorithm ya AES-256.
* **Usimbuaji katika Usafirishaji**: Inalenga kulinda data wakati wa usafirishaji. Chaguzi ni pamoja na:
* **Usalama wa Usafirishaji wa Chanzo Huria (TLS)**: Usimbuaji unaweza kuwezeshwa kwa kuchagua mtoa cheti:
* **PEM**: Inahitaji uundaji wa mikono na kuunganisha vyeti vya PEM katika faili ya zip, inayorejelewa kutoka kwenye S3 bucket.
* **Kawaida**: Inahusisha kuongeza darasa la Java la kawaida kama mtoa cheti linalotoa vitu vya usimbuaji.

Mara tu mtoa cheti wa TLS anapounganishwa kwenye mipangilio ya usalama, vipengele vifuatavyo vya usimbuaji maalum wa programu vinaweza kuwezeshwa, vinavyotofautiana kulingana na toleo la EMR:

* **Hadoop**:
* Inaweza kupunguza usimbuaji wa shuffle kwa kutumia TLS.
* Usimbuaji wa Hadoop RPC na Safu ya Usalama wa Uthibitishaji Rahisi na Uhamishaji wa HDFS Block na AES-256 vinawezeshwa na usimbuaji wa data iliyohifadhiwa.
* **Presto** (EMR toleo 5.6.0+):
* Mawasiliano ya ndani kati ya nodi za Presto yanalindwa kwa kutumia SSL na TLS.
* **Tez Shuffle Handler**:
* Inatumia TLS kwa usimbuaji.
* **Spark**:
* Inatumia TLS kwa itifaki ya Akka.
* Inatumia Safu ya Usalama wa Uthibitishaji Rahisi na 3DES kwa Huduma ya Uhamishaji wa Block.
* Huduma ya nje ya shuffle inalindwa na Safu ya Usalama wa Uthibitishaji Rahisi.

Vipengele hivi kwa pamoja vinaboresha hali ya usalama ya vikundi vya EMR, hasa kuhusu ulinzi wa data wakati wa kuhifadhi na awamu za usafirishaji.

#### Enumeration
```bash
aws emr list-clusters
aws emr describe-cluster --cluster-id <id>
aws emr list-instances --cluster-id <id>
aws emr list-instance-fleets --cluster-id <id>
aws emr list-steps --cluster-id <id>
aws emr list-notebook-executions
aws emr list-security-configurations
aws emr list-studios #Get studio URLs
```
#### Privesc

{% content-ref url="../aws-privilege-escalation/aws-emr-privesc.md" %}
[aws-emr-privesc.md](../aws-privilege-escalation/aws-emr-privesc.md)
{% endcontent-ref %}

## Marejeo

* [https://cloudacademy.com/course/domain-three-designing-secure-applications-and-architectures/elastic-mapreduce-emr-encryption-1/](https://cloudacademy.com/course/domain-three-designing-secure-applications-and-architectures/elastic-mapreduce-emr-encryption-1/)

{% hint style="success" %}
Jifunze & fanya mazoezi ya AWS Hacking:<img src="../../../.gitbook/assets/image (1) (1).png" alt="" data-size="line">[**HackTricks Training AWS Red Team Expert (ARTE)**](https://training.hacktricks.xyz/courses/arte)<img src="../../../.gitbook/assets/image (1) (1).png" alt="" data-size="line">\
Jifunze & fanya mazoezi ya GCP Hacking: <img src="../../../.gitbook/assets/image (2).png" alt="" data-size="line">[**HackTricks Training GCP Red Team Expert (GRTE)**<img src="../../../.gitbook/assets/image (2).png" alt="" data-size="line">](https://training.hacktricks.xyz/courses/grte)

<details>

<summary>Support HackTricks</summary>

* Angalia [**mpango wa usajili**](https://github.com/sponsors/carlospolop)!
* **Jiunge na** üí¨ [**kikundi cha Discord**](https://discord.gg/hRep4RUj7f) au [**kikundi cha telegram**](https://t.me/peass) au **fuata** sisi kwenye **Twitter** üê¶ [**@hacktricks\_live**](https://twitter.com/hacktricks\_live)**.**
* **Shiriki mbinu za hacking kwa kuwasilisha PRs kwa** [**HackTricks**](https://github.com/carlospolop/hacktricks) na [**HackTricks Cloud**](https://github.com/carlospolop/hacktricks-cloud) repos za github.

</details>
{% endhint %}
