# AWS - EMR Enum

{% hint style="success" %}
å­¦ä¹ å’Œç»ƒä¹  AWS Hackingï¼š<img src="/.gitbook/assets/image.png" alt="" data-size="line">[**HackTricks Training AWS Red Team Expert (ARTE)**](https://training.hacktricks.xyz/courses/arte)<img src="/.gitbook/assets/image.png" alt="" data-size="line">\
å­¦ä¹ å’Œç»ƒä¹  GCP Hackingï¼š<img src="/.gitbook/assets/image (2).png" alt="" data-size="line">[**HackTricks Training GCP Red Team Expert (GRTE)**<img src="/.gitbook/assets/image (2).png" alt="" data-size="line">](https://training.hacktricks.xyz/courses/grte)

<details>

<summary>æ”¯æŒ HackTricks</summary>

* æŸ¥çœ‹ [**è®¢é˜…è®¡åˆ’**](https://github.com/sponsors/carlospolop)!
* **åŠ å…¥** ğŸ’¬ [**Discord ç¾¤ç»„**](https://discord.gg/hRep4RUj7f) æˆ– [**telegram ç¾¤ç»„**](https://t.me/peass) æˆ– **å…³æ³¨** æˆ‘ä»¬çš„ **Twitter** ğŸ¦ [**@hacktricks\_live**](https://twitter.com/hacktricks\_live)**.**
* **é€šè¿‡æäº¤ PR åˆ†äº«é»‘å®¢æŠ€å·§åˆ°** [**HackTricks**](https://github.com/carlospolop/hacktricks) å’Œ [**HackTricks Cloud**](https://github.com/carlospolop/hacktricks-cloud) github ä»“åº“ã€‚

</details>
{% endhint %}

## EMR

AWS çš„ Elastic MapReduce (EMR) æœåŠ¡ä» 4.8.0 ç‰ˆæœ¬å¼€å§‹ï¼Œå¼•å…¥äº†ä¸€ä¸ª**å®‰å…¨é…ç½®**åŠŸèƒ½ï¼Œé€šè¿‡å…è®¸ç”¨æˆ·æŒ‡å®š EMR é›†ç¾¤ä¸­é™æ€å’Œä¼ è¾“æ•°æ®çš„åŠ å¯†è®¾ç½®æ¥å¢å¼ºæ•°æ®ä¿æŠ¤ã€‚EMR é›†ç¾¤æ˜¯è®¾è®¡ç”¨äºå¤„ç†å¤§æ•°æ®æ¡†æ¶ï¼ˆå¦‚ Apache Hadoop å’Œ Sparkï¼‰çš„å¯æ‰©å±• EC2 å®ä¾‹ç»„ã€‚

ä¸»è¦ç‰¹ç‚¹åŒ…æ‹¬ï¼š

* **é›†ç¾¤åŠ å¯†é»˜è®¤å€¼**ï¼šé»˜è®¤æƒ…å†µä¸‹ï¼Œé›†ç¾¤ä¸­çš„é™æ€æ•°æ®æœªåŠ å¯†ã€‚ç„¶è€Œï¼Œå¯ç”¨åŠ å¯†åå¯ä»¥è®¿é—®å¤šä¸ªåŠŸèƒ½ï¼š
* **Linux Unified Key Setup**ï¼šåŠ å¯† EBS é›†ç¾¤å·ã€‚ç”¨æˆ·å¯ä»¥é€‰æ‹© AWS Key Management Service (KMS) æˆ–è‡ªå®šä¹‰å¯†é’¥æä¾›è€…ã€‚
* **å¼€æº HDFS åŠ å¯†**ï¼šä¸º Hadoop æä¾›ä¸¤ç§åŠ å¯†é€‰é¡¹ï¼š
* å®‰å…¨ Hadoop RPCï¼ˆè¿œç¨‹è¿‡ç¨‹è°ƒç”¨ï¼‰ï¼Œè®¾ç½®ä¸ºéšç§ï¼Œåˆ©ç”¨ç®€å•è®¤è¯å®‰å…¨å±‚ã€‚
* HDFS å—ä¼ è¾“åŠ å¯†ï¼Œè®¾ç½®ä¸º trueï¼Œä½¿ç”¨ AES-256 ç®—æ³•ã€‚
* **ä¼ è¾“ä¸­çš„åŠ å¯†**ï¼šä¸“æ³¨äºä¿æŠ¤ä¼ è¾“ä¸­çš„æ•°æ®ã€‚é€‰é¡¹åŒ…æ‹¬ï¼š
* **å¼€æºä¼ è¾“å±‚å®‰å…¨ (TLS)**ï¼šå¯ä»¥é€šè¿‡é€‰æ‹©è¯ä¹¦æä¾›è€…å¯ç”¨åŠ å¯†ï¼š
* **PEM**ï¼šéœ€è¦æ‰‹åŠ¨åˆ›å»ºå¹¶å°† PEM è¯ä¹¦æ‰“åŒ…æˆ zip æ–‡ä»¶ï¼Œä» S3 å­˜å‚¨æ¡¶ä¸­å¼•ç”¨ã€‚
* **è‡ªå®šä¹‰**ï¼šæ¶‰åŠæ·»åŠ è‡ªå®šä¹‰ Java ç±»ä½œä¸ºè¯ä¹¦æä¾›è€…ï¼Œæä¾›åŠ å¯†å·¥ä»¶ã€‚

ä¸€æ—¦å°† TLS è¯ä¹¦æä¾›è€…é›†æˆåˆ°å®‰å…¨é…ç½®ä¸­ï¼Œå¯ä»¥æ¿€æ´»ä»¥ä¸‹åŸºäº EMR ç‰ˆæœ¬çš„ç‰¹å®šåº”ç”¨åŠ å¯†åŠŸèƒ½ï¼š

* **Hadoop**ï¼š
* å¯èƒ½å‡å°‘ä½¿ç”¨ TLS çš„åŠ å¯† shuffleã€‚
* ä½¿ç”¨ç®€å•è®¤è¯å®‰å…¨å±‚çš„å®‰å…¨ Hadoop RPC å’Œä½¿ç”¨ AES-256 çš„ HDFS å—ä¼ è¾“åœ¨é™æ€åŠ å¯†æ—¶æ¿€æ´»ã€‚
* **Presto** (EMR ç‰ˆæœ¬ 5.6.0+)ï¼š
* Presto èŠ‚ç‚¹ä¹‹é—´çš„å†…éƒ¨é€šä¿¡ä½¿ç”¨ SSL å’Œ TLS è¿›è¡Œä¿æŠ¤ã€‚
* **Tez Shuffle Handler**ï¼š
* ä½¿ç”¨ TLS è¿›è¡ŒåŠ å¯†ã€‚
* **Spark**ï¼š
* ä½¿ç”¨ TLS è¿›è¡Œ Akka åè®®ã€‚
* ä½¿ç”¨ç®€å•è®¤è¯å®‰å…¨å±‚å’Œ 3DES è¿›è¡Œå—ä¼ è¾“æœåŠ¡ã€‚
* å¤–éƒ¨ shuffle æœåŠ¡ä½¿ç”¨ç®€å•è®¤è¯å®‰å…¨å±‚è¿›è¡Œä¿æŠ¤ã€‚

è¿™äº›åŠŸèƒ½å…±åŒå¢å¼ºäº† EMR é›†ç¾¤çš„å®‰å…¨æ€åŠ¿ï¼Œç‰¹åˆ«æ˜¯åœ¨å­˜å‚¨å’Œä¼ è¾“é˜¶æ®µçš„æ•°æ®ä¿æŠ¤æ–¹é¢ã€‚

#### Enumeration
```bash
aws emr list-clusters
aws emr describe-cluster --cluster-id <id>
aws emr list-instances --cluster-id <id>
aws emr list-instance-fleets --cluster-id <id>
aws emr list-steps --cluster-id <id>
aws emr list-notebook-executions
aws emr list-security-configurations
aws emr list-studios #Get studio URLs
```
#### ææƒ

{% content-ref url="../aws-privilege-escalation/aws-emr-privesc.md" %}
[aws-emr-privesc.md](../aws-privilege-escalation/aws-emr-privesc.md)
{% endcontent-ref %}

## å‚è€ƒèµ„æ–™

* [https://cloudacademy.com/course/domain-three-designing-secure-applications-and-architectures/elastic-mapreduce-emr-encryption-1/](https://cloudacademy.com/course/domain-three-designing-secure-applications-and-architectures/elastic-mapreduce-emr-encryption-1/)

{% hint style="success" %}
å­¦ä¹ å’Œå®è·µ AWS Hacking:<img src="/.gitbook/assets/image.png" alt="" data-size="line">[**HackTricks Training AWS Red Team Expert (ARTE)**](https://training.hacktricks.xyz/courses/arte)<img src="/.gitbook/assets/image.png" alt="" data-size="line">\
å­¦ä¹ å’Œå®è·µ GCP Hacking: <img src="/.gitbook/assets/image (2).png" alt="" data-size="line">[**HackTricks Training GCP Red Team Expert (GRTE)**<img src="/.gitbook/assets/image (2).png" alt="" data-size="line">](https://training.hacktricks.xyz/courses/grte)

<details>

<summary>æ”¯æŒ HackTricks</summary>

* æŸ¥çœ‹ [**è®¢é˜…è®¡åˆ’**](https://github.com/sponsors/carlospolop)!
* **åŠ å…¥** ğŸ’¬ [**Discord ç¾¤ç»„**](https://discord.gg/hRep4RUj7f) æˆ– [**telegram ç¾¤ç»„**](https://t.me/peass) æˆ– **å…³æ³¨** æˆ‘ä»¬çš„ **Twitter** ğŸ¦ [**@hacktricks\_live**](https://twitter.com/hacktricks\_live)**.**
* **é€šè¿‡æäº¤ PRs åˆ†äº«é»‘å®¢æŠ€å·§åˆ°** [**HackTricks**](https://github.com/carlospolop/hacktricks) å’Œ [**HackTricks Cloud**](https://github.com/carlospolop/hacktricks-cloud) github ä»“åº“ã€‚

</details>
{% endhint %}
