# AWS - EMR Enum

{% hint style="success" %}
Learn & practice AWS Hacking:<img src="/.gitbook/assets/image.png" alt="" data-size="line">[**HackTricks Training AWS Red Team Expert (ARTE)**](https://training.hacktricks.xyz/courses/arte)<img src="/.gitbook/assets/image.png" alt="" data-size="line">\
Learn & practice GCP Hacking: <img src="/.gitbook/assets/image (2).png" alt="" data-size="line">[**HackTricks Training GCP Red Team Expert (GRTE)**<img src="/.gitbook/assets/image (2).png" alt="" data-size="line">](https://training.hacktricks.xyz/courses/grte)

<details>

<summary>Support HackTricks</summary>

* Check the [**subscription plans**](https://github.com/sponsors/carlospolop)!
* **Join the** ğŸ’¬ [**Discord group**](https://discord.gg/hRep4RUj7f) or the [**telegram group**](https://t.me/peass) or **follow** us on **Twitter** ğŸ¦ [**@hacktricks\_live**](https://twitter.com/hacktricks\_live)**.**
* **Share hacking tricks by submitting PRs to the** [**HackTricks**](https://github.com/carlospolop/hacktricks) and [**HackTricks Cloud**](https://github.com/carlospolop/hacktricks-cloud) github repos.

</details>
{% endhint %}

## EMR

AWSã®Elastic MapReduce (EMR)ã‚µãƒ¼ãƒ“ã‚¹ã¯ã€ãƒãƒ¼ã‚¸ãƒ§ãƒ³4.8.0ã‹ã‚‰**ã‚»ã‚­ãƒ¥ãƒªãƒ†ã‚£æ§‹æˆ**æ©Ÿèƒ½ã‚’å°å…¥ã—ã€EMRã‚¯ãƒ©ã‚¹ã‚¿ãƒ¼å†…ã®ãƒ‡ãƒ¼ã‚¿ã‚’ä¿å­˜ãŠã‚ˆã³è»¢é€ã™ã‚‹éš›ã®æš—å·åŒ–è¨­å®šã‚’æŒ‡å®šã™ã‚‹ã“ã¨ã§ãƒ‡ãƒ¼ã‚¿ä¿è­·ã‚’å¼·åŒ–ã—ã¾ã—ãŸã€‚EMRã‚¯ãƒ©ã‚¹ã‚¿ãƒ¼ã¯ã€Apache Hadoopã‚„Sparkã®ã‚ˆã†ãªãƒ“ãƒƒã‚°ãƒ‡ãƒ¼ã‚¿ãƒ•ãƒ¬ãƒ¼ãƒ ãƒ¯ãƒ¼ã‚¯ã‚’å‡¦ç†ã™ã‚‹ãŸã‚ã«è¨­è¨ˆã•ã‚ŒãŸã‚¹ã‚±ãƒ¼ãƒ©ãƒ–ãƒ«ãªEC2ã‚¤ãƒ³ã‚¹ã‚¿ãƒ³ã‚¹ã®ã‚°ãƒ«ãƒ¼ãƒ—ã§ã™ã€‚

ä¸»ãªç‰¹å¾´ã¯ä»¥ä¸‹ã®é€šã‚Šã§ã™ï¼š

* **ã‚¯ãƒ©ã‚¹ã‚¿ãƒ¼æš—å·åŒ–ã®ãƒ‡ãƒ•ã‚©ãƒ«ãƒˆ**ï¼šãƒ‡ãƒ•ã‚©ãƒ«ãƒˆã§ã¯ã€ã‚¯ãƒ©ã‚¹ã‚¿ãƒ¼å†…ã®ãƒ‡ãƒ¼ã‚¿ã¯æš—å·åŒ–ã•ã‚Œã¦ã„ã¾ã›ã‚“ã€‚ã—ã‹ã—ã€æš—å·åŒ–ã‚’æœ‰åŠ¹ã«ã™ã‚‹ã¨ã€ã„ãã¤ã‹ã®æ©Ÿèƒ½ã«ã‚¢ã‚¯ã‚»ã‚¹ã§ãã¾ã™ï¼š
* **Linux Unified Key Setup**ï¼šEBSã‚¯ãƒ©ã‚¹ã‚¿ãƒ¼ã®ãƒœãƒªãƒ¥ãƒ¼ãƒ ã‚’æš—å·åŒ–ã—ã¾ã™ã€‚ãƒ¦ãƒ¼ã‚¶ãƒ¼ã¯AWS Key Management Service (KMS)ã¾ãŸã¯ã‚«ã‚¹ã‚¿ãƒ ã‚­ãƒ¼æä¾›è€…ã‚’é¸æŠã§ãã¾ã™ã€‚
* **ã‚ªãƒ¼ãƒ—ãƒ³ã‚½ãƒ¼ã‚¹HDFSæš—å·åŒ–**ï¼šHadoopã®ãŸã‚ã®2ã¤ã®æš—å·åŒ–ã‚ªãƒ—ã‚·ãƒ§ãƒ³ã‚’æä¾›ã—ã¾ã™ï¼š
* Secure Hadoop RPC (Remote Procedure Call)ã€ãƒ—ãƒ©ã‚¤ãƒã‚·ãƒ¼ã«è¨­å®šã•ã‚Œã€Simple Authentication Security Layerã‚’æ´»ç”¨ã—ã¾ã™ã€‚
* HDFSãƒ–ãƒ­ãƒƒã‚¯è»¢é€æš—å·åŒ–ã€trueã«è¨­å®šã•ã‚Œã€AES-256ã‚¢ãƒ«ã‚´ãƒªã‚ºãƒ ã‚’ä½¿ç”¨ã—ã¾ã™ã€‚
* **è»¢é€ä¸­ã®æš—å·åŒ–**ï¼šãƒ‡ãƒ¼ã‚¿è»¢é€ä¸­ã®ã‚»ã‚­ãƒ¥ãƒªãƒ†ã‚£ã«ç„¦ç‚¹ã‚’å½“ã¦ã¾ã™ã€‚ã‚ªãƒ—ã‚·ãƒ§ãƒ³ã«ã¯ä»¥ä¸‹ãŒå«ã¾ã‚Œã¾ã™ï¼š
* **ã‚ªãƒ¼ãƒ—ãƒ³ã‚½ãƒ¼ã‚¹ã®Transport Layer Security (TLS)**ï¼šæš—å·åŒ–ã¯è¨¼æ˜æ›¸æä¾›è€…ã‚’é¸æŠã™ã‚‹ã“ã¨ã§æœ‰åŠ¹ã«ã§ãã¾ã™ï¼š
* **PEM**ï¼šPEMè¨¼æ˜æ›¸ã‚’æ‰‹å‹•ã§ä½œæˆã—ã€zipãƒ•ã‚¡ã‚¤ãƒ«ã«ãƒãƒ³ãƒ‰ãƒ«ã—ã¦S3ãƒã‚±ãƒƒãƒˆã‹ã‚‰å‚ç…§ã™ã‚‹å¿…è¦ãŒã‚ã‚Šã¾ã™ã€‚
* **ã‚«ã‚¹ã‚¿ãƒ **ï¼šã‚«ã‚¹ã‚¿ãƒ Javaã‚¯ãƒ©ã‚¹ã‚’è¨¼æ˜æ›¸æä¾›è€…ã¨ã—ã¦è¿½åŠ ã—ã€æš—å·åŒ–ã‚¢ãƒ¼ãƒ†ã‚£ãƒ•ã‚¡ã‚¯ãƒˆã‚’æä¾›ã—ã¾ã™ã€‚

TLSè¨¼æ˜æ›¸æä¾›è€…ãŒã‚»ã‚­ãƒ¥ãƒªãƒ†ã‚£æ§‹æˆã«çµ±åˆã•ã‚Œã‚‹ã¨ã€EMRã®ãƒãƒ¼ã‚¸ãƒ§ãƒ³ã«å¿œã˜ã¦ä»¥ä¸‹ã®ã‚¢ãƒ—ãƒªã‚±ãƒ¼ã‚·ãƒ§ãƒ³å›ºæœ‰ã®æš—å·åŒ–æ©Ÿèƒ½ã‚’æœ‰åŠ¹ã«ã§ãã¾ã™ï¼š

* **Hadoop**ï¼š
* TLSã‚’ä½¿ç”¨ã—ã¦æš—å·åŒ–ã•ã‚ŒãŸã‚·ãƒ£ãƒƒãƒ•ãƒ«ã‚’æ¸›å°‘ã•ã›ã‚‹å¯èƒ½æ€§ãŒã‚ã‚Šã¾ã™ã€‚
* Simple Authentication Security Layerã¨AES-256ã‚’ä½¿ç”¨ã—ãŸHDFSãƒ–ãƒ­ãƒƒã‚¯è»¢é€ã§ã€ä¿å­˜æ™‚ã®æš—å·åŒ–ãŒæœ‰åŠ¹ã«ãªã‚Šã¾ã™ã€‚
* **Presto** (EMRãƒãƒ¼ã‚¸ãƒ§ãƒ³5.6.0+)ï¼š
* Prestoãƒãƒ¼ãƒ‰é–“ã®å†…éƒ¨é€šä¿¡ã¯SSLãŠã‚ˆã³TLSã‚’ä½¿ç”¨ã—ã¦ä¿è­·ã•ã‚Œã¾ã™ã€‚
* **Tez Shuffle Handler**ï¼š
* æš—å·åŒ–ã«TLSã‚’ä½¿ç”¨ã—ã¾ã™ã€‚
* **Spark**ï¼š
* Akkaãƒ—ãƒ­ãƒˆã‚³ãƒ«ã«TLSã‚’ä½¿ç”¨ã—ã¾ã™ã€‚
* Simple Authentication Security Layerã¨3DESã‚’ä½¿ç”¨ã—ãŸãƒ–ãƒ­ãƒƒã‚¯è»¢é€ã‚µãƒ¼ãƒ“ã‚¹ã‚’ä½¿ç”¨ã—ã¾ã™ã€‚
* å¤–éƒ¨ã‚·ãƒ£ãƒƒãƒ•ãƒ«ã‚µãƒ¼ãƒ“ã‚¹ã¯Simple Authentication Security Layerã§ä¿è­·ã•ã‚Œã¾ã™ã€‚

ã“ã‚Œã‚‰ã®æ©Ÿèƒ½ã¯ã€ç‰¹ã«ä¿å­˜ãŠã‚ˆã³è»¢é€ãƒ•ã‚§ãƒ¼ã‚ºä¸­ã®ãƒ‡ãƒ¼ã‚¿ä¿è­·ã«é–¢ã—ã¦ã€EMRã‚¯ãƒ©ã‚¹ã‚¿ãƒ¼ã®ã‚»ã‚­ãƒ¥ãƒªãƒ†ã‚£å§¿å‹¢ã‚’å¼·åŒ–ã—ã¾ã™ã€‚

#### Enumeration
```bash
aws emr list-clusters
aws emr describe-cluster --cluster-id <id>
aws emr list-instances --cluster-id <id>
aws emr list-instance-fleets --cluster-id <id>
aws emr list-steps --cluster-id <id>
aws emr list-notebook-executions
aws emr list-security-configurations
aws emr list-studios #Get studio URLs
```
#### Privesc

{% content-ref url="../aws-privilege-escalation/aws-emr-privesc.md" %}
[aws-emr-privesc.md](../aws-privilege-escalation/aws-emr-privesc.md)
{% endcontent-ref %}

## References

* [https://cloudacademy.com/course/domain-three-designing-secure-applications-and-architectures/elastic-mapreduce-emr-encryption-1/](https://cloudacademy.com/course/domain-three-designing-secure-applications-and-architectures/elastic-mapreduce-emr-encryption-1/)

{% hint style="success" %}
AWSãƒãƒƒã‚­ãƒ³ã‚°ã‚’å­¦ã³ã€ç·´ç¿’ã™ã‚‹:<img src="/.gitbook/assets/image.png" alt="" data-size="line">[**HackTricks Training AWS Red Team Expert (ARTE)**](https://training.hacktricks.xyz/courses/arte)<img src="/.gitbook/assets/image.png" alt="" data-size="line">\
GCPãƒãƒƒã‚­ãƒ³ã‚°ã‚’å­¦ã³ã€ç·´ç¿’ã™ã‚‹: <img src="/.gitbook/assets/image (2).png" alt="" data-size="line">[**HackTricks Training GCP Red Team Expert (GRTE)**<img src="/.gitbook/assets/image (2).png" alt="" data-size="line">](https://training.hacktricks.xyz/courses/grte)

<details>

<summary>HackTricksã‚’ã‚µãƒãƒ¼ãƒˆã™ã‚‹</summary>

* [**ã‚µãƒ–ã‚¹ã‚¯ãƒªãƒ—ã‚·ãƒ§ãƒ³ãƒ—ãƒ©ãƒ³**](https://github.com/sponsors/carlospolop)ã‚’ãƒã‚§ãƒƒã‚¯ï¼
* ğŸ’¬ [**Discordã‚°ãƒ«ãƒ¼ãƒ—**](https://discord.gg/hRep4RUj7f)ã¾ãŸã¯[**telegramã‚°ãƒ«ãƒ¼ãƒ—**](https://t.me/peass)ã«å‚åŠ ã™ã‚‹ã‹ã€**Twitter** ğŸ¦ [**@hacktricks\_live**](https://twitter.com/hacktricks\_live)ã‚’ãƒ•ã‚©ãƒ­ãƒ¼ã™ã‚‹ã€‚
* **ãƒãƒƒã‚­ãƒ³ã‚°ãƒˆãƒªãƒƒã‚¯ã‚’å…±æœ‰ã™ã‚‹ã«ã¯ã€** [**HackTricks**](https://github.com/carlospolop/hacktricks)ãŠã‚ˆã³[**HackTricks Cloud**](https://github.com/carlospolop/hacktricks-cloud)ã®githubãƒªãƒã‚¸ãƒˆãƒªã«PRã‚’æå‡ºã™ã‚‹ã€‚

</details>
{% endhint %}
