# AWS - EMR Enum

{% hint style="success" %}
å­¦ä¹ ä¸å®è·µ AWS é»‘å®¢æŠ€æœ¯ï¼š<img src="../../../.gitbook/assets/image (1).png" alt="" data-size="line">[**HackTricks åŸ¹è®­ AWS çº¢é˜Ÿä¸“å®¶ (ARTE)**](https://training.hacktricks.xyz/courses/arte)<img src="../../../.gitbook/assets/image (1).png" alt="" data-size="line">\
å­¦ä¹ ä¸å®è·µ GCP é»‘å®¢æŠ€æœ¯ï¼š<img src="../../../.gitbook/assets/image (2).png" alt="" data-size="line">[**HackTricks åŸ¹è®­ GCP çº¢é˜Ÿä¸“å®¶ (GRTE)**<img src="../../../.gitbook/assets/image (2).png" alt="" data-size="line">](https://training.hacktricks.xyz/courses/grte)

<details>

<summary>æ”¯æŒ HackTricks</summary>

* æŸ¥çœ‹ [**è®¢é˜…è®¡åˆ’**](https://github.com/sponsors/carlospolop)!
* **åŠ å…¥** ğŸ’¬ [**Discord ç¾¤ç»„**](https://discord.gg/hRep4RUj7f) æˆ– [**Telegram ç¾¤ç»„**](https://t.me/peass) æˆ– **å…³æ³¨** æˆ‘ä»¬çš„ **Twitter** ğŸ¦ [**@hacktricks\_live**](https://twitter.com/hacktricks\_live)**.**
* **é€šè¿‡å‘** [**HackTricks**](https://github.com/carlospolop/hacktricks) å’Œ [**HackTricks Cloud**](https://github.com/carlospolop/hacktricks-cloud) GitHub ä»“åº“æäº¤ PR åˆ†äº«é»‘å®¢æŠ€å·§ã€‚

</details>
{% endhint %}

## EMR

AWS çš„å¼¹æ€§ MapReduce (EMR) æœåŠ¡ï¼Œä»ç‰ˆæœ¬ 4.8.0 å¼€å§‹ï¼Œå¼•å…¥äº† **å®‰å…¨é…ç½®** åŠŸèƒ½ï¼Œé€šè¿‡å…è®¸ç”¨æˆ·ä¸º EMR é›†ç¾¤ä¸­çš„é™æ€å’Œä¼ è¾“æ•°æ®æŒ‡å®šåŠ å¯†è®¾ç½®ï¼Œä»è€Œå¢å¼ºæ•°æ®ä¿æŠ¤ã€‚EMR é›†ç¾¤æ˜¯å¯æ‰©å±•çš„ EC2 å®ä¾‹ç»„ï¼Œæ—¨åœ¨å¤„ç†å¤§æ•°æ®æ¡†æ¶ï¼Œå¦‚ Apache Hadoop å’Œ Sparkã€‚

ä¸»è¦ç‰¹ç‚¹åŒ…æ‹¬ï¼š

* **é›†ç¾¤åŠ å¯†é»˜è®¤å€¼**ï¼šé»˜è®¤æƒ…å†µä¸‹ï¼Œé›†ç¾¤å†…çš„é™æ€æ•°æ®æœªåŠ å¯†ã€‚ç„¶è€Œï¼Œå¯ç”¨åŠ å¯†å¯è®¿é—®å¤šä¸ªåŠŸèƒ½ï¼š
* **Linux ç»Ÿä¸€å¯†é’¥è®¾ç½®**ï¼šåŠ å¯† EBS é›†ç¾¤å·ã€‚ç”¨æˆ·å¯ä»¥é€‰æ‹© AWS å¯†é’¥ç®¡ç†æœåŠ¡ (KMS) æˆ–è‡ªå®šä¹‰å¯†é’¥æä¾›è€…ã€‚
* **å¼€æº HDFS åŠ å¯†**ï¼šä¸º Hadoop æä¾›ä¸¤ç§åŠ å¯†é€‰é¡¹ï¼š
* å®‰å…¨ Hadoop RPCï¼ˆè¿œç¨‹è¿‡ç¨‹è°ƒç”¨ï¼‰ï¼Œè®¾ç½®ä¸ºéšç§ï¼Œåˆ©ç”¨ç®€å•èº«ä»½éªŒè¯å®‰å…¨å±‚ã€‚
* HDFS å—ä¼ è¾“åŠ å¯†ï¼Œè®¾ç½®ä¸º trueï¼Œä½¿ç”¨ AES-256 ç®—æ³•ã€‚
* **ä¼ è¾“ä¸­çš„åŠ å¯†**ï¼šä¸“æ³¨äºåœ¨ä¼ è¾“è¿‡ç¨‹ä¸­ä¿æŠ¤æ•°æ®ã€‚é€‰é¡¹åŒ…æ‹¬ï¼š
* **å¼€æºä¼ è¾“å±‚å®‰å…¨ (TLS)**ï¼šé€šè¿‡é€‰æ‹©è¯ä¹¦æä¾›è€…å¯ç”¨åŠ å¯†ï¼š
* **PEM**ï¼šéœ€è¦æ‰‹åŠ¨åˆ›å»ºå¹¶å°† PEM è¯ä¹¦æ‰“åŒ…åˆ° zip æ–‡ä»¶ä¸­ï¼Œä» S3 å­˜å‚¨æ¡¶å¼•ç”¨ã€‚
* **è‡ªå®šä¹‰**ï¼šæ¶‰åŠæ·»åŠ è‡ªå®šä¹‰ Java ç±»ä½œä¸ºè¯ä¹¦æä¾›è€…ï¼Œæä¾›åŠ å¯†å·¥ä»¶ã€‚

ä¸€æ—¦å°† TLS è¯ä¹¦æä¾›è€…é›†æˆåˆ°å®‰å…¨é…ç½®ä¸­ï¼Œå¯ä»¥æ¿€æ´»ä»¥ä¸‹ç‰¹å®šäºåº”ç”¨ç¨‹åºçš„åŠ å¯†åŠŸèƒ½ï¼Œå…·ä½“å–å†³äº EMR ç‰ˆæœ¬ï¼š

* **Hadoop**ï¼š
* å¯èƒ½é€šè¿‡ TLS å‡å°‘åŠ å¯†çš„ shuffleã€‚
* ä½¿ç”¨ç®€å•èº«ä»½éªŒè¯å®‰å…¨å±‚çš„å®‰å…¨ Hadoop RPC å’Œä½¿ç”¨ AES-256 çš„ HDFS å—ä¼ è¾“åœ¨é™æ€åŠ å¯†æ—¶æ¿€æ´»ã€‚
* **Presto**ï¼ˆEMR ç‰ˆæœ¬ 5.6.0+ï¼‰ï¼š
* Presto èŠ‚ç‚¹ä¹‹é—´çš„å†…éƒ¨é€šä¿¡ä½¿ç”¨ SSL å’Œ TLS è¿›è¡Œå®‰å…¨ä¿æŠ¤ã€‚
* **Tez Shuffle Handler**ï¼š
* ä½¿ç”¨ TLS è¿›è¡ŒåŠ å¯†ã€‚
* **Spark**ï¼š
* ä½¿ç”¨ TLS è¿›è¡Œ Akka åè®®ã€‚
* ä½¿ç”¨ç®€å•èº«ä»½éªŒè¯å®‰å…¨å±‚å’Œ 3DES è¿›è¡Œå—ä¼ è¾“æœåŠ¡ã€‚
* å¤–éƒ¨ shuffle æœåŠ¡ä½¿ç”¨ç®€å•èº«ä»½éªŒè¯å®‰å…¨å±‚è¿›è¡Œä¿æŠ¤ã€‚

è¿™äº›åŠŸèƒ½å…±åŒå¢å¼ºäº† EMR é›†ç¾¤çš„å®‰å…¨æ€åŠ¿ï¼Œç‰¹åˆ«æ˜¯åœ¨å­˜å‚¨å’Œä¼ è¾“é˜¶æ®µçš„æ•°æ®ä¿æŠ¤æ–¹é¢ã€‚

#### Enumeration
```bash
aws emr list-clusters
aws emr describe-cluster --cluster-id <id>
aws emr list-instances --cluster-id <id>
aws emr list-instance-fleets --cluster-id <id>
aws emr list-steps --cluster-id <id>
aws emr list-notebook-executions
aws emr list-security-configurations
aws emr list-studios #Get studio URLs
```
#### ææƒ

{% content-ref url="../aws-privilege-escalation/aws-emr-privesc.md" %}
[aws-emr-privesc.md](../aws-privilege-escalation/aws-emr-privesc.md)
{% endcontent-ref %}

## å‚è€ƒ

* [https://cloudacademy.com/course/domain-three-designing-secure-applications-and-architectures/elastic-mapreduce-emr-encryption-1/](https://cloudacademy.com/course/domain-three-designing-secure-applications-and-architectures/elastic-mapreduce-emr-encryption-1/)

{% hint style="success" %}
å­¦ä¹ å’Œå®è·µ AWS é»‘å®¢æŠ€æœ¯ï¼š<img src="../../../.gitbook/assets/image (1).png" alt="" data-size="line">[**HackTricks åŸ¹è®­ AWS çº¢é˜Ÿä¸“å®¶ (ARTE)**](https://training.hacktricks.xyz/courses/arte)<img src="../../../.gitbook/assets/image (1).png" alt="" data-size="line">\
å­¦ä¹ å’Œå®è·µ GCP é»‘å®¢æŠ€æœ¯ï¼š<img src="../../../.gitbook/assets/image (2).png" alt="" data-size="line">[**HackTricks åŸ¹è®­ GCP çº¢é˜Ÿä¸“å®¶ (GRTE)**<img src="../../../.gitbook/assets/image (2).png" alt="" data-size="line">](https://training.hacktricks.xyz/courses/grte)

<details>

<summary>æ”¯æŒ HackTricks</summary>

* æŸ¥çœ‹ [**è®¢é˜…è®¡åˆ’**](https://github.com/sponsors/carlospolop)!
* **åŠ å…¥** ğŸ’¬ [**Discord ç¾¤ç»„**](https://discord.gg/hRep4RUj7f) æˆ– [**Telegram ç¾¤ç»„**](https://t.me/peass) æˆ– **å…³æ³¨** æˆ‘ä»¬çš„ **Twitter** ğŸ¦ [**@hacktricks\_live**](https://twitter.com/hacktricks\_live)**.**
* **é€šè¿‡å‘** [**HackTricks**](https://github.com/carlospolop/hacktricks) å’Œ [**HackTricks Cloud**](https://github.com/carlospolop/hacktricks-cloud) GitHub ä»“åº“æäº¤ PR æ¥åˆ†äº«é»‘å®¢æŠ€å·§ã€‚

</details>
{% endhint %}
