# AWS - EMR Enum

{% hint style="success" %}
Learn & practice AWS Hacking:<img src="../../../.gitbook/assets/image (1) (1).png" alt="" data-size="line">[**HackTricks Training AWS Red Team Expert (ARTE)**](https://training.hacktricks.xyz/courses/arte)<img src="../../../.gitbook/assets/image (1) (1).png" alt="" data-size="line">\
Learn & practice GCP Hacking: <img src="../../../.gitbook/assets/image (2).png" alt="" data-size="line">[**HackTricks Training GCP Red Team Expert (GRTE)**<img src="../../../.gitbook/assets/image (2).png" alt="" data-size="line">](https://training.hacktricks.xyz/courses/grte)

<details>

<summary>Support HackTricks</summary>

* Check the [**subscription plans**](https://github.com/sponsors/carlospolop)!
* **Join the** 💬 [**Discord group**](https://discord.gg/hRep4RUj7f) or the [**telegram group**](https://t.me/peass) or **follow** us on **Twitter** 🐦 [**@hacktricks\_live**](https://twitter.com/hacktricks\_live)**.**
* **Share hacking tricks by submitting PRs to the** [**HackTricks**](https://github.com/carlospolop/hacktricks) and [**HackTricks Cloud**](https://github.com/carlospolop/hacktricks-cloud) github repos.

</details>
{% endhint %}

## EMR

AWS'nin Elastic MapReduce (EMR) hizmeti, 4.8.0 sürümünden itibaren, EMR kümeleri içinde dinlenme ve aktarım halindeki veriler için şifreleme ayarlarını belirtme imkanı sunarak veri korumasını artıran bir **güvenlik yapılandırması** özelliği tanıttı. Bu kümeler, Apache Hadoop ve Spark gibi büyük veri çerçevelerini işlemek için tasarlanmış ölçeklenebilir EC2 örnek gruplarıdır.

Ana özellikler şunlardır:

* **Küme Şifreleme Varsayılanı**: Varsayılan olarak, bir küme içindeki dinlenme halindeki veriler şifrelenmez. Ancak, şifrelemenin etkinleştirilmesi, birkaç özelliğe erişim sağlar:
* **Linux Unified Key Setup**: EBS küme hacimlerini şifreler. Kullanıcılar AWS Anahtar Yönetim Servisi (KMS) veya özel bir anahtar sağlayıcı seçebilir.
* **Açık Kaynak HDFS Şifrelemesi**: Hadoop için iki şifreleme seçeneği sunar:
* Güvenli Hadoop RPC (Uzak Prosedür Çağrısı), gizlilik ayarına sahip olup, Basit Kimlik Doğrulama Güvenlik Katmanı'nı kullanır.
* HDFS Blok aktarım şifrelemesi, true olarak ayarlanmış olup, AES-256 algoritmasını kullanır.
* **Aktarım Halinde Şifreleme**: Verilerin aktarım sırasında güvenliğini sağlamaya odaklanır. Seçenekler şunlardır:
* **Açık Kaynak Taşıma Katmanı Güvenliği (TLS)**: Şifreleme, bir sertifika sağlayıcısı seçilerek etkinleştirilebilir:
* **PEM**: PEM sertifikalarının manuel olarak oluşturulması ve bir zip dosyasına paketlenmesi gereklidir, S3 kovasından referans alınır.
* **Özel**: Şifreleme nesneleri sağlayan bir sertifika sağlayıcısı olarak özel bir Java sınıfı eklemeyi içerir.

Bir TLS sertifika sağlayıcısı güvenlik yapılandırmasına entegre edildikten sonra, EMR sürümüne bağlı olarak aşağıdaki uygulama spesifik şifreleme özellikleri etkinleştirilebilir:

* **Hadoop**:
* TLS kullanarak şifrelenmiş karıştırmayı azaltabilir.
* Basit Kimlik Doğrulama Güvenlik Katmanı ile Güvenli Hadoop RPC ve AES-256 ile HDFS Blok Aktarımı, dinlenme halindeki şifreleme ile etkinleştirilir.
* **Presto** (EMR sürüm 5.6.0+):
* Presto düğümleri arasındaki iç iletişim SSL ve TLS kullanılarak güvence altına alınır.
* **Tez Shuffle Handler**:
* Şifreleme için TLS kullanır.
* **Spark**:
* Akka protokolü için TLS kullanır.
* Blok Aktarım Servisi için Basit Kimlik Doğrulama Güvenlik Katmanı ve 3DES kullanır.
* Dış karıştırma servisi, Basit Kimlik Doğrulama Güvenlik Katmanı ile güvence altına alınır.

Bu özellikler, özellikle depolama ve iletim aşamalarında veri koruma açısından EMR kümelerinin güvenlik duruşunu artırır.

#### Enumeration
```bash
aws emr list-clusters
aws emr describe-cluster --cluster-id <id>
aws emr list-instances --cluster-id <id>
aws emr list-instance-fleets --cluster-id <id>
aws emr list-steps --cluster-id <id>
aws emr list-notebook-executions
aws emr list-security-configurations
aws emr list-studios #Get studio URLs
```
#### Privesc

{% content-ref url="../aws-privilege-escalation/aws-emr-privesc.md" %}
[aws-emr-privesc.md](../aws-privilege-escalation/aws-emr-privesc.md)
{% endcontent-ref %}

## Referanslar

* [https://cloudacademy.com/course/domain-three-designing-secure-applications-and-architectures/elastic-mapreduce-emr-encryption-1/](https://cloudacademy.com/course/domain-three-designing-secure-applications-and-architectures/elastic-mapreduce-emr-encryption-1/)

{% hint style="success" %}
AWS Hacking öğrenin ve pratik yapın:<img src="../../../.gitbook/assets/image (1) (1).png" alt="" data-size="line">[**HackTricks Training AWS Red Team Expert (ARTE)**](https://training.hacktricks.xyz/courses/arte)<img src="../../../.gitbook/assets/image (1) (1).png" alt="" data-size="line">\
GCP Hacking öğrenin ve pratik yapın: <img src="../../../.gitbook/assets/image (2).png" alt="" data-size="line">[**HackTricks Training GCP Red Team Expert (GRTE)**<img src="../../../.gitbook/assets/image (2).png" alt="" data-size="line">](https://training.hacktricks.xyz/courses/grte)

<details>

<summary>HackTricks'i Destekleyin</summary>

* [**abonelik planlarını**](https://github.com/sponsors/carlospolop) kontrol edin!
* **💬 [**Discord grubuna**](https://discord.gg/hRep4RUj7f) veya [**telegram grubuna**](https://t.me/peass) katılın ya da **Twitter'da** 🐦 [**@hacktricks\_live**](https://twitter.com/hacktricks\_live)**'i takip edin.**
* **Hacking ipuçlarını paylaşmak için** [**HackTricks**](https://github.com/carlospolop/hacktricks) ve [**HackTricks Cloud**](https://github.com/carlospolop/hacktricks-cloud) github reposuna PR gönderin.

</details>
{% endhint %}
