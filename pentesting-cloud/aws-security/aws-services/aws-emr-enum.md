# AWS - EMR Enum

{% hint style="success" %}
Learn & practice AWS Hacking:<img src="../../../.gitbook/assets/image (1) (1).png" alt="" data-size="line">[**HackTricks Training AWS Red Team Expert (ARTE)**](https://training.hacktricks.xyz/courses/arte)<img src="../../../.gitbook/assets/image (1) (1).png" alt="" data-size="line">\
Learn & practice GCP Hacking: <img src="../../../.gitbook/assets/image (2).png" alt="" data-size="line">[**HackTricks Training GCP Red Team Expert (GRTE)**<img src="../../../.gitbook/assets/image (2).png" alt="" data-size="line">](https://training.hacktricks.xyz/courses/grte)

<details>

<summary>Support HackTricks</summary>

* Check the [**subscription plans**](https://github.com/sponsors/carlospolop)!
* **Join the** ЁЯТм [**Discord group**](https://discord.gg/hRep4RUj7f) or the [**telegram group**](https://t.me/peass) or **follow** us on **Twitter** ЁЯРж [**@hacktricks\_live**](https://twitter.com/hacktricks\_live)**.**
* **Share hacking tricks by submitting PRs to the** [**HackTricks**](https://github.com/carlospolop/hacktricks) and [**HackTricks Cloud**](https://github.com/carlospolop/hacktricks-cloud) github repos.

</details>
{% endhint %}

## EMR

AWS рдХреА Elastic MapReduce (EMR) рд╕реЗрд╡рд╛, рд╕рдВрд╕реНрдХрд░рдг 4.8.0 рд╕реЗ рд╢реБрд░реВ рд╣реЛрдХрд░, рдПрдХ **рд╕реБрд░рдХреНрд╖рд╛ рдХреЙрдиреНрдлрд╝рд┐рдЧрд░реЗрд╢рди** рд╕реБрд╡рд┐рдзрд╛ рдкреЗрд╢ рдХрд░рддреА рд╣реИ рдЬреЛ рдбреЗрдЯрд╛ рд╕реБрд░рдХреНрд╖рд╛ рдХреЛ рдмрдврд╝рд╛рддреА рд╣реИ, рдЬрд┐рд╕рд╕реЗ рдЙрдкрдпреЛрдЧрдХрд░реНрддрд╛ EMR рдХреНрд▓рд╕реНрдЯрд░реЛрдВ рдХреЗ рднреАрддрд░ рдбреЗрдЯрд╛ рдХреЛ рд╕реНрдерд┐рд░ рдФрд░ рд╕рдВрдЪрд░рдг рдореЗрдВ рдПрдиреНрдХреНрд░рд┐рдкреНрд╢рди рд╕реЗрдЯрд┐рдВрдЧреНрд╕ рдирд┐рд░реНрджрд┐рд╖реНрдЯ рдХрд░ рд╕рдХрддреЗ рд╣реИрдВ, рдЬреЛ рдмрдбрд╝реЗ рдбреЗрдЯрд╛ рдврд╛рдВрдЪреЗ рдЬреИрд╕реЗ Apache Hadoop рдФрд░ Spark рдХреЛ рд╕рдВрд╕рд╛рдзрд┐рдд рдХрд░рдиреЗ рдХреЗ рд▓рд┐рдП рдбрд┐рдЬрд╝рд╛рдЗрди рдХрд┐рдП рдЧрдП EC2 рдЗрдВрд╕реНрдЯреЗрдВрд╕ рдХреЗ рд╕реНрдХреЗрд▓реЗрдмрд▓ рд╕рдореВрд╣ рд╣реИрдВред

рдореБрдЦреНрдп рд╡рд┐рд╢реЗрд╖рддрд╛рдПрдБ рд╢рд╛рдорд┐рд▓ рд╣реИрдВ:

* **рдХреНрд▓рд╕реНрдЯрд░ рдПрдиреНрдХреНрд░рд┐рдкреНрд╢рди рдбрд┐рдлрд╝реЙрд▓реНрдЯ**: рдбрд┐рдлрд╝реЙрд▓реНрдЯ рд░реВрдк рд╕реЗ, рдПрдХ рдХреНрд▓рд╕реНрдЯрд░ рдХреЗ рднреАрддрд░ рд╕реНрдерд┐рд░ рдбреЗрдЯрд╛ рдПрдиреНрдХреНрд░рд┐рдкреНрдЯ рдирд╣реАрдВ рд╣реЛрддрд╛ рд╣реИред рд╣рд╛рд▓рд╛рдБрдХрд┐, рдПрдиреНрдХреНрд░рд┐рдкреНрд╢рди рд╕рдХреНрд╖рдо рдХрд░рдиреЗ рд╕реЗ рдХрдИ рд╕реБрд╡рд┐рдзрд╛рдУрдВ рддрдХ рдкрд╣реБрдБрдЪ рдорд┐рд▓рддреА рд╣реИ:
* **Linux Unified Key Setup**: EBS рдХреНрд▓рд╕реНрдЯрд░ рд╡реЙрд▓реНрдпреВрдо рдХреЛ рдПрдиреНрдХреНрд░рд┐рдкреНрдЯ рдХрд░рддрд╛ рд╣реИред рдЙрдкрдпреЛрдЧрдХрд░реНрддрд╛ AWS Key Management Service (KMS) рдпрд╛ рдПрдХ рдХрд╕реНрдЯрдо рдХреБрдВрдЬреА рдкреНрд░рджрд╛рддрд╛ рдХрд╛ рд╡рд┐рдХрд▓реНрдк рдЪреБрди рд╕рдХрддреЗ рд╣реИрдВред
* **рдУрдкрди-рд╕реЛрд░реНрд╕ HDFS рдПрдиреНрдХреНрд░рд┐рдкреНрд╢рди**: Hadoop рдХреЗ рд▓рд┐рдП рджреЛ рдПрдиреНрдХреНрд░рд┐рдкреНрд╢рди рд╡рд┐рдХрд▓реНрдк рдкреНрд░рджрд╛рди рдХрд░рддрд╛ рд╣реИ:
* рд╕реБрд░рдХреНрд╖рд┐рдд Hadoop RPC (Remote Procedure Call), рдЧреЛрдкрдиреАрдпрддрд╛ рдкрд░ рд╕реЗрдЯ, Simple Authentication Security Layer рдХрд╛ рд▓рд╛рдн рдЙрдард╛рддрд╛ рд╣реИред
* HDFS рдмреНрд▓реЙрдХ рдЯреНрд░рд╛рдВрд╕рдлрд░ рдПрдиреНрдХреНрд░рд┐рдкреНрд╢рди, рд╕рддреНрдпрд╛рдкрд┐рдд, AES-256 рдПрд▓реНрдЧреЛрд░рд┐рджрдо рдХрд╛ рдЙрдкрдпреЛрдЧ рдХрд░рддрд╛ рд╣реИред
* **рд╕рдВрдЪрд░рдг рдореЗрдВ рдПрдиреНрдХреНрд░рд┐рдкреНрд╢рди**: рдбреЗрдЯрд╛ рдХреЛ рд╕реНрдерд╛рдирд╛рдВрддрд░рд┐рдд рдХрд░рддреЗ рд╕рдордп рд╕реБрд░рдХреНрд╖рд╛ рдкрд░ рдзреНрдпрд╛рди рдХреЗрдВрджреНрд░рд┐рдд рдХрд░рддрд╛ рд╣реИред рд╡рд┐рдХрд▓реНрдкреЛрдВ рдореЗрдВ рд╢рд╛рдорд┐рд▓ рд╣реИрдВ:
* **рдУрдкрди-рд╕реЛрд░реНрд╕ рдЯреНрд░рд╛рдВрд╕рдкреЛрд░реНрдЯ рд▓реЗрдпрд░ рд╕рд┐рдХреНрдпреЛрд░рд┐рдЯреА (TLS)**: рдПрдиреНрдХреНрд░рд┐рдкреНрд╢рди рдХреЛ рд╕рдХреНрд╖рдо рдХрд░рдиреЗ рдХреЗ рд▓рд┐рдП рдПрдХ рдкреНрд░рдорд╛рдгрдкрддреНрд░ рдкреНрд░рджрд╛рддрд╛ рдЪреБрдирдиреЗ рдХреА рдЖрд╡рд╢реНрдпрдХрддрд╛ рд╣реЛрддреА рд╣реИ:
* **PEM**: PEM рдкреНрд░рдорд╛рдгрдкрддреНрд░реЛрдВ рдХреЛ рдореИрдиреНрдпреБрдЕрд▓ рд░реВрдк рд╕реЗ рдмрдирд╛рдиреЗ рдФрд░ рдПрдХ рдЬрд╝рд┐рдк рдлрд╝рд╛рдЗрд▓ рдореЗрдВ рдмрдВрдбрд▓ рдХрд░рдиреЗ рдХреА рдЖрд╡рд╢реНрдпрдХрддрд╛ рд╣реЛрддреА рд╣реИ, рдЬрд┐рд╕реЗ S3 рдмрдХреЗрдЯ рд╕реЗ рд╕рдВрджрд░реНрднрд┐рдд рдХрд┐рдпрд╛ рдЬрд╛рддрд╛ рд╣реИред
* **рдХрд╕реНрдЯрдо**: рдПрдХ рдХрд╕реНрдЯрдо Java рдХреНрд▓рд╛рд╕ рдХреЛ рдкреНрд░рдорд╛рдгрдкрддреНрд░ рдкреНрд░рджрд╛рддрд╛ рдХреЗ рд░реВрдк рдореЗрдВ рдЬреЛрдбрд╝рдиреЗ рдореЗрдВ рд╢рд╛рдорд┐рд▓ рд╣реИ рдЬреЛ рдПрдиреНрдХреНрд░рд┐рдкреНрд╢рди рдЖрд░реНрдЯрд┐рдлреИрдХреНрдЯ рдкреНрд░рджрд╛рди рдХрд░рддрд╛ рд╣реИред

рдПрдХ рдмрд╛рд░ рдЬрдм TLS рдкреНрд░рдорд╛рдгрдкрддреНрд░ рдкреНрд░рджрд╛рддрд╛ рд╕реБрд░рдХреНрд╖рд╛ рдХреЙрдиреНрдлрд╝рд┐рдЧрд░реЗрд╢рди рдореЗрдВ рдПрдХреАрдХреГрдд рд╣реЛ рдЬрд╛рддрд╛ рд╣реИ, рддреЛ рдирд┐рдореНрдирд▓рд┐рдЦрд┐рдд рдПрдкреНрд▓рд┐рдХреЗрд╢рди-рд╡рд┐рд╢рд┐рд╖реНрдЯ рдПрдиреНрдХреНрд░рд┐рдкреНрд╢рди рд╕реБрд╡рд┐рдзрд╛рдПрдБ рд╕рдХреНрд░рд┐рдп рдХреА рдЬрд╛ рд╕рдХрддреА рд╣реИрдВ, рдЬреЛ EMR рд╕рдВрд╕реНрдХрд░рдг рдХреЗ рдЖрдзрд╛рд░ рдкрд░ рднрд┐рдиреНрди рд╣реЛрддреА рд╣реИрдВ:

* **Hadoop**:
* TLS рдХрд╛ рдЙрдкрдпреЛрдЧ рдХрд░рдХреЗ рдПрдиреНрдХреНрд░рд┐рдкреНрдЯреЗрдб рд╢рдлрд▓ рдХреЛ рдХрдо рдХрд░ рд╕рдХрддрд╛ рд╣реИред
* Simple Authentication Security Layer рдХреЗ рд╕рд╛рде рд╕реБрд░рдХреНрд╖рд┐рдд Hadoop RPC рдФрд░ AES-256 рдХреЗ рд╕рд╛рде HDFS рдмреНрд▓реЙрдХ рдЯреНрд░рд╛рдВрд╕рдлрд░ рдХреЛ рд╕реНрдерд┐рд░ рдПрдиреНрдХреНрд░рд┐рдкреНрд╢рди рдХреЗ рд╕рд╛рде рд╕рдХреНрд░рд┐рдп рдХрд┐рдпрд╛ рдЧрдпрд╛ рд╣реИред
* **Presto** (EMR рд╕рдВрд╕реНрдХрд░рдг 5.6.0+):
* Presto рдиреЛрдбреНрд╕ рдХреЗ рдмреАрдЪ рдЖрдВрддрд░рд┐рдХ рд╕рдВрдЪрд╛рд░ SSL рдФрд░ TLS рдХрд╛ рдЙрдкрдпреЛрдЧ рдХрд░рдХреЗ рд╕реБрд░рдХреНрд╖рд┐рдд рд╣реИред
* **Tez Shuffle Handler**:
* рдПрдиреНрдХреНрд░рд┐рдкреНрд╢рди рдХреЗ рд▓рд┐рдП TLS рдХрд╛ рдЙрдкрдпреЛрдЧ рдХрд░рддрд╛ рд╣реИред
* **Spark**:
* Akka рдкреНрд░реЛрдЯреЛрдХреЙрд▓ рдХреЗ рд▓рд┐рдП TLS рдХрд╛ рдЙрдкрдпреЛрдЧ рдХрд░рддрд╛ рд╣реИред
* рдмреНрд▓реЙрдХ рдЯреНрд░рд╛рдВрд╕рдлрд░ рд╕реЗрд╡рд╛ рдХреЗ рд▓рд┐рдП Simple Authentication Security Layer рдФрд░ 3DES рдХрд╛ рдЙрдкрдпреЛрдЧ рдХрд░рддрд╛ рд╣реИред
* рдмрд╛рд╣рд░реА рд╢рдлрд▓ рд╕реЗрд╡рд╛ рдХреЛ Simple Authentication Security Layer рдХреЗ рд╕рд╛рде рд╕реБрд░рдХреНрд╖рд┐рдд рдХрд┐рдпрд╛ рдЧрдпрд╛ рд╣реИред

рдпреЗ рд╕реБрд╡рд┐рдзрд╛рдПрдБ рд╕рд╛рдореВрд╣рд┐рдХ рд░реВрдк рд╕реЗ EMR рдХреНрд▓рд╕реНрдЯрд░реЛрдВ рдХреА рд╕реБрд░рдХреНрд╖рд╛ рд╕реНрдерд┐рддрд┐ рдХреЛ рдмрдврд╝рд╛рддреА рд╣реИрдВ, рд╡рд┐рд╢реЗрд╖ рд░реВрдк рд╕реЗ рднрдВрдбрд╛рд░рдг рдФрд░ рд╕рдВрдЪрд░рдг рдЪрд░рдгреЛрдВ рдХреЗ рджреМрд░рд╛рди рдбреЗрдЯрд╛ рд╕реБрд░рдХреНрд╖рд╛ рдХреЗ рд╕рдВрдмрдВрдз рдореЗрдВред

#### Enumeration
```bash
aws emr list-clusters
aws emr describe-cluster --cluster-id <id>
aws emr list-instances --cluster-id <id>
aws emr list-instance-fleets --cluster-id <id>
aws emr list-steps --cluster-id <id>
aws emr list-notebook-executions
aws emr list-security-configurations
aws emr list-studios #Get studio URLs
```
#### Privesc

{% content-ref url="../aws-privilege-escalation/aws-emr-privesc.md" %}
[aws-emr-privesc.md](../aws-privilege-escalation/aws-emr-privesc.md)
{% endcontent-ref %}

## рд╕рдВрджрд░реНрдн

* [https://cloudacademy.com/course/domain-three-designing-secure-applications-and-architectures/elastic-mapreduce-emr-encryption-1/](https://cloudacademy.com/course/domain-three-designing-secure-applications-and-architectures/elastic-mapreduce-emr-encryption-1/)

{% hint style="success" %}
AWS рд╣реИрдХрд┐рдВрдЧ рд╕реАрдЦреЗрдВ рдФрд░ рдЕрднреНрдпрд╛рд╕ рдХрд░реЗрдВ:<img src="../../../.gitbook/assets/image (1) (1).png" alt="" data-size="line">[**HackTricks Training AWS Red Team Expert (ARTE)**](https://training.hacktricks.xyz/courses/arte)<img src="../../../.gitbook/assets/image (1) (1).png" alt="" data-size="line">\
GCP рд╣реИрдХрд┐рдВрдЧ рд╕реАрдЦреЗрдВ рдФрд░ рдЕрднреНрдпрд╛рд╕ рдХрд░реЗрдВ: <img src="../../../.gitbook/assets/image (2).png" alt="" data-size="line">[**HackTricks Training GCP Red Team Expert (GRTE)**<img src="../../../.gitbook/assets/image (2).png" alt="" data-size="line">](https://training.hacktricks.xyz/courses/grte)

<details>

<summary>HackTricks рдХрд╛ рд╕рдорд░реНрдерди рдХрд░реЗрдВ</summary>

* [**рд╕рджрд╕реНрдпрддрд╛ рдпреЛрдЬрдирд╛рдПрдБ**](https://github.com/sponsors/carlospolop) рджреЗрдЦреЗрдВ!
* **ЁЯТм [**Discord рд╕рдореВрд╣**](https://discord.gg/hRep4RUj7f) рдпрд╛ [**telegram рд╕рдореВрд╣**](https://t.me/peass) рдореЗрдВ рд╢рд╛рдорд┐рд▓ рд╣реЛрдВ рдпрд╛ **Twitter** рдкрд░ рд╣рдореЗрдВ **рдлреЙрд▓реЛ** рдХрд░реЗрдВ ЁЯРж [**@hacktricks\_live**](https://twitter.com/hacktricks\_live)**.**
* **рд╣реИрдХрд┐рдВрдЧ рдЯреНрд░рд┐рдХреНрд╕ рд╕рд╛рдЭрд╛ рдХрд░реЗрдВ рдФрд░ [**HackTricks**](https://github.com/carlospolop/hacktricks) рдФрд░ [**HackTricks Cloud**](https://github.com/carlospolop/hacktricks-cloud) github repos рдореЗрдВ PRs рд╕рдмрдорд┐рдЯ рдХрд░реЗрдВред**

</details>
{% endhint %}
