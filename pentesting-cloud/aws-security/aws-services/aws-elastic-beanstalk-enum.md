# AWS - Elastic Beanstalk Enum

{% hint style="success" %}
AWS Hacking Ã¶ÄŸrenin ve pratik yapÄ±n:<img src="/.gitbook/assets/image.png" alt="" data-size="line">[**HackTricks Training AWS Red Team Expert (ARTE)**](https://training.hacktricks.xyz/courses/arte)<img src="/.gitbook/assets/image.png" alt="" data-size="line">\
GCP Hacking Ã¶ÄŸrenin ve pratik yapÄ±n: <img src="/.gitbook/assets/image (2).png" alt="" data-size="line">[**HackTricks Training GCP Red Team Expert (GRTE)**<img src="/.gitbook/assets/image (2).png" alt="" data-size="line">](https://training.hacktricks.xyz/courses/grte)

<details>

<summary>HackTricks'i Destekleyin</summary>

* [**Abonelik planlarÄ±nÄ±**](https://github.com/sponsors/carlospolop) kontrol edin!
* **ğŸ’¬ Discord grubuna** [**katÄ±lÄ±n**](https://discord.gg/hRep4RUj7f) veya [**telegram grubuna**](https://t.me/peass) katÄ±lÄ±n ya da **Twitter'da** ğŸ¦ [**@hacktricks\_live**](https://twitter.com/hacktricks\_live)**'Ä± takip edin.**
* **HackTricks'e PR gÃ¶ndererek hacking ipuÃ§larÄ±nÄ± paylaÅŸÄ±n** [**HackTricks**](https://github.com/carlospolop/hacktricks) ve [**HackTricks Cloud**](https://github.com/carlospolop/hacktricks-cloud) GitHub depolarÄ±na.

</details>
{% endhint %}

## Elastic Beanstalk

Amazon Elastic Beanstalk, **web uygulamalarÄ± ve hizmetleri daÄŸÄ±tmak, yÃ¶netmek ve Ã¶lÃ§eklendirmek** iÃ§in basitleÅŸtirilmiÅŸ bir platform saÄŸlar. Java, .NET, PHP, Node.js, Python, Ruby ve Go gibi Ã§eÅŸitli programlama dilleri ve Ã§erÃ§eveleri destekler, ayrÄ±ca Docker konteynerleri de destekler. Hizmet, Apache, Nginx, Passenger ve IIS gibi yaygÄ±n olarak kullanÄ±lan sunucularla uyumludur.

Elastic Beanstalk, **uygulamalarÄ±nÄ±zÄ± AWS bulutuna daÄŸÄ±tmanÄ±n** basit ve esnek bir yolunu saÄŸlar, altyapÄ±nÄ±n ayrÄ±ntÄ±larÄ±yla ilgilenmenize gerek kalmaz. Kapasite **saÄŸlama**, yÃ¼k **dengeleme**, **Ã¶lÃ§eklendirme** ve uygulama saÄŸlÄ±ÄŸÄ± **izleme** gibi ayrÄ±ntÄ±larÄ± **otomatik olarak** halleder, bÃ¶ylece kodunuzu yazmaya ve daÄŸÄ±tmaya odaklanabilirsiniz.

Elastic Beanstalk tarafÄ±ndan oluÅŸturulan altyapÄ±, **EC2**'deki **Autoscaling** GruplarÄ± tarafÄ±ndan yÃ¶netilir (bir yÃ¼k dengeleyici ile). Bu, gÃ¼nÃ¼n sonunda, **host'u ele geÃ§irirseniz**, EC2 hakkÄ±nda bilgi sahibi olmanÄ±z gerektiÄŸi anlamÄ±na gelir:

{% content-ref url="aws-ec2-ebs-elb-ssm-vpc-and-vpn-enum/" %}
[aws-ec2-ebs-elb-ssm-vpc-and-vpn-enum](aws-ec2-ebs-elb-ssm-vpc-and-vpn-enum/)
{% endcontent-ref %}

AyrÄ±ca, Docker kullanÄ±lÄ±yorsa, **ECS** kullanmak mÃ¼mkÃ¼ndÃ¼r.

{% content-ref url="aws-eks-enum.md" %}
[aws-eks-enum.md](aws-eks-enum.md)
{% endcontent-ref %}

### Application & Environments

AWS Elastic Beanstalk'ta, "application" ve "environment" kavramlarÄ± farklÄ± amaÃ§lara hizmet eder ve daÄŸÄ±tÄ±m sÃ¼recinde farklÄ± rollere sahiptir.

#### Application

* Elastic Beanstalk'ta bir application, **uygulamanÄ±zÄ±n kaynak kodu, ortamlarÄ± ve yapÄ±landÄ±rmalarÄ± iÃ§in mantÄ±ksal bir kapsayÄ±cÄ±dÄ±r**. FarklÄ± uygulama kodu sÃ¼rÃ¼mlerini bir araya getirir ve bunlarÄ± tek bir varlÄ±k olarak yÃ¶netmenizi saÄŸlar.
* Bir application oluÅŸturduÄŸunuzda, bir ad ve aÃ§Ä±klama saÄŸlarsÄ±nÄ±z, ancak bu aÅŸamada hiÃ§bir kaynak saÄŸlanmaz. Bu, kodunuzu ve ilgili kaynaklarÄ± organize etmek ve yÃ¶netmek iÃ§in basit bir yoldur.
* Bir application iÃ§inde **birden fazla uygulama sÃ¼rÃ¼mÃ¼ne** sahip olabilirsiniz. Her sÃ¼rÃ¼m, kodunuzun belirli bir sÃ¼rÃ¼mÃ¼ne karÅŸÄ±lÄ±k gelir ve bir veya daha fazla ortama daÄŸÄ±tÄ±labilir.

#### Environment

* Bir environment, AWS altyapÄ±sÄ±nda Ã§alÄ±ÅŸan **uygulamanÄ±zÄ±n saÄŸlanmÄ±ÅŸ bir Ã¶rneÄŸidir**. **Uygulama kodunuzun daÄŸÄ±tÄ±ldÄ±ÄŸÄ± ve Ã§alÄ±ÅŸtÄ±rÄ±ldÄ±ÄŸÄ± yerdir**. Elastic Beanstalk, environment yapÄ±landÄ±rmasÄ±na dayalÄ± olarak gerekli kaynaklarÄ± (Ã¶rneÄŸin, EC2 instance'larÄ±, yÃ¼k dengeleyiciler, otomatik Ã¶lÃ§eklendirme gruplarÄ±, veritabanlarÄ±) saÄŸlar.
* **Her environment, uygulamanÄ±zÄ±n tek bir sÃ¼rÃ¼mÃ¼nÃ¼ Ã§alÄ±ÅŸtÄ±rÄ±r** ve geliÅŸtirme, test, hazÄ±rlÄ±k ve Ã¼retim gibi farklÄ± amaÃ§lar iÃ§in birden fazla environment'a sahip olabilirsiniz.
* Bir environment oluÅŸturduÄŸunuzda, bir platform (Ã¶rneÄŸin, Java, .NET, Node.js, vb.) ve bir environment tÃ¼rÃ¼ (Ã¶rneÄŸin, web sunucusu veya iÅŸÃ§i) seÃ§ersiniz. AyrÄ±ca, altyapÄ± ve uygulama ayarlarÄ±nÄ±n Ã§eÅŸitli yÃ¶nlerini kontrol etmek iÃ§in environment yapÄ±landÄ±rmasÄ±nÄ± Ã¶zelleÅŸtirebilirsiniz.

### 2 tÃ¼r Environment

1. **Web Server Environment**: **Web uygulamalarÄ±nÄ± ve API'leri barÄ±ndÄ±rmak ve sunmak** iÃ§in tasarlanmÄ±ÅŸtÄ±r. Bu uygulamalar genellikle gelen HTTP/HTTPS isteklerini iÅŸler. Web sunucusu environment'Ä±, gelen trafiÄŸi yÃ¶netmek, kapasiteyi yÃ¶netmek ve uygulamanÄ±n yÃ¼ksek kullanÄ±labilirliÄŸini saÄŸlamak iÃ§in **EC2 instance'larÄ±, yÃ¼k dengeleyiciler ve otomatik Ã¶lÃ§eklendirme** gruplarÄ± gibi kaynaklarÄ± saÄŸlar.
2. **Worker Environment**: **Arka plan gÃ¶revlerini** iÅŸlemek iÃ§in tasarlanmÄ±ÅŸtÄ±r, bu gÃ¶revler genellikle zaman alÄ±cÄ± veya kaynak yoÄŸun iÅŸlemlerdir ve mÃ¼ÅŸterilere anÄ±nda yanÄ±t gerektirmez. Ä°ÅŸÃ§i environment'Ä±, **EC2 instance'larÄ± ve otomatik Ã¶lÃ§eklendirme gruplarÄ±** gibi kaynaklarÄ± saÄŸlar, ancak **yÃ¼k dengeleyiciye sahip deÄŸildir** Ã§Ã¼nkÃ¼ doÄŸrudan HTTP/HTTPS isteklerini iÅŸlemez. Bunun yerine, iÅŸlediÄŸi gÃ¶revler ile iÅŸÃ§i environment'Ä± arasÄ±nda bir tampon gÃ¶revi gÃ¶ren **Amazon Simple Queue Service (SQS) kuyruÄŸundan** gÃ¶revleri tÃ¼ketir.

### GÃ¼venlik

Beanstalk'ta bir uygulama oluÅŸtururken seÃ§ilmesi gereken 3 Ã§ok Ã¶nemli gÃ¼venlik seÃ§eneÄŸi vardÄ±r:

* **EC2 key pair**: Bu, uygulamayÄ± Ã§alÄ±ÅŸtÄ±ran EC2 instance'larÄ±na eriÅŸebilecek **SSH anahtarÄ±** olacaktÄ±r.
* **IAM instance profile**: Bu, instance'larÄ±n sahip olacaÄŸÄ± **instance profili**dir (**IAM ayrÄ±calÄ±klarÄ±**).
* Otomatik olarak oluÅŸturulan rol, **`aws-elasticbeanstalk-ec2-role`** olarak adlandÄ±rÄ±lÄ±r ve AWS yÃ¶netilen politikalarÄ±nÄ± kullanarak tÃ¼m ECS, tÃ¼m SQS, DynamoDB elasticbeanstalk ve elasticbeanstalk S3 Ã¼zerinde bazÄ± ilginÃ§ eriÅŸimlere sahiptir: [AWSElasticBeanstalkWebTier](https://us-east-1.console.aws.amazon.com/iam/home#/policies/arn:aws:iam::aws:policy/AWSElasticBeanstalkWebTier), [AWSElasticBeanstalkMulticontainerDocker](https://us-east-1.console.aws.amazon.com/iam/home#/policies/arn:aws:iam::aws:policy/AWSElasticBeanstalkMulticontainerDocker), [AWSElasticBeanstalkWorkerTier](https://us-east-1.console.aws.amazon.com/iam/home#/policies/arn:aws:iam::aws:policy/AWSElasticBeanstalkWorkerTier).
* **Service role**: Bu, AWS hizmetinin gerekli tÃ¼m eylemleri gerÃ§ekleÅŸtirmek iÃ§in kullanacaÄŸÄ± **roldÃ¼r**. BildiÄŸim kadarÄ±yla, normal bir AWS kullanÄ±cÄ±sÄ± bu role eriÅŸemez.
* AWS tarafÄ±ndan oluÅŸturulan bu rol, **`aws-elasticbeanstalk-service-role`** olarak adlandÄ±rÄ±lÄ±r ve AWS yÃ¶netilen politikalarÄ±nÄ± kullanÄ±r: [AWSElasticBeanstalkEnhancedHealth](https://us-east-1.console.aws.amazon.com/iam/home#/policies/arn:aws:iam::aws:policy/service-role/AWSElasticBeanstalkEnhancedHealth) ve [AWSElasticBeanstalkManagedUpdatesCustomerRolePolicy](https://us-east-1.console.aws.amazon.com/iamv2/home?region=us-east-1#/roles/details/aws-elasticbeanstalk-service-role?section=permissions)

VarsayÄ±lan olarak **metadata version 1 devre dÄ±ÅŸÄ±dÄ±r**:

<figure><img src="../../../.gitbook/assets/image (103).png" alt=""><figcaption></figcaption></figure>

### Maruz Kalma

Beanstalk verileri, **`elasticbeanstalk-<region>-<acc-id>`** (AWS konsolunda oluÅŸturulmuÅŸsa) adÄ±nda bir **S3 bucket**'Ä±nda saklanÄ±r. Bu bucket iÃ§inde, uygulamanÄ±n yÃ¼klenmiÅŸ **kaynak kodunu** bulacaksÄ±nÄ±z.

OluÅŸturulan web sayfasÄ±nÄ±n **URL'si** **`http://<webapp-name>-env.<random>.<region>.elasticbeanstalk.com/`**

{% hint style="warning" %}
Bucket Ã¼zerinde **okuma eriÅŸimi** elde ederseniz, **kaynak kodunu okuyabilir** ve hatta Ã¼zerinde **hassas kimlik bilgilerini** bulabilirsiniz.

Bucket Ã¼zerinde **yazma eriÅŸimi** elde ederseniz, kaynak kodunu **deÄŸiÅŸtirerek** uygulamanÄ±n bir sonraki Ã§alÄ±ÅŸtÄ±rÄ±ldÄ±ÄŸÄ±nda kullandÄ±ÄŸÄ± **IAM rolÃ¼nÃ¼** **ele geÃ§irebilirsiniz**.
{% endhint %}

### Enumeration

{% code overflow="wrap" %}
```bash
# Find S3 bucket
ACCOUNT_NUMBER=<account_number>
for r in us-east-1 us-east-2 us-west-1 us-west-2 ap-south-1 ap-south-2 ap-northeast-1 ap-northeast-2 ap-northeast-3 ap-southeast-1 ap-southeast-2 ap-southeast-3 ca-central-1 eu-central-1 eu-central-2 eu-west-1 eu-west-2 eu-west-3 eu-north-1 sa-east-1 af-south-1 ap-east-1 eu-south-1 eu-south-2 me-south-1 me-central-1; do aws s3 ls elasticbeanstalk-$r-$ACCOUNT_NUMBER 2>/dev/null && echo "Found in: elasticbeanstalk-$r-$ACCOUNT_NUMBER"; done

# Get apps and URLs
aws elasticbeanstalk describe-applications # List apps
aws elasticbeanstalk describe-application-versions # Get apps & bucket name with source code
aws elasticbeanstalk describe-environments # List envs
aws elasticbeanstalk describe-environments | grep -E "EndpointURL|CNAME"
aws elasticbeanstalk describe-configuration-settings --application-name <app_name> --environment-name <env_name>
aws elasticbeanstalk describe-environment-resources --environment-name <env_name> # Get env info such as SQS used queues
aws elasticbeanstalk describe-instances-health --environment-name <env_name> # Get the instances of an environment

# Get events
aws elasticbeanstalk describe-events
```
{% endcode %}

### Kimlik DoÄŸrulamasÄ± Olmayan EriÅŸim

{% content-ref url="../aws-unauthenticated-enum-access/aws-elastic-beanstalk-unauthenticated-enum.md" %}
[aws-elastic-beanstalk-unauthenticated-enum.md](../aws-unauthenticated-enum-access/aws-elastic-beanstalk-unauthenticated-enum.md)
{% endcontent-ref %}

### KalÄ±cÄ±lÄ±k

{% content-ref url="../aws-persistence/aws-elastic-beanstalk-persistence.md" %}
[aws-elastic-beanstalk-persistence.md](../aws-persistence/aws-elastic-beanstalk-persistence.md)
{% endcontent-ref %}

### AyrÄ±calÄ±k YÃ¼kseltme

{% content-ref url="../aws-privilege-escalation/aws-elastic-beanstalk-privesc.md" %}
[aws-elastic-beanstalk-privesc.md](../aws-privilege-escalation/aws-elastic-beanstalk-privesc.md)
{% endcontent-ref %}

### SÃ¶mÃ¼rÃ¼ SonrasÄ±

{% content-ref url="../aws-post-exploitation/aws-elastic-beanstalk-post-exploitation.md" %}
[aws-elastic-beanstalk-post-exploitation.md](../aws-post-exploitation/aws-elastic-beanstalk-post-exploitation.md)
{% endcontent-ref %}

{% hint style="success" %}
AWS Hacking Ã¶ÄŸrenin ve pratik yapÄ±n:<img src="/.gitbook/assets/image.png" alt="" data-size="line">[**HackTricks Training AWS Red Team Expert (ARTE)**](https://training.hacktricks.xyz/courses/arte)<img src="/.gitbook/assets/image.png" alt="" data-size="line">\
GCP Hacking Ã¶ÄŸrenin ve pratik yapÄ±n: <img src="/.gitbook/assets/image (2).png" alt="" data-size="line">[**HackTricks Training GCP Red Team Expert (GRTE)**<img src="/.gitbook/assets/image (2).png" alt="" data-size="line">](https://training.hacktricks.xyz/courses/grte)

<details>

<summary>HackTricks'i Destekleyin</summary>

* [**Abonelik planlarÄ±nÄ±**](https://github.com/sponsors/carlospolop) kontrol edin!
* **ğŸ’¬ Discord grubuna** [**katÄ±lÄ±n**](https://discord.gg/hRep4RUj7f) veya [**telegram grubuna**](https://t.me/peass) katÄ±lÄ±n ya da **Twitter'da** ğŸ¦ [**@hacktricks\_live**](https://twitter.com/hacktricks\_live) **bizi takip edin.**
* **HackTricks'e PR gÃ¶ndererek hacking ipuÃ§larÄ±nÄ± paylaÅŸÄ±n** [**HackTricks**](https://github.com/carlospolop/hacktricks) ve [**HackTricks Cloud**](https://github.com/carlospolop/hacktricks-cloud) github depolarÄ±na.

</details>
{% endhint %}
