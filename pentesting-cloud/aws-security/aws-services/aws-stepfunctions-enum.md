# AWS - AdÄ±m FonksiyonlarÄ± Enum

<details>

<summary><strong>SÄ±fÄ±rdan kahraman olmak iÃ§in AWS hackleme Ã¶ÄŸrenin</strong> <a href="https://training.hacktricks.xyz/courses/arte"><strong>htARTE (HackTricks AWS KÄ±rmÄ±zÄ± TakÄ±m UzmanÄ±)</strong></a><strong>!</strong></summary>

HackTricks'Ä± desteklemenin diÄŸer yollarÄ±:

* **Åirketinizi HackTricks'te reklamÄ±nÄ± gÃ¶rmek istiyorsanÄ±z** veya **HackTricks'i PDF olarak indirmek istiyorsanÄ±z** [**ABONELÄ°K PLANLARI**]'na (https://github.com/sponsors/carlospolop) gÃ¶z atÄ±n!
* [**Resmi PEASS & HackTricks Ã¼rÃ¼nleri**]'ni alÄ±n (https://peass.creator-spring.com)
* [**PEASS Ailesi**]'ni keÅŸfedin (https://opensea.io/collection/the-peass-family), Ã¶zel [**NFT'ler**]'imiz koleksiyonumuz
* **KatÄ±lÄ±n** ğŸ’¬ [**Discord grubuna**](https://discord.gg/hRep4RUj7f) veya [**telegram grubuna**](https://t.me/peass) veya bizi **Twitter** ğŸ¦ [**@hacktricks\_live**](https://twitter.com/hacktricks\_live)**.** takip edin
* **Hacking pÃ¼f noktalarÄ±nÄ±zÄ± paylaÅŸarak PR'lar gÃ¶ndererek** [**HackTricks**](https://github.com/carlospolop/hacktricks) ve [**HackTricks Cloud**](https://github.com/carlospolop/hacktricks-cloud) github depolarÄ±na katkÄ±da bulunun.

</details>

## AdÄ±m FonksiyonlarÄ±

AWS AdÄ±m FonksiyonlarÄ±, birden fazla AWS hizmetini sunucu olmayan iÅŸ akÄ±ÅŸlarÄ±na koordine etmenizi ve orkestre etmenizi saÄŸlayan bir iÅŸ akÄ±ÅŸÄ± hizmetidir. AWS AdÄ±m FonksiyonlarÄ± kullanarak, AWS Lambda, Amazon S3, Amazon DynamoDB ve daha birÃ§ok AWS hizmetini baÄŸlayan iÅŸ akÄ±ÅŸlarÄ±nÄ± tasarlayabilir ve Ã§alÄ±ÅŸtÄ±rabilirsiniz. Bu orkestrasyon hizmeti, her adÄ±mÄ± JSON tabanlÄ± **Amazon States Language** (ASL) kullanarak bildiren deklaratif bir ÅŸekilde iÅŸ akÄ±ÅŸÄ±nÄ±n her adÄ±mÄ±nÄ± tanÄ±mlamanÄ±za olanak tanÄ±yan **durum makinesi** yetenekleri sunar.

AWS AdÄ±m FonksiyonlarÄ±, altta yatan altyapÄ±yÄ± yÃ¶neterek, hatalarÄ±, yeniden denemeleri ve paralel iÅŸlemeyi otomatik olarak ele alarak direnÃ§li ve Ã¶lÃ§eklenebilir uygulamalar oluÅŸturma sÃ¼recini basitleÅŸtirir. Birden fazla adÄ±m ve karar noktasÄ± iÃ§eren karmaÅŸÄ±k iÅŸ akÄ±ÅŸlarÄ± oluÅŸturmak iÃ§in Ã¶zellikle yararlÄ±dÄ±r, Ã§Ã¼nkÃ¼ veri akÄ±ÅŸÄ±nÄ± ve hizmetler arasÄ±ndaki yÃ¼rÃ¼tme durumunu kolayca yÃ¶netebilir. Bu hizmet tarafÄ±ndan gerÃ§ekleÅŸtirilmesi gereken ana kullanÄ±m durumlarÄ± ÅŸunlardÄ±r:

- **Veri iÅŸleme**: Dosya, video ve gÃ¶rÃ¼ntÃ¼ iÅŸleme; Ã§Ä±karma, dÃ¶nÃ¼ÅŸtÃ¼rme ve yÃ¼kleme (ETL) iÅŸleri; ve Toplu iÅŸleme ve YÃ¼ksek PerformanslÄ± Hesaplama (HPC) iÅŸ yÃ¼kleri.
- **Makine Ã¶ÄŸrenimi**: DolandÄ±rÄ±cÄ±lÄ±k tespiti, Ã¶zelleÅŸtirme, Ã¶neri ve veri zenginleÅŸtirme.
- **Mikroservis orkestrasyonu**: Senkron veya gerÃ§ek zamanlÄ± iÅŸ akÄ±ÅŸlarÄ± ve konteyner orkestrasyonu.
- **BT ve gÃ¼venlik otomasyonu**: Otomatik iyileÅŸtirme, daÄŸÄ±tÄ±m ve yanÄ±t; ve insan onayÄ± ve yÃ¼kseltme.

## Ana kavramlar

### Standart vs. Express Ä°ÅŸ AkÄ±ÅŸlarÄ±

AWS AdÄ±m FonksiyonlarÄ± iki tÃ¼r **durum makinesi iÅŸ akÄ±ÅŸÄ±** sunar: Standart ve Express.

- **Standart Ä°ÅŸ AkÄ±ÅŸÄ±**: Bu varsayÄ±lan iÅŸ akÄ±ÅŸÄ± tÃ¼rÃ¼, uzun sÃ¼reli, dayanÄ±klÄ± ve denetlenebilir sÃ¼reÃ§ler iÃ§in tasarlanmÄ±ÅŸtÄ±r. **YalnÄ±zca bir kez yÃ¼rÃ¼tme**yi destekler, gÃ¶revlerin yalnÄ±zca belirtilen yeniden denemeler olmadÄ±kÃ§a yalnÄ±zca bir kez Ã§alÄ±ÅŸmasÄ±nÄ± saÄŸlar. AyrÄ±ntÄ±lÄ± yÃ¼rÃ¼tme geÃ§miÅŸi gerektiren iÅŸ akÄ±ÅŸlarÄ± iÃ§in idealdir ve en fazla bir yÄ±l Ã§alÄ±ÅŸabilir.
- **Express Ä°ÅŸ AkÄ±ÅŸÄ±**: Bu tÃ¼r, yÃ¼ksek hacimli, kÄ±sa sÃ¼reli gÃ¶revler iÃ§in idealdir ve beÅŸ dakikaya kadar Ã§alÄ±ÅŸabilir. **En az bir kez yÃ¼rÃ¼tme**yi destekler, veri iÅŸleme gibi idempotent gÃ¶revler iÃ§in uygundur. Bu iÅŸ akÄ±ÅŸlarÄ±, maliyet ve performans aÃ§Ä±sÄ±ndan optimize edilmiÅŸtir, yÃ¼rÃ¼tmelere, sÃ¼reye ve bellek kullanÄ±mÄ±na gÃ¶re Ã¼cretlendirme yapar.

### Durumlar

Durumlar, durum makinelerinin temel birimleridir. Bir iÅŸ akÄ±ÅŸÄ± iÃ§indeki bireysel adÄ±mlarÄ± tanÄ±mlarlar ve tÃ¼rÃ¼ne baÄŸlÄ± olarak Ã§eÅŸitli iÅŸlevleri gerÃ§ekleÅŸtirebilirler:

- **GÃ¶rev:** Genellikle Lambda gibi bir AWS hizmetini kullanarak bir iÅŸi yÃ¼rÃ¼tÃ¼r.
- **SeÃ§im:** GiriÅŸe dayalÄ± kararlar alÄ±r.
- **BaÅŸarÄ±sÄ±z/ BaÅŸarÄ±lÄ±:** BaÅŸarÄ±sÄ±zlÄ±k veya baÅŸarÄ± ile yÃ¼rÃ¼tÃ¼mÃ¼ sonlandÄ±rÄ±r.
- **GeÃ§iÅŸ:** GiriÅŸi Ã§Ä±ktÄ±ya geÃ§irir veya veri enjekte eder.
- **Bekleme:** Belirli bir sÃ¼re iÃ§in yÃ¼rÃ¼tÃ¼mÃ¼ geciktirir.
- **Paralel:** Paralel dallar baÅŸlatÄ±r.
- **Harita:** Ã–ÄŸeler Ã¼zerinde adÄ±mlarÄ± dinamik olarak yineler.

### GÃ¶rev

Bir **GÃ¶rev** durumu, bir durum makinesi tarafÄ±ndan yÃ¼rÃ¼tÃ¼len tek bir iÅŸ birimini temsil eder. GÃ¶revler, Lambda iÅŸlevleri, AWS hizmetleri veya Ã¼Ã§Ã¼ncÃ¼ taraf API'larÄ± gibi Ã§eÅŸitli kaynaklarÄ± Ã§aÄŸÄ±rabilir.

- **Aktiviteler**: Uzun sÃ¼ren iÅŸlemler iÃ§in uygun olan, yÃ¶nettiÄŸiniz Ã¶zel iÅŸÃ§iler.
- Kaynak: **`arn:aws:states:region:account:activity:name`**.
- **Lambda Ä°ÅŸlevleri**: AWS Lambda iÅŸlevlerini yÃ¼rÃ¼tÃ¼r.
- Kaynak: **`arn:aws:lambda:region:account:function:function-name`**.
- **AWS Hizmetleri**: DynamoDB veya S3 gibi diÄŸer AWS hizmetleriyle doÄŸrudan entegre olur.
- Kaynak: **`arn:partition:states:region:account:servicename:APIname`**.
- **HTTP GÃ¶revi**: ÃœÃ§Ã¼ncÃ¼ taraf API'larÄ±na Ã§aÄŸrÄ± yapar.
- Kaynak alanÄ±: **`arn:aws:states:::http:invoke`**. Daha sonra, API URL'si, yÃ¶ntem ve kimlik doÄŸrulama ayrÄ±ntÄ±larÄ± gibi API uÃ§ noktasÄ± yapÄ±landÄ±rma ayrÄ±ntÄ±larÄ±nÄ± saÄŸlamalÄ±sÄ±nÄ±z.

AÅŸaÄŸÄ±daki Ã¶rnek, HelloWorld adlÄ± bir Lambda iÅŸlevini Ã§aÄŸÄ±ran bir GÃ¶rev durumu tanÄ±mÄ±nÄ± gÃ¶stermektedir:
```json
"HelloWorld": {
"Type": "Task",
"Resource": "arn:aws:states:::lambda:invoke",
"Parameters": {
"Payload.$": "$",
"FunctionName": "arn:aws:lambda:<region>:<account-id>:function:HelloWorld"
},
"End": true
}
```
### SeÃ§enek

Bir **SeÃ§enek** durumu, giriÅŸ verilerine dayalÄ± kararlar vererek bir iÅŸ akÄ±ÅŸÄ±na koÅŸullu mantÄ±k ekler. Belirtilen koÅŸullarÄ± deÄŸerlendirir ve sonuÃ§lara baÄŸlÄ± olarak ilgili duruma geÃ§iÅŸ yapar.

- **KarÅŸÄ±laÅŸtÄ±rma**: Her seÃ§enek kuralÄ±, bir giriÅŸ deÄŸiÅŸkenini belirtilen bir deÄŸerle veya baÅŸka bir deÄŸiÅŸkenle karÅŸÄ±laÅŸtÄ±ran bir karÅŸÄ±laÅŸtÄ±rma operatÃ¶rÃ¼ iÃ§erir (Ã¶rneÄŸin, **`NumericEquals`**, **`StringEquals`**).
- **Sonraki Alan**: SeÃ§enek durumlarÄ± **`End`** alanÄ±nÄ± desteklemez, bunun yerine, karÅŸÄ±laÅŸtÄ±rma doÄŸruysa geÃ§iÅŸ yapÄ±lacak **`Next`** durumunu tanÄ±mlar.

**SeÃ§enek** durumunun Ã¶rneÄŸi:
```json
{
"Variable": "$.timeStamp",
"TimestampEquals": "2000-01-01T00:00:00Z",
"Next": "TimeState"
}
```
### BaÅŸarÄ±sÄ±z/Olumlu

Bir **`Fail`** durumu, bir durum makinesinin yÃ¼rÃ¼tÃ¼lmesini durdurur ve baÅŸarÄ±sÄ±zlÄ±k olarak iÅŸaretler. Bir hata adÄ± ve neden belirtmek iÃ§in kullanÄ±lÄ±r, baÅŸarÄ±sÄ±zlÄ±k hakkÄ±nda ayrÄ±ntÄ±lar saÄŸlar. Bu durum terminaldir, yani yÃ¼rÃ¼tme akÄ±ÅŸÄ±nÄ± sonlandÄ±rÄ±r.

Bir **`Succeed`** durumu, yÃ¼rÃ¼tÃ¼mÃ¼ baÅŸarÄ±lÄ± bir ÅŸekilde durdurur. Genellikle iÅŸlem baÅŸarÄ±yla tamamlandÄ±ÄŸÄ±nda iÅŸ akÄ±ÅŸÄ±nÄ± sonlandÄ±rmak iÃ§in kullanÄ±lÄ±r. Bu durumda **`Next`** alanÄ± gerekli deÄŸildir.

{% tabs %}

{% tab title="Fail Ã¶rneÄŸi" %}
```json
"FailState": {
"Type": "Fail",
"Error": "ErrorName",
"Cause": "Error details"
}
```
{% endtab %}

{% tab title="BaÅŸarÄ±lÄ± Ã¶rnek" %}
```json
"SuccessState": {
"Type": "Succeed"
}
```
### GeÃ§

Bir **GeÃ§** durumu, giriÅŸini ya hiÃ§bir iÅŸlem yapmadan veya JSON durum giriÅŸini filtreler kullanarak dÃ¶nÃ¼ÅŸtÃ¼rerek ve dÃ¶nÃ¼ÅŸtÃ¼rÃ¼lmÃ¼ÅŸ verileri bir sonraki duruma ileterek Ã§Ä±ktÄ±sÄ±na ileten bir durumdur. Durum makineleri oluÅŸturmak ve test etmek iÃ§in kullanÄ±ÅŸlÄ±dÄ±r, statik veri enjekte etmenize veya dÃ¶nÃ¼ÅŸtÃ¼rmenize olanak tanÄ±r.
```json
"PassState": {
"Type": "Pass",
"Result": {"key": "value"},
"ResultPath": "$.newField",
"Next": "NextState"
}
```
### Bekle

Bir **Bekleme** durumu, belirtilen bir sÃ¼re boyunca durum makinesinin yÃ¼rÃ¼tÃ¼lmesini geciktirir. Bekleme sÃ¼resini yapÄ±landÄ±rmak iÃ§in Ã¼Ã§ temel yÃ¶ntem vardÄ±r:

- **X Saniye**: Beklemek iÃ§in sabit bir saniye sayÄ±sÄ±.

```json
"BeklemeDurumu": {
"TÃ¼r": "Bekle",
"Saniye": 10,
"Sonraki": "SonrakiDurum"
}
```

- **Mutlak Zaman DamgasÄ±**: Beklenecek kesin bir zaman.

```json
"BeklemeDurumu": {
"TÃ¼r": "Bekle",
"ZamanDamgasÄ±": "2024-03-14T01:59:00Z",
"Sonraki": "SonrakiDurum"
}
```

- **Dinamik Bekleme**: **`SecondsPath`** veya **`TimestampPath`** kullanarak giriÅŸe dayalÄ±.

```json
"BeklemeDurumu": {
"TÃ¼r": "Bekle",
"ZamanDamgasÄ±Yolu": "$.sonkullanimtarihi",
"Sonraki": "SonrakiDurum"
}
```


### Paralel

Bir **Paralel** durumu, iÅŸ akÄ±ÅŸÄ±nÄ±z iÃ§inde aynÄ± anda birden fazla gÃ¶rev dalÄ±nÄ± eÅŸzamanlÄ± olarak yÃ¼rÃ¼tmenizi saÄŸlar. Her dal baÄŸÄ±msÄ±z olarak Ã§alÄ±ÅŸÄ±r ve kendi durum dizisini iÅŸler. YÃ¼rÃ¼tme, tÃ¼m dallarÄ±n tamamlanmasÄ±nÄ± bekler ve ardÄ±ndan bir sonraki duruma geÃ§er. Anahtar alanlarÄ± ÅŸunlardÄ±r:

- **Dallar**: Paralel yÃ¼rÃ¼tme yollarÄ±nÄ± tanÄ±mlayan bir dizi. Her dal ayrÄ± bir durum makinesidir.
- **SonuÃ§Yolu**: DallarÄ±n birleÅŸtirilmiÅŸ Ã§Ä±ktÄ±sÄ±nÄ± yerleÅŸtirmek iÃ§in (giriÅŸte) nerede tanÄ±mlanacaÄŸÄ±nÄ± belirler.
- **Tekrar Dene ve Hata Yakala**: Paralel durum iÃ§in hata iÅŸleme yapÄ±landÄ±rmalarÄ±.
```json
"ParallelState": {
"Type": "Parallel",
"Branches": [
{
"StartAt": "Task1",
"States": { ... }
},
{
"StartAt": "Task2",
"States": { ... }
}
],
"Next": "NextState"
}
```
### Harita

Bir **Harita** durumu, bir veri kÃ¼mesindeki her Ã¶ÄŸe iÃ§in bir dizi adÄ±mÄ±n yÃ¼rÃ¼tÃ¼lmesini saÄŸlar. Verilerin paralel iÅŸlenmesi iÃ§in kullanÄ±lÄ±r. Veri kÃ¼mesinin Ã¶ÄŸelerini nasÄ±l iÅŸlemek istediÄŸinize baÄŸlÄ± olarak, AdÄ±m FonksiyonlarÄ± aÅŸaÄŸÄ±daki modlarÄ± saÄŸlar:

- **Ä°Ã§ Mod**: Her JSON dizisi Ã¶ÄŸesi iÃ§in bir alt kÃ¼me durumunu yÃ¼rÃ¼tÃ¼r. Her birini iÃ§eren iÅŸ akÄ±ÅŸÄ± baÄŸlamÄ±nda Ã§alÄ±ÅŸtÄ±rÄ±lan 40'tan az paralel tekrar iÃ§in uygundur.

```json
"MapState": {
"Type": "Map",
"ItemsPath": "$.arrayItems",
"ItemProcessor": {
"ProcessorConfig": {
"Mode": "INLINE"
},
"StartAt": "AddState",
"States": {
"AddState": {
"Type": "Task",
"Resource": "arn:aws:states:::lambda:invoke",
"OutputPath": "$.Payload",
"Parameters": {
"FunctionName": "arn:aws:lambda:<region>:<account-id>:function:add-function"
},
"End": true
}
}
},
"End": true
"ResultPath": "$.detail.added",
"ItemsPath": "$.added"
}
```

- **DaÄŸÄ±tÄ±lmÄ±ÅŸ Mod**: YÃ¼ksek eÅŸ zamanlÄ±lÄ±kla bÃ¼yÃ¼k Ã¶lÃ§ekli paralel iÅŸleme iÃ§in tasarlanmÄ±ÅŸtÄ±r. Amazon S3'te depolanan gibi bÃ¼yÃ¼k veri kÃ¼melerinin iÅŸlenmesini destekler, 10.000'e kadar paralel Ã§ocuk iÅŸ akÄ±ÅŸÄ± yÃ¼rÃ¼tme, bu Ã§ocuklarÄ± ayrÄ± bir Ã§ocuk yÃ¼rÃ¼tme olarak Ã§alÄ±ÅŸtÄ±rma.

```json
"DistributedMapState": {
"Type": "Map",
"ItemReader": {
"Resource": "arn:aws:states:::s3:getObject",
"Parameters": {
"Bucket": "my-bucket",
"Key": "data.csv"
}
},
"ItemProcessor": {
"ProcessorConfig": {
"Mode": "DISTRIBUTED",
"ExecutionType": "EXPRESS"
},
"StartAt": "ProcessItem",
"States": {
"ProcessItem": {
"Type": "Task",
"Resource": "arn:aws:lambda:region:account-id:function:my-function",
"End": true
}
}
},
"End": true
"ResultWriter": {
"Resource": "arn:aws:states:::s3:putObject",
"Parameters": {
"Bucket": "myOutputBucket",
"Prefix": "csvProcessJobs"
}
}
}
```


### SÃ¼rÃ¼mler ve takma adlar

AdÄ±m FonksiyonlarÄ± ayrÄ±ca durum makinelerinin **sÃ¼rÃ¼mlerini** ve **takma adlarÄ±nÄ±** yÃ¶netmenize olanak tanÄ±r. Bir sÃ¼rÃ¼m, yÃ¼rÃ¼tÃ¼lebilen bir durum makinesinin anlÄ±k gÃ¶rÃ¼ntÃ¼sÃ¼nÃ¼ temsil eder. Takma adlar, aynÄ± durum makinesinin en fazla iki sÃ¼rÃ¼mÃ¼ne iÅŸaretÃ§i olarak hizmet eder.

- **SÃ¼rÃ¼mler**: Bu deÄŸiÅŸmez durum makinesi anlÄ±k gÃ¶rÃ¼ntÃ¼leri, o durum makinesinin en son revizyonundan oluÅŸturulur. Her sÃ¼rÃ¼m, durum makinesi ARN'sini ve sÃ¼rÃ¼m numarasÄ±nÄ± iki nokta ile ayÄ±rarak benzersiz bir ARN ile tanÄ±mlanÄ±r. SÃ¼rÃ¼mler dÃ¼zenlenemez, ancak durum makinesini gÃ¼ncelleyebilir ve yeni bir sÃ¼rÃ¼m yayÄ±nlayabilir veya istenen durum makinesi sÃ¼rÃ¼mÃ¼nÃ¼ kullanabilirsiniz.
- **Takma AdlarÄ±**: Bu iÅŸaretÃ§iler aynÄ± durum makinesinin en fazla iki sÃ¼rÃ¼mÃ¼ne iÅŸaret edebilir. Bir durum makinesi iÃ§in birden fazla takma ad oluÅŸturulabilir, her biri durum makinesi ARN'sini ve takma adÄ± arasÄ±na iki nokta koyarak benzersiz bir ARN ile tanÄ±mlanÄ±r. Takma adlar, bir durum makinesinin iki sÃ¼rÃ¼mÃ¼nden birine yÃ¶nlendirme yapmayÄ± saÄŸlar. AyrÄ±ca, bir takma ad belirli bir durum makinesi sÃ¼rÃ¼mÃ¼ne iÅŸaret edebilir, ancak diÄŸer takma adlara iÅŸaret edemez. Ä°htiyaÃ§ duyulduÄŸunda farklÄ± bir sÃ¼rÃ¼me yÃ¶nlendirmek iÃ§in gÃ¼ncellenebilirler, kontrollÃ¼ daÄŸÄ±tÄ±mlarÄ± ve iÅŸ akÄ±ÅŸÄ± yÃ¶netimini kolaylaÅŸtÄ±rÄ±r.

Daha detaylÄ± bilgi iÃ§in **ASL** hakkÄ±nda ÅŸu baÄŸlantÄ±ya bakabilirsiniz: [**Amazon States Language**](https://states-language.net/spec.html).



## Durum makineleri iÃ§in IAM Roller

AWS Step Functions, kaynaklara ve eylemlere eriÅŸimi kontrol etmek iÃ§in AWS Kimlik ve EriÅŸim YÃ¶netimi (IAM) rollerini kullanÄ±r. AWS Step Functions ile ilgili gÃ¼venlik ve IAM rolleri ile ilgili ana konular ÅŸunlardÄ±r:

- **YÃ¼rÃ¼tme RolÃ¼**: AWS Step Functions'taki her durum makinesi bir IAM yÃ¼rÃ¼tme rolÃ¼ ile iliÅŸkilidir. Bu rol, durum makinesinin sizin adÄ±nÄ±za hangi eylemleri gerÃ§ekleÅŸtirebileceÄŸini tanÄ±mlar. Bir durum makinesi, AWS hizmetleriyle etkileÅŸimde bulunan durumlar arasÄ±nda geÃ§iÅŸ yaptÄ±ÄŸÄ±nda (Ã¶rneÄŸin Lambda iÅŸlevlerini Ã§aÄŸÄ±rma, DynamoDB'ye eriÅŸme vb.), bu yÃ¼rÃ¼tme rolÃ¼nÃ¼ bu eylemleri gerÃ§ekleÅŸtirmek iÃ§in devralÄ±r.
- **Ä°zinler**: IAM yÃ¼rÃ¼tme rolÃ¼, diÄŸer AWS hizmetlerinde gerekli eylemlere izin veren izinlerle yapÄ±landÄ±rÄ±lmalÄ±dÄ±r. Ã–rneÄŸin, durum makinenizin AWS Lambda iÅŸlevlerini Ã§aÄŸÄ±rmasÄ± gerekiyorsa, IAM rolÃ¼nÃ¼n **`lambda:InvokeFunction`** izinlerine sahip olmasÄ± gerekir. Benzer ÅŸekilde, DynamoDB'ye yazma ihtiyacÄ± varsa, uygun izinler (**`dynamodb:PutItem`**, **`dynamodb:UpdateItem`**, vb.) verilmelidir.
- **En Az Ä°zin Ä°lkesi**: Step Functions iÃ§in IAM rollerini yapÄ±landÄ±rÄ±rken en az ayrÄ±calÄ±ÄŸÄ± prensibini takip etmek Ã¶nerilir. Bu, durum makinesinin belirli eylemlerini gerÃ§ekleÅŸtirmek iÃ§in gerekli olan izinleri vermek ve fazlasÄ±nÄ± vermemek anlamÄ±na gelir. IAM politikalarÄ± belirli kaynaklara ve eylemlere kapsamlÄ± olmalÄ±, yanlÄ±ÅŸ eriÅŸim riskini azaltmalÄ±dÄ±r.

## NumaralandÄ±rma

ReadOnlyAccess politikasÄ±, tÃ¼m aÅŸaÄŸÄ±daki numaralandÄ±rma eylemleri iÃ§in yeterlidir.
```bash
# State machines #

## List state machines
aws stepfunctions list-state-machines
## Retrieve informatio about the specified state machine
aws stepfunctions describe-state-machine --state-machine-arn <value>

## List verions for the specified state machine
aws stepfunctions list-state-machine-versions --state-machine-arn <value>
## List aliases for the specified state machine
aws stepfunctions list-state-machine-aliases --state-machine-arn <value>
## Retrieve informatio about the specified state machine alias
aws stepfunctions describe-state-machine-alias --state-machine-alias-arn <value>

## List executions of a state machine
aws stepfunctions list-executions --state-machine-arn <value> [--status-filter <RUNNING | SUCCEEDED | FAILED | TIMED_OUT | ABORTED | PENDING_REDRIVE>] [--redrive-filter <REDRIVEN | NOT_REDRIVEN>]
## Retrieve information and relevant metadata about a state machine execution
aws stepfunctions describe-execution --execution-arn <value>
## Retrieve information about the state machine associated to the specified execution
aws stepfunctions describe-state-machine-for-execution --execution-arn <value>
## Retrieve the history of the specified execution as a list of events
aws stepfunctions get-execution-history --execution-arn <value> [--reverse-order | --no-reverse-order] [--include-execution-data | --no-include-execution-data]

## List tags for the specified Ste Functions resource
aws stepfunctions list-tags-for-resource --resource-arn <value>

## Validate the definition of a state machine without creating the resource
aws stepfunctions validate-state-machine-definition --definition <value> [--type <STANDARD | EXPRESS>]

# Activities #

## List existing activities
aws stepfunctions list-activities
## Retrieve information about the specified activity
aws stepfunctions describe-activity --activity-arn <value>

# Map Runs #

## List map runs of an execution
aws stepfunctions list-map-runs --execution-arn <value>
## Provide information about the configuration, progress and results of a Map Run
aws stepfunctions describe-map-run --map-run-arn <value>
## Lists executions of a Map Run
aws stepfunctions list-executions --map-run-arn <value> [--status-filter <RUNNING | SUCCEEDED | FAILED | TIMED_OUT | ABORTED | PENDING_REDRIVE>] [--redrive-filter <REDRIVEN | NOT_REDRIVEN>]
```
## Ä°st Privileges

AÅŸaÄŸÄ±daki sayfada, **yetkileri yÃ¼kseltmek iÃ§in Step Functions izinlerini kÃ¶tÃ¼ye kullanma** yÃ¶ntemlerini kontrol edebilirsiniz:

{% content-ref url="../aws-privilege-escalation/aws-stepfunctions-privesc.md" %}
[aws-stepfunctions-privesc.md](../aws-privilege-escalation/aws-stepfunctions-privesc.md)
{% endcontent-ref %}

## SonrasÄ± SÄ±zma

{% content-ref url="../aws-post-exploitation/aws-stepfunctions-post-exploitation/" %}
[aws-stepfunctions-post-exploitation](../aws-post-exploitation/aws-stepfunctions-post-exploitation/)
{% endcontent-ref %}

# Referanslar

* [https://docs.aws.amazon.com/service-authorization/latest/reference/list_awsstepfunctions.html](https://docs.aws.amazon.com/service-authorization/latest/reference/list_awsstepfunctions.html)
* [https://docs.aws.amazon.com/step-functions/latest/dg/welcome.html](https://docs.aws.amazon.com/step-functions/latest/dg/welcome.html)
* [https://states-language.net/spec.html](https://states-language.net/spec.html)

<details>

<summary><strong>SÄ±fÄ±rdan kahraman olmak iÃ§in AWS hacklemeyi Ã¶ÄŸrenin</strong> <a href="https://training.hacktricks.xyz/courses/arte"><strong>htARTE (HackTricks AWS Red Team Expert)</strong></a><strong>!</strong></summary>

HackTricks'Ä± desteklemenin diÄŸer yollarÄ±:

* **Åirketinizi HackTricks'te reklamÄ±nÄ± gÃ¶rmek istiyorsanÄ±z** veya **HackTricks'i PDF olarak indirmek istiyorsanÄ±z** [**ABONELÄ°K PLANLARI**](https://github.com/sponsors/carlospolop)'na gÃ¶z atÄ±n!
* [**Resmi PEASS & HackTricks Ã¼rÃ¼nlerini**](https://peass.creator-spring.com) edinin
* [**The PEASS Family**](https://opensea.io/collection/the-peass-family) koleksiyonumuzu keÅŸfedin, Ã¶zel [**NFT'lerimiz**](https://opensea.io/collection/the-peass-family)
* **ğŸ’¬ [**Discord grubuna**](https://discord.gg/hRep4RUj7f) veya [**telegram grubuna**](https://t.me/peass) katÄ±lÄ±n veya bizi **Twitter** ğŸ¦ [**@hacktricks\_live**](https://twitter.com/hacktricks\_live)**'da takip edin.**
* **Hacking pÃ¼f noktalarÄ±nÄ±zÄ± paylaÅŸarak PR gÃ¶ndererek** [**HackTricks**](https://github.com/carlospolop/hacktricks) ve [**HackTricks Cloud**](https://github.com/carlospolop/hacktricks-cloud) github depolarÄ±na katkÄ±da bulunun.

</details>
