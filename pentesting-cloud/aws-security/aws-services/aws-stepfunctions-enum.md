# AWS - Step Functions Enum

{% hint style="success" %}
AWS Hacking Ã¶ÄŸrenin ve pratik yapÄ±n:<img src="/.gitbook/assets/image.png" alt="" data-size="line">[**HackTricks Training AWS Red Team Expert (ARTE)**](https://training.hacktricks.xyz/courses/arte)<img src="/.gitbook/assets/image.png" alt="" data-size="line">\
GCP Hacking Ã¶ÄŸrenin ve pratik yapÄ±n: <img src="/.gitbook/assets/image (2).png" alt="" data-size="line">[**HackTricks Training GCP Red Team Expert (GRTE)**<img src="/.gitbook/assets/image (2).png" alt="" data-size="line">](https://training.hacktricks.xyz/courses/grte)

<details>

<summary>HackTricks'i Destekleyin</summary>

* [**abonelik planlarÄ±nÄ±**](https://github.com/sponsors/carlospolop) kontrol edin!
* **ğŸ’¬ Discord grubuna** [**katÄ±lÄ±n**](https://discord.gg/hRep4RUj7f) veya [**telegram grubuna**](https://t.me/peass) katÄ±lÄ±n ya da **Twitter'da** ğŸ¦ [**@hacktricks\_live**](https://twitter.com/hacktricks\_live)**'Ä± takip edin.**
* **HackTricks'e PR gÃ¶ndererek hacking ipuÃ§larÄ±nÄ± paylaÅŸÄ±n** [**HackTricks**](https://github.com/carlospolop/hacktricks) ve [**HackTricks Cloud**](https://github.com/carlospolop/hacktricks-cloud) github depolarÄ±na.

</details>
{% endhint %}

## Step Functions

AWS Step Functions, birden fazla AWS hizmetini sunucusuz iÅŸ akÄ±ÅŸlarÄ±na koordine etmenizi ve dÃ¼zenlemenizi saÄŸlayan bir iÅŸ akÄ±ÅŸÄ± hizmetidir. AWS Step Functions kullanarak, AWS Lambda, Amazon S3, Amazon DynamoDB ve daha birÃ§ok hizmeti adÄ±m adÄ±m baÄŸlayan iÅŸ akÄ±ÅŸlarÄ± tasarlayabilir ve Ã§alÄ±ÅŸtÄ±rabilirsiniz. Bu orkestrasyon hizmeti, gÃ¶rsel bir iÅŸ akÄ±ÅŸÄ± arayÃ¼zÃ¼ saÄŸlar ve **durum makinesi** yetenekleri sunar, iÅŸ akÄ±ÅŸÄ±nÄ±n her adÄ±mÄ±nÄ± JSON tabanlÄ± **Amazon States Language** (ASL) kullanarak deklaratif bir ÅŸekilde tanÄ±mlamanÄ±za olanak tanÄ±r.

AWS Step Functions, temel altyapÄ±yÄ± yÃ¶neterek, yeniden denemeleri, hatalarÄ± ve paralel iÅŸlemleri otomatik olarak ele alarak dayanÄ±klÄ± ve Ã¶lÃ§eklenebilir uygulamalar oluÅŸturma sÃ¼recini basitleÅŸtirir. Birden fazla adÄ±m ve karar noktasÄ± iÃ§eren karmaÅŸÄ±k iÅŸ akÄ±ÅŸlarÄ± oluÅŸturmak iÃ§in Ã¶zellikle kullanÄ±ÅŸlÄ±dÄ±r, Ã§Ã¼nkÃ¼ hizmetler arasÄ±nda veri akÄ±ÅŸÄ±nÄ± ve yÃ¼rÃ¼tme durumunu kolayca yÃ¶netebilir. Bu hizmetin gerÃ§ekleÅŸtireceÄŸi ana kullanÄ±m durumlarÄ± ÅŸunlardÄ±r:

- **Veri iÅŸleme**: Dosya, video ve gÃ¶rÃ¼ntÃ¼ iÅŸleme; iÅŸlerin Ã§Ä±karÄ±lmasÄ±, dÃ¶nÃ¼ÅŸtÃ¼rÃ¼lmesi ve yÃ¼klenmesi (ETL); ve toplu iÅŸleme ve yÃ¼ksek performanslÄ± hesaplama (HPC) iÅŸ yÃ¼kleri.
- **Makine Ã¶ÄŸrenimi**: DolandÄ±rÄ±cÄ±lÄ±k tespiti, Ã¶zelleÅŸtirme, Ã¶neri ve veri zenginleÅŸtirme.
- **Mikro hizmet orkestrasyonu**: Senkron veya gerÃ§ek zamanlÄ± iÅŸ akÄ±ÅŸlarÄ± ve konteyner orkestrasyonu.
- **BT ve gÃ¼venlik otomasyonu**: Otomatik dÃ¼zeltme, daÄŸÄ±tÄ±m ve yanÄ±t; ve insan onayÄ± ve yÃ¼kseltme.

## Anahtar kavramlar

### Standart ve Express Ä°ÅŸ AkÄ±ÅŸlarÄ±

AWS Step Functions, iki tÃ¼r **durum makinesi iÅŸ akÄ±ÅŸÄ±** sunar: Standart ve Express.

- **Standart Ä°ÅŸ AkÄ±ÅŸÄ±**: Bu varsayÄ±lan iÅŸ akÄ±ÅŸÄ± tÃ¼rÃ¼, uzun sÃ¼reli, dayanÄ±klÄ± ve denetlenebilir sÃ¼reÃ§ler iÃ§in tasarlanmÄ±ÅŸtÄ±r. **Tam olarak bir kez yÃ¼rÃ¼tme** desteÄŸi sunar, gÃ¶revlerin yalnÄ±zca bir kez Ã§alÄ±ÅŸmasÄ±nÄ± saÄŸlar, aksi takdirde yeniden denemeler belirtilir. AyrÄ±ntÄ±lÄ± yÃ¼rÃ¼tme geÃ§miÅŸine ihtiyaÃ§ duyan iÅŸ akÄ±ÅŸlarÄ± iÃ§in idealdir ve bir yÄ±la kadar Ã§alÄ±ÅŸabilir.
- **Express Ä°ÅŸ AkÄ±ÅŸÄ±**: Bu tÃ¼r, yÃ¼ksek hacimli, kÄ±sa sÃ¼reli gÃ¶revler iÃ§in idealdir ve beÅŸ dakikaya kadar Ã§alÄ±ÅŸÄ±r. **En az bir kez yÃ¼rÃ¼tme** desteÄŸi sunar, veri iÅŸleme gibi idempotent gÃ¶revler iÃ§in uygundur. Bu iÅŸ akÄ±ÅŸlarÄ±, yÃ¼rÃ¼tmeler, sÃ¼re ve bellek kullanÄ±mÄ± temelinde Ã¼cretlendirilerek maliyet ve performans iÃ§in optimize edilmiÅŸtir.

### Durumlar

Durumlar, durum makinelerinin temel birimleridir. Bir iÅŸ akÄ±ÅŸÄ±ndaki bireysel adÄ±mlarÄ± tanÄ±mlarlar ve tÃ¼rÃ¼ne baÄŸlÄ± olarak Ã§eÅŸitli iÅŸlevler gerÃ§ekleÅŸtirebilirler:

- **GÃ¶rev:** Genellikle Lambda gibi bir AWS hizmeti kullanarak bir iÅŸi yÃ¼rÃ¼tÃ¼r.
- **SeÃ§im:** GirdiÄŸe dayalÄ± kararlar alÄ±r.
- **BaÅŸarÄ±sÄ±z/BaÅŸarÄ±lÄ±:** YÃ¼rÃ¼tmeyi bir baÅŸarÄ±sÄ±zlÄ±k veya baÅŸarÄ± ile sonlandÄ±rÄ±r.
- **GeÃ§iÅŸ:** Girdiyi Ã§Ä±ktÄ±ya geÃ§irir veya veri ekler.
- **Bekleme:** YÃ¼rÃ¼tmeyi belirli bir sÃ¼re geciktirir.
- **Paralel:** Paralel dallar baÅŸlatÄ±r.
- **Harita:** AdÄ±mlarÄ± Ã¶ÄŸeler Ã¼zerinde dinamik olarak yinelemeler.

### GÃ¶rev

Bir **GÃ¶rev** durumu, bir durum makinesi tarafÄ±ndan yÃ¼rÃ¼tÃ¼len tek bir iÅŸ birimini temsil eder. GÃ¶revler, aktiviteler, Lambda iÅŸlevleri, AWS hizmetleri veya Ã¼Ã§Ã¼ncÃ¼ taraf API'ler gibi Ã§eÅŸitli kaynaklarÄ± Ã§aÄŸÄ±rabilir.

- **Aktiviteler**: Uzun sÃ¼reli iÅŸlemler iÃ§in uygun, sizin yÃ¶nettiÄŸiniz Ã¶zel iÅŸÃ§iler.
- Kaynak: **`arn:aws:states:region:account:activity:name`**.
- **Lambda Ä°ÅŸlevleri**: AWS Lambda iÅŸlevlerini yÃ¼rÃ¼tÃ¼r.
- Kaynak: **`arn:aws:lambda:region:account:function:function-name`**.
- **AWS Hizmetleri**: DynamoDB veya S3 gibi diÄŸer AWS hizmetleriyle doÄŸrudan entegre olur.
- Kaynak: **`arn:partition:states:region:account:servicename:APIname`**.
- **HTTP GÃ¶revi**: ÃœÃ§Ã¼ncÃ¼ taraf API'leri Ã§aÄŸÄ±rÄ±r.
- Kaynak alanÄ±: **`arn:aws:states:::http:invoke`**. Daha sonra, API URL'si, yÃ¶ntemi ve kimlik doÄŸrulama detaylarÄ± gibi API uÃ§ noktasÄ± yapÄ±landÄ±rma ayrÄ±ntÄ±larÄ±nÄ± saÄŸlamalÄ±sÄ±nÄ±z.

AÅŸaÄŸÄ±daki Ã¶rnek, HelloWorld adlÄ± bir Lambda iÅŸlevini Ã§aÄŸÄ±ran bir GÃ¶rev durumu tanÄ±mÄ±nÄ± gÃ¶sterir:
```json
"HelloWorld": {
"Type": "Task",
"Resource": "arn:aws:states:::lambda:invoke",
"Parameters": {
"Payload.$": "$",
"FunctionName": "arn:aws:lambda:<region>:<account-id>:function:HelloWorld"
},
"End": true
}
```
### Choice

Bir **Choice** durumu, bir iÅŸ akÄ±ÅŸÄ±na koÅŸullu mantÄ±k ekler ve girdi verilerine dayalÄ± kararlar alÄ±nmasÄ±nÄ± saÄŸlar. Belirtilen koÅŸullarÄ± deÄŸerlendirir ve sonuÃ§lara gÃ¶re ilgili duruma geÃ§iÅŸ yapar.

- **Comparison**: Her seÃ§im kuralÄ±, bir girdi deÄŸiÅŸkenini belirtilen bir deÄŸerle veya baÅŸka bir deÄŸiÅŸkenle karÅŸÄ±laÅŸtÄ±ran bir karÅŸÄ±laÅŸtÄ±rma operatÃ¶rÃ¼ (Ã¶rneÄŸin, **`NumericEquals`**, **`StringEquals`**) iÃ§erir.
- **Next Field**: Choice durumlarÄ± **`End`** alanÄ±nÄ± desteklemez, bunun yerine karÅŸÄ±laÅŸtÄ±rma doÄŸruysa geÃ§iÅŸ yapÄ±lacak **`Next`** durumunu tanÄ±mlar.

**Choice** durumu Ã¶rneÄŸi:
```json
{
"Variable": "$.timeStamp",
"TimestampEquals": "2000-01-01T00:00:00Z",
"Next": "TimeState"
}
```
### Fail/Succeed

**`Fail`** durumu, bir durum makinesinin yÃ¼rÃ¼tÃ¼lmesini durdurur ve bunu bir hata olarak iÅŸaretler. Hata adÄ± ve nedeni belirterek hatanÄ±n ayrÄ±ntÄ±larÄ±nÄ± saÄŸlar. Bu durum terminaldir, yani yÃ¼rÃ¼tme akÄ±ÅŸÄ±nÄ± sonlandÄ±rÄ±r.

**`Succeed`** durumu, yÃ¼rÃ¼tmeyi baÅŸarÄ±yla durdurur. Genellikle iÅŸ akÄ±ÅŸÄ± baÅŸarÄ±yla tamamlandÄ±ÄŸÄ±nda sonlandÄ±rmak iÃ§in kullanÄ±lÄ±r. Bu durum **`Next`** alanÄ± gerektirmez.

{% tabs %}

{% tab title="Fail example" %}
```json
"FailState": {
"Type": "Fail",
"Error": "ErrorName",
"Cause": "Error details"
}
```
{% endtab %}

{% tab title="Succeed example" %}
```json
"SuccessState": {
"Type": "Succeed"
}
```
### Pass

Bir **Pass** durumu, giriÅŸini Ã§Ä±ktÄ±sÄ±na ya herhangi bir iÅŸ yapmadan ya da JSON durum giriÅŸini filtreler kullanarak dÃ¶nÃ¼ÅŸtÃ¼rerek geÃ§irir ve ardÄ±ndan dÃ¶nÃ¼ÅŸtÃ¼rÃ¼len veriyi bir sonraki duruma iletir. Bu, durum makinelerini test etmek ve oluÅŸturmak iÃ§in kullanÄ±ÅŸlÄ±dÄ±r, statik veri enjekte etmenize veya veriyi dÃ¶nÃ¼ÅŸtÃ¼rmenize olanak tanÄ±r.
```json
"PassState": {
"Type": "Pass",
"Result": {"key": "value"},
"ResultPath": "$.newField",
"Next": "NextState"
}
```
### Wait

**Wait** durumu, durum makinesinin yÃ¼rÃ¼tÃ¼lmesini belirli bir sÃ¼re geciktirir. Bekleme sÃ¼resini yapÄ±landÄ±rmak iÃ§in Ã¼Ã§ ana yÃ¶ntem vardÄ±r:

- **X Seconds**: Beklenecek sabit saniye sayÄ±sÄ±.

```json
"WaitState": {
"Type": "Wait",
"Seconds": 10,
"Next": "NextState"
}
```

- **Absolute Timestamp**: Beklenecek kesin zaman.

```json
"WaitState": {
"Type": "Wait",
"Timestamp": "2024-03-14T01:59:00Z",
"Next": "NextState"
}
```

- **Dynamic Wait**: **`SecondsPath`** veya **`TimestampPath`** kullanarak girdiye dayalÄ±.

```json
jsonCopiar cÃ³digo
"WaitState": {
"Type": "Wait",
"TimestampPath": "$.expirydate",
"Next": "NextState"
}
```


### Parallel

**Parallel** durumu, iÅŸ akÄ±ÅŸÄ±nÄ±zda birden fazla gÃ¶rev dalÄ±nÄ± aynÄ± anda yÃ¼rÃ¼tmenize olanak tanÄ±r. Her dal baÄŸÄ±msÄ±z olarak Ã§alÄ±ÅŸÄ±r ve kendi durum dizisini iÅŸler. YÃ¼rÃ¼tme, tÃ¼m dallar tamamlanana kadar bekler ve ardÄ±ndan bir sonraki duruma geÃ§er. Anahtar alanlarÄ± ÅŸunlardÄ±r:

- **Branches**: Paralel yÃ¼rÃ¼tme yollarÄ±nÄ± tanÄ±mlayan bir dizi. Her dal ayrÄ± bir durum makinesidir.
- **ResultPath**: DallarÄ±n birleÅŸik Ã§Ä±ktÄ±sÄ±nÄ± girdide nereye yerleÅŸtireceÄŸini tanÄ±mlar.
- **Retry and Catch**: Paralel durum iÃ§in hata iÅŸleme yapÄ±landÄ±rmalarÄ±.
```json
"ParallelState": {
"Type": "Parallel",
"Branches": [
{
"StartAt": "Task1",
"States": { ... }
},
{
"StartAt": "Task2",
"States": { ... }
}
],
"Next": "NextState"
}
```
### Map

**Map** durumu, bir veri kÃ¼mesindeki her Ã¶ÄŸe iÃ§in bir dizi adÄ±mÄ±n yÃ¼rÃ¼tÃ¼lmesini saÄŸlar. Verilerin paralel iÅŸlenmesi iÃ§in kullanÄ±lÄ±r. Veri kÃ¼mesinin Ã¶ÄŸelerini nasÄ±l iÅŸlemek istediÄŸinize baÄŸlÄ± olarak, Step Functions aÅŸaÄŸÄ±daki modlarÄ± saÄŸlar:

- **Inline Mode**: Her JSON dizi Ã¶ÄŸesi iÃ§in bir alt durum kÃ¼mesini yÃ¼rÃ¼tÃ¼r. 40'tan az paralel yinelemeye sahip kÃ¼Ã§Ã¼k Ã¶lÃ§ekli gÃ¶revler iÃ§in uygundur ve her birini **`Map`** durumunu iÃ§eren iÅŸ akÄ±ÅŸÄ±nÄ±n baÄŸlamÄ±nda Ã§alÄ±ÅŸtÄ±rÄ±r.

```json
"MapState": {
"Type": "Map",
"ItemsPath": "$.arrayItems",
"ItemProcessor": {
"ProcessorConfig": {
"Mode": "INLINE"
},
"StartAt": "AddState",
"States": {
"AddState": {
"Type": "Task",
"Resource": "arn:aws:states:::lambda:invoke",
"OutputPath": "$.Payload",
"Parameters": {
"FunctionName": "arn:aws:lambda:<region>:<account-id>:function:add-function"
},
"End": true
}
}
},
"End": true
"ResultPath": "$.detail.added",
"ItemsPath": "$.added"
}
```

- **Distributed Mode**: YÃ¼ksek eÅŸzamanlÄ±lÄ±k ile bÃ¼yÃ¼k Ã¶lÃ§ekli paralel iÅŸlem iÃ§in tasarlanmÄ±ÅŸtÄ±r. Amazon S3'te depolananlar gibi bÃ¼yÃ¼k veri kÃ¼melerini iÅŸleme desteÄŸi saÄŸlar ve 10.000'e kadar paralel alt iÅŸ akÄ±ÅŸÄ± yÃ¼rÃ¼tmesini yÃ¼ksek eÅŸzamanlÄ±lÄ±kla Ã§alÄ±ÅŸtÄ±rÄ±r, bu alt yÃ¼rÃ¼tmeleri ayrÄ± bir alt yÃ¼rÃ¼tme olarak Ã§alÄ±ÅŸtÄ±rÄ±r.

```json
"DistributedMapState": {
"Type": "Map",
"ItemReader": {
"Resource": "arn:aws:states:::s3:getObject",
"Parameters": {
"Bucket": "my-bucket",
"Key": "data.csv"
}
},
"ItemProcessor": {
"ProcessorConfig": {
"Mode": "DISTRIBUTED",
"ExecutionType": "EXPRESS"
},
"StartAt": "ProcessItem",
"States": {
"ProcessItem": {
"Type": "Task",
"Resource": "arn:aws:lambda:region:account-id:function:my-function",
"End": true
}
}
},
"End": true
"ResultWriter": {
"Resource": "arn:aws:states:::s3:putObject",
"Parameters": {
"Bucket": "myOutputBucket",
"Prefix": "csvProcessJobs"
}
}
}
```


### Versions and aliases

Step Functions ayrÄ±ca durum makinelerinin **versiyonlarÄ±** ve **takma adlarÄ±** aracÄ±lÄ±ÄŸÄ±yla iÅŸ akÄ±ÅŸÄ± daÄŸÄ±tÄ±mlarÄ±nÄ± yÃ¶netmenizi saÄŸlar. Bir versiyon, yÃ¼rÃ¼tÃ¼lebilen bir durum makinesinin anlÄ±k gÃ¶rÃ¼ntÃ¼sÃ¼nÃ¼ temsil eder. Takma adlar, bir durum makinesinin iki versiyonuna kadar iÅŸaretÃ§i olarak hizmet eder.

- **Versions**: Bu deÄŸiÅŸtirilemez durum makinesi anlÄ±k gÃ¶rÃ¼ntÃ¼leri, o durum makinesinin en son revizyonundan oluÅŸturulur. Her versiyon, durum makinesi ARN'si ile versiyon numarasÄ±nÄ± iki nokta Ã¼st Ã¼ste ile birleÅŸtiren benzersiz bir ARN ile tanÄ±mlanÄ±r (**`arn:aws:states:region:account-id:stateMachine:StateMachineName:version-number`**). Versiyonlar dÃ¼zenlenemez, ancak durum makinesini gÃ¼ncelleyebilir ve yeni bir versiyon yayÄ±nlayabilir veya istenen durum makinesi versiyonunu kullanabilirsiniz.
- **Aliases**: Bu iÅŸaretÃ§iler, aynÄ± durum makinesinin iki versiyonuna kadar referans verebilir. Tek bir durum makinesi iÃ§in birden fazla takma ad oluÅŸturulabilir, her biri durum makinesi ARN'si ile takma ad adÄ±nÄ± iki nokta Ã¼st Ã¼ste ile birleÅŸtirerek oluÅŸturulan benzersiz bir ARN ile tanÄ±mlanÄ±r (**`arn:aws:states:region:account-id:stateMachine:StateMachineName:aliasName`**). Takma adlar, bir durum makinesinin iki versiyonundan birine trafik yÃ¶nlendirmeyi saÄŸlar. Alternatif olarak, bir takma ad, durum makinesinin belirli bir versiyonuna iÅŸaret edebilir, ancak diÄŸer takma adlara iÅŸaret edemez. GerektiÄŸinde farklÄ± bir durum makinesi versiyonuna yÃ¶nlendirmek iÃ§in gÃ¼ncellenebilirler, kontrollÃ¼ daÄŸÄ±tÄ±mlar ve iÅŸ akÄ±ÅŸÄ± yÃ¶netimi saÄŸlarlar.

**ASL** hakkÄ±nda daha ayrÄ±ntÄ±lÄ± bilgi iÃ§in: [**Amazon States Language**](https://states-language.net/spec.html).



## IAM Roles for State machines

AWS Step Functions, durum makineleri iÃ§indeki kaynaklara ve eylemlere eriÅŸimi kontrol etmek iÃ§in AWS Identity and Access Management (IAM) rollerini kullanÄ±r. AWS Step Functions'da gÃ¼venlik ve IAM rolleri ile ilgili temel noktalar ÅŸunlardÄ±r:

- **Execution Role**: AWS Step Functions'daki her durum makinesi bir IAM yÃ¼rÃ¼tme rolÃ¼ ile iliÅŸkilidir. Bu rol, durum makinesinin sizin adÄ±nÄ±za hangi eylemleri gerÃ§ekleÅŸtirebileceÄŸini tanÄ±mlar. Bir durum makinesi, AWS hizmetleriyle etkileÅŸime giren durumlar arasÄ±nda geÃ§iÅŸ yaptÄ±ÄŸÄ±nda (Lambda iÅŸlevlerini Ã§aÄŸÄ±rmak, DynamoDB'ye eriÅŸmek gibi), bu eylemleri gerÃ§ekleÅŸtirmek iÃ§in bu yÃ¼rÃ¼tme rolÃ¼nÃ¼ Ã¼stlenir.
- **Permissions**: IAM yÃ¼rÃ¼tme rolÃ¼, diÄŸer AWS hizmetlerinde gerekli eylemleri gerÃ§ekleÅŸtirmeye izin veren izinlerle yapÄ±landÄ±rÄ±lmalÄ±dÄ±r. Ã–rneÄŸin, durum makinenizin AWS Lambda iÅŸlevlerini Ã§aÄŸÄ±rmasÄ± gerekiyorsa, IAM rolÃ¼nÃ¼n **`lambda:InvokeFunction`** izinlerine sahip olmasÄ± gerekir. Benzer ÅŸekilde, DynamoDB'ye yazmasÄ± gerekiyorsa, uygun izinler (**`dynamodb:PutItem`**, **`dynamodb:UpdateItem`**, vb.) verilmelidir.
- **Least Privilege**: Step Functions iÃ§in IAM rolleri yapÄ±landÄ±rÄ±lÄ±rken en az ayrÄ±calÄ±k ilkesine uymak Ã¶nerilir. Bu, durum makinesinin belirli eylemlerini gerÃ§ekleÅŸtirmesi iÃ§in gerekli olan izinlerin verilmesi ve daha fazlasÄ±nÄ±n verilmemesi anlamÄ±na gelir. IAM politikalarÄ±, istenmeyen eriÅŸim riskini azaltarak belirli kaynaklara ve eylemlere yÃ¶nelik olmalÄ±dÄ±r.

## Enumeration

AÅŸaÄŸÄ±daki tÃ¼m enumeration eylemleri iÃ§in ReadOnlyAccess politikasÄ± yeterlidir.
```bash
# State machines #

## List state machines
aws stepfunctions list-state-machines
## Retrieve informatio about the specified state machine
aws stepfunctions describe-state-machine --state-machine-arn <value>

## List verions for the specified state machine
aws stepfunctions list-state-machine-versions --state-machine-arn <value>
## List aliases for the specified state machine
aws stepfunctions list-state-machine-aliases --state-machine-arn <value>
## Retrieve informatio about the specified state machine alias
aws stepfunctions describe-state-machine-alias --state-machine-alias-arn <value>

## List executions of a state machine
aws stepfunctions list-executions --state-machine-arn <value> [--status-filter <RUNNING | SUCCEEDED | FAILED | TIMED_OUT | ABORTED | PENDING_REDRIVE>] [--redrive-filter <REDRIVEN | NOT_REDRIVEN>]
## Retrieve information and relevant metadata about a state machine execution
aws stepfunctions describe-execution --execution-arn <value>
## Retrieve information about the state machine associated to the specified execution
aws stepfunctions describe-state-machine-for-execution --execution-arn <value>
## Retrieve the history of the specified execution as a list of events
aws stepfunctions get-execution-history --execution-arn <value> [--reverse-order | --no-reverse-order] [--include-execution-data | --no-include-execution-data]

## List tags for the specified Ste Functions resource
aws stepfunctions list-tags-for-resource --resource-arn <value>

## Validate the definition of a state machine without creating the resource
aws stepfunctions validate-state-machine-definition --definition <value> [--type <STANDARD | EXPRESS>]

# Activities #

## List existing activities
aws stepfunctions list-activities
## Retrieve information about the specified activity
aws stepfunctions describe-activity --activity-arn <value>

# Map Runs #

## List map runs of an execution
aws stepfunctions list-map-runs --execution-arn <value>
## Provide information about the configuration, progress and results of a Map Run
aws stepfunctions describe-map-run --map-run-arn <value>
## Lists executions of a Map Run
aws stepfunctions list-executions --map-run-arn <value> [--status-filter <RUNNING | SUCCEEDED | FAILED | TIMED_OUT | ABORTED | PENDING_REDRIVE>] [--redrive-filter <REDRIVEN | NOT_REDRIVEN>]
```
## Privesc

AÅŸaÄŸÄ±daki sayfada, **Step Functions izinlerini kÃ¶tÃ¼ye kullanarak ayrÄ±calÄ±klarÄ± nasÄ±l yÃ¼kseltebileceÄŸinizi** kontrol edebilirsiniz:

{% content-ref url="../aws-privilege-escalation/aws-stepfunctions-privesc.md" %}
[aws-stepfunctions-privesc.md](../aws-privilege-escalation/aws-stepfunctions-privesc.md)
{% endcontent-ref %}

## Post Exploitation

{% content-ref url="../aws-post-exploitation/aws-stepfunctions-post-exploitation/" %}
[aws-stepfunctions-post-exploitation](../aws-post-exploitation/aws-stepfunctions-post-exploitation/)
{% endcontent-ref %}

# References

* [https://docs.aws.amazon.com/service-authorization/latest/reference/list_awsstepfunctions.html](https://docs.aws.amazon.com/service-authorization/latest/reference/list_awsstepfunctions.html)
* [https://docs.aws.amazon.com/step-functions/latest/dg/welcome.html](https://docs.aws.amazon.com/step-functions/latest/dg/welcome.html)
* [https://states-language.net/spec.html](https://states-language.net/spec.html)

{% hint style="success" %}
AWS Hacking Ã¶ÄŸrenin ve pratik yapÄ±n:<img src="/.gitbook/assets/image.png" alt="" data-size="line">[**HackTricks Training AWS Red Team Expert (ARTE)**](https://training.hacktricks.xyz/courses/arte)<img src="/.gitbook/assets/image.png" alt="" data-size="line">\
GCP Hacking Ã¶ÄŸrenin ve pratik yapÄ±n: <img src="/.gitbook/assets/image (2).png" alt="" data-size="line">[**HackTricks Training GCP Red Team Expert (GRTE)**<img src="/.gitbook/assets/image (2).png" alt="" data-size="line">](https://training.hacktricks.xyz/courses/grte)

<details>

<summary>HackTricks'i Destekleyin</summary>

* [**abonelik planlarÄ±nÄ±**](https://github.com/sponsors/carlospolop) kontrol edin!
* **ğŸ’¬ Discord grubuna** [**katÄ±lÄ±n**](https://discord.gg/hRep4RUj7f) veya [**telegram grubuna**](https://t.me/peass) katÄ±lÄ±n ya da **Twitter'da** ğŸ¦ [**@hacktricks\_live**](https://twitter.com/hacktricks\_live) **bizi takip edin.**
* **HackTricks** ve [**HackTricks Cloud**](https://github.com/carlospolop/hacktricks-cloud) github depolarÄ±na PR gÃ¶ndererek hacking ipuÃ§larÄ±nÄ± paylaÅŸÄ±n.

</details>
{% endhint %}
