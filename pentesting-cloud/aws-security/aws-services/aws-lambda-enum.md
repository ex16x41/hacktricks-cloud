# AWS - Lambda Enum

{% hint style="success" %}
Learn & practice AWS Hacking:<img src="../../../.gitbook/assets/image (1).png" alt="" data-size="line">[**HackTricks Training AWS Red Team Expert (ARTE)**](https://training.hacktricks.xyz/courses/arte)<img src="../../../.gitbook/assets/image (1).png" alt="" data-size="line">\
Learn & practice GCP Hacking: <img src="../../../.gitbook/assets/image (2).png" alt="" data-size="line">[**HackTricks Training GCP Red Team Expert (GRTE)**<img src="../../../.gitbook/assets/image (2).png" alt="" data-size="line">](https://training.hacktricks.xyz/courses/grte)

<details>

<summary>Support HackTricks</summary>

* Check the [**subscription plans**](https://github.com/sponsors/carlospolop)!
* **Join the** ЁЯТм [**Discord group**](https://discord.gg/hRep4RUj7f) or the [**telegram group**](https://t.me/peass) or **follow** us on **Twitter** ЁЯРж [**@hacktricks\_live**](https://twitter.com/hacktricks\_live)**.**
* **Share hacking tricks by submitting PRs to the** [**HackTricks**](https://github.com/carlospolop/hacktricks) and [**HackTricks Cloud**](https://github.com/carlospolop/hacktricks-cloud) github repos.

</details>
{% endhint %}

## Lambda

Amazon Web Services (AWS) Lambda рдХреЛ рдПрдХ **рдХрдВрдкреНрдпреВрдЯ рд╕реЗрд╡рд╛** рдХреЗ рд░реВрдк рдореЗрдВ рд╡рд░реНрдгрд┐рдд рдХрд┐рдпрд╛ рдЧрдпрд╛ рд╣реИ рдЬреЛ рдХреЛрдб рдХреЛ рдирд┐рд╖реНрдкрд╛рджрд┐рдд рдХрд░рдиреЗ рдХреА рдЕрдиреБрдорддрд┐ рджреЗрддреА рд╣реИ рдмрд┐рдирд╛ рд╕рд░реНрд╡рд░ рдкреНрд░рд╛рд╡рдзрд╛рди рдпрд╛ рдкреНрд░рдмрдВрдзрди рдХреА рдЖрд╡рд╢реНрдпрдХрддрд╛ рдХреЗред рдЗрд╕рдХреА рд╡рд┐рд╢реЗрд╖рддрд╛ рдпрд╣ рд╣реИ рдХрд┐ рдпрд╣ **рдХреЛрдб рдирд┐рд╖реНрдкрд╛рджрди рдХреЗ рд▓рд┐рдП рдЖрд╡рд╢реНрдпрдХ рд╕рдВрд╕рд╛рдзрдиреЛрдВ рдХрд╛ рд╕реНрд╡рдЪрд╛рд▓рд┐рдд рд░реВрдк рд╕реЗ рдкреНрд░рдмрдВрдзрди** рдХрд░рддреА рд╣реИ, рдЬрд┐рд╕рд╕реЗ рдЙрдЪреНрдЪ рдЙрдкрд▓рдмреНрдзрддрд╛, рд╕реНрдХреЗрд▓реЗрдмрд┐рд▓рд┐рдЯреА рдФрд░ рд╕реБрд░рдХреНрд╖рд╛ рдЬреИрд╕реА рд╕реБрд╡рд┐рдзрд╛рдПрдБ рд╕реБрдирд┐рд╢реНрдЪрд┐рдд рд╣реЛрддреА рд╣реИрдВред Lambda рдХрд╛ рдПрдХ рдорд╣рддреНрд╡рдкреВрд░реНрдг рдкрд╣рд▓реВ рдЗрд╕рдХрд╛ рдореВрд▓реНрдп рдирд┐рд░реНрдзрд╛рд░рдг рдореЙрдбрд▓ рд╣реИ, рдЬрд╣рд╛рдБ **рд╢реБрд▓реНрдХ рдХреЗрд╡рд▓ рдЙрдкрдпреЛрдЧ рдХрд┐рдП рдЧрдП рдХрдВрдкреНрдпреВрдЯ рд╕рдордп рдкрд░ рдЖрдзрд╛рд░рд┐рдд рд╣реЛрддреЗ рд╣реИрдВ**, рдкреНрд░рд╛рд░рдВрднрд┐рдХ рдирд┐рд╡реЗрд╢ рдпрд╛ рджреАрд░реНрдШрдХрд╛рд▓рд┐рдХ рдкреНрд░рддрд┐рдмрджреНрдзрддрд╛рдУрдВ рдХреА рдЖрд╡рд╢реНрдпрдХрддрд╛ рдХреЛ рд╕рдорд╛рдкреНрдд рдХрд░рддреЗ рд╣реИрдВред

рдПрдХ рд▓реИрдореНрдмреНрдбрд╛ рдХреЛ рдХреЙрд▓ рдХрд░рдиреЗ рдХреЗ рд▓рд┐рдП рдЗрд╕реЗ **рдЬрд┐рддрдиреА рдмрд╛рд░ рдЪрд╛рд╣реЗрдВ** (Cloudwatch рдХреЗ рд╕рд╛рде) рдХреЙрд▓ рдХрд░рдирд╛ рд╕рдВрднрд╡ рд╣реИ, **рдПрдХ URL** рдПрдВрдбрдкреЙрдЗрдВрдЯ рдХреЛ **рдПрдХреНрд╕рдкреЛрдЬ** рдХрд░рдирд╛ рдФрд░ рдЗрд╕реЗ рдХреЙрд▓ рдХрд░рдирд╛, **API Gateway** рдХреЗ рдорд╛рдзреНрдпрдо рд╕реЗ рдХреЙрд▓ рдХрд░рдирд╛ рдпрд╛ рдпрд╣рд╛рдВ рддрдХ рдХрд┐ **S3** рдмрдХреЗрдЯ рдореЗрдВ рдбреЗрдЯрд╛ рдореЗрдВ **рдкрд░рд┐рд╡рд░реНрддрдиреЛрдВ** рдпрд╛ **DynamoDB** рддрд╛рд▓рд┐рдХрд╛ рдореЗрдВ рдЕрдкрдбреЗрдЯ рдХреЗ рдЖрдзрд╛рд░ рдкрд░ рдХреЙрд▓ рдХрд░рдирд╛ред

рдПрдХ рд▓реИрдореНрдмреНрдбрд╛ рдХрд╛ **рдХреЛрдб** **`/var/task`** рдореЗрдВ рд╕рдВрдЧреНрд░рд╣реАрдд рд╣реЛрддрд╛ рд╣реИред

### Lambda Aliases Weights

рдПрдХ Lambda рдХреЗ рдкрд╛рд╕ **рдХрдИ рд╕рдВрд╕реНрдХрд░рдг** рд╣реЛ рд╕рдХрддреЗ рд╣реИрдВред\
рдФрд░ рдЗрд╕рдХреЗ рдкрд╛рд╕ **рдПрдХ рд╕реЗ рдЕрдзрд┐рдХ** рд╕рдВрд╕реНрдХрд░рдг рд╣реЛ рд╕рдХрддреЗ рд╣реИрдВ рдЬреЛ **рдЙрдкрдирд╛рдореЛрдВ** рдХреЗ рдорд╛рдзреНрдпрдо рд╕реЗ рдПрдХреНрд╕рдкреЛрдЬрд╝ рдХрд┐рдП рдЬрд╛рддреЗ рд╣реИрдВред **рдЙрдкрдирд╛рдо** рдХреЗ рдЕрдВрджрд░ рдПрдХреНрд╕рдкреЛрдЬрд╝ рдХрд┐рдП рдЧрдП **рдкреНрд░рддреНрдпреЗрдХ** **рд╕рдВрд╕реНрдХрд░рдг** рдХрд╛ **рд╡рдЬрди** рдпрд╣ рддрдп рдХрд░реЗрдЧрд╛ рдХрд┐ **рдХреМрди рд╕рд╛ рдЙрдкрдирд╛рдо рдХреЙрд▓ рдкреНрд░рд╛рдкреНрдд рдХрд░рддрд╛ рд╣реИ** (рдпрд╣ 90%-10% рд╣реЛ рд╕рдХрддрд╛ рд╣реИ, рдЙрджрд╛рд╣рд░рдг рдХреЗ рд▓рд┐рдП)ред\
рдпрджрд┐ **рдПрдХ** рдЙрдкрдирд╛рдо рдХрд╛ рдХреЛрдб **рдХрдордЬреЛрд░** рд╣реИ, рддреЛ рдЖрдк **рдЕрдиреБрд░реЛрдз рднреЗрдЬ рд╕рдХрддреЗ рд╣реИрдВ рдЬрдм рддрдХ рдХрдордЬреЛрд░** рд╕рдВрд╕реНрдХрд░рдг рдХреЛ рдПрдХреНрд╕рдкреНрд▓реЙрдЗрдЯ рдкреНрд░рд╛рдкреНрдд рдирд╣реАрдВ рд╣реЛрддрд╛ред

![](<../../../.gitbook/assets/image (223).png>)

### Resource Policies

Lambda рд╕рдВрд╕рд╛рдзрди рдиреАрддрд┐рдпрд╛рдБ рдЕрдиреНрдп рд╕реЗрд╡рд╛рдУрдВ/рдЦрд╛рддреЛрдВ рдХреЛ рд▓реИрдореНрдмреНрдбрд╛ рдХреЛ рдХреЙрд▓ рдХрд░рдиреЗ рдХреЗ рд▓рд┐рдП **рдПрдХреНрд╕реЗрд╕ рджреЗрдиреЗ** рдХреА рдЕрдиреБрдорддрд┐ рджреЗрддреА рд╣реИрдВред\
рдЙрджрд╛рд╣рд░рдг рдХреЗ рд▓рд┐рдП, рдпрд╣ рдиреАрддрд┐ рдХрд┐рд╕реА рдХреЛ **URL рдХреЗ рдорд╛рдзреНрдпрдо рд╕реЗ рдПрдХреНрд╕рдкреЛрдЬрд╝ рдХрд┐рдП рдЧрдП рд▓реИрдореНрдмреНрдбрд╛ рддрдХ рдкрд╣реБрдБрдЪрдиреЗ** рдХреА рдЕрдиреБрдорддрд┐ рджреЗрддреА рд╣реИ:

<figure><img src="https://lh4.googleusercontent.com/4PNFKBdzr3nMrPqeKkTslgwWDKxkXMdQ1SNdv7NPHykj3GX8wODrQyXOFbjk4fxHfZ8pDm5ijWgk2Vq2EGXiPRT3TQfZf1fHycvdEKBuDxJDYos1CJeMHXSeg86ZB-Ol7CNtten6xkVFQj6AhDUEWNQJrQ=s2048" alt=""><figcaption></figcaption></figure>

рдпрд╛ рдЗрд╕реЗ API Gateway рдХреЛ рдЗрд╕реЗ рдХреЙрд▓ рдХрд░рдиреЗ рдХреА рдЕрдиреБрдорддрд┐ рджреЗрдиреЗ рдХреЗ рд▓рд┐рдП:

<figure><img src="https://lh3.googleusercontent.com/Su0JlR0wBqb-99Z4N_2-_kMlX0Xzx2n_GpZuOPW5IeXR3FYbm8OHFDM3Ora1BpXiSjHpDVUlq4yEyXwaI3nBuze6DJ-wRf2ATsCuWbq0wuBCd34E9uIpqwheE6Cc_PopviI_93O_j2ZKXc1-AJtsBoLVUw=s2048" alt=""><figcaption></figcaption></figure>

### Lambda Database Proxies

рдЬрдм **рд╕реИрдХрдбрд╝реЛрдВ** **рд╕рдорд╛рдирд╛рдВрддрд░ рд▓реИрдореНрдмреНрдбрд╛ рдЕрдиреБрд░реЛрдз** рд╣реЛрддреЗ рд╣реИрдВ, рдпрджрд┐ рдкреНрд░рддреНрдпреЗрдХ рдХреЛ **рдбреЗрдЯрд╛рдмреЗрд╕ рд╕реЗ рдХрдиреЗрдХреНрдЯ рдФрд░ рдХрдиреЗрдХреНрд╢рди рдмрдВрдж рдХрд░рдиреЗ** рдХреА рдЖрд╡рд╢реНрдпрдХрддрд╛ рд╣реЛрддреА рд╣реИ, рддреЛ рдпрд╣ рдХрд╛рдо рдирд╣реАрдВ рдХрд░реЗрдЧрд╛ (рд▓реИрдореНрдмреНрдбрд╛ рд╕реНрдЯреЗрдЯрд▓реЗрд╕ рд╣реЛрддреЗ рд╣реИрдВ, рдХрдиреЗрдХреНрд╢рди рдХреЛ рдЦреБрд▓рд╛ рдирд╣реАрдВ рд░рдЦ рд╕рдХрддреЗ)ред\
рдлрд┐рд░, рдпрджрд┐ рдЖрдкрдХреЗ **Lambda рдХрд╛рд░реНрдп RDS Proxy рдХреЗ рд╕рд╛рде рдЗрдВрдЯрд░реИрдХреНрдЯ рдХрд░рддреЗ рд╣реИрдВ** рддреЛ рдЖрдкрдХреЗ рдбреЗрдЯрд╛рдмреЗрд╕ рдЗрдВрд╕реНрдЯреЗрдВрд╕ рдХреЗ рдмрдЬрд╛рдпред рдпрд╣ рд╕рдорд╛рдирд╛рдВрддрд░ Lambda рдХрд╛рд░реНрдпреЛрдВ рджреНрд╡рд╛рд░рд╛ рдмрдирд╛рдП рдЧрдП рдХрдИ рд╕рдорд╡рд░реНрддреА рдХрдиреЗрдХреНрд╢рдиреЛрдВ рдХреЗ рд▓рд┐рдП рдЖрд╡рд╢реНрдпрдХ рдХрдиреЗрдХреНрд╢рди рдкреВрд▓рд┐рдВрдЧ рдХреЛ рд╕рдВрднрд╛рд▓рддрд╛ рд╣реИред рдпрд╣ рдЖрдкрдХреЗ Lambda рдЕрдиреБрдкреНрд░рдпреЛрдЧреЛрдВ рдХреЛ **рдореМрдЬреВрджрд╛ рдХрдиреЗрдХреНрд╢рдиреЛрдВ рдХрд╛ рдкреБрди: рдЙрдкрдпреЛрдЧ** рдХрд░рдиреЗ рдХреА рдЕрдиреБрдорддрд┐ рджреЗрддрд╛ рд╣реИ, рдмрдЬрд╛рдп рдЗрд╕рдХреЗ рдХрд┐ рд╣рд░ рдХрд╛рд░реНрдп рдХреЙрд▓ рдХреЗ рд▓рд┐рдП рдирдП рдХрдиреЗрдХреНрд╢рди рдмрдирд╛рдПред

### Lambda EFS Filesystems

рдбреЗрдЯрд╛ рдХреЛ рд╕рдВрд░рдХреНрд╖рд┐рдд рдХрд░рдиреЗ рдФрд░ рдпрд╣рд╛рдВ рддрдХ рдХрд┐ рд╕рд╛рдЭрд╛ рдХрд░рдиреЗ рдХреЗ рд▓рд┐рдП **Lambdas EFS рддрдХ рдкрд╣реБрдБрдЪ рд╕рдХрддреЗ рд╣реИрдВ рдФрд░ рдЙрдиреНрд╣реЗрдВ рдорд╛рдЙрдВрдЯ рдХрд░ рд╕рдХрддреЗ рд╣реИрдВ**, рддрд╛рдХрд┐ Lambda рдЗрд╕реЗ рдкрдврд╝ рдФрд░ рд▓рд┐рдЦ рд╕рдХреЗред

### Lambda Layers

рдПрдХ Lambda _рд▓реЗрдпрд░_ рдПрдХ .zip рдлрд╝рд╛рдЗрд▓ рд╕рдВрдЧреНрд░рд╣ рд╣реИ рдЬреЛ **рдЕрддрд┐рд░рд┐рдХреНрдд рдХреЛрдб** рдпрд╛ рдЕрдиреНрдп рд╕рд╛рдордЧреНрд░реА рдХреЛ **рд╢рд╛рдорд┐рд▓ рдХрд░ рд╕рдХрддрд╛ рд╣реИ**ред рдПрдХ рд▓реЗрдпрд░ рдореЗрдВ рдкреБрд╕реНрддрдХрд╛рд▓рдп, рдПрдХ [рдХрд╕реНрдЯрдо рд░рдирдЯрд╛рдЗрдо](https://docs.aws.amazon.com/lambda/latest/dg/runtimes-custom.html), рдбреЗрдЯрд╛, рдпрд╛ рдХреЙрдиреНрдлрд╝рд┐рдЧрд░реЗрд╢рди рдлрд╝рд╛рдЗрд▓реЗрдВ рд╣реЛ рд╕рдХрддреА рд╣реИрдВред

рдкреНрд░рддреНрдпреЗрдХ рдлрд╝рдВрдХреНрд╢рди рдореЗрдВ **рдкрд╛рдБрдЪ рд▓реЗрдпрд░** рддрдХ рд╢рд╛рдорд┐рд▓ рдХрд░рдирд╛ рд╕рдВрднрд╡ рд╣реИред рдЬрдм рдЖрдк рдХрд┐рд╕реА рдлрд╝рдВрдХреНрд╢рди рдореЗрдВ рдПрдХ рд▓реЗрдпрд░ рд╢рд╛рдорд┐рд▓ рдХрд░рддреЗ рд╣реИрдВ, рддреЛ **рд╕рд╛рдордЧреНрд░реА рдХреЛ `/opt`** рдирд┐рд░реНрджреЗрд╢рд┐рдХрд╛ рдореЗрдВ рдирд┐рд╖реНрдкрд╛рджрди рд╡рд╛рддрд╛рд╡рд░рдг рдореЗрдВ рдирд┐рдХрд╛рд▓рд╛ рдЬрд╛рддрд╛ рд╣реИред

**рдбрд┐рдлрд╝реЙрд▓реНрдЯ** рд░реВрдк рд╕реЗ, рдЖрдк рдЬреЛ **рд▓реЗрдпрд░** рдмрдирд╛рддреЗ рд╣реИрдВ рд╡реЗ рдЖрдкрдХреЗ AWS рдЦрд╛рддреЗ рдХреЗ рд▓рд┐рдП **рдирд┐рдЬреА** рд╣реЛрддреА рд╣реИрдВред рдЖрдк рдПрдХ рд▓реЗрдпрд░ рдХреЛ рдЕрдиреНрдп рдЦрд╛рддреЛрдВ рдХреЗ рд╕рд╛рде **рд╕рд╛рдЭрд╛** рдХрд░рдиреЗ рдпрд╛ рд▓реЗрдпрд░ рдХреЛ **рд╕рд╛рд░реНрд╡рдЬрдирд┐рдХ** рдмрдирд╛рдиреЗ рдХрд╛ рд╡рд┐рдХрд▓реНрдк рдЪреБрди рд╕рдХрддреЗ рд╣реИрдВред рдпрджрд┐ рдЖрдкрдХреЗ рдлрд╝рдВрдХреНрд╢рди рдПрдХ рд▓реЗрдпрд░ рдХрд╛ рдЙрдкрднреЛрдЧ рдХрд░рддреЗ рд╣реИрдВ рдЬрд┐рд╕реЗ рдПрдХ рдЕрд▓рдЧ рдЦрд╛рддреЗ рдиреЗ рдкреНрд░рдХрд╛рд╢рд┐рдд рдХрд┐рдпрд╛ рд╣реИ, рддреЛ рдЖрдкрдХреЗ рдлрд╝рдВрдХреНрд╢рди **рд▓реЗрдпрд░ рд╕рдВрд╕реНрдХрд░рдг рдХрд╛ рдЙрдкрдпреЛрдЧ рдЬрд╛рд░реА рд░рдЦ рд╕рдХрддреЗ рд╣реИрдВ** рдЬрдм рдЗрд╕реЗ рд╣рдЯрд╛ рджрд┐рдпрд╛ рдЧрдпрд╛ рд╣реЛ, рдпрд╛ рдЬрдм рдЖрдкрдХреА рд▓реЗрдпрд░ рддрдХ рдкрд╣реБрдБрдЪрдиреЗ рдХреА рдЕрдиреБрдорддрд┐ рд░рджреНрдж рдХрд░ рджреА рдЧрдИ рд╣реЛред рд╣рд╛рд▓рд╛рдБрдХрд┐, рдЖрдк рдПрдХ рдирдИ рдлрд╝рдВрдХреНрд╢рди рдирд╣реАрдВ рдмрдирд╛ рд╕рдХрддреЗ рдпрд╛ рд╣рдЯрд╛рдП рдЧрдП рд▓реЗрдпрд░ рд╕рдВрд╕реНрдХрд░рдг рдХрд╛ рдЙрдкрдпреЛрдЧ рдХрд░рддреЗ рд╣реБрдП рдлрд╝рдВрдХреНрд╢рдВрд╕ рдХреЛ рдЕрдкрдбреЗрдЯ рдирд╣реАрдВ рдХрд░ рд╕рдХрддреЗред

рдХрдВрдЯреЗрдирд░ рдЫрд╡рд┐ рдХреЗ рд░реВрдк рдореЗрдВ рддреИрдирд╛рдд рдлрд╝рдВрдХреНрд╢рди рд▓реЗрдпрд░ рдХрд╛ рдЙрдкрдпреЛрдЧ рдирд╣реАрдВ рдХрд░рддреЗ рд╣реИрдВред рдЗрд╕рдХреЗ рдмрдЬрд╛рдп, рдЖрдк рдЫрд╡рд┐ рдмрдирд╛рдиреЗ рдХреЗ рд╕рдордп рдЕрдкрдиреЗ рдкрд╕рдВрджреАрджрд╛ рд░рдирдЯрд╛рдЗрдо, рдкреБрд╕реНрддрдХрд╛рд▓рдпреЛрдВ рдФрд░ рдЕрдиреНрдп рдирд┐рд░реНрднрд░рддрд╛рдУрдВ рдХреЛ рдХрдВрдЯреЗрдирд░ рдЫрд╡рд┐ рдореЗрдВ рдкреИрдХреЗрдЬ рдХрд░рддреЗ рд╣реИрдВред

### Lambda Extensions

Lambda рдПрдХреНрд╕рдЯреЗрдВрд╢рди рдлрд╝рдВрдХреНрд╢рдВрд╕ рдХреЛ рд╡рд┐рднрд┐рдиреНрди **рдирд┐рдЧрд░рд╛рдиреА, рдЕрд╡рд▓реЛрдХрди, рд╕реБрд░рдХреНрд╖рд╛, рдФрд░ рд╢рд╛рд╕рди рдЙрдкрдХрд░рдгреЛрдВ** рдХреЗ рд╕рд╛рде рдПрдХреАрдХреГрдд рдХрд░рдХреЗ рдмрдврд╝рд╛рддреЗ рд╣реИрдВред рдпреЗ рдПрдХреНрд╕рдЯреЗрдВрд╢рди, [.zip рд╕рдВрдЧреНрд░рд╣ рдХрд╛ рдЙрдкрдпреЛрдЧ рдХрд░рдХреЗ Lambda рд▓реЗрдпрд░реНрд╕](https://docs.aws.amazon.com/lambda/latest/dg/configuration-layers.html) рдХреЗ рдорд╛рдзреНрдпрдо рд╕реЗ рдЬреЛрдбрд╝реЗ рдЬрд╛рддреЗ рд╣реИрдВ рдпрд╛ [рдХрдВрдЯреЗрдирд░ рдЫрд╡рд┐ рддреИрдирд╛рддреА рдореЗрдВ рд╢рд╛рдорд┐рд▓ рд╣реЛрддреЗ рд╣реИрдВ](https://aws.amazon.com/blogs/compute/working-with-lambda-layers-and-extensions-in-container-images/), рджреЛ рдореЛрдб рдореЗрдВ рдХрд╛рд░реНрдп рдХрд░рддреЗ рд╣реИрдВ: **рдЖрдВрддрд░рд┐рдХ** рдФрд░ **рдмрд╛рд╣рд░реА**ред

* **рдЖрдВрддрд░рд┐рдХ рдПрдХреНрд╕рдЯреЗрдВрд╢рди** рд░рдирдЯрд╛рдЗрдо рдкреНрд░рдХреНрд░рд┐рдпрд╛ рдХреЗ рд╕рд╛рде рд╡рд┐рд▓реАрди рд╣реЛрддреЗ рд╣реИрдВ, рдЗрд╕рдХреЗ рд╕реНрдЯрд╛рд░реНрдЯрдЕрдк рдХреЛ **рднрд╛рд╖рд╛-рд╡рд┐рд╢рд┐рд╖реНрдЯ рдкрд░реНрдпрд╛рд╡рд░рдг рдЪрд░** рдФрд░ **рд░реИрдкрд░ рд╕реНрдХреНрд░рд┐рдкреНрдЯ** рдХрд╛ рдЙрдкрдпреЛрдЧ рдХрд░рдХреЗ рд╕рдВрд╢реЛрдзрд┐рдд рдХрд░рддреЗ рд╣реИрдВред рдпрд╣ рдЕрдиреБрдХреВрд▓рди рд╡рд┐рднрд┐рдиреНрди рд░рдирдЯрд╛рдЗрдореНрд╕ рдкрд░ рд▓рд╛рдЧреВ рд╣реЛрддрд╛ рд╣реИ, рдЬрд┐рд╕рдореЗрдВ **Java Correto 8 рдФрд░ 11, Node.js 10 рдФрд░ 12, рдФрд░ .NET Core 3.1** рд╢рд╛рдорд┐рд▓ рд╣реИрдВред
* **рдмрд╛рд╣рд░реА рдПрдХреНрд╕рдЯреЗрдВрд╢рди** рдЕрд▓рдЧ рдкреНрд░рдХреНрд░рд┐рдпрд╛рдУрдВ рдХреЗ рд░реВрдк рдореЗрдВ рдЪрд▓рддреЗ рд╣реИрдВ, Lambda рдлрд╝рдВрдХреНрд╢рди рдХреЗ рдЬреАрд╡рди рдЪрдХреНрд░ рдХреЗ рд╕рд╛рде рд╕рдВрдЪрд╛рд▓рди рд╕рдВрд░реЗрдЦрдг рдмрдирд╛рдП рд░рдЦрддреЗ рд╣реИрдВред рд╡реЗ рд╡рд┐рднрд┐рдиреНрди рд░рдирдЯрд╛рдЗрдореНрд╕ рдХреЗ рд╕рд╛рде рд╕рдВрдЧрдд рд╣реЛрддреЗ рд╣реИрдВ рдЬреИрд╕реЗ **Node.js 10 рдФрд░ 12, Python 3.7 рдФрд░ 3.8, Ruby 2.5 рдФрд░ 2.7, Java Corretto 8 рдФрд░ 11, .NET Core 3.1**, рдФрд░ **рдХрд╕реНрдЯрдо рд░рдирдЯрд╛рдЗрдо**ред

### Enumeration
```bash
aws lambda get-account-settings

# List functions and get extra config info
aws lambda list-functions
aws lambda get-function --function-name <function_name>
aws lambda get-function-configuration --function-name <function_name>
aws lambda list-function-event-invoke-configs --function-name <function_name>
## Check for creds in env vars
aws lambda list-functions | jq '.Functions[].Environment'
## Download & check the source code
aws lambda get-function --function-name "<func_name>" --query 'Code.Location'
wget -O lambda-function.zip <url-from-previous-query>

# Get Lambda URL (if any)
aws lambda list-function-url-configs --function-name <function_name>
aws lambda get-function-url-config --function-name <function_name>

# Get who has permissions to invoke the Lambda
aws lambda get-policy --function-name <function_name>

# Versions and Aliases
aws lambda list-versions-by-function --function-name <func_name>
aws lambda list-aliases --function-name <func_name>

# List layers
aws lambda list-layers
aws lambda list-layer-versions --layer-name <name>
aws lambda get-layer-version --layer-name <name> --version-number <ver>
aws lambda get-layer-version-by-arn --arn <name> #Get external ARNs

# List other metadata
aws lambda list-event-source-mappings
aws lambda list-code-signing-configs
aws lambda list-functions-by-code-signing-config --code-signing-config-arn <arn>
```
### рдПрдХ рд▓реИрдореНрдмреНрдбрд╛ рдХреЛ рд╕рдХреНрд░рд┐рдп рдХрд░реЗрдВ

#### рдореИрдиреБрдЕрд▓
```bash
# Invoke function
aws lambda invoke --function-name FUNCTION_NAME /tmp/out
## Some functions will expect parameters, they will access them with something like:
## target_policys = event['policy_names']
## user_name = event['user_name']
aws lambda invoke --function-name <name> --cli-binary-format raw-in-base64-out --payload '{"policy_names": ["AdministratorAccess], "user_name": "sdf"}' out.txt
```
#### рдЙрдЬрд╛рдЧрд░ URL рдХреЗ рдорд╛рдзреНрдпрдо рд╕реЗ
```bash
aws lambda list-function-url-configs --function-name <function_name> #Get lambda URL
aws lambda get-function-url-config   --function-name <function_name> #Get lambda URL
```
#### Call Lambda function via URL

рдЕрдм рд╕рдВрднрд╛рд╡рд┐рдд рд▓реИрдореНрдмреНрдбрд╛ рдлрд╝рдВрдХреНрд╢рдВрд╕ рдХреЛ рдирд┐рд╖реНрдкрд╛рджрд┐рдд рдХрд░рдиреЗ рдХрд╛ рд╕рдордп рд╣реИ:
```
aws --region us-west-2 --profile level6 lambda list-functions
```
![](<../../../.gitbook/assets/image (262).png>)

рдПрдХ рд▓реИрдореНрдмреНрдбрд╛ рдлрд╝рдВрдХреНрд╢рди "Level6" рдЙрдкрд▓рдмреНрдз рд╣реИред рдЪрд▓реЛ рдкрддрд╛ рдХрд░рддреЗ рд╣реИрдВ рдХрд┐ рдЗрд╕реЗ рдХреИрд╕реЗ рдХреЙрд▓ рдХрд┐рдпрд╛ рдЬрд╛рдП:
```bash
aws --region us-west-2 --profile level6 lambda get-policy --function-name Level6
```
![](<../../../.gitbook/assets/image (102).png>)

рдЕрдм, рдЬрдм рдЖрдк рдирд╛рдо рдФрд░ рдЖрдИрдбреА рдЬрд╛рдирддреЗ рд╣реИрдВ, рддреЛ рдЖрдк рдирд╛рдо рдкреНрд░рд╛рдкреНрдд рдХрд░ рд╕рдХрддреЗ рд╣реИрдВ:
```bash
aws --profile level6 --region us-west-2 apigateway get-stages --rest-api-id "s33ppypa75"
```
![](<../../../.gitbook/assets/image (237).png>)

рдФрд░ рдЕрдВрдд рдореЗрдВ рдлрд╝рдВрдХреНрд╢рди рдХреЛ рдХреЙрд▓ рдХрд░реЗрдВ (рдзреНрдпрд╛рди рджреЗрдВ рдХрд┐ ID, Name рдФрд░ function-name URL рдореЗрдВ рджрд┐рдЦрд╛рдИ рджреЗрддреЗ рд╣реИрдВ): [https://s33ppypa75.execute-api.us-west-2.amazonaws.com/Prod/level6](https://s33ppypa75.execute-api.us-west-2.amazonaws.com/Prod/level6)

`URL:`**`https://<rest-api-id>.execute-api.<region>.amazonaws.com/<stageName>/<funcName>`**

#### рдЕрдиреНрдп рдЯреНрд░рд┐рдЧрд░реНрд╕

рд▓реИрдореНрдмреНрдбрд╛ рдХреЛ рдЯреНрд░рд┐рдЧрд░ рдХрд░рдиреЗ рдХреЗ рд▓рд┐рдП рдХрдИ рдЕрдиреНрдп рд╕реНрд░реЛрдд рд╣реИрдВ

<figure><img src="../../../.gitbook/assets/image (167).png" alt=""><figcaption></figcaption></figure>

### рдкреНрд░рд┐рд╡реЗрд╕реНрдХ

рдЕрдЧрд▓реА рдкреГрд╖реНрда рдореЗрдВ рдЖрдк рджреЗрдЦ рд╕рдХрддреЗ рд╣реИрдВ рдХрд┐ рдХреИрд╕реЗ **рд▓реИрдореНрдмреНрдбрд╛ рдЕрдиреБрдорддрд┐рдпреЛрдВ рдХрд╛ рджреБрд░реБрдкрдпреЛрдЧ рдХрд░рдХреЗ рд╡рд┐рд╢реЗрд╖рд╛рдзрд┐рдХрд╛рд░ рдмрдврд╝рд╛рдПрдВ**:

{% content-ref url="../aws-privilege-escalation/aws-lambda-privesc.md" %}
[aws-lambda-privesc.md](../aws-privilege-escalation/aws-lambda-privesc.md)
{% endcontent-ref %}

### рдЕрдирдзрд┐рдХреГрдд рдкрд╣реБрдВрдЪ

{% content-ref url="../aws-unauthenticated-enum-access/aws-lambda-unauthenticated-access.md" %}
[aws-lambda-unauthenticated-access.md](../aws-unauthenticated-enum-access/aws-lambda-unauthenticated-access.md)
{% endcontent-ref %}

### рдкреЛрд╕реНрдЯ рдПрдХреНрд╕рдкреНрд▓реЛрдЗрдЯреЗрд╢рди

{% content-ref url="../aws-post-exploitation/aws-lambda-post-exploitation/" %}
[aws-lambda-post-exploitation](../aws-post-exploitation/aws-lambda-post-exploitation/)
{% endcontent-ref %}

### рд╕реНрдерд┐рд░рддрд╛

{% content-ref url="../aws-persistence/aws-lambda-persistence/" %}
[aws-lambda-persistence](../aws-persistence/aws-lambda-persistence/)
{% endcontent-ref %}

## рд╕рдВрджрд░реНрдн

* [https://docs.aws.amazon.com/lambda/latest/dg/gettingstarted-concepts.html#gettingstarted-concepts-layer](https://docs.aws.amazon.com/lambda/latest/dg/gettingstarted-concepts.html#gettingstarted-concepts-layer)
* [https://aws.amazon.com/blogs/compute/building-extensions-for-aws-lambda-in-preview/](https://aws.amazon.com/blogs/compute/building-extensions-for-aws-lambda-in-preview/)

{% hint style="success" %}
AWS рд╣реИрдХрд┐рдВрдЧ рд╕реАрдЦреЗрдВ рдФрд░ рдЕрднреНрдпрд╛рд╕ рдХрд░реЗрдВ:<img src="../../../.gitbook/assets/image (1).png" alt="" data-size="line">[**HackTricks Training AWS Red Team Expert (ARTE)**](https://training.hacktricks.xyz/courses/arte)<img src="../../../.gitbook/assets/image (1).png" alt="" data-size="line">\
GCP рд╣реИрдХрд┐рдВрдЧ рд╕реАрдЦреЗрдВ рдФрд░ рдЕрднреНрдпрд╛рд╕ рдХрд░реЗрдВ: <img src="../../../.gitbook/assets/image (2).png" alt="" data-size="line">[**HackTricks Training GCP Red Team Expert (GRTE)**<img src="../../../.gitbook/assets/image (2).png" alt="" data-size="line">](https://training.hacktricks.xyz/courses/grte)

<details>

<summary>HackTricks рдХрд╛ рд╕рдорд░реНрдерди рдХрд░реЗрдВ</summary>

* [**рд╕рджрд╕реНрдпрддрд╛ рдпреЛрдЬрдирд╛рдУрдВ**](https://github.com/sponsors/carlospolop) рдХреА рдЬрд╛рдВрдЪ рдХрд░реЗрдВ!
* **ЁЯТм [**Discord рд╕рдореВрд╣**](https://discord.gg/hRep4RUj7f) рдпрд╛ [**рдЯреЗрд▓реАрдЧреНрд░рд╛рдо рд╕рдореВрд╣**](https://t.me/peass) рдореЗрдВ рд╢рд╛рдорд┐рд▓ рд╣реЛрдВ рдпрд╛ **Twitter** рдкрд░ рд╣рдореЗрдВ **рдлреЙрд▓реЛ рдХрд░реЗрдВ** ЁЯРж [**@hacktricks\_live**](https://twitter.com/hacktricks\_live)**.**
* **рд╣реИрдХрд┐рдВрдЧ рдЯреНрд░рд┐рдХреНрд╕ рд╕рд╛рдЭрд╛ рдХрд░реЗрдВ рдФрд░ [**HackTricks**](https://github.com/carlospolop/hacktricks) рдФрд░ [**HackTricks Cloud**](https://github.com/carlospolop/hacktricks-cloud) рдЧрд┐рдЯрд╣рдм рд░рд┐рдкреЛрдЬрд┐рдЯрд░реА рдореЗрдВ PR рд╕рдмрдорд┐рдЯ рдХрд░реЗрдВред**

</details>
{% endhint %}
