# AWS - VPC & Networking Temel Bilgiler

{% hint style="success" %}
AWS Hacking'i Ã¶ÄŸrenin ve pratik yapÄ±n:<img src="../../../../.gitbook/assets/image (1) (1) (1).png" alt="" data-size="line">[**HackTricks EÄŸitim AWS KÄ±rmÄ±zÄ± TakÄ±m UzmanÄ± (ARTE)**](https://training.hacktricks.xyz/courses/arte)<img src="../../../../.gitbook/assets/image (1) (1) (1).png" alt="" data-size="line">\
GCP Hacking'i Ã¶ÄŸrenin ve pratik yapÄ±n: <img src="../../../../.gitbook/assets/image (2).png" alt="" data-size="line">[**HackTricks EÄŸitim GCP KÄ±rmÄ±zÄ± TakÄ±m UzmanÄ± (GRTE)**<img src="../../../../.gitbook/assets/image (2).png" alt="" data-size="line">](https://training.hacktricks.xyz/courses/grte)

<details>

<summary>HackTricks'i Destekleyin</summary>

* [**abonelik planlarÄ±nÄ±**](https://github.com/sponsors/carlospolop) kontrol edin!
* **ğŸ’¬ [**Discord grubuna**](https://discord.gg/hRep4RUj7f) veya [**telegram grubuna**](https://t.me/peass) katÄ±lÄ±n ya da **Twitter'da** ğŸ¦ [**@hacktricks\_live**](https://twitter.com/hacktricks_live)**'Ä± takip edin.**
* **Hacking ipuÃ§larÄ±nÄ± paylaÅŸmak iÃ§in** [**HackTricks**](https://github.com/carlospolop/hacktricks) ve [**HackTricks Cloud**](https://github.com/carlospolop/hacktricks-cloud) github reposuna PR gÃ¶nderin.

</details>
{% endhint %}

## AWS Networking KÄ±saca

Bir **VPC**, 10.0.0.0/16 gibi bir **aÄŸ CIDR** iÃ§erir (kendi **yÃ¶nlendirme tablosu** ve **aÄŸ ACL** ile).

Bu VPC aÄŸÄ±, **alt aÄŸlara** bÃ¶lÃ¼nmÃ¼ÅŸtÃ¼r, bu nedenle bir **alt aÄŸ**, **VPC**, **yÃ¶nlendirme** **tablosu** ve **aÄŸ ACL** ile doÄŸrudan **iliÅŸkilidir**.

Daha sonra, hizmetlere (EC2 Ã¶rnekleri gibi) baÄŸlÄ± **AÄŸ ArayÃ¼zleri**, **gÃ¼venlik grubu** ile **alt aÄŸlara** **baÄŸlanÄ±r**.

Bu nedenle, bir **gÃ¼venlik grubu**, **kullanÄ±lan** aÄŸ **arayÃ¼zlerinin** aÃ§Ä±ÄŸa Ã§Ä±kan portlarÄ±nÄ± **alt aÄŸa baÄŸÄ±msÄ±z olarak** sÄ±nÄ±rlayacaktÄ±r. Ve bir **aÄŸ ACL**, **tÃ¼m aÄŸa** aÃ§Ä±ÄŸa Ã§Ä±kan portlarÄ± **sÄ±nÄ±rlayacaktÄ±r**.

AyrÄ±ca, **Ä°nternete eriÅŸim** saÄŸlamak iÃ§in kontrol edilecek bazÄ± ilginÃ§ yapÄ±landÄ±rmalar vardÄ±r:

* Bir **alt aÄŸ**, **otomatik olarak genel IPv4 adresleri atayabilir**
* **Otomatik olarak IPv4 adresleri atayan** bir aÄŸda oluÅŸturulan bir **Ã¶rnek**, bir tane alabilir
* Bir **Ä°nternet geÃ§idi**, **VPC'ye eklenmelidir**
* **Sadece Ã§Ä±kÄ±ÅŸ internet geÃ§itleri** de kullanÄ±labilir
* **Ã–zel bir alt aÄŸda** bir **NAT geÃ§idi** de olabilir, bÃ¶ylece bu Ã¶zel alt aÄŸdan **harici hizmetlere baÄŸlanmak** mÃ¼mkÃ¼ndÃ¼r, ancak dÄ±ÅŸarÄ±dan onlara ulaÅŸmak **mÃ¼mkÃ¼n deÄŸildir**.
* NAT geÃ§idi **genel** (internete eriÅŸim) veya **Ã¶zel** (diÄŸer VPC'lere eriÅŸim) olabilir

![](<../../../../.gitbook/assets/image (274).png>)

## VPC

Amazon **Sanal Ã–zel Bulut** (Amazon VPC), tanÄ±mladÄ±ÄŸÄ±nÄ±z bir sanal aÄŸa **AWS kaynaklarÄ±nÄ± baÅŸlatmanÄ±za** olanak tanÄ±r. Bu sanal aÄŸ, birkaÃ§ alt aÄŸa, Ä°nternet GeÃ§itlerine, Ä°nternete eriÅŸim, ACL'lere, GÃ¼venlik gruplarÄ±na, IP'lere sahip olacaktÄ±r...

### Alt AÄŸlar

Alt aÄŸlar, daha yÃ¼ksek bir gÃ¼venlik seviyesi saÄŸlamaya yardÄ±mcÄ± olur. **Benzer kaynaklarÄ±n mantÄ±ksal gruplamasÄ±**, altyapÄ±nÄ±zda **yÃ¶netim kolaylÄ±ÄŸÄ±** saÄŸlamaya da yardÄ±mcÄ± olur.

* GeÃ§erli CIDR'ler, /16 aÄŸ maskesinden /28 aÄŸ maskesine kadar olanlardÄ±r.
* Bir alt aÄŸ, aynÄ± anda farklÄ± kullanÄ±labilirlik bÃ¶lgelerinde olamaz.
* **AWS, her alt aÄŸÄ±n ilk Ã¼Ã§ ana bilgisayar IP adresini** **iÃ§sel AWS kullanÄ±mÄ± iÃ§in** **ayÄ±rÄ±r**: kullanÄ±lan ilk ana bilgisayar adresi VPC yÃ¶nlendiricisi iÃ§indir. Ä°kinci adres AWS DNS iÃ§in ayrÄ±lmÄ±ÅŸtÄ±r ve Ã¼Ã§Ã¼ncÃ¼ adres gelecekteki kullanÄ±m iÃ§in ayrÄ±lmÄ±ÅŸtÄ±r.
* **Ä°nternete doÄŸrudan eriÅŸimi olan** alt aÄŸlara **genel alt aÄŸlar** denir, oysa Ã¶zel alt aÄŸlar buna sahip deÄŸildir.

<figure><img src="https://lh5.googleusercontent.com/N_WTrTrDAHwN61FMKJvLSHVua2EM0IazHH1fSTg8JQfTChm-dLN9mn7wkjz2MlpD-uOUqtWdMZpqKOp4VxaHy5-5X66GD1K8y1UGc27r-GbHdFty9ImpXdcjEsC7u4vjxKme_B_HwDOUnG6camxENYECTw=s2048" alt=""><figcaption></figcaption></figure>

<figure><img src="https://lh3.googleusercontent.com/MmjfVzGmV4jM7tO8lVoTKONoeqbq6E40DGeKUoo4kN-lmMDKnEiGNB-gGVx3EvjK9UV844im225CA8aAjomHf1Modt3MramHrHZdEGbeSZncWhVuT9R8f7tQZ2pXjdSJxeNfErmJ-0mmcUaV6dcU0TAd2A=s2048" alt=""><figcaption></figcaption></figure>

### YÃ¶nlendirme TablolarÄ±

YÃ¶nlendirme tablolarÄ±, bir VPC iÃ§indeki bir alt aÄŸ iÃ§in trafik yÃ¶nlendirmesini belirler. Hangi aÄŸ trafiÄŸinin internete veya bir VPN baÄŸlantÄ±sÄ±na yÃ¶nlendirileceÄŸini belirler. Genellikle eriÅŸim bulursunuz:

* Yerel VPC
* NAT
* Ä°nternet GeÃ§itleri / Sadece Ã§Ä±kÄ±ÅŸ internet geÃ§itleri (VPC'ye Ä°nternete eriÅŸim saÄŸlamak iÃ§in gereklidir).
* Bir alt aÄŸÄ± genel yapmak iÃ§in, VPC'nize bir **Ä°nternet geÃ§idi** **oluÅŸturmalÄ±** ve **eklemelisiniz**.
* VPC uÃ§ noktalarÄ± (Ã¶zel aÄŸlardan S3'e eriÅŸim iÃ§in)

AÅŸaÄŸÄ±daki resimlerde, varsayÄ±lan bir genel aÄŸ ile Ã¶zel bir aÄŸ arasÄ±ndaki farklarÄ± kontrol edebilirsiniz:

<figure><img src="https://lh3.googleusercontent.com/q4ASpcLAYqijdNMLhMLl8EoowDtTMU5I_7YCVfk7-5hxDyeQOik9ImHnD2SYy32XUA2qXjEbXTAxA1lP--znJASdhYOdBveDcrD42f9XBKZ3EmjJCazN3YPLC6oS0xtRMmfORuwCszmMt-KrAkH07_izwg=s2048" alt=""><figcaption></figcaption></figure>

<figure><img src="https://lh5.googleusercontent.com/30psylXAI0gRN6_LK-reP00aGIlMma64E1qafCVPunn6nS-y5jAO6Y2JiempKcf6-LFi7ScicYcOh7BbHEya2VWtksnFX_8SPXQf97tKkg2tNZzrArWbiDCCn2m2LP1QUq6MZ_KayH3yir7t8zpO7CEQOw=s2048" alt=""><figcaption></figcaption></figure>

### ACL'ler

**AÄŸ EriÅŸim Kontrol Listeleri (ACL'ler)**: AÄŸ ACL'leri, bir alt aÄŸa gelen ve giden aÄŸ trafiÄŸini kontrol eden gÃ¼venlik duvarÄ± kurallarÄ±dÄ±r. Belirli IP adreslerine veya aralÄ±klara trafik izni vermek veya engellemek iÃ§in kullanÄ±labilirler.

* EriÅŸimi saÄŸlamak/engellemek iÃ§in genellikle gÃ¼venlik gruplarÄ± kullanÄ±lÄ±r, ancak bu, kurulu ters shell'leri tamamen kesmenin tek yoludur. GÃ¼venlik gruplarÄ±ndaki deÄŸiÅŸtirilmiÅŸ bir kural, zaten kurulu baÄŸlantÄ±larÄ± durdurmaz.
* Ancak, bu tÃ¼m alt aÄŸa uygulanÄ±r, bu nedenle engelleme yaparken dikkatli olun, Ã§Ã¼nkÃ¼ gerekli iÅŸlevsellik bozulabilir.

### GÃ¼venlik GruplarÄ±

GÃ¼venlik gruplarÄ±, bir VPC'deki Ã¶rneklere gelen ve giden aÄŸ **trafiklerini kontrol eden** sanal bir **gÃ¼venlik duvarÄ±dÄ±r**. 1 SG ile M Ã¶rnek iliÅŸkisi (genellikle 1'e 1).\
Genellikle, Ã¶rneklerde tehlikeli portlarÄ± aÃ§mak iÃ§in kullanÄ±lÄ±r, Ã¶rneÄŸin port 22 gibi:

<figure><img src="https://lh5.googleusercontent.com/LliB7eb3cYfkEyOpyw1-eYgWsn2kq1yF6uRn5VYndvOuTvDlURimYx9UvuK8F2impTLmx50mid4MdTXE-Ljt2i_rxaIfnKUdji_hFjCdU9tdoW-axng9-W4tSL71gbbjrPQ7IYY5lAdH_G3UoMRMGGGOxQ=s2048" alt=""><figcaption></figcaption></figure>

### Elastik IP Adresleri

Bir _Elastik IP adresi_, dinamik bulut biliÅŸim iÃ§in tasarlanmÄ±ÅŸ bir **statik IPv4 adresidir**. Elastik IP adresi, AWS hesabÄ±nÄ±za tahsis edilir ve serbest bÄ±rakana kadar sizin olur. Elastik IP adresi kullanarak, bir Ã¶rneÄŸin veya yazÄ±lÄ±mÄ±n baÅŸarÄ±sÄ±zlÄ±ÄŸÄ±nÄ± hÄ±zla baÅŸka bir Ã¶rneÄŸe yeniden yÃ¶nlendirerek maskeleyebilirsiniz.

### Alt AÄŸlar ArasÄ±ndaki BaÄŸlantÄ±

VarsayÄ±lan olarak, tÃ¼m alt aÄŸlarÄ±n **otomatik olarak genel IP adresleri atama Ã¶zelliÄŸi kapalÄ±dÄ±r**, ancak aÃ§Ä±labilir.

**Bir yÃ¶nlendirme tablosundaki yerel bir yÃ¶n, VPC alt aÄŸlarÄ± arasÄ±nda iletiÅŸimi saÄŸlar.**

EÄŸer **bir alt aÄŸÄ± farklÄ± bir alt aÄŸ ile baÄŸlÄ±yorsanÄ±z, diÄŸer alt aÄŸla baÄŸlÄ± alt aÄŸlara eriÅŸemezsiniz**, onlarla doÄŸrudan baÄŸlantÄ± kurmanÄ±z gerekir. **Bu, internet geÃ§itleri iÃ§in de geÃ§erlidir**. Ä°nternete eriÅŸmek iÃ§in bir alt aÄŸ baÄŸlantÄ±sÄ± Ã¼zerinden geÃ§emezsiniz, internet geÃ§idini alt aÄŸÄ±nÄ±za atamanÄ±z gerekir.

### VPC Peering

VPC peering, iki veya daha fazla VPC'yi, IPV4 veya IPV6 kullanarak, sanki aynÄ± aÄŸÄ±n bir parÃ§asÄ±ymÄ±ÅŸ gibi **birbirine baÄŸlamanÄ±za** olanak tanÄ±r.

EÅŸ baÄŸlantÄ± kurulduÄŸunda, **bir VPC'deki kaynaklar diÄŸer VPC'deki kaynaklara eriÅŸebilir**. VPC'ler arasÄ±ndaki baÄŸlantÄ±, mevcut AWS aÄŸ altyapÄ±sÄ± aracÄ±lÄ±ÄŸÄ±yla uygulanÄ±r ve bu nedenle yÃ¼ksek kullanÄ±labilirlik sunar ve bant geniÅŸliÄŸi darboÄŸazÄ± yoktur. **EÅŸ baÄŸlantÄ±lar, sanki aynÄ± aÄŸÄ±n bir parÃ§asÄ±ymÄ±ÅŸ gibi Ã§alÄ±ÅŸtÄ±klarÄ± iÃ§in**, kullanÄ±labilecek CIDR blok aralÄ±klarÄ±yla ilgili kÄ±sÄ±tlamalar vardÄ±r.\
EÄŸer VPC'niz iÃ§in **Ã§akÄ±ÅŸan veya yinelenen CIDR** aralÄ±klarÄ±nÄ±z varsa, **VPC'leri birbirine peering yapamazsÄ±nÄ±z**.\
Her AWS VPC, **yalnÄ±zca eÅŸine iletiÅŸim kurar**. Ã–rneÄŸin, VPC 1 ile VPC 2 arasÄ±nda bir peering baÄŸlantÄ±nÄ±z varsa ve VPC 2 ile VPC 3 arasÄ±nda baÅŸka bir baÄŸlantÄ± varsa, VPC 1 ve 2 doÄŸrudan birbirleriyle iletiÅŸim kurabilir, VPC 2 ve VPC 3 de Ã¶yle, ancak VPC 1 ve VPC 3 iletiÅŸim kuramaz. **Bir VPC Ã¼zerinden diÄŸerine yÃ¶nlendirme yapamazsÄ±nÄ±z.**

### **VPC AkÄ±ÅŸ GÃ¼nlÃ¼kleri**

VPC'nizde, farklÄ± alt aÄŸlar arasÄ±nda ve ayrÄ±ca VPC peering baÄŸlantÄ±larÄ± aracÄ±lÄ±ÄŸÄ±yla farklÄ± VPC'ler arasÄ±nda iletiÅŸim kuran yÃ¼zlerce veya binlerce kaynak olabilir. **VPC AkÄ±ÅŸ GÃ¼nlÃ¼kleri, VPC'niz iÃ§indeki kaynaklarÄ±nÄ±zÄ±n aÄŸ arayÃ¼zleri arasÄ±nda akan IP trafik bilgilerini yakalamanÄ±za olanak tanÄ±r**.

S3 eriÅŸim gÃ¼nlÃ¼kleri ve CloudFront eriÅŸim gÃ¼nlÃ¼klerinin aksine, **VPC AkÄ±ÅŸ GÃ¼nlÃ¼kleri tarafÄ±ndan Ã¼retilen gÃ¼nlÃ¼k verileri S3'te saklanmaz. Bunun yerine, yakalanan gÃ¼nlÃ¼k verileri CloudWatch gÃ¼nlÃ¼klerine gÃ¶nderilir**.

SÄ±nÄ±rlamalar:

* EÄŸer bir VPC peering baÄŸlantÄ±sÄ± Ã§alÄ±ÅŸtÄ±rÄ±yorsanÄ±z, yalnÄ±zca aynÄ± hesap iÃ§indeki peering VPC'lerin akÄ±ÅŸ gÃ¼nlÃ¼klerini gÃ¶rebilirsiniz.
* EÄŸer hala EC2-Classic ortamÄ±nda kaynaklar Ã§alÄ±ÅŸtÄ±rÄ±yorsanÄ±z, maalesef arayÃ¼zlerinden bilgi alamazsÄ±nÄ±z.
* Bir VPC AkÄ±ÅŸ GÃ¼nlÃ¼ÄŸÃ¼ oluÅŸturulduktan sonra, deÄŸiÅŸtirilemez. VPC AkÄ±ÅŸ GÃ¼nlÃ¼ÄŸÃ¼ yapÄ±landÄ±rmasÄ±nÄ± deÄŸiÅŸtirmek iÃ§in, onu silmeniz ve ardÄ±ndan yenisini oluÅŸturmanÄ±z gerekir.
* AÅŸaÄŸÄ±daki trafik, gÃ¼nlÃ¼kler tarafÄ±ndan izlenmez ve yakalanmaz. VPC iÃ§indeki DHCP trafiÄŸi, Amazon DNS Sunucusuna yÃ¶nlendirilen Ã¶rneklerden gelen trafik.
* VPC varsayÄ±lan yÃ¶nlendiricisi iÃ§in IP adresine yÃ¶nlendirilen trafik ve aÅŸaÄŸÄ±daki adreslere giden ve gelen trafik, 169.254.169.254, Ã¶rnek meta verilerini toplamak iÃ§in kullanÄ±lÄ±r ve 169.254.169.123, Amazon Zaman Senkronizasyonu Servisi iÃ§in kullanÄ±lÄ±r.
* Bir Windows Ã¶rneÄŸinden Amazon Windows aktivasyon lisansÄ±na iliÅŸkin trafik
* Bir aÄŸ yÃ¼k dengeleyici arayÃ¼zÃ¼ ile bir uÃ§ nokta aÄŸ arayÃ¼zÃ¼ arasÄ±ndaki trafik

CloudWatch gÃ¼nlÃ¼k grubuna veri yayÄ±nlayan her aÄŸ arayÃ¼zÃ¼, farklÄ± bir gÃ¼nlÃ¼k akÄ±ÅŸÄ± kullanacaktÄ±r. Ve bu akÄ±ÅŸlarÄ±n her birinde, gÃ¼nlÃ¼k giriÅŸlerinin iÃ§eriÄŸini gÃ¶steren akÄ±ÅŸ gÃ¼nlÃ¼k olayÄ± verileri olacaktÄ±r. Bu **gÃ¼nlÃ¼kler, yaklaÅŸÄ±k 10 ila 15 dakika sÃ¼resince veri yakalar**.

## VPN

### Temel AWS VPN BileÅŸenleri

1. **MÃ¼ÅŸteri GeÃ§idi**:
* MÃ¼ÅŸteri GeÃ§idi, bir VPN baÄŸlantÄ±sÄ±nÄ±n sizin tarafÄ±nÄ±zÄ± temsil etmek iÃ§in AWS'de oluÅŸturduÄŸunuz bir kaynaktÄ±r.
* Temelde, Site-to-Site VPN baÄŸlantÄ±nÄ±zÄ±n tarafÄ±nda fiziksel bir cihaz veya yazÄ±lÄ±m uygulamasÄ±dÄ±r.
* AWS'ye bir MÃ¼ÅŸteri GeÃ§idi oluÅŸturmak iÃ§in yÃ¶nlendirme bilgilerini ve aÄŸ cihazÄ±nÄ±zÄ±n (bir yÃ¶nlendirici veya bir gÃ¼venlik duvarÄ± gibi) genel IP adresini saÄŸlarsÄ±nÄ±z.
* VPN baÄŸlantÄ±sÄ±nÄ± kurmak iÃ§in bir referans noktasÄ± olarak hizmet eder ve ek Ã¼cret talep etmez.
2. **Sanal Ã–zel GeÃ§it**:
* Sanal Ã–zel GeÃ§it (VPG), Site-to-Site VPN baÄŸlantÄ±sÄ±nÄ±n Amazon tarafÄ±ndaki VPN konsantratÃ¶rÃ¼dÃ¼r.
* VPC'nize eklenmiÅŸtir ve VPN baÄŸlantÄ±nÄ±z iÃ§in hedef olarak hizmet eder.
* VPG, VPN baÄŸlantÄ±sÄ±nÄ±n AWS tarafÄ± uÃ§ noktasÄ±dÄ±r.
* VPC'niz ile yerel aÄŸÄ±nÄ±z arasÄ±ndaki gÃ¼venli iletiÅŸimi yÃ¶netir.
3. **Site-to-Site VPN BaÄŸlantÄ±sÄ±**:
* Site-to-Site VPN baÄŸlantÄ±sÄ±, yerel aÄŸÄ±nÄ±zÄ± bir VPC'ye gÃ¼venli, IPsec VPN tÃ¼neli aracÄ±lÄ±ÄŸÄ±yla baÄŸlar.
* Bu tÃ¼r bir baÄŸlantÄ±, bir MÃ¼ÅŸteri GeÃ§idi ve bir Sanal Ã–zel GeÃ§it gerektirir.
* Veri merkeziniz veya aÄŸÄ±nÄ±z ile AWS ortamÄ±nÄ±z arasÄ±nda gÃ¼venli, kararlÄ± ve tutarlÄ± iletiÅŸim iÃ§in kullanÄ±lÄ±r.
* Genellikle dÃ¼zenli, uzun vadeli baÄŸlantÄ±lar iÃ§in kullanÄ±lÄ±r ve baÄŸlantÄ± Ã¼zerinden aktarÄ±lan veri miktarÄ±na gÃ¶re faturalandÄ±rÄ±lÄ±r.
4. **Ä°stemci VPN UÃ§ NoktasÄ±**:
* Ä°stemci VPN uÃ§ noktasÄ±, istemci VPN oturumlarÄ±nÄ± etkinleÅŸtirmek ve yÃ¶netmek iÃ§in AWS'de oluÅŸturduÄŸunuz bir kaynaktÄ±r.
* Bireysel cihazlarÄ±n (dizÃ¼stÃ¼ bilgisayarlar, akÄ±llÄ± telefonlar vb.) AWS kaynaklarÄ±na veya yerel aÄŸÄ±nÄ±za gÃ¼venli bir ÅŸekilde baÄŸlanmasÄ±na izin vermek iÃ§in kullanÄ±lÄ±r.
* Site-to-Site VPN'den farklÄ±dÄ±r Ã§Ã¼nkÃ¼ bireysel istemciler iÃ§in tasarlanmÄ±ÅŸtÄ±r, tÃ¼m aÄŸlarÄ± baÄŸlamak iÃ§in deÄŸil.
* Ä°stemci VPN ile her istemci cihazÄ±, gÃ¼venli bir baÄŸlantÄ± kurmak iÃ§in bir VPN istemci yazÄ±lÄ±mÄ± kullanÄ±r.

### Site-to-Site VPN

**Yerel aÄŸÄ±nÄ±zÄ± VPC'nizle baÄŸlayÄ±n.**

* **VPN baÄŸlantÄ±sÄ±**: Yerel ekipmanÄ±nÄ±z ile VPC'leriniz arasÄ±nda gÃ¼venli bir baÄŸlantÄ±.
* **VPN tÃ¼neli**: MÃ¼ÅŸteri aÄŸÄ± ile AWS arasÄ±nda veri geÃ§iÅŸinin saÄŸlandÄ±ÄŸÄ± ÅŸifreli bir baÄŸlantÄ±.

Her VPN baÄŸlantÄ±sÄ±, yÃ¼ksek kullanÄ±labilirlik iÃ§in aynÄ± anda kullanabileceÄŸiniz iki VPN tÃ¼neli iÃ§erir.
* **MÃ¼ÅŸteri geÃ§idi**: AWS'ye mÃ¼ÅŸteri geÃ§idi cihazÄ±nÄ±z hakkÄ±nda bilgi saÄŸlayan bir AWS kaynaÄŸÄ±.
* **MÃ¼ÅŸteri geÃ§idi cihazÄ±**: Site-to-Site VPN baÄŸlantÄ±nÄ±zÄ±n tarafÄ±nda fiziksel bir cihaz veya yazÄ±lÄ±m uygulamasÄ±.
* **Sanal Ã¶zel geÃ§it**: Site-to-Site VPN baÄŸlantÄ±sÄ±nÄ±n Amazon tarafÄ±ndaki VPN konsantratÃ¶rÃ¼. Site-to-Site VPN baÄŸlantÄ±nÄ±z iÃ§in Amazon tarafÄ±nda bir sanal Ã¶zel geÃ§it veya bir transit geÃ§it kullanÄ±rsÄ±nÄ±z.
* **Transit geÃ§it**: VPC'lerinizi ve yerel aÄŸlarÄ±nÄ±zÄ± birbirine baÄŸlamak iÃ§in kullanÄ±labilecek bir transit merkezi. Site-to-Site VPN baÄŸlantÄ±nÄ±z iÃ§in Amazon tarafÄ±nda bir transit geÃ§it veya sanal Ã¶zel geÃ§it kullanÄ±rsÄ±nÄ±z.

#### SÄ±nÄ±rlamalar

* Sanal Ã¶zel geÃ§itte VPN baÄŸlantÄ±larÄ± iÃ§in IPv6 trafiÄŸi desteklenmez.
* Bir AWS VPN baÄŸlantÄ±sÄ±, Path MTU KeÅŸfini desteklemez.

AyrÄ±ca, Site-to-Site VPN kullanÄ±rken aÅŸaÄŸÄ±dakileri dikkate alÄ±n.

* VPC'lerinizi ortak bir yerel aÄŸa baÄŸlarken, aÄŸlarÄ±nÄ±z iÃ§in Ã§akÄ±ÅŸmayan CIDR bloklarÄ± kullanmanÄ±zÄ± Ã¶neririz.

### Ä°stemci VPN <a href="#what-is-components" id="what-is-components"></a>

**Makinenizden VPC'nize baÄŸlanÄ±n**

#### Kavramlar

* **Ä°stemci VPN uÃ§ noktasÄ±:** Ä°stemci VPN oturumlarÄ±nÄ± etkinleÅŸtirmek ve yÃ¶netmek iÃ§in oluÅŸturduÄŸunuz ve yapÄ±landÄ±rdÄ±ÄŸÄ±nÄ±z kaynak. TÃ¼m istemci VPN oturumlarÄ±nÄ±n sonlandÄ±ÄŸÄ± kaynaktÄ±r.
* **Hedef aÄŸ:** Hedef aÄŸ, bir Ä°stemci VPN uÃ§ noktasÄ± ile iliÅŸkilendirdiÄŸiniz aÄŸdÄ±r. **Bir VPC'den bir alt aÄŸ, bir hedef aÄŸdÄ±r**. Bir alt aÄŸÄ± bir Ä°stemci VPN uÃ§ noktasÄ± ile iliÅŸkilendirmek, VPN oturumlarÄ± kurmanÄ±za olanak tanÄ±r. YÃ¼ksek kullanÄ±labilirlik iÃ§in bir Ä°stemci VPN uÃ§ noktasÄ± ile birden fazla alt aÄŸÄ± iliÅŸkilendirebilirsiniz. TÃ¼m alt aÄŸlar aynÄ± VPC'den olmalÄ±dÄ±r. Her alt aÄŸ farklÄ± bir KullanÄ±labilirlik BÃ¶lgesine ait olmalÄ±dÄ±r.
* **YÃ¶n:** Her Ä°stemci VPN uÃ§ noktasÄ±nÄ±n, mevcut hedef aÄŸ yollarÄ±nÄ± tanÄ±mlayan bir yÃ¶nlendirme tablosu vardÄ±r. YÃ¶nlendirme tablosundaki her yÃ¶n, belirli kaynaklara veya aÄŸlara trafik iÃ§in yolu belirtir.
* **Yetkilendirme kurallarÄ±:** Bir yetkilendirme kuralÄ±, **bir aÄŸa eriÅŸebilecek kullanÄ±cÄ±larÄ± kÄ±sÄ±tlar**. Belirli bir aÄŸ iÃ§in, eriÅŸime izin verilen Aktif Dizin veya kimlik saÄŸlayÄ±cÄ± (IdP) grubunu yapÄ±landÄ±rÄ±rsÄ±nÄ±z. Sadece bu gruba ait kullanÄ±cÄ±lar belirtilen aÄŸa eriÅŸebilir. **VarsayÄ±lan olarak, yetkilendirme kurallarÄ± yoktur** ve kullanÄ±cÄ±larÄ±n kaynaklara ve aÄŸlara eriÅŸimini saÄŸlamak iÃ§in yetkilendirme kurallarÄ± yapÄ±landÄ±rmalÄ±sÄ±nÄ±z.
* **Ä°stemci:** Bir VPN oturumu kurmak iÃ§in Ä°stemci VPN uÃ§ noktasÄ±na baÄŸlanan son kullanÄ±cÄ±. Son kullanÄ±cÄ±larÄ±n, bir OpenVPN istemcisi indirmesi ve bir VPN oturumu kurmak iÃ§in oluÅŸturduÄŸunuz Ä°stemci VPN yapÄ±landÄ±rma dosyasÄ±nÄ± kullanmasÄ± gerekir.
* **Ä°stemci CIDR aralÄ±ÄŸÄ±:** Ä°stemci IP adreslerini atamak iÃ§in bir IP adresi aralÄ±ÄŸÄ±. Ä°stemci VPN uÃ§ noktasÄ±na her baÄŸlantÄ±, istemci CIDR aralÄ±ÄŸÄ±ndan benzersiz bir IP adresi alÄ±r. Ä°stemci CIDR aralÄ±ÄŸÄ±nÄ± seÃ§ersiniz, Ã¶rneÄŸin, `10.2.0.0/16`.
* **Ä°stemci VPN portlarÄ±:** AWS Ä°stemci VPN, hem TCP hem de UDP iÃ§in 443 ve 1194 portlarÄ±nÄ± destekler. VarsayÄ±lan port 443'tÃ¼r.
* **Ä°stemci VPN aÄŸ arayÃ¼zleri:** Bir alt aÄŸÄ± Ä°stemci VPN uÃ§ noktanÄ±zla iliÅŸkilendirdiÄŸinizde, o alt aÄŸda Ä°stemci VPN aÄŸ arayÃ¼zleri oluÅŸtururuz. **Ä°stemci VPN uÃ§ noktasÄ±ndan VPC'ye gÃ¶nderilen trafik, bir Ä°stemci VPN aÄŸ arayÃ¼zÃ¼ Ã¼zerinden gÃ¶nderilir**. ArdÄ±ndan, kaynak IP adresi istemci CIDR aralÄ±ÄŸÄ±ndan Ä°stemci VPN aÄŸ arayÃ¼zÃ¼ IP adresine dÃ¶nÃ¼ÅŸtÃ¼rÃ¼lÃ¼r.
* **BaÄŸlantÄ± gÃ¼nlÃ¼ÄŸÃ¼:** Ä°stemci VPN uÃ§ noktanÄ±z iÃ§in baÄŸlantÄ± gÃ¼nlÃ¼ÄŸÃ¼nÃ¼ etkinleÅŸtirebilirsiniz. Bu bilgiyi, adli analiz yapmak, Ä°stemci VPN uÃ§ noktanÄ±zÄ±n nasÄ±l kullanÄ±ldÄ±ÄŸÄ±nÄ± analiz etmek veya baÄŸlantÄ± sorunlarÄ±nÄ± gidermek iÃ§in kullanabilirsiniz.
* **Kendi kendine hizmet portalÄ±:** Ä°stemci VPN uÃ§ noktanÄ±z iÃ§in bir kendi kendine hizmet portalÄ±nÄ± etkinleÅŸtirebilirsiniz. MÃ¼ÅŸteriler, kimlik bilgilerini kullanarak web tabanlÄ± portala giriÅŸ yapabilir ve Ä°stemci VPN uÃ§ noktasÄ±nÄ±n yapÄ±landÄ±rma dosyasÄ±nÄ±n en son sÃ¼rÃ¼mÃ¼nÃ¼ veya AWS tarafÄ±ndan saÄŸlanan istemcinin en son sÃ¼rÃ¼mÃ¼nÃ¼ indirebilir.

#### SÄ±nÄ±rlamalar

* **Ä°stemci CIDR aralÄ±klarÄ±, iliÅŸkili alt aÄŸÄ±n bulunduÄŸu VPC'nin yerel CIDR'si ile Ã§akÄ±ÅŸamaz** veya Ä°stemci VPN uÃ§ noktasÄ±nÄ±n yÃ¶nlendirme tablosuna manuel olarak eklenen herhangi bir yÃ¶n ile Ã§akÄ±ÅŸamaz.
* Ä°stemci CIDR aralÄ±klarÄ±nÄ±n en az **/22** blok boyutuna sahip olmasÄ± ve **/12'den bÃ¼yÃ¼k olmamasÄ± gerekir.**
* Ä°stemci CIDR aralÄ±ÄŸÄ±ndaki **adreslerin bir kÄ±smÄ±**, Ä°stemci VPN uÃ§ noktasÄ±nÄ±n **kullanÄ±labilirlik** modelini desteklemek iÃ§in kullanÄ±lÄ±r ve istemcilere atanamaz. Bu nedenle, **desteklemeyi planladÄ±ÄŸÄ±nÄ±z maksimum eÅŸzamanlÄ± baÄŸlantÄ± sayÄ±sÄ±nÄ± etkinleÅŸtirmek iÃ§in gereken IP adreslerinin iki katÄ±nÄ± iÃ§eren bir CIDR bloÄŸu atamanÄ±zÄ± Ã¶neririz.**
* Ä°stemci VPN uÃ§ noktasÄ±nÄ± oluÅŸturduktan sonra, **istemci CIDR aralÄ±ÄŸÄ± deÄŸiÅŸtirilemez**.
* Bir Ä°stemci VPN uÃ§ noktasÄ±na baÄŸlÄ± **alt aÄŸlar, aynÄ± VPC'de olmalÄ±dÄ±r**.
* **AynÄ± KullanÄ±labilirlik BÃ¶lgesinden birden fazla alt aÄŸÄ± bir Ä°stemci VPN uÃ§ noktasÄ±na iliÅŸkilendiremezsiniz**.
* Bir Ä°stemci VPN uÃ§ noktasÄ±, **Ã¶zel kiralama VPC'sinde alt aÄŸ iliÅŸkilerini desteklemez**.
* Ä°stemci VPN yalnÄ±zca **IPv4** trafiÄŸini destekler.
* Ä°stemci VPN, **Federal Bilgi Ä°ÅŸleme StandartlarÄ± (FIPS)** **uyumlu deÄŸildir**.
* EÄŸer Ã§ok faktÃ¶rlÃ¼ kimlik doÄŸrulama (MFA) Aktif Dizin iÃ§in devre dÄ±ÅŸÄ± bÄ±rakÄ±lmÄ±ÅŸsa, bir kullanÄ±cÄ± parolasÄ± aÅŸaÄŸÄ±daki formatta olamaz.

```
SCRV1:<base64_encoded_string>:<base64_encoded_string>
```
* Kendi kendine hizmet portalÄ±, **karÅŸÄ±lÄ±klÄ± kimlik doÄŸrulama kullanarak kimlik doÄŸrulamasÄ± yapan mÃ¼ÅŸteriler iÃ§in mevcut deÄŸildir**.

{% hint style="success" %}
AWS Hacking'i Ã¶ÄŸrenin ve pratik yapÄ±n:<img src="../../../../.gitbook/assets/image (1) (1) (1).png" alt="" data-size="line">[**HackTricks EÄŸitim AWS KÄ±rmÄ±zÄ± TakÄ±m UzmanÄ± (ARTE)**](https://training.hacktricks.xyz/courses/arte)<img src="../../../../.gitbook/assets/image (1) (1) (1).png" alt="" data-size="line">\
GCP Hacking'i Ã¶ÄŸrenin ve pratik yapÄ±n: <img src="../../../../.gitbook/assets/image (2).png" alt="" data-size="line">[**HackTricks EÄŸitim GCP KÄ±rmÄ±zÄ± TakÄ±m UzmanÄ± (GRTE)**<img src="../../../../.gitbook/assets/image (2).png" alt="" data-size="line">](https://training.hacktricks.xyz/courses/grte)

<details>

<summary>HackTricks'i Destekleyin</summary>

* [**abonelik planlarÄ±nÄ±**](https://github.com/sponsors/carlospolop) kontrol edin!
* **ğŸ’¬ [**Discord grubuna**](https://discord.gg/hRep4RUj7f) veya [**telegram grubuna**](https://t.me/peass) katÄ±lÄ±n ya da **Twitter'da** ğŸ¦ [**@hacktricks\_live**](https://twitter.com/hacktricks_live)**'Ä± takip edin.**
* **Hacking ipuÃ§larÄ±nÄ± paylaÅŸmak iÃ§in** [**HackTricks**](https://github.com/carlospolop/hacktricks) ve [**HackTricks Cloud**](https://github.com/carlospolop/hacktricks-cloud) github reposuna PR gÃ¶nderin.

</details>
{% endhint %}
