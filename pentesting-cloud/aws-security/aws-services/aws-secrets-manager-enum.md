# AWS - Secrets Manager Enum

{% hint style="success" %}
Learn & practice AWS Hacking:<img src="../../../.gitbook/assets/image (1).png" alt="" data-size="line">[**HackTricks Training AWS Red Team Expert (ARTE)**](https://training.hacktricks.xyz/courses/arte)<img src="../../../.gitbook/assets/image (1).png" alt="" data-size="line">\
Learn & practice GCP Hacking: <img src="../../../.gitbook/assets/image (2).png" alt="" data-size="line">[**HackTricks Training GCP Red Team Expert (GRTE)**<img src="../../../.gitbook/assets/image (2).png" alt="" data-size="line">](https://training.hacktricks.xyz/courses/grte)

<details>

<summary>Support HackTricks</summary>

* Check the [**subscription plans**](https://github.com/sponsors/carlospolop)!
* **Join the** 💬 [**Discord group**](https://discord.gg/hRep4RUj7f) or the [**telegram group**](https://t.me/peass) or **follow** us on **Twitter** 🐦 [**@hacktricks\_live**](https://twitter.com/hacktricks\_live)**.**
* **Share hacking tricks by submitting PRs to the** [**HackTricks**](https://github.com/carlospolop/hacktricks) and [**HackTricks Cloud**](https://github.com/carlospolop/hacktricks-cloud) github repos.

</details>
{% endhint %}

## AWS Secrets Manager

AWS Secrets Manager έχει σχεδιαστεί για να **εξαλείψει τη χρήση σκληρά κωδικοποιημένων μυστικών σε εφαρμογές αντικαθιστώντας τα με μια κλήση API**. Αυτή η υπηρεσία λειτουργεί ως **κεντρικό αποθετήριο για όλα τα μυστικά σας**, διασφαλίζοντας ότι διαχειρίζονται ομοιόμορφα σε όλες τις εφαρμογές.

Ο διαχειριστής απλοποιεί τη **διαδικασία περιστροφής μυστικών**, βελτιώνοντας σημαντικά τη θέση ασφάλειας ευαίσθητων δεδομένων όπως τα διαπιστευτήρια βάσης δεδομένων. Επιπλέον, μυστικά όπως τα API keys μπορούν να περιστρέφονται αυτόματα με την ενσωμάτωση λειτουργιών lambda.

Η πρόσβαση στα μυστικά ελέγχεται αυστηρά μέσω λεπτομερών πολιτικών IAM βασισμένων σε ταυτότητες και πολιτικών βασισμένων σε πόρους.

Για να παραχωρήσετε πρόσβαση σε μυστικά σε έναν χρήστη από διαφορετικό λογαριασμό AWS, είναι απαραίτητο να:

1. Εξουσιοδοτήσετε τον χρήστη να έχει πρόσβαση στο μυστικό.
2. Παραχωρήσετε άδεια στον χρήστη να αποκρυπτογραφήσει το μυστικό χρησιμοποιώντας KMS.
3. Τροποποιήσετε την πολιτική Κλειδιού για να επιτρέψετε στον εξωτερικό χρήστη να το χρησιμοποιήσει.

**AWS Secrets Manager ενσωματώνεται με το AWS KMS για να κρυπτογραφήσει τα μυστικά σας εντός του AWS Secrets Manager.**

### **Enumeration**
```bash
aws secretsmanager list-secrets #Get metadata of all secrets
aws secretsmanager list-secret-version-ids --secret-id <secret_name> # Get versions
aws secretsmanager describe-secret --secret-id <secret_name> # Get metadata
aws secretsmanager get-secret-value --secret-id <secret_name> # Get value
aws secretsmanager get-secret-value --secret-id <secret_name> --version-id <version-id> # Get value of a different version
aws secretsmanager get-resource-policy --secret-id --secret-id <secret_name>
```
### Privesc

{% content-ref url="../aws-privilege-escalation/aws-secrets-manager-privesc.md" %}
[aws-secrets-manager-privesc.md](../aws-privilege-escalation/aws-secrets-manager-privesc.md)
{% endcontent-ref %}

### Post Exploitation

{% content-ref url="../aws-post-exploitation/aws-secrets-manager-post-exploitation.md" %}
[aws-secrets-manager-post-exploitation.md](../aws-post-exploitation/aws-secrets-manager-post-exploitation.md)
{% endcontent-ref %}

### Persistence

{% content-ref url="../aws-persistence/aws-secrets-manager-persistence.md" %}
[aws-secrets-manager-persistence.md](../aws-persistence/aws-secrets-manager-persistence.md)
{% endcontent-ref %}

{% hint style="success" %}
Μάθετε & εξασκηθείτε στο AWS Hacking:<img src="../../../.gitbook/assets/image (1).png" alt="" data-size="line">[**HackTricks Training AWS Red Team Expert (ARTE)**](https://training.hacktricks.xyz/courses/arte)<img src="../../../.gitbook/assets/image (1).png" alt="" data-size="line">\
Μάθετε & εξασκηθείτε στο GCP Hacking: <img src="../../../.gitbook/assets/image (2).png" alt="" data-size="line">[**HackTricks Training GCP Red Team Expert (GRTE)**<img src="../../../.gitbook/assets/image (2).png" alt="" data-size="line">](https://training.hacktricks.xyz/courses/grte)

<details>

<summary>Υποστήριξη HackTricks</summary>

* Ελέγξτε τα [**σχέδια συνδρομής**](https://github.com/sponsors/carlospolop)!
* **Εγγραφείτε στην** 💬 [**ομάδα Discord**](https://discord.gg/hRep4RUj7f) ή στην [**ομάδα telegram**](https://t.me/peass) ή **ακολουθήστε** μας στο **Twitter** 🐦 [**@hacktricks\_live**](https://twitter.com/hacktricks\_live)**.**
* **Μοιραστείτε κόλπα hacking υποβάλλοντας PRs στα** [**HackTricks**](https://github.com/carlospolop/hacktricks) και [**HackTricks Cloud**](https://github.com/carlospolop/hacktricks-cloud) github repos.

</details>
{% endhint %}
