# AWS - Secrets Manager Enum

{% hint style="success" %}
Learn & practice AWS Hacking:<img src="/.gitbook/assets/image.png" alt="" data-size="line">[**HackTricks Training AWS Red Team Expert (ARTE)**](https://training.hacktricks.xyz/courses/arte)<img src="/.gitbook/assets/image.png" alt="" data-size="line">\
Learn & practice GCP Hacking: <img src="/.gitbook/assets/image (2).png" alt="" data-size="line">[**HackTricks Training GCP Red Team Expert (GRTE)**<img src="/.gitbook/assets/image (2).png" alt="" data-size="line">](https://training.hacktricks.xyz/courses/grte)

<details>

<summary>Support HackTricks</summary>

* Check the [**subscription plans**](https://github.com/sponsors/carlospolop)!
* **Join the** ğŸ’¬ [**Discord group**](https://discord.gg/hRep4RUj7f) or the [**telegram group**](https://t.me/peass) or **follow** us on **Twitter** ğŸ¦ [**@hacktricks\_live**](https://twitter.com/hacktricks\_live)**.**
* **Share hacking tricks by submitting PRs to the** [**HackTricks**](https://github.com/carlospolop/hacktricks) and [**HackTricks Cloud**](https://github.com/carlospolop/hacktricks-cloud) github repos.

</details>
{% endhint %}

## AWS Secrets Manager

AWS Secrets Managerã¯ã€**ã‚¢ãƒ—ãƒªã‚±ãƒ¼ã‚·ãƒ§ãƒ³å†…ã®ãƒãƒ¼ãƒ‰ã‚³ãƒ¼ãƒ‡ã‚£ãƒ³ã‚°ã•ã‚ŒãŸã‚·ãƒ¼ã‚¯ãƒ¬ãƒƒãƒˆã‚’APIã‚³ãƒ¼ãƒ«ã«ç½®ãæ›ãˆã‚‹ã“ã¨ã§æ’é™¤ã™ã‚‹ã‚ˆã†è¨­è¨ˆã•ã‚Œã¦ã„ã¾ã™**ã€‚ã“ã®ã‚µãƒ¼ãƒ“ã‚¹ã¯ã€**ã™ã¹ã¦ã®ã‚·ãƒ¼ã‚¯ãƒ¬ãƒƒãƒˆã®é›†ä¸­ãƒªãƒã‚¸ãƒˆãƒª**ã¨ã—ã¦æ©Ÿèƒ½ã—ã€ã™ã¹ã¦ã®ã‚¢ãƒ—ãƒªã‚±ãƒ¼ã‚·ãƒ§ãƒ³ã§ä¸€æ§˜ã«ç®¡ç†ã•ã‚Œã‚‹ã“ã¨ã‚’ä¿è¨¼ã—ã¾ã™ã€‚

ãƒãƒãƒ¼ã‚¸ãƒ£ãƒ¼ã¯ã€**ã‚·ãƒ¼ã‚¯ãƒ¬ãƒƒãƒˆã®ãƒ­ãƒ¼ãƒ†ãƒ¼ã‚·ãƒ§ãƒ³ãƒ—ãƒ­ã‚»ã‚¹ã‚’ç°¡ç´ åŒ–**ã—ã€ãƒ‡ãƒ¼ã‚¿ãƒ™ãƒ¼ã‚¹è³‡æ ¼æƒ…å ±ã®ã‚ˆã†ãªæ©Ÿå¯†ãƒ‡ãƒ¼ã‚¿ã®ã‚»ã‚­ãƒ¥ãƒªãƒ†ã‚£å§¿å‹¢ã‚’å¤§å¹…ã«å‘ä¸Šã•ã›ã¾ã™ã€‚ã•ã‚‰ã«ã€APIã‚­ãƒ¼ã®ã‚ˆã†ãªã‚·ãƒ¼ã‚¯ãƒ¬ãƒƒãƒˆã¯ã€lambdaé–¢æ•°ã®çµ±åˆã«ã‚ˆã‚Šè‡ªå‹•çš„ã«ãƒ­ãƒ¼ãƒ†ãƒ¼ã‚·ãƒ§ãƒ³ã™ã‚‹ã“ã¨ãŒã§ãã¾ã™ã€‚

ã‚·ãƒ¼ã‚¯ãƒ¬ãƒƒãƒˆã¸ã®ã‚¢ã‚¯ã‚»ã‚¹ã¯ã€è©³ç´°ãªIAMã‚¢ã‚¤ãƒ‡ãƒ³ãƒ†ã‚£ãƒ†ã‚£ãƒ™ãƒ¼ã‚¹ã®ãƒãƒªã‚·ãƒ¼ãŠã‚ˆã³ãƒªã‚½ãƒ¼ã‚¹ãƒ™ãƒ¼ã‚¹ã®ãƒãƒªã‚·ãƒ¼ã‚’é€šã˜ã¦å³å¯†ã«åˆ¶å¾¡ã•ã‚Œã¾ã™ã€‚

ç•°ãªã‚‹AWSã‚¢ã‚«ã‚¦ãƒ³ãƒˆã®ãƒ¦ãƒ¼ã‚¶ãƒ¼ã«ã‚·ãƒ¼ã‚¯ãƒ¬ãƒƒãƒˆã¸ã®ã‚¢ã‚¯ã‚»ã‚¹ã‚’è¨±å¯ã™ã‚‹ã«ã¯ã€æ¬¡ã®ã“ã¨ãŒå¿…è¦ã§ã™ï¼š

1. ãƒ¦ãƒ¼ã‚¶ãƒ¼ã«ã‚·ãƒ¼ã‚¯ãƒ¬ãƒƒãƒˆã¸ã®ã‚¢ã‚¯ã‚»ã‚¹ã‚’è¨±å¯ã™ã‚‹ã€‚
2. ãƒ¦ãƒ¼ã‚¶ãƒ¼ã«KMSã‚’ä½¿ç”¨ã—ã¦ã‚·ãƒ¼ã‚¯ãƒ¬ãƒƒãƒˆã‚’å¾©å·ã™ã‚‹æ¨©é™ã‚’ä»˜ä¸ã™ã‚‹ã€‚
3. å¤–éƒ¨ãƒ¦ãƒ¼ã‚¶ãƒ¼ãŒãã‚Œã‚’åˆ©ç”¨ã§ãã‚‹ã‚ˆã†ã«ã‚­ãƒ¼ã®ãƒãƒªã‚·ãƒ¼ã‚’å¤‰æ›´ã™ã‚‹ã€‚

**AWS Secrets Managerã¯ã€AWS KMSã¨çµ±åˆã—ã¦AWS Secrets Managerå†…ã®ã‚·ãƒ¼ã‚¯ãƒ¬ãƒƒãƒˆã‚’æš—å·åŒ–ã—ã¾ã™ã€‚**

### **Enumeration**
```bash
aws secretsmanager list-secrets #Get metadata of all secrets
aws secretsmanager list-secret-version-ids --secret-id <secret_name> # Get versions
aws secretsmanager describe-secret --secret-id <secret_name> # Get metadata
aws secretsmanager get-secret-value --secret-id <secret_name> # Get value
aws secretsmanager get-secret-value --secret-id <secret_name> --version-id <version-id> # Get value of a different version
aws secretsmanager get-resource-policy --secret-id --secret-id <secret_name>
```
### Privesc

{% content-ref url="../aws-privilege-escalation/aws-secrets-manager-privesc.md" %}
[aws-secrets-manager-privesc.md](../aws-privilege-escalation/aws-secrets-manager-privesc.md)
{% endcontent-ref %}

### Post Exploitation

{% content-ref url="../aws-post-exploitation/aws-secrets-manager-post-exploitation.md" %}
[aws-secrets-manager-post-exploitation.md](../aws-post-exploitation/aws-secrets-manager-post-exploitation.md)
{% endcontent-ref %}

### Persistence

{% content-ref url="../aws-persistence/aws-secrets-manager-persistence.md" %}
[aws-secrets-manager-persistence.md](../aws-persistence/aws-secrets-manager-persistence.md)
{% endcontent-ref %}

{% hint style="success" %}
AWSãƒãƒƒã‚­ãƒ³ã‚°ã‚’å­¦ã³ã€ç·´ç¿’ã™ã‚‹:<img src="/.gitbook/assets/image.png" alt="" data-size="line">[**HackTricks Training AWS Red Team Expert (ARTE)**](https://training.hacktricks.xyz/courses/arte)<img src="/.gitbook/assets/image.png" alt="" data-size="line">\
GCPãƒãƒƒã‚­ãƒ³ã‚°ã‚’å­¦ã³ã€ç·´ç¿’ã™ã‚‹: <img src="/.gitbook/assets/image (2).png" alt="" data-size="line">[**HackTricks Training GCP Red Team Expert (GRTE)**<img src="/.gitbook/assets/image (2).png" alt="" data-size="line">](https://training.hacktricks.xyz/courses/grte)

<details>

<summary>HackTricksã‚’ã‚µãƒãƒ¼ãƒˆã™ã‚‹</summary>

* [**ã‚µãƒ–ã‚¹ã‚¯ãƒªãƒ—ã‚·ãƒ§ãƒ³ãƒ—ãƒ©ãƒ³**](https://github.com/sponsors/carlospolop)ã‚’ãƒã‚§ãƒƒã‚¯ï¼
* **Discordã‚°ãƒ«ãƒ¼ãƒ—** ğŸ’¬ [**ã«å‚åŠ **](https://discord.gg/hRep4RUj7f)ã™ã‚‹ã‹ã€[**Telegramã‚°ãƒ«ãƒ¼ãƒ—**](https://t.me/peass)ã«å‚åŠ ã™ã‚‹ã‹ã€**Twitter** ğŸ¦ [**@hacktricks\_live**](https://twitter.com/hacktricks\_live)ã‚’ãƒ•ã‚©ãƒ­ãƒ¼ã™ã‚‹ã€‚
* **PRã‚’æå‡ºã—ã¦ãƒãƒƒã‚­ãƒ³ã‚°ãƒˆãƒªãƒƒã‚¯ã‚’å…±æœ‰ã™ã‚‹** [**HackTricks**](https://github.com/carlospolop/hacktricks) ãŠã‚ˆã³ [**HackTricks Cloud**](https://github.com/carlospolop/hacktricks-cloud) GitHubãƒªãƒã‚¸ãƒˆãƒªã«ã€‚

</details>
{% endhint %}
