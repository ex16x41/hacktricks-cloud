# AWS - Macie Enum

{% hint style="success" %}
AWS Hacking'Ä± Ã¶ÄŸrenin ve uygulayÄ±n:<img src="/.gitbook/assets/image.png" alt="" data-size="line">[**HackTricks EÄŸitim AWS KÄ±rmÄ±zÄ± TakÄ±m UzmanÄ± (ARTE)**](https://training.hacktricks.xyz/courses/arte)<img src="/.gitbook/assets/image.png" alt="" data-size="line">\
GCP Hacking'i Ã¶ÄŸrenin ve uygulayÄ±n: <img src="/.gitbook/assets/image (2).png" alt="" data-size="line">[**HackTricks EÄŸitim GCP KÄ±rmÄ±zÄ± TakÄ±m UzmanÄ± (GRTE)**<img src="/.gitbook/assets/image (2).png" alt="" data-size="line">](https://training.hacktricks.xyz/courses/grte)

<details>

<summary>HackTricks'i Destekleyin</summary>

* [**Abonelik planlarÄ±nÄ±**](https://github.com/sponsors/carlospolop) kontrol edin!
* ğŸ’¬ [**Discord grubuna**](https://discord.gg/hRep4RUj7f) katÄ±lÄ±n veya [**telegram grubuna**](https://t.me/peass) katÄ±lÄ±n veya bizi **Twitter** ğŸ¦ [**@hacktricks\_live**](https://twitter.com/hacktricks\_live)** takip edin.**
* **Hacking pÃ¼f noktalarÄ±nÄ± paylaÅŸarak** [**HackTricks**](https://github.com/carlospolop/hacktricks) ve [**HackTricks Cloud**](https://github.com/carlospolop/hacktricks-cloud) github depolarÄ±na PR gÃ¶ndererek destek olun.

</details>
{% endhint %}

# Macie

Amazon Macie, bir AWS hesabÄ± iÃ§indeki verileri **otomatik olarak tespit etmek, sÄ±nÄ±flandÄ±rmak ve tanÄ±mlamak** iÃ§in tasarlanmÄ±ÅŸ bir hizmet olarak Ã¶ne Ã§Ä±kar. **Makine Ã¶ÄŸrenimi** kullanarak sÃ¼rekli olarak verileri izler ve analiz eder, genellikle bulut izi etkinlik verilerini ve kullanÄ±cÄ± davranÄ±ÅŸ kalÄ±plarÄ±nÄ± inceleyerek olaÄŸandÄ±ÅŸÄ± veya ÅŸÃ¼pheli faaliyetleri tespit eder ve uyarÄ±r.

Amazon Macie'nin Temel Ã–zellikleri:

1. **Etkin Veri Ä°ncelemesi**: AWS hesabÄ± iÃ§inde Ã§eÅŸitli iÅŸlemler gerÃ§ekleÅŸtiÄŸinde verileri etkin bir ÅŸekilde incelemek iÃ§in makine Ã¶ÄŸrenimini kullanÄ±r.
2. **Anomali Tespiti**: DÃ¼zensiz faaliyetleri veya eriÅŸim kalÄ±plarÄ±nÄ± tanÄ±mlar, potansiyel veri maruziyeti risklerini azaltmak iÃ§in uyarÄ±lar oluÅŸturur.
3. **SÃ¼rekli Ä°zleme**: Amazon S3'te yeni verileri otomatik olarak izler ve tespit eder, zamanla veri eriÅŸim kalÄ±plarÄ±na uyum saÄŸlamak iÃ§in makine Ã¶ÄŸrenimi ve yapay zeka kullanÄ±r.
4. **NLP ile Veri SÄ±nÄ±flandÄ±rma**: DoÄŸal dil iÅŸleme (NLP) kullanarak farklÄ± veri tÃ¼rlerini sÄ±nÄ±flandÄ±rÄ±r ve yorumlar, bulgularÄ± Ã¶nceliklendirmek iÃ§in risk puanlarÄ± atar.
5. **GÃ¼venlik Ä°zlemesi**: API anahtarlarÄ±, gizli anahtarlar ve kiÅŸisel bilgiler de dahil olmak Ã¼zere gÃ¼venlik hassas verileri tanÄ±mlar, veri sÄ±zÄ±ntÄ±larÄ±nÄ± Ã¶nlemeye yardÄ±mcÄ± olur.

Amazon Macie, bir **bÃ¶lgesel hizmet**tir ve iÅŸlevselliÄŸi iÃ§in 'AWSMacieServiceCustomerSetupRole' IAM RolÃ¼ ve etkinleÅŸtirilmiÅŸ bir AWS CloudTrail gerektirir.

## UyarÄ± Sistemi

Macie, uyarÄ±larÄ± Ã¶nceden tanÄ±mlanmÄ±ÅŸ kategorilere ayÄ±rÄ±r:

- Anonim eriÅŸim
- Veri uyumluluÄŸu
- Kimlik Bilgisi KaybÄ±
- AyrÄ±calÄ±k yÃ¼kseltme
- Fidye yazÄ±lÄ±mÄ±
- ÅÃ¼pheli eriÅŸim vb.

Bu uyarÄ±lar etkili yanÄ±t ve Ã§Ã¶zÃ¼m iÃ§in detaylÄ± aÃ§Ä±klamalar ve sonuÃ§ ayrÄ±ntÄ±larÄ± saÄŸlar.

## GÃ¶sterge Tablosu Ã–zellikleri

GÃ¶sterge tablosu, verileri ÅŸu bÃ¶lÃ¼mlere ayÄ±rÄ±r:

- S3 Nesneleri (zaman aralÄ±ÄŸÄ±na gÃ¶re, ACL, PII)
- YÃ¼ksek riskli CloudTrail etkinlikleri/kullanÄ±cÄ±lar
- Etkinlik KonumlarÄ±
- CloudTrail kullanÄ±cÄ± kimlik tÃ¼rleri ve daha fazlasÄ±.

## KullanÄ±cÄ± SÄ±nÄ±flandÄ±rmasÄ±

KullanÄ±cÄ±lar, API Ã§aÄŸrÄ±larÄ±nÄ±n risk seviyesine gÃ¶re kademelere ayrÄ±lÄ±r:

- **Platin**: YÃ¼ksek riskli API Ã§aÄŸrÄ±larÄ±, genellikle yÃ¶netici ayrÄ±calÄ±klarÄ±yla.
- **AltÄ±n**: AltyapÄ±yla ilgili API Ã§aÄŸrÄ±larÄ±.
- **GÃ¼mÃ¼ÅŸ**: Orta riskli API Ã§aÄŸrÄ±larÄ±.
- **Bronz**: DÃ¼ÅŸÃ¼k riskli API Ã§aÄŸrÄ±larÄ±.

## Kimlik TÃ¼rleri

Kimlik tÃ¼rleri, KÃ¶k, IAM kullanÄ±cÄ±sÄ±, VarsayÄ±lan Rol, Federasyon KullanÄ±cÄ±sÄ±, AWS HesabÄ± ve AWS Hizmeti olmak Ã¼zere isteklerin kaynaÄŸÄ±nÄ± gÃ¶sterir.

## Veri SÄ±nÄ±flandÄ±rma

Veri sÄ±nÄ±flandÄ±rma ÅŸunlarÄ± kapsar:

- Ä°Ã§erik TÃ¼rÃ¼: AlgÄ±lanan iÃ§erik tÃ¼rÃ¼ne gÃ¶re.
- Dosya UzantÄ±sÄ±: Dosya uzantÄ±sÄ±na gÃ¶re.
- Tema: Dosyalardaki anahtar kelimelere gÃ¶re kategorize edilir.
- Regex: Belirli regex kalÄ±plarÄ±na gÃ¶re kategorize edilir.

Bu kategoriler arasÄ±ndaki en yÃ¼ksek risk, dosyanÄ±n nihai risk seviyesini belirler.

## AraÅŸtÄ±rma ve Analiz

Amazon Macie'nin araÅŸtÄ±rma iÅŸlevi, derinlemesine analiz iÃ§in tÃ¼m Macie verileri Ã¼zerinde Ã¶zel sorgular yapÄ±lmasÄ±na olanak tanÄ±r. Filtreler arasÄ±nda CloudTrail Verileri, S3 Kova Ã¶zellikleri ve S3 Nesneleri bulunur. AyrÄ±ca, Amazon Macie'yi paylaÅŸmak iÃ§in diÄŸer hesaplarÄ± davet etmeyi destekler, iÅŸbirlikÃ§i veri yÃ¶netimi ve gÃ¼venlik izleme saÄŸlar.


## NumaralandÄ±rma
```
# Get buckets
aws macie2 describe-buckets

# Org config
aws macie2 describe-organization-configuration

# Get admin account (if any)
aws macie2 get-administrator-account
aws macie2 list-organization-admin-accounts # Run from the management account of the org

# Get macie account members (run this form the admin account)
aws macie2 list-members

# Check if automated sensitive data discovey is enabled
aws macie2 get-automated-discovery-configuration

# Get findings
aws macie2 list-findings
aws macie2 get-findings --finding-ids <ids>
aws macie2 list-findings-filters
aws macie2 get -findings-filters --id <id>

# Get allow lists
aws macie2 list-allow-lists
aws macie2 get-allow-list --id <id>

# Get different info
aws macie2 list-classification-jobs
aws macie2 list-classification-scopes
aws macie2 list-custom-data-identifiers
```
### SaldÄ±rÄ± SonrasÄ± Ä°ÅŸlemler

{% hint style="success" %}
Bir saldÄ±rganÄ±n bakÄ±ÅŸ aÃ§Ä±sÄ±ndan, bu hizmet saldÄ±rganÄ± tespit etmek iÃ§in deÄŸil, depolanan dosyalardaki hassas bilgileri tespit etmek iÃ§indir. Bu nedenle, bu hizmet bir saldÄ±rganÄ±n kovalamak isteyebileceÄŸi hassas bilgileri bulmasÄ±na **yardÄ±mcÄ± olabilir**.\
Ancak, belki bir saldÄ±rgan da kurbanÄ±n uyarÄ±lar almasÄ±nÄ± engellemek ve bu bilgileri daha kolay Ã§almak iÃ§in bu hizmeti bozmaya ilgi duyabilir.
{% endhint %}

TODO: PR'lar kabul edilir!

# Referanslar
* [https://cloudacademy.com/blog/introducing-aws-security-hub/](https://cloudacademy.com/blog/introducing-aws-security-hub/)

{% hint style="success" %}
AWS Hacking'i Ã¶ÄŸrenin ve uygulayÄ±n:<img src="/.gitbook/assets/image.png" alt="" data-size="line">[**HackTricks EÄŸitim AWS KÄ±rmÄ±zÄ± TakÄ±m UzmanÄ± (ARTE)**](https://training.hacktricks.xyz/courses/arte)<img src="/.gitbook/assets/image.png" alt="" data-size="line">\
GCP Hacking'i Ã¶ÄŸrenin ve uygulayÄ±n: <img src="/.gitbook/assets/image (2).png" alt="" data-size="line">[**HackTricks EÄŸitim GCP KÄ±rmÄ±zÄ± TakÄ±m UzmanÄ± (GRTE)**<img src="/.gitbook/assets/image (2).png" alt="" data-size="line">](https://training.hacktricks.xyz/courses/grte)

<details>

<summary>HackTricks'i Destekleyin</summary>

* [**Abonelik planlarÄ±nÄ±**](https://github.com/sponsors/carlospolop) kontrol edin!
* ğŸ’¬ [**Discord grubuna**](https://discord.gg/hRep4RUj7f) katÄ±lÄ±n veya [**telegram grubuna**](https://t.me/peass) katÄ±lÄ±n veya bizi **Twitter** ğŸ¦ [**@hacktricks\_live**](https://twitter.com/hacktricks\_live)** takip edin.**
* **Hacking pÃ¼f noktalarÄ±nÄ± paylaÅŸarak PR'ler gÃ¶ndererek** [**HackTricks**](https://github.com/carlospolop/hacktricks) ve [**HackTricks Cloud**](https://github.com/carlospolop/hacktricks-cloud) github depolarÄ±na katkÄ±da bulunun.

</details>
{% endhint %}
