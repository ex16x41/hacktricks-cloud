# AWS - Macie Enum

## AWS - Macie Enum

{% hint style="success" %}
AWS Hacking'i Ã¶ÄŸrenin ve pratik yapÄ±n:<img src="../../../../.gitbook/assets/image (1).png" alt="" data-size="line">[**HackTricks Training AWS Red Team Expert (ARTE)**](https://training.hacktricks.xyz/courses/arte)<img src="../../../../.gitbook/assets/image (1).png" alt="" data-size="line">\
GCP Hacking'i Ã¶ÄŸrenin ve pratik yapÄ±n: <img src="../../../../.gitbook/assets/image (2).png" alt="" data-size="line">[**HackTricks Training GCP Red Team Expert (GRTE)**<img src="../../../../.gitbook/assets/image (2).png" alt="" data-size="line">](https://training.hacktricks.xyz/courses/grte)

<details>

<summary>HackTricks'i Destekleyin</summary>

* [**abonelik planlarÄ±nÄ±**](https://github.com/sponsors/carlospolop) kontrol edin!
* **ğŸ’¬ [**Discord grubuna**](https://discord.gg/hRep4RUj7f) veya [**telegram grubuna**](https://t.me/peass) katÄ±lÄ±n ya da **Twitter'da** **bizi takip edin** ğŸ¦ [**@hacktricks\_live**](https://twitter.com/hacktricks\_live)**.**
* **Hacking ipuÃ§larÄ±nÄ± paylaÅŸmak iÃ§in** [**HackTricks**](https://github.com/carlospolop/hacktricks) ve [**HackTricks Cloud**](https://github.com/carlospolop/hacktricks-cloud) github reposuna PR gÃ¶nderin.

</details>
{% endhint %}

## Macie

Amazon Macie, bir AWS hesabÄ±ndaki verileri **otomatik olarak tespit etmek, sÄ±nÄ±flandÄ±rmak ve tanÄ±mlamak** iÃ§in tasarlanmÄ±ÅŸ bir hizmet olarak Ã¶ne Ã§Ä±kmaktadÄ±r. **Makine Ã¶ÄŸrenimi** kullanarak verileri sÃ¼rekli izler ve analiz eder, esas olarak **cloud trail event** verilerini ve kullanÄ±cÄ± davranÄ±ÅŸ kalÄ±plarÄ±nÄ± inceleyerek olaÄŸandÄ±ÅŸÄ± veya ÅŸÃ¼pheli etkinlikleri tespit etmeye ve uyarÄ±lar gÃ¶ndermeye odaklanÄ±r.

Amazon Macie'nin Ana Ã–zellikleri:

1. **Aktif Veri Ä°ncelemesi**: AWS hesabÄ±nda Ã§eÅŸitli eylemler gerÃ§ekleÅŸirken verileri aktif olarak incelemek iÃ§in makine Ã¶ÄŸrenimi kullanÄ±r.
2. **Anomali Tespiti**: DÃ¼zensiz etkinlikleri veya eriÅŸim kalÄ±plarÄ±nÄ± tanÄ±mlar, potansiyel veri sÄ±zÄ±ntÄ±sÄ± risklerini azaltmak iÃ§in uyarÄ±lar oluÅŸturur.
3. **SÃ¼rekli Ä°zleme**: Amazon S3'te yeni verileri otomatik olarak izler ve tespit eder, zamanla veri eriÅŸim kalÄ±plarÄ±na uyum saÄŸlamak iÃ§in makine Ã¶ÄŸrenimi ve yapay zeka kullanÄ±r.
4. **NLP ile Veri SÄ±nÄ±flandÄ±rmasÄ±**: FarklÄ± veri tÃ¼rlerini sÄ±nÄ±flandÄ±rmak ve yorumlamak iÃ§in doÄŸal dil iÅŸleme (NLP) kullanÄ±r, bulgularÄ± Ã¶nceliklendirmek iÃ§in risk puanlarÄ± atar.
5. **GÃ¼venlik Ä°zleme**: API anahtarlarÄ±, gizli anahtarlar ve kiÅŸisel bilgiler gibi gÃ¼venlik aÃ§Ä±sÄ±ndan hassas verileri tanÄ±mlar, veri sÄ±zÄ±ntÄ±larÄ±nÄ± Ã¶nlemeye yardÄ±mcÄ± olur.

Amazon Macie, **bÃ¶lgesel bir hizmettir** ve iÅŸlevsellik iÃ§in 'AWSMacieServiceCustomerSetupRole' IAM RolÃ¼ ve etkin bir AWS CloudTrail gerektirir.

### UyarÄ± Sistemi

Macie, uyarÄ±larÄ± Ã¶nceden tanÄ±mlanmÄ±ÅŸ kategorilere ayÄ±rÄ±r:

* Anonim eriÅŸim
* Veri uyumluluÄŸu
* Kimlik bilgisi kaybÄ±
* AyrÄ±calÄ±k yÃ¼kseltme
* Fidye yazÄ±lÄ±mÄ±
* ÅÃ¼pheli eriÅŸim vb.

Bu uyarÄ±lar, etkili yanÄ±t ve Ã§Ã¶zÃ¼m iÃ§in ayrÄ±ntÄ±lÄ± aÃ§Ä±klamalar ve sonuÃ§ analizleri saÄŸlar.

### GÃ¶sterge Paneli Ã–zellikleri

GÃ¶sterge paneli verileri Ã§eÅŸitli bÃ¶lÃ¼mlere ayÄ±rÄ±r, bunlar arasÄ±nda:

* S3 Nesneleri (zaman aralÄ±ÄŸÄ±, ACL, PII)
* YÃ¼ksek riskli CloudTrail olaylarÄ±/kullanÄ±cÄ±larÄ±
* Etkinlik KonumlarÄ±
* CloudTrail kullanÄ±cÄ± kimliÄŸi tÃ¼rleri ve daha fazlasÄ±.

### KullanÄ±cÄ± SÄ±nÄ±flandÄ±rmasÄ±

KullanÄ±cÄ±lar, API Ã§aÄŸrÄ±larÄ±nÄ±n risk seviyesine gÃ¶re katmanlara ayrÄ±lÄ±r:

* **Platin**: YÃ¼ksek riskli API Ã§aÄŸrÄ±larÄ±, genellikle yÃ¶netici ayrÄ±calÄ±klarÄ± ile.
* **AltÄ±n**: AltyapÄ± ile ilgili API Ã§aÄŸrÄ±larÄ±.
* **GÃ¼mÃ¼ÅŸ**: Orta riskli API Ã§aÄŸrÄ±larÄ±.
* **Bronz**: DÃ¼ÅŸÃ¼k riskli API Ã§aÄŸrÄ±larÄ±.

### Kimlik TÃ¼rleri

Kimlik tÃ¼rleri, isteklerin kaynaÄŸÄ±nÄ± belirten Root, IAM kullanÄ±cÄ±, VarsayÄ±lan Rol, Federated User, AWS HesabÄ± ve AWS Servisi'ni iÃ§erir.

### Veri SÄ±nÄ±flandÄ±rmasÄ±

Veri sÄ±nÄ±flandÄ±rmasÄ± ÅŸunlarÄ± kapsar:

* Ä°Ã§erik TÃ¼rÃ¼: Tespit edilen iÃ§erik tÃ¼runa gÃ¶re.
* Dosya UzantÄ±sÄ±: Dosya uzantÄ±sÄ±na gÃ¶re.
* Tema: Dosyalar iÃ§indeki anahtar kelimelere gÃ¶re kategorize edilir.
* Regex: Belirli regex kalÄ±plarÄ±na gÃ¶re kategorize edilir.

Bu kategoriler arasÄ±ndaki en yÃ¼ksek risk, dosyanÄ±n nihai risk seviyesini belirler.

### AraÅŸtÄ±rma ve Analiz

Amazon Macie'nin araÅŸtÄ±rma iÅŸlevi, derinlemesine analiz iÃ§in tÃ¼m Macie verileri Ã¼zerinde Ã¶zel sorgular yapmayÄ± saÄŸlar. Filtreler arasÄ±nda CloudTrail Verisi, S3 Bucket Ã¶zellikleri ve S3 Nesneleri bulunur. AyrÄ±ca, diÄŸer hesaplarÄ± Amazon Macie'yi paylaÅŸmaya davet etmeyi destekler, bu da iÅŸbirlikÃ§i veri yÃ¶netimi ve gÃ¼venlik izlemeyi kolaylaÅŸtÄ±rÄ±r.

### Enumeration
```
# Get buckets
aws macie2 describe-buckets

# Org config
aws macie2 describe-organization-configuration

# Get admin account (if any)
aws macie2 get-administrator-account
aws macie2 list-organization-admin-accounts # Run from the management account of the org

# Get macie account members (run this form the admin account)
aws macie2 list-members

# Check if automated sensitive data discovey is enabled
aws macie2 get-automated-discovery-configuration

# Get findings
aws macie2 list-findings
aws macie2 get-findings --finding-ids <ids>
aws macie2 list-findings-filters
aws macie2 get -findings-filters --id <id>

# Get allow lists
aws macie2 list-allow-lists
aws macie2 get-allow-list --id <id>

# Get different info
aws macie2 list-classification-jobs
aws macie2 list-classification-scopes
aws macie2 list-custom-data-identifiers
```
#### Post Exploitation

{% hint style="success" %}
Bir saldÄ±rganÄ±n perspektifinden, bu hizmet saldÄ±rganÄ± tespit etmek iÃ§in deÄŸil, depolanan dosyalardaki hassas bilgileri tespit etmek iÃ§in yapÄ±lmÄ±ÅŸtÄ±r. Bu nedenle, bu hizmet **bir saldÄ±rgana hassas bilgileri** bulmasÄ±nda **yardÄ±mcÄ± olabilir**.\
Ancak, belki de bir saldÄ±rgan, kurbanÄ±n uyarÄ±lar almasÄ±nÄ± engellemek ve o bilgileri daha kolay Ã§almak iÃ§in bunu bozmakla da ilgilenebilir.
{% endhint %}

TODO: PR'lar hoÅŸ karÅŸÄ±lanÄ±r!

## References

* [https://cloudacademy.com/blog/introducing-aws-security-hub/](https://cloudacademy.com/blog/introducing-aws-security-hub/)

{% hint style="success" %}
AWS Hacking'i Ã¶ÄŸrenin ve pratik yapÄ±n:<img src="../../../../.gitbook/assets/image (1).png" alt="" data-size="line">[**HackTricks Training AWS Red Team Expert (ARTE)**](https://training.hacktricks.xyz/courses/arte)<img src="../../../../.gitbook/assets/image (1).png" alt="" data-size="line">\
GCP Hacking'i Ã¶ÄŸrenin ve pratik yapÄ±n: <img src="../../../../.gitbook/assets/image (2).png" alt="" data-size="line">[**HackTricks Training GCP Red Team Expert (GRTE)**<img src="../../../../.gitbook/assets/image (2).png" alt="" data-size="line">](https://training.hacktricks.xyz/courses/grte)

<details>

<summary>HackTricks'i Destekleyin</summary>

* [**abonelik planlarÄ±nÄ±**](https://github.com/sponsors/carlospolop) kontrol edin!
* **ğŸ’¬ [**Discord grubuna**](https://discord.gg/hRep4RUj7f) veya [**telegram grubuna**](https://t.me/peass) katÄ±lÄ±n ya da **Twitter'da** ğŸ¦ [**@hacktricks\_live**](https://twitter.com/hacktricks\_live)**'i takip edin.**
* **Hacking ipuÃ§larÄ±nÄ± paylaÅŸmak iÃ§in** [**HackTricks**](https://github.com/carlospolop/hacktricks) ve [**HackTricks Cloud**](https://github.com/carlospolop/hacktricks-cloud) github reposuna PR gÃ¶nderin.

</details>
{% endhint %}
