# AWS - Config Enum

{% hint style="success" %}
NauÄite i veÅ¾bajte AWS Hacking:<img src="/.gitbook/assets/image.png" alt="" data-size="line">[**HackTricks Training AWS Red Team Expert (ARTE)**](https://training.hacktricks.xyz/courses/arte)<img src="/.gitbook/assets/image.png" alt="" data-size="line">\
NauÄite i veÅ¾bajte GCP Hacking: <img src="/.gitbook/assets/image (2).png" alt="" data-size="line">[**HackTricks Training GCP Red Team Expert (GRTE)**<img src="/.gitbook/assets/image (2).png" alt="" data-size="line">](https://training.hacktricks.xyz/courses/grte)

<details>

<summary>PodrÅ¾ite HackTricks</summary>

* Pogledajte [**planove pretplate**](https://github.com/sponsors/carlospolop)!
* **PridruÅ¾ite se** ğŸ’¬ [**Discord grupi**](https://discord.gg/hRep4RUj7f) ili [**telegram grupi**](https://t.me/peass) ili **pratite** nas na **Twitteru** ğŸ¦ [**@hacktricks\_live**](https://twitter.com/hacktricks\_live)**.**
* **Delite hakovanje trikove slanjem PR-ova na** [**HackTricks**](https://github.com/carlospolop/hacktricks) i [**HackTricks Cloud**](https://github.com/carlospolop/hacktricks-cloud) github repozitorijume.

</details>
{% endhint %}

## AWS Config

AWS Config **beleÅ¾i promene resursa**, tako da svaka promena resursa podrÅ¾anog od strane Config moÅ¾e biti zabeleÅ¾ena, Å¡to Ä‡e **zabeleÅ¾iti Å¡ta je promenjeno zajedno sa drugim korisnim metapodacima, sve sadrÅ¾ano u fajlu poznatom kao konfiguraciona stavka**, CI. Ova usluga je **specifiÄna za region**.

Konfiguraciona stavka ili **CI** kako je poznata, je kljuÄna komponenta AWS Config. Sastoji se od JSON fajla koji **sadrÅ¾i informacije o konfiguraciji, informacije o odnosima i druge metapodatke kao trenutni prikaz podrÅ¾anog resursa**. Sve informacije koje AWS Config moÅ¾e zabeleÅ¾iti za resurs su sadrÅ¾ane unutar CI. CI se kreira **svaki put** kada se napravi promena u konfiguraciji podrÅ¾anog resursa na bilo koji naÄin. Pored beleÅ¾enja detalja o pogoÄ‘enom resursu, AWS Config Ä‡e takoÄ‘e zabeleÅ¾iti CI za sve direktno povezane resurse kako bi se osiguralo da promena nije uticala i na te resurse.

* **Metapodaci**: SadrÅ¾e detalje o samoj konfiguracionoj stavci. ID verzije i ID konfiguracije, koji jedinstveno identifikuju CI. Ostale informacije mogu ukljuÄivati MD5Hash koji vam omoguÄ‡ava da uporedite druge CI veÄ‡ zabeleÅ¾ene za isti resurs.
* **Atributi**: Ovo sadrÅ¾i zajedniÄke **informacije o atributima stvarnog resursa**. U ovom delu imamo i jedinstveni ID resursa, i sve kljuÄne vrednosti tagova koje su povezane sa resursom. Tip resursa je takoÄ‘e naveden. Na primer, ako je ovo CI za EC2 instancu, tipovi resursa navedeni mogu biti mreÅ¾ni interfejs ili elastiÄna IP adresa za tu EC2 instancu.
* **Odnosi**: Ovo sadrÅ¾i informacije o bilo kojoj povezanoj **vezi koju resurs moÅ¾e imati**. Tako bi u ovom delu bio jasan opis bilo koje veze sa drugim resursima koje ovaj resurs ima. Na primer, ako je CI za EC2 instancu, deo o odnosima moÅ¾e prikazati vezu sa VPC-om zajedno sa podmreÅ¾om u kojoj se EC2 instanca nalazi.
* **Trenutna konfiguracija:** Ovo Ä‡e prikazati iste informacije koje bi bile generisane ako biste izvrÅ¡ili describe ili list API poziv napravljen od strane AWS CLI. AWS Config koristi iste API pozive da dobije iste informacije.
* **Povezani dogaÄ‘aji**: Ovo se odnosi na AWS CloudTrail. Ovo Ä‡e prikazati **AWS CloudTrail ID dogaÄ‘aja koji je povezan sa promenom koja je pokrenula kreiranje ovog CI**. Novi CI se pravi za svaku promenu napravljenu na resursu. Kao rezultat, biÄ‡e kreirani razliÄiti CloudTrail ID-ovi dogaÄ‘aja.

**Istorija konfiguracije**: MoguÄ‡e je dobiti istoriju konfiguracije resursa zahvaljujuÄ‡i konfiguracionim stavkama. Istorija konfiguracije se isporuÄuje svakih 6 sati i sadrÅ¾i sve CI za odreÄ‘eni tip resursa.

**Tokovi konfiguracije**: Konfiguracione stavke se Å¡alju na SNS Topic kako bi se omoguÄ‡ila analiza podataka.

**Snimci konfiguracije**: Konfiguracione stavke se koriste za kreiranje trenutnog snimka svih podrÅ¾anih resursa.

**S3 se koristi za skladiÅ¡tenje** fajlova istorije konfiguracije i bilo kojih snimaka konfiguracije vaÅ¡ih podataka unutar jednog bucket-a, koji je definisan unutar snimaÄa konfiguracije. Ako imate viÅ¡e AWS naloga, moÅ¾da Ä‡ete Å¾eleti da agregirate svoje fajlove istorije konfiguracije u isti S3 bucket za vaÅ¡ primarni nalog. MeÄ‘utim, moraÄ‡ete da dodelite pristup za pisanje ovom servisnom principu, config.amazonaws.com, i vaÅ¡im sekundarnim nalozima sa pristupom za pisanje u S3 bucket u vaÅ¡em primarnom nalogu.

### Funkcionisanje

* Kada napravite promene, na primer u sigurnosnoj grupi ili listi za kontrolu pristupa bucket-a â€”> pokreÄ‡e se kao dogaÄ‘aj koji prepoznaje AWS Config
* Sve se skladiÅ¡ti u S3 bucket
* U zavisnosti od postavke, Äim se neÅ¡to promeni moÅ¾e pokrenuti lambda funkciju ILI zakazati lambda funkciju da periodiÄno pregleda AWS Config postavke
* Lambda vraÄ‡a informacije Config-u
* Ako je pravilo prekrÅ¡eno, Config pokreÄ‡e SNS

![](<../../../../.gitbook/assets/image (126).png>)

### Config Rules

Config pravila su odliÄan naÄin da vam pomognu **da sprovedete specifiÄne provere usklaÄ‘enosti** **i kontrole preko vaÅ¡ih resursa**, i omoguÄ‡ava vam da usvojite idealnu specifikaciju za implementaciju za svaki od vaÅ¡ih tipova resursa. Svako pravilo **je u suÅ¡tini lambda funkcija** koja kada se pozove procenjuje resurs i izvrÅ¡ava jednostavnu logiku da odredi rezultat usklaÄ‘enosti sa pravilom. **Svaki put kada se napravi promena** na jednom od vaÅ¡ih podrÅ¾anih resursa, **AWS Config Ä‡e proveriti usklaÄ‘enost sa bilo kojim config pravilima koja imate**.\
AWS ima brojna **predefinisana pravila** koja spadaju pod sigurnosni kiÅ¡obran i spremna su za upotrebu. Na primer, Rds-storage-encrypted. Ovo proverava da li je enkripcija skladiÅ¡ta aktivirana za vaÅ¡e RDS baze podataka. Encrypted-volumes. Ovo proverava da li su bilo koji EBS volumeni koji su u stanju povezivanja enkriptovani.

* **AWS Upravljana pravila**: Set predefinisanih pravila koja pokrivaju mnoge najbolje prakse, tako da je uvek vredno pregledati ova pravila pre nego Å¡to postavite svoja jer postoji Å¡ansa da pravilo veÄ‡ postoji.
* **PrilagoÄ‘ena pravila**: MoÅ¾ete kreirati svoja pravila da proverite specifiÄne prilagoÄ‘ene konfiguracije.

Limit od 50 config pravila po regionu pre nego Å¡to morate kontaktirati AWS za poveÄ‡anje.\
Rezultati koji nisu usklaÄ‘eni se NE briÅ¡u.

{% hint style="success" %}
NauÄite i veÅ¾bajte AWS Hacking:<img src="/.gitbook/assets/image.png" alt="" data-size="line">[**HackTricks Training AWS Red Team Expert (ARTE)**](https://training.hacktricks.xyz/courses/arte)<img src="/.gitbook/assets/image.png" alt="" data-size="line">\
NauÄite i veÅ¾bajte GCP Hacking: <img src="/.gitbook/assets/image (2).png" alt="" data-size="line">[**HackTricks Training GCP Red Team Expert (GRTE)**<img src="/.gitbook/assets/image (2).png" alt="" data-size="line">](https://training.hacktricks.xyz/courses/grte)

<details>

<summary>PodrÅ¾ite HackTricks</summary>

* Pogledajte [**planove pretplate**](https://github.com/sponsors/carlospolop)!
* **PridruÅ¾ite se** ğŸ’¬ [**Discord grupi**](https://discord.gg/hRep4RUj7f) ili [**telegram grupi**](https://t.me/peass) ili **pratite** nas na **Twitteru** ğŸ¦ [**@hacktricks\_live**](https://twitter.com/hacktricks\_live)**.**
* **Delite hakovanje trikove slanjem PR-ova na** [**HackTricks**](https://github.com/carlospolop/hacktricks) i [**HackTricks Cloud**](https://github.com/carlospolop/hacktricks-cloud) github repozitorijume.

</details>
{% endhint %}
