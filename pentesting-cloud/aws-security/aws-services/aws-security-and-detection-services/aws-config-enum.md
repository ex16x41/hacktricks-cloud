# AWS - Config Enum

{% hint style="success" %}
Learn & practice AWS Hacking:<img src="/.gitbook/assets/image.png" alt="" data-size="line">[**HackTricks Training AWS Red Team Expert (ARTE)**](https://training.hacktricks.xyz/courses/arte)<img src="/.gitbook/assets/image.png" alt="" data-size="line">\
Learn & practice GCP Hacking: <img src="/.gitbook/assets/image (2).png" alt="" data-size="line">[**HackTricks Training GCP Red Team Expert (GRTE)**<img src="/.gitbook/assets/image (2).png" alt="" data-size="line">](https://training.hacktricks.xyz/courses/grte)

<details>

<summary>Support HackTricks</summary>

* Check the [**subscription plans**](https://github.com/sponsors/carlospolop)!
* **Join the** ğŸ’¬ [**Discord group**](https://discord.gg/hRep4RUj7f) or the [**telegram group**](https://t.me/peass) or **follow** us on **Twitter** ğŸ¦ [**@hacktricks\_live**](https://twitter.com/hacktricks\_live)**.**
* **Share hacking tricks by submitting PRs to the** [**HackTricks**](https://github.com/carlospolop/hacktricks) and [**HackTricks Cloud**](https://github.com/carlospolop/hacktricks-cloud) github repos.

</details>
{% endhint %}

## AWS Config

AWS ConfigëŠ” **ë¦¬ì†ŒìŠ¤ ë³€ê²½ ì‚¬í•­ì„ ìº¡ì²˜**í•˜ì—¬ Configì—ì„œ ì§€ì›í•˜ëŠ” ë¦¬ì†ŒìŠ¤ì— ëŒ€í•œ ëª¨ë“  ë³€ê²½ ì‚¬í•­ì„ ê¸°ë¡í•  ìˆ˜ ìˆìœ¼ë©°, ì´ëŠ” **ë³€ê²½ëœ ë‚´ìš©ê³¼ ê¸°íƒ€ ìœ ìš©í•œ ë©”íƒ€ë°ì´í„°ë¥¼ ê¸°ë¡í•˜ì—¬ êµ¬ì„± í•­ëª©(CI)ì´ë¼ëŠ” íŒŒì¼ ë‚´ì— ë³´ê´€**í•©ë‹ˆë‹¤. ì´ ì„œë¹„ìŠ¤ëŠ” **ì§€ì—­ë³„**ë¡œ ì œê³µë©ë‹ˆë‹¤.

êµ¬ì„± í•­ëª© ë˜ëŠ” **CI**ëŠ” AWS Configì˜ í•µì‹¬ êµ¬ì„± ìš”ì†Œì…ë‹ˆë‹¤. ì´ëŠ” **êµ¬ì„± ì •ë³´, ê´€ê³„ ì •ë³´ ë° ì§€ì›ë˜ëŠ” ë¦¬ì†ŒìŠ¤ì˜ ì‹œì  ìŠ¤ëƒ…ìƒ· ë³´ê¸°ë¡œì„œì˜ ê¸°íƒ€ ë©”íƒ€ë°ì´í„°ë¥¼ í¬í•¨í•˜ëŠ” JSON íŒŒì¼**ë¡œ êµ¬ì„±ë©ë‹ˆë‹¤. AWS Configê°€ ë¦¬ì†ŒìŠ¤ì— ëŒ€í•´ ê¸°ë¡í•  ìˆ˜ ìˆëŠ” ëª¨ë“  ì •ë³´ëŠ” CI ë‚´ì— ìº¡ì²˜ë©ë‹ˆë‹¤. ì§€ì›ë˜ëŠ” ë¦¬ì†ŒìŠ¤ì˜ êµ¬ì„±ì— ì–´ë–¤ ë°©ì‹ìœ¼ë¡œë“  ë³€ê²½ì´ ìˆì„ ë•Œë§ˆë‹¤ CIê°€ ìƒì„±ë©ë‹ˆë‹¤. ì˜í–¥ì„ ë°›ì€ ë¦¬ì†ŒìŠ¤ì˜ ì„¸ë¶€ ì •ë³´ë¥¼ ê¸°ë¡í•˜ëŠ” ê²ƒ ì™¸ì—ë„, AWS ConfigëŠ” ë³€ê²½ ì‚¬í•­ì´ í•´ë‹¹ ë¦¬ì†ŒìŠ¤ì—ë„ ì˜í–¥ì„ ë¯¸ì¹˜ì§€ ì•Šì•˜ëŠ”ì§€ í™•ì¸í•˜ê¸° ìœ„í•´ ì§ì ‘ ê´€ë ¨ëœ ë¦¬ì†ŒìŠ¤ì— ëŒ€í•œ CIë„ ê¸°ë¡í•©ë‹ˆë‹¤.

* **Metadata**: êµ¬ì„± í•­ëª© ìì²´ì— ëŒ€í•œ ì„¸ë¶€ ì •ë³´ë¥¼ í¬í•¨í•©ë‹ˆë‹¤. CIë¥¼ ê³ ìœ í•˜ê²Œ ì‹ë³„í•˜ëŠ” ë²„ì „ IDì™€ êµ¬ì„± IDê°€ í¬í•¨ë©ë‹ˆë‹¤. ë‹¤ë¥¸ ì •ë³´ë¡œëŠ” ë™ì¼í•œ ë¦¬ì†ŒìŠ¤ì— ëŒ€í•´ ì´ë¯¸ ê¸°ë¡ëœ ë‹¤ë¥¸ CIì™€ ë¹„êµí•  ìˆ˜ ìˆëŠ” MD5Hashê°€ í¬í•¨ë  ìˆ˜ ìˆìŠµë‹ˆë‹¤.
* **Attributes**: ì‹¤ì œ ë¦¬ì†ŒìŠ¤ì— ëŒ€í•œ ê³µí†µ **ì†ì„± ì •ë³´ë¥¼ í¬í•¨**í•©ë‹ˆë‹¤. ì´ ì„¹ì…˜ì—ëŠ” ê³ ìœ í•œ ë¦¬ì†ŒìŠ¤ IDì™€ ë¦¬ì†ŒìŠ¤ì— ì—°ê²°ëœ í‚¤ ê°’ íƒœê·¸ê°€ í¬í•¨ë©ë‹ˆë‹¤. ë¦¬ì†ŒìŠ¤ ìœ í˜•ë„ ë‚˜ì—´ë©ë‹ˆë‹¤. ì˜ˆë¥¼ ë“¤ì–´, EC2 ì¸ìŠ¤í„´ìŠ¤ì— ëŒ€í•œ CIì¸ ê²½ìš°, ë‚˜ì—´ëœ ë¦¬ì†ŒìŠ¤ ìœ í˜•ì€ ë„¤íŠ¸ì›Œí¬ ì¸í„°í˜ì´ìŠ¤ ë˜ëŠ” í•´ë‹¹ EC2 ì¸ìŠ¤í„´ìŠ¤ì˜ íƒ„ë ¥ì  IP ì£¼ì†Œì¼ ìˆ˜ ìˆìŠµë‹ˆë‹¤.
* **Relationships**: ë¦¬ì†ŒìŠ¤ê°€ ê°€ì§ˆ ìˆ˜ ìˆëŠ” **ì—°ê²° ê´€ê³„ì— ëŒ€í•œ ì •ë³´ë¥¼ í¬í•¨**í•©ë‹ˆë‹¤. ì´ ì„¹ì…˜ì—ëŠ” í•´ë‹¹ ë¦¬ì†ŒìŠ¤ê°€ ë‹¤ë¥¸ ë¦¬ì†ŒìŠ¤ì™€ì˜ ê´€ê³„ì— ëŒ€í•œ ëª…í™•í•œ ì„¤ëª…ì´ í‘œì‹œë©ë‹ˆë‹¤. ì˜ˆë¥¼ ë“¤ì–´, CIê°€ EC2 ì¸ìŠ¤í„´ìŠ¤ì— ëŒ€í•œ ê²ƒì´ë¼ë©´, ê´€ê³„ ì„¹ì…˜ì—ëŠ” í•´ë‹¹ EC2 ì¸ìŠ¤í„´ìŠ¤ê°€ ì†í•œ VPCì™€ ì„œë¸Œë„·ì— ëŒ€í•œ ì—°ê²°ì´ í‘œì‹œë  ìˆ˜ ìˆìŠµë‹ˆë‹¤.
* **Current configuration:** AWS CLIì—ì„œ ìˆ˜í–‰í•œ ì„¤ëª… ë˜ëŠ” ëª©ë¡ API í˜¸ì¶œë¡œ ìƒì„±ëœ ê²ƒê³¼ ë™ì¼í•œ ì •ë³´ë¥¼ í‘œì‹œí•©ë‹ˆë‹¤. AWS ConfigëŠ” ë™ì¼í•œ ì •ë³´ë¥¼ ì–»ê¸° ìœ„í•´ ë™ì¼í•œ API í˜¸ì¶œì„ ì‚¬ìš©í•©ë‹ˆë‹¤.
* **Related events**: AWS CloudTrailê³¼ ê´€ë ¨ì´ ìˆìŠµë‹ˆë‹¤. ì´ëŠ” **ì´ CIì˜ ìƒì„±ì„ íŠ¸ë¦¬ê±°í•œ ë³€ê²½ ì‚¬í•­ê³¼ ê´€ë ¨ëœ AWS CloudTrail ì´ë²¤íŠ¸ IDë¥¼ í‘œì‹œ**í•©ë‹ˆë‹¤. ë¦¬ì†ŒìŠ¤ì— ëŒ€í•œ ëª¨ë“  ë³€ê²½ ì‚¬í•­ì— ëŒ€í•´ ìƒˆë¡œìš´ CIê°€ ìƒì„±ë©ë‹ˆë‹¤. ê²°ê³¼ì ìœ¼ë¡œ, ë‹¤ë¥¸ CloudTrail ì´ë²¤íŠ¸ IDê°€ ìƒì„±ë©ë‹ˆë‹¤.

**Configuration History**: êµ¬ì„± í•­ëª© ë•ë¶„ì— ë¦¬ì†ŒìŠ¤ì˜ êµ¬ì„± ì´ë ¥ì„ ì–»ì„ ìˆ˜ ìˆìŠµë‹ˆë‹¤. êµ¬ì„± ì´ë ¥ì€ 6ì‹œê°„ë§ˆë‹¤ ì „ë‹¬ë˜ë©° íŠ¹ì • ë¦¬ì†ŒìŠ¤ ìœ í˜•ì— ëŒ€í•œ ëª¨ë“  CIë¥¼ í¬í•¨í•©ë‹ˆë‹¤.

**Configuration Streams**: êµ¬ì„± í•­ëª©ì€ ë°ì´í„°ë¥¼ ë¶„ì„í•  ìˆ˜ ìˆë„ë¡ SNS ì£¼ì œë¡œ ì „ì†¡ë©ë‹ˆë‹¤.

**Configuration Snapshots**: êµ¬ì„± í•­ëª©ì€ ì§€ì›ë˜ëŠ” ëª¨ë“  ë¦¬ì†ŒìŠ¤ì˜ ì‹œì  ìŠ¤ëƒ…ìƒ·ì„ ìƒì„±í•˜ëŠ” ë° ì‚¬ìš©ë©ë‹ˆë‹¤.

**S3ëŠ”** êµ¬ì„± ì´ë ¥ íŒŒì¼ê³¼ ë°ì´í„°ì˜ êµ¬ì„± ìŠ¤ëƒ…ìƒ·ì„ ë‹¨ì¼ ë²„í‚· ë‚´ì— ì €ì¥í•˜ëŠ” ë° ì‚¬ìš©ë©ë‹ˆë‹¤. êµ¬ì„± ë ˆì½”ë” ë‚´ì—ì„œ ì •ì˜ë©ë‹ˆë‹¤. ì—¬ëŸ¬ AWS ê³„ì •ì´ ìˆëŠ” ê²½ìš°, ê¸°ë³¸ ê³„ì •ì˜ ë™ì¼í•œ S3 ë²„í‚·ì— êµ¬ì„± ì´ë ¥ íŒŒì¼ì„ ì§‘ê³„í•˜ê³ ì í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤. ê·¸ëŸ¬ë‚˜ ì´ ì„œë¹„ìŠ¤ ì›ì¹™ì¸ config.amazonaws.comê³¼ ê¸°ë³¸ ê³„ì •ì˜ S3 ë²„í‚·ì— ì“°ê¸° ê¶Œí•œì´ ìˆëŠ” ë³´ì¡° ê³„ì •ì— ì“°ê¸° ê¶Œí•œì„ ë¶€ì—¬í•´ì•¼ í•©ë‹ˆë‹¤.

### Functioning

* ì˜ˆë¥¼ ë“¤ì–´ ë³´ì•ˆ ê·¸ë£¹ ë˜ëŠ” ë²„í‚· ì•¡ì„¸ìŠ¤ ì œì–´ ëª©ë¡ì— ë³€ê²½ ì‚¬í•­ì„ ë§Œë“¤ ë•Œ â€”> AWS Configì—ì„œ ì´ë²¤íŠ¸ë¡œ ê°ì§€
* ëª¨ë“  ê²ƒì„ S3 ë²„í‚·ì— ì €ì¥
* ì„¤ì •ì— ë”°ë¼, ë³€ê²½ ì‚¬í•­ì´ ë°œìƒí•˜ë©´ ëŒë‹¤ í•¨ìˆ˜ë¥¼ íŠ¸ë¦¬ê±°í•˜ê±°ë‚˜ ì£¼ê¸°ì ìœ¼ë¡œ AWS Config ì„¤ì •ì„ ê²€í† í•˜ë„ë¡ ëŒë‹¤ í•¨ìˆ˜ë¥¼ ì˜ˆì•½í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.
* ëŒë‹¤ëŠ” Configì— í”¼ë“œë°±ì„ ì œê³µí•©ë‹ˆë‹¤.
* ê·œì¹™ì´ ìœ„ë°˜ë˜ë©´ ConfigëŠ” SNSë¥¼ ì‹¤í–‰í•©ë‹ˆë‹¤.

![](<../../../../.gitbook/assets/image (126).png>)

### Config Rules

Config ê·œì¹™ì€ **ë¦¬ì†ŒìŠ¤ ì „ë°˜ì— ê±¸ì³ íŠ¹ì • ì¤€ìˆ˜ ê²€ì‚¬** **ë° ì œì–´ë¥¼ ì‹œí–‰**í•˜ëŠ” ë° ë„ì›€ì´ ë˜ë©°, ê° ë¦¬ì†ŒìŠ¤ ìœ í˜•ì— ëŒ€í•œ ì´ìƒì ì¸ ë°°í¬ ì‚¬ì–‘ì„ ì±„íƒí•  ìˆ˜ ìˆë„ë¡ í•©ë‹ˆë‹¤. ê° ê·œì¹™ì€ **í˜¸ì¶œ ì‹œ ë¦¬ì†ŒìŠ¤ë¥¼ í‰ê°€í•˜ê³  ê·œì¹™ê³¼ì˜ ì¤€ìˆ˜ ê²°ê³¼ë¥¼ ê²°ì •í•˜ê¸° ìœ„í•´ ê°„ë‹¨í•œ ë…¼ë¦¬ë¥¼ ìˆ˜í–‰í•˜ëŠ” ëŒë‹¤ í•¨ìˆ˜**ì…ë‹ˆë‹¤. **ì§€ì›ë˜ëŠ” ë¦¬ì†ŒìŠ¤ ì¤‘ í•˜ë‚˜ì— ë³€ê²½ ì‚¬í•­ì´ ìˆì„ ë•Œë§ˆë‹¤**, **AWS ConfigëŠ” ì„¤ì •ëœ ëª¨ë“  config ê·œì¹™ì— ëŒ€í•œ ì¤€ìˆ˜ ì—¬ë¶€ë¥¼ í™•ì¸**í•©ë‹ˆë‹¤.\
AWSëŠ” ì‚¬ìš© ê°€ëŠ¥í•œ **ì‚¬ì „ ì •ì˜ëœ ê·œì¹™**ì„ ë‹¤ìˆ˜ ë³´ìœ í•˜ê³  ìˆìœ¼ë©°, ì´ëŠ” ë³´ì•ˆ ë²”ì£¼ì— ì†í•©ë‹ˆë‹¤. ì˜ˆë¥¼ ë“¤ì–´, Rds-storage-encryptedëŠ” RDS ë°ì´í„°ë² ì´ìŠ¤ ì¸ìŠ¤í„´ìŠ¤ì— ì €ì¥ì†Œ ì•”í˜¸í™”ê°€ í™œì„±í™”ë˜ì–´ ìˆëŠ”ì§€ í™•ì¸í•©ë‹ˆë‹¤. Encrypted-volumesëŠ” ì—°ê²°ëœ ìƒíƒœì˜ EBS ë³¼ë¥¨ì´ ì•”í˜¸í™”ë˜ì–´ ìˆëŠ”ì§€ í™•ì¸í•©ë‹ˆë‹¤.

* **AWS Managed rules**: ë§ì€ ëª¨ë²” ì‚¬ë¡€ë¥¼ ë‹¤ë£¨ëŠ” ì‚¬ì „ ì •ì˜ëœ ê·œì¹™ ì„¸íŠ¸ë¡œ, ìì²´ ê·œì¹™ì„ ì„¤ì •í•˜ê¸° ì „ì— ì´ëŸ¬í•œ ê·œì¹™ì„ ë¨¼ì € ì‚´í´ë³´ëŠ” ê²ƒì´ ì¢‹ìŠµë‹ˆë‹¤. ì´ë¯¸ ê·œì¹™ì´ ì¡´ì¬í•  ê°€ëŠ¥ì„±ì´ ìˆìŠµë‹ˆë‹¤.
* **Custom rules**: íŠ¹ì • ì‚¬ìš©ì ì •ì˜ êµ¬ì„±ì„ í™•ì¸í•˜ê¸° ìœ„í•´ ìì²´ ê·œì¹™ì„ ë§Œë“¤ ìˆ˜ ìˆìŠµë‹ˆë‹¤.

50ê°œì˜ config ê·œì¹™ ì œí•œì´ ìˆìœ¼ë©°, ì´ë¥¼ ì´ˆê³¼í•˜ë©´ AWSì— ì¦ê°€ë¥¼ ìš”ì²­í•´ì•¼ í•©ë‹ˆë‹¤.\
ë¹„ì¤€ìˆ˜ ê²°ê³¼ëŠ” ì‚­ì œë˜ì§€ ì•ŠìŠµë‹ˆë‹¤.

{% hint style="success" %}
Learn & practice AWS Hacking:<img src="/.gitbook/assets/image.png" alt="" data-size="line">[**HackTricks Training AWS Red Team Expert (ARTE)**](https://training.hacktricks.xyz/courses/arte)<img src="/.gitbook/assets/image.png" alt="" data-size="line">\
Learn & practice GCP Hacking: <img src="/.gitbook/assets/image (2).png" alt="" data-size="line">[**HackTricks Training GCP Red Team Expert (GRTE)**<img src="/.gitbook/assets/image (2).png" alt="" data-size="line">](https://training.hacktricks.xyz/courses/grte)

<details>

<summary>Support HackTricks</summary>

* Check the [**subscription plans**](https://github.com/sponsors/carlospolop)!
* **Join the** ğŸ’¬ [**Discord group**](https://discord.gg/hRep4RUj7f) or the [**telegram group**](https://t.me/peass) or **follow** us on **Twitter** ğŸ¦ [**@hacktricks\_live**](https://twitter.com/hacktricks\_live)**.**
* **Share hacking tricks by submitting PRs to the** [**HackTricks**](https://github.com/carlospolop/hacktricks) and [**HackTricks Cloud**](https://github.com/carlospolop/hacktricks-cloud) github repos.

</details>
{% endhint %}
