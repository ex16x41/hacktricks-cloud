# AWS - Config Enum

{% hint style="success" %}
Learn & practice AWS Hacking:<img src="../../../../.gitbook/assets/image (1) (1).png" alt="" data-size="line">[**HackTricks Training AWS Red Team Expert (ARTE)**](https://training.hacktricks.xyz/courses/arte)<img src="../../../../.gitbook/assets/image (1) (1).png" alt="" data-size="line">\
Learn & practice GCP Hacking: <img src="../../../../.gitbook/assets/image (2).png" alt="" data-size="line">[**HackTricks Training GCP Red Team Expert (GRTE)**<img src="../../../../.gitbook/assets/image (2).png" alt="" data-size="line">](https://training.hacktricks.xyz/courses/grte)

<details>

<summary>Support HackTricks</summary>

* Check the [**subscription plans**](https://github.com/sponsors/carlospolop)!
* **Join the** ğŸ’¬ [**Discord group**](https://discord.gg/hRep4RUj7f) or the [**telegram group**](https://t.me/peass) or **follow** us on **Twitter** ğŸ¦ [**@hacktricks\_live**](https://twitter.com/hacktricks\_live)**.**
* **Share hacking tricks by submitting PRs to the** [**HackTricks**](https://github.com/carlospolop/hacktricks) and [**HackTricks Cloud**](https://github.com/carlospolop/hacktricks-cloud) github repos.

</details>
{% endhint %}

## AWS Config

AWS Config **beleÅ¾i promene resursa**, tako da se svaka promena na resursu koji podrÅ¾ava Config moÅ¾e zabeleÅ¾iti, Å¡to Ä‡e **zabeleÅ¾iti Å¡ta se promenilo zajedno sa drugim korisnim metapodacima, sve sadrÅ¾ano u datoteci poznatoj kao konfiguracijski element**, CI. Ova usluga je **specifiÄna za region**.

Konfiguracijski element ili **CI**, kako se naziva, je kljuÄna komponenta AWS Config-a. Sastoji se od JSON datoteke koja **sadrÅ¾i informacije o konfiguraciji, informacije o odnosima i druge metapodatke kao trenutni pregled podrÅ¾anog resursa**. Sve informacije koje AWS Config moÅ¾e zabeleÅ¾iti za resurs su zabeleÅ¾ene unutar CI. CI se kreira **svaki put** kada se na podrÅ¾anom resursu izvrÅ¡i promena u njegovoj konfiguraciji na bilo koji naÄin. Pored beleÅ¾enja detalja o pogoÄ‘enom resursu, AWS Config Ä‡e takoÄ‘e zabeleÅ¾iti CI za sve direktno povezane resurse kako bi se osiguralo da promena nije uticala i na te resurse.

* **Metapodaci**: SadrÅ¾i detalje o samom konfiguracijskom elementu. ID verzije i ID konfiguracije, koji jedinstveno identifikuje CI. Druge informacije mogu ukljuÄivati MD5Hash koji vam omoguÄ‡ava da uporedite druge CI veÄ‡ zabeleÅ¾ene protiv istog resursa.
* **Atributi**: Ovo sadrÅ¾i zajedniÄke **informacije o atributima u odnosu na stvarni resurs**. U ovom odeljku imamo i jedinstveni ID resursa, kao i sve kljuÄne oznake koje su povezane sa resursom. Tip resursa je takoÄ‘e naveden. Na primer, ako je ovo bio CI za EC2 instancu, tipovi resursa koji su navedeni mogli bi biti mreÅ¾ni interfejs ili elastiÄna IP adresa za tu EC2 instancu.
* **Odnos**: Ovo sadrÅ¾i informacije o bilo kojem povezanom **odnosu koji resurs moÅ¾e imati**. Dakle, u ovom odeljku bi se prikazala jasna opisna informacija o bilo kojem odnosu sa drugim resursima koje ovaj resurs ima. Na primer, ako je CI bio za EC2 instancu, odeljak o odnosima moÅ¾e prikazati vezu sa VPC-om zajedno sa podmreÅ¾om u kojoj se EC2 instanca nalazi.
* **Trenutna konfiguracija:** Ovo Ä‡e prikazati iste informacije koje bi se generisale ako biste izvrÅ¡ili opis ili listu API poziva napravljenih od strane AWS CLI. AWS Config koristi iste API pozive da dobije iste informacije.
* **Povezani dogaÄ‘aji**: Ovo se odnosi na AWS CloudTrail. Ovo Ä‡e prikazati **AWS CloudTrail ID dogaÄ‘aja koji se odnosi na promenu koja je pokrenula kreiranje ovog CI**. Postoji novi CI napravljen za svaku promenu izvrÅ¡enu na resursu. Kao rezultat, biÄ‡e kreirani razliÄiti CloudTrail ID dogaÄ‘aja.

**Istorija konfiguracije**: MoguÄ‡e je dobiti istoriju konfiguracije resursa zahvaljujuÄ‡i konfiguracijskim elementima. Istorija konfiguracije se isporuÄuje svake 6 sati i sadrÅ¾i sve CI za odreÄ‘eni tip resursa.

**Konfiguracijski tokovi**: Konfiguracijski elementi se Å¡alju na SNS temu kako bi omoguÄ‡ili analizu podataka.

**Konfiguracijski snimci**: Konfiguracijski elementi se koriste za kreiranje trenutnog snimka svih podrÅ¾anih resursa.

**S3 se koristi za skladiÅ¡tenje** datoteka istorije konfiguracije i bilo kojih konfiguracijskih snimaka vaÅ¡ih podataka unutar jedne kante, koja je definisana unutar konfiguracijskog snimaÄa. Ako imate viÅ¡e AWS naloga, moÅ¾da Ä‡ete Å¾eleti da agregirate datoteke istorije konfiguracije u istu S3 kantu za vaÅ¡ primarni nalog. MeÄ‘utim, moraÄ‡ete da dodelite pristup za pisanje za ovaj servisni princip, config.amazonaws.com, i vaÅ¡e sekundarne naloge sa pristupom za pisanje u S3 kantu u vaÅ¡em primarnom nalogu.

### Funkcionisanje

* Kada izvrÅ¡ite promene, na primer, na sigurnosnoj grupi ili listi kontrole pristupa kante â€”> pokreÄ‡e se kao dogaÄ‘aj koji preuzima AWS Config
* SkladiÅ¡ti sve u S3 kantu
* U zavisnosti od postavki, Äim se neÅ¡to promeni, moÅ¾e pokrenuti lambda funkciju ili zakazati lambda funkciju da periodiÄno pregleda AWS Config postavke
* Lambda se vraÄ‡a Config-u
* Ako je pravilo prekrÅ¡eno, Config pokreÄ‡e SNS

![](<../../../../.gitbook/assets/image (126).png>)

### Config pravila

Config pravila su odliÄan naÄin da vam pomognu da **sprovodite specifiÄne provere usklaÄ‘enosti** **i kontrole preko vaÅ¡ih resursa**, i omoguÄ‡avaju vam da usvojite idealnu specifikaciju implementacije za svaki od vaÅ¡ih tipova resursa. Svako pravilo **je u suÅ¡tini lambda funkcija** koja, kada se pozove, procenjuje resurs i sprovodi neku jednostavnu logiku da odredi rezultat usklaÄ‘enosti sa pravilom. **Svaki put kada se izvrÅ¡i promena** na jednom od vaÅ¡ih podrÅ¾anih resursa, **AWS Config Ä‡e proveriti usklaÄ‘enost sa bilo kojim config pravilima koja imate na snazi**.\
AWS ima niz **predefinisanih pravila** koja spadaju pod bezbednosni kiÅ¡obran i spremna su za koriÅ¡Ä‡enje. Na primer, Rds-storage-encrypted. Ovo proverava da li je aktivirana enkripcija skladiÅ¡ta od strane vaÅ¡ih RDS baza podataka. Encrypted-volumes. Ovo proverava da li su svi EBS volumeni koji imaju stanje povezano enkriptovani.

* **AWS upravljana pravila**: Skup predefinisanih pravila koja pokrivaju mnogo najboljih praksi, tako da uvek vredi prvo pregledati ova pravila pre nego Å¡to postavite svoja, jer postoji Å¡ansa da pravilo veÄ‡ postoji.
* **PrilagoÄ‘ena pravila**: MoÅ¾ete kreirati svoja pravila da proverite specifiÄne prilagoÄ‘ene konfiguracije.

Limit od 50 config pravila po regionu pre nego Å¡to morate kontaktirati AWS za poveÄ‡anje.\
NeusaglaÅ¡eni rezultati se NE briÅ¡u.

{% hint style="success" %}
Learn & practice AWS Hacking:<img src="../../../../.gitbook/assets/image (1) (1).png" alt="" data-size="line">[**HackTricks Training AWS Red Team Expert (ARTE)**](https://training.hacktricks.xyz/courses/arte)<img src="../../../../.gitbook/assets/image (1) (1).png" alt="" data-size="line">\
Learn & practice GCP Hacking: <img src="../../../../.gitbook/assets/image (2).png" alt="" data-size="line">[**HackTricks Training GCP Red Team Expert (GRTE)**<img src="../../../../.gitbook/assets/image (2).png" alt="" data-size="line">](https://training.hacktricks.xyz/courses/grte)

<details>

<summary>Support HackTricks</summary>

* Check the [**subscription plans**](https://github.com/sponsors/carlospolop)!
* **Join the** ğŸ’¬ [**Discord group**](https://discord.gg/hRep4RUj7f) or the [**telegram group**](https://t.me/peass) or **follow** us on **Twitter** ğŸ¦ [**@hacktricks\_live**](https://twitter.com/hacktricks\_live)**.**
* **Share hacking tricks by submitting PRs to the** [**HackTricks**](https://github.com/carlospolop/hacktricks) and [**HackTricks Cloud**](https://github.com/carlospolop/hacktricks-cloud) github repos.

</details>
{% endhint %}
