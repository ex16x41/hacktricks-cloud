# AWS - Config Enum

{% hint style="success" %}
å­¦ä¹ å’Œç»ƒä¹  AWS Hacking:<img src="/.gitbook/assets/image.png" alt="" data-size="line">[**HackTricks Training AWS Red Team Expert (ARTE)**](https://training.hacktricks.xyz/courses/arte)<img src="/.gitbook/assets/image.png" alt="" data-size="line">\
å­¦ä¹ å’Œç»ƒä¹  GCP Hacking: <img src="/.gitbook/assets/image (2).png" alt="" data-size="line">[**HackTricks Training GCP Red Team Expert (GRTE)**<img src="/.gitbook/assets/image (2).png" alt="" data-size="line">](https://training.hacktricks.xyz/courses/grte)

<details>

<summary>æ”¯æŒ HackTricks</summary>

* æŸ¥çœ‹ [**è®¢é˜…è®¡åˆ’**](https://github.com/sponsors/carlospolop)!
* **åŠ å…¥** ğŸ’¬ [**Discord ç¾¤ç»„**](https://discord.gg/hRep4RUj7f) æˆ– [**telegram ç¾¤ç»„**](https://t.me/peass) æˆ– **å…³æ³¨** æˆ‘ä»¬çš„ **Twitter** ğŸ¦ [**@hacktricks\_live**](https://twitter.com/hacktricks\_live)**.**
* **é€šè¿‡æäº¤ PR åˆ†äº«é»‘å®¢æŠ€å·§åˆ°** [**HackTricks**](https://github.com/carlospolop/hacktricks) å’Œ [**HackTricks Cloud**](https://github.com/carlospolop/hacktricks-cloud) github ä»“åº“ã€‚

</details>
{% endhint %}

## AWS Config

AWS Config **æ•è·èµ„æºæ›´æ”¹**ï¼Œå› æ­¤å¯ä»¥è®°å½•å¯¹ Config æ”¯æŒçš„ä»»ä½•èµ„æºçš„ä»»ä½•æ›´æ”¹ï¼Œè¿™å°†**è®°å½•æ›´æ”¹å†…å®¹ä»¥åŠå…¶ä»–æœ‰ç”¨çš„å…ƒæ•°æ®ï¼Œæ‰€æœ‰è¿™äº›éƒ½ä¿å­˜åœ¨ç§°ä¸ºé…ç½®é¡¹ï¼ˆCIï¼‰çš„æ–‡ä»¶ä¸­**ã€‚æ­¤æœåŠ¡æ˜¯**åŒºåŸŸç‰¹å®š**çš„ã€‚

é…ç½®é¡¹æˆ–ç§°ä¸º **CI**ï¼Œæ˜¯ AWS Config çš„å…³é”®ç»„ä»¶ã€‚å®ƒç”±ä¸€ä¸ª JSON æ–‡ä»¶ç»„æˆï¼Œ**åŒ…å«é…ç½®ä¿¡æ¯ã€å…³ç³»ä¿¡æ¯å’Œå…¶ä»–å…ƒæ•°æ®ï¼Œä½œä¸ºæ”¯æŒèµ„æºçš„æ—¶é—´ç‚¹å¿«ç…§è§†å›¾**ã€‚AWS Config å¯ä»¥è®°å½•çš„æ‰€æœ‰èµ„æºä¿¡æ¯éƒ½åŒ…å«åœ¨ CI ä¸­ã€‚æ¯æ¬¡å¯¹æ”¯æŒçš„èµ„æºè¿›è¡Œé…ç½®æ›´æ”¹æ—¶ï¼Œéƒ½ä¼šåˆ›å»ºä¸€ä¸ª CIã€‚é™¤äº†è®°å½•å—å½±å“èµ„æºçš„è¯¦ç»†ä¿¡æ¯å¤–ï¼ŒAWS Config è¿˜ä¼šè®°å½•ä»»ä½•ç›´æ¥ç›¸å…³èµ„æºçš„ CIï¼Œä»¥ç¡®ä¿æ›´æ”¹ä¸ä¼šå½±å“è¿™äº›èµ„æºã€‚

* **å…ƒæ•°æ®**ï¼šåŒ…å«æœ‰å…³é…ç½®é¡¹æœ¬èº«çš„è¯¦ç»†ä¿¡æ¯ã€‚ä¸€ä¸ªç‰ˆæœ¬ ID å’Œä¸€ä¸ªé…ç½® IDï¼Œå”¯ä¸€æ ‡è¯† CIã€‚å…¶ä»–ä¿¡æ¯å¯ä»¥åŒ…æ‹¬ä¸€ä¸ª MD5Hashï¼Œå…è®¸æ‚¨æ¯”è¾ƒå·²ç»è®°å½•çš„å…¶ä»– CIã€‚
* **å±æ€§**ï¼šè¿™åŒ…å«å®é™…èµ„æºçš„å¸¸è§**å±æ€§ä¿¡æ¯**ã€‚åœ¨æ­¤éƒ¨åˆ†ä¸­ï¼Œæˆ‘ä»¬è¿˜æœ‰ä¸€ä¸ªå”¯ä¸€çš„èµ„æº IDï¼Œä»¥åŠä¸èµ„æºå…³è”çš„ä»»ä½•é”®å€¼æ ‡ç­¾ã€‚è¿˜åˆ—å‡ºäº†èµ„æºç±»å‹ã€‚ä¾‹å¦‚ï¼Œå¦‚æœè¿™æ˜¯ä¸€ä¸ª EC2 å®ä¾‹çš„ CIï¼Œåˆ—å‡ºçš„èµ„æºç±»å‹å¯èƒ½æ˜¯ç½‘ç»œæ¥å£æˆ–è¯¥ EC2 å®ä¾‹çš„å¼¹æ€§ IP åœ°å€ã€‚
* **å…³ç³»**ï¼šè¿™åŒ…å«èµ„æºå¯èƒ½å…·æœ‰çš„ä»»ä½•è¿æ¥**å…³ç³»çš„ä¿¡æ¯**ã€‚å› æ­¤åœ¨æ­¤éƒ¨åˆ†ä¸­ï¼Œå®ƒå°†æ˜¾ç¤ºè¯¥èµ„æºä¸å…¶ä»–èµ„æºçš„ä»»ä½•å…³ç³»çš„æ¸…æ™°æè¿°ã€‚ä¾‹å¦‚ï¼Œå¦‚æœ CI æ˜¯ä¸€ä¸ª EC2 å®ä¾‹ï¼Œå…³ç³»éƒ¨åˆ†å¯èƒ½ä¼šæ˜¾ç¤ºä¸ VPC çš„è¿æ¥ä»¥åŠ EC2 å®ä¾‹æ‰€åœ¨çš„å­ç½‘ã€‚
* **å½“å‰é…ç½®**ï¼šè¿™å°†æ˜¾ç¤ºä¸é€šè¿‡ AWS CLI æ‰§è¡Œæè¿°æˆ–åˆ—å‡º API è°ƒç”¨ç”Ÿæˆçš„ä¿¡æ¯ç›¸åŒçš„ä¿¡æ¯ã€‚AWS Config ä½¿ç”¨ç›¸åŒçš„ API è°ƒç”¨è·å–ç›¸åŒçš„ä¿¡æ¯ã€‚
* **ç›¸å…³äº‹ä»¶**ï¼šè¿™ä¸ AWS CloudTrail ç›¸å…³ã€‚è¿™å°†æ˜¾ç¤º**ä¸è§¦å‘æ­¤ CI åˆ›å»ºçš„æ›´æ”¹ç›¸å…³çš„ AWS CloudTrail äº‹ä»¶ ID**ã€‚æ¯æ¬¡å¯¹èµ„æºè¿›è¡Œæ›´æ”¹æ—¶ï¼Œéƒ½ä¼šåˆ›å»ºä¸€ä¸ªæ–°çš„ CIã€‚å› æ­¤ï¼Œå°†åˆ›å»ºä¸åŒçš„ CloudTrail äº‹ä»¶ IDã€‚

**é…ç½®å†å²**ï¼šå¯ä»¥é€šè¿‡é…ç½®é¡¹è·å–èµ„æºçš„é…ç½®å†å²ã€‚æ¯ 6 å°æ—¶äº¤ä»˜ä¸€æ¬¡é…ç½®å†å²ï¼ŒåŒ…å«ç‰¹å®šèµ„æºç±»å‹çš„æ‰€æœ‰ CIã€‚

**é…ç½®æµ**ï¼šé…ç½®é¡¹è¢«å‘é€åˆ° SNS ä¸»é¢˜ä»¥ä¾¿åˆ†ææ•°æ®ã€‚

**é…ç½®å¿«ç…§**ï¼šé…ç½®é¡¹ç”¨äºåˆ›å»ºæ‰€æœ‰æ”¯æŒèµ„æºçš„æ—¶é—´ç‚¹å¿«ç…§ã€‚

**S3 ç”¨äºå­˜å‚¨**é…ç½®å†å²æ–‡ä»¶å’Œä»»ä½•é…ç½®å¿«ç…§çš„æ•°æ®åœ¨å•ä¸ªæ¡¶ä¸­ï¼Œè¿™åœ¨é…ç½®è®°å½•å™¨ä¸­å®šä¹‰ã€‚å¦‚æœæ‚¨æœ‰å¤šä¸ª AWS è´¦æˆ·ï¼Œæ‚¨å¯èƒ½å¸Œæœ›å°†é…ç½®å†å²æ–‡ä»¶æ±‡æ€»åˆ°ä¸»è´¦æˆ·çš„åŒä¸€ä¸ª S3 æ¡¶ä¸­ã€‚ä½†æ˜¯ï¼Œæ‚¨éœ€è¦ä¸ºæ­¤æœåŠ¡ä¸»ä½“ config.amazonaws.com å’Œæ‚¨çš„æ¬¡è¦è´¦æˆ·æˆäºˆå¯¹ä¸»è´¦æˆ· S3 æ¡¶çš„å†™è®¿é—®æƒé™ã€‚

### åŠŸèƒ½

* å½“è¿›è¡Œæ›´æ”¹æ—¶ï¼Œä¾‹å¦‚å¯¹å®‰å…¨ç»„æˆ–æ¡¶è®¿é—®æ§åˆ¶åˆ—è¡¨çš„æ›´æ”¹ â€”> ä½œä¸ºäº‹ä»¶è¢« AWS Config æ•è·
* å°†æ‰€æœ‰å†…å®¹å­˜å‚¨åœ¨ S3 æ¡¶ä¸­
* æ ¹æ®è®¾ç½®ï¼Œä¸€æ—¦å‘ç”Ÿæ›´æ”¹ï¼Œå®ƒå¯èƒ½ä¼šè§¦å‘ä¸€ä¸ª lambda å‡½æ•°æˆ–å®‰æ’ lambda å‡½æ•°å®šæœŸæŸ¥çœ‹ AWS Config è®¾ç½®
* Lambda åé¦ˆç»™ Config
* å¦‚æœè§„åˆ™è¢«ç ´åï¼ŒConfig ä¼šå¯åŠ¨ä¸€ä¸ª SNS

![](<../../../../.gitbook/assets/image (126).png>)

### Config è§„åˆ™

Config è§„åˆ™æ˜¯å¸®åŠ©æ‚¨**åœ¨èµ„æºä¸­å®æ–½ç‰¹å®šåˆè§„æ£€æŸ¥**å’Œæ§åˆ¶çš„å¥½æ–¹æ³•ï¼Œå¹¶å…è®¸æ‚¨ä¸ºæ¯ç§èµ„æºç±»å‹é‡‡ç”¨ç†æƒ³çš„éƒ¨ç½²è§„èŒƒã€‚æ¯ä¸ªè§„åˆ™**æœ¬è´¨ä¸Šæ˜¯ä¸€ä¸ª lambda å‡½æ•°**ï¼Œåœ¨è°ƒç”¨æ—¶è¯„ä¼°èµ„æºå¹¶æ‰§è¡Œä¸€äº›ç®€å•çš„é€»è¾‘ä»¥ç¡®å®šè§„åˆ™çš„åˆè§„ç»“æœã€‚**æ¯æ¬¡å¯¹æ”¯æŒçš„èµ„æºè¿›è¡Œæ›´æ”¹æ—¶**ï¼Œ**AWS Config å°†æ£€æŸ¥æ‚¨è®¾ç½®çš„ä»»ä½• config è§„åˆ™çš„åˆè§„æ€§**ã€‚\
AWS æœ‰è®¸å¤š**é¢„å®šä¹‰è§„åˆ™**ï¼Œå±äºå®‰å…¨èŒƒç•´ï¼Œå¯ä»¥ç›´æ¥ä½¿ç”¨ã€‚ä¾‹å¦‚ï¼ŒRds-storage-encryptedã€‚å®ƒæ£€æŸ¥æ‚¨çš„ RDS æ•°æ®åº“å®ä¾‹æ˜¯å¦æ¿€æ´»äº†å­˜å‚¨åŠ å¯†ã€‚Encrypted-volumesã€‚å®ƒæ£€æŸ¥æ˜¯å¦æœ‰ä»»ä½•é™„åŠ çŠ¶æ€çš„ EBS å·è¢«åŠ å¯†ã€‚

* **AWS ç®¡ç†è§„åˆ™**ï¼šä¸€ç»„é¢„å®šä¹‰è§„åˆ™ï¼Œæ¶µç›–äº†è®¸å¤šæœ€ä½³å®è·µï¼Œå› æ­¤åœ¨è®¾ç½®è‡ªå·±çš„è§„åˆ™ä¹‹å‰ï¼Œæµè§ˆè¿™äº›è§„åˆ™æ€»æ˜¯å€¼å¾—çš„ï¼Œå› ä¸ºå¯èƒ½å·²ç»å­˜åœ¨è¯¥è§„åˆ™ã€‚
* **è‡ªå®šä¹‰è§„åˆ™**ï¼šæ‚¨å¯ä»¥åˆ›å»ºè‡ªå·±çš„è§„åˆ™ä»¥æ£€æŸ¥ç‰¹å®šçš„è‡ªå®šä¹‰é…ç½®ã€‚

æ¯ä¸ªåŒºåŸŸçš„ config è§„åˆ™é™åˆ¶ä¸º 50 ä¸ªï¼Œè¶…è¿‡éœ€è¦è”ç³» AWS ä»¥å¢åŠ é™åˆ¶ã€‚\
ä¸åˆè§„ç»“æœä¸ä¼šè¢«åˆ é™¤ã€‚

{% hint style="success" %}
å­¦ä¹ å’Œç»ƒä¹  AWS Hacking:<img src="/.gitbook/assets/image.png" alt="" data-size="line">[**HackTricks Training AWS Red Team Expert (ARTE)**](https://training.hacktricks.xyz/courses/arte)<img src="/.gitbook/assets/image.png" alt="" data-size="line">\
å­¦ä¹ å’Œç»ƒä¹  GCP Hacking: <img src="/.gitbook/assets/image (2).png" alt="" data-size="line">[**HackTricks Training GCP Red Team Expert (GRTE)**<img src="/.gitbook/assets/image (2).png" alt="" data-size="line">](https://training.hacktricks.xyz/courses/grte)

<details>

<summary>æ”¯æŒ HackTricks</summary>

* æŸ¥çœ‹ [**è®¢é˜…è®¡åˆ’**](https://github.com/sponsors/carlospolop)!
* **åŠ å…¥** ğŸ’¬ [**Discord ç¾¤ç»„**](https://discord.gg/hRep4RUj7f) æˆ– [**telegram ç¾¤ç»„**](https://t.me/peass) æˆ– **å…³æ³¨** æˆ‘ä»¬çš„ **Twitter** ğŸ¦ [**@hacktricks\_live**](https://twitter.com/hacktricks\_live)**.**
* **é€šè¿‡æäº¤ PR åˆ†äº«é»‘å®¢æŠ€å·§åˆ°** [**HackTricks**](https://github.com/carlospolop/hacktricks) å’Œ [**HackTricks Cloud**](https://github.com/carlospolop/hacktricks-cloud) github ä»“åº“ã€‚

</details>
{% endhint %}
