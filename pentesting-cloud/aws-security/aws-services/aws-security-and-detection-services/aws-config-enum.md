# AWS - Config Enum

{% hint style="success" %}
å­¦ä¹ å’Œå®è·µ AWS é»‘å®¢æŠ€æœ¯ï¼š<img src="../../../../.gitbook/assets/image (1).png" alt="" data-size="line">[**HackTricks åŸ¹è®­ AWS çº¢é˜Ÿä¸“å®¶ (ARTE)**](https://training.hacktricks.xyz/courses/arte)<img src="../../../../.gitbook/assets/image (1).png" alt="" data-size="line">\
å­¦ä¹ å’Œå®è·µ GCP é»‘å®¢æŠ€æœ¯ï¼š<img src="../../../../.gitbook/assets/image (2).png" alt="" data-size="line">[**HackTricks åŸ¹è®­ GCP çº¢é˜Ÿä¸“å®¶ (GRTE)**<img src="../../../../.gitbook/assets/image (2).png" alt="" data-size="line">](https://training.hacktricks.xyz/courses/grte)

<details>

<summary>æ”¯æŒ HackTricks</summary>

* æŸ¥çœ‹ [**è®¢é˜…è®¡åˆ’**](https://github.com/sponsors/carlospolop)!
* **åŠ å…¥** ğŸ’¬ [**Discord ç¾¤ç»„**](https://discord.gg/hRep4RUj7f) æˆ– [**Telegram ç¾¤ç»„**](https://t.me/peass) æˆ– **åœ¨** **Twitter** ğŸ¦ [**@hacktricks\_live**](https://twitter.com/hacktricks\_live)** ä¸Šå…³æ³¨æˆ‘ä»¬ã€‚**
* **é€šè¿‡å‘** [**HackTricks**](https://github.com/carlospolop/hacktricks) å’Œ [**HackTricks Cloud**](https://github.com/carlospolop/hacktricks-cloud) GitHub ä»“åº“æäº¤ PR æ¥åˆ†äº«é»‘å®¢æŠ€å·§ã€‚

</details>
{% endhint %}

## AWS Config

AWS Config **æ•è·èµ„æºå˜åŒ–**ï¼Œå› æ­¤å¯¹ Config æ”¯æŒçš„ä»»ä½•èµ„æºçš„æ›´æ”¹éƒ½å¯ä»¥è¢«è®°å½•ï¼Œè¿™å°† **è®°å½•æ›´æ”¹å†…å®¹ä»¥åŠå…¶ä»–æœ‰ç”¨çš„å…ƒæ•°æ®ï¼Œæ‰€æœ‰ä¿¡æ¯éƒ½ä¿å­˜åœ¨ä¸€ä¸ªç§°ä¸ºé…ç½®é¡¹çš„æ–‡ä»¶ä¸­**ï¼Œå³ CIã€‚æ­¤æœåŠ¡æ˜¯ **åŒºåŸŸç‰¹å®šçš„**ã€‚

é…ç½®é¡¹æˆ– **CI** æ˜¯ AWS Config çš„ä¸€ä¸ªå…³é”®ç»„æˆéƒ¨åˆ†ã€‚å®ƒç”±ä¸€ä¸ª JSON æ–‡ä»¶ç»„æˆï¼Œ**åŒ…å«é…ç½®ä¿¡æ¯ã€å…³ç³»ä¿¡æ¯å’Œå…¶ä»–å…ƒæ•°æ®ï¼Œä½œä¸ºæ”¯æŒèµ„æºçš„æ—¶é—´ç‚¹å¿«ç…§è§†å›¾**ã€‚AWS Config å¯ä»¥ä¸ºèµ„æºè®°å½•çš„æ‰€æœ‰ä¿¡æ¯éƒ½åŒ…å«åœ¨ CI ä¸­ã€‚æ¯å½“æ”¯æŒçš„èµ„æºçš„é…ç½®ä»¥ä»»ä½•æ–¹å¼å‘ç”Ÿæ›´æ”¹æ—¶ï¼Œéƒ½ä¼šåˆ›å»ºä¸€ä¸ª CIã€‚é™¤äº†è®°å½•å—å½±å“èµ„æºçš„è¯¦ç»†ä¿¡æ¯å¤–ï¼ŒAWS Config è¿˜ä¼šè®°å½•ä»»ä½•ç›´æ¥ç›¸å…³èµ„æºçš„ CIï¼Œä»¥ç¡®ä¿æ›´æ”¹æ²¡æœ‰å½±å“åˆ°è¿™äº›èµ„æºã€‚

* **å…ƒæ•°æ®**ï¼šåŒ…å«æœ‰å…³é…ç½®é¡¹æœ¬èº«çš„è¯¦ç»†ä¿¡æ¯ã€‚ç‰ˆæœ¬ ID å’Œé…ç½® ID å”¯ä¸€æ ‡è¯† CIã€‚å…¶ä»–ä¿¡æ¯å¯ä»¥åŒ…æ‹¬ä¸€ä¸ª MD5Hashï¼Œå…è®¸æ‚¨ä¸å·²è®°å½•çš„ç›¸åŒèµ„æºçš„å…¶ä»– CI è¿›è¡Œæ¯”è¾ƒã€‚
* **å±æ€§**ï¼šè¿™åŒ…å«ä¸å®é™…èµ„æºç›¸å…³çš„å¸¸è§ **å±æ€§ä¿¡æ¯**ã€‚åœ¨æ­¤éƒ¨åˆ†ä¸­ï¼Œæˆ‘ä»¬è¿˜æ‹¥æœ‰ä¸€ä¸ªå”¯ä¸€çš„èµ„æº IDï¼Œä»¥åŠä¸èµ„æºç›¸å…³çš„ä»»ä½•é”®å€¼æ ‡ç­¾ã€‚èµ„æºç±»å‹ä¹Ÿä¼šåˆ—å‡ºã€‚ä¾‹å¦‚ï¼Œå¦‚æœè¿™æ˜¯ä¸€ä¸ª EC2 å®ä¾‹çš„ CIï¼Œåˆ—å‡ºçš„èµ„æºç±»å‹å¯èƒ½æ˜¯ç½‘ç»œæ¥å£æˆ–è¯¥ EC2 å®ä¾‹çš„å¼¹æ€§ IP åœ°å€ã€‚
* **å…³ç³»**ï¼šè¿™åŒ…å«èµ„æºå¯èƒ½å…·æœ‰çš„ä»»ä½•è¿æ¥ **å…³ç³»çš„ä¿¡æ¯**ã€‚å› æ­¤ï¼Œåœ¨æ­¤éƒ¨åˆ†ä¸­ï¼Œå®ƒå°†æ¸…æ¥šåœ°æè¿°è¯¥èµ„æºä¸å…¶ä»–èµ„æºä¹‹é—´çš„ä»»ä½•å…³ç³»ã€‚ä¾‹å¦‚ï¼Œå¦‚æœ CI æ˜¯é’ˆå¯¹ EC2 å®ä¾‹çš„ï¼Œå…³ç³»éƒ¨åˆ†å¯èƒ½ä¼šæ˜¾ç¤ºä¸ VPC çš„è¿æ¥ä»¥åŠ EC2 å®ä¾‹æ‰€åœ¨çš„å­ç½‘ã€‚
* **å½“å‰é…ç½®**ï¼šè¿™å°†æ˜¾ç¤ºå¦‚æœæ‚¨æ‰§è¡Œ AWS CLI çš„æè¿°æˆ–åˆ—å‡º API è°ƒç”¨æ—¶ç”Ÿæˆçš„ç›¸åŒä¿¡æ¯ã€‚AWS Config ä½¿ç”¨ç›¸åŒçš„ API è°ƒç”¨æ¥è·å–ç›¸åŒçš„ä¿¡æ¯ã€‚
* **ç›¸å…³äº‹ä»¶**ï¼šè¿™ä¸ AWS CloudTrail ç›¸å…³ã€‚è¿™å°†æ˜¾ç¤º **ä¸è§¦å‘æ­¤ CI åˆ›å»ºçš„æ›´æ”¹ç›¸å…³çš„ AWS CloudTrail äº‹ä»¶ ID**ã€‚æ¯æ¬¡å¯¹èµ„æºè¿›è¡Œæ›´æ”¹æ—¶ï¼Œéƒ½ä¼šåˆ›å»ºä¸€ä¸ªæ–°çš„ CIã€‚å› æ­¤ï¼Œå°†åˆ›å»ºä¸åŒçš„ CloudTrail äº‹ä»¶ IDã€‚

**é…ç½®å†å²**ï¼šå¾—ç›Šäºé…ç½®é¡¹ï¼Œå¯ä»¥è·å–èµ„æºçš„é…ç½®å†å²ã€‚é…ç½®å†å²æ¯ 6 å°æ—¶äº¤ä»˜ä¸€æ¬¡ï¼ŒåŒ…å«ç‰¹å®šèµ„æºç±»å‹çš„æ‰€æœ‰ CIã€‚

**é…ç½®æµ**ï¼šé…ç½®é¡¹è¢«å‘é€åˆ° SNS ä¸»é¢˜ä»¥å¯ç”¨æ•°æ®åˆ†æã€‚

**é…ç½®å¿«ç…§**ï¼šé…ç½®é¡¹ç”¨äºåˆ›å»ºæ‰€æœ‰æ”¯æŒèµ„æºçš„æ—¶é—´ç‚¹å¿«ç…§ã€‚

**S3 ç”¨äºå­˜å‚¨** é…ç½®å†å²æ–‡ä»¶å’Œæ‚¨æ•°æ®çš„ä»»ä½•é…ç½®å¿«ç…§ï¼Œæ‰€æœ‰è¿™äº›éƒ½å­˜å‚¨åœ¨ä¸€ä¸ªå•ä¸€çš„æ¡¶ä¸­ï¼Œè¯¥æ¡¶åœ¨é…ç½®è®°å½•å™¨ä¸­å®šä¹‰ã€‚å¦‚æœæ‚¨æœ‰å¤šä¸ª AWS è´¦æˆ·ï¼Œæ‚¨å¯èƒ½å¸Œæœ›å°†é…ç½®å†å²æ–‡ä»¶èšåˆåˆ°ä¸»è´¦æˆ·çš„åŒä¸€ä¸ª S3 æ¡¶ä¸­ã€‚ä½†æ˜¯ï¼Œæ‚¨éœ€è¦ä¸ºæ­¤æœåŠ¡ä¸»ä½“ config.amazonaws.com æˆäºˆå†™å…¥è®¿é—®æƒé™ï¼Œå¹¶ä¸ºæ‚¨çš„æ¬¡è¦è´¦æˆ·æˆäºˆå¯¹ä¸»è´¦æˆ· S3 æ¡¶çš„å†™å…¥è®¿é—®æƒé™ã€‚

### åŠŸèƒ½

* å½“è¿›è¡Œæ›´æ”¹æ—¶ï¼Œä¾‹å¦‚å¯¹å®‰å…¨ç»„æˆ–æ¡¶è®¿é—®æ§åˆ¶åˆ—è¡¨è¿›è¡Œæ›´æ”¹ â€”> è§¦å‘ AWS Config æ•è·çš„äº‹ä»¶
* å°†æ‰€æœ‰å†…å®¹å­˜å‚¨åœ¨ S3 æ¡¶ä¸­
* æ ¹æ®è®¾ç½®ï¼Œä¸€æ—¦å‘ç”Ÿæ›´æ”¹ï¼Œå¯èƒ½ä¼šè§¦å‘ä¸€ä¸ª lambda å‡½æ•°ï¼Œæˆ–è€…å®šæœŸè°ƒåº¦ lambda å‡½æ•°æŸ¥çœ‹ AWS Config è®¾ç½®
* Lambda å°†åé¦ˆç»™ Config
* å¦‚æœè§„åˆ™è¢«è¿åï¼ŒConfig å°†è§¦å‘ SNS

![](<../../../../.gitbook/assets/image (126).png>)

### Config è§„åˆ™

Config è§„åˆ™æ˜¯å¸®åŠ©æ‚¨ **å¼ºåˆ¶æ‰§è¡Œç‰¹å®šåˆè§„æ£€æŸ¥** **å’Œæ§åˆ¶çš„ç»ä½³æ–¹å¼**ï¼Œå¹¶å…è®¸æ‚¨ä¸ºæ¯ç§èµ„æºç±»å‹é‡‡ç”¨ç†æƒ³çš„éƒ¨ç½²è§„èŒƒã€‚æ¯ä¸ªè§„åˆ™ **æœ¬è´¨ä¸Šæ˜¯ä¸€ä¸ª lambda å‡½æ•°**ï¼Œåœ¨è°ƒç”¨æ—¶è¯„ä¼°èµ„æºå¹¶æ‰§è¡Œä¸€äº›ç®€å•é€»è¾‘ä»¥ç¡®å®šä¸è§„åˆ™çš„åˆè§„ç»“æœã€‚**æ¯æ¬¡å¯¹æ”¯æŒèµ„æºè¿›è¡Œæ›´æ”¹æ—¶ï¼ŒAWS Config å°†æ£€æŸ¥ä¸æ‚¨è®¾ç½®çš„ä»»ä½•é…ç½®è§„åˆ™çš„åˆè§„æ€§**ã€‚\
AWS æœ‰è®¸å¤š **é¢„å®šä¹‰è§„åˆ™**ï¼Œå±äºå®‰å…¨èŒƒå›´ï¼Œéšæ—¶å¯ä»¥ä½¿ç”¨ã€‚ä¾‹å¦‚ï¼ŒRds-storage-encryptedã€‚æ­¤è§„åˆ™æ£€æŸ¥æ‚¨çš„ RDS æ•°æ®åº“å®ä¾‹æ˜¯å¦å¯ç”¨äº†å­˜å‚¨åŠ å¯†ã€‚Encrypted-volumesã€‚æ­¤è§„åˆ™æ£€æŸ¥æ˜¯å¦æœ‰ä»»ä½•é™„åŠ çŠ¶æ€çš„ EBS å·è¢«åŠ å¯†ã€‚

* **AWS ç®¡ç†è§„åˆ™**ï¼šä¸€ç»„é¢„å®šä¹‰è§„åˆ™ï¼Œæ¶µç›–è®¸å¤šæœ€ä½³å®è·µï¼Œå› æ­¤åœ¨è®¾ç½®è‡ªå·±çš„è§„åˆ™ä¹‹å‰ï¼Œæµè§ˆè¿™äº›è§„åˆ™æ€»æ˜¯å€¼å¾—çš„ï¼Œå› ä¸ºè§„åˆ™å¯èƒ½å·²ç»å­˜åœ¨ã€‚
* **è‡ªå®šä¹‰è§„åˆ™**ï¼šæ‚¨å¯ä»¥åˆ›å»ºè‡ªå·±çš„è§„åˆ™ä»¥æ£€æŸ¥ç‰¹å®šçš„è‡ªå®šä¹‰é…ç½®ã€‚

æ¯ä¸ªåŒºåŸŸé™åˆ¶ 50 ä¸ªé…ç½®è§„åˆ™ï¼Œä¹‹åæ‚¨éœ€è¦è”ç³» AWS ä»¥å¢åŠ é…é¢ã€‚\
ä¸åˆè§„çš„ç»“æœä¸ä¼šè¢«åˆ é™¤ã€‚

{% hint style="success" %}
å­¦ä¹ å’Œå®è·µ AWS é»‘å®¢æŠ€æœ¯ï¼š<img src="../../../../.gitbook/assets/image (1).png" alt="" data-size="line">[**HackTricks åŸ¹è®­ AWS çº¢é˜Ÿä¸“å®¶ (ARTE)**](https://training.hacktricks.xyz/courses/arte)<img src="../../../../.gitbook/assets/image (1).png" alt="" data-size="line">\
å­¦ä¹ å’Œå®è·µ GCP é»‘å®¢æŠ€æœ¯ï¼š<img src="../../../../.gitbook/assets/image (2).png" alt="" data-size="line">[**HackTricks åŸ¹è®­ GCP çº¢é˜Ÿä¸“å®¶ (GRTE)**<img src="../../../../.gitbook/assets/image (2).png" alt="" data-size="line">](https://training.hacktricks.xyz/courses/grte)

<details>

<summary>æ”¯æŒ HackTricks</summary>

* æŸ¥çœ‹ [**è®¢é˜…è®¡åˆ’**](https://github.com/sponsors/carlospolop)!
* **åŠ å…¥** ğŸ’¬ [**Discord ç¾¤ç»„**](https://discord.gg/hRep4RUj7f) æˆ– [**Telegram ç¾¤ç»„**](https://t.me/peass) æˆ– **åœ¨** **Twitter** ğŸ¦ [**@hacktricks\_live**](https://twitter.com/hacktricks\_live)** ä¸Šå…³æ³¨æˆ‘ä»¬ã€‚**
* **é€šè¿‡å‘** [**HackTricks**](https://github.com/carlospolop/hacktricks) å’Œ [**HackTricks Cloud**](https://github.com/carlospolop/hacktricks-cloud) GitHub ä»“åº“æäº¤ PR æ¥åˆ†äº«é»‘å®¢æŠ€å·§ã€‚

</details>
{% endhint %}
