# AWS - Firewall Manager Enum

{% hint style="success" %}
Learn & practice AWS Hacking:<img src="../../../../.gitbook/assets/image (1).png" alt="" data-size="line">[**HackTricks Training AWS Red Team Expert (ARTE)**](https://training.hacktricks.xyz/courses/arte)<img src="../../../../.gitbook/assets/image (1).png" alt="" data-size="line">\
Learn & practice GCP Hacking: <img src="../../../../.gitbook/assets/image (2).png" alt="" data-size="line">[**HackTricks Training GCP Red Team Expert (GRTE)**<img src="../../../../.gitbook/assets/image (2).png" alt="" data-size="line">](https://training.hacktricks.xyz/courses/grte)

<details>

<summary>Support HackTricks</summary>

* Check the [**subscription plans**](https://github.com/sponsors/carlospolop)!
* **Join the** ğŸ’¬ [**Discord group**](https://discord.gg/hRep4RUj7f) or the [**telegram group**](https://t.me/peass) or **follow** us on **Twitter** ğŸ¦ [**@hacktricks\_live**](https://twitter.com/hacktricks\_live)**.**
* **Share hacking tricks by submitting PRs to the** [**HackTricks**](https://github.com/carlospolop/hacktricks) and [**HackTricks Cloud**](https://github.com/carlospolop/hacktricks-cloud) github repos.

</details>
{% endhint %}

## Firewall Manager

**AWS Firewall Manager**ëŠ” **AWS WAF, AWS Shield Advanced, Amazon VPC ë³´ì•ˆ ê·¸ë£¹ ë° ë„¤íŠ¸ì›Œí¬ ì•¡ì„¸ìŠ¤ ì œì–´ ëª©ë¡(ACL), AWS ë„¤íŠ¸ì›Œí¬ ë°©í™”ë²½, AWS Route 53 Resolver DNS ë°©í™”ë²½ ë° íƒ€ì‚¬ ë°©í™”ë²½**ì˜ ê´€ë¦¬ ë° ìœ ì§€ ê´€ë¦¬ë¥¼ ê°„ì†Œí™”í•©ë‹ˆë‹¤. ì´ ì„œë¹„ìŠ¤ëŠ” ë°©í™”ë²½ ê·œì¹™, Shield Advanced ë³´í˜¸, VPC ë³´ì•ˆ ê·¸ë£¹ ë° ë„¤íŠ¸ì›Œí¬ ë°©í™”ë²½ ì„¤ì •ì„ í•œ ë²ˆë§Œ êµ¬ì„±í•  ìˆ˜ ìˆê²Œ í•˜ë©°, **ì´ ê·œì¹™ê³¼ ë³´í˜¸ë¥¼ ê³„ì • ë° ë¦¬ì†ŒìŠ¤ ì „ë°˜ì— ìë™ìœ¼ë¡œ ì ìš©**í•©ë‹ˆë‹¤. ìƒˆë¡œ ì¶”ê°€ëœ ë¦¬ì†ŒìŠ¤ë„ í¬í•¨ë©ë‹ˆë‹¤.

ì´ ì„œë¹„ìŠ¤ëŠ” **íŠ¹ì • ë¦¬ì†ŒìŠ¤ë¥¼ í•¨ê»˜ ê·¸ë£¹í™”í•˜ê³  ë³´í˜¸**í•  ìˆ˜ ìˆëŠ” ê¸°ëŠ¥ì„ ì œê³µí•©ë‹ˆë‹¤. ì˜ˆë¥¼ ë“¤ì–´, ê³µí†µ íƒœê·¸ë¥¼ ê³µìœ í•˜ëŠ” ë¦¬ì†ŒìŠ¤ë‚˜ ëª¨ë“  CloudFront ë°°í¬ë¥¼ ê·¸ë£¹í™”í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤. Firewall Managerì˜ ì£¼ìš” ì¥ì  ì¤‘ í•˜ë‚˜ëŠ” **ìƒˆë¡œ ì¶”ê°€ëœ ë¦¬ì†ŒìŠ¤ì— ëŒ€í•œ ë³´í˜¸ë¥¼ ìë™ìœ¼ë¡œ í™•ì¥**í•  ìˆ˜ ìˆë‹¤ëŠ” ì ì…ë‹ˆë‹¤.

**ê·œì¹™ ê·¸ë£¹**(WAF ê·œì¹™ì˜ ëª¨ìŒ)ì€ AWS Firewall Manager ì •ì±…ì— í†µí•©ë  ìˆ˜ ìˆìœ¼ë©°, ì´ëŠ” CloudFront ë°°í¬ ë˜ëŠ” ì• í”Œë¦¬ì¼€ì´ì…˜ ë¡œë“œ ë°¸ëŸ°ì„œì™€ ê°™ì€ íŠ¹ì • AWS ë¦¬ì†ŒìŠ¤ì— ì—°ê²°ë©ë‹ˆë‹¤.

AWS Firewall ManagerëŠ” ë³´ì•ˆ ê·¸ë£¹ ì •ì±…ì˜ êµ¬ì„± ë° ê´€ë¦¬ë¥¼ ë‹¨ìˆœí™”í•˜ê¸° ìœ„í•´ **ê´€ë¦¬í˜• ì• í”Œë¦¬ì¼€ì´ì…˜ ë° í”„ë¡œí† ì½œ ëª©ë¡**ì„ ì œê³µí•©ë‹ˆë‹¤. ì´ëŸ¬í•œ ëª©ë¡ì„ í†µí•´ ì •ì±…ì—ì„œ í—ˆìš©ë˜ê±°ë‚˜ ê±°ë¶€ë˜ëŠ” í”„ë¡œí† ì½œ ë° ì• í”Œë¦¬ì¼€ì´ì…˜ì„ ì •ì˜í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤. ê´€ë¦¬í˜• ëª©ë¡ì—ëŠ” ë‘ ê°€ì§€ ìœ í˜•ì´ ìˆìŠµë‹ˆë‹¤:

* **Firewall Manager ê´€ë¦¬ ëª©ë¡**: ì´ ëª©ë¡ì—ëŠ” **FMS-Default-Public-Access-Apps-Allowed**, **FMS-Default-Protocols-Allowed** ë° **FMS-Default-Protocols-Allowed**ê°€ í¬í•¨ë©ë‹ˆë‹¤. ì´ ëª©ë¡ì€ Firewall Managerì— ì˜í•´ ê´€ë¦¬ë˜ë©° ì¼ë°˜ ëŒ€ì¤‘ì—ê²Œ í—ˆìš©ë˜ê±°ë‚˜ ê±°ë¶€ë˜ì–´ì•¼ í•˜ëŠ” ì¼ë°˜ì ìœ¼ë¡œ ì‚¬ìš©ë˜ëŠ” ì• í”Œë¦¬ì¼€ì´ì…˜ ë° í”„ë¡œí† ì½œì„ í¬í•¨í•©ë‹ˆë‹¤. ì´ ëª©ë¡ì€ í¸ì§‘í•˜ê±°ë‚˜ ì‚­ì œí•  ìˆ˜ ì—†ì§€ë§Œ, ë²„ì „ì„ ì„ íƒí•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.
* **ì‚¬ìš©ì ì •ì˜ ê´€ë¦¬ ëª©ë¡**: ì´ ëª©ë¡ì€ ì‚¬ìš©ìê°€ ì§ì ‘ ê´€ë¦¬í•©ë‹ˆë‹¤. ì¡°ì§ì˜ ìš”êµ¬ì— ë§ì¶˜ ì‚¬ìš©ì ì •ì˜ ì• í”Œë¦¬ì¼€ì´ì…˜ ë° í”„ë¡œí† ì½œ ëª©ë¡ì„ ìƒì„±í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤. Firewall Manager ê´€ë¦¬ ëª©ë¡ê³¼ ë‹¬ë¦¬ ì´ ëª©ë¡ì€ ë²„ì „ì´ ì—†ì§€ë§Œ, ì‚¬ìš©ì ì •ì˜ ëª©ë¡ì— ëŒ€í•´ ì™„ì „í•œ ì œì–´ë¥¼ ì œê³µí•˜ì—¬ í•„ìš”ì— ë”°ë¼ ìƒì„±, í¸ì§‘ ë° ì‚­ì œí•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.

**Firewall Manager ì •ì±…ì€ ê·œì¹™ ê·¸ë£¹ì— ëŒ€í•´ "ì°¨ë‹¨" ë˜ëŠ” "ê³„ì‚°" ì‘ì—…ë§Œ í—ˆìš©**í•˜ë©° "í—ˆìš©" ì˜µì…˜ì€ ì—†ìŠµë‹ˆë‹¤.

### Prerequisites

Firewall Managerë¥¼ êµ¬ì„±í•˜ì—¬ ì¡°ì§ì˜ ë¦¬ì†ŒìŠ¤ë¥¼ íš¨ê³¼ì ìœ¼ë¡œ ë³´í˜¸í•˜ê¸° ìœ„í•´ ë‹¤ìŒì˜ í•„ìˆ˜ ë‹¨ê³„ë¥¼ ì™„ë£Œí•´ì•¼ í•©ë‹ˆë‹¤. ì´ëŸ¬í•œ ë‹¨ê³„ëŠ” Firewall Managerê°€ ë³´ì•ˆ ì •ì±…ì„ ì‹œí–‰í•˜ê³  AWS í™˜ê²½ ì „ë°˜ì— ê±¸ì³ ì¤€ìˆ˜ë¥¼ ë³´ì¥í•˜ëŠ” ë° í•„ìš”í•œ ê¸°ë³¸ ì„¤ì •ì„ ì œê³µí•©ë‹ˆë‹¤:

1. **AWS Organizationsì— ê°€ì…í•˜ê³  êµ¬ì„±**: AWS ê³„ì •ì´ AWS Firewall Manager ì •ì±…ì´ êµ¬í˜„ë  AWS Organizations ì¡°ì§ì˜ ì¼ë¶€ì¸ì§€ í™•ì¸í•©ë‹ˆë‹¤. ì´ë¥¼ í†µí•´ ì¡°ì§ ë‚´ ì—¬ëŸ¬ AWS ê³„ì •ì— ê±¸ì³ ë¦¬ì†ŒìŠ¤ ë° ì •ì±…ì„ ì¤‘ì•™ ì§‘ì¤‘ì‹ìœ¼ë¡œ ê´€ë¦¬í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.
2. **AWS Firewall Manager ê¸°ë³¸ ê´€ë¦¬ì ê³„ì • ìƒì„±**: Firewall Manager ë³´ì•ˆ ì •ì±…ì„ ê´€ë¦¬í•˜ê¸° ìœ„í•´ íŠ¹ë³„íˆ ê¸°ë³¸ ê´€ë¦¬ì ê³„ì •ì„ ì„¤ì •í•©ë‹ˆë‹¤. ì´ ê³„ì •ì€ ì¡°ì§ ì „ë°˜ì— ê±¸ì³ ë³´ì•ˆ ì •ì±…ì„ êµ¬ì„±í•˜ê³  ì‹œí–‰í•˜ëŠ” ì±…ì„ì„ ì§‘ë‹ˆë‹¤. ì¡°ì§ì˜ ê´€ë¦¬ ê³„ì •ë§Œì´ Firewall Manager ê¸°ë³¸ ê´€ë¦¬ì ê³„ì •ì„ ìƒì„±í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.
3. **AWS Config í™œì„±í™”**: AWS Configë¥¼ í™œì„±í™”í•˜ì—¬ Firewall Managerì— ë³´ì•ˆ ì •ì±…ì„ íš¨ê³¼ì ìœ¼ë¡œ ì‹œí–‰í•˜ëŠ” ë° í•„ìš”í•œ êµ¬ì„± ë°ì´í„° ë° í†µì°°ë ¥ì„ ì œê³µí•©ë‹ˆë‹¤. AWS ConfigëŠ” ë¦¬ì†ŒìŠ¤ êµ¬ì„± ë° ë³€ê²½ ì‚¬í•­ì„ ë¶„ì„, ê°ì‚¬, ëª¨ë‹ˆí„°ë§í•˜ê³  ê°ì‚¬í•˜ëŠ” ë° ë„ì›€ì„ ì£¼ì–´ ë³´ì•ˆ ê´€ë¦¬ë¥¼ ê°œì„ í•©ë‹ˆë‹¤.
4. **íƒ€ì‚¬ ì •ì±…ì˜ ê²½ìš° AWS Marketplaceì—ì„œ êµ¬ë…í•˜ê³  íƒ€ì‚¬ ì„¤ì • êµ¬ì„±**: íƒ€ì‚¬ ë°©í™”ë²½ ì •ì±…ì„ ì‚¬ìš©í•  ê³„íšì´ë¼ë©´ AWS Marketplaceì—ì„œ êµ¬ë…í•˜ê³  í•„ìš”í•œ ì„¤ì •ì„ êµ¬ì„±í•©ë‹ˆë‹¤. ì´ ë‹¨ê³„ëŠ” Firewall Managerê°€ ì‹ ë¢°í•  ìˆ˜ ìˆëŠ” íƒ€ì‚¬ ê³µê¸‰ì—…ì²´ì˜ ì •ì±…ì„ í†µí•©í•˜ê³  ì‹œí–‰í•  ìˆ˜ ìˆë„ë¡ ë³´ì¥í•©ë‹ˆë‹¤.
5. **ë„¤íŠ¸ì›Œí¬ ë°©í™”ë²½ ë° DNS ë°©í™”ë²½ ì •ì±…ì˜ ê²½ìš° ë¦¬ì†ŒìŠ¤ ê³µìœ  í™œì„±í™”**: ë„¤íŠ¸ì›Œí¬ ë°©í™”ë²½ ë° DNS ë°©í™”ë²½ ì •ì±…ì— ëŒ€í•´ ë¦¬ì†ŒìŠ¤ ê³µìœ ë¥¼ í™œì„±í™”í•©ë‹ˆë‹¤. ì´ë¥¼ í†µí•´ Firewall Managerê°€ ì¡°ì§ì˜ VPC ë° DNS í•´ìƒë„ì— ë°©í™”ë²½ ë³´í˜¸ë¥¼ ì ìš©í•  ìˆ˜ ìˆì–´ ë„¤íŠ¸ì›Œí¬ ë³´ì•ˆì„ ê°•í™”í•©ë‹ˆë‹¤.
6. **ê¸°ë³¸ì ìœ¼ë¡œ ë¹„í™œì„±í™”ëœ ë¦¬ì „ì—ì„œ AWS Firewall Manager ì‚¬ìš©**: ê¸°ë³¸ì ìœ¼ë¡œ ë¹„í™œì„±í™”ëœ AWS ë¦¬ì „ì—ì„œ Firewall Managerë¥¼ ì‚¬ìš©í•˜ë ¤ëŠ” ê²½ìš° í•´ë‹¹ ë¦¬ì „ì—ì„œ ê¸°ëŠ¥ì„ í™œì„±í™”í•˜ê¸° ìœ„í•œ í•„ìš”í•œ ë‹¨ê³„ë¥¼ ìˆ˜í–‰í•´ì•¼ í•©ë‹ˆë‹¤. ì´ë¥¼ í†µí•´ ì¡°ì§ì´ ìš´ì˜í•˜ëŠ” ëª¨ë“  ë¦¬ì „ì—ì„œ ì¼ê´€ëœ ë³´ì•ˆ ì‹œí–‰ì„ ë³´ì¥í•©ë‹ˆë‹¤.

ìì„¸í•œ ë‚´ìš©ì€ ë‹¤ìŒì„ í™•ì¸í•˜ì„¸ìš”: [AWS Firewall Manager AWS WAF ì •ì±… ì‹œì‘í•˜ê¸°](https://docs.aws.amazon.com/waf/latest/developerguide/getting-started-fms.html).

### Types of protection policies

AWS Firewall ManagerëŠ” ì¡°ì§ì˜ ì¸í”„ë¼ì˜ ë‹¤ì–‘í•œ ì¸¡ë©´ì— ê±¸ì³ ë³´ì•ˆ í†µì œë¥¼ ì‹œí–‰í•˜ê¸° ìœ„í•´ ì—¬ëŸ¬ ìœ í˜•ì˜ ì •ì±…ì„ ê´€ë¦¬í•©ë‹ˆë‹¤:

1. **AWS WAF ì •ì±…**: ì´ ì •ì±… ìœ í˜•ì€ AWS WAF ë° AWS WAF Classicì„ ëª¨ë‘ ì§€ì›í•©ë‹ˆë‹¤. ì •ì±…ì— ì˜í•´ ë³´í˜¸ë˜ëŠ” ë¦¬ì†ŒìŠ¤ë¥¼ ì •ì˜í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤. AWS WAF ì •ì±…ì˜ ê²½ìš° ì›¹ ACLì—ì„œ ë¨¼ì € ì‹¤í–‰í•  ê·œì¹™ ê·¸ë£¹ ì„¸íŠ¸ë¥¼ ì§€ì •í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤. ë˜í•œ, ê³„ì • ì†Œìœ ìëŠ” ì´ëŸ¬í•œ ì„¸íŠ¸ ì‚¬ì´ì— ì‹¤í–‰í•  ê·œì¹™ ë° ê·œì¹™ ê·¸ë£¹ì„ ì¶”ê°€í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.
2. **Shield Advanced ì •ì±…**: ì´ ì •ì±…ì€ ì§€ì •ëœ ë¦¬ì†ŒìŠ¤ ìœ í˜•ì— ëŒ€í•´ ì¡°ì§ ì „ë°˜ì— Shield Advanced ë³´í˜¸ë¥¼ ì ìš©í•©ë‹ˆë‹¤. DDoS ê³µê²© ë° ê¸°íƒ€ ìœ„í˜‘ìœ¼ë¡œë¶€í„° ë³´í˜¸í•˜ëŠ” ë° ë„ì›€ì„ ì¤ë‹ˆë‹¤.
3. **Amazon VPC ë³´ì•ˆ ê·¸ë£¹ ì •ì±…**: ì´ ì •ì±…ì„ í†µí•´ ì¡°ì§ ì „ë°˜ì—ì„œ ì‚¬ìš©ë˜ëŠ” ë³´ì•ˆ ê·¸ë£¹ì„ ê´€ë¦¬í•˜ê³  AWS í™˜ê²½ ì „ë°˜ì— ê±¸ì³ ë„¤íŠ¸ì›Œí¬ ì•¡ì„¸ìŠ¤ë¥¼ ì œì–´í•˜ê¸° ìœ„í•´ ê¸°ë³¸ ê·œì¹™ ì„¸íŠ¸ë¥¼ ì‹œí–‰í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.
4. **Amazon VPC ë„¤íŠ¸ì›Œí¬ ì•¡ì„¸ìŠ¤ ì œì–´ ëª©ë¡(ACL) ì •ì±…**: ì´ ì •ì±… ìœ í˜•ì€ ì¡°ì§ì—ì„œ ì‚¬ìš©ë˜ëŠ” ë„¤íŠ¸ì›Œí¬ ACLì„ ì œì–´í•  ìˆ˜ ìˆê²Œ í•˜ì—¬ AWS í™˜ê²½ ì „ë°˜ì— ê±¸ì³ ê¸°ë³¸ ë„¤íŠ¸ì›Œí¬ ACL ì„¸íŠ¸ë¥¼ ì‹œí–‰í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.
5. **ë„¤íŠ¸ì›Œí¬ ë°©í™”ë²½ ì •ì±…**: ì´ ì •ì±…ì€ ì¡°ì§ì˜ VPCì— AWS ë„¤íŠ¸ì›Œí¬ ë°©í™”ë²½ ë³´í˜¸ë¥¼ ì ìš©í•˜ì—¬ ë¯¸ë¦¬ ì •ì˜ëœ ê·œì¹™ì— ë”°ë¼ íŠ¸ë˜í”½ì„ í•„í„°ë§í•˜ì—¬ ë„¤íŠ¸ì›Œí¬ ë³´ì•ˆì„ ê°•í™”í•©ë‹ˆë‹¤.
6. **Amazon Route 53 Resolver DNS ë°©í™”ë²½ ì •ì±…**: ì´ ì •ì±…ì€ ì¡°ì§ì˜ VPCì— DNS ë°©í™”ë²½ ë³´í˜¸ë¥¼ ì ìš©í•˜ì—¬ ì•…ì„± ë„ë©”ì¸ í•´ìƒë„ ì‹œë„ë¥¼ ì°¨ë‹¨í•˜ê³  DNS íŠ¸ë˜í”½ì— ëŒ€í•œ ë³´ì•ˆ ì •ì±…ì„ ì‹œí–‰í•˜ëŠ” ë° ë„ì›€ì„ ì¤ë‹ˆë‹¤.
7. **íƒ€ì‚¬ ë°©í™”ë²½ ì •ì±…**: ì´ ì •ì±… ìœ í˜•ì€ AWS Marketplace ì½˜ì†”ì„ í†µí•´ êµ¬ë… ê°€ëŠ¥í•œ íƒ€ì‚¬ ë°©í™”ë²½ì˜ ë³´í˜¸ë¥¼ ì ìš©í•©ë‹ˆë‹¤. ì´ë¥¼ í†µí•´ ì‹ ë¢°í•  ìˆ˜ ìˆëŠ” ê³µê¸‰ì—…ì²´ì˜ ì¶”ê°€ ë³´ì•ˆ ì¡°ì¹˜ë¥¼ AWS í™˜ê²½ì— í†µí•©í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.
1. **Palo Alto Networks Cloud NGFW ì •ì±…**: ì´ ì •ì±…ì€ ì¡°ì§ì˜ VPCì— Palo Alto Networks Cloud ì°¨ì„¸ëŒ€ ë°©í™”ë²½(NGFW) ë³´í˜¸ ë° ê·œì¹™ ìŠ¤íƒì„ ì ìš©í•˜ì—¬ ê³ ê¸‰ ìœ„í˜‘ ë°©ì§€ ë° ì• í”Œë¦¬ì¼€ì´ì…˜ ìˆ˜ì¤€ ë³´ì•ˆ í†µì œë¥¼ ì œê³µí•©ë‹ˆë‹¤.
2. **Fortigate Cloud Native Firewall (CNF) as a Service ì •ì±…**: ì´ ì •ì±…ì€ Fortigate Cloud Native Firewall (CNF) as a Service ë³´í˜¸ë¥¼ ì ìš©í•˜ì—¬ í´ë¼ìš°ë“œ ì¸í”„ë¼ì— ë§ì¶˜ ì—…ê³„ ìµœê³ ì˜ ìœ„í˜‘ ë°©ì§€, ì›¹ ì• í”Œë¦¬ì¼€ì´ì…˜ ë°©í™”ë²½(WAF) ë° API ë³´í˜¸ë¥¼ ì œê³µí•©ë‹ˆë‹¤.

### Administrator accounts

AWS Firewall ManagerëŠ” ê´€ë¦¬ ë²”ìœ„ì™€ ë‘ ê°€ì§€ ìœ í˜•ì˜ ê´€ë¦¬ì ê³„ì •ì„ í†µí•´ ì¡°ì§ ë‚´ ë°©í™”ë²½ ë¦¬ì†ŒìŠ¤ë¥¼ ê´€ë¦¬í•˜ëŠ” ìœ ì—°ì„±ì„ ì œê³µí•©ë‹ˆë‹¤.

**ê´€ë¦¬ ë²”ìœ„ëŠ” Firewall Manager ê´€ë¦¬ìê°€ ê´€ë¦¬í•  ìˆ˜ ìˆëŠ” ë¦¬ì†ŒìŠ¤ë¥¼ ì •ì˜í•©ë‹ˆë‹¤**. AWS Organizations ê´€ë¦¬ ê³„ì •ì´ ì¡°ì§ì„ Firewall Managerì— ì˜¨ë³´ë”©í•œ í›„, ì¶”ê°€ ê´€ë¦¬ìë¥¼ ìƒì„±í•  ìˆ˜ ìˆìœ¼ë©°, ì´ë“¤ì€ ì„œë¡œ ë‹¤ë¥¸ ê´€ë¦¬ ë²”ìœ„ë¥¼ ê°€ì§ˆ ìˆ˜ ìˆìŠµë‹ˆë‹¤. ì´ëŸ¬í•œ ë²”ìœ„ì—ëŠ” ë‹¤ìŒì´ í¬í•¨ë  ìˆ˜ ìˆìŠµë‹ˆë‹¤:

* ê´€ë¦¬ìê°€ ì •ì±…ì„ ì ìš©í•  ìˆ˜ ìˆëŠ” ê³„ì • ë˜ëŠ” ì¡°ì§ ë‹¨ìœ„(OU).
* ê´€ë¦¬ìê°€ ì‘ì—…ì„ ìˆ˜í–‰í•  ìˆ˜ ìˆëŠ” ë¦¬ì „.
* ê´€ë¦¬ìê°€ ê´€ë¦¬í•  ìˆ˜ ìˆëŠ” Firewall Manager ì •ì±… ìœ í˜•.

ê´€ë¦¬ ë²”ìœ„ëŠ” **ì „ì²´ ë˜ëŠ” ì œí•œì **ì¼ ìˆ˜ ìˆìŠµë‹ˆë‹¤. ì „ì²´ ë²”ìœ„ëŠ” ê´€ë¦¬ìê°€ **ëª¨ë“  ì§€ì •ëœ ë¦¬ì†ŒìŠ¤ ìœ í˜•, ë¦¬ì „ ë° ì •ì±… ìœ í˜•**ì— ì ‘ê·¼í•  ìˆ˜ ìˆë„ë¡ í•©ë‹ˆë‹¤. ë°˜ë©´, **ì œí•œì  ë²”ìœ„ëŠ” ë¦¬ì†ŒìŠ¤, ë¦¬ì „ ë˜ëŠ” ì •ì±… ìœ í˜•ì˜ í•˜ìœ„ ì§‘í•©ì— ëŒ€í•´ì„œë§Œ ê´€ë¦¬ ê¶Œí•œì„ ì œê³µí•©ë‹ˆë‹¤**. ê´€ë¦¬ìê°€ ì—­í• ì„ íš¨ê³¼ì ìœ¼ë¡œ ìˆ˜í–‰í•˜ëŠ” ë° í•„ìš”í•œ ê¶Œí•œë§Œ ë¶€ì—¬í•˜ëŠ” ê²ƒì´ ì¢‹ìŠµë‹ˆë‹¤. ì´ëŸ¬í•œ ê´€ë¦¬ ë²”ìœ„ ì¡°ê±´ì˜ ì¡°í•©ì„ ê´€ë¦¬ìì—ê²Œ ì ìš©í•˜ì—¬ ìµœì†Œ ê¶Œí•œ ì›ì¹™ì„ ì¤€ìˆ˜í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.

ë‘ ê°€ì§€ ìœ í˜•ì˜ ê´€ë¦¬ì ê³„ì •ì´ ìˆìœ¼ë©°, ê°ê° íŠ¹ì • ì—­í• ê³¼ ì±…ì„ì„ ìˆ˜í–‰í•©ë‹ˆë‹¤:

* **ê¸°ë³¸ ê´€ë¦¬ì:**
* ê¸°ë³¸ ê´€ë¦¬ì ê³„ì •ì€ AWS Organizations ì¡°ì§ì˜ ê´€ë¦¬ ê³„ì •ì— ì˜í•´ Firewall Manager ì˜¨ë³´ë”© ê³¼ì •ì—ì„œ ìƒì„±ë©ë‹ˆë‹¤.
* ì´ ê³„ì •ì€ íƒ€ì‚¬ ë°©í™”ë²½ì„ ê´€ë¦¬í•  ìˆ˜ ìˆëŠ” ëŠ¥ë ¥ì„ ê°€ì§€ë©° ì „ì²´ ê´€ë¦¬ ë²”ìœ„ë¥¼ ê°€ì§‘ë‹ˆë‹¤.
* ì¡°ì§ ì „ë°˜ì— ê±¸ì³ ë³´ì•ˆ ì •ì±…ì„ êµ¬ì„±í•˜ê³  ì‹œí–‰í•˜ëŠ” ì±…ì„ì„ ì§€ëŠ” Firewall Managerì˜ ì£¼ìš” ê´€ë¦¬ì ê³„ì •ì…ë‹ˆë‹¤.
* ê¸°ë³¸ ê´€ë¦¬ìëŠ” ëª¨ë“  ë¦¬ì†ŒìŠ¤ ìœ í˜• ë° ê´€ë¦¬ ê¸°ëŠ¥ì— ëŒ€í•œ ì „ì²´ ì ‘ê·¼ ê¶Œí•œì„ ê°€ì§€ì§€ë§Œ, ì¡°ì§ ë‚´ì—ì„œ ì—¬ëŸ¬ ê´€ë¦¬ìê°€ ì‚¬ìš©ë˜ëŠ” ê²½ìš° ë‹¤ë¥¸ ê´€ë¦¬ìì™€ ë™ë“±í•œ ë™ë£Œ ìˆ˜ì¤€ì—ì„œ ìš´ì˜ë©ë‹ˆë‹¤.
* **Firewall Manager ê´€ë¦¬ì:**
* ì´ëŸ¬í•œ ê´€ë¦¬ìëŠ” AWS Organizations ê´€ë¦¬ ê³„ì •ì— ì˜í•´ ì •ì˜ëœ ê´€ë¦¬ ë²”ìœ„ ë‚´ì—ì„œ ë¦¬ì†ŒìŠ¤ë¥¼ ê´€ë¦¬í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.
* Firewall Manager ê´€ë¦¬ìëŠ” ì¡°ì§ ë‚´ì—ì„œ íŠ¹ì • ì—­í• ì„ ìˆ˜í–‰í•˜ê¸° ìœ„í•´ ìƒì„±ë˜ì–´ ì±…ì„ì„ ìœ„ì„í•˜ë©´ì„œ ë³´ì•ˆ ë° ì¤€ìˆ˜ ê¸°ì¤€ì„ ìœ ì§€í•©ë‹ˆë‹¤.
* ìƒì„± ì‹œ Firewall ManagerëŠ” AWS Organizationsì— í™•ì¸í•˜ì—¬ ê³„ì •ì´ ì´ë¯¸ ìœ„ì„ëœ ê´€ë¦¬ì ì—¬ë¶€ë¥¼ í™•ì¸í•©ë‹ˆë‹¤. ê·¸ë ‡ì§€ ì•Šì€ ê²½ìš°, Firewall ManagerëŠ” Organizationsì— í˜¸ì¶œí•˜ì—¬ í•´ë‹¹ ê³„ì •ì„ Firewall Managerì˜ ìœ„ì„ëœ ê´€ë¦¬ìë¡œ ì§€ì •í•©ë‹ˆë‹¤.

ì´ëŸ¬í•œ ê´€ë¦¬ì ê³„ì •ì„ ê´€ë¦¬í•˜ëŠ” ê²ƒì€ Firewall Manager ë‚´ì—ì„œ ìƒì„±í•˜ê³  ì¡°ì§ì˜ ë³´ì•ˆ ìš”êµ¬ ì‚¬í•­ ë° ìµœì†Œ ê¶Œí•œ ì›ì¹™ì— ë”°ë¼ ê´€ë¦¬ ë²”ìœ„ë¥¼ ì •ì˜í•˜ëŠ” ê²ƒì„ í¬í•¨í•©ë‹ˆë‹¤. ì ì ˆí•œ ê´€ë¦¬ ì—­í• ì„ í• ë‹¹í•¨ìœ¼ë¡œì¨ ì¡°ì§ì€ íš¨ê³¼ì ì¸ ë³´ì•ˆ ê´€ë¦¬ë¥¼ ë³´ì¥í•˜ë©´ì„œ ë¯¼ê°í•œ ë¦¬ì†ŒìŠ¤ì— ëŒ€í•œ ì ‘ê·¼ì„ ì„¸ë°€í•˜ê²Œ ì œì–´í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.

**ì¡°ì§ ë‚´ì—ì„œ Firewall Manager ê¸°ë³¸ ê´€ë¦¬ì ì—­í• ì„ ìˆ˜í–‰í•  ìˆ˜ ìˆëŠ” ê³„ì •ì€ í•˜ë‚˜ë§Œ ì¡´ì¬í•  ìˆ˜ ìˆë‹¤ëŠ” ì ì„ ê°•ì¡°í•˜ëŠ” ê²ƒì´ ì¤‘ìš”í•©ë‹ˆë‹¤.** ì´ëŠ” "**ë¨¼ì € ë“¤ì–´ì˜¨ ê²ƒì´ ë‚˜ì¤‘ì— ë‚˜ê°„ë‹¤**"ëŠ” ì›ì¹™ì„ ì¤€ìˆ˜í•©ë‹ˆë‹¤. ìƒˆë¡œìš´ ê¸°ë³¸ ê´€ë¦¬ìë¥¼ ì§€ì •í•˜ë ¤ë©´ ì¼ë ¨ì˜ ë‹¨ê³„ë¥¼ ë”°ë¼ì•¼ í•©ë‹ˆë‹¤:

* ë¨¼ì €, ê° Firewall Administrator ê´€ë¦¬ì ê³„ì •ì€ ìì‹ ì˜ ê³„ì •ì„ ì² íšŒí•´ì•¼ í•©ë‹ˆë‹¤.
* ê·¸ëŸ° ë‹¤ìŒ, ê¸°ì¡´ ê¸°ë³¸ ê´€ë¦¬ìëŠ” ìì‹ ì˜ ê³„ì •ì„ ì² íšŒí•˜ì—¬ ì¡°ì§ì„ Firewall Managerì—ì„œ íš¨ê³¼ì ìœ¼ë¡œ ì˜¤í”„ë³´ë”©í•©ë‹ˆë‹¤. ì´ ê³¼ì •ì€ ì² íšŒëœ ê³„ì •ì— ì˜í•´ ìƒì„±ëœ ëª¨ë“  Firewall Manager ì •ì±…ì˜ ì‚­ì œë¡œ ì´ì–´ì§‘ë‹ˆë‹¤.
* ë§ˆì§€ë§‰ìœ¼ë¡œ, AWS Organizations ê´€ë¦¬ ê³„ì •ì´ Firewall Manager ê¸°ë³¸ ê´€ë¦¬ìë¥¼ ì§€ì •í•´ì•¼ í•©ë‹ˆë‹¤.

## Enumeration
```
# Users/Administrators

## Get the AWS Organizations account that is associated with AWS Firewall Manager as the AWS Firewall Manager default administrator
aws fms get-admin-account

## List of Firewall Manager administrators within the organization
aws fms list-admin-accounts-for-organization # ReadOnlyAccess policy is not enough for this

## Return a list of the member accounts in the FM administrator's AWS organization
aws fms list-member-accounts # Only a Firewall Manager administrator or the Organization's management account can make this request

## List the accounts that are managing the specified AWS Organizations member account
aws fms list-admins-managing-account # ReadOnlyAccess policy is not enough for this

# Resources

## Get the resources that a Firewall Manager administrator can manage
aws fms get-admin-scope --admin-account <value> # ReadOnlyAccess policy is not enough for this

## Returns the summary of the resource sets used
aws fms list-resource-sets # ReadOnlyAccess policy is not enough for this

## Get information about a specific resource set
aws fms get-resource-set --identifier <value>  # ReadOnlyAccess policy is not enough for this

## Retrieve the list of tags for a given resource
aws fms list-tags-for-resource --resource-arn <value>

## List of the resources in the AWS Organization's accounts that are available to be associated with a FM resource set. Only one account is supported per request.
aws fms list-compliance-status --member-account-ids <value> --resource-type <value> # ReadOnlyAccess policy is not enough for this

## List the resources that are currently associated to a resource set
aws fms list-resource-set-resources --identifier <value> # ReadOnlyAccess policy is not enough for this

# Policies

## Returns the list of policies
aws fms list-policies

## Get information about the specified AWS Firewall Manager policy
aws fms get-policy --policy-id <value>

## List all of the third-party firewall policies that are associated with the third-party firewall administrator's account
aws fms list-third-party-firewall-firewall-policies --third-party-firewall <PALO_ALTO_NETWORKS_CLOUD_NGFW|FORTIGATE_CLOUD_NATIVE_FIREWALL> # ReadOnlyAccess policy is not enough for this

# AppsList

## Return a list of apps list
aws fms list-apps-lists --max-results [1-100]

## Get information about the specified AWS Firewall Manager applications list
aws fms get-apps-list --list-id <value>

# Protocols

## Get the details of the Firewall Manager protocols list.
aws fms list-protocols-lists

## Get information about the specified AWS Firewall Manager Protocols list
aws fms get-protocols-list --list-id <value>

# Compliance

## Return a summary of which member accounts are protected by the specified policy
aws fms list-compliance-status --policy-id <policy-id>

## Get detailed compliance information about the specified member account (resources that are in and out of compliance with the specified policy)
aws fms get-compliance-detail --policy-id <value> --member-account <value>

# Other useful info

## Get information about the SNS topic that is used to record AWS Firewall Manager SNS logs (if any)
aws fms get-notification-channel

## Get policy-level attack summary information in the event of a potential DDoS attack
aws fms get-protection-status --policy-id <value> # Just for Shield Advanced policy

## Get the onboarding status of a Firewall Manager admin account to third-party firewall vendor tenant.
aws fms get-third-party-firewall-association-status --third-party-firewall <PALO_ALTO_NETWORKS_CLOUD_NGFW|FORTIGATE_CLOUD_NATIVE_FIREWALL> # ReadOnlyAccess policy is not enough for this

## Get violations' details for a resource based on the specified AWS Firewall Manager policy and AWS account.
aws fms get-violation-details --policy-id <value> --member-account <value> --resource-id <value> --resource-type <value>
```
## Post Exploitation / Bypass Detection

### `organizations:DescribeOrganization` & (`fms:AssociateAdminAccount`, `fms:DisassociateAdminAccount`, `fms:PutAdminAccount`)

**`fms:AssociateAdminAccount`** ê¶Œí•œì„ ê°€ì§„ ê³µê²©ìëŠ” Firewall Manager ê¸°ë³¸ ê´€ë¦¬ì ê³„ì •ì„ ì„¤ì •í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤. **`fms:PutAdminAccount`** ê¶Œí•œì„ ê°€ì§„ ê³µê²©ìëŠ” Firewall Manager ê´€ë¦¬ì ê³„ì •ì„ ìƒì„±í•˜ê±°ë‚˜ ì—…ë°ì´íŠ¸í•  ìˆ˜ ìˆìœ¼ë©°, **`fms:DisassociateAdminAccount`** ê¶Œí•œì„ ê°€ì§„ ì ì¬ì  ê³µê²©ìëŠ” í˜„ì¬ Firewall Manager ê´€ë¦¬ì ê³„ì •ì˜ ì—°ê²°ì„ ì œê±°í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.

* **Firewall Manager ê¸°ë³¸ ê´€ë¦¬ìì˜ ì—°ê²° í•´ì œëŠ” ì„ ì…í›„ì¶œ ì •ì±…ì„ ë”°ë¦…ë‹ˆë‹¤**. ëª¨ë“  Firewall Manager ê´€ë¦¬ìëŠ” Firewall Manager ê¸°ë³¸ ê´€ë¦¬ìê°€ ê³„ì •ì„ ì—°ê²° í•´ì œí•˜ê¸° ì „ì— ì—°ê²° í•´ì œí•´ì•¼ í•©ë‹ˆë‹¤.
* **PutAdminAccount**ë¥¼ í†µí•´ Firewall Manager ê´€ë¦¬ìë¥¼ ìƒì„±í•˜ë ¤ë©´, ê³„ì •ì€ ì´ì „ì— **AssociateAdminAccount**ë¥¼ ì‚¬ìš©í•˜ì—¬ Firewall Managerì— ì˜¨ë³´ë”©ëœ ì¡°ì§ì— ì†í•´ì•¼ í•©ë‹ˆë‹¤.
* Firewall Manager ê´€ë¦¬ì ê³„ì •ì˜ ìƒì„±ì€ ì¡°ì§ì˜ ê´€ë¦¬ ê³„ì •ë§Œ ìˆ˜í–‰í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.
```bash
aws fms associate-admin-account --admin-account <value>
aws fms disassociate-admin-account
aws fms put-admin-account --admin-account <value>
```
**ì ì¬ì  ì˜í–¥:** ì¤‘ì•™ ì§‘ì¤‘ì‹ ê´€ë¦¬ ì†ì‹¤, ì •ì±… íšŒí”¼, ì¤€ìˆ˜ ìœ„ë°˜ ë° í™˜ê²½ ë‚´ ë³´ì•ˆ í†µì œì˜ ì¤‘ë‹¨.

### `fms:PutPolicy`, `fms:DeletePolicy`

**`fms:PutPolicy`**, **`fms:DeletePolicy`** ê¶Œí•œì„ ê°€ì§„ ê³µê²©ìëŠ” AWS Firewall Manager ì •ì±…ì„ ìƒì„±, ìˆ˜ì • ë˜ëŠ” ì˜êµ¬ì ìœ¼ë¡œ ì‚­ì œí•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.
```bash
aws fms put-policy --policy <value> | --cli-input-json file://<policy.json> [--tag-list <value>]
aws fms delete-policy --policy-id <value> [--delete-all-policy-resources | --no-delete-all-policy-resources]
```
í—ˆìš©ëœ ë³´ì•ˆ ê·¸ë£¹ì„ í†µí•œ í—ˆìš© ì •ì±…ì˜ ì˜ˆë¡œ, íƒì§€ë¥¼ ìš°íšŒí•˜ê¸° ìœ„í•œ ê²ƒì€ ë‹¤ìŒê³¼ ê°™ì„ ìˆ˜ ìˆìŠµë‹ˆë‹¤:
```json
{
"Policy": {
"PolicyName": "permisive_policy",
"SecurityServicePolicyData": {
"Type": "SECURITY_GROUPS_COMMON",
"ManagedServiceData": "{\"type\":\"SECURITY_GROUPS_COMMON\",\"securityGroups\":[{\"id\":\"<permisive_security_group_id>\"}], \"applyToAllEC2InstanceENIs\":\"true\",\"IncludeSharedVPC\":\"true\"}"
},
"ResourceTypeList": ["AWS::EC2::Instance", "AWS::EC2::NetworkInterface", "AWS::EC2::SecurityGroup", "AWS::ElasticLoadBalancingV2::LoadBalancer", "AWS::ElasticLoadBalancing::LoadBalancer"],
"ResourceType": "AWS::EC2::SecurityGroup",
"ExcludeResourceTags": false,
"ResourceTags": [],
"RemediationEnabled": true
},
"TagList": []
}
```
**ì ì¬ì  ì˜í–¥:** ë³´ì•ˆ í†µì œ í•´ì²´, ì •ì±… íšŒí”¼, ì¤€ìˆ˜ ìœ„ë°˜, ìš´ì˜ ì¤‘ë‹¨ ë° í™˜ê²½ ë‚´ ì ì¬ì  ë°ì´í„° ìœ ì¶œ.

### `fms:BatchAssociateResource`, `fms:BatchDisassociateResource`, `fms:PutResourceSet`, `fms:DeleteResourceSet`

**`fms:BatchAssociateResource`** ë° **`fms:BatchDisassociateResource`** ê¶Œí•œì„ ê°€ì§„ ê³µê²©ìëŠ” ê°ê° ë°©í™”ë²½ ê´€ë¦¬ì ë¦¬ì†ŒìŠ¤ ì„¸íŠ¸ì—ì„œ ë¦¬ì†ŒìŠ¤ë¥¼ ì—°ê²°í•˜ê±°ë‚˜ ì—°ê²° í•´ì œí•  ìˆ˜ ìˆìŠµë‹ˆë‹¤. ë˜í•œ, **`fms:PutResourceSet`** ë° **`fms:DeleteResourceSet`** ê¶Œí•œì€ ê³µê²©ìê°€ AWS Firewall Managerì—ì„œ ì´ëŸ¬í•œ ë¦¬ì†ŒìŠ¤ ì„¸íŠ¸ë¥¼ ìƒì„±, ìˆ˜ì • ë˜ëŠ” ì‚­ì œí•  ìˆ˜ ìˆê²Œ í•©ë‹ˆë‹¤.
```bash
# Associate/Disassociate resources from a resource set
aws fms batch-associate-resource --resource-set-identifier <value> --items <value>
aws fms batch-disassociate-resource --resource-set-identifier <value> --items <value>

# Create, modify or delete a resource set
aws fms put-resource-set --resource-set <value> [--tag-list <value>]
aws fms delete-resource-set --identifier <value>
```
**ì ì¬ì  ì˜í–¥:** ë¦¬ì†ŒìŠ¤ ì„¸íŠ¸ì— ë¶ˆí•„ìš”í•œ í•­ëª©ì„ ì¶”ê°€í•˜ë©´ ì„œë¹„ìŠ¤ì˜ ë…¸ì´ì¦ˆ ìˆ˜ì¤€ì´ ì¦ê°€í•˜ì—¬ DoSë¥¼ ìœ ë°œí•  ìˆ˜ ìˆìŠµë‹ˆë‹¤. ë˜í•œ, ë¦¬ì†ŒìŠ¤ ì„¸íŠ¸ì˜ ë³€ê²½ì€ ë¦¬ì†ŒìŠ¤ ì¤‘ë‹¨, ì •ì±… íšŒí”¼, ì¤€ìˆ˜ ìœ„ë°˜ ë° í™˜ê²½ ë‚´ ë³´ì•ˆ í†µì œì˜ ì¤‘ë‹¨ì„ ì´ˆë˜í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.

### `fms:PutAppsList`, `fms:DeleteAppsList`

**`fms:PutAppsList`** ë° **`fms:DeleteAppsList`** ê¶Œí•œì„ ê°€ì§„ ê³µê²©ìëŠ” AWS Firewall Managerì—ì„œ ì• í”Œë¦¬ì¼€ì´ì…˜ ëª©ë¡ì„ ìƒì„±, ìˆ˜ì • ë˜ëŠ” ì‚­ì œí•  ìˆ˜ ìˆìŠµë‹ˆë‹¤. ì´ëŠ” ì¤‘ìš”í•  ìˆ˜ ìˆìœ¼ë©°, ë¬´ë‹¨ ì• í”Œë¦¬ì¼€ì´ì…˜ì´ ì¼ë°˜ ëŒ€ì¤‘ì—ê²Œ ì ‘ê·¼ì„ í—ˆìš©ë°›ê±°ë‚˜, ìŠ¹ì¸ëœ ì• í”Œë¦¬ì¼€ì´ì…˜ì— ëŒ€í•œ ì ‘ê·¼ì´ ê±°ë¶€ë˜ì–´ DoSë¥¼ ìœ ë°œí•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.
```bash
aws fms put-apps-list --apps-list <value> [--tag-list <value>]
aws fms delete-apps-list --list-id <value>
```
**ì ì¬ì  ì˜í–¥:** ì´ëŠ” ì˜ëª»ëœ êµ¬ì„±, ì •ì±… íšŒí”¼, ì¤€ìˆ˜ ìœ„ë°˜ ë° í™˜ê²½ ë‚´ ë³´ì•ˆ ì œì–´ì˜ ì¤‘ë‹¨ì„ ì´ˆë˜í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.

### `fms:PutProtocolsList`, `fms:DeleteProtocolsList`

**`fms:PutProtocolsList`** ë° **`fms:DeleteProtocolsList`** ê¶Œí•œì„ ê°€ì§„ ê³µê²©ìëŠ” AWS Firewall Managerì—ì„œ í”„ë¡œí† ì½œ ëª©ë¡ì„ ìƒì„±, ìˆ˜ì • ë˜ëŠ” ì‚­ì œí•  ìˆ˜ ìˆìŠµë‹ˆë‹¤. ì• í”Œë¦¬ì¼€ì´ì…˜ ëª©ë¡ê³¼ ë§ˆì°¬ê°€ì§€ë¡œ, ì´ëŠ” ì¤‘ìš”í•  ìˆ˜ ìˆìœ¼ë©°, ë¬´ë‹¨ í”„ë¡œí† ì½œì´ ì¼ë°˜ ëŒ€ì¤‘ì— ì˜í•´ ì‚¬ìš©ë˜ê±°ë‚˜, ìŠ¹ì¸ëœ í”„ë¡œí† ì½œì˜ ì‚¬ìš©ì´ ê±°ë¶€ë˜ì–´ DoSë¥¼ ì´ˆë˜í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.
```bash
aws fms put-protocols-list --apps-list <value> [--tag-list <value>]
aws fms delete-protocols-list --list-id <value>
```
**ì ì¬ì  ì˜í–¥:** ì´ëŠ” ì˜ëª»ëœ êµ¬ì„±, ì •ì±… íšŒí”¼, ì¤€ìˆ˜ ìœ„ë°˜ ë° í™˜ê²½ ë‚´ ë³´ì•ˆ í†µì œì˜ ì¤‘ë‹¨ì„ ì´ˆë˜í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.

### `fms:PutNotificationChannel`, `fms:DeleteNotificationChannel`

**`fms:PutNotificationChannel`** ë° **`fms:DeleteNotificationChannel`** ê¶Œí•œì„ ê°€ì§„ ê³µê²©ìëŠ” Firewall Managerê°€ SNS ë¡œê·¸ë¥¼ ê¸°ë¡í•˜ëŠ” ë° ì‚¬ìš©í•˜ëŠ” IAM ì—­í•  ë° Amazon Simple Notification Service (SNS) ì£¼ì œë¥¼ ì‚­ì œí•˜ê³  ì§€ì •í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.

**`fms:PutNotificationChannel`**ì„ ì½˜ì†” ì™¸ë¶€ì—ì„œ ì‚¬ìš©í•˜ë ¤ë©´, ì§€ì •ëœ **SnsRoleName**ì´ SNS ë¡œê·¸ë¥¼ ê²Œì‹œí•  ìˆ˜ ìˆë„ë¡ SNS ì£¼ì œì˜ ì•¡ì„¸ìŠ¤ ì •ì±…ì„ ì„¤ì •í•´ì•¼ í•©ë‹ˆë‹¤. ì œê³µëœ **SnsRoleName**ì´ **`AWSServiceRoleForFMS`**ê°€ ì•„ë‹Œ ì—­í• ì¸ ê²½ìš°, Firewall Manager ì„œë¹„ìŠ¤ ì£¼ì²´ **fms.amazonaws.com**ì´ ì´ ì—­í• ì„ ë§¡ì„ ìˆ˜ ìˆë„ë¡ ì‹ ë¢° ê´€ê³„ê°€ êµ¬ì„±ë˜ì–´ì•¼ í•©ë‹ˆë‹¤.

SNS ì•¡ì„¸ìŠ¤ ì •ì±… êµ¬ì„±ì— ëŒ€í•œ ì •ë³´ëŠ” ë‹¤ìŒì„ ì°¸ì¡°í•˜ì‹­ì‹œì˜¤:

{% content-ref url="../aws-services/aws-sns-enum.md" %}
[aws-sns-enum.md](../aws-services/aws-sns-enum.md)
{% endcontent-ref %}
```bash
aws fms put-notification-channel --sns-topic-arn <value> --sns-role-name <value>
aws fms delete-notification-channel
```
**ì ì¬ì  ì˜í–¥:** ì´ëŠ” ë³´ì•ˆ ê²½ê³  ëˆ„ë½, ì§€ì—°ëœ ì‚¬ê±´ ëŒ€ì‘, ì ì¬ì ì¸ ë°ì´í„° ìœ ì¶œ ë° í™˜ê²½ ë‚´ ìš´ì˜ ì¤‘ë‹¨ìœ¼ë¡œ ì´ì–´ì§ˆ ìˆ˜ ìˆìŠµë‹ˆë‹¤.

### `fms:AssociateThirdPartyFirewall`, `fms:DisssociateThirdPartyFirewall`

**`fms:AssociateThirdPartyFirewall`**, **`fms:DisssociateThirdPartyFirewall`** ê¶Œí•œì„ ê°€ì§„ ê³µê²©ìëŠ” AWS Firewall Managerë¥¼ í†µí•´ ì¤‘ì•™ì—ì„œ ê´€ë¦¬ë˜ëŠ” ì œ3ì ë°©í™”ë²½ì„ ì—°ê²°í•˜ê±°ë‚˜ ì—°ê²° í•´ì œí•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.

{% hint style="warning" %}
ê¸°ë³¸ ê´€ë¦¬ìë§Œ ì œ3ì ë°©í™”ë²½ì„ ìƒì„±í•˜ê³  ê´€ë¦¬í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.
{% endhint %}
```bash
aws fms associate-third-party-firewall --third-party-firewall [PALO_ALTO_NETWORKS_CLOUD_NGFW | FORTIGATE_CLOUD_NATIVE_FIREWALL]
aws fms disassociate-third-party-firewall --third-party-firewall [PALO_ALTO_NETWORKS_CLOUD_NGFW | FORTIGATE_CLOUD_NATIVE_FIREWALL]
```
**ì ì¬ì  ì˜í–¥:** ì—°ê²° í•´ì œëŠ” ì •ì±… íšŒí”¼, ì¤€ìˆ˜ ìœ„ë°˜ ë° í™˜ê²½ ë‚´ ë³´ì•ˆ í†µì œì˜ ì¤‘ë‹¨ìœ¼ë¡œ ì´ì–´ì§ˆ ìˆ˜ ìˆìŠµë‹ˆë‹¤. ë°˜ë©´ì— ì—°ê²°ì€ ë¹„ìš© ë° ì˜ˆì‚° í• ë‹¹ì˜ ì¤‘ë‹¨ìœ¼ë¡œ ì´ì–´ì§ˆ ìˆ˜ ìˆìŠµë‹ˆë‹¤.

### `fms:TagResource`, `fms:UntagResource`

ê³µê²©ìëŠ” Firewall Manager ë¦¬ì†ŒìŠ¤ì—ì„œ íƒœê·¸ë¥¼ ì¶”ê°€, ìˆ˜ì • ë˜ëŠ” ì œê±°í•  ìˆ˜ ìˆì–´, ê·€ ì¡°ì§ì˜ ë¹„ìš© í• ë‹¹, ë¦¬ì†ŒìŠ¤ ì¶”ì  ë° íƒœê·¸ ê¸°ë°˜ ì ‘ê·¼ ì œì–´ ì •ì±…ì„ ë°©í•´í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.
```bash
aws fms tag-resource --resource-arn <value> --tag-list <value>
aws fms untag-resource --resource-arn <value> --tag-keys <value>
```
**ì ì¬ì  ì˜í–¥**: ë¹„ìš© í• ë‹¹, ë¦¬ì†ŒìŠ¤ ì¶”ì  ë° íƒœê·¸ ê¸°ë°˜ ì•¡ì„¸ìŠ¤ ì œì–´ ì •ì±…ì˜ ì¤‘ë‹¨.

## ì°¸ì¡°

* [https://docs.aws.amazon.com/govcloud-us/latest/UserGuide/govcloud-fms.html](https://docs.aws.amazon.com/govcloud-us/latest/UserGuide/govcloud-fms.html)
* [https://docs.aws.amazon.com/service-authorization/latest/reference/list\_awsfirewallmanager.html](https://docs.aws.amazon.com/service-authorization/latest/reference/list\_awsfirewallmanager.html)
* [https://docs.aws.amazon.com/waf/latest/developerguide/fms-chapter.html](https://docs.aws.amazon.com/waf/latest/developerguide/fms-chapter.html)

{% hint style="success" %}
AWS í•´í‚¹ ë°°ìš°ê¸° ë° ì—°ìŠµí•˜ê¸°:<img src="../../../../.gitbook/assets/image (1).png" alt="" data-size="line">[**HackTricks Training AWS Red Team Expert (ARTE)**](https://training.hacktricks.xyz/courses/arte)<img src="../../../../.gitbook/assets/image (1).png" alt="" data-size="line">\
GCP í•´í‚¹ ë°°ìš°ê¸° ë° ì—°ìŠµí•˜ê¸°: <img src="../../../../.gitbook/assets/image (2).png" alt="" data-size="line">[**HackTricks Training GCP Red Team Expert (GRTE)**<img src="../../../../.gitbook/assets/image (2).png" alt="" data-size="line">](https://training.hacktricks.xyz/courses/grte)

<details>

<summary>HackTricks ì§€ì›í•˜ê¸°</summary>

* [**êµ¬ë… ê³„íš**](https://github.com/sponsors/carlospolop) í™•ì¸í•˜ê¸°!
* **ğŸ’¬ [**Discord ê·¸ë£¹**](https://discord.gg/hRep4RUj7f) ë˜ëŠ” [**í…”ë ˆê·¸ë¨ ê·¸ë£¹**](https://t.me/peass)ì— ì°¸ì—¬í•˜ê±°ë‚˜ **Twitter** ğŸ¦ [**@hacktricks\_live**](https://twitter.com/hacktricks\_live)**ë¥¼ íŒ”ë¡œìš°í•˜ì„¸ìš”.**
* **[**HackTricks**](https://github.com/carlospolop/hacktricks) ë° [**HackTricks Cloud**](https://github.com/carlospolop/hacktricks-cloud) ê¹ƒí—ˆë¸Œ ë¦¬í¬ì— PRì„ ì œì¶œí•˜ì—¬ í•´í‚¹ íŠ¸ë¦­ì„ ê³µìœ í•˜ì„¸ìš”.**

</details>
{% endhint %}
