# AWS - Control Tower Enum

{% hint style="success" %}
Learn & practice AWS Hacking:<img src="../../../../.gitbook/assets/image (1).png" alt="" data-size="line">[**HackTricks Training AWS Red Team Expert (ARTE)**](https://training.hacktricks.xyz/courses/arte)<img src="../../../../.gitbook/assets/image (1).png" alt="" data-size="line">\
Learn & practice GCP Hacking: <img src="../../../../.gitbook/assets/image (2).png" alt="" data-size="line">[**HackTricks Training GCP Red Team Expert (GRTE)**<img src="../../../../.gitbook/assets/image (2).png" alt="" data-size="line">](https://training.hacktricks.xyz/courses/grte)

<details>

<summary>Support HackTricks</summary>

* Check the [**subscription plans**](https://github.com/sponsors/carlospolop)!
* **Join the** ğŸ’¬ [**Discord group**](https://discord.gg/hRep4RUj7f) or the [**telegram group**](https://t.me/peass) or **follow** us on **Twitter** ğŸ¦ [**@hacktricks\_live**](https://twitter.com/hacktricks\_live)**.**
* **Share hacking tricks by submitting PRs to the** [**HackTricks**](https://github.com/carlospolop/hacktricks) and [**HackTricks Cloud**](https://github.com/carlospolop/hacktricks-cloud) github repos.

</details>
{% endhint %}

## Control Tower

{% hint style="info" %}
è¦ç´„ã™ã‚‹ã¨ã€Control Towerã¯ã€çµ„ç¹”å†…ã®ã™ã¹ã¦ã®ã‚¢ã‚«ã‚¦ãƒ³ãƒˆã«å¯¾ã—ã¦ãƒãƒªã‚·ãƒ¼ã‚’å®šç¾©ã™ã‚‹ã“ã¨ã‚’å¯èƒ½ã«ã™ã‚‹ã‚µãƒ¼ãƒ“ã‚¹ã§ã™ã€‚ã—ãŸãŒã£ã¦ã€å„ã‚¢ã‚«ã‚¦ãƒ³ãƒˆã‚’ç®¡ç†ã™ã‚‹ä»£ã‚ã‚Šã«ã€Control Towerã‹ã‚‰ãƒãƒªã‚·ãƒ¼ã‚’è¨­å®šã—ã€ãã‚ŒãŒé©ç”¨ã•ã‚Œã‚‹ã‚ˆã†ã«ã§ãã¾ã™ã€‚
{% endhint %}

AWS Control Towerã¯ã€**Amazon Web Services (AWS)**ã«ã‚ˆã£ã¦æä¾›ã•ã‚Œã‚‹ã‚µãƒ¼ãƒ“ã‚¹ã§ã€çµ„ç¹”ãŒAWSå†…ã§å®‰å…¨ã§æº–æ‹ ã—ãŸãƒãƒ«ãƒã‚¢ã‚«ã‚¦ãƒ³ãƒˆç’°å¢ƒã‚’è¨­å®šãŠã‚ˆã³ç®¡ç†ã§ãã‚‹ã‚ˆã†ã«ã—ã¾ã™ã€‚

AWS Control Towerã¯ã€ç‰¹å®šã®**çµ„ç¹”è¦ä»¶**ã‚’æº€ãŸã™ãŸã‚ã«ã‚«ã‚¹ã‚¿ãƒã‚¤ã‚ºå¯èƒ½ãª**ãƒ™ã‚¹ãƒˆãƒ—ãƒ©ã‚¯ãƒ†ã‚£ã‚¹ã®é’å†™çœŸã®äº‹å‰å®šç¾©ã•ã‚ŒãŸã‚»ãƒƒãƒˆ**ã‚’æä¾›ã—ã¾ã™ã€‚ã“ã‚Œã‚‰ã®é’å†™çœŸã«ã¯ã€AWS Single Sign-On (SSO)ã€AWS Configã€AWS CloudTrailã€AWS Service Catalogãªã©ã®äº‹å‰æ§‹æˆã•ã‚ŒãŸAWSã‚µãƒ¼ãƒ“ã‚¹ã¨æ©Ÿèƒ½ãŒå«ã¾ã‚Œã¦ã„ã¾ã™ã€‚

AWS Control Towerã‚’ä½¿ç”¨ã™ã‚‹ã¨ã€ç®¡ç†è€…ã¯**ã‚»ã‚­ãƒ¥ãƒªãƒ†ã‚£**ã‚„ã‚³ãƒ³ãƒ—ãƒ©ã‚¤ã‚¢ãƒ³ã‚¹ãªã©ã®çµ„ç¹”è¦ä»¶ã‚’æº€ãŸã™**ãƒãƒ«ãƒã‚¢ã‚«ã‚¦ãƒ³ãƒˆç’°å¢ƒã‚’è¿…é€Ÿã«è¨­å®š**ã§ãã¾ã™ã€‚ã“ã®ã‚µãƒ¼ãƒ“ã‚¹ã¯ã€ã‚¢ã‚«ã‚¦ãƒ³ãƒˆã‚„ãƒªã‚½ãƒ¼ã‚¹ã‚’è¡¨ç¤ºãŠã‚ˆã³ç®¡ç†ã™ã‚‹ãŸã‚ã®ä¸­å¤®ãƒ€ãƒƒã‚·ãƒ¥ãƒœãƒ¼ãƒ‰ã‚’æä¾›ã—ã€ã‚¢ã‚«ã‚¦ãƒ³ãƒˆã€ã‚µãƒ¼ãƒ“ã‚¹ã€ãŠã‚ˆã³ãƒãƒªã‚·ãƒ¼ã®ãƒ—ãƒ­ãƒ“ã‚¸ãƒ§ãƒ‹ãƒ³ã‚°ã‚’è‡ªå‹•åŒ–ã—ã¾ã™ã€‚

ã•ã‚‰ã«ã€AWS Control Towerã¯ã€çµ„ç¹”è¦ä»¶ã«æº–æ‹ ã—ãŸç’°å¢ƒã‚’ç¶­æŒã™ã‚‹ãŸã‚ã®äº‹å‰æ§‹æˆã•ã‚ŒãŸãƒãƒªã‚·ãƒ¼ã®ã‚»ãƒƒãƒˆã§ã‚ã‚‹ã‚¬ãƒ¼ãƒ‰ãƒ¬ãƒ¼ãƒ«ã‚’æä¾›ã—ã¾ã™ã€‚ã“ã‚Œã‚‰ã®ãƒãƒªã‚·ãƒ¼ã¯ã€ç‰¹å®šã®ãƒ‹ãƒ¼ã‚ºã«åˆã‚ã›ã¦ã‚«ã‚¹ã‚¿ãƒã‚¤ã‚ºã§ãã¾ã™ã€‚

å…¨ä½“ã¨ã—ã¦ã€AWS Control Towerã¯ã€AWSå†…ã§å®‰å…¨ã§æº–æ‹ ã—ãŸãƒãƒ«ãƒã‚¢ã‚«ã‚¦ãƒ³ãƒˆç’°å¢ƒã‚’è¨­å®šãŠã‚ˆã³ç®¡ç†ã™ã‚‹ãƒ—ãƒ­ã‚»ã‚¹ã‚’ç°¡ç´ åŒ–ã—ã€çµ„ç¹”ãŒã‚³ã‚¢ãƒ“ã‚¸ãƒã‚¹ã®ç›®æ¨™ã«é›†ä¸­ã§ãã‚‹ã‚ˆã†ã«ã—ã¾ã™ã€‚

### Enumeration

Control Towerã®ã‚³ãƒ³ãƒˆãƒ­ãƒ¼ãƒ«ã‚’åˆ—æŒ™ã™ã‚‹ã«ã¯ã€ã¾ãš**çµ„ç¹”ã‚’åˆ—æŒ™ã™ã‚‹å¿…è¦ãŒã‚ã‚Šã¾ã™**ï¼š

{% content-ref url="../aws-organizations-enum.md" %}
[aws-organizations-enum.md](../aws-organizations-enum.md)
{% endcontent-ref %}

{% code overflow="wrap" %}
```bash
# Get controls applied in an account
aws controltower list-enabled-controls --target-identifier arn:aws:organizations::<acc_id>:ou/<ou-id>
```
{% endcode %}

{% hint style="warning" %}
Control Towerã¯ã€**Account factory**ã‚’ä½¿ç”¨ã—ã¦ã€**CloudFormationãƒ†ãƒ³ãƒ—ãƒ¬ãƒ¼ãƒˆ**ã‚’**ã‚¢ã‚«ã‚¦ãƒ³ãƒˆã§å®Ÿè¡Œã—ã€ã‚µãƒ¼ãƒ“ã‚¹ã‚’å®Ÿè¡Œ**ï¼ˆæ¨©é™æ˜‡æ ¼ã€ãƒã‚¹ãƒˆã‚¨ã‚¯ã‚¹ãƒ—ãƒ­ã‚¤ãƒˆ...ï¼‰ã™ã‚‹ã“ã¨ã‚‚ã§ãã¾ã™ã€‚
{% endhint %}

### ãƒã‚¹ãƒˆã‚¨ã‚¯ã‚¹ãƒ—ãƒ­ã‚¤ãƒˆã¨æŒç¶šæ€§

{% content-ref url="../../aws-post-exploitation/aws-control-tower-post-exploitation.md" %}
[aws-control-tower-post-exploitation.md](../../aws-post-exploitation/aws-control-tower-post-exploitation.md)
{% endcontent-ref %}

{% hint style="success" %}
AWSãƒãƒƒã‚­ãƒ³ã‚°ã‚’å­¦ã³ã€å®Ÿè·µã™ã‚‹ï¼š<img src="../../../../.gitbook/assets/image (1).png" alt="" data-size="line">[**HackTricks Training AWS Red Team Expert (ARTE)**](https://training.hacktricks.xyz/courses/arte)<img src="../../../../.gitbook/assets/image (1).png" alt="" data-size="line">\
GCPãƒãƒƒã‚­ãƒ³ã‚°ã‚’å­¦ã³ã€å®Ÿè·µã™ã‚‹ï¼š<img src="../../../../.gitbook/assets/image (2).png" alt="" data-size="line">[**HackTricks Training GCP Red Team Expert (GRTE)**<img src="../../../../.gitbook/assets/image (2).png" alt="" data-size="line">](https://training.hacktricks.xyz/courses/grte)

<details>

<summary>HackTricksã‚’ã‚µãƒãƒ¼ãƒˆã™ã‚‹</summary>

* [**ã‚µãƒ–ã‚¹ã‚¯ãƒªãƒ—ã‚·ãƒ§ãƒ³ãƒ—ãƒ©ãƒ³**](https://github.com/sponsors/carlospolop)ã‚’ç¢ºèªã—ã¦ãã ã•ã„ï¼
* **ğŸ’¬ [**Discordã‚°ãƒ«ãƒ¼ãƒ—**](https://discord.gg/hRep4RUj7f)ã¾ãŸã¯[**ãƒ†ãƒ¬ã‚°ãƒ©ãƒ ã‚°ãƒ«ãƒ¼ãƒ—**](https://t.me/peass)ã«å‚åŠ ã™ã‚‹ã‹ã€**Twitter** ğŸ¦ [**@hacktricks\_live**](https://twitter.com/hacktricks\_live)**ã‚’ãƒ•ã‚©ãƒ­ãƒ¼ã—ã¦ãã ã•ã„ã€‚**
* **[**HackTricks**](https://github.com/carlospolop/hacktricks)ãŠã‚ˆã³[**HackTricks Cloud**](https://github.com/carlospolop/hacktricks-cloud)ã®githubãƒªãƒã‚¸ãƒˆãƒªã«PRã‚’æå‡ºã—ã¦ãƒãƒƒã‚­ãƒ³ã‚°ãƒˆãƒªãƒƒã‚¯ã‚’å…±æœ‰ã—ã¦ãã ã•ã„ã€‚**

</details>
{% endhint %}
