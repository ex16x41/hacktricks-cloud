# CloudWatch

**CloudWatch**, AWS kaynaklarÄ±nÄ±, uygulamalarÄ± ve hizmetleri birleÅŸtirerek izleme ve iÅŸletme verilerini loglar/metriler/etkinlikler ÅŸeklinde toplar.\
CloudWatch Log OlaylarÄ±nÄ±n her bir log satÄ±rÄ±nda **256KB boyut sÄ±nÄ±rlamasÄ±** vardÄ±r.\
YÃ¼ksek Ã§Ã¶zÃ¼nÃ¼rlÃ¼klÃ¼ alarmlar ayarlayabilir, loglarÄ± ve metrikleri yan yana gÃ¶rselleÅŸtirebilir, otomatik iÅŸlemler yapabilir, sorunlarÄ± gidermeye yardÄ±mcÄ± olabilir ve uygulamalarÄ± optimize etmek iÃ§in iÃ§gÃ¶rÃ¼ler keÅŸfedebilirsiniz.

Ã–rneÄŸin CloudTrail'den loglarÄ± izleyebilirsiniz. Ä°zlenen olaylar:

- GÃ¼venlik GruplarÄ± ve NACL'lerdeki DeÄŸiÅŸiklikler
- EC2 Ã¶rneklerinin BaÅŸlatÄ±lmasÄ±, DurdurulmasÄ±, Yeniden BaÅŸlatÄ±lmasÄ± ve SonlandÄ±rÄ±lmasÄ±
- IAM ve S3 iÃ§indeki GÃ¼venlik PolitikalarÄ±ndaki DeÄŸiÅŸiklikler
- AWS YÃ¶netim Konsoluna BaÅŸarÄ±sÄ±z GiriÅŸ Denemeleri
- Yetkilendirme baÅŸarÄ±sÄ±z olan API Ã§aÄŸrÄ±larÄ±
- Cloudwatch'da arama yapmak iÃ§in filtreler: [https://docs.aws.amazon.com/AmazonCloudWatch/latest/logs/FilterAndPatternSyntax.html](https://docs.aws.amazon.com/AmazonCloudWatch/latest/logs/FilterAndPatternSyntax.html)

## Ana kavramlar

### Ad AlanlarÄ±

Bir ad alanÄ±, CloudWatch metrikleri iÃ§in bir konteynerdir. Metrikleri kategorize etmeye ve izole etmeye yardÄ±mcÄ± olarak, bunlarÄ± yÃ¶netmeyi ve analiz etmeyi kolaylaÅŸtÄ±rÄ±r.

- **Ã–rnekler**: EC2 ile ilgili metrikler iÃ§in AWS/EC2, RDS metrikleri iÃ§in AWS/RDS.

### Metrikler

Metrikler, zaman iÃ§inde toplanan performansÄ± veya AWS kaynaklarÄ±nÄ±n kullanÄ±mÄ±nÄ± temsil eden veri noktalarÄ±dÄ±r. Metrikler, AWS hizmetlerinden, Ã¶zel uygulamalardan veya Ã¼Ã§Ã¼ncÃ¼ taraf entegrasyonlarÄ±ndan toplanabilir.

- **Ã–rnek**: CPUUtilization, NetworkIn, DiskReadOps.

### Boyutlar

Boyutlar, metriklerin bir parÃ§asÄ± olan anahtar-deÄŸer Ã§iftleridir. Bir metriÄŸi benzersiz bir ÅŸekilde tanÄ±mlamaya ve ek baÄŸlam saÄŸlamaya yardÄ±mcÄ± olurlar, bir metriÄŸe en fazla 30 boyut eklenebilir. Boyutlar ayrÄ±ca belirli Ã¶zelliklere gÃ¶re metrikleri filtrelemeye ve toplamaya olanak tanÄ±r.

- **Ã–rnek**: EC2 Ã¶rnekleri iÃ§in boyutlar, InstanceId, InstanceType ve AvailabilityZone iÃ§erebilir.

### Ä°statistikler

Ä°statistikler, metrik verileri Ã¼zerinde Ã¶zetlemek iÃ§in yapÄ±lan matematiksel hesaplamalardÄ±r. Ortalama, Toplam, Minimum, Maksimum ve Ã–rnek SayÄ±sÄ± gibi yaygÄ±n istatistikler bulunmaktadÄ±r.

- **Ã–rnek**: Bir saatlik bir sÃ¼re iÃ§inde ortalama CPU kullanÄ±mÄ±nÄ± hesaplama.

### Birimler

Birimler, bir metrikle iliÅŸkilendirilen Ã¶lÃ§Ã¼m tÃ¼rÃ¼dÃ¼r. Birimler, metrik verilerine baÄŸlam ve anlam saÄŸlamaya yardÄ±mcÄ± olur. YaygÄ±n birimler arasÄ±nda YÃ¼zde, Bayt, Saniye, SayÄ± bulunmaktadÄ±r.

- **Ã–rnek**: CPUUtilization yÃ¼zde cinsinden Ã¶lÃ§Ã¼lebilirken, NetworkIn bayt cinsinden Ã¶lÃ§Ã¼lebilir.

## CloudWatch Ã–zellikleri

### GÃ¶sterge Tablosu

**CloudWatch GÃ¶sterge TablolarÄ±**, AWS CloudWatch metriklerinizin Ã¶zelleÅŸtirilebilir gÃ¶rÃ¼nÃ¼mlerini saÄŸlar. Verileri gÃ¶rselleÅŸtirmek ve farklÄ± AWS hizmetlerinden farklÄ± metrikleri bir arada izlemek iÃ§in gÃ¶sterge tablolarÄ± oluÅŸturabilir ve yapÄ±landÄ±rabilirsiniz.

**Ana Ã–zellikler**:

- **AraÃ§lar**: Grafikler, metin, alarmlar ve daha fazlasÄ±nÄ± iÃ§eren gÃ¶sterge tablolarÄ±nÄ±n yapÄ± taÅŸlarÄ±.
- **Ã–zelleÅŸtirme**: DÃ¼zen ve iÃ§erik, belirli izleme ihtiyaÃ§larÄ±na uyacak ÅŸekilde Ã¶zelleÅŸtirilebilir.

**Ã–rnek KullanÄ±m Senaryosu**:

- EC2 Ã¶rnekleri, RDS veritabanlarÄ± ve S3 kovalarÄ± dahil olmak Ã¼zere tÃ¼m AWS ortamÄ±nÄ±z iÃ§in temel metrikleri gÃ¶steren tek bir gÃ¶sterge tablosu.

### Metrik AkÄ±ÅŸÄ± ve Metrik Verileri

AWS CloudWatch'da **Metrik AkÄ±ÅŸlarÄ±**, CloudWatch metriklerini sÃ¼rekli olarak gerÃ§ek zamanlÄ± bir hedefe akÄ±tmayÄ± saÄŸlar. Bu, AWS dÄ±ÅŸÄ±ndaki araÃ§lar kullanarak geliÅŸmiÅŸ izleme, analiz ve Ã¶zel gÃ¶sterge tablolarÄ± iÃ§in Ã¶zellikle yararlÄ±dÄ±r.

Metrik AkÄ±ÅŸlarÄ± iÃ§indeki **Metrik Verileri**, akÄ±tÄ±lan gerÃ§ek Ã¶lÃ§Ã¼mleri veya veri noktalarÄ±nÄ± temsil eder. Bu veri noktalarÄ±, AWS kaynaklarÄ± iÃ§in CPU kullanÄ±mÄ±, bellek kullanÄ±mÄ± vb. gibi Ã§eÅŸitli metrikleri temsil eder.

**Ã–rnek KullanÄ±m Senaryosu**:

- GerÃ§ek zamanlÄ± metrikleri Ã¼Ã§Ã¼ncÃ¼ taraf bir izleme servisine gÃ¶nderme.
- Uzun vadeli depolama ve uyumluluk iÃ§in Amazon S3 kovasÄ±nda metrikleri arÅŸivleme.

### Alarm

**CloudWatch AlarmlarÄ±**, belirlenmiÅŸ eÅŸiklere dayalÄ± olarak metriklerinizi izler ve Ã¶nceden tanÄ±mlanmÄ±ÅŸ eÅŸikleri aÅŸan bir metrik olduÄŸunda SNS aracÄ±lÄ±ÄŸÄ±yla bildirim gÃ¶nderme, otomatik Ã¶lÃ§eklendirme politikasÄ±nÄ± tetikleme veya AWS Lambda iÅŸlevini Ã§alÄ±ÅŸtÄ±rma gibi bir veya daha fazla eylem gerÃ§ekleÅŸtirebilir.

**Ana BileÅŸenler**:

- **EÅŸik**: AlarmÄ±n tetiklendiÄŸi deÄŸer.
- **DeÄŸerlendirme DÃ¶nemleri**: Verilerin deÄŸerlendirildiÄŸi dÃ¶nem sayÄ±sÄ±.
- **Alarma Giden Veri NoktalarÄ±**: AlarmÄ± tetiklemek iÃ§in gereken eÅŸik deÄŸerine ulaÅŸÄ±lan dÃ¶nem sayÄ±sÄ±
- **Eylemler**: Bir alarm durumu tetiklendiÄŸinde ne olacaÄŸÄ± (Ã¶rneÄŸin, SNS aracÄ±lÄ±ÄŸÄ±yla bildirim gÃ¶nderme).

**Ã–rnek KullanÄ±m Senaryosu**:

- EC2 Ã¶rneÄŸi CPU kullanÄ±mÄ±nÄ± izleme ve %80'in Ã¼zerine Ã§Ä±karsa 5 dakika boyunca SNS aracÄ±lÄ±ÄŸÄ±yla bildirim gÃ¶nderme.

### Anomali AlgÄ±layÄ±cÄ±larÄ±

**Anomali AlgÄ±layÄ±cÄ±larÄ±**, metriklerinizdeki anormallikleri otomatik olarak tespit etmek iÃ§in makine Ã¶ÄŸrenimini kullanÄ±r. Herhangi bir CloudWatch metriÄŸine anormallik algÄ±lama uygulayabilir ve normal desenlerden sapmalarÄ± belirleyebilir.

**Ana BileÅŸenler**:

- **Model EÄŸitimi**: CloudWatch, normal davranÄ±ÅŸÄ±n nasÄ±l olduÄŸunu belirlemek iÃ§in geÃ§miÅŸ verileri kullanÄ±r.
- **Anomali AlgÄ±lama BandÄ±**: Bir metrik iÃ§in beklenen deÄŸer aralÄ±ÄŸÄ±nÄ±n gÃ¶rsel temsili.

**Ã–rnek KullanÄ±m Senaryosu**:

- GÃ¼venlik ihlali veya uygulama sorunu gÃ¶sterebilecek EC2 Ã¶rneÄŸindeki olaÄŸandÄ±ÅŸÄ± CPU kullanÄ±mÄ± desenlerini tespit etme.

### Ä°zleme KurallarÄ± ve YÃ¶netilen Ä°zleme KurallarÄ±

**Ä°zleme KurallarÄ±**, metrik verilerinizdeki trendleri, artÄ±ÅŸlarÄ± veya diÄŸer ilgi Ã§ekici desenleri tanÄ±mlamak iÃ§in **gÃ¼Ã§lÃ¼ matematiksel ifadeler** kullanarak koÅŸullarÄ± tanÄ±mlamanÄ±za olanak tanÄ±r. Bu kurallar, kaynak performansÄ±nÄ±zda ve kullanÄ±mÄ±nÄ±zda anormallikleri veya olaÄŸandÄ±ÅŸÄ± davranÄ±ÅŸlarÄ± tanÄ±mlamanÄ±za yardÄ±mcÄ± olabilir.

**YÃ¶netilen Ä°zleme KurallarÄ±**, AWS tarafÄ±ndan saÄŸlanan Ã¶nceden yapÄ±landÄ±rÄ±lmÄ±ÅŸ **izleme kurallarÄ±**dÄ±r. Bunlar belirli AWS hizmetlerini veya yaygÄ±n kullanÄ±m durumlarÄ±nÄ± izlemek iÃ§in tasarlanmÄ±ÅŸtÄ±r ve ayrÄ±ntÄ±lÄ± yapÄ±landÄ±rmaya ihtiyaÃ§ duymadan etkinleÅŸtirilebilir.

**Ã–rnek KullanÄ±m Senaryosu**:

- RDS PerformansÄ±nÄ± Ä°zleme: Amazon RDS iÃ§in CPU kullanÄ±mÄ±, bellek kullanÄ±mÄ± ve disk G/Ã‡ gibi temel performans gÃ¶stergelerini izlemek iÃ§in yÃ¶netilen bir izleme kuralÄ± etkinleÅŸtirme. Bu metriklerden herhangi biri gÃ¼venli iÅŸletim eÅŸiklerini aÅŸarsa, kural bir uyarÄ± veya otomatik mÃ¼dahale eylemi tetikleyebilir.

### CloudWatch LoglarÄ±

Uygulamalardan ve sistemlerden loglarÄ± toplamak ve izlemek iÃ§in izin verir. AWS hizmetlerinden (CloudTrail dahil) ve uygulamalardan/sistemlerden loglarÄ± toplayabilir (CloudWatch AjanÄ± bir ana bilgisayara kurulabilir). Loglar **sÄ±nÄ±rsÄ±z sÃ¼reyle** (GÃ¼nlÃ¼k Grubu ayarlarÄ±na baÄŸlÄ± olarak) saklanabilir ve dÄ±ÅŸa aktarÄ±labilir.

**Ã–ÄŸeler**:

| **Log Grubu**            | AynÄ± saklama, izleme ve eriÅŸim kontrolÃ¼ ayarlarÄ±nÄ± paylaÅŸan **log akÄ±ÅŸlarÄ±nÄ±n bir koleksiyonu** |
| ------------------------ | ------------------------------------------------------------------------------------------------- |
| **Log AkÄ±ÅŸÄ±**           | **AynÄ± kaynaÄŸÄ± paylaÅŸan** log olaylarÄ±nÄ±n bir dizisi                                                |
| **Abonelik Filtreleri** | Belirli bir gÃ¼nlÃ¼k grubundaki olaylarÄ± eÅŸleÅŸtiren bir **filtre deseni tanÄ±mlar**, bunlarÄ± Kinesis Data Firehose akÄ±ÅŸÄ±na, Kinesis akÄ±ÅŸÄ±na veya bir Lambda iÅŸlevine gÃ¶nderir |
### CloudWatch Ä°zleme ve Olaylar

CloudWatch **temel** olarak verileri **her 5 dakikada bir** toplar (**detaylÄ±** olan bunu **her 1 dakikada bir** yapar). Toplama iÅŸleminden sonra, alarmlarÄ±n eÅŸik deÄŸerlerini kontrol eder ve bir tanesini tetiklemesi gerekiyorsa bunu yapar.\
Bu durumda, CloudWatch bir olay gÃ¶ndermek ve bazÄ± otomatik iÅŸlemler gerÃ§ekleÅŸtirmek iÃ§in hazÄ±rlanabilir (AWS lambda fonksiyonlarÄ±, SNS konularÄ±, SQS kuyruklarÄ±, Kinesis AkÄ±ÅŸlarÄ±)

### Ajan Kurulumu

Makinelerin/konteynerlerin iÃ§ine ajanlar kurarak gÃ¼nlÃ¼kleri otomatik olarak CloudWatch'a geri gÃ¶nderebilirsiniz.

* Bir **rol** oluÅŸturun ve CloudWatch'un Ã¶rneklerden veri toplamasÄ±na izin veren izinlerle birlikte AWS sistem yÃ¶neticisi SSM ile etkileÅŸime geÃ§mesine izin veren bir **rolÃ¼ ekleyin** (CloudWatchAgentAdminPolicy ve AmazonEC2RoleforSSM)
* EC2 Ã¶rneÄŸine ajanÄ± **indirin** ve **kurun** ([https://s3.amazonaws.com/amazoncloudwatch-agent/linux/amd64/latest/AmazonCloudWatchAgent.zip](https://s3.amazonaws.com/amazoncloudwatch-agent/linux/amd64/latest/AmazonCloudWatchAgent.zip)). EC2 iÃ§inden indirebilir veya AWS Sistem YÃ¶neticisi'ni kullanarak AWS-ConfigureAWSPackage paketini seÃ§erek otomatik olarak kurabilirsiniz.
* CloudWatch AjanÄ±nÄ± **yapÄ±landÄ±rÄ±n** ve **baÅŸlatÄ±n**

Bir gÃ¼nlÃ¼k grubunda birÃ§ok akÄ±ÅŸ bulunur. Bir akÄ±ÅŸta birÃ§ok olay bulunur. Ve her akÄ±ÅŸÄ±n iÃ§indeki olaylarÄ±n sÄ±rayla olacaÄŸÄ± garanti edilir.

## NumaralandÄ±rma
```bash
# Dashboards #

## Returns a list of the dashboards of your account
aws cloudwatch list-dashboards

## Retrieves the details of the specified dashboard
aws cloudwatch get-dashboard --dashboard-name <value>

# Metrics #

## Returns a list of the specified metric
aws cloudwatch list-metrics [--namespace <value>] [--metric-name <value>] [--dimensions <value>] [--include-linked-accounts | --no-include-linked-accounts]

## Retrieves metric data (this operation can include a CloudWatch Metrics Insights query, and one or more metric math functions)
aws cloudwatch get-metric-data --metric-data-queries <value> --start-time <value> --end-time <value>

## Retrieves statistics for the specified metric and namespace over a range of time
aws cloudwatch get-metric-statistics --namespace <value> --metric-name <value> [--dimensions <value>] --start-time <value> --end-time <value> --period <value>

## Returns a list of the metric streams of your account
aws cloudwatch list-metric-streams

## Retrieves information about the specified metric stream
aws cloudwatch get-metric-stream --name <value>

## Retrieve snapshots of the specified metric widgets
aws cloudwatch get-metric-widget-image --metric-widget <value>

# Alarms #

## Retrieves the specified alarm
aws cloudwatch describe-alarms [--alarm-names <value>] [--alarm-name-prefix <value>] [--alarm-types <value>] [--state-value <value>]

## Retrieves the alarms history, even for deleted alarms
aws cloudwatch describe-alarm-history [--alarm-name <value>] [--alarm-types <value>] [--history-item-type <ConfigurationUpdate | StateUpdate | Action>] [--start-date <value>] [--end-date <value>]

## Retrieves standard alarms based on the specified metric
aws cloudwatch escribe-alarms-for-metric --metric-name <value> --namespace <value> [--dimensions <value>]

# Anomaly Detections #

## Lists the anomaly detection models that you have created in your account
aws cloudwatch describe-anomaly-detectors [--namespace <value>] [--metric-name <value>] [--dimensions <value>]

## Lists all the Contributor Insight rules in your account
aws cloudwatch describe-insight-rules

## Retrieves the data collected over a time range for a given Contributor Insight rule
aws cloudwatch get-insight-rule-report --rule-name <value> --start-time <value> --end-time <value> --period <value>

## Lists managed Contributor Insights rules in your account for a specified resource
aws cloudwatch list-managed-insight-rules --resource-arn <value>

# Tags #

## Lists the tags associated with the specified CloudWatch resources
aws cloudwatch list-tags-for-resource --resource-arn <value>

# CloudWatch Logs #
aws logs tail "<log_group_name>" --followaws logs get-log-events --log-group-name "<log_group_name>" --log-stream-name "<log_stream_name>" --output text > <output_file>

# CloudWatch Events #
aws events list-rules
aws events describe-rule --name <name>aws events list-targets-by-rule --rule <name>aws events list-archives
aws events describe-archive --archive-name <name>aws events list-connections
aws events describe-connection --name <name>aws events list-endpoints
aws events describe-endpoint --name <name>aws events list-event-sources
aws events describe-event-source --name <name>aws events list-replays
aws events list-api-destinations
aws events list-event-buses
```
## SaldÄ±rÄ± SonrasÄ± / Atlatma

### **`cloudwatch:DeleteAlarms`,`cloudwatch:PutMetricAlarm` ,Â `cloudwatch:PutCompositeAlarm`**

Bu izinlere sahip bir saldÄ±rgan, bir organizasyonun izleme ve uyarÄ± altyapÄ±sÄ±nÄ± ciddi ÅŸekilde zayÄ±flatabilir. Var olan alarmlarÄ± silerek, saldÄ±rgan kritik performans sorunlarÄ±, gÃ¼venlik ihlalleri veya operasyonel baÅŸarÄ±sÄ±zlÄ±klar hakkÄ±nda yÃ¶neticilere bildirimde bulunan Ã¶nemli uyarÄ±larÄ± devre dÄ±ÅŸÄ± bÄ±rakabilir. AyrÄ±ca, metrik alarmlar oluÅŸturarak veya deÄŸiÅŸtirerek, saldÄ±rgan yÃ¶neticileri yanÄ±ltabilir ve meÅŸru alarmlarÄ± susturarak kÃ¶tÃ¼ niyetli faaliyetleri maskeleyebilir ve gerÃ§ek olaylara zamanÄ±nda yanÄ±t verilmesini engelleyebilir.

AyrÄ±ca, **`cloudwatch:PutCompositeAlarm`** izni ile bir saldÄ±rgan, bir dÃ¶ngÃ¼ veya dÃ¶ngÃ¼ oluÅŸturabilir, burada bileÅŸik alarm A, bileÅŸik alarm B'ye baÄŸlÄ±dÄ±r ve bileÅŸik alarm B de bileÅŸik alarm A'ya baÄŸlÄ±dÄ±r. Bu senaryoda, dÃ¶ngÃ¼nÃ¼n bir parÃ§asÄ± olan herhangi bir bileÅŸik alarmÄ± silemezsiniz Ã§Ã¼nkÃ¼ silmek istediÄŸiniz alarmdan hala baÄŸÄ±mlÄ± olan bir bileÅŸik alarm her zaman vardÄ±r.
```bash
aws cloudwatch put-metric-alarm --cli-input-json <value> | --alarm-name <value> --comparison-operator <value> --evaluation-periods <value> [--datapoints-to-alarm <value>] [--threshold <value>] [--alarm-description <value>] [--alarm-actions <value>] [--metric-name <value>] [--namespace <value>] [--statistic <value>] [--dimensions <value>] [--period <value>]
aws cloudwatch delete-alarms --alarm-names <value>
aws cloudwatch put-composite-alarm --alarm-name <value> --alarm-rule <value> [--no-actions-enabled | --actions-enabled [--alarm-actions <value>] [--insufficient-data-actions <value>] [--ok-actions <value>] ]
```
AÅŸaÄŸÄ±daki Ã¶rnek, bir metrik alarmÄ±nÄ± etkisiz hale getirmenin nasÄ±l yapÄ±lacaÄŸÄ±nÄ± gÃ¶stermektedir:

- Bu metrik alarm, belirli bir EC2 Ã¶rneÄŸinin ortalama CPU kullanÄ±mÄ±nÄ± izler, metriÄŸi her 300 saniyede bir deÄŸerlendirir ve 6 deÄŸerlendirme dÃ¶nemi gerektirir (toplam 30 dakika). Ortalama CPU kullanÄ±mÄ± en az 4 dÃ¶nem boyunca %60'Ä±n Ã¼zerine Ã§Ä±karsa, alarm tetiklenir ve belirtilen SNS konusuna bir bildirim gÃ¶nderilir.
- EÅŸiÄŸi %99'dan fazla ayarlayarak, DÃ¶nemi 10 saniyeye, DeÄŸerlendirme DÃ¶nemlerini 8640'a (Ã§Ã¼nkÃ¼ 8640 adet 10 saniyelik dÃ¶nem 1 gÃ¼n eder), ve Veri NoktalarÄ±nÄ± AlarmÄ± da 8640'a ayarlayarak, alarmÄ±n tetiklenmesi iÃ§in CPU kullanÄ±mÄ±nÄ±n 24 saat boyunca her 10 saniyede bir %99'un Ã¼zerinde olmasÄ± gerekecektir. 

{% tabs %}
{% tab title="Orijinal Metrik AlarmÄ±" %}
```json
{
"Namespace": "AWS/EC2",
"MetricName": "CPUUtilization",
"Dimensions": [
{
"Name": "InstanceId",
"Value": "i-01234567890123456"
}
],
"AlarmActions": [
"arn:aws:sns:us-east-1:123456789012:example_sns"
],
"ComparisonOperator": "GreaterThanThreshold",
"DatapointsToAlarm": 4,
"EvaluationPeriods": 6,
"Period": 300,
"Statistic": "Average",
"Threshold": 60,
"AlarmDescription": "CPU Utilization of i-01234567890123456 over 60%",
"AlarmName": "EC2 instance i-01234567890123456 CPU Utilization"
}
```
{% endtab %}
{% tab title="DeÄŸiÅŸtirilmiÅŸ Metrik Alarm" %}
```json
{
"Namespace": "AWS/EC2",
"MetricName": "CPUUtilization",
"Dimensions": [
{
"Name": "InstanceId",
"Value": "i-0645d6d414dadf9f8"
}
],
"AlarmActions": [],
"ComparisonOperator": "GreaterThanThreshold",
"DatapointsToAlarm": 8640,
"EvaluationPeriods": 8640,
"Period": 10,
"Statistic": "Average",
"Threshold": 99,
"AlarmDescription": "CPU Utilization of i-01234567890123456 with 60% as threshold",
"AlarmName": "Instance i-0645d6d414dadf9f8 CPU Utilization"
}

```
{% endtab %}
{% endtabs %}
**Potansiyel Etki**: Kritik olaylar iÃ§in bildirim eksikliÄŸi, potansiyel tespit edilmemiÅŸ sorunlar, yanlÄ±ÅŸ uyarÄ±lar, gerÃ§ek olaylarÄ±n kaÃ§Ä±rÄ±lmasÄ±.

### **`cloudwatch:DeleteAlarmActions`,Â `cloudwatch:EnableAlarmActions` , `cloudwatch:SetAlarmState`**

Alarm eylemlerini silerek saldÄ±rgan, bir alarm durumuna ulaÅŸÄ±ldÄ±ÄŸÄ±nda yÃ¶neticilere bildirim gÃ¶nderme veya otomatik Ã¶lÃ§eklendirme faaliyetlerini tetikleme gibi kritik uyarÄ±larÄ± ve otomatik yanÄ±tlarÄ± engelleyebilir. Uygun olmayan ÅŸekilde alarm eylemlerini etkinleÅŸtirmek veya yeniden etkinleÅŸtirmek, Ã¶nceki ÅŸekilde devre dÄ±ÅŸÄ± bÄ±rakÄ±lmÄ±ÅŸ eylemleri yeniden etkinleÅŸtirerek veya tetiklenen eylemleri deÄŸiÅŸtirerek beklenmedik davranÄ±ÅŸlara yol aÃ§abilir, bu da olay yanÄ±tÄ±nda karÄ±ÅŸÄ±klÄ±ÄŸa ve yanlÄ±ÅŸ yÃ¶nlendirmeye neden olabilir.

AyrÄ±ca, izni olan bir saldÄ±rgan alarm durumlarÄ±nÄ± manipÃ¼le edebilir, yÃ¶neticileri dikkatlerini daÄŸÄ±tmak ve karÄ±ÅŸtÄ±rmak iÃ§in yanÄ±ltÄ±cÄ± yanlÄ±ÅŸ alarmlar oluÅŸturabilir veya devam eden kÃ¶tÃ¼ niyetli faaliyetleri veya kritik sistem arÄ±zalarÄ±nÄ± gizlemek iÃ§in gerÃ§ek alarmlarÄ± susturabilir.

- Bir bileÅŸik alarm Ã¼zerindeÂ **`SetAlarmState`**Â kullanÄ±yorsanÄ±z, bileÅŸik alarmÄ±n gerÃ§ek durumuna geri dÃ¶nmesi garanti edilmez. BileÅŸik alarm, yalnÄ±zca Ã§ocuk alarmlarÄ±ndan herhangi biri durum deÄŸiÅŸtirdiÄŸinde gerÃ§ek durumuna geri dÃ¶ner. AyrÄ±ca yapÄ±landÄ±rmasÄ±nÄ± gÃ¼ncellediÄŸinizde yeniden deÄŸerlendirilir.
```bash
aws cloudwatch disable-alarm-actions --alarm-names <value>
aws cloudwatch enable-alarm-actions --alarm-names <value>
aws cloudwatch set-alarm-state --alarm-name <value> --state-value <OK | ALARM | INSUFFICIENT_DATA> --state-reason <value> [--state-reason-data <value>]
```
**Potansiyel Etki**: Kritik olaylar iÃ§in bildirim eksikliÄŸi, potansiyel olarak algÄ±lanmayan sorunlar, yanlÄ±ÅŸ uyarÄ±lar, gerÃ§ek olaylarÄ±n kaÃ§Ä±rÄ±lmasÄ±.

### **`cloudwatch:DeleteAnomalyDetector`,Â `cloudwatch:PutAnomalyDetector`**

Bir saldÄ±rgan, metrik verilerdeki olaÄŸandÄ±ÅŸÄ± desenleri veya anormallikleri tespit etme ve yanÄ±tlama yeteneÄŸini tehlikeye atabilir. Varolan anormallik dedektÃ¶rlerini silerek, saldÄ±rgan kritik uyarÄ± mekanizmalarÄ±nÄ± devre dÄ±ÅŸÄ± bÄ±rakabilir; ve bunlarÄ± oluÅŸturarak veya deÄŸiÅŸtirerek, ya yanlÄ±ÅŸ yapÄ±landÄ±rabilir ya da yanlÄ±ÅŸ pozitifler oluÅŸturarak izlemeyi dikkat daÄŸÄ±tmak veya aÅŸÄ±rÄ± yÃ¼klemek iÃ§in kullanabilir.
```bash
aws cloudwatch delete-anomaly-detector [--cli-input-json <value> | --namespace <value> --metric-name <value> --dimensions <value> --stat <value>]
aws cloudwatch put-anomaly-detector [--cli-input-json <value> | --namespace <value> --metric-name <value> --dimensions <value> --stat <value> --configuration <value> --metric-characteristics <value>]
```
AÅŸaÄŸÄ±daki Ã¶rnek, bir metrik anormallik algÄ±layÄ±cÄ±sÄ±nÄ± etkisiz hale getirmenin nasÄ±l yapÄ±lacaÄŸÄ±nÄ± gÃ¶stermektedir. Bu metrik anormallik algÄ±layÄ±cÄ±, belirli bir EC2 Ã¶rneÄŸinin ortalama CPU kullanÄ±mÄ±nÄ± izler ve istenen zaman aralÄ±ÄŸÄ±yla "ExcludedTimeRanges" parametresini eklemek, anormallik algÄ±layÄ±cÄ±nÄ±n o dÃ¶nemde ilgili verileri analiz etmemesini veya uyarÄ± vermemesini saÄŸlamak iÃ§in yeterlidir.

{% tabs %}
{% tab title="Orijinal Metrik Anormallik AlgÄ±layÄ±cÄ±" %}
```json
{
"SingleMetricAnomalyDetector": {
"Namespace": "AWS/EC2",
"MetricName": "CPUUtilization",
"Stat": "Average",
"Dimensions": [
{
"Name": "InstanceId",
"Value": "i-0123456789abcdefg"
}
]
}
}
```
{% endtab %}
{% tab title="DeÄŸiÅŸtirilmiÅŸ Metrik Anomali AlgÄ±layÄ±cÄ±" %}
```json
{
"SingleMetricAnomalyDetector": {
"Namespace": "AWS/EC2",
"MetricName": "CPUUtilization",
"Stat": "Average",
"Dimensions": [
{
"Name": "InstanceId",
"Value": "i-0123456789abcdefg"
}
]
},
"Configuration": {
"ExcludedTimeRanges": [
{
"StartTime": "2023-01-01T00:00:00Z",
"EndTime": "2053-01-01T23:59:59Z"
}
],
"Timezone": "Europe/Madrid"
}
}
```
**Potansiyel Etki**: OlaÄŸandÄ±ÅŸÄ± desenlerin veya gÃ¼venlik tehditlerinin tespitinde doÄŸrudan etkisi vardÄ±r.

### **`cloudwatch:DeleteDashboards`,Â `cloudwatch:PutDashboard`**

Bir saldÄ±rgan, gÃ¶zetim ve gÃ¶rselleÅŸtirme yeteneklerini kuruluÅŸun panolarÄ±nÄ± oluÅŸturarak, deÄŸiÅŸtirerek veya silecek ÅŸekilde tehlikeye atabilir. Bu izinler, sistemlerin performansÄ± ve saÄŸlÄ±ÄŸÄ±yla ilgili kritik gÃ¶rÃ¼nÃ¼rlÃ¼ÄŸÃ¼ kaldÄ±rmak, panolarÄ± yanlÄ±ÅŸ verileri gÃ¶sterecek ÅŸekilde deÄŸiÅŸtirmek veya kÃ¶tÃ¼ amaÃ§lÄ± faaliyetleri gizlemek iÃ§in kullanÄ±labilir.
```bash
aws cloudwatch delete-dashboards --dashboard-names <value>
aws cloudwatch put-dashboard --dashboard-name <value> --dashboard-body <value>
```
**Potansiyel Etki**: Ä°zleme gÃ¶rÃ¼nÃ¼rlÃ¼ÄŸÃ¼nÃ¼n kaybÄ± ve yanÄ±ltÄ±cÄ± bilgiler.

### **`cloudwatch:DeleteInsightRules`,Â `cloudwatch:PutInsightRule` ,`cloudwatch:PutManagedInsightRule`**

GÃ¶rÃ¼ÅŸ kurallarÄ±, anormallikleri tespit etmek, performansÄ± optimize etmek ve kaynaklarÄ± etkili bir ÅŸekilde yÃ¶netmek iÃ§in kullanÄ±lÄ±r. Mevcut gÃ¶rÃ¼ÅŸ kurallarÄ±nÄ± silerek, bir saldÄ±rgan kritik izleme yeteneklerini kaldÄ±rabilir, sistem performans sorunlarÄ± ve gÃ¼venlik tehditleri konusunda kÃ¶r hale gelebilir. AyrÄ±ca, bir saldÄ±rgan yanÄ±ltÄ±cÄ± veri oluÅŸturmak veya gizli kÃ¶tÃ¼ niyetli faaliyetleri gizlemek iÃ§in gÃ¶rÃ¼ÅŸ kurallarÄ± oluÅŸturabilir veya deÄŸiÅŸtirebilir, bu da yanlÄ±ÅŸ teÅŸhisler ve iÅŸletme ekibinden uygun olmayan yanÄ±tlara yol aÃ§abilir.
```bash
aws cloudwatch delete-insight-rules --rule-names <value>
aws cloudwatch put-insight-rule --rule-name <value> --rule-definition <value> [--rule-state <value>]
aws cloudwatch put-managed-insight-rules --managed-rules <value>
```
**Potansiyel Etki**: Performans sorunlarÄ±nÄ± ve anormallikleri tespit etme ve yanÄ±tlama zorluÄŸu, yanlÄ±ÅŸ bilgilendirilmiÅŸ karar verme ve potansiyel olarak kÃ¶tÃ¼ niyetli faaliyetleri veya sistem arÄ±zalarÄ±nÄ± gizleme.

### **`cloudwatch:DisableInsightRules`,Â `cloudwatch:EnableInsightRules`**

Kritik gÃ¶rÃ¼ÅŸ kurallarÄ±nÄ± devre dÄ±ÅŸÄ± bÄ±rakarak, bir saldÄ±rgan kuruluÅŸu Ã¶nemli performans ve gÃ¼venlik metriklerinden habersiz bÄ±rakabilir. Aksine, yanÄ±ltÄ±cÄ± kurallarÄ± etkinleÅŸtirerek veya yapÄ±landÄ±rarak, yanlÄ±ÅŸ veri oluÅŸturmak, gÃ¼rÃ¼ltÃ¼ oluÅŸturmak veya kÃ¶tÃ¼ niyetli faaliyetleri gizlemek mÃ¼mkÃ¼n olabilir.
```bash
aws cloudwatch disable-insight-rules --rule-names <value>
aws cloudwatch enable-insight-rules --rule-names <value>
```
**Potansiyel Etki**: Operasyon ekibinde karÄ±ÅŸÄ±klÄ±ÄŸa neden olarak gerÃ§ek sorunlara gecikmiÅŸ yanÄ±tlar ve yanlÄ±ÅŸ uyarÄ±lara dayalÄ± gereksiz eylemler.

### **`cloudwatch:DeleteMetricStream` ,Â `cloudwatch:PutMetricStream` , `cloudwatch:PutMetricData`**

Bir saldÄ±rganÄ±n **`cloudwatch:DeleteMetricStream`** ,Â **`cloudwatch:PutMetricStream`** izinleriyle metrik veri akÄ±ÅŸlarÄ± oluÅŸturup silerek gÃ¼venliÄŸi, izlemeyi ve veri bÃ¼tÃ¼nlÃ¼ÄŸÃ¼nÃ¼ tehlikeye atabilir:

- **KÃ¶tÃ¼ niyetli akÄ±ÅŸlar oluÅŸturma**: Hassas verileri yetkisiz hedeflere gÃ¶ndermek iÃ§in metrik akÄ±ÅŸlarÄ± oluÅŸturun.
- **Kaynak manipÃ¼lasyonu**: AÅŸÄ±rÄ± veri iÃ§eren yeni metrik akÄ±ÅŸlarÄ±nÄ±n oluÅŸturulmasÄ± yanlÄ±ÅŸ uyarÄ±lara neden olabilir, gerÃ§ek sorunlarÄ± maskeleyebilir.
- **Ä°zleme kesintisi**: SaldÄ±rganlar, metrik akÄ±ÅŸlarÄ±nÄ± silerek izleme verilerinin sÃ¼rekli akÄ±ÅŸÄ±nÄ± bozabilir. Bu ÅŸekilde, kÃ¶tÃ¼ niyetli faaliyetleri etkili bir ÅŸekilde gizlenir.

Benzer ÅŸekilde, **`cloudwatch:PutMetricData`** izni ile bir metrik akÄ±ÅŸÄ±na veri eklemek mÃ¼mkÃ¼n olacaktÄ±r. Bu, eklenen yanlÄ±ÅŸ veri miktarÄ±ndan dolayÄ± DoS'a yol aÃ§abilir ve tamamen iÅŸlevsiz hale getirebilir.
```bash
aws cloudwatch delete-metric-stream --name <value>
aws cloudwatch put-metric-stream --name <value> [--include-filters <value>] [--exclude-filters <value>] --firehose-arn <value> --role-arn <value> --output-format <value>
aws cloudwatch put-metric-data --namespace <value> [--metric-data <value>] [--metric-name <value>] [--timestamp <value>] [--unit <value>] [--value <value>] [--dimensions <value>]
```
Ã–rnek olarak, belirli bir EC2 Ã¶rneÄŸindeki CPU kullanÄ±mÄ±nÄ±n %70'ine karÅŸÄ±lÄ±k gelen veri eklemek:
```bash
aws cloudwatch put-metric-data --namespace "AWS/EC2" --metric-name "CPUUtilization" --value 70 --unit "Percent" --dimensions "InstanceId=i-0123456789abcdefg"
```
**Potansiyel Etki**: Ä°zleme verilerinin akÄ±ÅŸÄ±nda kesinti, anormalliklerin ve olaylarÄ±n tespitini etkileyerek kaynak manipÃ¼lasyonu ve aÅŸÄ±rÄ± metrik akÄ±ÅŸÄ± oluÅŸturulmasÄ± nedeniyle maliyetlerin artmasÄ±.

### **`cloudwatch:StopMetricStreams`,Â `cloudwatch:StartMetricStreams`**

SaldÄ±rgan etkilenen metrik veri akÄ±ÅŸlarÄ±nÄ±n akÄ±ÅŸÄ±nÄ± kontrol edebilir (kÄ±sÄ±tlama olmadÄ±ÄŸÄ± takdirde her veri akÄ±ÅŸÄ±). **`cloudwatch:StopMetricStreams`** izni ile saldÄ±rganlar kritik metrik akÄ±ÅŸlarÄ±nÄ± durdurarak kÃ¶tÃ¼ niyetli faaliyetlerini gizleyebilirler.
```bash
aws cloudwatch stop-metric-streams --names <value>
aws cloudwatch start-metric-streams --names <value>
```
**Potansiyel Etki**: Anomalilerin ve olaylarÄ±n tespitini etkileyerek izleme verilerinin akÄ±ÅŸÄ±nda kesinti oluÅŸabilir.

### **`cloudwatch:TagResource`,Â `cloudwatch:UntagResource`**

SaldÄ±rgan, CloudWatch kaynaklarÄ±ndan (ÅŸu anda yalnÄ±zca alarmlar ve KatkÄ±da Bulunan Ä°ncelemeler kurallarÄ±) etiket ekleyebilir, deÄŸiÅŸtirebilir veya kaldÄ±rabilir. Bu durum, kuruluÅŸunuzun etiketlere dayalÄ± eriÅŸim kontrol politikalarÄ±nÄ± bozabilir.
```bash
aws cloudwatch tag-resource --resource-arn <value> --tags <value>
aws cloudwatch untag-resource --resource-arn <value> --tag-keys <value>
```
**Potansiyel Etki**: Etiket tabanlÄ± eriÅŸim kontrol politikalarÄ±nÄ±n bozulmasÄ±.

## Referanslar

* [https://cloudsecdocs.com/aws/services/logging/cloudwatch/](https://cloudsecdocs.com/aws/services/logging/cloudwatch/#general-info)
* [https://docs.aws.amazon.com/service-authorization/latest/reference/list_amazoncloudwatch.html](https://docs.aws.amazon.com/service-authorization/latest/reference/list_amazoncloudwatch.html)
* [https://docs.aws.amazon.com/es_es/AmazonCloudWatch/latest/monitoring/cloudwatch_concepts.html#Metric](https://docs.aws.amazon.com/es_es/AmazonCloudWatch/latest/monitoring/cloudwatch_concepts.html#Metric)

<details>

<summary><strong>SÄ±fÄ±rdan kahraman olana kadar AWS hacklemeyi Ã¶ÄŸrenin</strong> <a href="https://training.hacktricks.xyz/courses/arte"><strong>htARTE (HackTricks AWS KÄ±rmÄ±zÄ± TakÄ±m UzmanÄ±)</strong></a><strong>!</strong></summary>

HackTricks'Ä± desteklemenin diÄŸer yollarÄ±:

* **Åirketinizi HackTricks'te reklamÄ±nÄ± gÃ¶rmek istiyorsanÄ±z** veya **HackTricks'i PDF olarak indirmek istiyorsanÄ±z** [**ABONELÄ°K PLANLARI**]'na gÃ¶z atÄ±n (https://github.com/sponsors/carlospolop)!
* [**Resmi PEASS & HackTricks Ã¼rÃ¼nlerini**](https://peass.creator-spring.com) edinin
* [**The PEASS Ailesi**]'ni (https://opensea.io/collection/the-peass-family) keÅŸfedin, Ã¶zel [**NFT'lerimiz**]'i (https://opensea.io/collection/the-peass-family) iÃ§eren koleksiyonumuzu
* **ğŸ’¬ [**Discord grubuna**](https://discord.gg/hRep4RUj7f) veya [**telegram grubuna**](https://t.me/peass) katÄ±lÄ±n veya bizi **Twitter** ğŸ¦ [**@hacktricks_live**](https://twitter.com/hacktricks_live)**'da takip edin.**
* **Hacking pÃ¼f noktalarÄ±nÄ±zÄ± paylaÅŸarak PR'ler gÃ¶ndererek** [**HackTricks**](https://github.com/carlospolop/hacktricks) ve [**HackTricks Cloud**](https://github.com/carlospolop/hacktricks-cloud) github depolarÄ±na katkÄ±da bulunun.

</details>
