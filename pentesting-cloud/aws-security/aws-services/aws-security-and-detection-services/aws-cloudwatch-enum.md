# AWS - CloudWatch æšä¸¾

{% hint style="success" %}
å­¦ä¹ å’Œå®è·µ AWS é»‘å®¢æŠ€èƒ½ï¼š<img src="/.gitbook/assets/image.png" alt="" data-size="line">[**HackTricks åŸ¹è®­ AWS çº¢é˜Ÿä¸“å®¶ (ARTE)**](https://training.hacktricks.xyz/courses/arte)<img src="/.gitbook/assets/image.png" alt="" data-size="line">\
å­¦ä¹ å’Œå®è·µ GCP é»‘å®¢æŠ€èƒ½ï¼š<img src="/.gitbook/assets/image (2).png" alt="" data-size="line">[**HackTricks åŸ¹è®­ GCP çº¢é˜Ÿä¸“å®¶ (GRTE)**<img src="/.gitbook/assets/image (2).png" alt="" data-size="line">](https://training.hacktricks.xyz/courses/grte)

<details>

<summary>æ”¯æŒ HackTricks</summary>

* æŸ¥çœ‹ [**è®¢é˜…è®¡åˆ’**](https://github.com/sponsors/carlospolop)!
* **åŠ å…¥** ğŸ’¬ [**Discord ç¾¤ç»„**](https://discord.gg/hRep4RUj7f) æˆ– [**ç”µæŠ¥ç¾¤ç»„**](https://t.me/peass) æˆ– **å…³æ³¨** æˆ‘ä»¬çš„ **Twitter** ğŸ¦ [**@hacktricks\_live**](https://twitter.com/hacktricks\_live)**.**
* é€šè¿‡å‘ [**HackTricks**](https://github.com/carlospolop/hacktricks) å’Œ [**HackTricks Cloud**](https://github.com/carlospolop/hacktricks-cloud) github ä»“åº“æäº¤ PR æ¥åˆ†äº«é»‘å®¢æŠ€å·§ã€‚

</details>
{% endhint %}

## CloudWatch

**CloudWatch** **æ”¶é›†**ç›‘æ§å’Œè¿è¥**æ•°æ®**ï¼Œä»¥æ—¥å¿—/æŒ‡æ ‡/äº‹ä»¶çš„å½¢å¼æä¾›å¯¹ AWS èµ„æºã€åº”ç”¨ç¨‹åºå’ŒæœåŠ¡çš„**ç»Ÿä¸€è§†å›¾**ã€‚\
CloudWatch æ—¥å¿—äº‹ä»¶æ¯è¡Œæœ‰**256KB çš„å¤§å°é™åˆ¶**ã€‚\
å®ƒå¯ä»¥è®¾ç½®**é«˜åˆ†è¾¨ç‡è­¦æŠ¥**ï¼Œå°†**æ—¥å¿—**å’Œ**æŒ‡æ ‡**å¹¶æ’å¯è§†åŒ–ï¼Œæ‰§è¡Œè‡ªåŠ¨æ“ä½œï¼Œè§£å†³é—®é¢˜ï¼Œå¹¶å‘ç°ä¼˜åŒ–åº”ç”¨ç¨‹åºçš„è§è§£ã€‚

ä¾‹å¦‚ï¼Œæ‚¨å¯ä»¥ç›‘è§†æ¥è‡ª CloudTrail çš„æ—¥å¿—ã€‚ç›‘è§†çš„äº‹ä»¶åŒ…æ‹¬ï¼š

- å®‰å…¨ç»„å’Œ NACL çš„æ›´æ”¹
- å¯åŠ¨ã€åœæ­¢ã€é‡å¯å’Œç»ˆæ­¢ EC2 å®ä¾‹
- IAM å’Œ S3 ä¸­å®‰å…¨ç­–ç•¥çš„æ›´æ”¹
- AWS ç®¡ç†æ§åˆ¶å°ç™»å½•å°è¯•å¤±è´¥
- å¯¼è‡´æˆæƒå¤±è´¥çš„ API è°ƒç”¨
- åœ¨ CloudWatch ä¸­æœç´¢çš„ç­›é€‰å™¨ï¼š[https://docs.aws.amazon.com/AmazonCloudWatch/latest/logs/FilterAndPatternSyntax.html](https://docs.aws.amazon.com/AmazonCloudWatch/latest/logs/FilterAndPatternSyntax.html)

## å…³é”®æ¦‚å¿µ

### å‘½åç©ºé—´

å‘½åç©ºé—´æ˜¯ CloudWatch æŒ‡æ ‡çš„å®¹å™¨ã€‚å®ƒæœ‰åŠ©äºå¯¹æŒ‡æ ‡è¿›è¡Œåˆ†ç±»å’Œéš”ç¦»ï¼Œä½¿å…¶æ›´æ˜“äºç®¡ç†å’Œåˆ†æã€‚

- **ç¤ºä¾‹**ï¼šAWS/EC2 ç”¨äº EC2 ç›¸å…³æŒ‡æ ‡ï¼ŒAWS/RDS ç”¨äº RDS æŒ‡æ ‡ã€‚

### æŒ‡æ ‡

æŒ‡æ ‡æ˜¯éšæ—¶é—´æ”¶é›†çš„æ•°æ®ç‚¹ï¼Œä»£è¡¨ AWS èµ„æºçš„æ€§èƒ½æˆ–åˆ©ç”¨ç‡ã€‚æŒ‡æ ‡å¯ä»¥ä» AWS æœåŠ¡ã€è‡ªå®šä¹‰åº”ç”¨ç¨‹åºæˆ–ç¬¬ä¸‰æ–¹é›†æˆä¸­æ”¶é›†ã€‚

- **ç¤ºä¾‹**ï¼šCPUUtilizationã€NetworkInã€DiskReadOpsã€‚

### ç»´åº¦

ç»´åº¦æ˜¯æŒ‡æ ‡çš„é”®å€¼å¯¹ã€‚å®ƒä»¬æœ‰åŠ©äºå”¯ä¸€æ ‡è¯†æŒ‡æ ‡å¹¶æä¾›é™„åŠ ä¸Šä¸‹æ–‡ï¼Œæœ€å¤šå¯ä¸æŒ‡æ ‡å…³è” 30 ä¸ªç»´åº¦ã€‚ç»´åº¦è¿˜å…è®¸æ ¹æ®ç‰¹å®šå±æ€§è¿‡æ»¤å’ŒèšåˆæŒ‡æ ‡ã€‚

- **ç¤ºä¾‹**ï¼šå¯¹äº EC2 å®ä¾‹ï¼Œç»´åº¦å¯èƒ½åŒ…æ‹¬ InstanceIdã€InstanceType å’Œ AvailabilityZoneã€‚

### ç»Ÿè®¡

ç»Ÿè®¡æ˜¯å¯¹æŒ‡æ ‡æ•°æ®æ‰§è¡Œçš„æ•°å­¦è®¡ç®—ï¼Œä»¥ä¾¿éšæ—¶é—´æ€»ç»“æ•°æ®ã€‚å¸¸è§ç»Ÿè®¡åŒ…æ‹¬å¹³å‡å€¼ã€æ€»å’Œã€æœ€å°å€¼ã€æœ€å¤§å€¼å’Œæ ·æœ¬è®¡æ•°ã€‚

- **ç¤ºä¾‹**ï¼šè®¡ç®—ä¸€å°æ—¶å†…çš„å¹³å‡ CPU åˆ©ç”¨ç‡ã€‚

### å•ä½

å•ä½æ˜¯ä¸æŒ‡æ ‡å…³è”çš„æµ‹é‡ç±»å‹ã€‚å•ä½æœ‰åŠ©äºä¸ºæŒ‡æ ‡æ•°æ®æä¾›ä¸Šä¸‹æ–‡å’Œå«ä¹‰ã€‚å¸¸è§å•ä½åŒ…æ‹¬ç™¾åˆ†æ¯”ã€å­—èŠ‚ã€ç§’ã€è®¡æ•°ã€‚

- **ç¤ºä¾‹**ï¼šCPUUtilization å¯èƒ½ä»¥ç™¾åˆ†æ¯”ä¸ºå•ä½ï¼Œè€Œ NetworkIn å¯èƒ½ä»¥å­—èŠ‚ä¸ºå•ä½ã€‚

## CloudWatch åŠŸèƒ½

### ä»ªè¡¨æ¿

**CloudWatch ä»ªè¡¨æ¿**æä¾›å¯å®šåˆ¶çš„**AWS CloudWatch æŒ‡æ ‡è§†å›¾**ã€‚å¯ä»¥åˆ›å»ºå’Œé…ç½®ä»ªè¡¨æ¿ä»¥å¯è§†åŒ–æ•°æ®å¹¶åœ¨å•ä¸ªè§†å›¾ä¸­ç›‘è§†èµ„æºï¼Œç»“åˆæ¥è‡ªå„ç§ AWS æœåŠ¡çš„ä¸åŒæŒ‡æ ‡ã€‚

**å…³é”®åŠŸèƒ½**ï¼š

- **å°éƒ¨ä»¶**ï¼šä»ªè¡¨æ¿çš„æ„å»ºå—ï¼ŒåŒ…æ‹¬å›¾å½¢ã€æ–‡æœ¬ã€è­¦æŠ¥ç­‰ã€‚
- **è‡ªå®šä¹‰**ï¼šå¸ƒå±€å’Œå†…å®¹å¯å®šåˆ¶ä»¥é€‚åº”ç‰¹å®šçš„ç›‘æ§éœ€æ±‚ã€‚

**ç¤ºä¾‹ç”¨ä¾‹**ï¼š

- æ˜¾ç¤ºæ•´ä¸ª AWS ç¯å¢ƒçš„å…³é”®æŒ‡æ ‡çš„å•ä¸ªä»ªè¡¨æ¿ï¼ŒåŒ…æ‹¬ EC2 å®ä¾‹ã€RDS æ•°æ®åº“å’Œ S3 å­˜å‚¨æ¡¶ã€‚

### æŒ‡æ ‡æµå’ŒæŒ‡æ ‡æ•°æ®

AWS CloudWatch ä¸­çš„**æŒ‡æ ‡æµ**ä½¿æ‚¨èƒ½å¤Ÿå°† CloudWatch æŒ‡æ ‡è¿ç»­æµå¼ä¼ è¾“åˆ°æ‚¨é€‰æ‹©çš„ç›®çš„åœ°ï¼Œå®æ—¶æ€§æ¥è¿‘ã€‚è¿™å¯¹äºä½¿ç”¨ AWS ä¹‹å¤–çš„å·¥å…·è¿›è¡Œé«˜çº§ç›‘æ§ã€åˆ†æå’Œè‡ªå®šä¹‰ä»ªè¡¨æ¿ç‰¹åˆ«æœ‰ç”¨ã€‚

**æŒ‡æ ‡æ•°æ®**æŒ‡çš„æ˜¯æ­£åœ¨æµå¼ä¼ è¾“çš„å®é™…æµ‹é‡å€¼æˆ–æ•°æ®ç‚¹ã€‚è¿™äº›æ•°æ®ç‚¹ä»£è¡¨ AWS èµ„æºçš„å„ç§æŒ‡æ ‡ï¼Œå¦‚ CPU åˆ©ç”¨ç‡ã€å†…å­˜ä½¿ç”¨æƒ…å†µç­‰ã€‚

**ç¤ºä¾‹ç”¨ä¾‹**ï¼š

- å°†å®æ—¶æŒ‡æ ‡å‘é€åˆ°ç¬¬ä¸‰æ–¹ç›‘æ§æœåŠ¡è¿›è¡Œé«˜çº§åˆ†æã€‚
- å°†æŒ‡æ ‡å­˜æ¡£åœ¨ Amazon S3 å­˜å‚¨æ¡¶ä¸­ï¼Œä»¥è¿›è¡Œé•¿æœŸå­˜å‚¨å’Œåˆè§„æ€§ã€‚

### è­¦æŠ¥

**CloudWatch è­¦æŠ¥**ç›‘è§†æ‚¨çš„æŒ‡æ ‡å¹¶æ ¹æ®é¢„å®šä¹‰é˜ˆå€¼æ‰§è¡Œæ“ä½œã€‚å½“æŒ‡æ ‡è¿åé˜ˆå€¼æ—¶ï¼Œè­¦æŠ¥å¯ä»¥æ‰§è¡Œä¸€ä¸ªæˆ–å¤šä¸ªæ“ä½œï¼Œå¦‚é€šè¿‡ SNS å‘é€é€šçŸ¥ã€è§¦å‘è‡ªåŠ¨æ‰©å±•ç­–ç•¥æˆ–è¿è¡Œ AWS Lambda å‡½æ•°ã€‚

**å…³é”®ç»„ä»¶**ï¼š

- **é˜ˆå€¼**ï¼šè§¦å‘è­¦æŠ¥çš„å€¼ã€‚
- **è¯„ä¼°å‘¨æœŸ**ï¼šè¯„ä¼°æ•°æ®çš„å‘¨æœŸæ•°ã€‚
- **è¾¾åˆ°è­¦æŠ¥çš„æ•°æ®ç‚¹**ï¼šéœ€è¦è§¦å‘è­¦æŠ¥çš„è¾¾åˆ°é˜ˆå€¼çš„å‘¨æœŸæ•°ã€‚
- **æ“ä½œ**ï¼šå½“è§¦å‘è­¦æŠ¥çŠ¶æ€æ—¶å‘ç”Ÿçš„æ“ä½œï¼ˆä¾‹å¦‚ï¼Œé€šè¿‡ SNS å‘é€é€šçŸ¥ï¼‰ã€‚

**ç¤ºä¾‹ç”¨ä¾‹**ï¼š

- ç›‘æ§ EC2 å®ä¾‹çš„ CPU åˆ©ç”¨ç‡ï¼Œå¦‚æœè¿ç»­ 5 åˆ†é’Ÿè¶…è¿‡ 80%ï¼Œåˆ™é€šè¿‡ SNS å‘é€é€šçŸ¥ã€‚

### å¼‚å¸¸æ£€æµ‹å™¨

**å¼‚å¸¸æ£€æµ‹å™¨**ä½¿ç”¨æœºå™¨å­¦ä¹ è‡ªåŠ¨æ£€æµ‹æŒ‡æ ‡ä¸­çš„å¼‚å¸¸ã€‚æ‚¨å¯ä»¥å°†å¼‚å¸¸æ£€æµ‹åº”ç”¨äºä»»ä½• CloudWatch æŒ‡æ ‡ï¼Œä»¥è¯†åˆ«å¯èƒ½æŒ‡ç¤ºé—®é¢˜çš„ä¸æ­£å¸¸æ¨¡å¼åç¦»çš„æ¨¡å¼ã€‚

**å…³é”®ç»„ä»¶**ï¼š

- **æ¨¡å‹è®­ç»ƒ**ï¼šCloudWatch ä½¿ç”¨å†å²æ•°æ®è®­ç»ƒæ¨¡å‹å¹¶å»ºç«‹æ­£å¸¸è¡Œä¸ºçš„æ¨¡å¼ã€‚
- **å¼‚å¸¸æ£€æµ‹å¸¦**ï¼šæŒ‡æ ‡å€¼é¢„æœŸèŒƒå›´çš„å¯è§†è¡¨ç¤ºã€‚

**ç¤ºä¾‹ç”¨ä¾‹**ï¼š

- æ£€æµ‹ EC2 å®ä¾‹ä¸­ä¸å¯»å¸¸çš„ CPU åˆ©ç”¨ç‡æ¨¡å¼ï¼Œè¿™å¯èƒ½è¡¨æ˜å®‰å…¨æ¼æ´æˆ–åº”ç”¨ç¨‹åºé—®é¢˜ã€‚

### æ´å¯Ÿè§„åˆ™å’Œæ‰˜ç®¡æ´å¯Ÿè§„åˆ™

**æ´å¯Ÿè§„åˆ™**å…è®¸æ‚¨ä½¿ç”¨**å¼ºå¤§çš„æ•°å­¦è¡¨è¾¾å¼**åœ¨æ‚¨çš„æŒ‡æ ‡æ•°æ®ä¸­è¯†åˆ«è¶‹åŠ¿ã€æ£€æµ‹å³°å€¼æˆ–å…¶ä»–æ„Ÿå…´è¶£çš„æ¨¡å¼ï¼Œä»¥å®šä¹‰åº”é‡‡å–è¡ŒåŠ¨çš„æ¡ä»¶ã€‚è¿™äº›è§„åˆ™å¯ä»¥å¸®åŠ©æ‚¨è¯†åˆ«èµ„æºæ€§èƒ½å’Œåˆ©ç”¨ç‡ä¸­çš„å¼‚å¸¸æˆ–å¼‚å¸¸è¡Œä¸ºã€‚

**æ‰˜ç®¡æ´å¯Ÿè§„åˆ™**æ˜¯ç”± AWS æä¾›çš„é¢„é…ç½®**æ´å¯Ÿè§„åˆ™**ã€‚å®ƒä»¬æ—¨åœ¨ç›‘è§†ç‰¹å®š AWS æœåŠ¡æˆ–å¸¸è§ç”¨ä¾‹ï¼Œå¹¶ä¸”å¯ä»¥åœ¨æ— éœ€è¯¦ç»†é…ç½®çš„æƒ…å†µä¸‹å¯ç”¨ã€‚

**ç¤ºä¾‹ç”¨ä¾‹**ï¼š

- ç›‘æ§ RDS æ€§èƒ½ï¼šå¯ç”¨ä¸€ä¸ªç”¨äº Amazon RDS çš„æ‰˜ç®¡æ´å¯Ÿè§„åˆ™ï¼Œç›‘è§† CPU åˆ©ç”¨ç‡ã€å†…å­˜ä½¿ç”¨æƒ…å†µå’Œç£ç›˜ I/O ç­‰å…³é”®æ€§èƒ½æŒ‡æ ‡ã€‚å¦‚æœè¿™äº›æŒ‡æ ‡ä¸­æœ‰ä»»ä½•è¶…å‡ºå®‰å…¨æ“ä½œé˜ˆå€¼çš„æƒ…å†µï¼Œè§„åˆ™å¯ä»¥è§¦å‘è­¦æŠ¥æˆ–è‡ªåŠ¨åŒ–ç¼“è§£æ“ä½œã€‚

### CloudWatch æ—¥å¿— <a href="#cloudwatch-logs" id="cloudwatch-logs"></a>

å…è®¸**èšåˆå’Œç›‘è§†æ¥è‡ªåº”ç”¨ç¨‹åº**å’Œç³»ç»Ÿçš„æ—¥å¿—ï¼ŒåŒ…æ‹¬æ¥è‡ª AWS æœåŠ¡ï¼ˆåŒ…æ‹¬ CloudTrailï¼‰å’Œ**åº”ç”¨ç¨‹åº/ç³»ç»Ÿ**çš„æ—¥å¿—ï¼ˆ**CloudWatch ä»£ç†**å¯å®‰è£…åœ¨ä¸»æœºä¸Šï¼‰ã€‚æ—¥å¿—å¯ä»¥**æ ¹æ®æ—¥å¿—ç»„è®¾ç½®**æ— é™æœŸåœ°å­˜å‚¨ï¼Œå¹¶ä¸”å¯ä»¥å¯¼å‡ºã€‚

**å…ƒç´ **ï¼š

| **æ—¥å¿—ç»„**            | å…±äº«ç›¸åŒä¿ç•™ã€ç›‘è§†å’Œè®¿é—®æ§åˆ¶è®¾ç½®çš„**ä¸€ç»„æ—¥å¿—æµ**                                                     |
| ------------------------ | ---------------------------------------------------------------------------------------------------------------------------------------------------------- |
| **æ—¥å¿—æµ**           | å…·æœ‰**ç›¸åŒæ¥æº**çš„**æ—¥å¿—äº‹ä»¶**åºåˆ—                                                                                                |
| **è®¢é˜…è¿‡æ»¤å™¨** | å®šä¹‰ä¸ç‰¹å®šæ—¥å¿—ç»„ä¸­çš„äº‹ä»¶åŒ¹é…çš„**è¿‡æ»¤æ¨¡å¼**ï¼Œå°†å…¶å‘é€åˆ° Kinesis Data Firehose æµã€Kinesis æµæˆ– Lambda å‡½æ•° |
### CloudWatch ç›‘æ§ä¸äº‹ä»¶

CloudWatch **åŸºæœ¬** æ¯ 5 åˆ†é’Ÿèšåˆä¸€æ¬¡æ•°æ®ï¼ˆ**è¯¦ç»†** æ¯ 1 åˆ†é’Ÿï¼‰ã€‚èšåˆåï¼Œå®ƒä¼š **æ£€æŸ¥è­¦æŠ¥çš„é˜ˆå€¼**ï¼Œä»¥ç¡®å®šæ˜¯å¦éœ€è¦è§¦å‘è­¦æŠ¥ã€‚\
åœ¨è¿™ç§æƒ…å†µä¸‹ï¼ŒCloudWatch å¯ä»¥å‡†å¤‡å‘é€äº‹ä»¶å¹¶æ‰§è¡Œä¸€äº›è‡ªåŠ¨æ“ä½œï¼ˆAWS Lambda å‡½æ•°ï¼ŒSNS ä¸»é¢˜ï¼ŒSQS é˜Ÿåˆ—ï¼ŒKinesis æµï¼‰

### ä»£ç†å®‰è£…

æ‚¨å¯ä»¥åœ¨æ‚¨çš„æœºå™¨/å®¹å™¨å†…å®‰è£…ä»£ç†ï¼Œè‡ªåŠ¨å°†æ—¥å¿—å‘é€å› CloudWatchã€‚

* **åˆ›å»º** ä¸€ä¸ª **è§’è‰²** å¹¶å°†å…¶ **é™„åŠ ** åˆ°å…·æœ‰å…è®¸ CloudWatch ä»å®ä¾‹æ”¶é›†æ•°æ®çš„æƒé™çš„ **å®ä¾‹** ä¸Šï¼Œå¦å¤–è¿˜å¯ä»¥ä¸ AWS ç³»ç»Ÿç®¡ç†å™¨ SSM äº¤äº’ï¼ˆCloudWatchAgentAdminPolicy å’Œ AmazonEC2RoleforSSMï¼‰
* **ä¸‹è½½** å¹¶ **å®‰è£…** ä»£ç†åˆ° EC2 å®ä¾‹ï¼ˆ[https://s3.amazonaws.com/amazoncloudwatch-agent/linux/amd64/latest/AmazonCloudWatchAgent.zip](https://s3.amazonaws.com/amazoncloudwatch-agent/linux/amd64/latest/AmazonCloudWatchAgent.zip)ï¼‰ã€‚æ‚¨å¯ä»¥ä» EC2 å†…éƒ¨ä¸‹è½½ï¼Œæˆ–è€…ä½¿ç”¨ AWS ç³»ç»Ÿç®¡ç†å™¨è‡ªåŠ¨å®‰è£…ï¼Œé€‰æ‹©åŒ… AWS-ConfigureAWSPackage
* **é…ç½®** å¹¶ **å¯åŠ¨** CloudWatch ä»£ç†

ä¸€ä¸ªæ—¥å¿—ç»„æœ‰è®¸å¤šæµã€‚ä¸€ä¸ªæµæœ‰è®¸å¤šäº‹ä»¶ã€‚åœ¨æ¯ä¸ªæµå†…éƒ¨ï¼Œäº‹ä»¶ä¿è¯æŒ‰é¡ºåºæ’åˆ—ã€‚
```bash
# Dashboards #

## Returns a list of the dashboards of your account
aws cloudwatch list-dashboards

## Retrieves the details of the specified dashboard
aws cloudwatch get-dashboard --dashboard-name <value>

# Metrics #

## Returns a list of the specified metric
aws cloudwatch list-metrics [--namespace <value>] [--metric-name <value>] [--dimensions <value>] [--include-linked-accounts | --no-include-linked-accounts]

## Retrieves metric data (this operation can include a CloudWatch Metrics Insights query, and one or more metric math functions)
aws cloudwatch get-metric-data --metric-data-queries <value> --start-time <value> --end-time <value>

## Retrieves statistics for the specified metric and namespace over a range of time
aws cloudwatch get-metric-statistics --namespace <value> --metric-name <value> [--dimensions <value>] --start-time <value> --end-time <value> --period <value>

## Returns a list of the metric streams of your account
aws cloudwatch list-metric-streams

## Retrieves information about the specified metric stream
aws cloudwatch get-metric-stream --name <value>

## Retrieve snapshots of the specified metric widgets
aws cloudwatch get-metric-widget-image --metric-widget <value>

# Alarms #

## Retrieves the specified alarm
aws cloudwatch describe-alarms [--alarm-names <value>] [--alarm-name-prefix <value>] [--alarm-types <value>] [--state-value <value>]

## Retrieves the alarms history, even for deleted alarms
aws cloudwatch describe-alarm-history [--alarm-name <value>] [--alarm-types <value>] [--history-item-type <ConfigurationUpdate | StateUpdate | Action>] [--start-date <value>] [--end-date <value>]

## Retrieves standard alarms based on the specified metric
aws cloudwatch escribe-alarms-for-metric --metric-name <value> --namespace <value> [--dimensions <value>]

# Anomaly Detections #

## Lists the anomaly detection models that you have created in your account
aws cloudwatch describe-anomaly-detectors [--namespace <value>] [--metric-name <value>] [--dimensions <value>]

## Lists all the Contributor Insight rules in your account
aws cloudwatch describe-insight-rules

## Retrieves the data collected over a time range for a given Contributor Insight rule
aws cloudwatch get-insight-rule-report --rule-name <value> --start-time <value> --end-time <value> --period <value>

## Lists managed Contributor Insights rules in your account for a specified resource
aws cloudwatch list-managed-insight-rules --resource-arn <value>

# Tags #

## Lists the tags associated with the specified CloudWatch resources
aws cloudwatch list-tags-for-resource --resource-arn <value>

# CloudWatch Logs #
aws logs tail "<log_group_name>" --followaws logs get-log-events --log-group-name "<log_group_name>" --log-stream-name "<log_stream_name>" --output text > <output_file>

# CloudWatch Events #
aws events list-rules
aws events describe-rule --name <name>aws events list-targets-by-rule --rule <name>aws events list-archives
aws events describe-archive --archive-name <name>aws events list-connections
aws events describe-connection --name <name>aws events list-endpoints
aws events describe-endpoint --name <name>aws events list-event-sources
aws events describe-event-source --name <name>aws events list-replays
aws events list-api-destinations
aws events list-event-buses
```
## åæ¸—é€ / ç»•è¿‡

### **`cloudwatch:DeleteAlarms`,`cloudwatch:PutMetricAlarm` ,Â `cloudwatch:PutCompositeAlarm`**

æ‹¥æœ‰è¿™äº›æƒé™çš„æ”»å‡»è€…å¯ä»¥æ˜¾è‘—ç ´åç»„ç»‡çš„ç›‘æ§å’Œè­¦æŠ¥åŸºç¡€è®¾æ–½ã€‚é€šè¿‡åˆ é™¤ç°æœ‰è­¦æŠ¥ï¼Œæ”»å‡»è€…å¯ä»¥ç¦ç”¨å…³é”®è­¦æŠ¥ï¼Œé€šçŸ¥ç®¡ç†å‘˜å…³é”®æ€§èƒ½é—®é¢˜ã€å®‰å…¨æ¼æ´æˆ–æ“ä½œå¤±è´¥ã€‚æ­¤å¤–ï¼Œé€šè¿‡åˆ›å»ºæˆ–ä¿®æ”¹åº¦é‡è­¦æŠ¥ï¼Œæ”»å‡»è€…è¿˜å¯ä»¥ç”¨è™šå‡è­¦æŠ¥è¯¯å¯¼ç®¡ç†å‘˜æˆ–æ¶ˆé™¤åˆæ³•è­¦æŠ¥ï¼Œæœ‰æ•ˆæ©ç›–æ¶æ„æ´»åŠ¨å¹¶é˜»æ­¢å¯¹å®é™…äº‹ä»¶çš„åŠæ—¶å“åº”ã€‚

æ­¤å¤–ï¼Œæ‹¥æœ‰ **`cloudwatch:PutCompositeAlarm`** æƒé™çš„æ”»å‡»è€…å¯ä»¥åˆ›å»ºä¸€ä¸ªå¤åˆè­¦æŠ¥çš„å¾ªç¯æˆ–å¾ªç¯ï¼Œå…¶ä¸­å¤åˆè­¦æŠ¥ A ä¾èµ–äºå¤åˆè­¦æŠ¥ Bï¼Œè€Œå¤åˆè­¦æŠ¥ B ä¹Ÿä¾èµ–äºå¤åˆè­¦æŠ¥ Aã€‚åœ¨è¿™ç§æƒ…å†µä¸‹ï¼Œæ— æ³•åˆ é™¤å¾ªç¯ä¸­çš„ä»»ä½•å¤åˆè­¦æŠ¥ï¼Œå› ä¸ºå§‹ç»ˆè¿˜æœ‰ä¸€ä¸ªä¾èµ–äºæ‚¨è¦åˆ é™¤çš„è­¦æŠ¥çš„å¤åˆè­¦æŠ¥ã€‚
```bash
aws cloudwatch put-metric-alarm --cli-input-json <value> | --alarm-name <value> --comparison-operator <value> --evaluation-periods <value> [--datapoints-to-alarm <value>] [--threshold <value>] [--alarm-description <value>] [--alarm-actions <value>] [--metric-name <value>] [--namespace <value>] [--statistic <value>] [--dimensions <value>] [--period <value>]
aws cloudwatch delete-alarms --alarm-names <value>
aws cloudwatch put-composite-alarm --alarm-name <value> --alarm-rule <value> [--no-actions-enabled | --actions-enabled [--alarm-actions <value>] [--insufficient-data-actions <value>] [--ok-actions <value>] ]
```
ä»¥ä¸‹ç¤ºä¾‹æ˜¾ç¤ºå¦‚ä½•ä½¿åº¦é‡è­¦æŠ¥å¤±æ•ˆï¼š

- æ­¤åº¦é‡è­¦æŠ¥ç›‘è§†ç‰¹å®š EC2 å®ä¾‹çš„å¹³å‡ CPU åˆ©ç”¨ç‡ï¼Œæ¯ 300 ç§’è¯„ä¼°ä¸€æ¬¡è¯¥åº¦é‡ï¼Œå¹¶éœ€è¦ 6 ä¸ªè¯„ä¼°å‘¨æœŸï¼ˆæ€»å…± 30 åˆ†é’Ÿï¼‰ã€‚å¦‚æœå¹³å‡ CPU åˆ©ç”¨ç‡åœ¨è¿™äº›å‘¨æœŸä¸­è‡³å°‘ 4 ä¸ªå‘¨æœŸè¶…è¿‡ 60%ï¼Œåˆ™è­¦æŠ¥å°†è§¦å‘å¹¶å‘é€é€šçŸ¥åˆ°æŒ‡å®šçš„ SNS ä¸»é¢˜ã€‚
- é€šè¿‡å°†é˜ˆå€¼ä¿®æ”¹ä¸ºå¤§äº 99%ï¼Œå°†å‘¨æœŸè®¾ç½®ä¸º 10 ç§’ï¼Œå°†è¯„ä¼°å‘¨æœŸè®¾ç½®ä¸º 8640ï¼ˆå› ä¸º 8640 ä¸ª 10 ç§’å‘¨æœŸç­‰äº 1 å¤©ï¼‰ï¼Œå°†æ•°æ®ç‚¹è®¾ç½®ä¸ºè­¦æŠ¥ä¹Ÿè®¾ç½®ä¸º 8640ï¼Œéœ€è¦ CPU åˆ©ç”¨ç‡åœ¨æ•´ä¸ª 24 å°æ—¶å†…æ¯ 10 ç§’è¶…è¿‡ 99% æ‰èƒ½è§¦å‘è­¦æŠ¥ã€‚

{% tabs %}
{% tab title="åŸå§‹åº¦é‡è­¦æŠ¥" %}
```json
{
"Namespace": "AWS/EC2",
"MetricName": "CPUUtilization",
"Dimensions": [
{
"Name": "InstanceId",
"Value": "i-01234567890123456"
}
],
"AlarmActions": [
"arn:aws:sns:us-east-1:123456789012:example_sns"
],
"ComparisonOperator": "GreaterThanThreshold",
"DatapointsToAlarm": 4,
"EvaluationPeriods": 6,
"Period": 300,
"Statistic": "Average",
"Threshold": 60,
"AlarmDescription": "CPU Utilization of i-01234567890123456 over 60%",
"AlarmName": "EC2 instance i-01234567890123456 CPU Utilization"
}
```
{% endtab %}
{% tab title="ä¿®æ”¹åçš„æŒ‡æ ‡è­¦æŠ¥" %}
```json
{
"Namespace": "AWS/EC2",
"MetricName": "CPUUtilization",
"Dimensions": [
{
"Name": "InstanceId",
"Value": "i-0645d6d414dadf9f8"
}
],
"AlarmActions": [],
"ComparisonOperator": "GreaterThanThreshold",
"DatapointsToAlarm": 8640,
"EvaluationPeriods": 8640,
"Period": 10,
"Statistic": "Average",
"Threshold": 99,
"AlarmDescription": "CPU Utilization of i-01234567890123456 with 60% as threshold",
"AlarmName": "Instance i-0645d6d414dadf9f8 CPU Utilization"
}

```
{% endtab %}
{% endtabs %}
**æ½œåœ¨å½±å“**ï¼šå¯¹å…³é”®äº‹ä»¶ç¼ºä¹é€šçŸ¥ï¼Œå¯èƒ½å­˜åœ¨æœªè¢«æ£€æµ‹åˆ°çš„é—®é¢˜ï¼Œè¯¯æŠ¥è­¦æŠ¥ï¼ŒæŠ‘åˆ¶çœŸå®è­¦æŠ¥ï¼Œå¹¶å¯èƒ½é”™è¿‡å¯¹çœŸå®äº‹ä»¶çš„æ£€æµ‹ã€‚

### **`cloudwatch:DeleteAlarmActions`ã€`cloudwatch:EnableAlarmActions`ã€`cloudwatch:SetAlarmState`**

é€šè¿‡åˆ é™¤è­¦æŠ¥æ“ä½œï¼Œæ”»å‡»è€…å¯ä»¥é˜»æ­¢åœ¨è¾¾åˆ°è­¦æŠ¥çŠ¶æ€æ—¶è§¦å‘å…³é”®è­¦æŠ¥å’Œè‡ªåŠ¨å“åº”ï¼Œä¾‹å¦‚é€šçŸ¥ç®¡ç†å‘˜æˆ–è§¦å‘è‡ªåŠ¨æ‰©å±•æ´»åŠ¨ã€‚ä¸å½“åœ°å¯ç”¨æˆ–é‡æ–°å¯ç”¨è­¦æŠ¥æ“ä½œä¹Ÿå¯èƒ½å¯¼è‡´æ„å¤–è¡Œä¸ºï¼Œæ— è®ºæ˜¯é‡æ–°æ¿€æ´»å…ˆå‰ç¦ç”¨çš„æ“ä½œï¼Œè¿˜æ˜¯ä¿®æ”¹è§¦å‘å“ªäº›æ“ä½œï¼Œå¯èƒ½å¯¼è‡´æ··ä¹±å’Œè¯¯å¯¼çš„äº‹ä»¶å“åº”ã€‚

æ­¤å¤–ï¼Œæ‹¥æœ‰æƒé™çš„æ”»å‡»è€…å¯ä»¥æ“çºµè­¦æŠ¥çŠ¶æ€ï¼Œèƒ½å¤Ÿåˆ›å»ºè™šå‡è­¦æŠ¥ä»¥åˆ†æ•£å’Œæ··æ·†ç®¡ç†å‘˜çš„æ³¨æ„åŠ›ï¼Œæˆ–è€…æ¶ˆé™¤çœŸå®è­¦æŠ¥ä»¥éšè—æ­£åœ¨è¿›è¡Œçš„æ¶æ„æ´»åŠ¨æˆ–å…³é”®ç³»ç»Ÿæ•…éšœã€‚

- å¦‚æœåœ¨å¤åˆè­¦æŠ¥ä¸Šä½¿ç”¨**`SetAlarmState`**ï¼Œåˆ™ä¸èƒ½ä¿è¯å¤åˆè­¦æŠ¥ä¼šè¿”å›åˆ°å…¶å®é™…çŠ¶æ€ã€‚åªæœ‰åœ¨å…¶ä»»ä½•å­è­¦æŠ¥æ”¹å˜çŠ¶æ€æ—¶ï¼Œå®ƒæ‰ä¼šè¿”å›åˆ°å…¶å®é™…çŠ¶æ€ã€‚å¦‚æœæ›´æ–°å…¶é…ç½®ï¼Œå®ƒä¹Ÿä¼šé‡æ–°è¯„ä¼°ã€‚
```bash
aws cloudwatch disable-alarm-actions --alarm-names <value>
aws cloudwatch enable-alarm-actions --alarm-names <value>
aws cloudwatch set-alarm-state --alarm-name <value> --state-value <OK | ALARM | INSUFFICIENT_DATA> --state-reason <value> [--state-reason-data <value>]
```
**æ½œåœ¨å½±å“**ï¼šå¯¹å…³é”®äº‹ä»¶ç¼ºä¹é€šçŸ¥ï¼Œå¯èƒ½å­˜åœ¨æœªè¢«æ£€æµ‹çš„é—®é¢˜ï¼Œè¯¯æŠ¥è­¦æŠ¥ï¼ŒæŠ‘åˆ¶çœŸå®è­¦æŠ¥å¹¶å¯èƒ½é”™è¿‡å¯¹çœŸå®äº‹ä»¶çš„æ£€æµ‹ã€‚

### **`cloudwatch:DeleteAnomalyDetector`ï¼Œ`cloudwatch:PutAnomalyDetector`**

æ”»å‡»è€…å¯ä»¥ç ´åæ£€æµ‹å’Œå“åº”æŒ‡æ ‡æ•°æ®ä¸­å¼‚å¸¸æ¨¡å¼æˆ–å¼‚å¸¸çš„èƒ½åŠ›ã€‚é€šè¿‡åˆ é™¤ç°æœ‰çš„å¼‚å¸¸æ£€æµ‹å™¨ï¼Œæ”»å‡»è€…å¯ä»¥ç¦ç”¨å…³é”®çš„è­¦æŠ¥æœºåˆ¶ï¼›é€šè¿‡åˆ›å»ºæˆ–ä¿®æ”¹å®ƒä»¬ï¼Œå¯ä»¥é…ç½®é”™è¯¯æˆ–åˆ¶é€ è™šå‡é˜³æ€§ï¼Œä»¥åˆ†æ•£æ³¨æ„åŠ›æˆ–æ·¹æ²¡ç›‘æ§ã€‚
```bash
aws cloudwatch delete-anomaly-detector [--cli-input-json <value> | --namespace <value> --metric-name <value> --dimensions <value> --stat <value>]
aws cloudwatch put-anomaly-detector [--cli-input-json <value> | --namespace <value> --metric-name <value> --dimensions <value> --stat <value> --configuration <value> --metric-characteristics <value>]
```
ä»¥ä¸‹ç¤ºä¾‹æ˜¾ç¤ºå¦‚ä½•ä½¿æŒ‡æ ‡å¼‚å¸¸æ£€æµ‹å™¨å¤±æ•ˆã€‚è¯¥æŒ‡æ ‡å¼‚å¸¸æ£€æµ‹å™¨ç›‘è§†ç‰¹å®š EC2 å®ä¾‹çš„å¹³å‡ CPU åˆ©ç”¨ç‡ï¼Œåªéœ€æ·»åŠ å¸¦æœ‰æ‰€éœ€æ—¶é—´èŒƒå›´çš„â€œExcludedTimeRangesâ€å‚æ•°ï¼Œå°±è¶³ä»¥ç¡®ä¿å¼‚å¸¸æ£€æµ‹å™¨åœ¨è¯¥æœŸé—´ä¸åˆ†ææˆ–è­¦æŠ¥ä»»ä½•ç›¸å…³æ•°æ®ã€‚

{% tabs %}
{% tab title="åŸå§‹æŒ‡æ ‡å¼‚å¸¸æ£€æµ‹å™¨" %}
```json
{
"SingleMetricAnomalyDetector": {
"Namespace": "AWS/EC2",
"MetricName": "CPUUtilization",
"Stat": "Average",
"Dimensions": [
{
"Name": "InstanceId",
"Value": "i-0123456789abcdefg"
}
]
}
}
```
{% endtab %}
{% tab title="ä¿®æ”¹åçš„æŒ‡æ ‡å¼‚å¸¸æ£€æµ‹å™¨" %}
```json
{
"SingleMetricAnomalyDetector": {
"Namespace": "AWS/EC2",
"MetricName": "CPUUtilization",
"Stat": "Average",
"Dimensions": [
{
"Name": "InstanceId",
"Value": "i-0123456789abcdefg"
}
]
},
"Configuration": {
"ExcludedTimeRanges": [
{
"StartTime": "2023-01-01T00:00:00Z",
"EndTime": "2053-01-01T23:59:59Z"
}
],
"Timezone": "Europe/Madrid"
}
}
```
**æ½œåœ¨å½±å“**ï¼šå¯¹æ£€æµ‹å¼‚å¸¸æ¨¡å¼æˆ–å®‰å…¨å¨èƒäº§ç”Ÿç›´æ¥å½±å“ã€‚

### **`cloudwatch:DeleteDashboards`,Â `cloudwatch:PutDashboard`**

æ”»å‡»è€…å¯ä»¥é€šè¿‡åˆ›å»ºã€ä¿®æ”¹æˆ–åˆ é™¤ä»ªè¡¨æ¿æ¥å±å®³ç»„ç»‡çš„ç›‘æ§å’Œå¯è§†åŒ–èƒ½åŠ›ã€‚è¿™äº›æƒé™å¯ä»¥è¢«åˆ©ç”¨æ¥å‰Šå¼±å¯¹ç³»ç»Ÿæ€§èƒ½å’Œå¥åº·çŠ¶å†µçš„å…³é”®å¯è§æ€§ï¼Œä¿®æ”¹ä»ªè¡¨æ¿ä»¥æ˜¾ç¤ºä¸æ­£ç¡®çš„æ•°æ®æˆ–éšè—æ¶æ„æ´»åŠ¨ã€‚
```bash
aws cloudwatch delete-dashboards --dashboard-names <value>
aws cloudwatch put-dashboard --dashboard-name <value> --dashboard-body <value>
```
**æ½œåœ¨å½±å“**ï¼šç›‘æ§å¯è§æ€§ä¸§å¤±å’Œè¯¯å¯¼æ€§ä¿¡æ¯ã€‚

### **`cloudwatch:DeleteInsightRules`,Â `cloudwatch:PutInsightRule` ,`cloudwatch:PutManagedInsightRule`**

æ´å¯Ÿè§„åˆ™ç”¨äºæ£€æµ‹å¼‚å¸¸ã€ä¼˜åŒ–æ€§èƒ½å’Œæœ‰æ•ˆç®¡ç†èµ„æºã€‚é€šè¿‡åˆ é™¤ç°æœ‰çš„æ´å¯Ÿè§„åˆ™ï¼Œæ”»å‡»è€…å¯ä»¥ç§»é™¤å…³é”®çš„ç›‘æ§èƒ½åŠ›ï¼Œä½¿ç³»ç»Ÿæ— æ³•å‘ç°æ€§èƒ½é—®é¢˜å’Œå®‰å…¨å¨èƒã€‚æ­¤å¤–ï¼Œæ”»å‡»è€…å¯ä»¥åˆ›å»ºæˆ–ä¿®æ”¹æ´å¯Ÿè§„åˆ™ä»¥ç”Ÿæˆè¯¯å¯¼æ€§æ•°æ®æˆ–éšè—æ¶æ„æ´»åŠ¨ï¼Œå¯¼è‡´é”™è¯¯çš„è¯Šæ–­å’Œè¿ç»´å›¢é˜Ÿåšå‡ºä¸å½“å“åº”ã€‚
```bash
aws cloudwatch delete-insight-rules --rule-names <value>
aws cloudwatch put-insight-rule --rule-name <value> --rule-definition <value> [--rule-state <value>]
aws cloudwatch put-managed-insight-rules --managed-rules <value>
```
**æ½œåœ¨å½±å“**ï¼šéš¾ä»¥æ£€æµ‹å’Œåº”å¯¹æ€§èƒ½é—®é¢˜å’Œå¼‚å¸¸ï¼Œå¯¼è‡´å†³ç­–å¤±è¯¯ï¼Œå¯èƒ½éšè—æ¶æ„æ´»åŠ¨æˆ–ç³»ç»Ÿæ•…éšœã€‚

### **`cloudwatch:DisableInsightRules`,Â `cloudwatch:EnableInsightRules`**

é€šè¿‡ç¦ç”¨å…³é”®çš„æ´å¯Ÿè§„åˆ™ï¼Œæ”»å‡»è€…å¯ä»¥æœ‰æ•ˆåœ°ä½¿ç»„ç»‡å¯¹å…³é”®æ€§èƒ½å’Œå®‰å…¨æŒ‡æ ‡è§†è€Œä¸è§ã€‚ç›¸åï¼Œé€šè¿‡å¯ç”¨æˆ–é…ç½®è¯¯å¯¼æ€§è§„åˆ™ï¼Œå¯èƒ½ä¼šç”Ÿæˆè™šå‡æ•°æ®ï¼Œåˆ¶é€ å™ªéŸ³ï¼Œæˆ–éšè—æ¶æ„æ´»åŠ¨ã€‚
```bash
aws cloudwatch disable-insight-rules --rule-names <value>
aws cloudwatch enable-insight-rules --rule-names <value>
```
**æ½œåœ¨å½±å“**ï¼šè¿ç»´å›¢é˜Ÿæ··æ·†ï¼Œå¯¼è‡´å¯¹å®é™…é—®é¢˜çš„å»¶è¿Ÿå“åº”å’ŒåŸºäºè™šå‡è­¦æŠ¥çš„ä¸å¿…è¦æ“ä½œã€‚

### **`cloudwatch:DeleteMetricStream`ï¼Œ`cloudwatch:PutMetricStream`ï¼Œ`cloudwatch:PutMetricData`**

æ‹¥æœ‰**`cloudwatch:DeleteMetricStream`**ï¼Œ**`cloudwatch:PutMetricStream`**æƒé™çš„æ”»å‡»è€…å¯ä»¥åˆ›å»ºå’Œåˆ é™¤åº¦é‡æ•°æ®æµï¼Œä»è€Œå±åŠå®‰å…¨æ€§ã€ç›‘æ§å’Œæ•°æ®å®Œæ•´æ€§ï¼š

- **åˆ›å»ºæ¶æ„æµ**ï¼šåˆ›å»ºåº¦é‡æµä»¥å°†æ•æ„Ÿæ•°æ®å‘é€åˆ°æœªç»æˆæƒçš„ç›®çš„åœ°ã€‚
- **èµ„æºæ“çºµ**ï¼šåˆ›å»ºå…·æœ‰è¿‡å¤šæ•°æ®çš„æ–°åº¦é‡æµå¯èƒ½äº§ç”Ÿå¤§é‡å™ªéŸ³ï¼Œå¯¼è‡´é”™è¯¯è­¦æŠ¥ï¼Œæ©ç›–çœŸå®é—®é¢˜ã€‚
- **ç›‘æ§ä¸­æ–­**ï¼šåˆ é™¤åº¦é‡æµï¼Œæ”»å‡»è€…å°†ä¸­æ–­ç›‘æ§æ•°æ®çš„æŒç»­æµåŠ¨ã€‚è¿™æ ·ï¼Œä»–ä»¬çš„æ¶æ„æ´»åŠ¨å°†è¢«æœ‰æ•ˆéšè—ã€‚

åŒæ ·ï¼Œæ‹¥æœ‰**`cloudwatch:PutMetricData`**æƒé™ï¼Œå¯ä»¥å‘åº¦é‡æµæ·»åŠ æ•°æ®ã€‚è¿™å¯èƒ½å¯¼è‡´æ‹’ç»æœåŠ¡æ”»å‡»ï¼Œå› ä¸ºæ·»åŠ äº†å¤§é‡ä¸æ­£ç¡®çš„æ•°æ®ï¼Œä½¿å…¶å˜å¾—å®Œå…¨æ— ç”¨ã€‚
```bash
aws cloudwatch delete-metric-stream --name <value>
aws cloudwatch put-metric-stream --name <value> [--include-filters <value>] [--exclude-filters <value>] --firehose-arn <value> --role-arn <value> --output-format <value>
aws cloudwatch put-metric-data --namespace <value> [--metric-data <value>] [--metric-name <value>] [--timestamp <value>] [--unit <value>] [--value <value>] [--dimensions <value>]
```
ä¾‹å­ï¼šå‘ç‰¹å®šçš„ EC2 å®ä¾‹æ·»åŠ ç›¸åº”äº 70% CPU åˆ©ç”¨ç‡çš„æ•°æ®ï¼š
```bash
aws cloudwatch put-metric-data --namespace "AWS/EC2" --metric-name "CPUUtilization" --value 70 --unit "Percent" --dimensions "InstanceId=i-0123456789abcdefg"
```
**æ½œåœ¨å½±å“**ï¼šç›‘æ§æ•°æ®æµä¸­æ–­ï¼Œå½±å“å¼‚å¸¸å’Œäº‹ä»¶æ£€æµ‹ï¼Œèµ„æºæ“çºµä»¥åŠç”±äºåˆ›å»ºè¿‡å¤šæŒ‡æ ‡æµè€Œå¯¼è‡´æˆæœ¬å¢åŠ ã€‚

### **`cloudwatch:StopMetricStreams`ï¼Œ`cloudwatch:StartMetricStreams`**

æ”»å‡»è€…å¯ä»¥æ§åˆ¶å—å½±å“çš„æŒ‡æ ‡æ•°æ®æµçš„æµåŠ¨ï¼ˆå¦‚æœæ²¡æœ‰èµ„æºé™åˆ¶ï¼Œåˆ™æ˜¯æ¯ä¸ªæ•°æ®æµï¼‰ã€‚é€šè¿‡æƒé™**`cloudwatch:StopMetricStreams`**ï¼Œæ”»å‡»è€…å¯ä»¥é€šè¿‡åœæ­¢å…³é”®æŒ‡æ ‡æµæ¥éšè—å…¶æ¶æ„æ´»åŠ¨ã€‚
```bash
aws cloudwatch stop-metric-streams --names <value>
aws cloudwatch start-metric-streams --names <value>
```
**æ½œåœ¨å½±å“**ï¼šç›‘æ§æ•°æ®æµä¸­æ–­ï¼Œå½±å“å¼‚å¸¸å’Œäº‹ä»¶çš„æ£€æµ‹ã€‚

### **`cloudwatch:TagResource`ï¼Œ`cloudwatch:UntagResource`**

æ”»å‡»è€…å¯ä»¥å‘CloudWatchèµ„æºï¼ˆç›®å‰ä»…é™è­¦æŠ¥å’ŒContributor Insightsè§„åˆ™ï¼‰æ·»åŠ ã€ä¿®æ”¹æˆ–ç§»é™¤æ ‡ç­¾ã€‚è¿™å¯èƒ½ä¼šç ´ååŸºäºæ ‡ç­¾çš„ç»„ç»‡è®¿é—®æ§åˆ¶ç­–ç•¥ã€‚
```bash
aws cloudwatch tag-resource --resource-arn <value> --tags <value>
aws cloudwatch untag-resource --resource-arn <value> --tag-keys <value>
```
**æ½œåœ¨å½±å“**ï¼šç ´ååŸºäºæ ‡ç­¾çš„è®¿é—®æ§åˆ¶ç­–ç•¥ã€‚

## å‚è€ƒèµ„æ–™

* [https://cloudsecdocs.com/aws/services/logging/cloudwatch/](https://cloudsecdocs.com/aws/services/logging/cloudwatch/#general-info)
* [https://docs.aws.amazon.com/service-authorization/latest/reference/list_amazoncloudwatch.html](https://docs.aws.amazon.com/service-authorization/latest/reference/list_amazoncloudwatch.html)
* [https://docs.aws.amazon.com/es_es/AmazonCloudWatch/latest/monitoring/cloudwatch_concepts.html#Metric](https://docs.aws.amazon.com/es_es/AmazonCloudWatch/latest/monitoring/cloudwatch_concepts.html#Metric)

{% hint style="success" %}
å­¦ä¹ å¹¶ç»ƒä¹ AWSé»‘å®¢æŠ€æœ¯ï¼š<img src="/.gitbook/assets/image.png" alt="" data-size="line">[**HackTricks åŸ¹è®­ AWS çº¢é˜Ÿä¸“å®¶ (ARTE)**](https://training.hacktricks.xyz/courses/arte)<img src="/.gitbook/assets/image.png" alt="" data-size="line">\
å­¦ä¹ å¹¶ç»ƒä¹ GCPé»‘å®¢æŠ€æœ¯ï¼š<img src="/.gitbook/assets/image (2).png" alt="" data-size="line">[**HackTricks åŸ¹è®­ GCP çº¢é˜Ÿä¸“å®¶ (GRTE)**<img src="/.gitbook/assets/image (2).png" alt="" data-size="line">](https://training.hacktricks.xyz/courses/grte)

<details>

<summary>æ”¯æŒ HackTricks</summary>

* æŸ¥çœ‹[**è®¢é˜…è®¡åˆ’**](https://github.com/sponsors/carlospolop)!
* **åŠ å…¥** ğŸ’¬ [**Discord ç¾¤ç»„**](https://discord.gg/hRep4RUj7f) æˆ– [**ç”µæŠ¥ç¾¤ç»„**](https://t.me/peass) æˆ– **å…³æ³¨**æˆ‘ä»¬çš„ **Twitter** ğŸ¦ [**@hacktricks\_live**](https://twitter.com/hacktricks\_live)**.**
* é€šè¿‡å‘ [**HackTricks**](https://github.com/carlospolop/hacktricks) å’Œ [**HackTricks Cloud**](https://github.com/carlospolop/hacktricks-cloud) github ä»“åº“æäº¤ PR æ¥åˆ†äº«é»‘å®¢æŠ€å·§ã€‚

</details>
{% endhint %}
