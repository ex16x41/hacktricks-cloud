# AWS - DataPipeline, CodePipeline & CodeCommit Enum

{% hint style="success" %}
Learn & practice AWS Hacking:<img src="../../../.gitbook/assets/image (1).png" alt="" data-size="line">[**HackTricks Training AWS Red Team Expert (ARTE)**](https://training.hacktricks.xyz/courses/arte)<img src="../../../.gitbook/assets/image (1).png" alt="" data-size="line">\
Learn & practice GCP Hacking: <img src="../../../.gitbook/assets/image (2).png" alt="" data-size="line">[**HackTricks Training GCP Red Team Expert (GRTE)**<img src="../../../.gitbook/assets/image (2).png" alt="" data-size="line">](https://training.hacktricks.xyz/courses/grte)

<details>

<summary>Support HackTricks</summary>

* Check the [**subscription plans**](https://github.com/sponsors/carlospolop)!
* **Join the** 💬 [**Discord group**](https://discord.gg/hRep4RUj7f) or the [**telegram group**](https://t.me/peass) or **follow** us on **Twitter** 🐦 [**@hacktricks\_live**](https://twitter.com/hacktricks\_live)**.**
* **Share hacking tricks by submitting PRs to the** [**HackTricks**](https://github.com/carlospolop/hacktricks) and [**HackTricks Cloud**](https://github.com/carlospolop/hacktricks-cloud) github repos.

</details>
{% endhint %}

## DataPipeline

AWS Data Pipeline έχει σχεδιαστεί για να διευκολύνει την **πρόσβαση, μετασχηματισμό και αποτελεσματική μεταφορά** δεδομένων σε μεγάλη κλίμακα. Επιτρέπει τις εξής λειτουργίες:

1. **Πρόσβαση στα Δεδομένα σας Όπου Είναι Αποθηκευμένα**: Δεδομένα που βρίσκονται σε διάφορες υπηρεσίες AWS μπορούν να προσπελαστούν χωρίς προβλήματα.
2. **Μετασχηματισμός και Επεξεργασία σε Μεγάλη Κλίμακα**: Οι εργασίες επεξεργασίας και μετασχηματισμού δεδομένων μεγάλης κλίμακας διαχειρίζονται αποτελεσματικά.
3. **Αποτελεσματική Μεταφορά Αποτελεσμάτων**: Τα επεξεργασμένα δεδομένα μπορούν να μεταφερθούν αποτελεσματικά σε πολλές υπηρεσίες AWS, συμπεριλαμβανομένων:
* Amazon S3
* Amazon RDS
* Amazon DynamoDB
* Amazon EMR

Στην ουσία, το AWS Data Pipeline απλοποιεί την κίνηση και επεξεργασία δεδομένων μεταξύ διαφορετικών υπηρεσιών υπολογισμού και αποθήκευσης AWS, καθώς και πηγών δεδομένων εντός του οργανισμού, σε καθορισμένα χρονικά διαστήματα.

### Enumeration
```bash
aws datapipeline list-pipelines
aws datapipeline describe-pipelines --pipeline-ids <ID>
aws datapipeline list-runs --pipeline-id <ID>
aws datapipeline get-pipeline-definition --pipeline-id <ID>
```
### Privesc

Στην παρακάτω σελίδα μπορείτε να ελέγξετε πώς να **καταχραστείτε τις άδειες του datapipeline για να κλιμακώσετε τα προνόμια**:

{% content-ref url="../aws-privilege-escalation/aws-datapipeline-privesc.md" %}
[aws-datapipeline-privesc.md](../aws-privilege-escalation/aws-datapipeline-privesc.md)
{% endcontent-ref %}

## CodePipeline

Το AWS CodePipeline είναι μια πλήρως διαχειριζόμενη **υπηρεσία συνεχούς παράδοσης** που σας βοηθά να **αυτοματοποιήσετε τις διαδικασίες κυκλοφορίας σας** για γρήγορες και αξιόπιστες ενημερώσεις εφαρμογών και υποδομών. Το CodePipeline αυτοματοποιεί τις **φάσεις κατασκευής, δοκιμής και ανάπτυξης** της διαδικασίας κυκλοφορίας σας κάθε φορά που υπάρχει αλλαγή στον κώδικα, με βάση το μοντέλο κυκλοφορίας που ορίζετε.

### Enumeration
```bash
aws codepipeline list-pipelines
aws codepipeline get-pipeline --name <pipeline_name>
aws codepipeline list-action-executions --pipeline-name <pl_name>
aws codepipeline list-pipeline-executions --pipeline-name <pl_name>
aws codepipeline list-webhooks
aws codepipeline get-pipeline-state --name <pipeline_name>
```
### Privesc

In the following page you can check how to **abuse codepipeline permissions to escalate privileges**:

{% content-ref url="../aws-privilege-escalation/aws-codepipeline-privesc.md" %}
[aws-codepipeline-privesc.md](../aws-privilege-escalation/aws-codepipeline-privesc.md)
{% endcontent-ref %}

## CodeCommit

Είναι μια **υπηρεσία ελέγχου εκδόσεων**, η οποία φιλοξενείται και διαχειρίζεται πλήρως από την Amazon, η οποία μπορεί να χρησιμοποιηθεί για την ιδιωτική αποθήκευση δεδομένων (έγγραφα, δυαδικά αρχεία, πηγαίος κώδικας) και τη διαχείρισή τους στο cloud.

Αυτή **εξαλείφει** την απαίτηση για τον χρήστη να γνωρίζει το Git και **να διαχειρίζεται το δικό του σύστημα ελέγχου εκδόσεων** ή να ανησυχεί για την κλιμάκωση της υποδομής του. Το Codecommit υποστηρίζει όλες τις τυπικές **λειτουργίες που μπορούν να βρεθούν στο Git**, που σημαίνει ότι λειτουργεί χωρίς προβλήματα με τα τρέχοντα εργαλεία που βασίζονται στο Git του χρήστη.

### Enumeration
```bash
# Repos
aws codecommit list-repositories
aws codecommit get-repository --repository-name <name>
aws codecommit get-repository-triggers --repository-name <name>
aws codecommit list-branches --repository-name <name>
aws codecommit list-pull-requests --repository-name <name>

# Approval rules
aws codecommit list-approval-rule-templates
aws codecommit get-approval-rule-template --approval-rule-template-name <name>
aws codecommit list-associated-approval-rule-templates-for-repository --repository-name <name>

# Get & Put files
## Get a file
aws codecommit get-file --repository-name backend-api --file-path app.py
## Put a file
aws codecommit get-branch --repository-name backend-api --branch-name master
aws codecommit put-file --repository-name backend-api --branch-name master --file-content fileb://./app.py --file-path app.py --parent-commit-id <commit-id>

# SSH Keys & Clone repo
## Get codecommit keys
aws iam list-ssh-public-keys #User keys for CodeCommit
aws iam get-ssh-public-key --user-name <username> --ssh-public-key-id <id> --encoding SSH #Get public key with metadata
# The previous command will give you the fingerprint of the ssh key
# With the next command you can check the fingerprint of an ssh key and compare them
ssh-keygen -f .ssh/id_rsa -l -E md5

# Clone repo
git clone ssh://<SSH-KEY-ID>@git-codecommit.<REGION>.amazonaws.com/v1/repos/<repo-name>
```
## Αναφορές

* [https://docs.aws.amazon.com/whitepapers/latest/aws-overview/analytics.html](https://docs.aws.amazon.com/whitepapers/latest/aws-overview/analytics.html)

{% hint style="success" %}
Μάθετε & εξασκηθείτε στο AWS Hacking:<img src="../../../.gitbook/assets/image (1).png" alt="" data-size="line">[**HackTricks Training AWS Red Team Expert (ARTE)**](https://training.hacktricks.xyz/courses/arte)<img src="../../../.gitbook/assets/image (1).png" alt="" data-size="line">\
Μάθετε & εξασκηθείτε στο GCP Hacking: <img src="../../../.gitbook/assets/image (2).png" alt="" data-size="line">[**HackTricks Training GCP Red Team Expert (GRTE)**<img src="../../../.gitbook/assets/image (2).png" alt="" data-size="line">](https://training.hacktricks.xyz/courses/grte)

<details>

<summary>Υποστήριξη HackTricks</summary>

* Ελέγξτε τα [**σχέδια συνδρομής**](https://github.com/sponsors/carlospolop)!
* **Εγγραφείτε στην** 💬 [**ομάδα Discord**](https://discord.gg/hRep4RUj7f) ή στην [**ομάδα telegram**](https://t.me/peass) ή **ακολουθήστε** μας στο **Twitter** 🐦 [**@hacktricks\_live**](https://twitter.com/hacktricks\_live)**.**
* **Μοιραστείτε κόλπα hacking υποβάλλοντας PRs στα** [**HackTricks**](https://github.com/carlospolop/hacktricks) και [**HackTricks Cloud**](https://github.com/carlospolop/hacktricks-cloud) github repos.

</details>
{% endhint %}
