# AWS - DataPipeline, CodePipeline & CodeCommit Enum

{% hint style="success" %}
Learn & practice AWS Hacking:<img src="../../../.gitbook/assets/image (1).png" alt="" data-size="line">[**HackTricks Training AWS Red Team Expert (ARTE)**](https://training.hacktricks.xyz/courses/arte)<img src="../../../.gitbook/assets/image (1).png" alt="" data-size="line">\
Learn & practice GCP Hacking: <img src="../../../.gitbook/assets/image (2).png" alt="" data-size="line">[**HackTricks Training GCP Red Team Expert (GRTE)**<img src="../../../.gitbook/assets/image (2).png" alt="" data-size="line">](https://training.hacktricks.xyz/courses/grte)

<details>

<summary>Support HackTricks</summary>

* Check the [**subscription plans**](https://github.com/sponsors/carlospolop)!
* **Join the** ğŸ’¬ [**Discord group**](https://discord.gg/hRep4RUj7f) or the [**telegram group**](https://t.me/peass) or **follow** us on **Twitter** ğŸ¦ [**@hacktricks\_live**](https://twitter.com/hacktricks\_live)**.**
* **Share hacking tricks by submitting PRs to the** [**HackTricks**](https://github.com/carlospolop/hacktricks) and [**HackTricks Cloud**](https://github.com/carlospolop/hacktricks-cloud) github repos.

</details>
{% endhint %}

## DataPipeline

AWS Data Pipelineì€ **ëŒ€ê·œëª¨ ë°ì´í„°ì˜ ì ‘ê·¼, ë³€í™˜ ë° íš¨ìœ¨ì ì¸ ì „ì†¡**ì„ ìš©ì´í•˜ê²Œ í•˜ê¸° ìœ„í•´ ì„¤ê³„ë˜ì—ˆìŠµë‹ˆë‹¤. ë‹¤ìŒê³¼ ê°™ì€ ì‘ì—…ì„ ìˆ˜í–‰í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤:

1. **ë°ì´í„°ê°€ ì €ì¥ëœ ìœ„ì¹˜ì—ì„œ ì ‘ê·¼**: ë‹¤ì–‘í•œ AWS ì„œë¹„ìŠ¤ì— ì €ì¥ëœ ë°ì´í„°ì— ì›í™œí•˜ê²Œ ì ‘ê·¼í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.
2. **ëŒ€ê·œëª¨ë¡œ ë³€í™˜ ë° ì²˜ë¦¬**: ëŒ€ê·œëª¨ ë°ì´í„° ì²˜ë¦¬ ë° ë³€í™˜ ì‘ì—…ì´ íš¨ìœ¨ì ìœ¼ë¡œ ì²˜ë¦¬ë©ë‹ˆë‹¤.
3. **ê²°ê³¼ë¥¼ íš¨ìœ¨ì ìœ¼ë¡œ ì „ì†¡**: ì²˜ë¦¬ëœ ë°ì´í„°ëŠ” ë‹¤ìŒì„ í¬í•¨í•œ ì—¬ëŸ¬ AWS ì„œë¹„ìŠ¤ë¡œ íš¨ìœ¨ì ìœ¼ë¡œ ì „ì†¡ë  ìˆ˜ ìˆìŠµë‹ˆë‹¤:
* Amazon S3
* Amazon RDS
* Amazon DynamoDB
* Amazon EMR

ë³¸ì§ˆì ìœ¼ë¡œ, AWS Data Pipelineì€ ì§€ì •ëœ ê°„ê²©ìœ¼ë¡œ ì„œë¡œ ë‹¤ë¥¸ AWS ì»´í“¨íŒ… ë° ì €ì¥ ì„œë¹„ìŠ¤ì™€ ì˜¨í”„ë ˆë¯¸ìŠ¤ ë°ì´í„° ì†ŒìŠ¤ ê°„ì˜ ë°ì´í„° ì´ë™ ë° ì²˜ë¦¬ë¥¼ ê°„ì†Œí™”í•©ë‹ˆë‹¤.

### Enumeration
```bash
aws datapipeline list-pipelines
aws datapipeline describe-pipelines --pipeline-ids <ID>
aws datapipeline list-runs --pipeline-id <ID>
aws datapipeline get-pipeline-definition --pipeline-id <ID>
```
### Privesc

ë‹¤ìŒ í˜ì´ì§€ì—ì„œ **datapipeline ê¶Œí•œì„ ì•…ìš©í•˜ì—¬ ê¶Œí•œ ìƒìŠ¹**í•˜ëŠ” ë°©ë²•ì„ í™•ì¸í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤:

{% content-ref url="../aws-privilege-escalation/aws-datapipeline-privesc.md" %}
[aws-datapipeline-privesc.md](../aws-privilege-escalation/aws-datapipeline-privesc.md)
{% endcontent-ref %}

## CodePipeline

AWS CodePipelineì€ **ì§€ì†ì ì¸ ë°°í¬ ì„œë¹„ìŠ¤**ë¡œ, **ì‹ ì†í•˜ê³  ì‹ ë¢°í•  ìˆ˜ ìˆëŠ” ì• í”Œë¦¬ì¼€ì´ì…˜ ë° ì¸í”„ë¼ ì—…ë°ì´íŠ¸**ë¥¼ ìœ„í•´ **ë¦´ë¦¬ìŠ¤ íŒŒì´í”„ë¼ì¸ì„ ìë™í™”**í•˜ëŠ” ë° ë„ì›€ì„ ì¤ë‹ˆë‹¤. CodePipelineì€ ì½”ë“œ ë³€ê²½ì´ ìˆì„ ë•Œë§ˆë‹¤ ì •ì˜í•œ ë¦´ë¦¬ìŠ¤ ëª¨ë¸ì— ë”°ë¼ ë¦´ë¦¬ìŠ¤ í”„ë¡œì„¸ìŠ¤ì˜ **ë¹Œë“œ, í…ŒìŠ¤íŠ¸ ë° ë°°í¬ ë‹¨ê³„**ë¥¼ ìë™í™”í•©ë‹ˆë‹¤.

### Enumeration
```bash
aws codepipeline list-pipelines
aws codepipeline get-pipeline --name <pipeline_name>
aws codepipeline list-action-executions --pipeline-name <pl_name>
aws codepipeline list-pipeline-executions --pipeline-name <pl_name>
aws codepipeline list-webhooks
aws codepipeline get-pipeline-state --name <pipeline_name>
```
### Privesc

ë‹¤ìŒ í˜ì´ì§€ì—ì„œ **codepipeline ê¶Œí•œì„ ì•…ìš©í•˜ì—¬ ê¶Œí•œ ìƒìŠ¹**í•˜ëŠ” ë°©ë²•ì„ í™•ì¸í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤:

{% content-ref url="../aws-privilege-escalation/aws-codepipeline-privesc.md" %}
[aws-codepipeline-privesc.md](../aws-privilege-escalation/aws-codepipeline-privesc.md)
{% endcontent-ref %}

## CodeCommit

ì´ëŠ” Amazonì´ í˜¸ìŠ¤íŒ…í•˜ê³  ì™„ì „íˆ ê´€ë¦¬í•˜ëŠ” **ë²„ì „ ê´€ë¦¬ ì„œë¹„ìŠ¤**ë¡œ, ë°ì´í„°ë¥¼ ê°œì¸ì ìœ¼ë¡œ ì €ì¥í•˜ê³ (ë¬¸ì„œ, ì´ì§„ íŒŒì¼, ì†ŒìŠ¤ ì½”ë“œ) í´ë¼ìš°ë“œì—ì„œ ê´€ë¦¬í•˜ëŠ” ë° ì‚¬ìš©í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.

ì‚¬ìš©ìê°€ Gitì„ ì•Œê³  **ìì‹ ì˜ ì†ŒìŠ¤ ì œì–´ ì‹œìŠ¤í…œì„ ê´€ë¦¬**í•˜ê±°ë‚˜ ì¸í”„ë¼ë¥¼ í™•ì¥í•˜ê±°ë‚˜ ì¶•ì†Œí•˜ëŠ” ê²ƒì— ëŒ€í•´ ê±±ì •í•  í•„ìš”ê°€ ì—†ìŠµë‹ˆë‹¤. Codecommitì€ Gitì—ì„œ ì°¾ì„ ìˆ˜ ìˆëŠ” ëª¨ë“  í‘œì¤€ **ê¸°ëŠ¥ì„ ì§€ì›**í•˜ë¯€ë¡œ ì‚¬ìš©ìì˜ í˜„ì¬ Git ê¸°ë°˜ ë„êµ¬ì™€ ì›í™œí•˜ê²Œ ì‘ë™í•©ë‹ˆë‹¤.

### Enumeration
```bash
# Repos
aws codecommit list-repositories
aws codecommit get-repository --repository-name <name>
aws codecommit get-repository-triggers --repository-name <name>
aws codecommit list-branches --repository-name <name>
aws codecommit list-pull-requests --repository-name <name>

# Approval rules
aws codecommit list-approval-rule-templates
aws codecommit get-approval-rule-template --approval-rule-template-name <name>
aws codecommit list-associated-approval-rule-templates-for-repository --repository-name <name>

# Get & Put files
## Get a file
aws codecommit get-file --repository-name backend-api --file-path app.py
## Put a file
aws codecommit get-branch --repository-name backend-api --branch-name master
aws codecommit put-file --repository-name backend-api --branch-name master --file-content fileb://./app.py --file-path app.py --parent-commit-id <commit-id>

# SSH Keys & Clone repo
## Get codecommit keys
aws iam list-ssh-public-keys #User keys for CodeCommit
aws iam get-ssh-public-key --user-name <username> --ssh-public-key-id <id> --encoding SSH #Get public key with metadata
# The previous command will give you the fingerprint of the ssh key
# With the next command you can check the fingerprint of an ssh key and compare them
ssh-keygen -f .ssh/id_rsa -l -E md5

# Clone repo
git clone ssh://<SSH-KEY-ID>@git-codecommit.<REGION>.amazonaws.com/v1/repos/<repo-name>
```
## References

* [https://docs.aws.amazon.com/whitepapers/latest/aws-overview/analytics.html](https://docs.aws.amazon.com/whitepapers/latest/aws-overview/analytics.html)

{% hint style="success" %}
AWS í•´í‚¹ ë°°ìš°ê¸° ë° ì—°ìŠµí•˜ê¸°:<img src="../../../.gitbook/assets/image (1).png" alt="" data-size="line">[**HackTricks Training AWS Red Team Expert (ARTE)**](https://training.hacktricks.xyz/courses/arte)<img src="../../../.gitbook/assets/image (1).png" alt="" data-size="line">\
GCP í•´í‚¹ ë°°ìš°ê¸° ë° ì—°ìŠµí•˜ê¸°: <img src="../../../.gitbook/assets/image (2).png" alt="" data-size="line">[**HackTricks Training GCP Red Team Expert (GRTE)**<img src="../../../.gitbook/assets/image (2).png" alt="" data-size="line">](https://training.hacktricks.xyz/courses/grte)

<details>

<summary>HackTricks ì§€ì›í•˜ê¸°</summary>

* [**êµ¬ë… ê³„íš**](https://github.com/sponsors/carlospolop) í™•ì¸í•˜ê¸°!
* **ğŸ’¬ [**Discord ê·¸ë£¹**](https://discord.gg/hRep4RUj7f) ë˜ëŠ” [**í…”ë ˆê·¸ë¨ ê·¸ë£¹**](https://t.me/peass)ì— ì°¸ì—¬í•˜ê±°ë‚˜ **Twitter** ğŸ¦ [**@hacktricks\_live**](https://twitter.com/hacktricks\_live)**ë¥¼ íŒ”ë¡œìš°í•˜ì„¸ìš”.**
* **[**HackTricks**](https://github.com/carlospolop/hacktricks) ë° [**HackTricks Cloud**](https://github.com/carlospolop/hacktricks-cloud) github ë¦¬í¬ì§€í† ë¦¬ì— PRì„ ì œì¶œí•˜ì—¬ í•´í‚¹ íŒì„ ê³µìœ í•˜ì„¸ìš”.**

</details>
{% endhint %}
