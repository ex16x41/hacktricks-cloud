# AWS - è¨¼æ˜æ›¸ãƒãƒãƒ¼ã‚¸ãƒ£ï¼ˆACMï¼‰ï¼†ãƒ—ãƒ©ã‚¤ãƒ™ãƒ¼ãƒˆè¨¼æ˜æ›¸æ©Ÿé–¢ï¼ˆPCAï¼‰

{% hint style="success" %}
AWSãƒãƒƒã‚­ãƒ³ã‚°ã®å­¦ç¿’ã¨ç·´ç¿’ï¼š<img src="/.gitbook/assets/image.png" alt="" data-size="line">[**HackTricks Training AWS Red Team Expert (ARTE)**](https://training.hacktricks.xyz/courses/arte)<img src="/.gitbook/assets/image.png" alt="" data-size="line">\
GCPãƒãƒƒã‚­ãƒ³ã‚°ã®å­¦ç¿’ã¨ç·´ç¿’ï¼š<img src="/.gitbook/assets/image (2).png" alt="" data-size="line">[**HackTricks Training GCP Red Team Expert (GRTE)**<img src="/.gitbook/assets/image (2).png" alt="" data-size="line">](https://training.hacktricks.xyz/courses/grte)

<details>

<summary>HackTricksã®ã‚µãƒãƒ¼ãƒˆ</summary>

* [**ã‚µãƒ–ã‚¹ã‚¯ãƒªãƒ—ã‚·ãƒ§ãƒ³ãƒ—ãƒ©ãƒ³**](https://github.com/sponsors/carlospolop)ã‚’ãƒã‚§ãƒƒã‚¯ï¼
* ğŸ’¬ [**Discordã‚°ãƒ«ãƒ¼ãƒ—**](https://discord.gg/hRep4RUj7f)ã«**å‚åŠ **ã¾ãŸã¯[**Telegramã‚°ãƒ«ãƒ¼ãƒ—**](https://t.me/peass)ã«å‚åŠ ã™ã‚‹ã‹ã€**Twitter** ğŸ¦ [**@hacktricks\_live**](https://twitter.com/hacktricks\_live)**ã‚’ãƒ•ã‚©ãƒ­ãƒ¼**ã—ã¦ãã ã•ã„ã€‚
* **HackTricks**ã¨**HackTricks Cloud**ã®GitHubãƒªãƒã‚¸ãƒˆãƒªã«PRã‚’æå‡ºã™ã‚‹ã“ã¨ã§ã€ãƒãƒƒã‚­ãƒ³ã‚°ãƒˆãƒªãƒƒã‚¯ã‚’å…±æœ‰ã—ã¦ãã ã•ã„ã€‚

</details>
{% endhint %}

## åŸºæœ¬æƒ…å ±

**AWS Certificate Managerï¼ˆACMï¼‰**ã¯ã€AWSã‚µãƒ¼ãƒ“ã‚¹ãŠã‚ˆã³å†…éƒ¨ãƒªã‚½ãƒ¼ã‚¹ã®**SSL/TLSè¨¼æ˜æ›¸ã®ãƒ—ãƒ­ãƒ“ã‚¸ãƒ§ãƒ‹ãƒ³ã‚°ã€ç®¡ç†ã€å±•é–‹ã‚’åŠ¹ç‡åŒ–**ã™ã‚‹ã‚µãƒ¼ãƒ“ã‚¹ã¨ã—ã¦æä¾›ã•ã‚Œã¦ã„ã¾ã™ã€‚ACMã«ã‚ˆã£ã¦ã€è³¼å…¥ã€ã‚¢ãƒƒãƒ—ãƒ­ãƒ¼ãƒ‰ã€è¨¼æ˜æ›¸ã®æ›´æ–°ãªã©ã®æ‰‹å‹•ãƒ—ãƒ­ã‚»ã‚¹ãŒ**æ’é™¤**ã•ã‚Œã¾ã™ã€‚ã“ã‚Œã«ã‚ˆã‚Šã€ãƒ¦ãƒ¼ã‚¶ãƒ¼ã¯**Elastic Load Balancersã€Amazon CloudFrontãƒ‡ã‚£ã‚¹ãƒˆãƒªãƒ“ãƒ¥ãƒ¼ã‚·ãƒ§ãƒ³ã€API Gatewayä¸Šã®API**ãªã©ã€ã•ã¾ã–ã¾ãªAWSãƒªã‚½ãƒ¼ã‚¹ã«è¨¼æ˜æ›¸ã‚’åŠ¹ç‡çš„ã«ãƒªã‚¯ã‚¨ã‚¹ãƒˆãŠã‚ˆã³å®Ÿè£…ã§ãã¾ã™ã€‚

ACMã®é‡è¦ãªæ©Ÿèƒ½ã®1ã¤ã¯ã€**è¨¼æ˜æ›¸ã®è‡ªå‹•æ›´æ–°**ã§ã‚ã‚Šã€ç®¡ç†ã‚ªãƒ¼ãƒãƒ¼ãƒ˜ãƒƒãƒ‰ã‚’å¤§å¹…ã«å‰Šæ¸›ã—ã¾ã™ã€‚ã•ã‚‰ã«ã€ACMã¯**å†…éƒ¨åˆ©ç”¨ã®ãŸã‚ã®ãƒ—ãƒ©ã‚¤ãƒ™ãƒ¼ãƒˆè¨¼æ˜æ›¸ã®ä½œæˆã¨ä¸­å¤®é›†ä¸­ç®¡ç†**ã‚’ã‚µãƒãƒ¼ãƒˆã—ã¦ã„ã¾ã™ã€‚ACMã‚’ä»‹ã—ã¦Elastic Load Balancingã€Amazon CloudFrontã€Amazon API Gatewayãªã©ã®çµ±åˆAWSã‚µãƒ¼ãƒ“ã‚¹ç”¨ã®SSL/TLSè¨¼æ˜æ›¸ã¯è¿½åŠ è²»ç”¨ãªã—ã§æä¾›ã•ã‚Œã¾ã™ãŒã€ãƒ¦ãƒ¼ã‚¶ãƒ¼ã¯ã‚¢ãƒ—ãƒªã‚±ãƒ¼ã‚·ãƒ§ãƒ³ã§åˆ©ç”¨ã•ã‚Œã‚‹AWSãƒªã‚½ãƒ¼ã‚¹ã«é–¢é€£ã™ã‚‹ã‚³ã‚¹ãƒˆã¨ã€çµ±åˆã•ã‚Œã¦ã„ãªã„ACMã‚µãƒ¼ãƒ“ã‚¹ã§ä½¿ç”¨ã•ã‚Œã‚‹å„**ãƒ—ãƒ©ã‚¤ãƒ™ãƒ¼ãƒˆè¨¼æ˜æ›¸æ©Ÿé–¢ï¼ˆCAï¼‰**ãŠã‚ˆã³ãƒ—ãƒ©ã‚¤ãƒ™ãƒ¼ãƒˆè¨¼æ˜æ›¸ã”ã¨ã®æœˆé¡æ–™é‡‘ã«è²¬ä»»ãŒã‚ã‚Šã¾ã™ã€‚

**AWS Private Certificate Authority**ã¯ã€**ç®¡ç†ã•ã‚ŒãŸãƒ—ãƒ©ã‚¤ãƒ™ãƒ¼ãƒˆCAã‚µãƒ¼ãƒ“ã‚¹**ã¨ã—ã¦æä¾›ã•ã‚Œã€ãƒ—ãƒ©ã‚¤ãƒ™ãƒ¼ãƒˆè¨¼æ˜æ›¸ã‚’å«ã‚ãŸè¨¼æ˜æ›¸ç®¡ç†ã‚’æ‹¡å¼µã—ã€çµ„ç¹”å†…ã®ãƒªã‚½ãƒ¼ã‚¹ã®èªè¨¼ã«é‡è¦ã§ã™ã€‚

## åˆ—æŒ™

### ACM
```bash
# List certificates
aws acm list-certificates

# Get certificate info
aws acm describe-certificate --certificate-arn <arn> # Check "InUseBy" to check which resources are using it

# Get certificate data
aws acm get-certificate --certificate-arn "arn:aws:acm:us-east-1:188868097724:certificate/865abced-82c9-43bf-b7d2-1f4948bf353d"

# Account configuration
aws acm get-account-configuration
```
### PCM

**AWS Certificate Manager (ACM) and Private Certificate Authority (PCA)**

**AWS Certificate Manager (ACM)**

AWS Certificate Manager (ACM) ã¯ã€SSL/TLS è¨¼æ˜æ›¸ã‚’ç°¡å˜ã«ä½œæˆã€ç®¡ç†ã€ãƒ‡ãƒ—ãƒ­ã‚¤ã§ãã‚‹ã‚µãƒ¼ãƒ“ã‚¹ã§ã™ã€‚ACM ã¯ã€ãƒ‘ãƒ–ãƒªãƒƒã‚¯è¨¼æ˜æ›¸ã¨ãƒ—ãƒ©ã‚¤ãƒ™ãƒ¼ãƒˆè¨¼æ˜æ›¸ã®ä¸¡æ–¹ã‚’æä¾›ã—ã¦ã„ã¾ã™ã€‚ãƒ‘ãƒ–ãƒªãƒƒã‚¯è¨¼æ˜æ›¸ã¯ã€AWS ã®ã‚µãƒãƒ¼ãƒˆã™ã‚‹ã‚µãƒ¼ãƒ“ã‚¹ã‚„å¤–éƒ¨ã®ãƒªã‚½ãƒ¼ã‚¹ã«ä½¿ç”¨ã§ãã¾ã™ã€‚ãƒ—ãƒ©ã‚¤ãƒ™ãƒ¼ãƒˆè¨¼æ˜æ›¸ã¯ã€VPC å†…ã®ãƒªã‚½ãƒ¼ã‚¹é–“ã§ã®é€šä¿¡ã‚’æš—å·åŒ–ã™ã‚‹ãŸã‚ã«ä½¿ç”¨ã•ã‚Œã¾ã™ã€‚

**Private Certificate Authority (PCA)**

AWS Private Certificate Authority (PCA) ã¯ã€ã‚«ã‚¹ã‚¿ãƒ ãƒ«ãƒ¼ãƒˆè¨¼æ˜æ©Ÿé–¢ (CA) ã‚’ä½œæˆã€é‹ç”¨ã§ãã‚‹ãƒ•ãƒ«ãƒãƒãƒ¼ã‚¸ãƒ‰ã‚µãƒ¼ãƒ“ã‚¹ã§ã™ã€‚PCA ã‚’ä½¿ç”¨ã™ã‚‹ã¨ã€ç‹¬è‡ªã®ãƒ«ãƒ¼ãƒˆ CA ã¨ä¸­é–“ CA ã‚’ä½œæˆã—ã€ãã‚Œã‚‰ã‚’ä½¿ç”¨ã—ã¦ SSL/TLS è¨¼æ˜æ›¸ã‚’ç™ºè¡Œã§ãã¾ã™ã€‚ã“ã‚Œã«ã‚ˆã‚Šã€ç‹¬è‡ªã® PKI ã‚¤ãƒ³ãƒ•ãƒ©ã‚¹ãƒˆãƒ©ã‚¯ãƒãƒ£ã‚’æ§‹ç¯‰ã—ã€ã‚»ã‚­ãƒ¥ãƒªãƒ†ã‚£è¦ä»¶ã‚’æº€ãŸã™ã“ã¨ãŒã§ãã¾ã™ã€‚
```bash
# List CAs
aws acm-pca list-certificate-authorities

# Get CA info
aws acm-pca describe-certificate-authority --certificate-authority-arn <arn>

# Get CA Permissions
aws acm-pca list-permissions --certificate-authority-arn <arn>

# Get CA certificate
aws acm-pca get-certificate-authority-certificate --certificate-authority-arn <arn>

# Certificate request
aws acm-pca get-certificate-authority-csr --certificate-authority-arn <arn>

# Get CA Policy (if any)
aws acm-pca get-policy --resource-arn <arn>
```
## Privesc

TODO

## Post Exploitation

TODO

{% hint style="success" %}
AWSãƒãƒƒã‚­ãƒ³ã‚°ã®å­¦ç¿’ã¨ç·´ç¿’:<img src="/.gitbook/assets/image.png" alt="" data-size="line">[**HackTricks Training AWS Red Team Expert (ARTE)**](https://training.hacktricks.xyz/courses/arte)<img src="/.gitbook/assets/image.png" alt="" data-size="line">\
GCPãƒãƒƒã‚­ãƒ³ã‚°ã®å­¦ç¿’ã¨ç·´ç¿’: <img src="/.gitbook/assets/image (2).png" alt="" data-size="line">[**HackTricks Training GCP Red Team Expert (GRTE)**<img src="/.gitbook/assets/image (2).png" alt="" data-size="line">](https://training.hacktricks.xyz/courses/grte)

<details>

<summary>HackTricksã®ã‚µãƒãƒ¼ãƒˆ</summary>

* [**ã‚µãƒ–ã‚¹ã‚¯ãƒªãƒ—ã‚·ãƒ§ãƒ³ãƒ—ãƒ©ãƒ³**](https://github.com/sponsors/carlospolop)ã‚’ãƒã‚§ãƒƒã‚¯ï¼
* ğŸ’¬ [**Discordã‚°ãƒ«ãƒ¼ãƒ—**](https://discord.gg/hRep4RUj7f)ã¾ãŸã¯[**telegramã‚°ãƒ«ãƒ¼ãƒ—**](https://t.me/peass)ã«**å‚åŠ **ã™ã‚‹ã‹ã€**Twitter** ğŸ¦ [**@hacktricks\_live**](https://twitter.com/hacktricks\_live)**ã‚’ãƒ•ã‚©ãƒ­ãƒ¼**ã—ã¦ãã ã•ã„ã€‚
* ãƒãƒƒã‚­ãƒ³ã‚°ãƒˆãƒªãƒƒã‚¯ã‚’å…±æœ‰ã™ã‚‹ãŸã‚ã«ã€[**HackTricks**](https://github.com/carlospolop/hacktricks)ã¨[**HackTricks Cloud**](https://github.com/carlospolop/hacktricks-cloud)ã®GitHubãƒªãƒã‚¸ãƒˆãƒªã«PRã‚’æå‡ºã—ã¦ãã ã•ã„ã€‚

</details>
{% endhint %}
