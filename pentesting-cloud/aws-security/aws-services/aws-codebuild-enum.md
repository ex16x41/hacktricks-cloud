# AWS - Codebuild Enum

{% hint style="success" %}
å­¦ä¹ ä¸å®è·µ AWS é»‘å®¢æŠ€æœ¯ï¼š<img src="../../../.gitbook/assets/image (1) (1).png" alt="" data-size="line">[**HackTricks åŸ¹è®­ AWS çº¢é˜Ÿä¸“å®¶ (ARTE)**](https://training.hacktricks.xyz/courses/arte)<img src="../../../.gitbook/assets/image (1) (1).png" alt="" data-size="line">\
å­¦ä¹ ä¸å®è·µ GCP é»‘å®¢æŠ€æœ¯ï¼š<img src="../../../.gitbook/assets/image (2).png" alt="" data-size="line">[**HackTricks åŸ¹è®­ GCP çº¢é˜Ÿä¸“å®¶ (GRTE)**<img src="../../../.gitbook/assets/image (2).png" alt="" data-size="line">](https://training.hacktricks.xyz/courses/grte)

<details>

<summary>æ”¯æŒ HackTricks</summary>

* æŸ¥çœ‹ [**è®¢é˜…è®¡åˆ’**](https://github.com/sponsors/carlospolop)!
* **åŠ å…¥** ğŸ’¬ [**Discord ç¾¤ç»„**](https://discord.gg/hRep4RUj7f) æˆ– [**Telegram ç¾¤ç»„**](https://t.me/peass) æˆ– **å…³æ³¨** æˆ‘ä»¬çš„ **Twitter** ğŸ¦ [**@hacktricks\_live**](https://twitter.com/hacktricks\_live)**.**
* **é€šè¿‡å‘** [**HackTricks**](https://github.com/carlospolop/hacktricks) å’Œ [**HackTricks Cloud**](https://github.com/carlospolop/hacktricks-cloud) GitHub ä»“åº“æäº¤ PR åˆ†äº«é»‘å®¢æŠ€å·§ã€‚

</details>
{% endhint %}

## CodeBuild

AWS **CodeBuild** è¢«è®¤ä¸ºæ˜¯ä¸€ä¸ª **å®Œå…¨æ‰˜ç®¡çš„æŒç»­é›†æˆæœåŠ¡**ã€‚è¯¥æœåŠ¡çš„ä¸»è¦ç›®çš„æ˜¯è‡ªåŠ¨åŒ–ç¼–è¯‘æºä»£ç ã€æ‰§è¡Œæµ‹è¯•å’Œæ‰“åŒ…è½¯ä»¶ä»¥ä¾›éƒ¨ç½²çš„è¿‡ç¨‹ã€‚CodeBuild æä¾›çš„ä¸»è¦å¥½å¤„åœ¨äºå®ƒèƒ½å¤Ÿå‡è½»ç”¨æˆ·é…ç½®ã€ç®¡ç†å’Œæ‰©å±•æ„å»ºæœåŠ¡å™¨çš„éœ€æ±‚ã€‚è¿™ç§ä¾¿åˆ©æ€§æ˜¯å› ä¸ºè¯¥æœåŠ¡æœ¬èº«ç®¡ç†è¿™äº›ä»»åŠ¡ã€‚AWS CodeBuild çš„åŸºæœ¬åŠŸèƒ½åŒ…æ‹¬ï¼š

1. **æ‰˜ç®¡æœåŠ¡**ï¼šCodeBuild ç®¡ç†å’Œæ‰©å±•æ„å»ºæœåŠ¡å™¨ï¼Œä½¿ç”¨æˆ·å…äºæœåŠ¡å™¨ç»´æŠ¤ã€‚
2. **æŒç»­é›†æˆ**ï¼šå®ƒä¸å¼€å‘å’Œéƒ¨ç½²å·¥ä½œæµé›†æˆï¼Œè‡ªåŠ¨åŒ–è½¯ä»¶å‘å¸ƒè¿‡ç¨‹ä¸­çš„æ„å»ºå’Œæµ‹è¯•é˜¶æ®µã€‚
3. **åŒ…ç”Ÿäº§**ï¼šåœ¨æ„å»ºå’Œæµ‹è¯•é˜¶æ®µä¹‹åï¼Œå®ƒå‡†å¤‡è½¯ä»¶åŒ…ï¼Œä½¿å…¶å‡†å¤‡å¥½è¿›è¡Œéƒ¨ç½²ã€‚

AWS CodeBuild ä¸å…¶ä»– AWS æœåŠ¡æ— ç¼é›†æˆï¼Œæé«˜äº† CI/CDï¼ˆæŒç»­é›†æˆ/æŒç»­éƒ¨ç½²ï¼‰ç®¡é“çš„æ•ˆç‡å’Œå¯é æ€§ã€‚

### **Github/Gitlab/Bitbucket å‡­è¯**

#### **é»˜è®¤æºå‡­è¯**

è¿™æ˜¯ä¸€ä¸ªé—ç•™é€‰é¡¹ï¼Œå¯ä»¥é…ç½®ä¸€äº› **è®¿é—®æƒé™**ï¼ˆå¦‚ Github ä»¤ç‰Œæˆ–åº”ç”¨ï¼‰ï¼Œè¿™äº›æƒé™å°† **åœ¨ codebuild é¡¹ç›®ä¹‹é—´å…±äº«**ï¼Œä»¥ä¾¿æ‰€æœ‰é¡¹ç›®éƒ½å¯ä»¥ä½¿ç”¨è¿™ç»„é…ç½®çš„å‡­è¯ã€‚

å­˜å‚¨çš„å‡­è¯ï¼ˆä»¤ç‰Œã€å¯†ç ç­‰ï¼‰ç”± **codebuild ç®¡ç†**ï¼Œå¹¶ä¸”æ²¡æœ‰ä»»ä½•å…¬å…±æ–¹å¼å¯ä»¥ä» AWS API ä¸­æ£€ç´¢å®ƒä»¬ã€‚

#### è‡ªå®šä¹‰æºå‡­è¯

æ ¹æ®å­˜å‚¨åº“å¹³å°ï¼ˆGithubã€Gitlab å’Œ Bitbucketï¼‰ï¼Œæä¾›ä¸åŒçš„é€‰é¡¹ã€‚ä½†ä¸€èˆ¬æ¥è¯´ï¼Œä»»ä½•éœ€è¦ **å­˜å‚¨ä»¤ç‰Œæˆ–å¯†ç çš„é€‰é¡¹éƒ½å°†ä½œä¸ºç§˜å¯†å­˜å‚¨åœ¨ç§˜å¯†ç®¡ç†å™¨ä¸­**ã€‚

è¿™å…è®¸ **ä¸åŒçš„ codebuild é¡¹ç›®ä½¿ç”¨ä¸åŒé…ç½®çš„è®¿é—®æƒé™**ï¼Œè€Œä¸ä»…ä»…æ˜¯ä½¿ç”¨é…ç½®çš„é»˜è®¤æƒé™ã€‚

### Enumeration
```bash
# List external repo creds (such as github tokens)
## It doesn't return the token but just the ARN where it's located
aws codebuild list-source-credentials

# Projects
aws codebuild list-shared-projects
aws codebuild list-projects
aws codebuild batch-get-projects --names <project_name> # Check for creds in env vars

# Builds
aws codebuild list-builds
aws codebuild list-builds-for-project --project-name <p_name>
aws codebuild list-build-batches
aws codebuild list-build-batches-for-project --project-name <p_name>

# Reports
aws codebuild list-reports
aws codebuild describe-test-cases --report-arn <ARN>
```
### Privesc

åœ¨ä»¥ä¸‹é¡µé¢ä¸­ï¼Œæ‚¨å¯ä»¥æŸ¥çœ‹å¦‚ä½•**æ»¥ç”¨codebuildæƒé™ä»¥æå‡ç‰¹æƒ**ï¼š

{% content-ref url="../aws-privilege-escalation/aws-codebuild-privesc.md" %}
[aws-codebuild-privesc.md](../aws-privilege-escalation/aws-codebuild-privesc.md)
{% endcontent-ref %}

### Post Exploitation

{% content-ref url="../aws-post-exploitation/aws-codebuild-post-exploitation/" %}
[aws-codebuild-post-exploitation](../aws-post-exploitation/aws-codebuild-post-exploitation/)
{% endcontent-ref %}

### Unauthenticated Access

{% content-ref url="../aws-unauthenticated-enum-access/aws-codebuild-unauthenticated-access.md" %}
[aws-codebuild-unauthenticated-access.md](../aws-unauthenticated-enum-access/aws-codebuild-unauthenticated-access.md)
{% endcontent-ref %}

## References

* [https://docs.aws.amazon.com/managedservices/latest/userguide/code-build.html](https://docs.aws.amazon.com/managedservices/latest/userguide/code-build.html)

{% hint style="success" %}
å­¦ä¹ å’Œå®è·µAWSé»‘å®¢æŠ€æœ¯ï¼š<img src="../../../.gitbook/assets/image (1) (1).png" alt="" data-size="line">[**HackTricksåŸ¹è®­AWSçº¢é˜Ÿä¸“å®¶ï¼ˆARTEï¼‰**](https://training.hacktricks.xyz/courses/arte)<img src="../../../.gitbook/assets/image (1) (1).png" alt="" data-size="line">\
å­¦ä¹ å’Œå®è·µGCPé»‘å®¢æŠ€æœ¯ï¼š<img src="../../../.gitbook/assets/image (2).png" alt="" data-size="line">[**HackTricksåŸ¹è®­GCPçº¢é˜Ÿä¸“å®¶ï¼ˆGRTEï¼‰**<img src="../../../.gitbook/assets/image (2).png" alt="" data-size="line">](https://training.hacktricks.xyz/courses/grte)

<details>

<summary>æ”¯æŒHackTricks</summary>

* æŸ¥çœ‹[**è®¢é˜…è®¡åˆ’**](https://github.com/sponsors/carlospolop)!
* **åŠ å…¥** ğŸ’¬ [**Discordç¾¤ç»„**](https://discord.gg/hRep4RUj7f)æˆ–[**ç”µæŠ¥ç¾¤ç»„**](https://t.me/peass)æˆ–**åœ¨** **Twitter** ğŸ¦ [**@hacktricks\_live**](https://twitter.com/hacktricks\_live)**ä¸Šå…³æ³¨æˆ‘ä»¬ã€‚**
* **é€šè¿‡å‘** [**HackTricks**](https://github.com/carlospolop/hacktricks)å’Œ[**HackTricks Cloud**](https://github.com/carlospolop/hacktricks-cloud) githubä»“åº“æäº¤PRåˆ†äº«é»‘å®¢æŠ€å·§ã€‚

</details>
{% endhint %}
