# AWS - Codebuild Enum

{% hint style="success" %}
Learn & practice AWS Hacking:<img src="../../../.gitbook/assets/image (1) (1) (1).png" alt="" data-size="line">[**HackTricks Training AWS Red Team Expert (ARTE)**](https://training.hacktricks.xyz/courses/arte)<img src="../../../.gitbook/assets/image (1) (1) (1).png" alt="" data-size="line">\
Learn & practice GCP Hacking: <img src="../../../.gitbook/assets/image (2).png" alt="" data-size="line">[**HackTricks Training GCP Red Team Expert (GRTE)**<img src="../../../.gitbook/assets/image (2).png" alt="" data-size="line">](https://training.hacktricks.xyz/courses/grte)

<details>

<summary>Support HackTricks</summary>

* Check the [**subscription plans**](https://github.com/sponsors/carlospolop)!
* **Join the** üí¨ [**Discord group**](https://discord.gg/hRep4RUj7f) or the [**telegram group**](https://t.me/peass) or **follow** us on **Twitter** üê¶ [**@hacktricks\_live**](https://twitter.com/hacktricks_live)**.**
* **Share hacking tricks by submitting PRs to the** [**HackTricks**](https://github.com/carlospolop/hacktricks) and [**HackTricks Cloud**](https://github.com/carlospolop/hacktricks-cloud) github repos.

</details>
{% endhint %}

## CodeBuild

AWS **CodeBuild** –≤–≤–∞–∂–∞—î—Ç—å—Å—è **–ø–æ–≤–Ω—ñ—Å—Ç—é –∫–µ—Ä–æ–≤–∞–Ω–∏–º —Å–µ—Ä–≤—ñ—Å–æ–º –±–µ–∑–ø–µ—Ä–µ—Ä–≤–Ω–æ—ó —ñ–Ω—Ç–µ–≥—Ä–∞—Ü—ñ—ó**. –û—Å–Ω–æ–≤–Ω–∞ –º–µ—Ç–∞ —Ü—å–æ–≥–æ —Å–µ—Ä–≤—ñ—Å—É –ø–æ–ª—è–≥–∞—î –≤ –∞–≤—Ç–æ–º–∞—Ç–∏–∑–∞—Ü—ñ—ó –ø–æ—Å–ª—ñ–¥–æ–≤–Ω–æ—Å—Ç—ñ –∫–æ–º–ø—ñ–ª—è—Ü—ñ—ó –≤–∏—Ö—ñ–¥–Ω–æ–≥–æ –∫–æ–¥—É, –≤–∏–∫–æ–Ω–∞–Ω–Ω—è —Ç–µ—Å—Ç—ñ–≤ —ñ —É–ø–∞–∫–æ–≤–∫–∏ –ø—Ä–æ–≥—Ä–∞–º–Ω–æ–≥–æ –∑–∞–±–µ–∑–ø–µ—á–µ–Ω–Ω—è –¥–ª—è —Ü—ñ–ª–µ–π —Ä–æ–∑–≥–æ—Ä—Ç–∞–Ω–Ω—è. –û—Å–Ω–æ–≤–Ω–∞ –ø–µ—Ä–µ–≤–∞–≥–∞, —è–∫—É –ø—Ä–æ–ø–æ–Ω—É—î CodeBuild, –ø–æ–ª—è–≥–∞—î –≤ –π–æ–≥–æ –∑–¥–∞—Ç–Ω–æ—Å—Ç—ñ –∑–º–µ–Ω—à–∏—Ç–∏ –ø–æ—Ç—Ä–µ–±—É –∫–æ—Ä–∏—Å—Ç—É–≤–∞—á—ñ–≤ —É –Ω–∞–¥–∞–Ω–Ω—ñ, —É–ø—Ä–∞–≤–ª—ñ–Ω–Ω—ñ —Ç–∞ –º–∞—Å—à—Ç–∞–±—É–≤–∞–Ω–Ω—ñ —Å–≤–æ—ó—Ö —Å–µ—Ä–≤–µ—Ä—ñ–≤ –¥–ª—è –∑–±—ñ—Ä–∫–∏. –¶—è –∑—Ä—É—á–Ω—ñ—Å—Ç—å –æ–±—É–º–æ–≤–ª–µ–Ω–∞ —Ç–∏–º, —â–æ —Å–∞–º —Å–µ—Ä–≤—ñ—Å —É–ø—Ä–∞–≤–ª—è—î —Ü–∏–º–∏ –∑–∞–≤–¥–∞–Ω–Ω—è–º–∏. –û—Å–Ω–æ–≤–Ω—ñ —Ñ—É–Ω–∫—Ü—ñ—ó AWS CodeBuild –≤–∫–ª—é—á–∞—é—Ç—å:

1. **–ö–µ—Ä–æ–≤–∞–Ω–∏–π —Å–µ—Ä–≤—ñ—Å**: CodeBuild —É–ø—Ä–∞–≤–ª—è—î —Ç–∞ –º–∞—Å—à—Ç–∞–±—É—î —Å–µ—Ä–≤–µ—Ä–∏ –¥–ª—è –∑–±—ñ—Ä–∫–∏, –∑–≤—ñ–ª—å–Ω—è—é—á–∏ –∫–æ—Ä–∏—Å—Ç—É–≤–∞—á—ñ–≤ –≤—ñ–¥ –æ–±—Å–ª—É–≥–æ–≤—É–≤–∞–Ω–Ω—è —Å–µ—Ä–≤–µ—Ä—ñ–≤.
2. **–ë–µ–∑–ø–µ—Ä–µ—Ä–≤–Ω–∞ —ñ–Ω—Ç–µ–≥—Ä–∞—Ü—ñ—è**: –í—ñ–Ω —ñ–Ω—Ç–µ–≥—Ä—É—î—Ç—å—Å—è –∑ —Ä–æ–±–æ—á–∏–º –ø—Ä–æ—Ü–µ—Å–æ–º —Ä–æ–∑—Ä–æ–±–∫–∏ —Ç–∞ —Ä–æ–∑–≥–æ—Ä—Ç–∞–Ω–Ω—è, –∞–≤—Ç–æ–º–∞—Ç–∏–∑—É—é—á–∏ –µ—Ç–∞–ø–∏ –∑–±—ñ—Ä–∫–∏ —Ç–∞ —Ç–µ—Å—Ç—É–≤–∞–Ω–Ω—è –ø—Ä–æ—Ü–µ—Å—É –≤–∏–ø—É—Å–∫—É –ø—Ä–æ–≥—Ä–∞–º–Ω–æ–≥–æ –∑–∞–±–µ–∑–ø–µ—á–µ–Ω–Ω—è.
3. **–í–∏—Ä–æ–±–Ω–∏—Ü—Ç–≤–æ –ø–∞–∫–µ—Ç—ñ–≤**: –ü—ñ—Å–ª—è –µ—Ç–∞–ø—ñ–≤ –∑–±—ñ—Ä–∫–∏ —Ç–∞ —Ç–µ—Å—Ç—É–≤–∞–Ω–Ω—è –≤—ñ–Ω –≥–æ—Ç—É—î –ø—Ä–æ–≥—Ä–∞–º–Ω—ñ –ø–∞–∫–µ—Ç–∏, —Ä–æ–±–ª—è—á–∏ —ó—Ö –≥–æ—Ç–æ–≤–∏–º–∏ –¥–æ —Ä–æ–∑–≥–æ—Ä—Ç–∞–Ω–Ω—è.

AWS CodeBuild –±–µ–∑–ø–µ—Ä–µ—à–∫–æ–¥–Ω–æ —ñ–Ω—Ç–µ–≥—Ä—É—î—Ç—å—Å—è –∑ —ñ–Ω—à–∏–º–∏ —Å–µ—Ä–≤—ñ—Å–∞–º–∏ AWS, –ø—ñ–¥–≤–∏—â—É—é—á–∏ –µ—Ñ–µ–∫—Ç–∏–≤–Ω—ñ—Å—Ç—å —ñ –Ω–∞–¥—ñ–π–Ω—ñ—Å—Ç—å –∫–æ–Ω–≤–µ—î—Ä–∞ CI/CD (–±–µ–∑–ø–µ—Ä–µ—Ä–≤–Ω–∞ —ñ–Ω—Ç–µ–≥—Ä–∞—Ü—ñ—è/–±–µ–∑–ø–µ—Ä–µ—Ä–≤–Ω–µ —Ä–æ–∑–≥–æ—Ä—Ç–∞–Ω–Ω—è).

### **Github/Gitlab/Bitbucket Credentials**

#### **Default source credentials**

–¶–µ —Å–ø–∞–¥–∫–æ–≤–∞ –æ–ø—Ü—ñ—è, –¥–µ –º–æ–∂–ª–∏–≤–æ –Ω–∞–ª–∞—à—Ç—É–≤–∞—Ç–∏ –¥–µ—è–∫—ñ **–¥–æ—Å—Ç—É–ø–∏** (—è–∫ —Ç–æ–∫–µ–Ω Github –∞–±–æ –¥–æ–¥–∞—Ç–æ–∫), —è–∫—ñ –±—É–¥—É—Ç—å **—Å–ø—ñ–ª—å–Ω–æ –≤–∏–∫–æ—Ä–∏—Å—Ç–æ–≤—É–≤–∞—Ç–∏—Å—è –º—ñ–∂ –ø—Ä–æ–µ–∫—Ç–∞–º–∏ codebuild**, —â–æ–± —É—Å—ñ –ø—Ä–æ–µ–∫—Ç–∏ –º–æ–≥–ª–∏ –≤–∏–∫–æ—Ä–∏—Å—Ç–æ–≤—É–≤–∞—Ç–∏ —Ü–µ–π –Ω–∞–ª–∞—à—Ç–æ–≤–∞–Ω–∏–π –Ω–∞–±—ñ—Ä –æ–±–ª—ñ–∫–æ–≤–∏—Ö –¥–∞–Ω–∏—Ö.

–ó–±–µ—Ä–µ–∂–µ–Ω—ñ –æ–±–ª—ñ–∫–æ–≤—ñ –¥–∞–Ω—ñ (—Ç–æ–∫–µ–Ω–∏, –ø–∞—Ä–æ–ª—ñ...) **–∫–µ—Ä—É—é—Ç—å—Å—è codebuild** —ñ –Ω–µ–º–∞—î –∂–æ–¥–Ω–æ–≥–æ –ø—É–±–ª—ñ—á–Ω–æ–≥–æ —Å–ø–æ—Å–æ–±—É —ó—Ö –æ—Ç—Ä–∏–º–∞—Ç–∏ –∑ AWS API.

#### Custom source credential

–í –∑–∞–ª–µ–∂–Ω–æ—Å—Ç—ñ –≤—ñ–¥ –ø–ª–∞—Ç—Ñ–æ—Ä–º–∏ —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä—ñ—é (Github, Gitlab —ñ Bitbucket) –Ω–∞–¥–∞—é—Ç—å—Å—è —Ä—ñ–∑–Ω—ñ –æ–ø—Ü—ñ—ó. –ê–ª–µ –≤ –∑–∞–≥–∞–ª—å–Ω–æ–º—É, –±—É–¥—å-—è–∫–∞ –æ–ø—Ü—ñ—è, —è–∫–∞ –≤–∏–º–∞–≥–∞—î **–∑–±–µ—Ä—ñ–≥–∞—Ç–∏ —Ç–æ–∫–µ–Ω –∞–±–æ –ø–∞—Ä–æ–ª—å, –±—É–¥–µ –∑–±–µ—Ä—ñ–≥–∞—Ç–∏—Å—è —è–∫ —Å–µ–∫—Ä–µ—Ç —É –º–µ–Ω–µ–¥–∂–µ—Ä—ñ —Å–µ–∫—Ä–µ—Ç—ñ–≤**.

–¶–µ –¥–æ–∑–≤–æ–ª—è—î **—Ä—ñ–∑–Ω–∏–º –ø—Ä–æ–µ–∫—Ç–∞–º codebuild –≤–∏–∫–æ—Ä–∏—Å—Ç–æ–≤—É–≤–∞—Ç–∏ —Ä—ñ–∑–Ω—ñ –Ω–∞–ª–∞—à—Ç–æ–≤–∞–Ω—ñ –¥–æ—Å—Ç—É–ø–∏** –¥–æ –ø–æ—Å—Ç–∞—á–∞–ª—å–Ω–∏–∫—ñ–≤ –∑–∞–º—ñ—Å—Ç—å —Ç–æ–≥–æ, —â–æ–± –ø—Ä–æ—Å—Ç–æ –≤–∏–∫–æ—Ä–∏—Å—Ç–æ–≤—É–≤–∞—Ç–∏ –Ω–∞–ª–∞—à—Ç–æ–≤–∞–Ω–∏–π –∑–∞ –∑–∞–º–æ–≤—á—É–≤–∞–Ω–Ω—è–º. 

### Enumeration
```bash
# List external repo creds (such as github tokens)
## It doesn't return the token but just the ARN where it's located
aws codebuild list-source-credentials

# Projects
aws codebuild list-shared-projects
aws codebuild list-projects
aws codebuild batch-get-projects --names <project_name> # Check for creds in env vars

# Builds
aws codebuild list-builds
aws codebuild list-builds-for-project --project-name <p_name>
aws codebuild list-build-batches
aws codebuild list-build-batches-for-project --project-name <p_name>

# Reports
aws codebuild list-reports
aws codebuild describe-test-cases --report-arn <ARN>
```
### Privesc

–ù–∞ –Ω–∞—Å—Ç—É–ø–Ω—ñ–π —Å—Ç–æ—Ä—ñ–Ω—Ü—ñ –≤–∏ –º–æ–∂–µ—Ç–µ –ø–µ—Ä–µ–≤—ñ—Ä–∏—Ç–∏, —è–∫ **–∑–ª–æ–≤–∂–∏–≤–∞—Ç–∏ –¥–æ–∑–≤–æ–ª–∞–º–∏ codebuild –¥–ª—è –µ—Å–∫–∞–ª–∞—Ü—ñ—ó –ø—Ä–∏–≤—ñ–ª–µ—ó–≤**:

{% content-ref url="../aws-privilege-escalation/aws-codebuild-privesc.md" %}
[aws-codebuild-privesc.md](../aws-privilege-escalation/aws-codebuild-privesc.md)
{% endcontent-ref %}

### Post Exploitation

{% content-ref url="../aws-post-exploitation/aws-codebuild-post-exploitation/" %}
[aws-codebuild-post-exploitation](../aws-post-exploitation/aws-codebuild-post-exploitation/)
{% endcontent-ref %}

### Unauthenticated Access

{% content-ref url="../aws-unauthenticated-enum-access/aws-codebuild-unauthenticated-access.md" %}
[aws-codebuild-unauthenticated-access.md](../aws-unauthenticated-enum-access/aws-codebuild-unauthenticated-access.md)
{% endcontent-ref %}

## References

* [https://docs.aws.amazon.com/managedservices/latest/userguide/code-build.html](https://docs.aws.amazon.com/managedservices/latest/userguide/code-build.html)

{% hint style="success" %}
–í–∏–≤—á–∞–π—Ç–µ —Ç–∞ –ø—Ä–∞–∫—Ç–∏–∫—É–π—Ç–µ AWS Hacking:<img src="../../../.gitbook/assets/image (1) (1) (1).png" alt="" data-size="line">[**HackTricks Training AWS Red Team Expert (ARTE)**](https://training.hacktricks.xyz/courses/arte)<img src="../../../.gitbook/assets/image (1) (1) (1).png" alt="" data-size="line">\
–í–∏–≤—á–∞–π—Ç–µ —Ç–∞ –ø—Ä–∞–∫—Ç–∏–∫—É–π—Ç–µ GCP Hacking: <img src="../../../.gitbook/assets/image (2).png" alt="" data-size="line">[**HackTricks Training GCP Red Team Expert (GRTE)**<img src="../../../.gitbook/assets/image (2).png" alt="" data-size="line">](https://training.hacktricks.xyz/courses/grte)

<details>

<summary>–ü—ñ–¥—Ç—Ä–∏–º–∞—Ç–∏ HackTricks</summary>

* –ü–µ—Ä–µ–≤—ñ—Ä—Ç–µ [**–ø–ª–∞–Ω–∏ –ø—ñ–¥–ø–∏—Å–∫–∏**](https://github.com/sponsors/carlospolop)!
* **–ü—Ä–∏—î–¥–Ω—É–π—Ç–µ—Å—å –¥–æ** üí¨ [**–≥—Ä—É–ø–∏ Discord**](https://discord.gg/hRep4RUj7f) –∞–±–æ [**–≥—Ä—É–ø–∏ telegram**](https://t.me/peass) –∞–±–æ **—Å–ª—ñ–¥–∫—É–π—Ç–µ** –∑–∞ –Ω–∞–º–∏ –≤ **Twitter** üê¶ [**@hacktricks\_live**](https://twitter.com/hacktricks_live)**.**
* **–î—ñ–ª—ñ—Ç—å—Å—è —Ö–∞–∫–µ—Ä—Å—å–∫–∏–º–∏ —Ç—Ä—é–∫–∞–º–∏, –Ω–∞–¥—Å–∏–ª–∞—é—á–∏ PR –¥–æ** [**HackTricks**](https://github.com/carlospolop/hacktricks) —Ç–∞ [**HackTricks Cloud**](https://github.com/carlospolop/hacktricks-cloud) —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä—ñ—ó–≤ –Ω–∞ github.

</details>
{% endhint %}
