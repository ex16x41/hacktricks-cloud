# AWS - CloudFront Post Exploitation

{% hint style="success" %}
Learn & practice AWS Hacking:<img src="../../../.gitbook/assets/image (1) (1).png" alt="" data-size="line">[**HackTricks Training AWS Red Team Expert (ARTE)**](https://training.hacktricks.xyz/courses/arte)<img src="../../../.gitbook/assets/image (1) (1).png" alt="" data-size="line">\
Learn & practice GCP Hacking: <img src="../../../.gitbook/assets/image (2).png" alt="" data-size="line">[**HackTricks Training GCP Red Team Expert (GRTE)**<img src="../../../.gitbook/assets/image (2).png" alt="" data-size="line">](https://training.hacktricks.xyz/courses/grte)

<details>

<summary>Support HackTricks</summary>

* Check the [**subscription plans**](https://github.com/sponsors/carlospolop)!
* **Join the** üí¨ [**Discord group**](https://discord.gg/hRep4RUj7f) or the [**telegram group**](https://t.me/peass) or **follow** us on **Twitter** üê¶ [**@hacktricks\_live**](https://twitter.com/hacktricks\_live)**.**
* **Share hacking tricks by submitting PRs to the** [**HackTricks**](https://github.com/carlospolop/hacktricks) and [**HackTricks Cloud**](https://github.com/carlospolop/hacktricks-cloud) github repos.

</details>
{% endhint %}

## CloudFront

–î–ª—è –æ—Ç—Ä–∏–º–∞–Ω–Ω—è –¥–æ–¥–∞—Ç–∫–æ–≤–æ—ó —ñ–Ω—Ñ–æ—Ä–º–∞—Ü—ñ—ó –ø–µ—Ä–µ–≥–ª—è–Ω—å—Ç–µ:

{% content-ref url="../aws-services/aws-cloudfront-enum.md" %}
[aws-cloudfront-enum.md](../aws-services/aws-cloudfront-enum.md)
{% endcontent-ref %}

### Man-in-the-Middle

–¶–µ–π [**–±–ª–æ–≥ –ø–æ—Å—Ç**](https://medium.com/@adan.alvarez/how-attackers-can-misuse-aws-cloudfront-access-to-make-it-rain-cookies-acf9ce87541c) –ø—Ä–æ–ø–æ–Ω—É—î –∫—ñ–ª—å–∫–∞ —Ä—ñ–∑–Ω–∏—Ö —Å—Ü–µ–Ω–∞—Ä—ñ—ó–≤, –¥–µ **Lambda** –º–æ–∂–µ –±—É—Ç–∏ –¥–æ–¥–∞–Ω–∞ (–∞–±–æ –∑–º—ñ–Ω–µ–Ω–∞, —è–∫—â–æ –≤–æ–Ω–∞ –≤–∂–µ –≤–∏–∫–æ—Ä–∏—Å—Ç–æ–≤—É—î—Ç—å—Å—è) —É **–∑–≤'—è–∑–∫—É —á–µ—Ä–µ–∑ CloudFront** –∑ –º–µ—Ç–æ—é **–≤–∏–∫—Ä–∞–¥–µ–Ω–Ω—è** —ñ–Ω—Ñ–æ—Ä–º–∞—Ü—ñ—ó –∫–æ—Ä–∏—Å—Ç—É–≤–∞—á–∞ (—Ç–∞–∫–æ—ó —è–∫ **cookie** —Å–µ—Å—ñ—ó) —Ç–∞ **–º–æ–¥–∏—Ñ—ñ–∫–∞—Ü—ñ—ó** **–≤—ñ–¥–ø–æ–≤—ñ–¥—ñ** (–≤–ø—Ä–æ–≤–∞–¥–∂–µ–Ω–Ω—è —à–∫—ñ–¥–ª–∏–≤–æ–≥–æ JS —Å–∫—Ä–∏–ø—Ç—É).

#### —Å—Ü–µ–Ω–∞—Ä—ñ–π 1: MitM, –¥–µ CloudFront –Ω–∞–ª–∞—à—Ç–æ–≤–∞–Ω–æ –¥–ª—è –¥–æ—Å—Ç—É–ø—É –¥–æ –¥–µ—è–∫–æ–≥–æ HTML –∑ –±–∞–∫–µ—Ç—É

* **–°—Ç–≤–æ—Ä—ñ—Ç—å** —à–∫—ñ–¥–ª–∏–≤—É **—Ñ—É–Ω–∫—Ü—ñ—é**.
* **–ê—Å—Å–æ—Ü—ñ—é–π—Ç–µ** —ó—ó –∑ —Ä–æ–∑–ø–æ–¥—ñ–ª–æ–º CloudFront.
* –í—Å—Ç–∞–Ω–æ–≤—ñ—Ç—å **—Ç–∏–ø –ø–æ–¥—ñ—ó –Ω–∞ "Viewer Response"**.

–û—Ç—Ä–∏–º—É—é—á–∏ –≤—ñ–¥–ø–æ–≤—ñ–¥—å, –≤–∏ –º–æ–∂–µ—Ç–µ –≤–∫—Ä–∞—Å—Ç–∏ cookie –∫–æ—Ä–∏—Å—Ç—É–≤–∞—á—ñ–≤ —ñ –≤–ø—Ä–æ–≤–∞–¥–∏—Ç–∏ —à–∫—ñ–¥–ª–∏–≤–∏–π JS.

#### —Å—Ü–µ–Ω–∞—Ä—ñ–π 2: MitM, –¥–µ CloudFront –≤–∂–µ –≤–∏–∫–æ—Ä–∏—Å—Ç–æ–≤—É—î —Ñ—É–Ω–∫—Ü—ñ—é lambda

* **–ó–º—ñ–Ω—ñ—Ç—å –∫–æ–¥** —Ñ—É–Ω–∫—Ü—ñ—ó lambda, —â–æ–± –≤–∫—Ä–∞—Å—Ç–∏ —á—É—Ç–ª–∏–≤—É —ñ–Ω—Ñ–æ—Ä–º–∞—Ü—ñ—é

–í–∏ –º–æ–∂–µ—Ç–µ –ø–µ—Ä–µ–≤—ñ—Ä–∏—Ç–∏ [**–∫–æ–¥ tf –¥–ª—è –≤—ñ–¥—Ç–≤–æ—Ä–µ–Ω–Ω—è —Ü–∏—Ö —Å—Ü–µ–Ω–∞—Ä—ñ—ó–≤ —Ç—É—Ç**](https://github.com/adanalvarez/AWS-Attack-Scenarios/tree/main).

{% hint style="success" %}
Learn & practice AWS Hacking:<img src="../../../.gitbook/assets/image (1) (1).png" alt="" data-size="line">[**HackTricks Training AWS Red Team Expert (ARTE)**](https://training.hacktricks.xyz/courses/arte)<img src="../../../.gitbook/assets/image (1) (1).png" alt="" data-size="line">\
Learn & practice GCP Hacking: <img src="../../../.gitbook/assets/image (2).png" alt="" data-size="line">[**HackTricks Training GCP Red Team Expert (GRTE)**<img src="../../../.gitbook/assets/image (2).png" alt="" data-size="line">](https://training.hacktricks.xyz/courses/grte)

<details>

<summary>Support HackTricks</summary>

* Check the [**subscription plans**](https://github.com/sponsors/carlospolop)!
* **Join the** üí¨ [**Discord group**](https://discord.gg/hRep4RUj7f) or the [**telegram group**](https://t.me/peass) or **follow** us on **Twitter** üê¶ [**@hacktricks\_live**](https://twitter.com/hacktricks\_live)**.**
* **Share hacking tricks by submitting PRs to the** [**HackTricks**](https://github.com/carlospolop/hacktricks) and [**HackTricks Cloud**](https://github.com/carlospolop/hacktricks-cloud) github repos.

</details>
{% endhint %}
