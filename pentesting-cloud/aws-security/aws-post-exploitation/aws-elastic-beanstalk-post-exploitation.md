# AWS - Elastic Beanstalk 后期利用

{% hint style="success" %}
学习和实践 AWS 黑客技术：<img src="../../../.gitbook/assets/image (1) (1).png" alt="" data-size="line">[**HackTricks 培训 AWS 红队专家 (ARTE)**](https://training.hacktricks.xyz/courses/arte)<img src="../../../.gitbook/assets/image (1) (1).png" alt="" data-size="line">\
学习和实践 GCP 黑客技术：<img src="../../../.gitbook/assets/image (2).png" alt="" data-size="line">[**HackTricks 培训 GCP 红队专家 (GRTE)**<img src="../../../.gitbook/assets/image (2).png" alt="" data-size="line">](https://training.hacktricks.xyz/courses/grte)

<details>

<summary>支持 HackTricks</summary>

* 查看 [**订阅计划**](https://github.com/sponsors/carlospolop)!
* **加入** 💬 [**Discord 群组**](https://discord.gg/hRep4RUj7f) 或 [**telegram 群组**](https://t.me/peass) 或 **在** **Twitter** 🐦 **上关注我们** [**@hacktricks\_live**](https://twitter.com/hacktricks\_live)**.**
* **通过向** [**HackTricks**](https://github.com/carlospolop/hacktricks) 和 [**HackTricks Cloud**](https://github.com/carlospolop/hacktricks-cloud) github 仓库提交 PR 分享黑客技巧。

</details>
{% endhint %}

## Elastic Beanstalk

更多信息：

{% content-ref url="../aws-services/aws-elastic-beanstalk-enum.md" %}
[aws-elastic-beanstalk-enum.md](../aws-services/aws-elastic-beanstalk-enum.md)
{% endcontent-ref %}

### `elasticbeanstalk:DeleteApplicationVersion`

{% hint style="info" %}
TODO: 测试是否需要更多权限
{% endhint %}

拥有权限 `elasticbeanstalk:DeleteApplicationVersion` 的攻击者可以 **删除现有的应用程序版本**。此操作可能会中断应用程序部署管道或导致特定应用程序版本的丢失（如果没有备份）。
```bash
aws elasticbeanstalk delete-application-version --application-name my-app --version-label my-version
```
{% endcode %}

**潜在影响**：应用程序部署中断和潜在的应用程序版本丢失。

### `elasticbeanstalk:TerminateEnvironment`

{% hint style="info" %}
TODO: 测试是否需要更多权限
{% endhint %}

拥有权限 `elasticbeanstalk:TerminateEnvironment` 的攻击者可以 **终止现有的 Elastic Beanstalk 环境**，导致应用程序停机，并且如果环境未配置备份，可能会导致数据丢失。

{% code overflow="wrap" %}
```bash
aws elasticbeanstalk terminate-environment --environment-name my-existing-env
```
{% endcode %}

**潜在影响**：应用程序的停机、潜在的数据丢失和服务中断。

### `elasticbeanstalk:DeleteApplication`

{% hint style="info" %}
TODO: 测试是否需要更多权限
{% endhint %}

拥有权限 `elasticbeanstalk:DeleteApplication` 的攻击者可以 **删除整个 Elastic Beanstalk 应用程序**，包括其所有版本和环境。如果没有备份，此操作可能会导致应用程序资源和配置的重大损失。

{% code overflow="wrap" %}
```bash
aws elasticbeanstalk delete-application --application-name my-app --terminate-env-by-force
```
{% endcode %}

**潜在影响**：应用程序资源、配置、环境和应用程序版本的丢失，导致服务中断和潜在的数据丢失。

### `elasticbeanstalk:SwapEnvironmentCNAMEs`

{% hint style="info" %}
TODO: 测试是否需要更多权限
{% endhint %}

拥有 `elasticbeanstalk:SwapEnvironmentCNAMEs` 权限的攻击者可以**交换两个 Elastic Beanstalk 环境的 CNAME 记录**，这可能导致错误版本的应用程序被提供给用户或导致意外行为。

{% code overflow="wrap" %}
```bash
aws elasticbeanstalk swap-environment-cnames --source-environment-name my-env-1 --destination-environment-name my-env-2
```
{% endcode %}

**潜在影响**：向用户提供错误版本的应用程序或由于环境交换导致应用程序出现意外行为。

### `elasticbeanstalk:AddTags`, `elasticbeanstalk:RemoveTags`

{% hint style="info" %}
TODO: 测试是否需要更多权限
{% endhint %}

拥有 `elasticbeanstalk:AddTags` 和 `elasticbeanstalk:RemoveTags` 权限的攻击者可以**在 Elastic Beanstalk 资源上添加或删除标签**。此操作可能导致资源分配、计费或资源管理不正确。

{% code overflow="wrap" %}
```bash
aws elasticbeanstalk add-tags --resource-arn arn:aws:elasticbeanstalk:us-west-2:123456789012:environment/my-app/my-env --tags Key=MaliciousTag,Value=1

aws elasticbeanstalk remove-tags --resource-arn arn:aws:elasticbeanstalk:us-west-2:123456789012:environment/my-app/my-env --tag-keys MaliciousTag
```
{% endcode %}

**潜在影响**：由于添加或删除标签，可能导致资源分配、计费或资源管理不正确。

{% hint style="success" %}
学习和实践 AWS 黑客技术：<img src="../../../.gitbook/assets/image (1) (1).png" alt="" data-size="line">[**HackTricks 培训 AWS 红队专家 (ARTE)**](https://training.hacktricks.xyz/courses/arte)<img src="../../../.gitbook/assets/image (1) (1).png" alt="" data-size="line">\
学习和实践 GCP 黑客技术：<img src="../../../.gitbook/assets/image (2).png" alt="" data-size="line">[**HackTricks 培训 GCP 红队专家 (GRTE)**<img src="../../../.gitbook/assets/image (2).png" alt="" data-size="line">](https://training.hacktricks.xyz/courses/grte)

<details>

<summary>支持 HackTricks</summary>

* 查看 [**订阅计划**](https://github.com/sponsors/carlospolop)!
* **加入** 💬 [**Discord 群组**](https://discord.gg/hRep4RUj7f) 或 [**Telegram 群组**](https://t.me/peass) 或 **关注** 我们的 **Twitter** 🐦 [**@hacktricks\_live**](https://twitter.com/hacktricks\_live)**.**
* **通过向** [**HackTricks**](https://github.com/carlospolop/hacktricks) 和 [**HackTricks Cloud**](https://github.com/carlospolop/hacktricks-cloud) GitHub 仓库提交 PR 来分享黑客技巧。

</details>
{% endhint %}
