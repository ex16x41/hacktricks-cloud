# AWS - CodeBuild åæœŸåˆ©ç”¨

{% hint style="success" %}
å­¦ä¹ å’Œå®è·µ AWS é»‘å®¢æŠ€æœ¯ï¼š<img src="../../../../.gitbook/assets/image (1) (1) (1).png" alt="" data-size="line">[**HackTricks åŸ¹è®­ AWS çº¢é˜Ÿä¸“å®¶ (ARTE)**](https://training.hacktricks.xyz/courses/arte)<img src="../../../../.gitbook/assets/image (1) (1) (1).png" alt="" data-size="line">\
å­¦ä¹ å’Œå®è·µ GCP é»‘å®¢æŠ€æœ¯ï¼š<img src="../../../../.gitbook/assets/image (2).png" alt="" data-size="line">[**HackTricks åŸ¹è®­ GCP çº¢é˜Ÿä¸“å®¶ (GRTE)**<img src="../../../../.gitbook/assets/image (2).png" alt="" data-size="line">](https://training.hacktricks.xyz/courses/grte)

<details>

<summary>æ”¯æŒ HackTricks</summary>

* æŸ¥çœ‹ [**è®¢é˜…è®¡åˆ’**](https://github.com/sponsors/carlospolop)!
* **åŠ å…¥** ğŸ’¬ [**Discord ç¾¤ç»„**](https://discord.gg/hRep4RUj7f) æˆ– [**Telegram ç¾¤ç»„**](https://t.me/peass) æˆ– **å…³æ³¨** æˆ‘ä»¬çš„ **Twitter** ğŸ¦ [**@hacktricks\_live**](https://twitter.com/hacktricks_live)**.**
* **é€šè¿‡å‘** [**HackTricks**](https://github.com/carlospolop/hacktricks) å’Œ [**HackTricks Cloud**](https://github.com/carlospolop/hacktricks-cloud) GitHub ä»“åº“æäº¤ PR åˆ†äº«é»‘å®¢æŠ€å·§ã€‚

</details>
{% endhint %}

## CodeBuild

æœ‰å…³æ›´å¤šä¿¡æ¯ï¼Œè¯·æŸ¥çœ‹ï¼š

{% content-ref url="../../aws-services/aws-codebuild-enum.md" %}
[aws-codebuild-enum.md](../../aws-services/aws-codebuild-enum.md)
{% endcontent-ref %}

### æ£€æŸ¥ç§˜å¯†

å¦‚æœåœ¨ Codebuild ä¸­è®¾ç½®äº†å‡­æ®ä»¥è¿æ¥åˆ° Githubã€Gitlab æˆ– Bitbucketï¼Œå½¢å¼ä¸ºä¸ªäººä»¤ç‰Œã€å¯†ç æˆ– OAuth ä»¤ç‰Œè®¿é—®ï¼Œè¿™äº› **å‡­æ®å°†ä½œä¸ºç§˜å¯†å­˜å‚¨åœ¨ç§˜å¯†ç®¡ç†å™¨ä¸­**ã€‚\
å› æ­¤ï¼Œå¦‚æœæ‚¨æœ‰æƒè¯»å–ç§˜å¯†ç®¡ç†å™¨ï¼Œæ‚¨å°†èƒ½å¤Ÿè·å–è¿™äº›ç§˜å¯†å¹¶è½¬å‘è¿æ¥çš„å¹³å°ã€‚

{% content-ref url="../../aws-privilege-escalation/aws-secrets-manager-privesc.md" %}
[aws-secrets-manager-privesc.md](../../aws-privilege-escalation/aws-secrets-manager-privesc.md)
{% endcontent-ref %}

### æ»¥ç”¨ CodeBuild ä»“åº“è®¿é—®

ä¸ºäº†é…ç½® **CodeBuild**ï¼Œå®ƒéœ€è¦ **è®¿é—®å°†è¦ä½¿ç”¨çš„ä»£ç ä»“åº“**ã€‚å¤šä¸ªå¹³å°å¯èƒ½æ‰˜ç®¡æ­¤ä»£ç ï¼š

<figure><img src="../../../../.gitbook/assets/image (96).png" alt=""><figcaption></figcaption></figure>

**CodeBuild é¡¹ç›®å¿…é¡»å…·æœ‰** å¯¹é…ç½®çš„æºæä¾›ç¨‹åºçš„è®¿é—®æƒé™ï¼Œå¯ä»¥é€šè¿‡ **IAM è§’è‰²** æˆ–ä½¿ç”¨ github/bitbucket **ä»¤ç‰Œæˆ– OAuth è®¿é—®**ã€‚

å…·æœ‰ **æå‡æƒé™çš„æ”»å‡»è€…** å¯ä»¥æ»¥ç”¨æ­¤é…ç½®çš„è®¿é—®æƒé™ï¼Œæ³„éœ²é…ç½®ä»“åº“çš„ä»£ç ä»¥åŠå…¶ä»–è®¾ç½®å‡­æ®å¯ä»¥è®¿é—®çš„ä»“åº“ã€‚\
ä¸ºäº†åšåˆ°è¿™ä¸€ç‚¹ï¼Œæ”»å‡»è€…åªéœ€ **å°†ä»“åº“ URL æ›´æ”¹ä¸ºé…ç½®å‡­æ®å¯ä»¥è®¿é—®çš„æ¯ä¸ªä»“åº“**ï¼ˆè¯·æ³¨æ„ï¼ŒAWS ç½‘ç«™ä¼šä¸ºæ‚¨åˆ—å‡ºæ‰€æœ‰ä»“åº“ï¼‰ï¼š

<figure><img src="../../../../.gitbook/assets/image (107).png" alt=""><figcaption></figcaption></figure>

å¹¶ **æ›´æ”¹ Buildspec å‘½ä»¤ä»¥æå–æ¯ä¸ªä»“åº“**ã€‚

{% hint style="warning" %}
ç„¶è€Œï¼Œè¿™ **é¡¹ä»»åŠ¡æ˜¯é‡å¤ä¸”ä¹å‘³çš„**ï¼Œå¦‚æœé…ç½®äº†å…·æœ‰ **å†™æƒé™** çš„ github ä»¤ç‰Œï¼Œæ”»å‡»è€… **å°†æ— æ³•ï¼ˆæ»¥ç”¨ï¼‰è¿™äº›æƒé™**ï¼Œå› ä¸ºä»–æ²¡æœ‰è®¿é—®ä»¤ç‰Œã€‚\
æˆ–è€…ä»–æœ‰å—ï¼ŸæŸ¥çœ‹ä¸‹ä¸€éƒ¨åˆ†
{% endhint %}

### ä» AWS CodeBuild æ³„éœ²è®¿é—®ä»¤ç‰Œ

æ‚¨å¯ä»¥æ³„éœ²åœ¨ CodeBuild ä¸­æˆäºˆçš„å¹³å°è®¿é—®æƒé™ï¼Œä¾‹å¦‚ Githubã€‚æ£€æŸ¥æ˜¯å¦æˆäºˆäº†å¯¹å¤–éƒ¨å¹³å°çš„ä»»ä½•è®¿é—®æƒé™ï¼š
```bash
aws codebuild list-source-credentials
```
{% content-ref url="aws-codebuild-token-leakage.md" %}
[aws-codebuild-token-leakage.md](aws-codebuild-token-leakage.md)
{% endcontent-ref %}

### `codebuild:DeleteProject`

æ”»å‡»è€…å¯ä»¥åˆ é™¤æ•´ä¸ª CodeBuild é¡¹ç›®ï¼Œå¯¼è‡´é¡¹ç›®é…ç½®ä¸¢å¤±ï¼Œå¹¶å½±å“ä¾èµ–è¯¥é¡¹ç›®çš„åº”ç”¨ç¨‹åºã€‚
```bash
aws codebuild delete-project --name <value>
```
**æ½œåœ¨å½±å“**ï¼šé¡¹ç›®é…ç½®ä¸¢å¤±å’Œä½¿ç”¨å·²åˆ é™¤é¡¹ç›®çš„åº”ç”¨ç¨‹åºæœåŠ¡ä¸­æ–­ã€‚

### `codebuild:TagResource` , `codebuild:UntagResource`

æ”»å‡»è€…å¯ä»¥æ·»åŠ ã€ä¿®æ”¹æˆ–åˆ é™¤CodeBuildèµ„æºçš„æ ‡ç­¾ï¼Œä»è€Œå¹²æ‰°æ‚¨ç»„ç»‡åŸºäºæ ‡ç­¾çš„æˆæœ¬åˆ†é…ã€èµ„æºè·Ÿè¸ªå’Œè®¿é—®æ§åˆ¶ç­–ç•¥ã€‚
```bash
aws codebuild tag-resource --resource-arn <value> --tags <value>
aws codebuild untag-resource --resource-arn <value> --tag-keys <value>
```
**æ½œåœ¨å½±å“**ï¼šæˆæœ¬åˆ†é…ã€èµ„æºè·Ÿè¸ªå’ŒåŸºäºæ ‡ç­¾çš„è®¿é—®æ§åˆ¶ç­–ç•¥çš„ä¸­æ–­ã€‚

### `codebuild:DeleteSourceCredentials`

æ”»å‡»è€…å¯ä»¥åˆ é™¤ Git å­˜å‚¨åº“çš„æºå‡­è¯ï¼Œä»è€Œå½±å“ä¾èµ–è¯¥å­˜å‚¨åº“çš„åº”ç”¨ç¨‹åºçš„æ­£å¸¸è¿è¡Œã€‚
```sql
aws codebuild delete-source-credentials --arn <value>
```
**æ½œåœ¨å½±å“**ï¼šç”±äºæºå‡­è¯çš„åˆ é™¤ï¼Œä¾èµ–å—å½±å“å­˜å‚¨åº“çš„åº”ç”¨ç¨‹åºçš„æ­£å¸¸åŠŸèƒ½å—åˆ°å¹²æ‰°ã€‚

{% hint style="success" %}
å­¦ä¹ å’Œå®è·µ AWS é»‘å®¢æŠ€æœ¯ï¼š<img src="../../../../.gitbook/assets/image (1) (1) (1).png" alt="" data-size="line">[**HackTricks åŸ¹è®­ AWS çº¢é˜Ÿä¸“å®¶ (ARTE)**](https://training.hacktricks.xyz/courses/arte)<img src="../../../../.gitbook/assets/image (1) (1) (1).png" alt="" data-size="line">\
å­¦ä¹ å’Œå®è·µ GCP é»‘å®¢æŠ€æœ¯ï¼š<img src="../../../../.gitbook/assets/image (2).png" alt="" data-size="line">[**HackTricks åŸ¹è®­ GCP çº¢é˜Ÿä¸“å®¶ (GRTE)**<img src="../../../../.gitbook/assets/image (2).png" alt="" data-size="line">](https://training.hacktricks.xyz/courses/grte)

<details>

<summary>æ”¯æŒ HackTricks</summary>

* æŸ¥çœ‹ [**è®¢é˜…è®¡åˆ’**](https://github.com/sponsors/carlospolop)!
* **åŠ å…¥** ğŸ’¬ [**Discord ç¾¤ç»„**](https://discord.gg/hRep4RUj7f) æˆ– [**Telegram ç¾¤ç»„**](https://t.me/peass) æˆ– **åœ¨** **Twitter** ğŸ¦ **ä¸Šå…³æ³¨æˆ‘ä»¬** [**@hacktricks\_live**](https://twitter.com/hacktricks_live)**.**
* **é€šè¿‡å‘** [**HackTricks**](https://github.com/carlospolop/hacktricks) å’Œ [**HackTricks Cloud**](https://github.com/carlospolop/hacktricks-cloud) GitHub ä»“åº“æäº¤ PR æ¥åˆ†äº«é»‘å®¢æŠ€å·§ã€‚

</details>
{% endhint %}
