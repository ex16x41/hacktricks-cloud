# AWS - CodeBuild Post Exploitation

{% hint style="success" %}
å­¦ä¹ å’Œå®è·µ AWS Hacking:<img src="/.gitbook/assets/image.png" alt="" data-size="line">[**HackTricks Training AWS Red Team Expert (ARTE)**](https://training.hacktricks.xyz/courses/arte)<img src="/.gitbook/assets/image.png" alt="" data-size="line">\
å­¦ä¹ å’Œå®è·µ GCP Hacking: <img src="/.gitbook/assets/image (2).png" alt="" data-size="line">[**HackTricks Training GCP Red Team Expert (GRTE)**<img src="/.gitbook/assets/image (2).png" alt="" data-size="line">](https://training.hacktricks.xyz/courses/grte)

<details>

<summary>æ”¯æŒ HackTricks</summary>

* æŸ¥çœ‹ [**è®¢é˜…è®¡åˆ’**](https://github.com/sponsors/carlospolop)!
* **åŠ å…¥** ğŸ’¬ [**Discord ç¾¤ç»„**](https://discord.gg/hRep4RUj7f) æˆ– [**telegram ç¾¤ç»„**](https://t.me/peass) æˆ– **å…³æ³¨** æˆ‘ä»¬çš„ **Twitter** ğŸ¦ [**@hacktricks\_live**](https://twitter.com/hacktricks\_live)**.**
* **é€šè¿‡æäº¤ PR åˆ†äº«é»‘å®¢æŠ€å·§åˆ°** [**HackTricks**](https://github.com/carlospolop/hacktricks) å’Œ [**HackTricks Cloud**](https://github.com/carlospolop/hacktricks-cloud) github ä»“åº“ã€‚

</details>
{% endhint %}

## CodeBuild

æ¬²äº†è§£æ›´å¤šä¿¡æ¯ï¼Œè¯·æŸ¥çœ‹ï¼š

{% content-ref url="../../aws-services/aws-codebuild-enum.md" %}
[aws-codebuild-enum.md](../../aws-services/aws-codebuild-enum.md)
{% endcontent-ref %}

### æ»¥ç”¨ CodeBuild ä»“åº“è®¿é—®æƒé™

ä¸ºäº†é…ç½® **CodeBuild**ï¼Œå®ƒéœ€è¦ **è®¿é—®å°†è¦ä½¿ç”¨çš„ä»£ç ä»“åº“**ã€‚è¿™äº›ä»£ç å¯èƒ½æ‰˜ç®¡åœ¨å¤šä¸ªå¹³å°ä¸Šï¼š

<figure><img src="../../../../.gitbook/assets/image (96).png" alt=""><figcaption></figcaption></figure>

**CodeBuild é¡¹ç›®å¿…é¡»è®¿é—®** é…ç½®çš„æºæä¾›è€…ï¼Œå¯ä»¥é€šè¿‡ **IAM è§’è‰²** æˆ–ä½¿ç”¨ github/bitbucket **token æˆ– OAuth è®¿é—®**ã€‚

æ‹¥æœ‰ **CodeBuild é«˜æƒé™** çš„æ”»å‡»è€…å¯ä»¥æ»¥ç”¨è¿™ç§é…ç½®çš„è®¿é—®æƒé™ï¼Œæ³„éœ²é…ç½®ä»“åº“çš„ä»£ç ä»¥åŠå…¶ä»–å‡­è¯å¯è®¿é—®çš„ä»“åº“ã€‚\
ä¸ºäº†åšåˆ°è¿™ä¸€ç‚¹ï¼Œæ”»å‡»è€…åªéœ€ **å°†ä»“åº“ URL æ›´æ”¹ä¸ºé…ç½®å‡­è¯æœ‰è®¿é—®æƒé™çš„æ¯ä¸ªä»“åº“**ï¼ˆè¯·æ³¨æ„ï¼Œaws ç½‘é¡µä¼šä¸ºä½ åˆ—å‡ºæ‰€æœ‰è¿™äº›ä»“åº“ï¼‰ï¼š

<figure><img src="../../../../.gitbook/assets/image (107).png" alt=""><figcaption></figcaption></figure>

å¹¶ **æ›´æ”¹ Buildspec å‘½ä»¤ä»¥å¤–ä¼ æ¯ä¸ªä»“åº“**ã€‚

{% hint style="warning" %}
ç„¶è€Œï¼Œè¿™ä¸ª **ä»»åŠ¡æ˜¯é‡å¤ä¸”ä¹å‘³çš„**ï¼Œå¦‚æœé…ç½®äº†å…·æœ‰ **å†™æƒé™** çš„ github tokenï¼Œæ”»å‡»è€… **å°†æ— æ³•æ»¥ç”¨è¿™äº›æƒé™**ï¼Œå› ä¸ºä»–æ— æ³•è®¿é—® tokenã€‚\
æˆ–è€…ä»–èƒ½å—ï¼Ÿè¯·æŸ¥çœ‹ä¸‹ä¸€èŠ‚
{% endhint %}

### ä» AWS CodeBuild æ³„éœ²è®¿é—®ä»¤ç‰Œ

ä½ å¯ä»¥æ³„éœ² CodeBuild ä¸­æˆäºˆçš„å¹³å°è®¿é—®æƒé™ï¼Œå¦‚ Githubã€‚æ£€æŸ¥æ˜¯å¦æˆäºˆäº†å¯¹å¤–éƒ¨å¹³å°çš„ä»»ä½•è®¿é—®æƒé™ï¼š
```bash
aws codebuild list-source-credentials
```
{% content-ref url="aws-codebuild-token-leakage.md" %}
[aws-codebuild-token-leakage.md](aws-codebuild-token-leakage.md)
{% endcontent-ref %}

### `codebuild:DeleteProject`

æ”»å‡»è€…å¯ä»¥åˆ é™¤æ•´ä¸ªCodeBuildé¡¹ç›®ï¼Œå¯¼è‡´é¡¹ç›®é…ç½®ä¸¢å¤±ï¼Œå¹¶å½±å“ä¾èµ–è¯¥é¡¹ç›®çš„åº”ç”¨ç¨‹åºã€‚
```bash
aws codebuild delete-project --name <value>
```
**æ½œåœ¨å½±å“**: é¡¹ç›®é…ç½®ä¸¢å¤±å’Œä½¿ç”¨å·²åˆ é™¤é¡¹ç›®çš„åº”ç”¨ç¨‹åºçš„æœåŠ¡ä¸­æ–­ã€‚

### `codebuild:TagResource` , `codebuild:UntagResource`

æ”»å‡»è€…å¯ä»¥æ·»åŠ ã€ä¿®æ”¹æˆ–åˆ é™¤ CodeBuild èµ„æºçš„æ ‡ç­¾ï¼Œç ´åæ‚¨ç»„ç»‡åŸºäºæ ‡ç­¾çš„æˆæœ¬åˆ†é…ã€èµ„æºè·Ÿè¸ªå’Œè®¿é—®æ§åˆ¶ç­–ç•¥ã€‚
```bash
aws codebuild tag-resource --resource-arn <value> --tags <value>
aws codebuild untag-resource --resource-arn <value> --tag-keys <value>
```
**æ½œåœ¨å½±å“**: æˆæœ¬åˆ†é…ã€èµ„æºè·Ÿè¸ªå’ŒåŸºäºæ ‡ç­¾çš„è®¿é—®æ§åˆ¶ç­–ç•¥çš„ä¸­æ–­ã€‚

### `codebuild:DeleteSourceCredentials`

æ”»å‡»è€…å¯ä»¥åˆ é™¤ Git ä»“åº“çš„æºå‡­è¯ï¼Œå½±å“ä¾èµ–è¯¥ä»“åº“çš„åº”ç”¨ç¨‹åºçš„æ­£å¸¸è¿è¡Œã€‚
```sql
aws codebuild delete-source-credentials --arn <value>
```
**æ½œåœ¨å½±å“**: ç”±äºåˆ é™¤äº†æºå‡­è¯ï¼Œä¾èµ–å—å½±å“å­˜å‚¨åº“çš„åº”ç”¨ç¨‹åºçš„æ­£å¸¸åŠŸèƒ½ä¸­æ–­ã€‚

{% hint style="success" %}
å­¦ä¹ å’Œå®è·µ AWS Hacking:<img src="/.gitbook/assets/image.png" alt="" data-size="line">[**HackTricks Training AWS Red Team Expert (ARTE)**](https://training.hacktricks.xyz/courses/arte)<img src="/.gitbook/assets/image.png" alt="" data-size="line">\
å­¦ä¹ å’Œå®è·µ GCP Hacking: <img src="/.gitbook/assets/image (2).png" alt="" data-size="line">[**HackTricks Training GCP Red Team Expert (GRTE)**<img src="/.gitbook/assets/image (2).png" alt="" data-size="line">](https://training.hacktricks.xyz/courses/grte)

<details>

<summary>æ”¯æŒ HackTricks</summary>

* æŸ¥çœ‹ [**è®¢é˜…è®¡åˆ’**](https://github.com/sponsors/carlospolop)!
* **åŠ å…¥** ğŸ’¬ [**Discord ç¾¤ç»„**](https://discord.gg/hRep4RUj7f) æˆ– [**telegram ç¾¤ç»„**](https://t.me/peass) æˆ– **å…³æ³¨** æˆ‘ä»¬çš„ **Twitter** ğŸ¦ [**@hacktricks\_live**](https://twitter.com/hacktricks\_live)**.**
* **é€šè¿‡æäº¤ PRs åˆ†äº«é»‘å®¢æŠ€å·§åˆ°** [**HackTricks**](https://github.com/carlospolop/hacktricks) å’Œ [**HackTricks Cloud**](https://github.com/carlospolop/hacktricks-cloud) github ä»“åº“ã€‚

</details>
{% endhint %}
