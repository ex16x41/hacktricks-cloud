# AWS - Posteksploatacija koriste캖i Step funkcije

<details>

<summary><strong>Nau캜ite hakovanje AWS-a od nule do heroja sa</strong> <a href="https://training.hacktricks.xyz/courses/arte"><strong>htARTE (HackTricks AWS Red Team Expert)</strong></a><strong>!</strong></summary>

Drugi na캜ini podr코ke HackTricks-u:

* Ako 쬰lite da vidite svoju **kompaniju reklamiranu na HackTricks-u** ili da **preuzmete HackTricks u PDF formatu** proverite [**PLANOVE ZA PRIJAVU**](https://github.com/sponsors/carlospolop)!
* Nabavite [**zvani캜ni PEASS & HackTricks swag**](https://peass.creator-spring.com)
* Otkrijte [**Porodicu PEASS**](https://opensea.io/collection/the-peass-family), na코u kolekciju ekskluzivnih [**NFT-ova**](https://opensea.io/collection/the-peass-family)
* **Pridru쬴te se** 游눫 [**Discord grupi**](https://discord.gg/hRep4RUj7f) ili [**telegram grupi**](https://t.me/peass) ili nas **pratite** na **Twitteru** 游냕 [**@hacktricks_live**](https://twitter.com/hacktricks_live)**.**
* **Podelite svoje hakovanje trikove slanjem PR-ova na** [**HackTricks**](https://github.com/carlospolop/hacktricks) i [**HackTricks Cloud**](https://github.com/carlospolop/hacktricks-cloud) github repozitorijume.

</details>

## Step funkcije

Za vi코e informacija o ovoj AWS usluzi, proverite:

{% content-ref url="../aws-services/aws-stepfunctions-enum.md" %}
[aws-stepfunctions-enum.md](../aws-services/aws-stepfunctions-enum.md)
{% endcontent-ref %}

### `states:DeleteStateMachine`, `states:DeleteStateMachineVersion`, `states:DeleteStateMachineAlias`

Napada캜 sa ovim dozvolama bi bio u mogu캖nosti da trajno obri코e ma코ine stanja, njihove verzije i atribute. Ovo mo쬰 poremetiti kriti캜ne radne tokove, rezultirati gubitkom podataka i zahtevati zna캜ajno vreme za oporavak i vra캖anje pogo캠enih ma코ina stanja. Pored toga, omogu캖ilo bi napada캜u da prikrije tragove, poremeti forenzi캜ke istrage i potencijalno onesposobi operacije uklanjanjem esencijalnih procesa automatizacije i konfiguracija stanja. 

{% hint style="info" %}

- Brisanjem ma코ine stanja tako캠e bri코ete sve njene povezane verzije i atribute.
- Brisanjem atributa ma코ine stanja ne bri코ete verzije ma코ine stanja koje se referi코u na ovaj atribut.
- Nije mogu캖e obrisati verziju ma코ine stanja koja je trenutno referisana od strane jednog ili vi코e atributa.

{% endhint %}
```bash
# Delete state machine
aws stepfunctions delete-state-machine --state-machine-arn <value>
# Delete state machine version
aws stepfunctions delete-state-machine-version --state-machine-version-arn <value>
# Delete state machine alias
aws stepfunctions delete-state-machine-alias --state-machine-alias-arn <value>
```
- **Potencijalni Uticaj**: Poremec패aj kriti캜nih radnih tokova, gubitak podataka i operativno vreme zastoja.

### `states:UpdateMapRun`

Napada캜 sa ovla코캖enjem bi mogao manipulisati konfiguracijom neuspeha Map Run-a i postavkama paralelnog izvr코avanja, moguc패nost da povec패a ili smanji maksimalni broj dozvoljenih izvr코avanja podre캠enih radnih tokova, direktno uti캜uc패i na performanse usluge. Pored toga, napada캜 bi mogao da manipuli코e dozvoljenim procentom i brojem neuspeha, moguc패nost da smanji ovu vrednost na 0 tako da svaki put kada ne코to ne uspe, ceo map run c패e propasti, direktno uti캜uc패i na izvr코avanje ma코ine stanja i potencijalno poremetiti kriti캜ne radne tokove.
```bash
aws stepfunctions update-map-run --map-run-arn <value> [--max-concurrency <value>] [--tolerated-failure-percentage <value>] [--tolerated-failure-count <value>]
```
- **Potencijalni uticaj**: Smanjenje performansi i poreme캖aj kriti캜nih radnih tokova.

### `states:StopExecution`

Napada캜 sa ovla코캖enjem mo쬰 zaustaviti izvr코enje bilo kog ma코inskog stanja, poremetiv코i teku캖e radne tokove i procese. To mo쬰 dovesti do nepotpunih transakcija, zaustavljenih poslovnih operacija i potencijalne korupcije podataka.

{% hint style="warning" %}
Ova radnja nije podr쬬na od strane **ekspres ma코inskih stanja**.
{% endhint %}
```bash
aws stepfunctions stop-execution --execution-arn <value> [--error <value>] [--cause <value>]
```
- **Potencijalni uticaj**: Poremec패aj trenutnih radnih tokova, operativno vreme bez rada i potencijalna korupcija podataka.

### `states:TagResource`, `states:UntagResource`

Napada캜 bi mogao dodati, izmeniti ili ukloniti oznake sa resursa koraka funkcija, poremetiv코i politike alokacije tro코kova, pra캖enje resursa i politike kontrole pristupa va코e organizacije na osnovu oznaka.
```bash
aws stepfunctions tag-resource --resource-arn <value> --tags Key=<key>,Value=<value>
aws stepfunctions untag-resource --resource-arn <value> --tag-keys <key>
```
**Potencijalni uticaj**: Poremec패aj alokacije tro코kova, prac패enja resursa i politika kontrole pristupa zasnovanih na oznakama.

<details>

<summary><strong>Nau캜ite hakovanje AWS-a od nule do heroja sa</strong> <a href="https://training.hacktricks.xyz/courses/arte"><strong>htARTE (HackTricks AWS Red Team Expert)</strong></a><strong>!</strong></summary>

Drugi na캜ini podr코ke HackTricks-u:

* Ako 쬰lite da vidite svoju **kompaniju reklamiranu na HackTricks-u** ili da **preuzmete HackTricks u PDF formatu** proverite [**PLANOVE ZA PRETPLATU**](https://github.com/sponsors/carlospolop)!
* Nabavite [**zvani캜ni PEASS & HackTricks swag**](https://peass.creator-spring.com)
* Otkrijte [**Porodicu PEASS**](https://opensea.io/collection/the-peass-family), na코u kolekciju ekskluzivnih [**NFT-ova**](https://opensea.io/collection/the-peass-family)
* **Pridru쬴te se** 游눫 [**Discord grupi**](https://discord.gg/hRep4RUj7f) ili [**telegram grupi**](https://t.me/peass) ili nas **pratite** na **Twitteru** 游냕 [**@hacktricks_live**](https://twitter.com/hacktricks_live)**.**
* **Podelite svoje hakovanje trikove slanjem PR-ova na** [**HackTricks**](https://github.com/carlospolop/hacktricks) i [**HackTricks Cloud**](https://github.com/carlospolop/hacktricks-cloud) github repozitorijume.

</details>
