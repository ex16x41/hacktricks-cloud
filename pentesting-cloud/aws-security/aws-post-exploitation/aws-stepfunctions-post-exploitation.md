# AWS - Step Functionsåæ¸—é€

<details>

<summary><strong>ä»é›¶å¼€å§‹å­¦ä¹ AWSé»‘å®¢æŠ€æœ¯ï¼Œæˆä¸ºä¸“å®¶</strong> <a href="https://training.hacktricks.xyz/courses/arte"><strong>htARTEï¼ˆHackTricks AWSçº¢é˜Ÿä¸“å®¶ï¼‰</strong></a><strong>ï¼</strong></summary>

æ”¯æŒHackTricksçš„å…¶ä»–æ–¹å¼ï¼š

- å¦‚æœæ‚¨æƒ³çœ‹åˆ°æ‚¨çš„**å…¬å¸åœ¨HackTricksä¸­è¢«å¹¿å‘Š**æˆ–**ä¸‹è½½PDFæ ¼å¼çš„HackTricks**ï¼Œè¯·æŸ¥çœ‹[**è®¢é˜…è®¡åˆ’**](https://github.com/sponsors/carlospolop)!
- è·å–[**å®˜æ–¹PEASS & HackTrickså‘¨è¾¹äº§å“**](https://peass.creator-spring.com)
- æ¢ç´¢[**PEASSå®¶æ—**](https://opensea.io/collection/the-peass-family)ï¼Œæˆ‘ä»¬çš„ç‹¬å®¶[NFTs](https://opensea.io/collection/the-peass-family)æ”¶è—å“
- **åŠ å…¥** ğŸ’¬ [**Discordç¾¤ç»„**](https://discord.gg/hRep4RUj7f) æˆ– [**ç”µæŠ¥ç¾¤ç»„**](https://t.me/peass) æˆ– **å…³æ³¨**æˆ‘ä»¬çš„**Twitter** ğŸ¦ [**@hacktricks_live**](https://twitter.com/hacktricks_live)**ã€‚**
- é€šè¿‡å‘[**HackTricks**](https://github.com/carlospolop/hacktricks)å’Œ[**HackTricks Cloud**](https://github.com/carlospolop/hacktricks-cloud) githubä»“åº“æäº¤PRæ¥åˆ†äº«æ‚¨çš„é»‘å®¢æŠ€å·§ã€‚

</details>

## Step Functions

æœ‰å…³æ­¤AWSæœåŠ¡çš„æ›´å¤šä¿¡æ¯ï¼Œè¯·æŸ¥çœ‹ï¼š

{% content-ref url="../aws-services/aws-stepfunctions-enum.md" %}
[aws-stepfunctions-enum.md](../aws-services/aws-stepfunctions-enum.md)
{% endcontent-ref %}

### `states:DeleteStateMachine`ã€`states:DeleteStateMachineVersion`ã€`states:DeleteStateMachineAlias`

æ‹¥æœ‰è¿™äº›æƒé™çš„æ”»å‡»è€…å°†èƒ½å¤Ÿæ°¸ä¹…åˆ é™¤çŠ¶æ€æœºã€å®ƒä»¬çš„ç‰ˆæœ¬å’Œåˆ«åã€‚è¿™å¯èƒ½ä¼šç ´åå…³é”®å·¥ä½œæµç¨‹ï¼Œå¯¼è‡´æ•°æ®ä¸¢å¤±ï¼Œå¹¶éœ€è¦å¤§é‡æ—¶é—´æ¥æ¢å¤å’Œæ¢å¤å—å½±å“çš„çŠ¶æ€æœºã€‚æ­¤å¤–ï¼Œè¿™å°†å…è®¸æ”»å‡»è€…è¦†ç›–ä½¿ç”¨çš„ç—•è¿¹ï¼Œç ´åå–è¯è°ƒæŸ¥ï¼Œå¹¶é€šè¿‡åˆ é™¤å…³é”®çš„è‡ªåŠ¨åŒ–æµç¨‹å’ŒçŠ¶æ€é…ç½®å¯èƒ½ç˜«ç—ªæ“ä½œã€‚

{% hint style="info" %}

- åˆ é™¤çŠ¶æ€æœºæ—¶ï¼Œä¹Ÿä¼šåˆ é™¤å…¶æ‰€æœ‰å…³è”çš„ç‰ˆæœ¬å’Œåˆ«åã€‚
- åˆ é™¤çŠ¶æ€æœºåˆ«åæ—¶ï¼Œä¸ä¼šåˆ é™¤å¼•ç”¨æ­¤åˆ«åçš„çŠ¶æ€æœºç‰ˆæœ¬ã€‚
- ç›®å‰æ— æ³•åˆ é™¤ç”±ä¸€ä¸ªæˆ–å¤šä¸ªåˆ«åå¼•ç”¨çš„çŠ¶æ€æœºç‰ˆæœ¬ã€‚

{% endhint %}
```bash
# Delete state machine
aws stepfunctions delete-state-machine --state-machine-arn <value>
# Delete state machine version
aws stepfunctions delete-state-machine-version --state-machine-version-arn <value>
# Delete state machine alias
aws stepfunctions delete-state-machine-alias --state-machine-alias-arn <value>
```
- **æ½œåœ¨å½±å“**ï¼šç ´åå…³é”®å·¥ä½œæµç¨‹ï¼Œæ•°æ®ä¸¢å¤±å’Œè¿è¥åœæœºã€‚

### `states:UpdateMapRun`

æ‹¥æœ‰æ­¤æƒé™çš„æ”»å‡»è€…å¯ä»¥æ“çºµåœ°å›¾è¿è¡Œå¤±è´¥é…ç½®å’Œå¹¶è¡Œè®¾ç½®ï¼Œèƒ½å¤Ÿå¢åŠ æˆ–å‡å°‘å…è®¸çš„å­å·¥ä½œæµæ‰§è¡Œçš„æœ€å¤§æ•°é‡ï¼Œç›´æ¥å½±å“æœåŠ¡çš„æ€§èƒ½ã€‚æ­¤å¤–ï¼Œæ”»å‡»è€…å¯ä»¥ç¯¡æ”¹å¯å®¹å¿çš„å¤±è´¥ç™¾åˆ†æ¯”å’Œè®¡æ•°ï¼Œå°†æ­¤å€¼å‡å°‘åˆ°0ï¼Œè¿™æ ·æ¯æ¬¡é¡¹ç›®å¤±è´¥æ—¶ï¼Œæ•´ä¸ªåœ°å›¾è¿è¡Œéƒ½ä¼šå¤±è´¥ï¼Œç›´æ¥å½±å“çŠ¶æ€æœºæ‰§è¡Œå¹¶å¯èƒ½ç ´åå…³é”®å·¥ä½œæµç¨‹ã€‚
```bash
aws stepfunctions update-map-run --map-run-arn <value> [--max-concurrency <value>] [--tolerated-failure-percentage <value>] [--tolerated-failure-count <value>]
```
- **æ½œåœ¨å½±å“**ï¼šæ€§èƒ½ä¸‹é™ï¼Œå…³é”®å·¥ä½œæµä¸­æ–­ã€‚

### `states:StopExecution`

æ‹¥æœ‰æ­¤æƒé™çš„æ”»å‡»è€…å¯ä»¥åœæ­¢ä»»ä½•çŠ¶æ€æœºçš„æ‰§è¡Œï¼Œä»è€Œä¸­æ–­æ­£åœ¨è¿›è¡Œçš„å·¥ä½œæµå’Œæµç¨‹ã€‚è¿™å¯èƒ½å¯¼è‡´äº¤æ˜“ä¸å®Œæ•´ï¼Œä¸šåŠ¡æ“ä½œåœæ»ï¼Œä»¥åŠæ½œåœ¨æ•°æ®æŸåã€‚

{% hint style="warning" %}
æ­¤æ“ä½œä¸å—**å¿«é€ŸçŠ¶æ€æœº**æ”¯æŒã€‚
{% endhint %}
```bash
aws stepfunctions stop-execution --execution-arn <value> [--error <value>] [--cause <value>]
```
- **æ½œåœ¨å½±å“**ï¼šä¸­æ–­æ­£åœ¨è¿›è¡Œçš„å·¥ä½œæµç¨‹ï¼Œè¿è¥åœæœºæ—¶é—´å’Œæ½œåœ¨æ•°æ®æŸåã€‚

### `states:TagResource`, `states:UntagResource`

æ”»å‡»è€…å¯ä»¥å‘ Step Functions èµ„æºæ·»åŠ ã€ä¿®æ”¹æˆ–ç§»é™¤æ ‡ç­¾ï¼Œä»è€Œç ´åæ‚¨ç»„ç»‡åŸºäºæ ‡ç­¾çš„æˆæœ¬åˆ†é…ã€èµ„æºè·Ÿè¸ªå’Œè®¿é—®æ§åˆ¶ç­–ç•¥ã€‚
```bash
aws stepfunctions tag-resource --resource-arn <value> --tags Key=<key>,Value=<value>
aws stepfunctions untag-resource --resource-arn <value> --tag-keys <key>
```
**æ½œåœ¨å½±å“**ï¼šç ´åæˆæœ¬åˆ†é…ã€èµ„æºè·Ÿè¸ªå’ŒåŸºäºæ ‡è®°çš„è®¿é—®æ§åˆ¶ç­–ç•¥ã€‚ 

<details>

<summary><strong>ä»é›¶å¼€å§‹å­¦ä¹ AWSé»‘å®¢æŠ€æœ¯ï¼Œæˆä¸ºä¸“å®¶</strong> <a href="https://training.hacktricks.xyz/courses/arte"><strong>htARTEï¼ˆHackTricks AWSçº¢é˜Ÿä¸“å®¶ï¼‰</strong></a><strong>ï¼</strong></summary>

å…¶ä»–æ”¯æŒHackTricksçš„æ–¹å¼ï¼š

* å¦‚æœæ‚¨æƒ³çœ‹åˆ°æ‚¨çš„**å…¬å¸åœ¨HackTricksä¸­åšå¹¿å‘Š**æˆ–**ä¸‹è½½PDFæ ¼å¼çš„HackTricks**ï¼Œè¯·æŸ¥çœ‹[**è®¢é˜…è®¡åˆ’**](https://github.com/sponsors/carlospolop)ï¼
* è·å–[**å®˜æ–¹PEASS & HackTrickså‘¨è¾¹äº§å“**](https://peass.creator-spring.com)
* æ¢ç´¢[**PEASSå®¶æ—**](https://opensea.io/collection/the-peass-family)ï¼Œæˆ‘ä»¬çš„ç‹¬å®¶[**NFTs**](https://opensea.io/collection/the-peass-family)
* **åŠ å…¥** ğŸ’¬ [**Discordç¾¤**](https://discord.gg/hRep4RUj7f) æˆ– [**ç”µæŠ¥ç¾¤**](https://t.me/peass) æˆ–åœ¨**Twitter**ä¸Šå…³æ³¨æˆ‘ä»¬ ğŸ¦ [**@hacktricks_live**](https://twitter.com/hacktricks_live)**ã€‚**
* é€šè¿‡å‘[**HackTricks**](https://github.com/carlospolop/hacktricks)å’Œ[**HackTricks Cloud**](https://github.com/carlospolop/hacktricks-cloud) githubä»“åº“æäº¤PRæ¥åˆ†äº«æ‚¨çš„é»‘å®¢æŠ€å·§ã€‚

</details>
