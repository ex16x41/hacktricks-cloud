# AWS - Post Eksploatacija Step Functions

{% hint style="success" %}
U캜ite i ve쬭ajte AWS Hacking:<img src="../../../.gitbook/assets/image (1).png" alt="" data-size="line">[**HackTricks Training AWS Red Team Expert (ARTE)**](https://training.hacktricks.xyz/courses/arte)<img src="../../../.gitbook/assets/image (1).png" alt="" data-size="line">\
U캜ite i ve쬭ajte GCP Hacking: <img src="../../../.gitbook/assets/image (2).png" alt="" data-size="line">[**HackTricks Training GCP Red Team Expert (GRTE)**<img src="../../../.gitbook/assets/image (2).png" alt="" data-size="line">](https://training.hacktricks.xyz/courses/grte)

<details>

<summary>Podr쬴te HackTricks</summary>

* Proverite [**planove pretplate**](https://github.com/sponsors/carlospolop)!
* **Pridru쬴te se** 游눫 [**Discord grupi**](https://discord.gg/hRep4RUj7f) ili [**telegram grupi**](https://t.me/peass) ili **pratite** nas na **Twitteru** 游냕 [**@hacktricks\_live**](https://twitter.com/hacktricks\_live)**.**
* **Podelite hakerske trikove slanjem PR-ova na** [**HackTricks**](https://github.com/carlospolop/hacktricks) i [**HackTricks Cloud**](https://github.com/carlospolop/hacktricks-cloud) github repozitorijume.

</details>
{% endhint %}

## Step Functions

Za vi코e informacija o ovoj AWS usluzi, proverite:

{% content-ref url="../aws-services/aws-stepfunctions-enum.md" %}
[aws-stepfunctions-enum.md](../aws-services/aws-stepfunctions-enum.md)
{% endcontent-ref %}

### `states:RevealSecrets`

Ova dozvola omogu캖ava **otkrivanje tajnih podataka unutar izvr코enja**. Za to je potrebno postaviti nivo inspekcije na TRACE i parametar revealSecrets na true.

<figure><img src="../../../.gitbook/assets/image (348).png" alt=""><figcaption></figcaption></figure>

### `states:DeleteStateMachine`, `states:DeleteStateMachineVersion`, `states:DeleteStateMachineAlias`

Napada캜 sa ovim dozvolama bi mogao trajno da obri코e ma코ine stanja, njihove verzije i alias-e. To mo쬰 ometati kriti캜ne radne tokove, dovesti do gubitka podataka i zahtevati zna캜ajno vreme za oporavak i vra캖anje pogo캠enih ma코ina stanja. Pored toga, omogu캖ilo bi napada캜u da prikrije tragove kori코캖ene, ometa forenzi캜ke istrage i potencijalno osakati operacije uklanjanjem su코tinskih automatizovanih procesa i konfiguracija stanja.

{% hint style="info" %}
* Brisanjem ma코ine stanja tako캠e bri코ete sve njene povezane verzije i alias-e.
* Brisanjem alias-a ma코ine stanja ne bri코ete verzije ma코ine stanja koje se odnose na ovaj alias.
* Nije mogu캖e obrisati verziju ma코ine stanja koja je trenutno referencirana od strane jednog ili vi코e alias-a.
{% endhint %}
```bash
# Delete state machine
aws stepfunctions delete-state-machine --state-machine-arn <value>
# Delete state machine version
aws stepfunctions delete-state-machine-version --state-machine-version-arn <value>
# Delete state machine alias
aws stepfunctions delete-state-machine-alias --state-machine-alias-arn <value>
```
* **Potencijalni Uticaj**: Poreme캖aj kriti캜nih radnih tokova, gubitak podataka i operativno zastoja.

### `states:UpdateMapRun`

Napada캜 sa ovom dozvolom mogao bi da manipuli코e konfiguracijom neuspeha Map Run-a i paralelnim pode코avanjima, 코to bi mu omogu캖ilo da pove캖a ili smanji maksimalan broj dozvoljenih izvr코enja radnih tokova, direktno uti캜u캖i na performanse usluge. Pored toga, napada캜 bi mogao da menja tolerisani procenat neuspeha i broj, 코to bi mu omogu캖ilo da smanji ovu vrednost na 0, tako da svaki put kada stavka ne uspe, ceo map run bi neuspeo, direktno uti캜u캖i na izvr코enje ma코ine stanja i potencijalno ometaju캖i kriti캜ne radne tokove.

{% code overflow="wrap" %}
```bash
aws stepfunctions update-map-run --map-run-arn <value> [--max-concurrency <value>] [--tolerated-failure-percentage <value>] [--tolerated-failure-count <value>]
```
{% endcode %}

* **Potencijalni uticaj**: Smanjenje performansi i prekid kriti캜nih radnih tokova.

### `states:StopExecution`

Napada캜 sa ovom dozvolom mogao bi da zaustavi izvr코enje bilo koje ma코ine stanja, ometaju캖i teku캖e radne tokove i procese. To bi moglo dovesti do nepotpunih transakcija, obustavljenih poslovnih operacija i potencijalne korupcije podataka.

{% hint style="warning" %}
Ova akcija nije podr쬬na od strane **express state machines**.
{% endhint %}

{% code overflow="wrap" %}
```bash
aws stepfunctions stop-execution --execution-arn <value> [--error <value>] [--cause <value>]
```
{% endcode %}

* **Potencijalni uticaj**: Poreme캖aj teku캖ih radnih tokova, operativno vreme zastoja i potencijalna korupcija podataka.

### `states:TagResource`, `states:UntagResource`

Napada캜 bi mogao dodati, izmeniti ili ukloniti oznake sa resursa Step Functions, ometaju캖i alokaciju tro코kova va코e organizacije, pra캖enje resursa i politike kontrole pristupa zasnovane na oznakama.
```bash
aws stepfunctions tag-resource --resource-arn <value> --tags Key=<key>,Value=<value>
aws stepfunctions untag-resource --resource-arn <value> --tag-keys <key>
```
**Potencijalni uticaj**: Poreme캖aj u alokaciji tro코kova, pra캖enju resursa i politikama kontrole pristupa zasnovanim na oznakama.

{% hint style="success" %}
Learn & practice AWS Hacking:<img src="../../../.gitbook/assets/image (1).png" alt="" data-size="line">[**HackTricks Training AWS Red Team Expert (ARTE)**](https://training.hacktricks.xyz/courses/arte)<img src="../../../.gitbook/assets/image (1).png" alt="" data-size="line">\
Learn & practice GCP Hacking: <img src="../../../.gitbook/assets/image (2).png" alt="" data-size="line">[**HackTricks Training GCP Red Team Expert (GRTE)**<img src="../../../.gitbook/assets/image (2).png" alt="" data-size="line">](https://training.hacktricks.xyz/courses/grte)

<details>

<summary>Support HackTricks</summary>

* Check the [**subscription plans**](https://github.com/sponsors/carlospolop)!
* **Join the** 游눫 [**Discord group**](https://discord.gg/hRep4RUj7f) or the [**telegram group**](https://t.me/peass) or **follow** us on **Twitter** 游냕 [**@hacktricks\_live**](https://twitter.com/hacktricks\_live)**.**
* **Share hacking tricks by submitting PRs to the** [**HackTricks**](https://github.com/carlospolop/hacktricks) and [**HackTricks Cloud**](https://github.com/carlospolop/hacktricks-cloud) github repos.

</details>
{% endhint %}
