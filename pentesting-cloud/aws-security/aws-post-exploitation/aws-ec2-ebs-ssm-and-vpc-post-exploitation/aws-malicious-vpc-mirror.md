# AWS - Espejo VPC Malicioso

{% hint style="success" %}
Aprende y practica Hacking en AWS:<img src="../../../../.gitbook/assets/image (1) (1).png" alt="" data-size="line">[**HackTricks Training AWS Red Team Expert (ARTE)**](https://training.hacktricks.xyz/courses/arte)<img src="../../../../.gitbook/assets/image (1) (1).png" alt="" data-size="line">\
Aprende y practica Hacking en GCP: <img src="../../../../.gitbook/assets/image (2).png" alt="" data-size="line">[**HackTricks Training GCP Red Team Expert (GRTE)**<img src="../../../../.gitbook/assets/image (2).png" alt="" data-size="line">](https://training.hacktricks.xyz/courses/grte)

<details>

<summary>Apoya a HackTricks</summary>

* Consulta los [**planes de suscripci√≥n**](https://github.com/sponsors/carlospolop)!
* **√önete al** üí¨ [**grupo de Discord**](https://discord.gg/hRep4RUj7f) o al [**grupo de telegram**](https://t.me/peass) o **s√≠guenos** en **Twitter** üê¶ [**@hacktricks\_live**](https://twitter.com/hacktricks\_live)**.**
* **Comparte trucos de hacking enviando PRs a los** [**HackTricks**](https://github.com/carlospolop/hacktricks) y [**HackTricks Cloud**](https://github.com/carlospolop/hacktricks-cloud) repositorios de github.

</details>
{% endhint %}

**Consulta** [**https://rhinosecuritylabs.com/aws/abusing-vpc-traffic-mirroring-in-aws**](https://rhinosecuritylabs.com/aws/abusing-vpc-traffic-mirroring-in-aws) **para m√°s detalles del ataque!**

La inspecci√≥n pasiva de redes en un entorno de nube ha sido **desafiante**, requiriendo cambios de configuraci√≥n importantes para monitorear el tr√°fico de red. Sin embargo, una nueva caracter√≠stica llamada ‚Äú**Espejo de Tr√°fico VPC**‚Äù ha sido introducida por AWS para simplificar este proceso. Con el Espejo de Tr√°fico VPC, el tr√°fico de red dentro de las VPCs puede ser **duplicado** sin instalar ning√∫n software en las instancias mismas. Este tr√°fico duplicado puede ser enviado a un sistema de detecci√≥n de intrusiones en la red (IDS) para **an√°lisis**.

Para abordar la necesidad de **despliegue automatizado** de la infraestructura necesaria para espejar y exfiltrar el tr√°fico de VPC, hemos desarrollado un script de prueba de concepto llamado ‚Äú**malmirror**‚Äù. Este script puede ser utilizado con **credenciales de AWS comprometidas** para configurar el espejado de todas las instancias EC2 soportadas en una VPC objetivo. Es importante notar que el Espejo de Tr√°fico VPC solo es soportado por instancias EC2 alimentadas por el sistema AWS Nitro, y el objetivo del espejo VPC debe estar dentro de la misma VPC que los hosts espejados.

El **impacto** del espejado malicioso de tr√°fico VPC puede ser significativo, ya que permite a los atacantes acceder a **informaci√≥n sensible** transmitida dentro de las VPCs. La **probabilidad** de que tal espejado malicioso ocurra es alta, considerando la presencia de **tr√°fico en texto claro** fluyendo a trav√©s de las VPCs. Muchas empresas utilizan protocolos en texto claro dentro de sus redes internas por **razones de rendimiento**, asumiendo que los ataques tradicionales de hombre en el medio no son posibles.

Para m√°s informaci√≥n y acceso al [**script malmirror**](https://github.com/RhinoSecurityLabs/Cloud-Security-Research/tree/master/AWS/malmirror), se puede encontrar en nuestro **repositorio de GitHub**. El script automatiza y agiliza el proceso, haci√©ndolo **r√°pido, simple y repetible** para fines de investigaci√≥n ofensiva.

{% hint style="success" %}
Aprende y practica Hacking en AWS:<img src="../../../../.gitbook/assets/image (1) (1).png" alt="" data-size="line">[**HackTricks Training AWS Red Team Expert (ARTE)**](https://training.hacktricks.xyz/courses/arte)<img src="../../../../.gitbook/assets/image (1) (1).png" alt="" data-size="line">\
Aprende y practica Hacking en GCP: <img src="../../../../.gitbook/assets/image (2).png" alt="" data-size="line">[**HackTricks Training GCP Red Team Expert (GRTE)**<img src="../../../../.gitbook/assets/image (2).png" alt="" data-size="line">](https://training.hacktricks.xyz/courses/grte)

<details>

<summary>Apoya a HackTricks</summary>

* Consulta los [**planes de suscripci√≥n**](https://github.com/sponsors/carlospolop)!
* **√önete al** üí¨ [**grupo de Discord**](https://discord.gg/hRep4RUj7f) o al [**grupo de telegram**](https://t.me/peass) o **s√≠guenos** en **Twitter** üê¶ [**@hacktricks\_live**](https://twitter.com/hacktricks\_live)**.**
* **Comparte trucos de hacking enviando PRs a los** [**HackTricks**](https://github.com/carlospolop/hacktricks) y [**HackTricks Cloud**](https://github.com/carlospolop/hacktricks-cloud) repositorios de github.

</details>
{% endhint %}
