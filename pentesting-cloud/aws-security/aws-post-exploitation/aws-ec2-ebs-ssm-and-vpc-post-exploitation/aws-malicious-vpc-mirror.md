# AWS - Malicious VPC Mirror

{% hint style="success" %}
Aprenda e pratique Hacking AWS:<img src="../../../../.gitbook/assets/image (1) (1).png" alt="" data-size="line">[**HackTricks Training AWS Red Team Expert (ARTE)**](https://training.hacktricks.xyz/courses/arte)<img src="../../../../.gitbook/assets/image (1) (1).png" alt="" data-size="line">\
Aprenda e pratique Hacking GCP: <img src="../../../../.gitbook/assets/image (2).png" alt="" data-size="line">[**HackTricks Training GCP Red Team Expert (GRTE)**<img src="../../../../.gitbook/assets/image (2).png" alt="" data-size="line">](https://training.hacktricks.xyz/courses/grte)

<details>

<summary>Support HackTricks</summary>

* Confira os [**planos de assinatura**](https://github.com/sponsors/carlospolop)!
* **Junte-se ao** üí¨ [**grupo do Discord**](https://discord.gg/hRep4RUj7f) ou ao [**grupo do telegram**](https://t.me/peass) ou **siga**-nos no **Twitter** üê¶ [**@hacktricks\_live**](https://twitter.com/hacktricks\_live)**.**
* **Compartilhe truques de hacking enviando PRs para o** [**HackTricks**](https://github.com/carlospolop/hacktricks) e [**HackTricks Cloud**](https://github.com/carlospolop/hacktricks-cloud) reposit√≥rios do github.

</details>
{% endhint %}

**Verifique** [**https://rhinosecuritylabs.com/aws/abusing-vpc-traffic-mirroring-in-aws**](https://rhinosecuritylabs.com/aws/abusing-vpc-traffic-mirroring-in-aws) **para mais detalhes do ataque!**

A inspe√ß√£o passiva de rede em um ambiente de nuvem tem sido **desafiadora**, exigindo grandes mudan√ßas de configura√ß√£o para monitorar o tr√°fego de rede. No entanto, um novo recurso chamado ‚Äú**VPC Traffic Mirroring**‚Äù foi introduzido pela AWS para simplificar esse processo. Com o VPC Traffic Mirroring, o tr√°fego de rede dentro das VPCs pode ser **duplicado** sem instalar nenhum software nas inst√¢ncias. Esse tr√°fego duplicado pode ser enviado para um sistema de detec√ß√£o de intrus√µes de rede (IDS) para **an√°lise**.

Para atender √† necessidade de **implanta√ß√£o automatizada** da infraestrutura necess√°ria para espelhar e exfiltrar o tr√°fego da VPC, desenvolvemos um script de prova de conceito chamado ‚Äú**malmirror**‚Äù. Este script pode ser usado com **credenciais AWS comprometidas** para configurar o espelhamento para todas as inst√¢ncias EC2 suportadas em uma VPC alvo. √â importante notar que o VPC Traffic Mirroring √© suportado apenas por inst√¢ncias EC2 alimentadas pelo sistema AWS Nitro, e o alvo do espelhamento VPC deve estar dentro da mesma VPC que os hosts espelhados.

O **impacto** do espelhamento de tr√°fego VPC malicioso pode ser significativo, pois permite que atacantes acessem **informa√ß√µes sens√≠veis** transmitidas dentro das VPCs. A **probabilidade** de tal espelhamento malicioso √© alta, considerando a presen√ßa de **tr√°fego em texto claro** fluindo atrav√©s das VPCs. Muitas empresas usam protocolos em texto claro dentro de suas redes internas por **raz√µes de desempenho**, assumindo que ataques tradicionais de man-in-the-middle n√£o s√£o poss√≠veis.

Para mais informa√ß√µes e acesso ao [**script malmirror**](https://github.com/RhinoSecurityLabs/Cloud-Security-Research/tree/master/AWS/malmirror), ele pode ser encontrado em nosso **reposit√≥rio GitHub**. O script automatiza e simplifica o processo, tornando-o **r√°pido, simples e repet√≠vel** para fins de pesquisa ofensiva.

{% hint style="success" %}
Aprenda e pratique Hacking AWS:<img src="../../../../.gitbook/assets/image (1) (1).png" alt="" data-size="line">[**HackTricks Training AWS Red Team Expert (ARTE)**](https://training.hacktricks.xyz/courses/arte)<img src="../../../../.gitbook/assets/image (1) (1).png" alt="" data-size="line">\
Aprenda e pratique Hacking GCP: <img src="../../../../.gitbook/assets/image (2).png" alt="" data-size="line">[**HackTricks Training GCP Red Team Expert (GRTE)**<img src="../../../../.gitbook/assets/image (2).png" alt="" data-size="line">](https://training.hacktricks.xyz/courses/grte)

<details>

<summary>Support HackTricks</summary>

* Confira os [**planos de assinatura**](https://github.com/sponsors/carlospolop)!
* **Junte-se ao** üí¨ [**grupo do Discord**](https://discord.gg/hRep4RUj7f) ou ao [**grupo do telegram**](https://t.me/peass) ou **siga**-nos no **Twitter** üê¶ [**@hacktricks\_live**](https://twitter.com/hacktricks\_live)**.**
* **Compartilhe truques de hacking enviando PRs para o** [**HackTricks**](https://github.com/carlospolop/hacktricks) e [**HackTricks Cloud**](https://github.com/carlospolop/hacktricks-cloud) reposit√≥rios do github.

</details>
{% endhint %}
