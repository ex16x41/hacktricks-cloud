# AWS - Malicious VPC Mirror

{% hint style="success" %}
Learn & practice AWS Hacking:<img src="../../../../.gitbook/assets/image (1).png" alt="" data-size="line">[**HackTricks Training AWS Red Team Expert (ARTE)**](https://training.hacktricks.xyz/courses/arte)<img src="../../../../.gitbook/assets/image (1).png" alt="" data-size="line">\
Learn & practice GCP Hacking: <img src="../../../../.gitbook/assets/image (2).png" alt="" data-size="line">[**HackTricks Training GCP Red Team Expert (GRTE)**<img src="../../../../.gitbook/assets/image (2).png" alt="" data-size="line">](https://training.hacktricks.xyz/courses/grte)

<details>

<summary>Support HackTricks</summary>

* Check the [**subscription plans**](https://github.com/sponsors/carlospolop)!
* **Join the** üí¨ [**Discord group**](https://discord.gg/hRep4RUj7f) or the [**telegram group**](https://t.me/peass) or **follow** us on **Twitter** üê¶ [**@hacktricks\_live**](https://twitter.com/hacktricks\_live)**.**
* **Share hacking tricks by submitting PRs to the** [**HackTricks**](https://github.com/carlospolop/hacktricks) and [**HackTricks Cloud**](https://github.com/carlospolop/hacktricks-cloud) github repos.

</details>
{% endhint %}

**Check** [**https://rhinosecuritylabs.com/aws/abusing-vpc-traffic-mirroring-in-aws**](https://rhinosecuritylabs.com/aws/abusing-vpc-traffic-mirroring-in-aws) **for further details of the attack!**

La inspecci√≥n pasiva de redes en un entorno de nube ha sido **desafiante**, requiriendo cambios de configuraci√≥n importantes para monitorear el tr√°fico de red. Sin embargo, AWS ha introducido una nueva caracter√≠stica llamada ‚Äú**VPC Traffic Mirroring**‚Äù para simplificar este proceso. Con VPC Traffic Mirroring, el tr√°fico de red dentro de las VPC puede ser **duplicado** sin instalar ning√∫n software en las instancias mismas. Este tr√°fico duplicado puede ser enviado a un sistema de detecci√≥n de intrusiones en la red (IDS) para **an√°lisis**.

Para abordar la necesidad de **despliegue automatizado** de la infraestructura necesaria para la duplicaci√≥n y exfiltraci√≥n del tr√°fico de VPC, hemos desarrollado un script de prueba de concepto llamado ‚Äú**malmirror**‚Äù. Este script puede ser utilizado con **credenciales de AWS comprometidas** para configurar la duplicaci√≥n para todas las instancias EC2 soportadas en una VPC objetivo. Es importante notar que VPC Traffic Mirroring solo es soportado por instancias EC2 alimentadas por el sistema AWS Nitro, y el objetivo del espejo VPC debe estar dentro de la misma VPC que los hosts duplicados.

El **impacto** de la duplicaci√≥n maliciosa del tr√°fico de VPC puede ser significativo, ya que permite a los atacantes acceder a **informaci√≥n sensible** transmitida dentro de las VPC. La **probabilidad** de que tal duplicaci√≥n maliciosa ocurra es alta, considerando la presencia de **tr√°fico en texto claro** fluyendo a trav√©s de las VPC. Muchas empresas utilizan protocolos en texto claro dentro de sus redes internas por **razones de rendimiento**, asumiendo que los ataques tradicionales de hombre en el medio no son posibles.

Para m√°s informaci√≥n y acceso al [**script malmirror**](https://github.com/RhinoSecurityLabs/Cloud-Security-Research/tree/master/AWS/malmirror), se puede encontrar en nuestro **repositorio de GitHub**. El script automatiza y agiliza el proceso, haci√©ndolo **r√°pido, simple y repetible** para fines de investigaci√≥n ofensiva.

{% hint style="success" %}
Learn & practice AWS Hacking:<img src="../../../../.gitbook/assets/image (1).png" alt="" data-size="line">[**HackTricks Training AWS Red Team Expert (ARTE)**](https://training.hacktricks.xyz/courses/arte)<img src="../../../../.gitbook/assets/image (1).png" alt="" data-size="line">\
Learn & practice GCP Hacking: <img src="../../../../.gitbook/assets/image (2).png" alt="" data-size="line">[**HackTricks Training GCP Red Team Expert (GRTE)**<img src="../../../../.gitbook/assets/image (2).png" alt="" data-size="line">](https://training.hacktricks.xyz/courses/grte)

<details>

<summary>Support HackTricks</summary>

* Check the [**subscription plans**](https://github.com/sponsors/carlospolop)!
* **Join the** üí¨ [**Discord group**](https://discord.gg/hRep4RUj7f) or the [**telegram group**](https://t.me/peass) or **follow** us on **Twitter** üê¶ [**@hacktricks\_live**](https://twitter.com/hacktricks\_live)**.**
* **Share hacking tricks by submitting PRs to the** [**HackTricks**](https://github.com/carlospolop/hacktricks) and [**HackTricks Cloud**](https://github.com/carlospolop/hacktricks-cloud) github repos.

</details>
{% endhint %}
