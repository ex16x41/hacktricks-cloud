# AWS - Malicious VPC Mirror

{% hint style="success" %}
Learn & practice AWS Hacking:<img src="../../../../.gitbook/assets/image (1) (1).png" alt="" data-size="line">[**HackTricks Training AWS Red Team Expert (ARTE)**](https://training.hacktricks.xyz/courses/arte)<img src="../../../../.gitbook/assets/image (1) (1).png" alt="" data-size="line">\
Learn & practice GCP Hacking: <img src="../../../../.gitbook/assets/image (2).png" alt="" data-size="line">[**HackTricks Training GCP Red Team Expert (GRTE)**<img src="../../../../.gitbook/assets/image (2).png" alt="" data-size="line">](https://training.hacktricks.xyz/courses/grte)

<details>

<summary>Support HackTricks</summary>

* Check the [**subscription plans**](https://github.com/sponsors/carlospolop)!
* **Join the** üí¨ [**Discord group**](https://discord.gg/hRep4RUj7f) or the [**telegram group**](https://t.me/peass) or **follow** us on **Twitter** üê¶ [**@hacktricks\_live**](https://twitter.com/hacktricks\_live)**.**
* **Share hacking tricks by submitting PRs to the** [**HackTricks**](https://github.com/carlospolop/hacktricks) and [**HackTricks Cloud**](https://github.com/carlospolop/hacktricks-cloud) github repos.

</details>
{% endhint %}

**Check** [**https://rhinosecuritylabs.com/aws/abusing-vpc-traffic-mirroring-in-aws**](https://rhinosecuritylabs.com/aws/abusing-vpc-traffic-mirroring-in-aws) **for further details of the attack!**

L'ispezione passiva della rete in un ambiente cloud √® stata **una sfida**, richiedendo importanti modifiche di configurazione per monitorare il traffico di rete. Tuttavia, una nuova funzionalit√† chiamata ‚Äú**VPC Traffic Mirroring**‚Äù √® stata introdotta da AWS per semplificare questo processo. Con VPC Traffic Mirroring, il traffico di rete all'interno delle VPC pu√≤ essere **duplicato** senza installare alcun software sulle istanze stesse. Questo traffico duplicato pu√≤ essere inviato a un sistema di rilevamento delle intrusioni di rete (IDS) per **analisi**.

Per affrontare la necessit√† di **distribuzione automatizzata** dell'infrastruttura necessaria per il mirroring e l'exfiltrazione del traffico VPC, abbiamo sviluppato uno script di proof-of-concept chiamato ‚Äú**malmirror**‚Äù. Questo script pu√≤ essere utilizzato con **credenziali AWS compromesse** per impostare il mirroring per tutte le istanze EC2 supportate in una VPC target. √à importante notare che il VPC Traffic Mirroring √® supportato solo dalle istanze EC2 alimentate dal sistema AWS Nitro, e il target del mirror VPC deve trovarsi all'interno della stessa VPC degli host mirrorati.

L'**impatto** del mirroring del traffico VPC malevolo pu√≤ essere significativo, poich√© consente agli attaccanti di accedere a **informazioni sensibili** trasmesse all'interno delle VPC. La **probabilit√†** di un tale mirroring malevolo √® alta, considerando la presenza di **traffico in chiaro** che scorre attraverso le VPC. Molte aziende utilizzano protocolli in chiaro all'interno delle loro reti interne per **ragioni di prestazioni**, assumendo che gli attacchi tradizionali man-in-the-middle non siano possibili.

Per ulteriori informazioni e accesso allo [**script malmirror**](https://github.com/RhinoSecurityLabs/Cloud-Security-Research/tree/master/AWS/malmirror), pu√≤ essere trovato nel nostro **repository GitHub**. Lo script automatizza e semplifica il processo, rendendolo **veloce, semplice e ripetibile** per scopi di ricerca offensiva.

{% hint style="success" %}
Learn & practice AWS Hacking:<img src="../../../../.gitbook/assets/image (1) (1).png" alt="" data-size="line">[**HackTricks Training AWS Red Team Expert (ARTE)**](https://training.hacktricks.xyz/courses/arte)<img src="../../../../.gitbook/assets/image (1) (1).png" alt="" data-size="line">\
Learn & practice GCP Hacking: <img src="../../../../.gitbook/assets/image (2).png" alt="" data-size="line">[**HackTricks Training GCP Red Team Expert (GRTE)**<img src="../../../../.gitbook/assets/image (2).png" alt="" data-size="line">](https://training.hacktricks.xyz/courses/grte)

<details>

<summary>Support HackTricks</summary>

* Check the [**subscription plans**](https://github.com/sponsors/carlospolop)!
* **Join the** üí¨ [**Discord group**](https://discord.gg/hRep4RUj7f) or the [**telegram group**](https://t.me/peass) or **follow** us on **Twitter** üê¶ [**@hacktricks\_live**](https://twitter.com/hacktricks\_live)**.**
* **Share hacking tricks by submitting PRs to the** [**HackTricks**](https://github.com/carlospolop/hacktricks) and [**HackTricks Cloud**](https://github.com/carlospolop/hacktricks-cloud) github repos.

</details>
{% endhint %}
