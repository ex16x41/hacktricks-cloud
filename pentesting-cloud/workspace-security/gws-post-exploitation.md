# GWS - Post Exploitation

{% hint style="success" %}
Learn & practice AWS Hacking:<img src="../../.gitbook/assets/image (1) (1).png" alt="" data-size="line">[**HackTricks Training AWS Red Team Expert (ARTE)**](https://training.hacktricks.xyz/courses/arte)<img src="../../.gitbook/assets/image (1) (1).png" alt="" data-size="line">\
Learn & practice GCP Hacking: <img src="../../.gitbook/assets/image (2).png" alt="" data-size="line">[**HackTricks Training GCP Red Team Expert (GRTE)**<img src="../../.gitbook/assets/image (2).png" alt="" data-size="line">](https://training.hacktricks.xyz/courses/grte)

<details>

<summary>Support HackTricks</summary>

* Check the [**subscription plans**](https://github.com/sponsors/carlospolop)!
* **Join the** 💬 [**Discord group**](https://discord.gg/hRep4RUj7f) or the [**telegram group**](https://t.me/peass) or **follow** us on **Twitter** 🐦 [**@hacktricks\_live**](https://twitter.com/hacktricks\_live)**.**
* **Share hacking tricks by submitting PRs to the** [**HackTricks**](https://github.com/carlospolop/hacktricks) and [**HackTricks Cloud**](https://github.com/carlospolop/hacktricks-cloud) github repos.

</details>
{% endhint %}

## Google Groups Privesc

기본적으로 워크스페이스에서 **그룹**은 조직의 모든 구성원이 **자유롭게 접근할 수 있습니다**.\
워크스페이스는 **그룹에 권한을 부여할 수 있도록 허용**하므로 (GCP 권한 포함), 그룹에 가입할 수 있고 추가 권한이 있는 경우, 공격자는 **그 경로를 악용하여 권한을 상승시킬 수 있습니다**.

조직 내 누구나 가입할 수 있는 그룹에 가입하려면 콘솔에 접근해야 할 수 있습니다. [**https://groups.google.com/all-groups**](https://groups.google.com/all-groups)에서 그룹 정보를 확인하세요.

### Access Groups Mail info

만약 **구글 사용자 세션을 침해**했다면, [**https://groups.google.com/all-groups**](https://groups.google.com/all-groups)에서 사용자가 소속된 메일 그룹에 발송된 메일의 기록을 볼 수 있으며, **자격 증명**이나 다른 **민감한 데이터**를 찾을 수 있습니다.

## GCP <--> GWS Pivoting

{% content-ref url="../gcp-security/gcp-to-workspace-pivoting/" %}
[gcp-to-workspace-pivoting](../gcp-security/gcp-to-workspace-pivoting/)
{% endcontent-ref %}

## Takeout - Download Everything Google Knows about an account

피해자의 구글 계정 내에 **세션이 있다면**, [**https://takeout.google.com**](https://takeout.google.com/u/1/?pageId=none)에서 해당 계정에 대해 구글이 저장한 모든 것을 다운로드할 수 있습니다.

## Vault - Download all the Workspace data of users

조직에 **Google Vault가 활성화되어 있다면**, [**https://vault.google.com**](https://vault.google.com/u/1/)에 접근하여 **모든 정보**를 **다운로드**할 수 있습니다.

## Contacts download

[**https://contacts.google.com**](https://contacts.google.com/u/1/?hl=es\&tab=mC)에서 사용자의 모든 **연락처**를 다운로드할 수 있습니다.

## Cloudsearch

[**https://cloudsearch.google.com/**](https://cloudsearch.google.com)에서 사용자가 접근할 수 있는 **모든 워크스페이스 콘텐츠**(이메일, 드라이브, 사이트 등)를 검색할 수 있습니다. 민감한 정보를 **빠르게 찾기**에 이상적입니다.

## Google Chat

[**https://mail.google.com/chat**](https://mail.google.com/chat)에서 구글 **채팅**에 접근할 수 있으며, 대화에서 민감한 정보를 찾을 수 있습니다(있는 경우).

## Google Drive Mining

문서를 **공유할 때**, 접근할 수 있는 **사람들**을 하나씩 **지정**할 수 있으며, **전체 회사**(**또는** 특정 **그룹**)와 **링크를 생성하여** 공유할 수 있습니다.

문서를 공유할 때, 고급 설정에서 이 파일을 **검색할 수 있도록 허용**할 수도 있습니다(기본적으로 **비활성화**되어 있습니다). 그러나 사용자가 문서를 한 번 보게 되면, 그들은 이를 검색할 수 있다는 점에 유의해야 합니다.

간단함을 위해 대부분의 사람들은 문서에 접근할 수 있는 사람들을 하나씩 추가하는 대신 링크를 생성하고 공유할 것입니다.

모든 문서를 찾기 위한 몇 가지 제안된 방법:

* 내부 채팅, 포럼에서 검색...
* **스파이더**로 알려진 **문서**를 검색하여 다른 문서에 대한 **참조**를 찾기. [**PaperChaser**](https://github.com/mandatoryprogrammer/PaperChaser)로 앱 스크립트 내에서 이를 수행할 수 있습니다.

## **Keep Notes**

[**https://keep.google.com/**](https://keep.google.com)에서 사용자의 노트에 접근할 수 있으며, **민감한** **정보**가 여기에 저장될 수 있습니다.

### Modify App Scripts

[**https://script.google.com/**](https://script.google.com/)에서 사용자의 APP 스크립트를 찾을 수 있습니다.

## **Administrate Workspace**

[**https://admin.google.com**/](https://admin.google.com)에서 충분한 권한이 있다면 전체 조직의 워크스페이스 설정을 수정할 수 있습니다.

[**https://admin.google.com/ac/emaillogsearch**](https://admin.google.com/ac/emaillogsearch)에서 사용자의 모든 청구서를 검색하여 이메일을 찾을 수도 있습니다.

## References

* [https://www.youtube-nocookie.com/embed/6AsVUS79gLw](https://www.youtube-nocookie.com/embed/6AsVUS79gLw) - Matthew Bryant - Hacking G Suite: The Power of Dark Apps Script Magic
* [https://www.youtube.com/watch?v=KTVHLolz6cE](https://www.youtube.com/watch?v=KTVHLolz6cE) - Mike Felch and Beau Bullock - OK Google, How do I Red Team GSuite?

{% hint style="success" %}
Learn & practice AWS Hacking:<img src="../../.gitbook/assets/image (1) (1).png" alt="" data-size="line">[**HackTricks Training AWS Red Team Expert (ARTE)**](https://training.hacktricks.xyz/courses/arte)<img src="../../.gitbook/assets/image (1) (1).png" alt="" data-size="line">\
Learn & practice GCP Hacking: <img src="../../.gitbook/assets/image (2).png" alt="" data-size="line">[**HackTricks Training GCP Red Team Expert (GRTE)**<img src="../../.gitbook/assets/image (2).png" alt="" data-size="line">](https://training.hacktricks.xyz/courses/grte)

<details>

<summary>Support HackTricks</summary>

* Check the [**subscription plans**](https://github.com/sponsors/carlospolop)!
* **Join the** 💬 [**Discord group**](https://discord.gg/hRep4RUj7f) or the [**telegram group**](https://t.me/peass) or **follow** us on **Twitter** 🐦 [**@hacktricks\_live**](https://twitter.com/hacktricks\_live)**.**
* **Share hacking tricks by submitting PRs to the** [**HackTricks**](https://github.com/carlospolop/hacktricks) and [**HackTricks Cloud**](https://github.com/carlospolop/hacktricks-cloud) github repos.

</details>
{% endhint %}
