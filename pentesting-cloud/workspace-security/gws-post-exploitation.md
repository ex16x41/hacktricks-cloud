# GWS - ポストエクスプロイト

{% hint style="success" %}
AWSハッキングを学び、実践する：<img src="../../.gitbook/assets/image (1).png" alt="" data-size="line">[**HackTricks Training AWS Red Team Expert (ARTE)**](https://training.hacktricks.xyz/courses/arte)<img src="../../.gitbook/assets/image (1).png" alt="" data-size="line">\
GCPハッキングを学び、実践する：<img src="../../.gitbook/assets/image (2).png" alt="" data-size="line">[**HackTricks Training GCP Red Team Expert (GRTE)**<img src="../../.gitbook/assets/image (2).png" alt="" data-size="line">](https://training.hacktricks.xyz/courses/grte)

<details>

<summary>HackTricksをサポートする</summary>

* [**サブスクリプションプラン**](https://github.com/sponsors/carlospolop)を確認してください！
* **💬 [**Discordグループ**](https://discord.gg/hRep4RUj7f)または[**Telegramグループ**](https://t.me/peass)に参加するか、**Twitter** 🐦 [**@hacktricks\_live**](https://twitter.com/hacktricks\_live)**をフォローしてください。**
* **[**HackTricks**](https://github.com/carlospolop/hacktricks)および[**HackTricks Cloud**](https://github.com/carlospolop/hacktricks-cloud)のGitHubリポジトリにPRを提出してハッキングトリックを共有してください。**

</details>
{% endhint %}

## Google Groups Privesc

デフォルトでは、workspaceの**グループ**は組織の任意のメンバーによって**自由にアクセス**できます。\
Workspaceは**グループに権限を付与する**ことも許可しているため（GCP権限も含む）、グループに参加でき、追加の権限がある場合、攻撃者は**その経路を悪用して権限を昇格させる**可能性があります。

組織内の誰でも参加できるグループに参加するには、コンソールへのアクセスが必要な場合があります。グループ情報は[**https://groups.google.com/all-groups**](https://groups.google.com/all-groups)で確認してください。

### アクセスグループメール情報

もし**Googleユーザーセッションを侵害**できた場合、[**https://groups.google.com/all-groups**](https://groups.google.com/all-groups)から、ユーザーがメンバーであるメールグループに送信されたメールの履歴を確認でき、**資格情報**や他の**機密データ**を見つけることができるかもしれません。

## GCP <--> GWS ピボッティング

{% content-ref url="../gcp-security/gcp-to-workspace-pivoting/" %}
[gcp-to-workspace-pivoting](../gcp-security/gcp-to-workspace-pivoting/)
{% endcontent-ref %}

## Takeout - アカウントに関するGoogleのすべての情報をダウンロード

もし**被害者のGoogleアカウント内にセッションがある**場合、[**https://takeout.google.com**](https://takeout.google.com/u/1/?pageId=none)からそのアカウントに関するGoogleが保存しているすべての情報をダウンロードできます。

## Vault - ユーザーのWorkspaceデータをすべてダウンロード

もし組織が**Google Vaultを有効にしている**場合、[**https://vault.google.com**](https://vault.google.com/u/1/)にアクセスして**すべての情報をダウンロード**できるかもしれません。

## 連絡先のダウンロード

[**https://contacts.google.com**](https://contacts.google.com/u/1/?hl=es\&tab=mC)からユーザーの**連絡先**をすべてダウンロードできます。

## Cloudsearch

[**https://cloudsearch.google.com/**](https://cloudsearch.google.com)では、ユーザーがアクセスできる**すべてのWorkspaceコンテンツ**（メール、ドライブ、サイトなど）を検索できます。機密情報を**迅速に見つける**のに理想的です。

## Google Chat

[**https://mail.google.com/chat**](https://mail.google.com/chat)ではGoogleの**チャット**にアクセスでき、会話の中に機密情報が見つかるかもしれません（もしあれば）。

## Google Drive マイニング

ドキュメントを**共有**する際、アクセスできる**人々**を一人ずつ**指定**することができますが、**会社全体**（または特定の**グループ**）と**リンクを生成して**共有することもできます。

ドキュメントを共有する際、詳細設定でこのファイルを**検索可能にする**こともできます（**デフォルト**では**無効**です）。ただし、ユーザーがドキュメントを表示すると、それは彼らによって検索可能になることに注意が必要です。

簡単のために、ほとんどの人は一人ずつアクセスできる人を追加するのではなく、リンクを生成して共有します。

すべてのドキュメントを見つけるための提案された方法：

* 内部チャット、フォーラムで検索...
* **スパイダー**として知られている**ドキュメント**を検索し、他のドキュメントへの**参照**を探します。これは[ **PaperChaser**](https://github.com/mandatoryprogrammer/PaperChaser)を使用してApp Script内で行うことができます。

## **Keep Notes**

[**https://keep.google.com/**](https://keep.google.com)ではユーザーのノートにアクセスでき、**機密**の**情報**がここに保存されているかもしれません。

### アプリスクリプトの変更

[**https://script.google.com/**](https://script.google.com/)ではユーザーのAPPスクリプトを見つけることができます。

## **Workspaceの管理**

[**https://admin.google.com**/](https://admin.google.com)では、十分な権限があれば組織全体のWorkspace設定を変更できるかもしれません。

[**https://admin.google.com/ac/emaillogsearch**](https://admin.google.com/ac/emaillogsearch)でユーザーの請求書を検索することでメールを見つけることもできます。

## 参考文献

* [https://www.youtube-nocookie.com/embed/6AsVUS79gLw](https://www.youtube-nocookie.com/embed/6AsVUS79gLw) - Matthew Bryant - G Suiteのハッキング：ダークアプリスクリプトマジックの力
* [https://www.youtube.com/watch?v=KTVHLolz6cE](https://www.youtube.com/watch?v=KTVHLolz6cE) - Mike FelchとBeau Bullock - OK Google、GSuiteをレッドチームするにはどうすればいいですか？

{% hint style="success" %}
AWSハッキングを学び、実践する：<img src="../../.gitbook/assets/image (1).png" alt="" data-size="line">[**HackTricks Training AWS Red Team Expert (ARTE)**](https://training.hacktricks.xyz/courses/arte)<img src="../../.gitbook/assets/image (1).png" alt="" data-size="line">\
GCPハッキングを学び、実践する：<img src="../../.gitbook/assets/image (2).png" alt="" data-size="line">[**HackTricks Training GCP Red Team Expert (GRTE)**<img src="../../.gitbook/assets/image (2).png" alt="" data-size="line">](https://training.hacktricks.xyz/courses/grte)

<details>

<summary>HackTricksをサポートする</summary>

* [**サブスクリプションプラン**](https://github.com/sponsors/carlospolop)を確認してください！
* **💬 [**Discordグループ**](https://discord.gg/hRep4RUj7f)または[**Telegramグループ**](https://t.me/peass)に参加するか、**Twitter** 🐦 [**@hacktricks\_live**](https://twitter.com/hacktricks\_live)**をフォローしてください。**
* **[**HackTricks**](https://github.com/carlospolop/hacktricks)および[**HackTricks Cloud**](https://github.com/carlospolop/hacktricks-cloud)のGitHubリポジトリにPRを提出してハッキングトリックを共有してください。**

</details>
{% endhint %}
