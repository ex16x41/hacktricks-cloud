# GWS - Pentesting Workspace

{% hint style="success" %}
Apprenez et pratiquez le hacking AWS :<img src="../../.gitbook/assets/image (1) (1) (1).png" alt="" data-size="line">[**Formation HackTricks AWS Red Team Expert (ARTE)**](https://training.hacktricks.xyz/courses/arte)<img src="../../.gitbook/assets/image (1) (1) (1).png" alt="" data-size="line">\
Apprenez et pratiquez le hacking GCP : <img src="../../.gitbook/assets/image (2).png" alt="" data-size="line">[**Formation HackTricks GCP Red Team Expert (GRTE)**<img src="../../.gitbook/assets/image (2).png" alt="" data-size="line">](https://training.hacktricks.xyz/courses/grte)

<details>

<summary>Supportez HackTricks</summary>

* Consultez les [**plans d'abonnement**](https://github.com/sponsors/carlospolop) !
* **Rejoignez le** üí¨ [**groupe Discord**](https://discord.gg/hRep4RUj7f) ou le [**groupe telegram**](https://t.me/peass) ou **suivez-nous sur** **Twitter** üê¶ [**@hacktricks\_live**](https://twitter.com/hacktricks_live)**.**
* **Partagez des astuces de hacking en soumettant des PRs aux** [**HackTricks**](https://github.com/carlospolop/hacktricks) et [**HackTricks Cloud**](https://github.com/carlospolop/hacktricks-cloud) d√©p√¥ts github.

</details>
{% endhint %}

## Points d'entr√©e

### Phishing sur les plateformes Google et les applications OAuth

V√©rifiez comment vous pourriez utiliser diff√©rentes plateformes Google telles que Drive, Chat, Groups... pour envoyer √† la victime un lien de phishing et comment effectuer un phishing Google OAuth dans :

{% content-ref url="gws-google-platforms-phishing/" %}
[gws-google-platforms-phishing](gws-google-platforms-phishing/)
{% endcontent-ref %}

### Password Spraying

Pour tester les mots de passe avec tous les emails que vous avez trouv√©s (ou que vous avez g√©n√©r√©s en fonction d'un mod√®le de nom d'email que vous avez peut-√™tre d√©couvert), vous pourriez utiliser un outil comme [**https://github.com/ustayready/CredKing**](https://github.com/ustayready/CredKing) (bien qu'il semble non maintenu) qui utilisera des lambdas AWS pour changer d'adresse IP.

## Post-Exploitation

Si vous avez compromis des identifiants ou la session de l'utilisateur, vous pouvez effectuer plusieurs actions pour acc√©der √† des informations potentiellement sensibles de l'utilisateur et essayer d'escalader les privil√®ges :

{% content-ref url="gws-post-exploitation.md" %}
[gws-post-exploitation.md](gws-post-exploitation.md)
{% endcontent-ref %}

### GWS <--> GCP Pivoting

Lisez-en plus sur les diff√©rentes techniques pour pivoter entre GWS et GCP dans :

{% content-ref url="../gcp-security/gcp-to-workspace-pivoting/" %}
[gcp-to-workspace-pivoting](../gcp-security/gcp-to-workspace-pivoting/)
{% endcontent-ref %}

## GWS <--> GCPW | GCDS | Synchronisation de r√©pertoire (AD & EntraID)

* **GCPW (Google Credential Provider for Windows)** : C'est le syst√®me d'authentification unique que Google Workspaces fournit afin que les utilisateurs puissent se connecter √† leurs PC Windows en utilisant **leurs identifiants Workspace**. De plus, cela **stockera des jetons pour acc√©der √† Google Workspace** √† certains endroits sur le PC.
* **GCDS (Google Cloud Directory Sync)** : C'est un outil qui peut √™tre utilis√© pour **synchroniser vos utilisateurs et groupes d'annuaire actif avec votre Workspace**. L'outil n√©cessite les **identifiants d'un super utilisateur Workspace et d'un utilisateur AD privil√©gi√©**. Il pourrait donc √™tre possible de le trouver √† l'int√©rieur d'un serveur de domaine qui synchroniserait des utilisateurs de temps en temps.
* **Admin Directory Sync** : Il vous permet de synchroniser des utilisateurs d'AD et d'EntraID dans un processus sans serveur depuis [https://admin.google.com/ac/sync/externaldirectories](https://admin.google.com/ac/sync/externaldirectories).

{% content-ref url="gws-workspace-sync-attacks-gcpw-gcds-gps-directory-sync-with-ad-and-entraid/" %}
[gws-workspace-sync-attacks-gcpw-gcds-gps-directory-sync-with-ad-and-entraid](gws-workspace-sync-attacks-gcpw-gcds-gps-directory-sync-with-ad-and-entraid/)
{% endcontent-ref %}

## Persistance

Si vous avez compromis des identifiants ou la session de l'utilisateur, v√©rifiez ces options pour maintenir la persistance :

{% content-ref url="gws-persistence.md" %}
[gws-persistence.md](gws-persistence.md)
{% endcontent-ref %}

## R√©cup√©ration d'un compte compromis

* D√©connexion de toutes les sessions
* Changer le mot de passe de l'utilisateur
* G√©n√©rer de nouveaux codes de sauvegarde 2FA
* Supprimer les mots de passe d'application
* Supprimer les applications OAuth
* Supprimer les appareils 2FA
* Supprimer les redirections d'email
* Supprimer les filtres d'emails
* Supprimer les emails/num√©ros de t√©l√©phone de r√©cup√©ration
* Supprimer les smartphones synchronis√©s malveillants
* Supprimer les mauvaises applications Android
* Supprimer les mauvaises d√©l√©gations de compte

## R√©f√©rences

* [https://www.youtube-nocookie.com/embed/6AsVUS79gLw](https://www.youtube-nocookie.com/embed/6AsVUS79gLw) - Matthew Bryant - Hacking G Suite : Le pouvoir de la magie des scripts d'applications sombres
* [https://www.youtube.com/watch?v=KTVHLolz6cE](https://www.youtube.com/watch?v=KTVHLolz6cE) - Mike Felch et Beau Bullock - OK Google, comment puis-je Red Team GSuite ?

{% hint style="success" %}
Apprenez et pratiquez le hacking AWS :<img src="../../.gitbook/assets/image (1) (1) (1).png" alt="" data-size="line">[**Formation HackTricks AWS Red Team Expert (ARTE)**](https://training.hacktricks.xyz/courses/arte)<img src="../../.gitbook/assets/image (1) (1) (1).png" alt="" data-size="line">\
Apprenez et pratiquez le hacking GCP : <img src="../../.gitbook/assets/image (2).png" alt="" data-size="line">[**Formation HackTricks GCP Red Team Expert (GRTE)**<img src="../../.gitbook/assets/image (2).png" alt="" data-size="line">](https://training.hacktricks.xyz/courses/grte)

<details>

<summary>Supportez HackTricks</summary>

* Consultez les [**plans d'abonnement**](https://github.com/sponsors/carlospolop) !
* **Rejoignez le** üí¨ [**groupe Discord**](https://discord.gg/hRep4RUj7f) ou le [**groupe telegram**](https://t.me/peass) ou **suivez-nous sur** **Twitter** üê¶ [**@hacktricks\_live**](https://twitter.com/hacktricks_live)**.**
* **Partagez des astuces de hacking en soumettant des PRs aux** [**HackTricks**](https://github.com/carlospolop/hacktricks) et [**HackTricks Cloud**](https://github.com/carlospolop/hacktricks-cloud) d√©p√¥ts github.

</details>
{% endhint %}
