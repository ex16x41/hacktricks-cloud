# GWS - Workspace Pentesting

{% hint style="success" %}
Μάθετε & εξασκηθείτε στο AWS Hacking:<img src="../../.gitbook/assets/image (1).png" alt="" data-size="line">[**HackTricks Training AWS Red Team Expert (ARTE)**](https://training.hacktricks.xyz/courses/arte)<img src="../../.gitbook/assets/image (1).png" alt="" data-size="line">\
Μάθετε & εξασκηθείτε στο GCP Hacking: <img src="../../.gitbook/assets/image (2).png" alt="" data-size="line">[**HackTricks Training GCP Red Team Expert (GRTE)**<img src="../../.gitbook/assets/image (2).png" alt="" data-size="line">](https://training.hacktricks.xyz/courses/grte)

<details>

<summary>Υποστήριξη HackTricks</summary>

* Ελέγξτε τα [**σχέδια συνδρομής**](https://github.com/sponsors/carlospolop)!
* **Εγγραφείτε στην** 💬 [**ομάδα Discord**](https://discord.gg/hRep4RUj7f) ή στην [**ομάδα telegram**](https://t.me/peass) ή **ακολουθήστε** μας στο **Twitter** 🐦 [**@hacktricks\_live**](https://twitter.com/hacktricks\_live)**.**
* **Μοιραστείτε κόλπα hacking υποβάλλοντας PRs στα** [**HackTricks**](https://github.com/carlospolop/hacktricks) και [**HackTricks Cloud**](https://github.com/carlospolop/hacktricks-cloud) github repos.

</details>
{% endhint %}

## Σημεία Εισόδου

### Phishing σε Google Platforms και OAuth Apps

Ελέγξτε πώς μπορείτε να χρησιμοποιήσετε διάφορες πλατφόρμες της Google όπως Drive, Chat, Groups... για να στείλετε στο θύμα έναν σύνδεσμο phishing και πώς να εκτελέσετε ένα Google OAuth Phishing σε:

{% content-ref url="gws-google-platforms-phishing/" %}
[gws-google-platforms-phishing](gws-google-platforms-phishing/)
{% endcontent-ref %}

### Password Spraying

Για να δοκιμάσετε κωδικούς πρόσβασης με όλα τα emails που βρήκατε (ή έχετε δημιουργήσει με βάση ένα μοτίβο ονόματος email που μπορεί να έχετε ανακαλύψει) μπορείτε να χρησιμοποιήσετε ένα εργαλείο όπως [**https://github.com/ustayready/CredKing**](https://github.com/ustayready/CredKing) (αν και φαίνεται ότι δεν συντηρείται) το οποίο θα χρησιμοποιήσει AWS lambdas για να αλλάξει τη διεύθυνση IP.

## Μετά την Εκμετάλλευση

Εάν έχετε παραβιάσει κάποια διαπιστευτήρια ή τη συνεδρία του χρήστη μπορείτε να εκτελέσετε πολλές ενέργειες για να αποκτήσετε πρόσβαση σε πιθανές ευαίσθητες πληροφορίες του χρήστη και να προσπαθήσετε να κλιμακώσετε τα προνόμια:

{% content-ref url="gws-post-exploitation.md" %}
[gws-post-exploitation.md](gws-post-exploitation.md)
{% endcontent-ref %}

### GWS <-->GCP Pivoting

Διαβάστε περισσότερα για τις διάφορες τεχνικές για pivoting μεταξύ GWS και GCP σε:

{% content-ref url="../gcp-security/gcp-to-workspace-pivoting/" %}
[gcp-to-workspace-pivoting](../gcp-security/gcp-to-workspace-pivoting/)
{% endcontent-ref %}

## GWS <--> GCPW | GCDS | Συγχρονισμός Καταλόγου (AD & EntraID)

* **GCPW (Google Credential Provider for Windows)**: Αυτό είναι το single sign-on που παρέχει το Google Workspaces ώστε οι χρήστες να μπορούν να συνδεθούν στους υπολογιστές Windows τους χρησιμοποιώντας **τα διαπιστευτήρια του Workspace τους**. Επιπλέον, αυτό θα **αποθηκεύσει tokens για πρόσβαση στο Google Workspace** σε ορισμένα μέρη στον υπολογιστή.
* **GCDS (Google Cloud Directory Sync)**: Αυτό είναι ένα εργαλείο που μπορεί να χρησιμοποιηθεί για να **συγχρονίσετε τους χρήστες και τις ομάδες του ενεργού καταλόγου σας με το Workspace σας**. Το εργαλείο απαιτεί **τα διαπιστευτήρια ενός superuser του Workspace και ενός προνομιούχου χρήστη AD**. Έτσι, μπορεί να είναι δυνατό να το βρείτε μέσα σε έναν διακομιστή τομέα που θα συγχρονίζει χρήστες από καιρό σε καιρό.
* **Admin Directory Sync**: Επιτρέπει να συγχρονίσετε χρήστες από AD και EntraID σε μια διαδικασία χωρίς διακομιστή από [https://admin.google.com/ac/sync/externaldirectories](https://admin.google.com/ac/sync/externaldirectories).

{% content-ref url="gws-workspace-sync-attacks-gcpw-gcds-gps-directory-sync-with-ad-and-entraid/" %}
[gws-workspace-sync-attacks-gcpw-gcds-gps-directory-sync-with-ad-and-entraid](gws-workspace-sync-attacks-gcpw-gcds-gps-directory-sync-with-ad-and-entraid/)
{% endcontent-ref %}

## Επιμονή

Εάν έχετε παραβιάσει κάποια διαπιστευτήρια ή τη συνεδρία του χρήστη ελέγξτε αυτές τις επιλογές για να διατηρήσετε την επιμονή σε αυτό:

{% content-ref url="gws-persistence.md" %}
[gws-persistence.md](gws-persistence.md)
{% endcontent-ref %}

## Ανάκτηση Λογαριασμού που έχει Παραβιαστεί

* Αποσυνδεθείτε από όλες τις συνεδρίες
* Αλλάξτε τον κωδικό πρόσβασης του χρήστη
* Δημιουργήστε νέους κωδικούς ασφαλείας 2FA
* Αφαιρέστε τους κωδικούς πρόσβασης εφαρμογών
* Αφαιρέστε τις εφαρμογές OAuth
* Αφαιρέστε τις συσκευές 2FA
* Αφαιρέστε τους προωθητές email
* Αφαιρέστε τα φίλτρα email
* Αφαιρέστε τα email/τηλέφωνα ανάκτησης
* Αφαιρέστε τα κακόβουλα συγχρονισμένα smartphones
* Αφαιρέστε τις κακές εφαρμογές Android
* Αφαιρέστε τις κακές εξουσιοδοτήσεις λογαριασμού

## Αναφορές

* [https://www.youtube-nocookie.com/embed/6AsVUS79gLw](https://www.youtube-nocookie.com/embed/6AsVUS79gLw) - Matthew Bryant - Hacking G Suite: The Power of Dark Apps Script Magic
* [https://www.youtube.com/watch?v=KTVHLolz6cE](https://www.youtube.com/watch?v=KTVHLolz6cE) - Mike Felch και Beau Bullock - OK Google, Πώς μπορώ να κάνω Red Team GSuite;

{% hint style="success" %}
Μάθετε & εξασκηθείτε στο AWS Hacking:<img src="../../.gitbook/assets/image (1).png" alt="" data-size="line">[**HackTricks Training AWS Red Team Expert (ARTE)**](https://training.hacktricks.xyz/courses/arte)<img src="../../.gitbook/assets/image (1).png" alt="" data-size="line">\
Μάθετε & εξασκηθείτε στο GCP Hacking: <img src="../../.gitbook/assets/image (2).png" alt="" data-size="line">[**HackTricks Training GCP Red Team Expert (GRTE)**<img src="../../.gitbook/assets/image (2).png" alt="" data-size="line">](https://training.hacktricks.xyz/courses/grte)

<details>

<summary>Υποστήριξη HackTricks</summary>

* Ελέγξτε τα [**σχέδια συνδρομής**](https://github.com/sponsors/carlospolop)!
* **Εγγραφείτε στην** 💬 [**ομάδα Discord**](https://discord.gg/hRep4RUj7f) ή στην [**ομάδα telegram**](https://t.me/peass) ή **ακολουθήστε** μας στο **Twitter** 🐦 [**@hacktricks\_live**](https://twitter.com/hacktricks\_live)**.**
* **Μοιραστείτε κόλπα hacking υποβάλλοντας PRs στα** [**HackTricks**](https://github.com/carlospolop/hacktricks) και [**HackTricks Cloud**](https://github.com/carlospolop/hacktricks-cloud) github repos.

</details>
{% endhint %}
