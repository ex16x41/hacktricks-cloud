# GWS - Workspace Pentesting

{% hint style="success" %}
å­¦ä¹ å’Œå®è·µ AWS é»‘å®¢æŠ€æœ¯ï¼š<img src="../../.gitbook/assets/image (1).png" alt="" data-size="line">[**HackTricks åŸ¹è®­ AWS çº¢é˜Ÿä¸“å®¶ (ARTE)**](https://training.hacktricks.xyz/courses/arte)<img src="../../.gitbook/assets/image (1).png" alt="" data-size="line">\
å­¦ä¹ å’Œå®è·µ GCP é»‘å®¢æŠ€æœ¯ï¼š<img src="../../.gitbook/assets/image (2).png" alt="" data-size="line">[**HackTricks åŸ¹è®­ GCP çº¢é˜Ÿä¸“å®¶ (GRTE)**<img src="../../.gitbook/assets/image (2).png" alt="" data-size="line">](https://training.hacktricks.xyz/courses/grte)

<details>

<summary>æ”¯æŒ HackTricks</summary>

* æŸ¥çœ‹ [**è®¢é˜…è®¡åˆ’**](https://github.com/sponsors/carlospolop)!
* **åŠ å…¥** ğŸ’¬ [**Discord ç¾¤ç»„**](https://discord.gg/hRep4RUj7f) æˆ– [**Telegram ç¾¤ç»„**](https://t.me/peass) æˆ– **åœ¨** **Twitter** ğŸ¦ [**@hacktricks\_live**](https://twitter.com/hacktricks\_live)** ä¸Šå…³æ³¨æˆ‘ä»¬ã€‚**
* **é€šè¿‡å‘** [**HackTricks**](https://github.com/carlospolop/hacktricks) å’Œ [**HackTricks Cloud**](https://github.com/carlospolop/hacktricks-cloud) GitHub ä»“åº“æäº¤ PR æ¥åˆ†äº«é»‘å®¢æŠ€å·§ã€‚

</details>
{% endhint %}

## å…¥å£ç‚¹

### Google å¹³å°å’Œ OAuth åº”ç”¨é’“é±¼

æ£€æŸ¥å¦‚ä½•ä½¿ç”¨ä¸åŒçš„ Google å¹³å°ï¼Œå¦‚ Driveã€Chatã€Groups... å‘å—å®³è€…å‘é€é’“é±¼é“¾æ¥ï¼Œä»¥åŠå¦‚ä½•æ‰§è¡Œ Google OAuth é’“é±¼ï¼š

{% content-ref url="gws-google-platforms-phishing/" %}
[gws-google-platforms-phishing](gws-google-platforms-phishing/)
{% endcontent-ref %}

### å¯†ç å–·æ´’

ä¸ºäº†æµ‹è¯•æ‚¨æ‰¾åˆ°çš„æ‰€æœ‰ç”µå­é‚®ä»¶ï¼ˆæˆ–åŸºäºæ‚¨å¯èƒ½å‘ç°çš„ç”µå­é‚®ä»¶åç§°æ¨¡å¼ç”Ÿæˆçš„ç”µå­é‚®ä»¶ï¼‰çš„å¯†ç ï¼Œæ‚¨å¯ä»¥ä½¿ç”¨ä¸€ä¸ªå·¥å…·ï¼Œå¦‚ [**https://github.com/ustayready/CredKing**](https://github.com/ustayready/CredKing)ï¼ˆå°½ç®¡å®ƒçœ‹èµ·æ¥æ²¡æœ‰ç»´æŠ¤ï¼‰ï¼Œè¯¥å·¥å…·å°†ä½¿ç”¨ AWS lambdas æ›´æ”¹ IP åœ°å€ã€‚

## åæœŸåˆ©ç”¨

å¦‚æœæ‚¨å·²ç»è·å–äº†ä¸€äº›å‡­æ®æˆ–ç”¨æˆ·çš„ä¼šè¯ï¼Œæ‚¨å¯ä»¥æ‰§è¡Œå¤šä¸ªæ“ä½œä»¥è®¿é—®ç”¨æˆ·çš„æ½œåœ¨æ•æ„Ÿä¿¡æ¯å¹¶å°è¯•æå‡æƒé™ï¼š

{% content-ref url="gws-post-exploitation.md" %}
[gws-post-exploitation.md](gws-post-exploitation.md)
{% endcontent-ref %}

### GWS <-->GCP é€ä¼ 

é˜…è¯»æ›´å¤šå…³äºåœ¨ GWS å’Œ GCP ä¹‹é—´é€ä¼ çš„ä¸åŒæŠ€æœ¯ï¼š

{% content-ref url="../gcp-security/gcp-to-workspace-pivoting/" %}
[gcp-to-workspace-pivoting](../gcp-security/gcp-to-workspace-pivoting/)
{% endcontent-ref %}

## GWS <--> GCPW | GCDS | ç›®å½•åŒæ­¥ (AD & EntraID)

* **GCPW (Google Windows å‡­æ®æä¾›ç¨‹åº)**ï¼šè¿™æ˜¯ Google Workspace æä¾›çš„å•ç‚¹ç™»å½•ï¼Œç”¨æˆ·å¯ä»¥ä½¿ç”¨ **ä»–ä»¬çš„ Workspace å‡­æ®** ç™»å½• Windows PCã€‚æ­¤å¤–ï¼Œè¿™å°† **åœ¨ PC çš„æŸäº›ä½ç½®å­˜å‚¨è®¿é—® Google Workspace çš„ä»¤ç‰Œ**ã€‚
* **GCDS (Google äº‘ç›®å½•åŒæ­¥)**ï¼šè¿™æ˜¯ä¸€ä¸ªå¯ä»¥ç”¨æ¥ **å°†æ‚¨çš„æ´»åŠ¨ç›®å½•ç”¨æˆ·å’Œç»„åŒæ­¥åˆ°æ‚¨çš„ Workspace** çš„å·¥å…·ã€‚è¯¥å·¥å…·éœ€è¦ **Workspace è¶…çº§ç”¨æˆ·å’Œç‰¹æƒ AD ç”¨æˆ·çš„å‡­æ®**ã€‚å› æ­¤ï¼Œå¯èƒ½ä¼šåœ¨ä¸€ä¸ªå®šæœŸåŒæ­¥ç”¨æˆ·çš„åŸŸæœåŠ¡å™¨ä¸­æ‰¾åˆ°å®ƒã€‚
* **ç®¡ç†å‘˜ç›®å½•åŒæ­¥**ï¼šå®ƒå…è®¸æ‚¨åœ¨æ— æœåŠ¡å™¨çš„è¿‡ç¨‹ä¸­ä» [https://admin.google.com/ac/sync/externaldirectories](https://admin.google.com/ac/sync/externaldirectories) åŒæ­¥ AD å’Œ EntraID ä¸­çš„ç”¨æˆ·ã€‚

{% content-ref url="gws-workspace-sync-attacks-gcpw-gcds-gps-directory-sync-with-ad-and-entraid/" %}
[gws-workspace-sync-attacks-gcpw-gcds-gps-directory-sync-with-ad-and-entraid](gws-workspace-sync-attacks-gcpw-gcds-gps-directory-sync-with-ad-and-entraid/)
{% endcontent-ref %}

## æŒä¹…æ€§

å¦‚æœæ‚¨å·²ç»è·å–äº†ä¸€äº›å‡­æ®æˆ–ç”¨æˆ·çš„ä¼šè¯ï¼Œè¯·æ£€æŸ¥è¿™äº›é€‰é¡¹ä»¥ä¿æŒæŒä¹…æ€§ï¼š

{% content-ref url="gws-persistence.md" %}
[gws-persistence.md](gws-persistence.md)
{% endcontent-ref %}

## è´¦æˆ·è¢«æ”»é™·åçš„æ¢å¤

* ç™»å‡ºæ‰€æœ‰ä¼šè¯
* æ›´æ”¹ç”¨æˆ·å¯†ç 
* ç”Ÿæˆæ–°çš„ 2FA å¤‡ä»½ä»£ç 
* ç§»é™¤åº”ç”¨å¯†ç 
* ç§»é™¤ OAuth åº”ç”¨
* ç§»é™¤ 2FA è®¾å¤‡
* ç§»é™¤ç”µå­é‚®ä»¶è½¬å‘
* ç§»é™¤ç”µå­é‚®ä»¶è¿‡æ»¤å™¨
* ç§»é™¤æ¢å¤ç”µå­é‚®ä»¶/ç”µè¯
* ç§»é™¤æ¶æ„åŒæ­¥çš„æ™ºèƒ½æ‰‹æœº
* ç§»é™¤ä¸è‰¯ Android åº”ç”¨
* ç§»é™¤ä¸è‰¯è´¦æˆ·å§”æ‰˜

## å‚è€ƒèµ„æ–™

* [https://www.youtube-nocookie.com/embed/6AsVUS79gLw](https://www.youtube-nocookie.com/embed/6AsVUS79gLw) - Matthew Bryant - Hacking G Suite: The Power of Dark Apps Script Magic
* [https://www.youtube.com/watch?v=KTVHLolz6cE](https://www.youtube.com/watch?v=KTVHLolz6cE) - Mike Felch å’Œ Beau Bullock - OK Google, How do I Red Team GSuite?

{% hint style="success" %}
å­¦ä¹ å’Œå®è·µ AWS é»‘å®¢æŠ€æœ¯ï¼š<img src="../../.gitbook/assets/image (1).png" alt="" data-size="line">[**HackTricks åŸ¹è®­ AWS çº¢é˜Ÿä¸“å®¶ (ARTE)**](https://training.hacktricks.xyz/courses/arte)<img src="../../.gitbook/assets/image (1).png" alt="" data-size="line">\
å­¦ä¹ å’Œå®è·µ GCP é»‘å®¢æŠ€æœ¯ï¼š<img src="../../.gitbook/assets/image (2).png" alt="" data-size="line">[**HackTricks åŸ¹è®­ GCP çº¢é˜Ÿä¸“å®¶ (GRTE)**<img src="../../.gitbook/assets/image (2).png" alt="" data-size="line">](https://training.hacktricks.xyz/courses/grte)

<details>

<summary>æ”¯æŒ HackTricks</summary>

* æŸ¥çœ‹ [**è®¢é˜…è®¡åˆ’**](https://github.com/sponsors/carlospolop)!
* **åŠ å…¥** ğŸ’¬ [**Discord ç¾¤ç»„**](https://discord.gg/hRep4RUj7f) æˆ– [**Telegram ç¾¤ç»„**](https://t.me/peass) æˆ– **åœ¨** **Twitter** ğŸ¦ [**@hacktricks\_live**](https://twitter.com/hacktricks\_live)** ä¸Šå…³æ³¨æˆ‘ä»¬ã€‚**
* **é€šè¿‡å‘** [**HackTricks**](https://github.com/carlospolop/hacktricks) å’Œ [**HackTricks Cloud**](https://github.com/carlospolop/hacktricks-cloud) GitHub ä»“åº“æäº¤ PR æ¥åˆ†äº«é»‘å®¢æŠ€å·§ã€‚

</details>
{% endhint %}
