# GWS - Workspace Pentesting

{% hint style="success" %}
Lerne & √ºbe AWS Hacking:<img src="../../.gitbook/assets/image (1).png" alt="" data-size="line">[**HackTricks Training AWS Red Team Expert (ARTE)**](https://training.hacktricks.xyz/courses/arte)<img src="../../.gitbook/assets/image (1).png" alt="" data-size="line">\
Lerne & √ºbe GCP Hacking: <img src="../../.gitbook/assets/image (2).png" alt="" data-size="line">[**HackTricks Training GCP Red Team Expert (GRTE)**<img src="../../.gitbook/assets/image (2).png" alt="" data-size="line">](https://training.hacktricks.xyz/courses/grte)

<details>

<summary>Support HackTricks</summary>

* √úberpr√ºfe die [**Abonnementpl√§ne**](https://github.com/sponsors/carlospolop)!
* **Tritt der** üí¨ [**Discord-Gruppe**](https://discord.gg/hRep4RUj7f) oder der [**Telegram-Gruppe**](https://t.me/peass) bei oder **folge** uns auf **Twitter** üê¶ [**@hacktricks\_live**](https://twitter.com/hacktricks\_live)**.**
* **Teile Hacking-Tricks, indem du PRs zu den** [**HackTricks**](https://github.com/carlospolop/hacktricks) und [**HackTricks Cloud**](https://github.com/carlospolop/hacktricks-cloud) GitHub-Repos einreichst.

</details>
{% endhint %}

## Einstiegspunkte

### Google Plattformen und OAuth Apps Phishing

√úberpr√ºfe, wie du verschiedene Google-Plattformen wie Drive, Chat, Gruppen... nutzen k√∂nntest, um dem Opfer einen Phishing-Link zu senden und wie man ein Google OAuth Phishing durchf√ºhrt in:

{% content-ref url="gws-google-platforms-phishing/" %}
[gws-google-platforms-phishing](gws-google-platforms-phishing/)
{% endcontent-ref %}

### Passwort-Spraying

Um Passw√∂rter mit allen E-Mails zu testen, die du gefunden hast (oder die du basierend auf einem E-Mail-Namensmuster generiert hast, das du m√∂glicherweise entdeckt hast), k√∂nntest du ein Tool wie [**https://github.com/ustayready/CredKing**](https://github.com/ustayready/CredKing) verwenden (obwohl es unwartbar aussieht), das AWS Lambdas verwendet, um die IP-Adresse zu √§ndern.

## Post-Exploitation

Wenn du einige Anmeldeinformationen oder die Sitzung des Benutzers kompromittiert hast, kannst du mehrere Aktionen durchf√ºhren, um auf potenziell sensible Informationen des Benutzers zuzugreifen und zu versuchen, Privilegien zu eskalieren:

{% content-ref url="gws-post-exploitation.md" %}
[gws-post-exploitation.md](gws-post-exploitation.md)
{% endcontent-ref %}

### GWS <-->GCP Pivoting

Lies mehr √ºber die verschiedenen Techniken, um zwischen GWS und GCP zu pivotieren in:

{% content-ref url="../gcp-security/gcp-to-workspace-pivoting/" %}
[gcp-to-workspace-pivoting](../gcp-security/gcp-to-workspace-pivoting/)
{% endcontent-ref %}

## GWS <--> GCPW | GCDS | Verzeichnis-Synchronisierung (AD & EntraID)

* **GCPW (Google Credential Provider for Windows)**: Dies ist die Single Sign-On-L√∂sung, die Google Workspaces bereitstellt, damit Benutzer sich mit **ihren Workspace-Anmeldeinformationen** an ihren Windows-PCs anmelden k√∂nnen. Dar√ºber hinaus werden **Tokens zum Zugriff auf Google Workspace** an einigen Stellen im PC gespeichert.
* **GCDS (Google Cloud Directory Sync)**: Dies ist ein Tool, das verwendet werden kann, um **deine Active Directory-Benutzer und -Gruppen mit deinem Workspace zu synchronisieren**. Das Tool ben√∂tigt die **Anmeldeinformationen eines Workspace-Superusers und eines privilegierten AD-Benutzers**. Daher k√∂nnte es m√∂glich sein, es auf einem Dom√§nenserver zu finden, der von Zeit zu Zeit Benutzer synchronisiert.
* **Admin Directory Sync**: Es erm√∂glicht dir, Benutzer von AD und EntraID in einem serverlosen Prozess von [https://admin.google.com/ac/sync/externaldirectories](https://admin.google.com/ac/sync/externaldirectories) zu synchronisieren.

{% content-ref url="gws-workspace-sync-attacks-gcpw-gcds-gps-directory-sync-with-ad-and-entraid/" %}
[gws-workspace-sync-attacks-gcpw-gcds-gps-directory-sync-with-ad-and-entraid](gws-workspace-sync-attacks-gcpw-gcds-gps-directory-sync-with-ad-and-entraid/)
{% endcontent-ref %}

## Persistenz

Wenn du einige Anmeldeinformationen oder die Sitzung des Benutzers kompromittiert hast, √ºberpr√ºfe diese Optionen, um die Persistenz aufrechtzuerhalten:

{% content-ref url="gws-persistence.md" %}
[gws-persistence.md](gws-persistence.md)
{% endcontent-ref %}

## Wiederherstellung nach Konto-Kompromittierung

* Von allen Sitzungen abmelden
* Benutzerpasswort √§ndern
* Neue 2FA-Backup-Codes generieren
* App-Passw√∂rter entfernen
* OAuth-Apps entfernen
* 2FA-Ger√§te entfernen
* E-Mail-Weiterleitungen entfernen
* E-Mail-Filter entfernen
* Wiederherstellungs-E-Mail/Telefonnummern entfernen
* B√∂sartige synchronisierte Smartphones entfernen
* Schlechte Android-Apps entfernen
* Schlechte Kontodelegationen entfernen

## Referenzen

* [https://www.youtube-nocookie.com/embed/6AsVUS79gLw](https://www.youtube-nocookie.com/embed/6AsVUS79gLw) - Matthew Bryant - Hacking G Suite: Die Macht der dunklen Apps Script Magie
* [https://www.youtube.com/watch?v=KTVHLolz6cE](https://www.youtube.com/watch?v=KTVHLolz6cE) - Mike Felch und Beau Bullock - OK Google, wie mache ich Red Team GSuite?

{% hint style="success" %}
Lerne & √ºbe AWS Hacking:<img src="../../.gitbook/assets/image (1).png" alt="" data-size="line">[**HackTricks Training AWS Red Team Expert (ARTE)**](https://training.hacktricks.xyz/courses/arte)<img src="../../.gitbook/assets/image (1).png" alt="" data-size="line">\
Lerne & √ºbe GCP Hacking: <img src="../../.gitbook/assets/image (2).png" alt="" data-size="line">[**HackTricks Training GCP Red Team Expert (GRTE)**<img src="../../.gitbook/assets/image (2).png" alt="" data-size="line">](https://training.hacktricks.xyz/courses/grte)

<details>

<summary>Support HackTricks</summary>

* √úberpr√ºfe die [**Abonnementpl√§ne**](https://github.com/sponsors/carlospolop)!
* **Tritt der** üí¨ [**Discord-Gruppe**](https://discord.gg/hRep4RUj7f) oder der [**Telegram-Gruppe**](https://t.me/peass) bei oder **folge** uns auf **Twitter** üê¶ [**@hacktricks\_live**](https://twitter.com/hacktricks\_live)**.**
* **Teile Hacking-Tricks, indem du PRs zu den** [**HackTricks**](https://github.com/carlospolop/hacktricks) und [**HackTricks Cloud**](https://github.com/carlospolop/hacktricks-cloud) GitHub-Repos einreichst.

</details>
{% endhint %}
