# GWS - Workspace Pentesting

{% hint style="success" %}
AWSãƒãƒƒã‚­ãƒ³ã‚°ã‚’å­¦ã³ã€å®Ÿè·µã™ã‚‹ï¼š<img src="../../.gitbook/assets/image (1) (1) (1).png" alt="" data-size="line">[**HackTricks Training AWS Red Team Expert (ARTE)**](https://training.hacktricks.xyz/courses/arte)<img src="../../.gitbook/assets/image (1) (1) (1).png" alt="" data-size="line">\
GCPãƒãƒƒã‚­ãƒ³ã‚°ã‚’å­¦ã³ã€å®Ÿè·µã™ã‚‹ï¼š<img src="../../.gitbook/assets/image (2).png" alt="" data-size="line">[**HackTricks Training GCP Red Team Expert (GRTE)**<img src="../../.gitbook/assets/image (2).png" alt="" data-size="line">](https://training.hacktricks.xyz/courses/grte)

<details>

<summary>HackTricksã‚’ã‚µãƒãƒ¼ãƒˆã™ã‚‹</summary>

* [**ã‚µãƒ–ã‚¹ã‚¯ãƒªãƒ—ã‚·ãƒ§ãƒ³ãƒ—ãƒ©ãƒ³**](https://github.com/sponsors/carlospolop)ã‚’ç¢ºèªã—ã¦ãã ã•ã„ï¼
* **ğŸ’¬ [**Discordã‚°ãƒ«ãƒ¼ãƒ—**](https://discord.gg/hRep4RUj7f)ã¾ãŸã¯[**Telegramã‚°ãƒ«ãƒ¼ãƒ—**](https://t.me/peass)ã«å‚åŠ ã™ã‚‹ã‹ã€**Twitter** ğŸ¦ [**@hacktricks\_live**](https://twitter.com/hacktricks_live)**ã‚’ãƒ•ã‚©ãƒ­ãƒ¼ã—ã¦ãã ã•ã„ã€‚**
* **[**HackTricks**](https://github.com/carlospolop/hacktricks)ãŠã‚ˆã³[**HackTricks Cloud**](https://github.com/carlospolop/hacktricks-cloud)ã®GitHubãƒªãƒã‚¸ãƒˆãƒªã«PRã‚’æå‡ºã—ã¦ãƒãƒƒã‚­ãƒ³ã‚°ãƒˆãƒªãƒƒã‚¯ã‚’å…±æœ‰ã—ã¦ãã ã•ã„ã€‚**

</details>
{% endhint %}

## ã‚¨ãƒ³ãƒˆãƒªãƒ¼ãƒã‚¤ãƒ³ãƒˆ

### Googleãƒ—ãƒ©ãƒƒãƒˆãƒ•ã‚©ãƒ¼ãƒ ã¨OAuthã‚¢ãƒ—ãƒªã®ãƒ•ã‚£ãƒƒã‚·ãƒ³ã‚°

Driveã€Chatã€Groupsãªã©ã®ã•ã¾ã–ã¾ãªGoogleãƒ—ãƒ©ãƒƒãƒˆãƒ•ã‚©ãƒ¼ãƒ ã‚’ä½¿ç”¨ã—ã¦ã€è¢«å®³è€…ã«ãƒ•ã‚£ãƒƒã‚·ãƒ³ã‚°ãƒªãƒ³ã‚¯ã‚’é€ä¿¡ã™ã‚‹æ–¹æ³•ã‚„ã€Google OAuthãƒ•ã‚£ãƒƒã‚·ãƒ³ã‚°ã‚’å®Ÿè¡Œã™ã‚‹æ–¹æ³•ã‚’ç¢ºèªã—ã¦ãã ã•ã„ï¼š

{% content-ref url="gws-google-platforms-phishing/" %}
[gws-google-platforms-phishing](gws-google-platforms-phishing/)
{% endcontent-ref %}

### ãƒ‘ã‚¹ãƒ¯ãƒ¼ãƒ‰ã‚¹ãƒ—ãƒ¬ãƒ¼

è¦‹ã¤ã‘ãŸã™ã¹ã¦ã®ãƒ¡ãƒ¼ãƒ«ã‚¢ãƒ‰ãƒ¬ã‚¹ï¼ˆã¾ãŸã¯ç™ºè¦‹ã—ãŸãƒ¡ãƒ¼ãƒ«åãƒ‘ã‚¿ãƒ¼ãƒ³ã«åŸºã¥ã„ã¦ç”Ÿæˆã—ãŸã‚‚ã®ï¼‰ã§ãƒ‘ã‚¹ãƒ¯ãƒ¼ãƒ‰ã‚’ãƒ†ã‚¹ãƒˆã™ã‚‹ãŸã‚ã«ã€[**https://github.com/ustayready/CredKing**](https://github.com/ustayready/CredKing)ã®ã‚ˆã†ãªãƒ„ãƒ¼ãƒ«ã‚’ä½¿ç”¨ã§ãã¾ã™ï¼ˆãƒ¡ãƒ³ãƒ†ãƒŠãƒ³ã‚¹ã•ã‚Œã¦ã„ãªã„ã‚ˆã†ã§ã™ãŒï¼‰ã€‚ã“ã®ãƒ„ãƒ¼ãƒ«ã¯ã€AWSãƒ©ãƒ ãƒ€ã‚’ä½¿ç”¨ã—ã¦IPã‚¢ãƒ‰ãƒ¬ã‚¹ã‚’å¤‰æ›´ã—ã¾ã™ã€‚

## ãƒã‚¹ãƒˆã‚¨ã‚¯ã‚¹ãƒ—ãƒ­ã‚¤ãƒˆ

ã„ãã¤ã‹ã®è³‡æ ¼æƒ…å ±ã‚„ãƒ¦ãƒ¼ã‚¶ãƒ¼ã®ã‚»ãƒƒã‚·ãƒ§ãƒ³ã‚’ä¾µå®³ã—ãŸå ´åˆã€ãƒ¦ãƒ¼ã‚¶ãƒ¼ã®æ½œåœ¨çš„ãªæ©Ÿå¯†æƒ…å ±ã«ã‚¢ã‚¯ã‚»ã‚¹ã—ã€ç‰¹æ¨©ã‚’æ˜‡æ ¼ã•ã›ã‚‹ãŸã‚ã«ã„ãã¤ã‹ã®ã‚¢ã‚¯ã‚·ãƒ§ãƒ³ã‚’å®Ÿè¡Œã§ãã¾ã™ï¼š

{% content-ref url="gws-post-exploitation.md" %}
[gws-post-exploitation.md](gws-post-exploitation.md)
{% endcontent-ref %}

### GWS <--> GCP ãƒ”ãƒœãƒƒãƒ†ã‚£ãƒ³ã‚°

GWSã¨GCPã®é–“ã§ãƒ”ãƒœãƒƒãƒˆã™ã‚‹ãŸã‚ã®ã•ã¾ã–ã¾ãªæŠ€è¡“ã«ã¤ã„ã¦è©³ã—ãèª­ã‚€ï¼š

{% content-ref url="../gcp-security/gcp-to-workspace-pivoting/" %}
[gcp-to-workspace-pivoting](../gcp-security/gcp-to-workspace-pivoting/)
{% endcontent-ref %}

## GWS <--> GCPW | GCDS | ãƒ‡ã‚£ãƒ¬ã‚¯ãƒˆãƒªåŒæœŸï¼ˆAD & EntraIDï¼‰

* **GCPWï¼ˆGoogle Credential Provider for Windowsï¼‰**ï¼šã“ã‚Œã¯ã€Google WorkspaceãŒæä¾›ã™ã‚‹ã‚·ãƒ³ã‚°ãƒ«ã‚µã‚¤ãƒ³ã‚ªãƒ³ã§ã€ãƒ¦ãƒ¼ã‚¶ãƒ¼ã¯**Workspaceã®è³‡æ ¼æƒ…å ±**ã‚’ä½¿ç”¨ã—ã¦Windows PCã«ãƒ­ã‚°ã‚¤ãƒ³ã§ãã¾ã™ã€‚ã•ã‚‰ã«ã€ã“ã‚Œã¯PCã®ã„ãã¤ã‹ã®å ´æ‰€ã«Google Workspaceã«ã‚¢ã‚¯ã‚»ã‚¹ã™ã‚‹ãŸã‚ã®ãƒˆãƒ¼ã‚¯ãƒ³ã‚’**ä¿å­˜ã—ã¾ã™**ã€‚
* **GCDSï¼ˆGoogle Cloud Directory Syncï¼‰**ï¼šã“ã‚Œã¯ã€**ã‚¢ã‚¯ãƒ†ã‚£ãƒ–ãƒ‡ã‚£ãƒ¬ã‚¯ãƒˆãƒªã®ãƒ¦ãƒ¼ã‚¶ãƒ¼ã¨ã‚°ãƒ«ãƒ¼ãƒ—ã‚’Workspaceã«åŒæœŸã™ã‚‹ãŸã‚ã«ä½¿ç”¨ã§ãã‚‹ãƒ„ãƒ¼ãƒ«**ã§ã™ã€‚ã“ã®ãƒ„ãƒ¼ãƒ«ã¯ã€**Workspaceã®ã‚¹ãƒ¼ãƒ‘ãƒ¼ãƒ¦ãƒ¼ã‚¶ãƒ¼ãŠã‚ˆã³ç‰¹æ¨©ã®ã‚ã‚‹ADãƒ¦ãƒ¼ã‚¶ãƒ¼ã®è³‡æ ¼æƒ…å ±**ã‚’å¿…è¦ã¨ã—ã¾ã™ã€‚ã—ãŸãŒã£ã¦ã€ãƒ¦ãƒ¼ã‚¶ãƒ¼ã‚’æ™‚ã€…åŒæœŸã—ã¦ã„ã‚‹ãƒ‰ãƒ¡ã‚¤ãƒ³ã‚µãƒ¼ãƒãƒ¼å†…ã§è¦‹ã¤ã‘ã‚‹ã“ã¨ãŒã§ãã‚‹ã‹ã‚‚ã—ã‚Œã¾ã›ã‚“ã€‚
* **ç®¡ç†è€…ãƒ‡ã‚£ãƒ¬ã‚¯ãƒˆãƒªåŒæœŸ**ï¼šã“ã‚Œã¯ã€[https://admin.google.com/ac/sync/externaldirectories](https://admin.google.com/ac/sync/externaldirectories)ã‹ã‚‰ã‚µãƒ¼ãƒãƒ¼ãƒ¬ã‚¹ãƒ—ãƒ­ã‚»ã‚¹ã§ADãŠã‚ˆã³EntraIDã®ãƒ¦ãƒ¼ã‚¶ãƒ¼ã‚’åŒæœŸã™ã‚‹ã“ã¨ã‚’å¯èƒ½ã«ã—ã¾ã™ã€‚

{% content-ref url="gws-workspace-sync-attacks-gcpw-gcds-gps-directory-sync-with-ad-and-entraid/" %}
[gws-workspace-sync-attacks-gcpw-gcds-gps-directory-sync-with-ad-and-entraid](gws-workspace-sync-attacks-gcpw-gcds-gps-directory-sync-with-ad-and-entraid/)
{% endcontent-ref %}

## æ°¸ç¶šæ€§

ã„ãã¤ã‹ã®è³‡æ ¼æƒ…å ±ã‚„ãƒ¦ãƒ¼ã‚¶ãƒ¼ã®ã‚»ãƒƒã‚·ãƒ§ãƒ³ã‚’ä¾µå®³ã—ãŸå ´åˆã€æ°¸ç¶šæ€§ã‚’ç¶­æŒã™ã‚‹ãŸã‚ã®ã“ã‚Œã‚‰ã®ã‚ªãƒ—ã‚·ãƒ§ãƒ³ã‚’ç¢ºèªã—ã¦ãã ã•ã„ï¼š

{% content-ref url="gws-persistence.md" %}
[gws-persistence.md](gws-persistence.md)
{% endcontent-ref %}

## ã‚¢ã‚«ã‚¦ãƒ³ãƒˆä¾µå®³ã®å›å¾©

* ã™ã¹ã¦ã®ã‚»ãƒƒã‚·ãƒ§ãƒ³ã‹ã‚‰ãƒ­ã‚°ã‚¢ã‚¦ãƒˆ
* ãƒ¦ãƒ¼ã‚¶ãƒ¼ãƒ‘ã‚¹ãƒ¯ãƒ¼ãƒ‰ã‚’å¤‰æ›´
* æ–°ã—ã„2FAãƒãƒƒã‚¯ã‚¢ãƒƒãƒ—ã‚³ãƒ¼ãƒ‰ã‚’ç”Ÿæˆ
* ã‚¢ãƒ—ãƒªãƒ‘ã‚¹ãƒ¯ãƒ¼ãƒ‰ã‚’å‰Šé™¤
* OAuthã‚¢ãƒ—ãƒªã‚’å‰Šé™¤
* 2FAãƒ‡ãƒã‚¤ã‚¹ã‚’å‰Šé™¤
* ãƒ¡ãƒ¼ãƒ«è»¢é€ã‚’å‰Šé™¤
* ãƒ¡ãƒ¼ãƒ«ãƒ•ã‚£ãƒ«ã‚¿ãƒ¼ã‚’å‰Šé™¤
* å›å¾©ç”¨ãƒ¡ãƒ¼ãƒ«/é›»è©±ã‚’å‰Šé™¤
* æ‚ªæ„ã®ã‚ã‚‹åŒæœŸã‚¹ãƒãƒ¼ãƒˆãƒ•ã‚©ãƒ³ã‚’å‰Šé™¤
* æ‚ªã„Androidã‚¢ãƒ—ãƒªã‚’å‰Šé™¤
* æ‚ªã„ã‚¢ã‚«ã‚¦ãƒ³ãƒˆã®å§”ä»»ã‚’å‰Šé™¤

## å‚è€ƒæ–‡çŒ®

* [https://www.youtube-nocookie.com/embed/6AsVUS79gLw](https://www.youtube-nocookie.com/embed/6AsVUS79gLw) - Matthew Bryant - G Suiteã®ãƒãƒƒã‚­ãƒ³ã‚°ï¼šãƒ€ãƒ¼ã‚¯ã‚¢ãƒ—ãƒªã‚¹ã‚¯ãƒªãƒ—ãƒˆãƒã‚¸ãƒƒã‚¯ã®åŠ›
* [https://www.youtube.com/watch?v=KTVHLolz6cE](https://www.youtube.com/watch?v=KTVHLolz6cE) - Mike Felchã¨Beau Bullock - OK Googleã€G Suiteã‚’ãƒ¬ãƒƒãƒ‰ãƒãƒ¼ãƒ ã™ã‚‹ã«ã¯ã©ã†ã™ã‚Œã°ã‚ˆã„ã§ã™ã‹ï¼Ÿ

{% hint style="success" %}
AWSãƒãƒƒã‚­ãƒ³ã‚°ã‚’å­¦ã³ã€å®Ÿè·µã™ã‚‹ï¼š<img src="../../.gitbook/assets/image (1) (1) (1).png" alt="" data-size="line">[**HackTricks Training AWS Red Team Expert (ARTE)**](https://training.hacktricks.xyz/courses/arte)<img src="../../.gitbook/assets/image (1) (1) (1).png" alt="" data-size="line">\
GCPãƒãƒƒã‚­ãƒ³ã‚°ã‚’å­¦ã³ã€å®Ÿè·µã™ã‚‹ï¼š<img src="../../.gitbook/assets/image (2).png" alt="" data-size="line">[**HackTricks Training GCP Red Team Expert (GRTE)**<img src="../../.gitbook/assets/image (2).png" alt="" data-size="line">](https://training.hacktricks.xyz/courses/grte)

<details>

<summary>HackTricksã‚’ã‚µãƒãƒ¼ãƒˆã™ã‚‹</summary>

* [**ã‚µãƒ–ã‚¹ã‚¯ãƒªãƒ—ã‚·ãƒ§ãƒ³ãƒ—ãƒ©ãƒ³**](https://github.com/sponsors/carlospolop)ã‚’ç¢ºèªã—ã¦ãã ã•ã„ï¼
* **ğŸ’¬ [**Discordã‚°ãƒ«ãƒ¼ãƒ—**](https://discord.gg/hRep4RUj7f)ã¾ãŸã¯[**Telegramã‚°ãƒ«ãƒ¼ãƒ—**](https://t.me/peass)ã«å‚åŠ ã™ã‚‹ã‹ã€**Twitter** ğŸ¦ [**@hacktricks\_live**](https://twitter.com/hacktricks_live)**ã‚’ãƒ•ã‚©ãƒ­ãƒ¼ã—ã¦ãã ã•ã„ã€‚**
* **[**HackTricks**](https://github.com/carlospolop/hacktricks)ãŠã‚ˆã³[**HackTricks Cloud**](https://github.com/carlospolop/hacktricks-cloud)ã®GitHubãƒªãƒã‚¸ãƒˆãƒªã«PRã‚’æå‡ºã—ã¦ãƒãƒƒã‚­ãƒ³ã‚°ãƒˆãƒªãƒƒã‚¯ã‚’å…±æœ‰ã—ã¦ãã ã•ã„ã€‚**

</details>
{% endhint %}
