# GWS - Pentesting do Workspace

{% hint style="success" %}
Aprenda e pratique Hacking na AWS:<img src="../../.gitbook/assets/image (1).png" alt="" data-size="line">[**HackTricks Training AWS Red Team Expert (ARTE)**](https://training.hacktricks.xyz/courses/arte)<img src="../../.gitbook/assets/image (1).png" alt="" data-size="line">\
Aprenda e pratique Hacking no GCP: <img src="../../.gitbook/assets/image (2).png" alt="" data-size="line">[**HackTricks Training GCP Red Team Expert (GRTE)**<img src="../../.gitbook/assets/image (2).png" alt="" data-size="line">](https://training.hacktricks.xyz/courses/grte)

<details>

<summary>Suporte ao HackTricks</summary>

* Confira os [**planos de assinatura**](https://github.com/sponsors/carlospolop)!
* **Junte-se ao** üí¨ [**grupo do Discord**](https://discord.gg/hRep4RUj7f) ou ao [**grupo do telegram**](https://t.me/peass) ou **siga**-nos no **Twitter** üê¶ [**@hacktricks\_live**](https://twitter.com/hacktricks\_live)**.**
* **Compartilhe truques de hacking enviando PRs para os reposit√≥rios do** [**HackTricks**](https://github.com/carlospolop/hacktricks) e [**HackTricks Cloud**](https://github.com/carlospolop/hacktricks-cloud).

</details>
{% endhint %}

## Pontos de Entrada

### Phishing em Plataformas Google e Apps OAuth

Verifique como voc√™ poderia usar diferentes plataformas do Google, como Drive, Chat, Grupos... para enviar um link de phishing √† v√≠tima e como realizar um Phishing de OAuth do Google em:

{% content-ref url="gws-google-platforms-phishing/" %}
[gws-google-platforms-phishing](gws-google-platforms-phishing/)
{% endcontent-ref %}

### Password Spraying

Para testar senhas com todos os e-mails que voc√™ encontrou (ou que voc√™ gerou com base em um padr√£o de nome de e-mail que voc√™ pode ter descoberto), voc√™ pode usar uma ferramenta como [**https://github.com/ustayready/CredKing**](https://github.com/ustayready/CredKing) (embora pare√ßa n√£o estar sendo mantida), que usar√° lambdas da AWS para mudar o endere√ßo IP.

## P√≥s-Explora√ß√£o

Se voc√™ comprometeu algumas credenciais ou a sess√£o do usu√°rio, pode realizar v√°rias a√ß√µes para acessar informa√ß√µes potencialmente sens√≠veis do usu√°rio e tentar escalar privil√©gios:

{% content-ref url="gws-post-exploitation.md" %}
[gws-post-exploitation.md](gws-post-exploitation.md)
{% endcontent-ref %}

### GWS <--> GCP Pivoting

Leia mais sobre as diferentes t√©cnicas para pivotar entre GWS e GCP em:

{% content-ref url="../gcp-security/gcp-to-workspace-pivoting/" %}
[gcp-to-workspace-pivoting](../gcp-security/gcp-to-workspace-pivoting/)
{% endcontent-ref %}

## GWS <--> GCPW | GCDS | Sincroniza√ß√£o de Diret√≥rio (AD & EntraID)

* **GCPW (Google Credential Provider for Windows)**: Este √© o login √∫nico que o Google Workspaces fornece para que os usu√°rios possam fazer login em seus PCs com Windows usando **suas credenciais do Workspace**. Al√©m disso, isso **armazenar√° tokens para acessar o Google Workspace** em alguns lugares no PC.
* **GCDS (Google Cloud Directory Sync)**: Esta √© uma ferramenta que pode ser usada para **sincronizar seus usu√°rios e grupos do Active Directory com seu Workspace**. A ferramenta requer as **credenciais de um superusu√°rio do Workspace e de um usu√°rio privilegiado do AD**. Portanto, pode ser poss√≠vel encontr√°-la dentro de um servidor de dom√≠nio que estaria sincronizando usu√°rios de tempos em tempos.
* **Admin Directory Sync**: Permite que voc√™ sincronize usu√°rios do AD e EntraID em um processo sem servidor a partir de [https://admin.google.com/ac/sync/externaldirectories](https://admin.google.com/ac/sync/externaldirectories).

{% content-ref url="gws-workspace-sync-attacks-gcpw-gcds-gps-directory-sync-with-ad-and-entraid/" %}
[gws-workspace-sync-attacks-gcpw-gcds-gps-directory-sync-with-ad-and-entraid](gws-workspace-sync-attacks-gcpw-gcds-gps-directory-sync-with-ad-and-entraid/)
{% endcontent-ref %}

## Persist√™ncia

Se voc√™ comprometeu algumas credenciais ou a sess√£o do usu√°rio, verifique estas op√ß√µes para manter a persist√™ncia sobre isso:

{% content-ref url="gws-persistence.md" %}
[gws-persistence.md](gws-persistence.md)
{% endcontent-ref %}

## Recupera√ß√£o de Conta Comprometida

* Sair de todas as sess√µes
* Alterar a senha do usu√°rio
* Gerar novos c√≥digos de backup de 2FA
* Remover senhas de aplicativos
* Remover aplicativos OAuth
* Remover dispositivos de 2FA
* Remover encaminhadores de e-mail
* Remover filtros de e-mail
* Remover e-mails/telefones de recupera√ß√£o
* Remover smartphones sincronizados maliciosos
* Remover aplicativos Android ruins
* Remover delega√ß√µes de conta ruins

## Refer√™ncias

* [https://www.youtube-nocookie.com/embed/6AsVUS79gLw](https://www.youtube-nocookie.com/embed/6AsVUS79gLw) - Matthew Bryant - Hacking G Suite: The Power of Dark Apps Script Magic
* [https://www.youtube.com/watch?v=KTVHLolz6cE](https://www.youtube.com/watch?v=KTVHLolz6cE) - Mike Felch e Beau Bullock - OK Google, Como fa√ßo para Red Team GSuite?

{% hint style="success" %}
Aprenda e pratique Hacking na AWS:<img src="../../.gitbook/assets/image (1).png" alt="" data-size="line">[**HackTricks Training AWS Red Team Expert (ARTE)**](https://training.hacktricks.xyz/courses/arte)<img src="../../.gitbook/assets/image (1).png" alt="" data-size="line">\
Aprenda e pratique Hacking no GCP: <img src="../../.gitbook/assets/image (2).png" alt="" data-size="line">[**HackTricks Training GCP Red Team Expert (GRTE)**<img src="../../.gitbook/assets/image (2).png" alt="" data-size="line">](https://training.hacktricks.xyz/courses/grte)

<details>

<summary>Suporte ao HackTricks</summary>

* Confira os [**planos de assinatura**](https://github.com/sponsors/carlospolop)!
* **Junte-se ao** üí¨ [**grupo do Discord**](https://discord.gg/hRep4RUj7f) ou ao [**grupo do telegram**](https://t.me/peass) ou **siga**-nos no **Twitter** üê¶ [**@hacktricks\_live**](https://twitter.com/hacktricks\_live)**.**
* **Compartilhe truques de hacking enviando PRs para os reposit√≥rios do** [**HackTricks**](https://github.com/carlospolop/hacktricks) e [**HackTricks Cloud**](https://github.com/carlospolop/hacktricks-cloud).

</details>
{% endhint %}
