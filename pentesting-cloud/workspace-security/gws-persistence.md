# GWS - Süreklilik

{% hint style="success" %}
AWS Hacking öğrenin ve pratik yapın:<img src="../../.gitbook/assets/image (1) (1).png" alt="" data-size="line">[**HackTricks Training AWS Red Team Expert (ARTE)**](https://training.hacktricks.xyz/courses/arte)<img src="../../.gitbook/assets/image (1) (1).png" alt="" data-size="line">\
GCP Hacking öğrenin ve pratik yapın: <img src="../../.gitbook/assets/image (2).png" alt="" data-size="line">[**HackTricks Training GCP Red Team Expert (GRTE)**<img src="../../.gitbook/assets/image (2).png" alt="" data-size="line">](https://training.hacktricks.xyz/courses/grte)

<details>

<summary>HackTricks'i Destekleyin</summary>

* [**abonelik planlarını**](https://github.com/sponsors/carlospolop) kontrol edin!
* **💬 [**Discord grubuna**](https://discord.gg/hRep4RUj7f) veya [**telegram grubuna**](https://t.me/peass) katılın ya da **Twitter**'da **bizi takip edin** 🐦 [**@hacktricks\_live**](https://twitter.com/hacktricks\_live)**.**
* **Hacking ipuçlarını paylaşmak için** [**HackTricks**](https://github.com/carlospolop/hacktricks) ve [**HackTricks Cloud**](https://github.com/carlospolop/hacktricks-cloud) github reposuna PR gönderin.

</details>
{% endhint %}

{% hint style="danger" %}
Bu bölümde belirtilen ayarları değiştiren tüm eylemler, **hesaba senkronize edilmiş herhangi bir mobil cihaza e-posta ve hatta bir push bildirimi** gönderecektir.
{% endhint %}

## **Gmail'de Süreklilik**

* Google'dan gelen güvenlik bildirimlerini **gizlemek için filtreler oluşturabilirsiniz**
* `from: (no-reply@accounts.google.com) "Güvenlik Uyarısı"`
* Bu, güvenlik e-postalarının e-postaya ulaşmasını engelleyecektir (ancak mobil cihazlara push bildirimlerini engellemeyecektir)

<details>

<summary>Gmail filtresi oluşturma adımları</summary>

(Bilgi [**buradan**](https://support.google.com/mail/answer/6579))

1. [Gmail](https://mail.google.com/) açın.
2. Üstteki arama kutusunda, Arama seçeneklerini göster'e tıklayın ![photos tune](https://lh3.googleusercontent.com/cD6YR\_YvqXqNKxrWn2NAWkV6tjJtg8vfvqijKT1\_9zVCrl2sAx9jROKhLqiHo2ZDYTE=w36).
3. Arama kriterlerinizi girin. Aramanızın doğru çalıştığını kontrol etmek istiyorsanız, **Ara**'ya tıklayarak hangi e-postaların göründüğüne bakın.
4. Arama penceresinin altında, **Filtre oluştur**'a tıklayın.
5. Filtrenin ne yapmasını istediğinizi seçin.
6. **Filtre oluştur**'a tıklayın.

Mevcut filtrenizi kontrol edin (silmek için) [https://mail.google.com/mail/u/0/#settings/filters](https://mail.google.com/mail/u/0/#settings/filters)

</details>

<figure><img src="../../.gitbook/assets/image (331).png" alt=""><figcaption></figcaption></figure>

* Hassas bilgileri (veya her şeyi) **iletmek için bir iletim adresi oluşturun** - Manuel erişim gereklidir.
* [https://mail.google.com/mail/u/2/#settings/fwdandpop](https://mail.google.com/mail/u/2/#settings/fwdandpop) adresinde bir iletim adresi oluşturun.
* Alıcı adresin bunu onaylaması gerekecek.
* Ardından, tüm e-postaları iletmek için ayarlayın ve bir kopyasını saklayın (değişiklikleri kaydetmek için tıklamayı unutmayın):

<figure><img src="../../.gitbook/assets/image (332).png" alt=""><figcaption></figcaption></figure>

Ayrıca filtreler oluşturmak ve yalnızca belirli e-postaları diğer e-posta adresine iletmek de mümkündür.

## Uygulama şifreleri

Eğer bir **google kullanıcı oturumunu ele geçirdiyseniz** ve kullanıcı **2FA** kullanıyorsa, [**uygulama şifresi**](https://support.google.com/accounts/answer/185833?hl=en) **üretebilirsiniz** (adımları görmek için bağlantıya tıklayın). **Uygulama şifreleri artık Google tarafından önerilmemektedir ve kullanıcı **Google Hesap şifresini değiştirdiğinde** iptal edilmektedir.**

**Açık bir oturumunuz olsa bile, bir uygulama şifresi oluşturmak için kullanıcının şifresini bilmeniz gerekecektir.**

{% hint style="info" %}
Uygulama şifreleri **yalnızca 2 Adımlı Doğrulama** açık olan hesaplarla kullanılabilir.
{% endhint %}

## 2-FA'yı Değiştirme ve Benzeri

**2-FA'yı kapatmak veya yeni bir cihazı** (veya telefon numarasını) kaydetmek de mümkündür. Bu sayfada [**https://myaccount.google.com/security**](https://myaccount.google.com/security)**.**\
**Ayrıca, geçiş anahtarları oluşturmak (kendi cihazınızı eklemek), şifreyi değiştirmek, doğrulama telefonları için mobil numaralar eklemek ve kurtarma e-postasını değiştirmek mümkündür.**

{% hint style="danger" %}
Kullanıcının telefonuna **güvenlik push bildirimlerinin** ulaşmasını **engellemek için, akıllı telefonunu** **oturumdan çıkartabilirsiniz** (bu garip olsa da) çünkü buradan tekrar oturum açamazsınız.

Ayrıca **cihazı bulmak** da mümkündür.
{% endhint %}

**Açık bir oturumunuz olsa bile, bu ayarları değiştirmek için kullanıcının şifresini bilmeniz gerekecektir.**

## OAuth Uygulamaları ile Süreklilik

Eğer bir kullanıcının hesabını **ele geçirdiyseniz**, tüm olası izinleri bir **OAuth Uygulamasına** vermeyi **kabul edebilirsiniz**. Tek sorun, Workspace'in **gözden geçirilmemiş dış ve/veya iç OAuth uygulamalarını engelleyecek şekilde yapılandırılabilmesidir.**\
Workspace Organizasyonlarının varsayılan olarak dış OAuth uygulamalarına güvenmemesi, ancak iç olanlara güvenmesi oldukça yaygındır, bu nedenle eğer organizasyon içinde yeni bir OAuth uygulaması oluşturmak için **yeterli izinleriniz varsa** ve dış uygulamalar engellenmişse, bunu oluşturun ve **sürekliliği sağlamak için bu yeni iç OAuth uygulamasını kullanın**.

OAuth Uygulamaları hakkında daha fazla bilgi için aşağıdaki sayfayı kontrol edin:

{% content-ref url="gws-google-platforms-phishing/" %}
[gws-google-platforms-phishing](gws-google-platforms-phishing/)
{% endcontent-ref %}

## Delegasyon ile Süreklilik

Hesabı, saldırgan tarafından kontrol edilen farklı bir hesaba **devredebilirsiniz** (bunu yapmanıza izin veriliyorsa). Workspace **Organizasyonlarında** bu seçenek **etkinleştirilmelidir**. Herkes için devre dışı bırakılabilir, bazı kullanıcılar/gruplar için etkinleştirilebilir veya herkes için (genellikle yalnızca bazı kullanıcılar/gruplar için etkinleştirilir veya tamamen devre dışı bırakılır).

<details>

<summary>Bir Workspace yöneticisiyseniz, bu özelliği etkinleştirmek için kontrol edin</summary>

(Bilgi [belgelerden kopyalanmıştır](https://support.google.com/a/answer/7223765))

Organizasyonunuzun yöneticisi olarak (örneğin, iş veya okulunuz), kullanıcıların Gmail hesaplarına erişimi devretme yetkisini kontrol edersiniz. Herkese hesaplarını devretme seçeneği verebilirsiniz. Ya da yalnızca belirli departmanlardaki kişilerin devretmesine izin verebilirsiniz. Örneğin, şunları yapabilirsiniz:

* Gmail hesabınıza bir idari asistanı delege olarak ekleyerek, onların sizin adınıza e-posta okumasını ve göndermesini sağlayabilirsiniz.
* Tüm kullanıcıların bir Gmail hesabına erişimini sağlamak için, satış departmanınız gibi bir grubu Gruplar'a delege olarak ekleyebilirsiniz.

Kullanıcılar yalnızca aynı organizasyondaki diğer bir kullanıcıya erişim devredebilirler, alan adları veya organizasyon birimleri fark etmeksizin.

#### Delegasyon sınırları ve kısıtlamaları

* **Kullanıcıların Gmail hesaplarına bir Google grubuna erişim vermesine izin ver** seçeneği: Bu seçeneği kullanmak için, devredilen hesabın OU'si ve her grup üyesinin OU'si için etkinleştirilmiş olmalıdır. Bu seçeneğin etkinleştirilmediği bir OU'ya ait grup üyeleri, devredilen hesaba erişemez.
* Tipik kullanımda, 40 delege aynı anda bir Gmail hesabına erişebilir. Bir veya daha fazla delegenin ortalamanın üzerinde kullanımı bu sayıyı azaltabilir.
* Gmail'e sık erişen otomatik süreçler, aynı anda bir hesaba erişebilen delege sayısını da azaltabilir. Bu süreçler, Gmail'e sık erişen API'ler veya tarayıcı uzantılarını içerir.
* Tek bir Gmail hesabı, 1.000 benzersiz delegasyonu destekler. Gruplar'daki bir grup, sınıra karşı bir delege olarak sayılır.
* Delegasyon, bir Gmail hesabının sınırlarını artırmaz. Delegeli kullanıcıları olan Gmail hesapları, standart Gmail hesap sınırlarına ve politikalarına sahiptir. Ayrıntılar için [Gmail sınırları ve politikaları](https://support.google.com/a/topic/28609) sayfasını ziyaret edin.

#### Adım 1: Kullanıcılarınız için Gmail delegasyonunu etkinleştirin

**Başlamadan önce:** Belirli kullanıcılar için ayarı uygulamak için, hesaplarını bir [organizasyon birimine](https://support.google.com/a/topic/1227584) koyun.

1. [Google Yönetici konsoluna](https://support.google.com/a/answer/182076) [giriş yapın](https://admin.google.com/).

Bir _yönetici hesabı_ kullanarak giriş yapın, mevcut hesabınız olan CarlosPolop@gmail.com değil.
2. Yönetici konsolunda, Menü'ye gidin ![](https://storage.googleapis.com/support-kms-prod/JxKYG9DqcsormHflJJ8Z8bHuyVI5YheC0lAp)![ve sonra](https://storage.googleapis.com/support-kms-prod/Th2Tx0uwPMOhsMPn7nRXMUo3vs6J0pto2DTn)![](https://storage.googleapis.com/support-kms-prod/ocGtUSENh4QebLpvZcmLcNRZyaTBcolMRSyl) **Uygulamalar**![ve sonra](https://storage.googleapis.com/support-kms-prod/Th2Tx0uwPMOhsMPn7nRXMUo3vs6J0pto2DTn)**Google Workspace**![ve sonra](https://storage.googleapis.com/support-kms-prod/Th2Tx0uwPMOhsMPn7nRXMUo3vs6J0pto2DTn)**Gmail**![ve sonra](https://storage.googleapis.com/support-kms-prod/Th2Tx0uwPMOhsMPn7nRXMUo3vs6J0pto2DTn)**Kullanıcı ayarları**.
3. Ayarı herkes için uygulamak için, üstteki organizasyon birimini seçili bırakın. Aksi takdirde, bir alt [organizasyon birimini](https://support.google.com/a/topic/1227584) seçin.
4. **Posta delegasyonu**'na tıklayın.
5. **Kullanıcıların Gmail hesaplarına diğer kullanıcılara erişim devretmesine izin ver** kutusunu işaretleyin.
6. (İsteğe bağlı) Kullanıcıların, hesaplarından gönderilen devredilen mesajlarda hangi gönderici bilgilerinin yer alacağını belirtmelerine izin vermek için, **Kullanıcıların bu ayarı özelleştirmesine izin ver** kutusunu işaretleyin.
7. Delegeler tarafından gönderilen mesajlarda yer alacak varsayılan gönderici bilgisi için bir seçenek seçin:
* **Hesap sahibini ve e-postayı gönderen delegasyonu göster**—Mesajlar, Gmail hesap sahibinin ve delegenin e-posta adreslerini içerir.
* **Sadece hesap sahibini göster**—Mesajlar yalnızca Gmail hesap sahibinin e-posta adresini içerir. Delege e-posta adresi dahil edilmez.
8. (İsteğe bağlı) Kullanıcıların Gruplar'da bir grubu delege olarak eklemelerine izin vermek için, **Kullanıcıların Gmail hesaplarına bir Google grubuna erişim vermesine izin ver** kutusunu işaretleyin.
9. **Kaydet**'e tıklayın. Bir alt organizasyon birimini yapılandırdıysanız, bir üst organizasyon biriminin ayarlarını **Devral** veya **Geçersiz Kıl** seçeneği ile uygulayabilirsiniz.
10. (İsteğe bağlı) Diğer organizasyon birimleri için Gmail delegasyonunu etkinleştirmek için, 3-9. adımları tekrarlayın.

Değişikliklerin etkili olması 24 saate kadar sürebilir, ancak genellikle daha hızlı gerçekleşir. [Daha fazla bilgi edinin](https://support.google.com/a/answer/7514107)

#### Adım 2: Kullanıcıların hesapları için delegeleri ayarlamalarını sağlayın

Delegasyonu etkinleştirdikten sonra, kullanıcılar Gmail ayarlarına giderek delegeleri atayabilirler. Delegeler, kullanıcının adına mesajları okuyabilir, gönderebilir ve alabilirler.

Ayrıntılar için kullanıcıları [E-posta devretme ve işbirliği yapma](https://support.google.com/a/users/answer/138350) sayfasına yönlendirin.

</details>

<details>

<summary>Normal bir kullanıcıdan, erişiminizi devretmek için buradan talimatları kontrol edin</summary>

(Bilgi [**belgelerden kopyalanmıştır**](https://support.google.com/mail/answer/138350))

En fazla 10 delege ekleyebilirsiniz.

Eğer iş, okul veya başka bir organizasyon aracılığıyla Gmail kullanıyorsanız:

* Organizasyonunuz içinde en fazla 1000 delege ekleyebilirsiniz.
* Tipik kullanımda, 40 delege aynı anda bir Gmail hesabına erişebilir.
* Otomatik süreçler kullanıyorsanız, API'ler veya tarayıcı uzantıları gibi, birkaç delege aynı anda bir Gmail hesabına erişebilir.

1. Bilgisayarınızda [Gmail](https://mail.google.com/) açın. Delegeleri Gmail uygulamasından ekleyemezsiniz.
2. Sağ üstte, Ayarlar'a tıklayın ![Ayarlar](https://lh3.googleusercontent.com/p3J-ZSPOLtuBBR\_ofWTFDfdgAYQgi8mR5c76ie8XQ2wjegk7-yyU5zdRVHKybQgUlQ=w36-h36) ![ve sonra](https://lh3.googleusercontent.com/3\_l97rr0GvhSP2XV5OoCkV2ZDTIisAOczrSdzNCBxhIKWrjXjHucxNwocghoUa39gw=w36-h36) **Tüm ayarları görün**.
3. **Hesaplar ve İçe Aktarma** veya **Hesaplar** sekmesine tıklayın.
4. "Hesabınıza erişim vermek" bölümünde, **Başka bir hesap ekle**'ye tıklayın. Eğer iş veya okul aracılığıyla Gmail kullanıyorsanız, organizasyonunuz e-posta delegasyonunu kısıtlayabilir. Bu ayarı görmüyorsanız, yöneticinizle iletişime geçin.
* Hesabınıza erişim vermek için bu ayarı görmüyorsanız, o zaman kısıtlanmıştır.
5. Eklemek istediğiniz kişinin e-posta adresini girin. Eğer iş, okul veya başka bir organizasyon aracılığıyla Gmail kullanıyorsanız ve yöneticiniz izin veriyorsa, bir grubun e-posta adresini girebilirsiniz. Bu grup, organizasyonunuzla aynı alan adına sahip olmalıdır. Grubun dışındaki üyeler delegasyon erişimini reddedilir.\
\
**Önemli:** Devrettiğiniz hesap yeni bir hesapsa veya şifre sıfırlanmışsa, yöneticinin ilk oturum açtığınızda şifre değiştirme gerekliliğini kapatması gerekir.

* [Yönetici nasıl kullanıcı oluşturur öğrenin](https://support.google.com/a/answer/33310).
* [Yönetici nasıl şifreleri sıfırlar öğrenin](https://support.google.com/a/answer/33319).

6. **Sonraki Adım**'a tıklayın ![ve sonra](https://lh3.googleusercontent.com/QbWcYKta5vh\_4-OgUeFmK-JOB0YgLLoGh69P478nE6mKdfpWQniiBabjF7FVoCVXI0g=h36) **Erişim vermek için e-posta gönder**.

Eklediğiniz kişi, onaylaması için bir e-posta alacaktır. Davet bir hafta sonra sona erer.

Eğer bir grup eklediyseniz, tüm grup üyeleri onaylamaya gerek kalmadan delege olacaklardır.

Not: Delegasyonun etkili olması 24 saate kadar sürebilir.

</details>

## Android Uygulaması ile Süreklilik

Eğer bir **kurbanın google hesabında oturum açtıysanız**, **Play Store**'a göz atabilir ve **telefonuna doğrudan yüklediğiniz kötü amaçlı yazılımı** **kurabilirsiniz**. Bu, sürekliliği sağlamak ve kurbanın telefonuna erişmek için yapılabilir.

## **Uygulama Scriptleri ile Süreklilik**

Uygulama Scriptlerinde **zaman tabanlı tetikleyiciler** oluşturabilirsiniz, böylece eğer Uygulama Scripti kullanıcı tarafından kabul edilirse, **kullanıcı erişmeden bile tetiklenecektir**. Bunu nasıl yapacağınız hakkında daha fazla bilgi için kontrol edin:

{% content-ref url="gws-google-platforms-phishing/gws-app-scripts.md" %}
[gws-app-scripts.md](gws-google-platforms-phishing/gws-app-scripts.md)
{% endcontent-ref %}

## Referanslar

* [https://www.youtube-nocookie.com/embed/6AsVUS79gLw](https://www.youtube-nocookie.com/embed/6AsVUS79gLw) - Matthew Bryant - Hacking G Suite: The Power of Dark Apps Script Magic
* [https://www.youtube.com/watch?v=KTVHLolz6cE](https://www.youtube.com/watch?v=KTVHLolz6cE) - Mike Felch ve Beau Bullock - OK Google, GSuite'i nasıl Red Team yaparım? 

{% hint style="success" %}
AWS Hacking öğrenin ve pratik yapın:<img src="../../.gitbook/assets/image (1) (1).png" alt="" data-size="line">[**HackTricks Training AWS Red Team Expert (ARTE)**](https://training.hacktricks.xyz/courses/arte)<img src="../../.gitbook/assets/image (1) (1).png" alt="" data-size="line">\
GCP Hacking öğrenin ve pratik yapın: <img src="../../.gitbook/assets/image (2).png" alt="" data-size="line">[**HackTricks Training GCP Red Team Expert (GRTE)**<img src="../../.gitbook/assets/image (2).png" alt="" data-size="line">](https://training.hacktricks.xyz/courses/grte)

<details>

<summary>HackTricks'i Destekleyin</summary>

* [**abonelik planlarını**](https://github.com/sponsors/carlospolop) kontrol edin!
* **💬 [**Discord grubuna**](https://discord.gg/hRep4RUj7f) veya [**telegram grubuna**](https://t.me/peass) katılın ya da **Twitter**'da **bizi takip edin** 🐦 [**@hacktricks\_live**](https://twitter.com/hacktricks\_live)**.**
* **Hacking ipuçlarını paylaşmak için** [**HackTricks**](https://github.com/carlospolop/hacktricks) ve [**HackTricks Cloud**](https://github.com/carlospolop/hacktricks-cloud) github reposuna PR gönderin.

</details>
{% endhint %}
