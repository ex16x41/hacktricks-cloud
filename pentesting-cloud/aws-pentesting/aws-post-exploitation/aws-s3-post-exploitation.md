# AWS - S3 Post Exploitation

{% hint style="success" %}
Learn & practice AWS Hacking:<img src="/.gitbook/assets/image.png" alt="" data-size="line">[**HackTricks Training AWS Red Team Expert (ARTE)**](https://training.hacktricks.xyz/courses/arte)<img src="/.gitbook/assets/image.png" alt="" data-size="line">\
Learn & practice GCP Hacking: <img src="/.gitbook/assets/image (2).png" alt="" data-size="line">[**HackTricks Training GCP Red Team Expert (GRTE)**<img src="/.gitbook/assets/image (2).png" alt="" data-size="line">](https://training.hacktricks.xyz/courses/grte)

<details>

<summary>Support HackTricks</summary>

* Check the [**subscription plans**](https://github.com/sponsors/carlospolop)!
* **Join the** ğŸ’¬ [**Discord group**](https://discord.gg/hRep4RUj7f) or the [**telegram group**](https://t.me/peass) or **follow** us on **Twitter** ğŸ¦ [**@hacktricks\_live**](https://twitter.com/hacktricks\_live)**.**
* **Share hacking tricks by submitting PRs to the** [**HackTricks**](https://github.com/carlospolop/hacktricks) and [**HackTricks Cloud**](https://github.com/carlospolop/hacktricks-cloud) github repos.

</details>
{% endhint %}

## S3

ë” ë§ì€ ì •ë³´ëŠ” ë‹¤ìŒì„ í™•ì¸í•˜ì„¸ìš”:

{% content-ref url="../aws-services/aws-s3-athena-and-glacier-enum.md" %}
[aws-s3-athena-and-glacier-enum.md](../aws-services/aws-s3-athena-and-glacier-enum.md)
{% endcontent-ref %}

### Sensitive Information

ë•Œë•Œë¡œ ë²„í‚·ì—ì„œ ì½ì„ ìˆ˜ ìˆëŠ” ë¯¼ê°í•œ ì •ë³´ë¥¼ ì°¾ì„ ìˆ˜ ìˆìŠµë‹ˆë‹¤. ì˜ˆë¥¼ ë“¤ì–´, terraform ìƒíƒœ ë¹„ë°€.

### Pivoting

ë‹¤ì–‘í•œ í”Œë«í¼ì´ S3ë¥¼ ì‚¬ìš©í•˜ì—¬ ë¯¼ê°í•œ ìì‚°ì„ ì €ì¥í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.\
ì˜ˆë¥¼ ë“¤ì–´, **airflow**ê°€ **DAGs** **ì½”ë“œ**ë¥¼ ì €ì¥í•˜ê³  ìˆê±°ë‚˜, **ì›¹ í˜ì´ì§€**ê°€ S3ì—ì„œ ì§ì ‘ ì œê³µë  ìˆ˜ ìˆìŠµë‹ˆë‹¤. ì“°ê¸° ê¶Œí•œì´ ìˆëŠ” ê³µê²©ìëŠ” ë²„í‚·ì˜ **ì½”ë“œë¥¼ ìˆ˜ì •í•˜ì—¬** ë‹¤ë¥¸ í”Œë«í¼ìœ¼ë¡œ **í”¼ë²—**í•˜ê±°ë‚˜ JS íŒŒì¼ì„ ìˆ˜ì •í•˜ì—¬ **ê³„ì •ì„ ì¸ìˆ˜**í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.

### S3 Ransomware

ì´ ì‹œë‚˜ë¦¬ì˜¤ì—ì„œ **ê³µê²©ìëŠ” ìì‹ ì˜ AWS ê³„ì •** ë˜ëŠ” ë‹¤ë¥¸ ì†ìƒëœ ê³„ì •ì—ì„œ KMS(í‚¤ ê´€ë¦¬ ì„œë¹„ìŠ¤) í‚¤ë¥¼ ìƒì„±í•©ë‹ˆë‹¤. ê·¸ëŸ° ë‹¤ìŒ ì´ **í‚¤ë¥¼ ì „ ì„¸ê³„ ëˆ„êµ¬ë‚˜ ì ‘ê·¼í•  ìˆ˜ ìˆë„ë¡** í•˜ì—¬ ëª¨ë“  AWS ì‚¬ìš©ì, ì—­í•  ë˜ëŠ” ê³„ì •ì´ ì´ í‚¤ë¥¼ ì‚¬ìš©í•˜ì—¬ ê°ì²´ë¥¼ ì•”í˜¸í™”í•  ìˆ˜ ìˆë„ë¡ í•©ë‹ˆë‹¤. ê·¸ëŸ¬ë‚˜ ê°ì²´ëŠ” ë³µí˜¸í™”í•  ìˆ˜ ì—†ìŠµë‹ˆë‹¤.

ê³µê²©ìëŠ” **ëŒ€ìƒ S3 ë²„í‚·ì„ ì‹ë³„í•˜ê³ ** ë‹¤ì–‘í•œ ë°©ë²•ì„ ì‚¬ìš©í•˜ì—¬ ì“°ê¸° ìˆ˜ì¤€ì˜ ì ‘ê·¼ ê¶Œí•œì„ ì–»ìŠµë‹ˆë‹¤. ì´ëŠ” ê³µê°œì ìœ¼ë¡œ ë…¸ì¶œëœ ì˜ëª»ëœ ë²„í‚· êµ¬ì„± ë•Œë¬¸ì¼ ìˆ˜ ìˆê±°ë‚˜ ê³µê²©ìê°€ AWS í™˜ê²½ ìì²´ì— ì ‘ê·¼í•  ìˆ˜ ìˆê¸° ë•Œë¬¸ì…ë‹ˆë‹¤. ê³µê²©ìëŠ” ì¼ë°˜ì ìœ¼ë¡œ ê°œì¸ ì‹ë³„ ì •ë³´(PII), ë³´í˜¸ëœ ê±´ê°• ì •ë³´(PHI), ë¡œê·¸, ë°±ì—… ë“±ê³¼ ê°™ì€ ë¯¼ê°í•œ ì •ë³´ë¥¼ í¬í•¨í•˜ëŠ” ë²„í‚·ì„ ëª©í‘œë¡œ í•©ë‹ˆë‹¤.

ë²„í‚·ì´ ëœì„¬ì›¨ì–´ ê³µê²©ì˜ ëŒ€ìƒì´ ë  ìˆ˜ ìˆëŠ”ì§€ í™•ì¸í•˜ê¸° ìœ„í•´ ê³µê²©ìëŠ” ê·¸ êµ¬ì„±ì„ í™•ì¸í•©ë‹ˆë‹¤. ì—¬ê¸°ì—ëŠ” **S3 ê°ì²´ ë²„ì „ ê´€ë¦¬**ê°€ í™œì„±í™”ë˜ì–´ ìˆëŠ”ì§€ì™€ **ë‹¤ë‹¨ê³„ ì¸ì¦ ì‚­ì œ(MFA ì‚­ì œ)ê°€ í™œì„±í™”ë˜ì–´ ìˆëŠ”ì§€** í™•ì¸í•˜ëŠ” ê²ƒì´ í¬í•¨ë©ë‹ˆë‹¤. ê°ì²´ ë²„ì „ ê´€ë¦¬ê°€ í™œì„±í™”ë˜ì–´ ìˆì§€ ì•Šìœ¼ë©´ ê³µê²©ìëŠ” ì§„í–‰í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤. ê°ì²´ ë²„ì „ ê´€ë¦¬ê°€ í™œì„±í™”ë˜ì–´ ìˆì§€ë§Œ MFA ì‚­ì œê°€ ë¹„í™œì„±í™”ë˜ì–´ ìˆìœ¼ë©´ ê³µê²©ìëŠ” **ê°ì²´ ë²„ì „ ê´€ë¦¬ë¥¼ ë¹„í™œì„±í™”í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤**. ê°ì²´ ë²„ì „ ê´€ë¦¬ì™€ MFA ì‚­ì œê°€ ëª¨ë‘ í™œì„±í™”ë˜ì–´ ìˆìœ¼ë©´ ê³µê²©ìê°€ íŠ¹ì • ë²„í‚·ì„ ëœì„¬ì›¨ì–´ë¡œ ê³µê²©í•˜ê¸°ê°€ ë” ì–´ë ¤ì›Œì§‘ë‹ˆë‹¤.

AWS APIë¥¼ ì‚¬ìš©í•˜ì—¬ ê³µê²©ìëŠ” **ìì‹ ì˜ KMS í‚¤ë¥¼ ì‚¬ìš©í•˜ì—¬ ë²„í‚·ì˜ ê° ê°ì²´ë¥¼ ì•”í˜¸í™”ëœ ë³µì‚¬ë³¸ìœ¼ë¡œ êµì²´í•©ë‹ˆë‹¤**. ì´ëŠ” ë²„í‚·ì˜ ë°ì´í„°ë¥¼ íš¨ê³¼ì ìœ¼ë¡œ ì•”í˜¸í™”í•˜ì—¬ í‚¤ ì—†ì´ëŠ” ì ‘ê·¼í•  ìˆ˜ ì—†ê²Œ ë§Œë“­ë‹ˆë‹¤.

ì¶”ê°€ ì••ë°•ì„ ê°€í•˜ê¸° ìœ„í•´ ê³µê²©ìëŠ” ê³µê²©ì— ì‚¬ìš©ëœ KMS í‚¤ì˜ ì‚­ì œë¥¼ ì˜ˆì•½í•©ë‹ˆë‹¤. ì´ëŠ” ëŒ€ìƒì—ê²Œ í‚¤ê°€ ì‚­ì œë˜ê¸° ì „ì— ë°ì´í„°ë¥¼ ë³µêµ¬í•  ìˆ˜ ìˆëŠ” 7ì¼ì˜ ì‹œê°„ì„ ì œê³µí•©ë‹ˆë‹¤.

ë§ˆì§€ë§‰ìœ¼ë¡œ ê³µê²©ìëŠ” ì¼ë°˜ì ìœ¼ë¡œ "ransom-note.txt"ë¼ëŠ” ì´ë¦„ì˜ ìµœì¢… íŒŒì¼ì„ ì—…ë¡œë“œí•˜ì—¬ ëŒ€ìƒì—ê²Œ íŒŒì¼ì„ ë³µêµ¬í•˜ëŠ” ë°©ë²•ì— ëŒ€í•œ ì§€ì¹¨ì„ í¬í•¨í•©ë‹ˆë‹¤. ì´ íŒŒì¼ì€ ì•”í˜¸í™” ì—†ì´ ì—…ë¡œë“œë˜ì–´ ëŒ€ìƒì˜ ì£¼ëª©ì„ ëŒê³  ëœì„¬ì›¨ì–´ ê³µê²©ì„ ì¸ì‹í•˜ê²Œ í•˜ë ¤ëŠ” ì˜ë„ê°€ ìˆìŠµë‹ˆë‹¤.

**ë” ë§ì€ ì •ë³´ëŠ”** [**ì›ë³¸ ì—°êµ¬ë¥¼ í™•ì¸í•˜ì„¸ìš”**](https://rhinosecuritylabs.com/aws/s3-ransomware-part-1-attack-vector/)**.**

{% hint style="success" %}
Learn & practice AWS Hacking:<img src="/.gitbook/assets/image.png" alt="" data-size="line">[**HackTricks Training AWS Red Team Expert (ARTE)**](https://training.hacktricks.xyz/courses/arte)<img src="/.gitbook/assets/image.png" alt="" data-size="line">\
Learn & practice GCP Hacking: <img src="/.gitbook/assets/image (2).png" alt="" data-size="line">[**HackTricks Training GCP Red Team Expert (GRTE)**<img src="/.gitbook/assets/image (2).png" alt="" data-size="line">](https://training.hacktricks.xyz/courses/grte)

<details>

<summary>Support HackTricks</summary>

* Check the [**subscription plans**](https://github.com/sponsors/carlospolop)!
* **Join the** ğŸ’¬ [**Discord group**](https://discord.gg/hRep4RUj7f) or the [**telegram group**](https://t.me/peass) or **follow** us on **Twitter** ğŸ¦ [**@hacktricks\_live**](https://twitter.com/hacktricks\_live)**.**
* **Share hacking tricks by submitting PRs to the** [**HackTricks**](https://github.com/carlospolop/hacktricks) and [**HackTricks Cloud**](https://github.com/carlospolop/hacktricks-cloud) github repos.

</details>
{% endhint %}
