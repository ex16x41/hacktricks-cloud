# AWS - S3 Post Exploitation

{% hint style="success" %}
AWS Hacking'i Ã¶ÄŸrenin ve pratik yapÄ±n:<img src="/.gitbook/assets/image.png" alt="" data-size="line">[**HackTricks Training AWS Red Team Expert (ARTE)**](https://training.hacktricks.xyz/courses/arte)<img src="/.gitbook/assets/image.png" alt="" data-size="line">\
GCP Hacking'i Ã¶ÄŸrenin ve pratik yapÄ±n: <img src="/.gitbook/assets/image (2).png" alt="" data-size="line">[**HackTricks Training GCP Red Team Expert (GRTE)**<img src="/.gitbook/assets/image (2).png" alt="" data-size="line">](https://training.hacktricks.xyz/courses/grte)

<details>

<summary>HackTricks'i Destekleyin</summary>

* [**abonelik planlarÄ±nÄ±**](https://github.com/sponsors/carlospolop) kontrol edin!
* **ğŸ’¬ [**Discord grubuna**](https://discord.gg/hRep4RUj7f) veya [**telegram grubuna**](https://t.me/peass) katÄ±lÄ±n ya da **Twitter**'da **bizi takip edin** ğŸ¦ [**@hacktricks\_live**](https://twitter.com/hacktricks\_live)**.**
* **Hacking ipuÃ§larÄ±nÄ± paylaÅŸmak iÃ§in** [**HackTricks**](https://github.com/carlospolop/hacktricks) ve [**HackTricks Cloud**](https://github.com/carlospolop/hacktricks-cloud) github reposuna PR gÃ¶nderin.

</details>
{% endhint %}

## S3

Daha fazla bilgi iÃ§in kontrol edin:

{% content-ref url="../aws-services/aws-s3-athena-and-glacier-enum.md" %}
[aws-s3-athena-and-glacier-enum.md](../aws-services/aws-s3-athena-and-glacier-enum.md)
{% endcontent-ref %}

### Hassas Bilgiler

Bazen, kovalar iÃ§inde okunabilir hassas bilgiler bulabilirsiniz. Ã–rneÄŸin, terraform durum gizli anahtarlarÄ±.

### Pivotlama

FarklÄ± platformlar, hassas varlÄ±klarÄ± depolamak iÃ§in S3 kullanÄ±yor olabilir.\
Ã–rneÄŸin, **airflow** burada **DAG'lerin** **kodunu** depoluyor olabilir veya **web sayfalarÄ±** doÄŸrudan S3'ten sunulabilir. Yazma izinlerine sahip bir saldÄ±rgan, kovadaki **kodunu deÄŸiÅŸtirebilir** ve diÄŸer platformlara **pivotlayabilir** veya JS dosyalarÄ±nÄ± deÄŸiÅŸtirerek **hesaplarÄ± ele geÃ§irebilir**.

### S3 Fidye YazÄ±lÄ±mÄ±

Bu senaryoda, **saldÄ±rgan kendi AWS hesabÄ±nda veya baÅŸka bir ele geÃ§irilmiÅŸ hesapta bir KMS (Anahtar YÃ¶netim Servisi) anahtarÄ± oluÅŸturur**. Daha sonra bu **anahtarÄ± dÃ¼nyanÄ±n her yerinden eriÅŸilebilir hale getirir**, bÃ¶ylece herhangi bir AWS kullanÄ±cÄ±sÄ±, rolÃ¼ veya hesabÄ± bu anahtarÄ± kullanarak nesneleri ÅŸifreleyebilir. Ancak, nesneler Ã§Ã¶zÃ¼lemez.

SaldÄ±rgan, bir hedef **S3 kovasÄ±nÄ± belirler ve Ã§eÅŸitli yÃ¶ntemlerle yazma dÃ¼zeyinde eriÅŸim kazanÄ±r**. Bu, kamuya aÃ§Ä±k bir ÅŸekilde maruz kalan kÃ¶tÃ¼ yapÄ±landÄ±rÄ±lmÄ±ÅŸ bir kova veya saldÄ±rganÄ±n AWS ortamÄ±na eriÅŸim kazanmasÄ± nedeniyle olabilir. SaldÄ±rgan genellikle kiÅŸisel olarak tanÄ±mlanabilir bilgiler (PII), korunan saÄŸlÄ±k bilgileri (PHI), gÃ¼nlÃ¼kler, yedekler ve daha fazlasÄ±nÄ± iÃ§eren hassas bilgiler iÃ§eren kovalarÄ± hedef alÄ±r.

KovanÄ±n fidye yazÄ±lÄ±mÄ± iÃ§in hedeflenip hedeflenemeyeceÄŸini belirlemek iÃ§in, saldÄ±rgan yapÄ±landÄ±rmasÄ±nÄ± kontrol eder. Bu, **S3 Nesne SÃ¼rÃ¼mleme**'nin etkin olup olmadÄ±ÄŸÄ±nÄ± ve **Ã§ok faktÃ¶rlÃ¼ kimlik doÄŸrulama silme (MFA silme)**'nin etkin olup olmadÄ±ÄŸÄ±nÄ± doÄŸrulamayÄ± iÃ§erir. Nesne SÃ¼rÃ¼mleme etkin deÄŸilse, saldÄ±rgan devam edebilir. Nesne SÃ¼rÃ¼mleme etkin ancak MFA silme devre dÄ±ÅŸÄ±ysa, saldÄ±rgan **Nesne SÃ¼rÃ¼mleme'yi devre dÄ±ÅŸÄ± bÄ±rakabilir**. Hem Nesne SÃ¼rÃ¼mleme hem de MFA silme etkinse, saldÄ±rganÄ±n o belirli kovayÄ± fidye yazÄ±lÄ±mÄ± ile hedef almasÄ± daha zor hale gelir.

AWS API'sini kullanarak, saldÄ±rgan **kovadaki her nesneyi kendi KMS anahtarÄ±nÄ± kullanarak ÅŸifrelenmiÅŸ bir kopya ile deÄŸiÅŸtirir**. Bu, kovadaki verileri etkili bir ÅŸekilde ÅŸifreler ve anahtar olmadan eriÅŸilemez hale getirir.

Daha fazla baskÄ± eklemek iÃ§in, saldÄ±rgan saldÄ±rÄ±da kullanÄ±lan KMS anahtarÄ±nÄ±n silinmesini planlar. Bu, hedefe anahtar silinmeden Ã¶nce verilerini kurtarmasÄ± iÃ§in 7 gÃ¼nlÃ¼k bir sÃ¼re tanÄ±r ve veriler kalÄ±cÄ± olarak kaybolur.

Son olarak, saldÄ±rgan genellikle "ransom-note.txt" olarak adlandÄ±rÄ±lan son bir dosya yÃ¼kleyebilir; bu dosya, hedefe dosyalarÄ±nÄ± nasÄ±l geri alacaÄŸÄ±na dair talimatlar iÃ§erir. Bu dosya ÅŸifrelenmeden yÃ¼klenir, muhtemelen hedefin dikkatini Ã§ekmek ve fidye yazÄ±lÄ±mÄ± saldÄ±rÄ±sÄ±ndan haberdar etmek iÃ§in.

**Daha fazla bilgi iÃ§in** [**orijinal araÅŸtÄ±rmayÄ± kontrol edin**](https://rhinosecuritylabs.com/aws/s3-ransomware-part-1-attack-vector/)**.**

{% hint style="success" %}
AWS Hacking'i Ã¶ÄŸrenin ve pratik yapÄ±n:<img src="/.gitbook/assets/image.png" alt="" data-size="line">[**HackTricks Training AWS Red Team Expert (ARTE)**](https://training.hacktricks.xyz/courses/arte)<img src="/.gitbook/assets/image.png" alt="" data-size="line">\
GCP Hacking'i Ã¶ÄŸrenin ve pratik yapÄ±n: <img src="/.gitbook/assets/image (2).png" alt="" data-size="line">[**HackTricks Training GCP Red Team Expert (GRTE)**<img src="/.gitbook/assets/image (2).png" alt="" data-size="line">](https://training.hacktricks.xyz/courses/grte)

<details>

<summary>HackTricks'i Destekleyin</summary>

* [**abonelik planlarÄ±nÄ±**](https://github.com/sponsors/carlospolop) kontrol edin!
* **ğŸ’¬ [**Discord grubuna**](https://discord.gg/hRep4RUj7f) veya [**telegram grubuna**](https://t.me/peass) katÄ±lÄ±n ya da **Twitter**'da **bizi takip edin** ğŸ¦ [**@hacktricks\_live**](https://twitter.com/hacktricks\_live)**.**
* **Hacking ipuÃ§larÄ±nÄ± paylaÅŸmak iÃ§in** [**HackTricks**](https://github.com/carlospolop/hacktricks) ve [**HackTricks Cloud**](https://github.com/carlospolop/hacktricks-cloud) github reposuna PR gÃ¶nderin.

</details>
{% endhint %}
