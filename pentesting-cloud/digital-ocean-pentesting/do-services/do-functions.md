# DO - Functions

{% hint style="success" %}
Learn & practice AWS Hacking:<img src="../../../.gitbook/assets/image (1).png" alt="" data-size="line">[**HackTricks Training AWS Red Team Expert (ARTE)**](https://training.hacktricks.xyz/courses/arte)<img src="../../../.gitbook/assets/image (1).png" alt="" data-size="line">\
Learn & practice GCP Hacking: <img src="../../../.gitbook/assets/image (2).png" alt="" data-size="line">[**HackTricks Training GCP Red Team Expert (GRTE)**<img src="../../../.gitbook/assets/image (2).png" alt="" data-size="line">](https://training.hacktricks.xyz/courses/grte)

<details>

<summary>Support HackTricks</summary>

* Check the [**subscription plans**](https://github.com/sponsors/carlospolop)!
* **Join the** ğŸ’¬ [**Discord group**](https://discord.gg/hRep4RUj7f) or the [**telegram group**](https://t.me/peass) or **follow** us on **Twitter** ğŸ¦ [**@hacktricks\_live**](https://twitter.com/hacktricks\_live)**.**
* **Share hacking tricks by submitting PRs to the** [**HackTricks**](https://github.com/carlospolop/hacktricks) and [**HackTricks Cloud**](https://github.com/carlospolop/hacktricks-cloud) github repos.

</details>
{% endhint %}

## Basic Information

DigitalOcean Functions, ë˜ëŠ” "DO Functions"ëŠ” **ê¸°ë°˜ ì¸í”„ë¼ì— ëŒ€í•´ ê±±ì •í•  í•„ìš” ì—†ì´ ì½”ë“œë¥¼ ì‹¤í–‰í•  ìˆ˜ ìˆëŠ”** ì„œë²„ë¦¬ìŠ¤ ì»´í“¨íŒ… í”Œë«í¼ì…ë‹ˆë‹¤. DO Functionsë¥¼ ì‚¬ìš©í•˜ë©´ **API**, **HTTP ìš”ì²­**(í™œì„±í™”ëœ ê²½ìš°) ë˜ëŠ” **cron**ì„ í†µí•´ **íŠ¸ë¦¬ê±°**í•  ìˆ˜ ìˆëŠ” "í•¨ìˆ˜"ë¡œ ì½”ë“œë¥¼ ì‘ì„±í•˜ê³  ë°°í¬í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤. ì´ëŸ¬í•œ í•¨ìˆ˜ëŠ” ì™„ì „íˆ ê´€ë¦¬ë˜ëŠ” í™˜ê²½ì—ì„œ ì‹¤í–‰ë˜ë¯€ë¡œ **í™•ì¥ì„±, ë³´ì•ˆ ë˜ëŠ” ìœ ì§€ ê´€ë¦¬ì— ëŒ€í•´ ê±±ì •í•  í•„ìš”ê°€ ì—†ìŠµë‹ˆë‹¤**.

DOì—ì„œ í•¨ìˆ˜ë¥¼ ìƒì„±í•˜ë ¤ë©´ ë¨¼ì € **í•¨ìˆ˜ë¥¼ ê·¸ë£¹í™”í•  ë„¤ì„ìŠ¤í˜ì´ìŠ¤ë¥¼ ìƒì„±í•´ì•¼ í•©ë‹ˆë‹¤**.\
ê·¸ í›„ ë„¤ì„ìŠ¤í˜ì´ìŠ¤ ë‚´ì—ì„œ í•¨ìˆ˜ë¥¼ ìƒì„±í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.

### Triggers

**REST APIë¥¼ í†µí•´ í•¨ìˆ˜ë¥¼ íŠ¸ë¦¬ê±°í•˜ëŠ” ë°©ë²•**(í•­ìƒ í™œì„±í™”ë˜ì–´ ìˆìœ¼ë©°, cliê°€ ì‚¬ìš©í•˜ëŠ” ë°©ë²•)ì€ **ì¸ì¦ í† í°**ì„ ì‚¬ìš©í•˜ì—¬ ìš”ì²­ì„ íŠ¸ë¦¬ê±°í•˜ëŠ” ê²ƒì…ë‹ˆë‹¤:
```bash
curl -X POST "https://faas-lon1-129376a7.doserverless.co/api/v1/namespaces/fn-c100c012-65bf-4040-1230-2183764b7c23/actions/functionname?blocking=true&result=true" \
-H "Content-Type: application/json" \
-H "Authorization: Basic MGU0NTczZGQtNjNiYS00MjZlLWI2YjctODk0N2MyYTA2NGQ4OkhwVEllQ2t4djNZN2x6YjJiRmFGc1FERXBySVlWa1lEbUxtRE1aRTludXA1UUNlU2VpV0ZGNjNqWnVhYVdrTFg="
```
**`doctl`** CLI ë„êµ¬ê°€ ì´ í† í°ì„ ì–´ë–»ê²Œ ê°€ì ¸ì˜¤ëŠ”ì§€ í™•ì¸í•˜ë ¤ë©´ (ë³µì œí•  ìˆ˜ ìˆë„ë¡), **ë‹¤ìŒ ëª…ë ¹ì–´ëŠ” ì „ì²´ ë„¤íŠ¸ì›Œí¬ ì¶”ì ì„ ë³´ì—¬ì¤ë‹ˆë‹¤:**
```bash
doctl serverless connect --trace
```
**HTTP íŠ¸ë¦¬ê±°ê°€ í™œì„±í™”ë˜ë©´**, ì›¹ í•¨ìˆ˜ëŠ” ì´ëŸ¬í•œ **HTTP ë©”ì„œë“œ GET, POST, PUT, PATCH, DELETE, HEAD ë° OPTIONS**ë¥¼ í†µí•´ í˜¸ì¶œë  ìˆ˜ ìˆìŠµë‹ˆë‹¤.

{% hint style="danger" %}
DO í•¨ìˆ˜ì—ì„œëŠ” **í™˜ê²½ ë³€ìˆ˜ë¥¼ ì•”í˜¸í™”í•  ìˆ˜ ì—†ìŠµë‹ˆë‹¤** (ì´ ê¸€ì„ ì‘ì„±í•  ë‹¹ì‹œ).\
CLIì—ì„œ ì´ë¥¼ ì½ëŠ” ë°©ë²•ì„ ì°¾ì„ ìˆ˜ ì—†ì—ˆì§€ë§Œ, ì½˜ì†”ì—ì„œëŠ” ê°„ë‹¨í•©ë‹ˆë‹¤.
{% endhint %}

**í•¨ìˆ˜ URL**ì€ ë‹¤ìŒê³¼ ê°™ìŠµë‹ˆë‹¤: `https://<random>.doserverless.co/api/v1/web/<namespace-id>/default/<function-name>`

### ì—´ê±°
```bash
# Namespace
doctl serverless namespaces list

# Functions (need to connect to a namespace)
doctl serverless connect
doctl serverless functions list
doctl serverless functions invoke <func-name>
doctl serverless functions get <func-name>

# Logs of executions
doctl serverless activations list
doctl serverless activations get <activation-id> # Get all the info about execution
doctl serverless activations logs <activation-id> # get only the logs of execution
doctl serverless activations result <activation-id> # get only the response result of execution

# I couldn't find any way to get the env variables form the CLI
```
{% hint style="danger" %}
Functions ìƒŒë“œë°•ìŠ¤ì—ëŠ” **ë©”íƒ€ë°ì´í„° ì—”ë“œí¬ì¸íŠ¸ê°€ ì—†ìŠµë‹ˆë‹¤**.
{% endhint %}

{% hint style="success" %}
AWS í•´í‚¹ ë°°ìš°ê¸° ë° ì—°ìŠµí•˜ê¸°:<img src="../../../.gitbook/assets/image (1).png" alt="" data-size="line">[**HackTricks Training AWS Red Team Expert (ARTE)**](https://training.hacktricks.xyz/courses/arte)<img src="../../../.gitbook/assets/image (1).png" alt="" data-size="line">\
GCP í•´í‚¹ ë°°ìš°ê¸° ë° ì—°ìŠµí•˜ê¸°: <img src="../../../.gitbook/assets/image (2).png" alt="" data-size="line">[**HackTricks Training GCP Red Team Expert (GRTE)**<img src="../../../.gitbook/assets/image (2).png" alt="" data-size="line">](https://training.hacktricks.xyz/courses/grte)

<details>

<summary>HackTricks ì§€ì›í•˜ê¸°</summary>

* [**êµ¬ë… ê³„íš**](https://github.com/sponsors/carlospolop) í™•ì¸í•˜ê¸°!
* **ğŸ’¬ [**Discord ê·¸ë£¹**](https://discord.gg/hRep4RUj7f) ë˜ëŠ” [**í…”ë ˆê·¸ë¨ ê·¸ë£¹**](https://t.me/peass)ì— ì°¸ì—¬í•˜ê±°ë‚˜ **Twitter** ğŸ¦ [**@hacktricks\_live**](https://twitter.com/hacktricks\_live)**ë¥¼ íŒ”ë¡œìš°í•˜ì„¸ìš”.**
* **[**HackTricks**](https://github.com/carlospolop/hacktricks) ë° [**HackTricks Cloud**](https://github.com/carlospolop/hacktricks-cloud) ê¹ƒí—ˆë¸Œ ë¦¬í¬ì§€í† ë¦¬ì— PRì„ ì œì¶œí•˜ì—¬ í•´í‚¹ íŒì„ ê³µìœ í•˜ì„¸ìš”.**

</details>
{% endhint %}
