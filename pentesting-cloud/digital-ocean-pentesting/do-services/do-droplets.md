# DO - Droplets

{% hint style="success" %}
Learn & practice AWS Hacking:<img src="../../../.gitbook/assets/image (1).png" alt="" data-size="line">[**HackTricks Training AWS Red Team Expert (ARTE)**](https://training.hacktricks.xyz/courses/arte)<img src="../../../.gitbook/assets/image (1).png" alt="" data-size="line">\
Learn & practice GCP Hacking: <img src="../../../.gitbook/assets/image (2).png" alt="" data-size="line">[**HackTricks Training GCP Red Team Expert (GRTE)**<img src="../../../.gitbook/assets/image (2).png" alt="" data-size="line">](https://training.hacktricks.xyz/courses/grte)

<details>

<summary>Support HackTricks</summary>

* Check the [**subscription plans**](https://github.com/sponsors/carlospolop)!
* **Join the**  [**Discord group**](https://discord.gg/hRep4RUj7f) or the [**telegram group**](https://t.me/peass) or **follow** us on **Twitter**  [**@hacktricks\_live**](https://twitter.com/hacktricks\_live)**.**
* **Share hacking tricks by submitting PRs to the** [**HackTricks**](https://github.com/carlospolop/hacktricks) and [**HackTricks Cloud**](https://github.com/carlospolop/hacktricks-cloud) github repos.

</details>
{% endhint %}

## Informaci贸n B谩sica

En DigitalOcean, un "droplet" es un **servidor privado virtual (VPS)** que se puede utilizar para alojar sitios web y aplicaciones. Un droplet es un **paquete preconfigurado de recursos de computaci贸n**, que incluye una cierta cantidad de CPU, memoria y almacenamiento, que se puede implementar r谩pida y f谩cilmente en la infraestructura en la nube de DigitalOcean.

Puedes seleccionar entre **sistemas operativos comunes**, aplicaciones ya en funcionamiento (como WordPress, cPanel, Laravel...), o incluso subir y usar **tus propias im谩genes**.

Los droplets soportan **scripts de datos de usuario**.

<details>

<summary>Diferencia entre un snapshot y un backup</summary>

En DigitalOcean, un snapshot es una copia en un momento dado del disco de un Droplet. Captura el estado del disco del Droplet en el momento en que se tom贸 el snapshot, incluyendo el sistema operativo, aplicaciones instaladas y todos los archivos y datos en el disco.

Los snapshots se pueden usar para crear nuevos Droplets con la misma configuraci贸n que el Droplet original, o para restaurar un Droplet al estado en que se encontraba cuando se tom贸 el snapshot. Los snapshots se almacenan en el servicio de almacenamiento de objetos de DigitalOcean, y son incrementales, lo que significa que solo se almacenan los cambios desde el 煤ltimo snapshot. Esto los hace eficientes de usar y rentables de almacenar.

Por otro lado, un backup es una copia completa de un Droplet, incluyendo el sistema operativo, aplicaciones instaladas, archivos y datos, as铆 como la configuraci贸n y metadatos del Droplet. Los backups se realizan t铆picamente en un horario regular, y capturan el estado completo de un Droplet en un momento espec铆fico.

A diferencia de los snapshots, los backups se almacenan en un formato comprimido y cifrado, y se transfieren fuera de la infraestructura de DigitalOcean a una ubicaci贸n remota para su custodia. Esto hace que los backups sean ideales para la recuperaci贸n ante desastres, ya que proporcionan una copia completa de un Droplet que se puede restaurar en caso de p茅rdida de datos u otros eventos catastr贸ficos.

En resumen, los snapshots son copias en un momento dado del disco de un Droplet, mientras que los backups son copias completas de un Droplet, incluyendo su configuraci贸n y metadatos. Los snapshots se almacenan en el servicio de almacenamiento de objetos de DigitalOcean, mientras que los backups se transfieren fuera de la infraestructura de DigitalOcean a una ubicaci贸n remota. Tanto los snapshots como los backups se pueden usar para restaurar un Droplet, pero los snapshots son m谩s eficientes de usar y almacenar, mientras que los backups proporcionan una soluci贸n de respaldo m谩s completa para la recuperaci贸n ante desastres.

</details>

### Autenticaci贸n

Para la autenticaci贸n es posible **habilitar SSH** a trav茅s de nombre de usuario y **contrase帽a** (contrase帽a definida cuando se crea el droplet). O **seleccionar una o m谩s de las claves SSH subidas**.

### Firewall

{% hint style="danger" %}
Por defecto, **los droplets se crean SIN UN FIREWALL** (no como en otras nubes como AWS o GCP). As铆 que si quieres que DO proteja los puertos del droplet (VM), necesitas **crearlo y adjuntarlo**.
{% endhint %}

M谩s informaci贸n en:

{% content-ref url="do-networking.md" %}
[do-networking.md](do-networking.md)
{% endcontent-ref %}

### Enumeraci贸n
```bash
# VMs
doctl compute droplet list # IPs will appear here
doctl compute droplet backups <droplet-id>
doctl compute droplet snapshots <droplet-id>
doctl compute droplet neighbors <droplet-id> # Get network neighbors
doctl compute droplet actions <droplet-id> # Get droplet actions

# VM interesting actions
doctl compute droplet-action password-reset <droplet-id> # New password is emailed to the user
doctl compute droplet-action enable-ipv6 <droplet-id>
doctl compute droplet-action power-on <droplet-id>
doctl compute droplet-action disable-backups <droplet-id>

# SSH
doctl compute ssh <droplet-id> # This will just run SSH
doctl compute ssh-key list
doctl compute ssh-key import <key-name> --public-key-file /path/to/key.pub

# Certificates
doctl compute certificate list

# Snapshots
doctl compute snapshot list
```
{% hint style="danger" %}
**Los Droplets tienen puntos finales de metadatos**, pero en DO **no hay IAM** ni cosas como roles de AWS o cuentas de servicio de GCP.
{% endhint %}

### RCE

Con acceso a la consola es posible **obtener un shell dentro del droplet** accediendo a la URL: **`https://cloud.digitalocean.com/droplets/<droplet-id>/terminal/ui/`**

Tambi茅n es posible lanzar una **consola de recuperaci贸n** para ejecutar comandos dentro del host accediendo a una consola de recuperaci贸n en **`https://cloud.digitalocean.com/droplets/<droplet-id>/console`** (pero en este caso necesitar谩s conocer la contrase帽a de root).

{% hint style="success" %}
Learn & practice AWS Hacking:<img src="../../../.gitbook/assets/image (1).png" alt="" data-size="line">[**HackTricks Training AWS Red Team Expert (ARTE)**](https://training.hacktricks.xyz/courses/arte)<img src="../../../.gitbook/assets/image (1).png" alt="" data-size="line">\
Learn & practice GCP Hacking: <img src="../../../.gitbook/assets/image (2).png" alt="" data-size="line">[**HackTricks Training GCP Red Team Expert (GRTE)**<img src="../../../.gitbook/assets/image (2).png" alt="" data-size="line">](https://training.hacktricks.xyz/courses/grte)

<details>

<summary>Support HackTricks</summary>

* Check the [**subscription plans**](https://github.com/sponsors/carlospolop)!
* **Join the**  [**Discord group**](https://discord.gg/hRep4RUj7f) or the [**telegram group**](https://t.me/peass) or **follow** us on **Twitter**  [**@hacktricks\_live**](https://twitter.com/hacktricks\_live)**.**
* **Share hacking tricks by submitting PRs to the** [**HackTricks**](https://github.com/carlospolop/hacktricks) and [**HackTricks Cloud**](https://github.com/carlospolop/hacktricks-cloud) github repos.

</details>
{% endhint %}
