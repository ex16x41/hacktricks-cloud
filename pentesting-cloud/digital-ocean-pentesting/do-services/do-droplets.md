# DO - Droplets

{% hint style="success" %}
Learn & practice AWS Hacking:<img src="../../../.gitbook/assets/image (1) (1) (1).png" alt="" data-size="line">[**HackTricks Training AWS Red Team Expert (ARTE)**](https://training.hacktricks.xyz/courses/arte)<img src="../../../.gitbook/assets/image (1) (1) (1).png" alt="" data-size="line">\
Learn & practice GCP Hacking: <img src="../../../.gitbook/assets/image (2).png" alt="" data-size="line">[**HackTricks Training GCP Red Team Expert (GRTE)**<img src="../../../.gitbook/assets/image (2).png" alt="" data-size="line">](https://training.hacktricks.xyz/courses/grte)

<details>

<summary>Support HackTricks</summary>

* Check the [**subscription plans**](https://github.com/sponsors/carlospolop)!
* **Join the** üí¨ [**Discord group**](https://discord.gg/hRep4RUj7f) or the [**telegram group**](https://t.me/peass) or **follow** us on **Twitter** üê¶ [**@hacktricks\_live**](https://twitter.com/hacktricks_live)**.**
* **Share hacking tricks by submitting PRs to the** [**HackTricks**](https://github.com/carlospolop/hacktricks) and [**HackTricks Cloud**](https://github.com/carlospolop/hacktricks-cloud) github repos.

</details>
{% endhint %}

## Informations de base

Dans DigitalOcean, un "droplet" est un **serveur priv√© virtuel (VPS)** qui peut √™tre utilis√© pour h√©berger des sites web et des applications. Un droplet est un **package pr√©configur√© de ressources informatiques**, comprenant une certaine quantit√© de CPU, de m√©moire et de stockage, qui peut √™tre d√©ploy√© rapidement et facilement sur l'infrastructure cloud de DigitalOcean.

Vous pouvez choisir parmi **des syst√®mes d'exploitation courants**, des **applications** d√©j√† en cours d'ex√©cution (comme WordPress, cPanel, Laravel...), ou m√™me t√©l√©charger et utiliser **vos propres images**.

Les droplets prennent en charge **les scripts de donn√©es utilisateur**.

<details>

<summary>Diff√©rence entre un instantan√© et une sauvegarde</summary>

Dans DigitalOcean, un instantan√© est une copie √† un moment donn√© du disque d'un Droplet. Il capture l'√©tat du disque du Droplet au moment o√π l'instantan√© a √©t√© pris, y compris le syst√®me d'exploitation, les applications install√©es et tous les fichiers et donn√©es sur le disque.

Les instantan√©s peuvent √™tre utilis√©s pour cr√©er de nouveaux Droplets avec la m√™me configuration que le Droplet d'origine, ou pour restaurer un Droplet √† l'√©tat dans lequel il se trouvait lorsque l'instantan√© a √©t√© pris. Les instantan√©s sont stock√©s sur le service de stockage d'objets de DigitalOcean, et ils sont incr√©mentiels, ce qui signifie que seules les modifications depuis le dernier instantan√© sont stock√©es. Cela les rend efficaces √† utiliser et √©conomiques √† stocker.

D'autre part, une sauvegarde est une copie compl√®te d'un Droplet, y compris le syst√®me d'exploitation, les applications install√©es, les fichiers et les donn√©es, ainsi que les param√®tres et les m√©tadonn√©es du Droplet. Les sauvegardes sont g√©n√©ralement effectu√©es selon un calendrier r√©gulier, et elles capturent l'√©tat entier d'un Droplet √† un moment sp√©cifique.

Contrairement aux instantan√©s, les sauvegardes sont stock√©es dans un format compress√© et chiffr√©, et elles sont transf√©r√©es hors de l'infrastructure de DigitalOcean vers un emplacement distant pour la conservation. Cela rend les sauvegardes id√©ales pour la r√©cup√©ration apr√®s sinistre, car elles fournissent une copie compl√®te d'un Droplet qui peut √™tre restaur√©e en cas de perte de donn√©es ou d'autres √©v√©nements catastrophiques.

En r√©sum√©, les instantan√©s sont des copies √† un moment donn√© du disque d'un Droplet, tandis que les sauvegardes sont des copies compl√®tes d'un Droplet, y compris ses param√®tres et ses m√©tadonn√©es. Les instantan√©s sont stock√©s sur le service de stockage d'objets de DigitalOcean, tandis que les sauvegardes sont transf√©r√©es hors de l'infrastructure de DigitalOcean vers un emplacement distant. Les instantan√©s et les sauvegardes peuvent √™tre utilis√©s pour restaurer un Droplet, mais les instantan√©s sont plus efficaces √† utiliser et √† stocker, tandis que les sauvegardes fournissent une solution de sauvegarde plus compl√®te pour la r√©cup√©ration apr√®s sinistre.

</details>

### Authentification

Pour l'authentification, il est possible d'**activer SSH** via un nom d'utilisateur et un **mot de passe** (mot de passe d√©fini lors de la cr√©ation du droplet). Ou **s√©lectionner une ou plusieurs des cl√©s SSH t√©l√©charg√©es**.

### Pare-feu

{% hint style="danger" %}
Par d√©faut, **les droplets sont cr√©√©s SANS PARE-FEU** (contrairement √† d'autres clouds comme AWS ou GCP). Donc, si vous voulez que DO prot√®ge les ports du droplet (VM), vous devez **le cr√©er et l'attacher**.
{% endhint %}

Plus d'infos dans :

{% content-ref url="do-networking.md" %}
[do-networking.md](do-networking.md)
{% endcontent-ref %}

### √ânum√©ration
```bash
# VMs
doctl compute droplet list # IPs will appear here
doctl compute droplet backups <droplet-id>
doctl compute droplet snapshots <droplet-id>
doctl compute droplet neighbors <droplet-id> # Get network neighbors
doctl compute droplet actions <droplet-id> # Get droplet actions

# VM interesting actions
doctl compute droplet-action password-reset <droplet-id> # New password is emailed to the user
doctl compute droplet-action enable-ipv6 <droplet-id>
doctl compute droplet-action power-on <droplet-id>
doctl compute droplet-action disable-backups <droplet-id>

# SSH
doctl compute ssh <droplet-id> # This will just run SSH
doctl compute ssh-key list
doctl compute ssh-key import <key-name> --public-key-file /path/to/key.pub

# Certificates
doctl compute certificate list

# Snapshots
doctl compute snapshot list
```
{% hint style="danger" %}
**Les Droplets ont des points de terminaison de m√©tadonn√©es**, mais dans DO il **n'y a pas IAM** ou des choses comme des r√¥les d'AWS ou des comptes de service de GCP.
{% endhint %}

### RCE

Avec acc√®s √† la console, il est possible de **obtenir un shell √† l'int√©rieur du droplet** en acc√©dant √† l'URL : **`https://cloud.digitalocean.com/droplets/<droplet-id>/terminal/ui/`**

Il est √©galement possible de lancer une **console de r√©cup√©ration** pour ex√©cuter des commandes √† l'int√©rieur de l'h√¥te en acc√©dant √† une console de r√©cup√©ration √† **`https://cloud.digitalocean.com/droplets/<droplet-id>/console`** (mais dans ce cas, vous devrez conna√Ætre le mot de passe root).

{% hint style="success" %}
Learn & practice AWS Hacking:<img src="../../../.gitbook/assets/image (1) (1) (1).png" alt="" data-size="line">[**HackTricks Training AWS Red Team Expert (ARTE)**](https://training.hacktricks.xyz/courses/arte)<img src="../../../.gitbook/assets/image (1) (1) (1).png" alt="" data-size="line">\
Learn & practice GCP Hacking: <img src="../../../.gitbook/assets/image (2).png" alt="" data-size="line">[**HackTricks Training GCP Red Team Expert (GRTE)**<img src="../../../.gitbook/assets/image (2).png" alt="" data-size="line">](https://training.hacktricks.xyz/courses/grte)

<details>

<summary>Support HackTricks</summary>

* Check the [**subscription plans**](https://github.com/sponsors/carlospolop)!
* **Join the** üí¨ [**Discord group**](https://discord.gg/hRep4RUj7f) or the [**telegram group**](https://t.me/peass) or **follow** us on **Twitter** üê¶ [**@hacktricks\_live**](https://twitter.com/hacktricks_live)**.**
* **Share hacking tricks by submitting PRs to the** [**HackTricks**](https://github.com/carlospolop/hacktricks) and [**HackTricks Cloud**](https://github.com/carlospolop/hacktricks-cloud) github repos.

</details>
{% endhint %}
