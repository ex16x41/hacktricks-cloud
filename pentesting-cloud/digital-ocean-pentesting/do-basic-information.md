# DO - Informations de base

{% hint style="success" %}
Apprenez et pratiquez le hacking AWS :<img src="../../.gitbook/assets/image (1) (1) (1).png" alt="" data-size="line">[**HackTricks Training AWS Red Team Expert (ARTE)**](https://training.hacktricks.xyz/courses/arte)<img src="../../.gitbook/assets/image (1) (1) (1).png" alt="" data-size="line">\
Apprenez et pratiquez le hacking GCP : <img src="../../.gitbook/assets/image (2).png" alt="" data-size="line">[**HackTricks Training GCP Red Team Expert (GRTE)**<img src="../../.gitbook/assets/image (2).png" alt="" data-size="line">](https://training.hacktricks.xyz/courses/grte)

<details>

<summary>Soutenir HackTricks</summary>

* Consultez les [**plans d'abonnement**](https://github.com/sponsors/carlospolop) !
* **Rejoignez le** üí¨ [**groupe Discord**](https://discord.gg/hRep4RUj7f) ou le [**groupe telegram**](https://t.me/peass) ou **suivez-nous sur** **Twitter** üê¶ [**@hacktricks\_live**](https://twitter.com/hacktricks_live)**.**
* **Partagez des astuces de hacking en soumettant des PR aux** [**HackTricks**](https://github.com/carlospolop/hacktricks) et [**HackTricks Cloud**](https://github.com/carlospolop/hacktricks-cloud) d√©p√¥ts github.

</details>
{% endhint %}

## Informations de base

DigitalOcean est une **plateforme de cloud computing qui fournit aux utilisateurs une vari√©t√© de services**, y compris des serveurs priv√©s virtuels (VPS) et d'autres ressources pour construire, d√©ployer et g√©rer des applications. **Les services de DigitalOcean sont con√ßus pour √™tre simples et faciles √† utiliser**, ce qui les rend **populaires parmi les d√©veloppeurs et les petites entreprises**.

Certaines des caract√©ristiques cl√©s de DigitalOcean incluent :

* **Serveurs priv√©s virtuels (VPS)** : DigitalOcean fournit des VPS qui peuvent √™tre utilis√©s pour h√©berger des sites web et des applications. Ces VPS sont connus pour leur simplicit√© et leur facilit√© d'utilisation, et peuvent √™tre d√©ploy√©s rapidement et facilement en utilisant une vari√©t√© de "droplets" pr√©con√ßus ou des configurations personnalis√©es.
* **Stockage** : DigitalOcean propose une gamme d'options de stockage, y compris le stockage d'objets, le stockage en bloc et les bases de donn√©es g√©r√©es, qui peuvent √™tre utilis√©es pour stocker et g√©rer des donn√©es pour des sites web et des applications.
* **Outils de d√©veloppement et de d√©ploiement** : DigitalOcean fournit une gamme d'outils qui peuvent √™tre utilis√©s pour construire, d√©ployer et g√©rer des applications, y compris des API et des droplets pr√©con√ßus.
* **S√©curit√©** : DigitalOcean accorde une grande importance √† la s√©curit√© et propose une gamme d'outils et de fonctionnalit√©s pour aider les utilisateurs √† prot√©ger leurs donn√©es et applications. Cela inclut le chiffrement, les sauvegardes et d'autres mesures de s√©curit√©.

Dans l'ensemble, DigitalOcean est une plateforme de cloud computing qui fournit aux utilisateurs les outils et ressources dont ils ont besoin pour construire, d√©ployer et g√©rer des applications dans le cloud. Ses services sont con√ßus pour √™tre simples et faciles √† utiliser, ce qui les rend populaires parmi les d√©veloppeurs et les petites entreprises.

### Principales diff√©rences avec AWS

L'une des principales diff√©rences entre DigitalOcean et AWS est la **gamme de services qu'ils offrent**. **DigitalOcean se concentre sur la fourniture de serveurs priv√©s virtuels (VPS)** simples et faciles √† utiliser, de stockage et d'outils de d√©veloppement et de d√©ploiement. **AWS**, en revanche, propose une **gamme de services beaucoup plus large**, y compris des VPS, du stockage, des bases de donn√©es, de l'apprentissage automatique, de l'analyse et de nombreux autres services. Cela signifie qu'AWS est plus adapt√© aux applications complexes de niveau entreprise, tandis que DigitalOcean est plus adapt√© aux petites entreprises et aux d√©veloppeurs.

Une autre diff√©rence cl√© entre les deux plateformes est la **structure tarifaire**. **Les tarifs de DigitalOcean sont g√©n√©ralement plus simples et plus faciles** √† comprendre que ceux d'AWS, avec une gamme de plans tarifaires bas√©s sur le nombre de droplets et d'autres ressources utilis√©es. AWS, en revanche, a une structure tarifaire plus complexe qui est bas√©e sur une vari√©t√© de facteurs, y compris le type et la quantit√© de ressources utilis√©es. Cela peut rendre plus difficile la pr√©vision des co√ªts lors de l'utilisation d'AWS.

## Hi√©rarchie

### Utilisateur

Un utilisateur est ce √† quoi vous vous attendez, un utilisateur. Il peut **cr√©er des √©quipes** et **√™tre membre de diff√©rentes √©quipes.**

### **√âquipe**

Une √©quipe est un groupe d'**utilisateurs**. Lorsqu'un utilisateur cr√©e une √©quipe, il a le **r√¥le de propri√©taire de cette √©quipe** et il **configure initialement les informations de facturation**. **D'autres** utilisateurs peuvent ensuite √™tre **invit√©s** √† l'√©quipe.

Au sein de l'√©quipe, il peut y avoir plusieurs **projets**. Un projet est juste un **ensemble de services en cours d'ex√©cution**. Il peut √™tre utilis√© pour **s√©parer diff√©rentes √©tapes d'infrastructure**, comme prod, staging, dev...

### Projet

Comme expliqu√©, un projet est juste un conteneur pour tous les **services** (droplets, espaces, bases de donn√©es, kubernetes...) **fonctionnant ensemble √† l'int√©rieur de celui-ci**.\
Un projet Digital Ocean est tr√®s similaire √† un projet GCP sans IAM.

## Permissions

### √âquipe

Fondamentalement, tous les membres d'une √©quipe ont **acc√®s aux ressources DO dans tous les projets cr√©√©s au sein de l'√©quipe (avec plus ou moins de privil√®ges).**

### R√¥les

Chaque **utilisateur au sein d'une √©quipe** peut avoir **l'un** des trois **r√¥les** suivants :

| R√¥le       | Ressources partag√©es | Informations de facturation | Param√®tres de l'√©quipe |
| ---------- | --------------------- | --------------------------- | ---------------------- |
| **Propri√©taire**  | Acc√®s complet      | Acc√®s complet               | Acc√®s complet          |
| **Facturier** | Pas d'acc√®s        | Acc√®s complet               | Pas d'acc√®s            |
| **Membre** | Acc√®s complet        | Pas d'acc√®s                 | Pas d'acc√®s            |

**Le propri√©taire** et **le membre peuvent lister les utilisateurs** et v√©rifier leurs **r√¥les** (le facturier ne peut pas).

## Acc√®s

### Nom d'utilisateur + mot de passe (MFA)

Comme dans la plupart des plateformes, pour acc√©der √† l'interface graphique, vous pouvez utiliser un ensemble de **nom d'utilisateur et mot de passe valides** pour **acc√©der** aux **ressources** cloud. Une fois connect√©, vous pouvez voir **toutes les √©quipes dont vous faites partie** sur [https://cloud.digitalocean.com/account/profile](https://cloud.digitalocean.com/account/profile).\
Et vous pouvez voir toute votre activit√© sur [https://cloud.digitalocean.com/account/activity](https://cloud.digitalocean.com/account/activity).

**MFA** peut √™tre **activ√©** pour un utilisateur et **impos√©** √† tous les utilisateurs d'une **√©quipe** pour acc√©der √† l'√©quipe.

### Cl√©s API

Pour utiliser l'API, les utilisateurs peuvent **g√©n√©rer des cl√©s API**. Celles-ci auront toujours des permissions de lecture, mais **les permissions d'√©criture sont optionnelles**.\
Les cl√©s API ressemblent √† ceci :
```
dop_v1_1946a92309d6240274519275875bb3cb03c1695f60d47eaa1532916502361836
```
L'outil cli est [**doctl**](https://github.com/digitalocean/doctl#installing-doctl). Initialisez-le (vous avez besoin d'un jeton) avec :
```bash
doctl auth init # Asks for the token
doctl auth init --context my-context # Login with a different token
doctl auth list # List accounts
```
Par d√©faut, ce jeton sera √©crit en texte clair sur Mac dans `/Users/<username>/Library/Application Support/doctl/config.yaml`.

### Cl√©s d'acc√®s aux Spaces

Ce sont des cl√©s qui donnent **acc√®s aux Spaces** (comme S3 dans AWS ou Storage dans GCP).

Elles sont compos√©es d'un **nom**, d'un **keyid** et d'un **secret**. Un exemple pourrait √™tre :
```
Name: key-example
Keyid: DO00ZW4FABSGZHAABGFX
Secret: 2JJ0CcQZ56qeFzAJ5GFUeeR4Dckarsh6EQSLm87MKlM
```
### OAuth Application

Les applications OAuth peuvent se voir accorder **l'acc√®s √† Digital Ocean**.

Il est possible de **cr√©er des applications OAuth** sur [https://cloud.digitalocean.com/account/api/applications](https://cloud.digitalocean.com/account/api/applications) et de v√©rifier toutes les **applications OAuth autoris√©es** sur [https://cloud.digitalocean.com/account/api/access](https://cloud.digitalocean.com/account/api/access).

### SSH Keys

Il est possible d'ajouter **des cl√©s SSH √† une √©quipe Digital Ocean** depuis la **console** sur [https://cloud.digitalocean.com/account/security](https://cloud.digitalocean.com/account/security).

De cette fa√ßon, si vous cr√©ez un **nouveau droplet, la cl√© SSH sera d√©finie** dessus et vous pourrez **vous connecter via SSH** sans mot de passe (notez que les [cl√©s SSH nouvellement t√©l√©charg√©es ne sont pas d√©finies dans les droplets d√©j√† existants pour des raisons de s√©curit√©](https://docs.digitalocean.com/products/droplets/how-to/add-ssh-keys/to-existing-droplet/)).

### Functions Authentication Token

La fa√ßon **de d√©clencher une fonction via l'API REST** (toujours activ√©e, c'est la m√©thode utilis√©e par le cli) est de d√©clencher une requ√™te avec un **jeton d'authentification** comme :
```bash
curl -X POST "https://faas-lon1-129376a7.doserverless.co/api/v1/namespaces/fn-c100c012-65bf-4040-1230-2183764b7c23/actions/functionname?blocking=true&result=true" \
-H "Content-Type: application/json" \
-H "Authorization: Basic MGU0NTczZGQtNjNiYS00MjZlLWI2YjctODk0N2MyYTA2NGQ4OkhwVEllQ2t4djNZN2x6YjJiRmFGc1FERXBySVlWa1lEbUxtRE1aRTludXA1UUNlU2VpV0ZGNjNqWnVhYVdrTFg="
```
## Logs

### User logs

Les **logs d'un utilisateur** peuvent √™tre trouv√©s √† [**https://cloud.digitalocean.com/account/activity**](https://cloud.digitalocean.com/account/activity)

### Team logs

Les **logs d'une √©quipe** peuvent √™tre trouv√©s √† [**https://cloud.digitalocean.com/account/security**](https://cloud.digitalocean.com/account/security)

## References

* [https://docs.digitalocean.com/products/teams/how-to/manage-membership/](https://docs.digitalocean.com/products/teams/how-to/manage-membership/)

{% hint style="success" %}
Learn & practice AWS Hacking:<img src="../../.gitbook/assets/image (1) (1) (1).png" alt="" data-size="line">[**HackTricks Training AWS Red Team Expert (ARTE)**](https://training.hacktricks.xyz/courses/arte)<img src="../../.gitbook/assets/image (1) (1) (1).png" alt="" data-size="line">\
Learn & practice GCP Hacking: <img src="../../.gitbook/assets/image (2).png" alt="" data-size="line">[**HackTricks Training GCP Red Team Expert (GRTE)**<img src="../../.gitbook/assets/image (2).png" alt="" data-size="line">](https://training.hacktricks.xyz/courses/grte)

<details>

<summary>Support HackTricks</summary>

* Check the [**subscription plans**](https://github.com/sponsors/carlospolop)!
* **Join the** üí¨ [**Discord group**](https://discord.gg/hRep4RUj7f) or the [**telegram group**](https://t.me/peass) or **follow** us on **Twitter** üê¶ [**@hacktricks\_live**](https://twitter.com/hacktricks_live)**.**
* **Share hacking tricks by submitting PRs to the** [**HackTricks**](https://github.com/carlospolop/hacktricks) and [**HackTricks Cloud**](https://github.com/carlospolop/hacktricks-cloud) github repos.

</details>
{% endhint %}
