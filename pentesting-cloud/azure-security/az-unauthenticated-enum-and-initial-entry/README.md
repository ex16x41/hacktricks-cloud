# Az - Î‘Î½ÎµÎ¾Î¿Ï…Î¸Î­Î½Ï„Ï‰Ï‚ Enum & Î‘ÏÏ‡Î¹ÎºÎ® Î•Î¯ÏƒÎ¿Î´Î¿Ï‚

{% hint style="success" %}
ÎœÎ¬Î¸ÎµÏ„Îµ & ÎµÎ¾Î±ÏƒÎºÎ·Î¸ÎµÎ¯Ï„Îµ ÏƒÏ„Î¿ Hacking AWS:<img src="/.gitbook/assets/image.png" alt="" data-size="line">[**Î•ÎºÏ€Î±Î¯Î´ÎµÏ…ÏƒÎ· HackTricks AWS Red Team Expert (ARTE)**](https://training.hacktricks.xyz/courses/arte)<img src="/.gitbook/assets/image.png" alt="" data-size="line">\
ÎœÎ¬Î¸ÎµÏ„Îµ & ÎµÎ¾Î±ÏƒÎºÎ·Î¸ÎµÎ¯Ï„Îµ ÏƒÏ„Î¿ Hacking GCP: <img src="/.gitbook/assets/image (2).png" alt="" data-size="line">[**Î•ÎºÏ€Î±Î¯Î´ÎµÏ…ÏƒÎ· HackTricks GCP Red Team Expert (GRTE)**<img src="/.gitbook/assets/image (2).png" alt="" data-size="line">](https://training.hacktricks.xyz/courses/grte)

<details>

<summary>Î¥Ï€Î¿ÏƒÏ„Î·ÏÎ¯Î¾Ï„Îµ Ï„Î¿ HackTricks</summary>

* Î•Î»Î­Î³Î¾Ï„Îµ Ï„Î± [**ÏƒÏ‡Î­Î´Î¹Î± ÏƒÏ…Î½Î´ÏÎ¿Î¼Î®Ï‚**](https://github.com/sponsors/carlospolop)!
* **Î•Î³Î³ÏÎ±Ï†ÎµÎ¯Ï„Îµ** ğŸ’¬ [**ÏƒÏ„Î·Î½ Î¿Î¼Î¬Î´Î± Discord**](https://discord.gg/hRep4RUj7f) Î® ÏƒÏ„Î·Î½ [**Î¿Î¼Î¬Î´Î± telegram**](https://t.me/peass) Î® **Î±ÎºÎ¿Î»Î¿Ï…Î¸Î®ÏƒÏ„Îµ** Î¼Î±Ï‚ ÏƒÏ„Î¿ **Twitter** ğŸ¦ [**@hacktricks\_live**](https://twitter.com/hacktricks\_live)**.**
* **ÎœÎ¿Î¹ÏÎ±ÏƒÏ„ÎµÎ¯Ï„Îµ ÎºÏŒÎ»Ï€Î± Ï‡Î¬ÎºÎµÏ Ï…Ï€Î¿Î²Î¬Î»Î»Î¿Î½Ï„Î±Ï‚ PRs** ÏƒÏ„Î± Î±Ï€Î¿Î¸ÎµÏ„Î®ÏÎ¹Î± [**HackTricks**](https://github.com/carlospolop/hacktricks) ÎºÎ±Î¹ [**HackTricks Cloud**](https://github.com/carlospolop/hacktricks-cloud).

</details>
{% endhint %}

## Azure Tenant

### Î‘Ï€Î±ÏÎ¯Î¸Î¼Î·ÏƒÎ· Tenant

Î¥Ï€Î¬ÏÏ‡Î¿Ï…Î½ Î¼ÎµÏÎ¹ÎºÎ¬ **Î´Î·Î¼ÏŒÏƒÎ¹Î± APIs Ï„Î·Ï‚ Azure** Ï€Î¿Ï… Î±Ï€Î»ÏÏ‚ Î³Î½Ï‰ÏÎ¯Î¶Î¿Î½Ï„Î±Ï‚ Ï„Î¿ **domain Ï„Î¿Ï… tenant** Î­Î½Î±Ï‚ ÎµÏ€Î¹Ï„Î¹Î¸Î­Î¼ÎµÎ½Î¿Ï‚ Î¼Ï€Î¿ÏÎµÎ¯ Î½Î± ÎµÏÎµÏ…Î½Î®ÏƒÎµÎ¹ Î³Î¹Î± Ï€ÎµÏÎ¹ÏƒÏƒÏŒÏ„ÎµÏÎµÏ‚ Ï€Î»Î·ÏÎ¿Ï†Î¿ÏÎ¯ÎµÏ‚ ÏƒÏ‡ÎµÏ„Î¹ÎºÎ¬ Î¼Îµ Î±Ï…Ï„ÏŒÎ½.\
ÎœÏ€Î¿ÏÎµÎ¯Ï„Îµ Î½Î± ÎµÏÎµÏ…Î½Î®ÏƒÎµÏ„Îµ Î±Ï€ÎµÏ…Î¸ÎµÎ¯Î±Ï‚ Ï„Î¿ API Î® Î½Î± Ï‡ÏÎ·ÏƒÎ¹Î¼Î¿Ï€Î¿Î¹Î®ÏƒÎµÏ„Îµ Ï„Î· Î²Î¹Î²Î»Î¹Î¿Î¸Î®ÎºÎ· PowerShell [**AADInternals**](https://github.com/Gerenios)**:**

| API                                                                  | Î Î»Î·ÏÎ¿Ï†Î¿ÏÎ¯ÎµÏ‚                                                                                                                                                                                                                                           | Î£Ï…Î½Î¬ÏÏ„Î·ÏƒÎ· AADInternals                             |
| -------------------------------------------------------------------- | ----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------- | ------------------------------------------------- |
| login.microsoftonline.com/\<domain>/.well-known/openid-configuration | **Î Î»Î·ÏÎ¿Ï†Î¿ÏÎ¯ÎµÏ‚ ÏƒÏÎ½Î´ÎµÏƒÎ·Ï‚**, ÏƒÏ…Î¼Ï€ÎµÏÎ¹Î»Î±Î¼Î²Î±Î½Î¿Î¼Î­Î½Î¿Ï… Ï„Î¿Ï… ID Ï„Î¿Ï… tenant                                                                                                                                                                                     | `Get-AADIntTenantID -Domain <domain>`             |
| autodiscover-s.outlook.com/autodiscover/autodiscover.svc             | **ÎŒÎ»Î± Ï„Î± domains** Ï„Î¿Ï… tenant                                                                                                                                                                                                                       | `Get-AADIntTenantDomains -Domain <domain>`        |
| login.microsoftonline.com/GetUserRealm.srf?login=\<UserName>         | <p><strong>Î Î»Î·ÏÎ¿Ï†Î¿ÏÎ¯ÎµÏ‚ ÏƒÏÎ½Î´ÎµÏƒÎ·Ï‚</strong> Ï„Î¿Ï… tenant, ÏƒÏ…Î¼Ï€ÎµÏÎ¹Î»Î±Î¼Î²Î±Î½Î¿Î¼Î­Î½Î¿Ï… Ï„Î¿Ï… Î¿Î½ÏŒÎ¼Î±Ï„Î¿Ï‚ Ï„Î¿Ï… tenant ÎºÎ±Î¹ Ï„Î¿Ï… domain <strong>Ï„ÏÏ€Î¿Ï… Ï€Î¹ÏƒÏ„Î¿Ï€Î¿Î¯Î·ÏƒÎ·Ï‚.</strong><br>Î‘Î½ Ï„Î¿ <code>NameSpaceType</code> ÎµÎ¯Î½Î±Î¹ <strong><code>Managed</code></strong>, ÏƒÎ·Î¼Î±Î¯Î½ÎµÎ¹ ÏŒÏ„Î¹ Ï‡ÏÎ·ÏƒÎ¹Î¼Î¿Ï€Î¿Î¹ÎµÎ¯Ï„Î±Î¹ Ï„Î¿ <strong>AzureAD</strong>.</p> | `Get-AADIntLoginInformation -UserName <UserName>` |
| login.microsoftonline.com/common/GetCredentialType                   | Î Î»Î·ÏÎ¿Ï†Î¿ÏÎ¯ÎµÏ‚ ÏƒÏÎ½Î´ÎµÏƒÎ·Ï‚, ÏƒÏ…Î¼Ï€ÎµÏÎ¹Î»Î±Î¼Î²Î±Î½Î¿Î¼Î­Î½Ï‰Î½ Ï„Ï‰Î½ **Ï€Î»Î·ÏÎ¿Ï†Î¿ÏÎ¹ÏÎ½ Desktop SSO**                                                                                                                                                                          | `Get-AADIntLoginInformation -UserName <UserName>` |

ÎœÏ€Î¿ÏÎµÎ¯Ï„Îµ Î½Î± ÎµÏÎµÏ…Î½Î®ÏƒÎµÏ„Îµ ÏŒÎ»ÎµÏ‚ Ï„Î¹Ï‚ Ï€Î»Î·ÏÎ¿Ï†Î¿ÏÎ¯ÎµÏ‚ ÎµÎ½ÏŒÏ‚ Azure tenant Î¼Îµ **Î¼ÏŒÎ½Î¿ Î­Î½Î±Î½ ÎµÎ½Ï„Î¿Î»Î® Ï„Î·Ï‚** [**Î²Î¹Î²Î»Î¹Î¿Î¸Î®ÎºÎ·Ï‚ AADInternals**](https://github.com/Gerenios)**:**
```powershell
Invoke-AADIntReconAsOutsider -DomainName corp.onmicrosoft.com | Format-Table
```
Î Î±ÏÎ¬Î´ÎµÎ¹Î³Î¼Î± ÎµÎ¾ÏŒÎ´Î¿Ï… Ï€Î»Î·ÏÎ¿Ï†Î¿ÏÎ¹ÏÎ½ Ï„Î¿Ï… Azure tenant:
```
Tenant brand:       Company Ltd
Tenant name:        company
Tenant id:          1937e3ab-38de-a735-a830-3075ea7e5b39
DesktopSSO enabled: True

Name                           DNS   MX    SPF  Type      STS
----                           ---   --    ---  ----      ---
company.com                   True  True  True  Federated sts.company.com
company.mail.onmicrosoft.com  True  True  True  Managed
company.onmicrosoft.com       True  True  True  Managed
int.company.com              False False False  Managed
```
Î•Î¯Î½Î±Î¹ Î´Ï…Î½Î±Ï„ÏŒÎ½ Î½Î± Ï€Î±ÏÎ±Ï„Î·ÏÎ·Î¸Î¿ÏÎ½ Î»ÎµÏ€Ï„Î¿Î¼Î­ÏÎµÎ¹ÎµÏ‚ ÏƒÏ‡ÎµÏ„Î¹ÎºÎ¬ Î¼Îµ Ï„Î¿ ÏŒÎ½Î¿Î¼Î± Ï„Î¿Ï… ÎµÎ½Î¿Î¹ÎºÎ¹Î±ÏƒÏ„Î®, Ï„Î¿ ID ÎºÎ±Î¹ Ï„Î¿ ÏŒÎ½Î¿Î¼Î± "brand". Î•Ï€Î¹Ï€Î»Î­Î¿Î½, ÎµÎ¼Ï†Î±Î½Î¯Î¶ÎµÏ„Î±Î¹ Î· ÎºÎ±Ï„Î¬ÏƒÏ„Î±ÏƒÎ· Ï„Î¿Ï… Desktop Single Sign-On (SSO), Î³Î½Ï‰ÏƒÏ„ÏŒ ÎºÎ±Î¹ Ï‰Ï‚ [**Seamless SSO**](https://docs.microsoft.com/en-us/azure/active-directory/hybrid/how-to-connect-sso). ÎŒÏ„Î±Î½ ÎµÎ¯Î½Î±Î¹ ÎµÎ½ÎµÏÎ³Î¿Ï€Î¿Î¹Î·Î¼Î­Î½Î¿, Î±Ï…Ï„ÏŒ Ï„Î¿ Ï‡Î±ÏÎ±ÎºÏ„Î·ÏÎ¹ÏƒÏ„Î¹ÎºÏŒ Î´Î¹ÎµÏ…ÎºÎ¿Î»ÏÎ½ÎµÎ¹ Ï„Î¿Î½ Ï€ÏÎ¿ÏƒÎ´Î¹Î¿ÏÎ¹ÏƒÎ¼ÏŒ Ï„Î·Ï‚ Ï€Î±ÏÎ¿Ï…ÏƒÎ¯Î±Ï‚ (enumeration) ÎµÎ½ÏŒÏ‚ ÏƒÏ…Î³ÎºÎµÎºÏÎ¹Î¼Î­Î½Î¿Ï… Ï‡ÏÎ®ÏƒÏ„Î· Î¼Î­ÏƒÎ± ÏƒÏ„Î¿Î½ Î¿ÏÎ³Î±Î½Î¹ÏƒÎ¼ÏŒ-ÏƒÏ„ÏŒÏ‡Î¿.

Î•Ï€Î¹Ï€Î»Î­Î¿Î½, Î· Î­Î¾Î¿Î´Î¿Ï‚ Ï€Î±ÏÎ¿Ï…ÏƒÎ¹Î¬Î¶ÎµÎ¹ Ï„Î± Î¿Î½ÏŒÎ¼Î±Ï„Î± ÏŒÎ»Ï‰Î½ Ï„Ï‰Î½ ÎµÏ€Î±Î»Î·Î¸ÎµÏ…Î¼Î­Î½Ï‰Î½ Ï„Î¿Î¼Î­Ï‰Î½ Ï€Î¿Ï… ÏƒÏ‡ÎµÏ„Î¯Î¶Î¿Î½Ï„Î±Î¹ Î¼Îµ Ï„Î¿Î½ ÎµÎ½Î¿Î¹ÎºÎ¹Î±ÏƒÏ„Î®-ÏƒÏ„ÏŒÏ‡Î¿, Î¼Î±Î¶Î¯ Î¼Îµ Ï„Î¿Ï…Ï‚ Î±Î½Ï„Î¯ÏƒÏ„Î¿Î¹Ï‡Î¿Ï…Ï‚ Ï„ÏÏ€Î¿Ï…Ï‚ Ï„Î±Ï…Ï„ÏŒÏ„Î·Ï„Î±Ï‚ Ï„Î¿Ï…Ï‚. Î£Ï„Î·Î½ Ï€ÎµÏÎ¯Ï€Ï„Ï‰ÏƒÎ· Ï„Ï‰Î½ ÎµÎ½Ï‰Î¼Î­Î½Ï‰Î½ Ï„Î¿Î¼Î­Ï‰Î½, Ï„Î¿ Fully Qualified Domain Name (FQDN) Ï„Î¿Ï… Ï€Î±ÏÎ¿Ï‡Î­Î± Ï„Î±Ï…Ï„ÏŒÏ„Î·Ï„Î±Ï‚ Ï€Î¿Ï… Ï‡ÏÎ·ÏƒÎ¹Î¼Î¿Ï€Î¿Î¹ÎµÎ¯Ï„Î±Î¹, ÏƒÏ…Î½Î®Î¸Ï‰Ï‚ Î­Î½Î±Ï‚ Î´Î¹Î±ÎºÎ¿Î¼Î¹ÏƒÏ„Î®Ï‚ ADFS, Î±Ï€Î¿ÎºÎ±Î»ÏÏ€Ï„ÎµÏ„Î±Î¹ ÎµÏ€Î¯ÏƒÎ·Ï‚. Î— ÏƒÏ„Î®Î»Î· "MX" ÎºÎ±Î¸Î¿ÏÎ¯Î¶ÎµÎ¹ ÎµÎ¬Î½ Ï„Î± emails Î´ÏÎ¿Î¼Î¿Î»Î¿Î³Î¿ÏÎ½Ï„Î±Î¹ Ï€ÏÎ¿Ï‚ Ï„Î¿ Exchange Online, ÎµÎ½Ï Î· ÏƒÏ„Î®Î»Î· "SPF" Ï…Ï€Î¿Î´ÎµÎ¹ÎºÎ½ÏÎµÎ¹ Ï„Î·Î½ ÎºÎ±Ï„Î±Ï‡ÏÏÎ¹ÏƒÎ· Ï„Î¿Ï… Exchange Online Ï‰Ï‚ Î±Ï€Î¿ÏƒÏ„Î¿Î»Î­Î± email. Î•Î¯Î½Î±Î¹ ÏƒÎ·Î¼Î±Î½Ï„Î¹ÎºÏŒ Î½Î± ÏƒÎ·Î¼ÎµÎ¹Ï‰Î¸ÎµÎ¯ ÏŒÏ„Î¹ Î· Ï„ÏÎ­Ï‡Î¿Ï…ÏƒÎ± Î»ÎµÎ¹Ï„Î¿Ï…ÏÎ³Î¯Î± Î±Î½Î±Î³Î½ÏÏÎ¹ÏƒÎ·Ï‚ Î´ÎµÎ½ Î±Î½Î±Î»ÏÎµÎ¹ Ï„Î¹Ï‚ Î´Î·Î»ÏÏƒÎµÎ¹Ï‚ "include" Î¼Î­ÏƒÎ± ÏƒÏ„Î± SPF records, Ï€Î¿Ï… Î¼Ï€Î¿ÏÎµÎ¯ Î½Î± Î¿Î´Î·Î³Î®ÏƒÎµÎ¹ ÏƒÎµ ÏˆÎµÏ…Î´ÎµÎ¯Ï‚ Î±ÏÎ½Î·Ï„Î¹ÎºÎ­Ï‚ Î±Ï€Î±Î½Ï„Î®ÏƒÎµÎ¹Ï‚.

### Î‘Ï€Î±ÏÎ¯Î¸Î¼Î·ÏƒÎ· Î§ÏÎ·ÏƒÏ„ÏÎ½

Î•Î¯Î½Î±Î¹ Î´Ï…Î½Î±Ï„ÏŒÎ½ Î½Î± **ÎµÎ»ÎµÎ³Ï‡Î¸ÎµÎ¯ ÎµÎ¬Î½ Ï…Ï€Î¬ÏÏ‡ÎµÎ¹ Î­Î½Î± ÏŒÎ½Î¿Î¼Î± Ï‡ÏÎ®ÏƒÏ„Î·** Î¼Î­ÏƒÎ± ÏƒÎµ Î­Î½Î±Î½ ÎµÎ½Î¿Î¹ÎºÎ¹Î±ÏƒÏ„Î®. Î‘Ï…Ï„ÏŒ Ï€ÎµÏÎ¹Î»Î±Î¼Î²Î¬Î½ÎµÎ¹ ÎµÏ€Î¯ÏƒÎ·Ï‚ Ï„Î¿Ï…Ï‚ **Ï‡ÏÎ®ÏƒÏ„ÎµÏ‚ ÎµÏ€Î¹ÏƒÎºÎ­Ï€Ï„ÎµÏ‚**, Ï„Ï‰Î½ Î¿Ï€Î¿Î¯Ï‰Î½ Ï„Î¿ ÏŒÎ½Î¿Î¼Î± Ï‡ÏÎ®ÏƒÏ„Î· Î­Ï‡ÎµÎ¹ Ï„Î· Î¼Î¿ÏÏ†Î®:
```
<email>#EXT#@<tenant name>.onmicrosoft.com
```
Î¤Î¿ email ÎµÎ¯Î½Î±Î¹ Î· Î´Î¹ÎµÏÎ¸Ï…Î½ÏƒÎ· email Ï„Î¿Ï… Ï‡ÏÎ®ÏƒÏ„Î· ÏŒÏ€Î¿Ï… Ï„Î¿ "@" Î±Î½Ï„Î¹ÎºÎ±Î¸Î¯ÏƒÏ„Î±Ï„Î±Î¹ Î¼Îµ Ï„Î¿ Ï…Ï€Î¿ÎºÎ¬Ï„Ï‰ Ï€Î±ÏÎ»Î± "_".

ÎœÎµ Ï„Î¿ [**AADInternals**](https://github.com/Gerenios/AADInternals), Î¼Ï€Î¿ÏÎµÎ¯Ï„Îµ ÎµÏÎºÎ¿Î»Î± Î½Î± ÎµÎ»Î­Î³Î¾ÎµÏ„Îµ ÎµÎ¬Î½ Î¿ Ï‡ÏÎ®ÏƒÏ„Î·Ï‚ Ï…Ï€Î¬ÏÏ‡ÎµÎ¹ Î® ÏŒÏ‡Î¹:
```powershell
# Check does the user exist
Invoke-AADIntUserEnumerationAsOutsider -UserName "user@company.com"
```
## Unauthenticated Enumeration and Initial Entry

### Introduction

In this section, we will cover the techniques used for unauthenticated enumeration and gaining initial access to Azure environments. Unauthenticated enumeration involves gathering information about the target Azure environment without the need for valid credentials. This information can then be used to identify potential entry points for further exploitation.

### Tools and Techniques

#### Azure AD Connect

Azure AD Connect is a tool used to synchronize on-premises directories with Azure AD. By querying the Azure AD Connect server, an attacker can gather information about users, groups, and other directory objects without authentication.

#### Azure Resource Manager

Azure Resource Manager provides a REST API for managing Azure resources. An attacker can query the API to gather information about resource groups, virtual machines, storage accounts, and other resources without authentication.

#### Azure DNS

Azure DNS is a cloud-based DNS service that can be used to host domain names within Azure. By querying Azure DNS servers, an attacker can gather information about domain names and DNS records without authentication.

### Conclusion

Unauthenticated enumeration is a critical step in the reconnaissance phase of a penetration test. By gathering information about the target Azure environment without authentication, an attacker can identify potential vulnerabilities and entry points for further exploitation. It is important for organizations to regularly assess their Azure environments for security weaknesses and take steps to mitigate any potential risks.
```
UserName         Exists
--------         ------
user@company.com True
```
ÎœÏ€Î¿ÏÎµÎ¯Ï„Îµ ÎµÏ€Î¯ÏƒÎ·Ï‚ Î½Î± Ï‡ÏÎ·ÏƒÎ¹Î¼Î¿Ï€Î¿Î¹Î®ÏƒÎµÏ„Îµ Î­Î½Î± Î±ÏÏ‡ÎµÎ¯Î¿ ÎºÎµÎ¹Î¼Î­Î½Î¿Ï… Ï€Î¿Ï… Ï€ÎµÏÎ¹Î­Ï‡ÎµÎ¹ Î¼Î¹Î± Î´Î¹ÎµÏÎ¸Ï…Î½ÏƒÎ· email Î±Î½Î¬ Î³ÏÎ±Î¼Î¼Î®:
```
user@company.com
user2@company.com
admin@company.com
admin2@company.com
external.user_gmail.com#EXT#@company.onmicrosoft.com
external.user_outlook.com#EXT#@company.onmicrosoft.com
```

```powershell
# Invoke user enumeration
Get-Content .\users.txt | Invoke-AADIntUserEnumerationAsOutsider -Method Normal
```
Î¥Ï€Î¬ÏÏ‡Î¿Ï…Î½ **Ï„ÏÎµÎ¹Ï‚ Î´Î¹Î±Ï†Î¿ÏÎµÏ„Î¹ÎºÎ­Ï‚ Î¼ÎµÎ¸ÏŒÎ´Î¿Î¹ Î±Ï€Î±ÏÎ¯Î¸Î¼Î·ÏƒÎ·Ï‚** Î½Î± ÎµÏ€Î¹Î»Î­Î¾ÎµÏ„Îµ:

| ÎœÎ­Î¸Î¿Î´Î¿Ï‚   | Î ÎµÏÎ¹Î³ÏÎ±Ï†Î®                                                                                                                                                                                             |
| --------- | ------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------- |
| ÎšÎ±Î½Î¿Î½Î¹ÎºÎ®  | Î‘Î½Î±Ï†Î­ÏÎµÏ„Î±Î¹ ÏƒÏ„Î¿ API GetCredentialType Ï€Î¿Ï… Î±Î½Î±Ï†Î­ÏÎ¸Î·ÎºÎµ Ï€Î±ÏÎ±Ï€Î¬Î½Ï‰. Î— Ï€ÏÎ¿ÎµÏ€Î¹Î»ÎµÎ³Î¼Î­Î½Î· Î¼Î­Î¸Î¿Î´Î¿Ï‚.                                                                                                                           |
| Î£ÏÎ½Î´ÎµÏƒÎ·   | <p>Î‘Ï…Ï„Î® Î· Î¼Î­Î¸Î¿Î´Î¿Ï‚ Ï€ÏÎ¿ÏƒÏ€Î±Î¸ÎµÎ¯ Î½Î± ÏƒÏ…Î½Î´ÎµÎ¸ÎµÎ¯ Ï‰Ï‚ Î¿ Ï‡ÏÎ®ÏƒÏ„Î·Ï‚.<br><strong>Î£Î·Î¼ÎµÎ¯Ï‰ÏƒÎ·:</strong> Î¿Î¹ ÎµÏÏ‰Ï„Î®ÏƒÎµÎ¹Ï‚ Î¸Î± ÎºÎ±Ï„Î±Î³ÏÎ±Ï†Î¿ÏÎ½ ÏƒÏ„Î¿ Î±ÏÏ‡ÎµÎ¯Î¿ ÎºÎ±Ï„Î±Î³ÏÎ±Ï†Î®Ï‚ ÏƒÏ…Î½Î´Î­ÏƒÎµÏ‰Î½.</p>                                                                                       |
| Î‘Ï…Ï„ÏŒÎ¼Î±Ï„Î· Î£ÏÎ½Î´ÎµÏƒÎ· | <p>Î‘Ï…Ï„Î® Î· Î¼Î­Î¸Î¿Î´Î¿Ï‚ Ï€ÏÎ¿ÏƒÏ€Î±Î¸ÎµÎ¯ Î½Î± ÏƒÏ…Î½Î´ÎµÎ¸ÎµÎ¯ Ï‰Ï‚ Î¿ Ï‡ÏÎ®ÏƒÏ„Î·Ï‚ Î¼Î­ÏƒÏ‰ Ï„Î·Ï‚ Î±Ï…Ï„ÏŒÎ¼Î±Ï„Î·Ï‚ ÏƒÏÎ½Î´ÎµÏƒÎ·Ï‚.<br><strong>ÎŸÎ¹ ÎµÏÏ‰Ï„Î®ÏƒÎµÎ¹Ï‚ Î´ÎµÎ½ ÎºÎ±Ï„Î±Î³ÏÎ¬Ï†Î¿Î½Ï„Î±Î¹</strong> ÏƒÏ„Î¿ Î±ÏÏ‡ÎµÎ¯Î¿ ÎºÎ±Ï„Î±Î³ÏÎ±Ï†Î®Ï‚ ÏƒÏ…Î½Î´Î­ÏƒÎµÏ‰Î½! Î©Ï‚ ÎµÎº Ï„Î¿ÏÏ„Î¿Ï…, Î»ÎµÎ¹Ï„Î¿Ï…ÏÎ³ÎµÎ¯ ÎµÏ€Î¯ÏƒÎ·Ï‚ ÎºÎ±Î»Î¬ Î³Î¹Î± ÎµÏ€Î¹Î¸Î­ÏƒÎµÎ¹Ï‚ ÏˆÎµÎºÎ±ÏƒÎ¼Î¿Ï ÎºÏ‰Î´Î¹ÎºÏÎ½ ÎºÎ±Î¹ ÎµÏ€Î¹Î¸Î­ÏƒÎµÎ¹Ï‚ Î¼Îµ Î²Î¯Î±.</p> |

Î‘Ï†Î¿Ï Î±Î½Î±ÎºÎ±Î»ÏÏˆÎµÏ„Îµ Ï„Î± Î­Î³ÎºÏ…ÏÎ± Î¿Î½ÏŒÎ¼Î±Ï„Î± Ï‡ÏÎ·ÏƒÏ„ÏÎ½ Î¼Ï€Î¿ÏÎµÎ¯Ï„Îµ Î½Î± Î»Î¬Î²ÎµÏ„Îµ **Ï€Î»Î·ÏÎ¿Ï†Î¿ÏÎ¯ÎµÏ‚ ÏƒÏ‡ÎµÏ„Î¹ÎºÎ¬ Î¼Îµ Î­Î½Î±Î½ Ï‡ÏÎ®ÏƒÏ„Î·** Î¼Îµ:
```powershell
Get-AADIntLoginInformation -UserName root@corp.onmicrosoft.com
```
Î¤Î¿ script [**o365creeper**](https://github.com/LMGsec/o365creeper) ÏƒÎ±Ï‚ ÎµÏ€Î¹Ï„ÏÎ­Ï€ÎµÎ¹ ÎµÏ€Î¯ÏƒÎ·Ï‚ Î½Î± Î±Î½Î±ÎºÎ±Î»ÏÏˆÎµÏ„Îµ **Î±Î½ Î­Î½Î± email ÎµÎ¯Î½Î±Î¹ Î­Î³ÎºÏ…ÏÎ¿**.
```powershell
# Put in emails.txt emails such as:
# - root@corp.onmicrosoft.com
python.exe .\o365creeper\o365creeper.py -f .\emails.txt -o validemails.txt
```
**Î‘Ï€Î±ÏÎ¯Î¸Î¼Î·ÏƒÎ· Î§ÏÎ·ÏƒÏ„ÏÎ½ Î¼Î­ÏƒÏ‰ Ï„Î¿Ï… Microsoft Teams**

ÎœÎ¹Î± Î¬Î»Î»Î· ÎºÎ±Î»Î® Ï€Î·Î³Î® Ï€Î»Î·ÏÎ¿Ï†Î¿ÏÎ¹ÏÎ½ ÎµÎ¯Î½Î±Î¹ Ï„Î¿ Microsoft Teams.

Î¤Î¿ API Ï„Î¿Ï… Microsoft Teams ÎµÏ€Î¹Ï„ÏÎ­Ï€ÎµÎ¹ Ï„Î·Î½ Î±Î½Î±Î¶Î®Ï„Î·ÏƒÎ· Ï‡ÏÎ·ÏƒÏ„ÏÎ½. Î£Ï…Î³ÎºÎµÎºÏÎ¹Î¼Î­Î½Î±, Ï„Î± ÏƒÎ·Î¼ÎµÎ¯Î± Ï€ÏÏŒÏƒÎ²Î±ÏƒÎ·Ï‚ "ÎµÎ¾Ï‰Ï„ÎµÏÎ¹ÎºÎ® Î±Î½Î±Î¶Î®Ï„Î·ÏƒÎ·v3" ÎºÎ±Î¹ "searchUsers" Î¼Ï€Î¿ÏÎ¿ÏÎ½ Î½Î± Ï‡ÏÎ·ÏƒÎ¹Î¼Î¿Ï€Î¿Î¹Î·Î¸Î¿ÏÎ½ Î³Î¹Î± Î½Î± Î¶Î·Ï„Î·Î¸Î¿ÏÎ½ Î³ÎµÎ½Î¹ÎºÎ­Ï‚ Ï€Î»Î·ÏÎ¿Ï†Î¿ÏÎ¯ÎµÏ‚ ÏƒÏ‡ÎµÏ„Î¹ÎºÎ¬ Î¼Îµ Î»Î¿Î³Î±ÏÎ¹Î±ÏƒÎ¼Î¿ÏÏ‚ Ï‡ÏÎ·ÏƒÏ„ÏÎ½ Ï€Î¿Ï… ÎµÎ¯Î½Î±Î¹ ÎµÎ³Î³ÎµÎ³ÏÎ±Î¼Î¼Î­Î½Î¿Î¹ ÏƒÏ„Î¿ Teams.

Î‘Î½Î¬Î»Î¿Î³Î± Î¼Îµ Ï„Î·Î½ Î±Ï€Î¬Î½Ï„Î·ÏƒÎ· Ï„Î¿Ï… API, ÎµÎ¯Î½Î±Î¹ Î´Ï…Î½Î±Ï„ÏŒ Î½Î± Î´Î¹Î±ÎºÏÎ¹Î¸ÎµÎ¯ Î¼ÎµÏ„Î±Î¾Ï Î¼Î· Ï…Ï€Î±ÏÎºÏ„ÏÎ½ Ï‡ÏÎ·ÏƒÏ„ÏÎ½ ÎºÎ±Î¹ Ï…Ï€Î±ÏÎºÏ„ÏÎ½ Ï‡ÏÎ·ÏƒÏ„ÏÎ½ Ï€Î¿Ï… Î­Ï‡Î¿Ï…Î½ Î­Î³ÎºÏ…ÏÎ· ÏƒÏ…Î½Î´ÏÎ¿Î¼Î® ÏƒÏ„Î¿ Teams.

Î¤Î¿ ÏƒÎµÎ½Î¬ÏÎ¹Î¿ [**TeamsEnum**](https://github.com/sse-secure-systems/TeamsEnum) Î¼Ï€Î¿ÏÎµÎ¯ Î½Î± Ï‡ÏÎ·ÏƒÎ¹Î¼Î¿Ï€Î¿Î¹Î·Î¸ÎµÎ¯ Î³Î¹Î± Ï„Î·Î½ ÎµÏ€Î¹ÎºÏÏÏ‰ÏƒÎ· ÎµÎ½ÏŒÏ‚ ÏƒÏ…Î³ÎºÎµÎºÏÎ¹Î¼Î­Î½Î¿Ï… ÏƒÏ…Î½ÏŒÎ»Î¿Ï… Î¿Î½Î¿Î¼Î¬Ï„Ï‰Î½ Ï‡ÏÎ·ÏƒÏ„ÏÎ½ Î­Î½Î±Î½Ï„Î¹ Ï„Î¿Ï… API Ï„Î¿Ï… Teams.
```bash
python3 TeamsEnum.py -a password -u <username> -f inputlist.txt -o teamsenum-output.json
```
## Unauthenticated Enumeration and Initial Entry

### Introduction

In this section, we will cover the techniques used to perform unauthenticated enumeration and gain initial access to Azure environments. Unauthenticated enumeration involves gathering information without the need for valid credentials, which can help in identifying potential entry points for further exploitation.

### Enumeration Techniques

1. **DNS Enumeration**: Discovering subdomains and associated IP addresses using tools like `dnsrecon` or `sublist3r`.
   
2. **Service Enumeration**: Identifying open ports and services running on those ports using tools like `nmap` or `masscan`.
   
3. **Web Enumeration**: Enumerating web applications for common vulnerabilities like misconfigurations or outdated software versions.
   
4. **Storage Account Enumeration**: Identifying publicly accessible storage accounts that may contain sensitive data.

### Initial Entry Points

Once potential entry points are identified through enumeration, attackers can exploit vulnerabilities to gain initial access to the Azure environment. This could involve techniques such as:

- **Brute Force Attacks**: Attempting to guess valid credentials for services like SSH or RDP.
  
- **Phishing Attacks**: Sending malicious emails to trick users into revealing their credentials.
  
- **Exploiting Misconfigurations**: Taking advantage of misconfigured services or applications to gain unauthorized access.

By understanding these techniques, security professionals can better protect Azure environments from unauthorized access and potential data breaches.
```
[-] user1@domain - Target user not found. Either the user does not exist, is not Teams-enrolled or is configured to not appear in search results (personal accounts only)
[+] user2@domain - User2 | Company (Away, Mobile)
[+] user3@domain - User3 | Company (Available, Desktop)
```
Î•Ï€Î¹Ï€Î»Î­Î¿Î½, ÎµÎ¯Î½Î±Î¹ Î´Ï…Î½Î±Ï„ÏŒÎ½ Î½Î± Î±Ï€Î±ÏÎ¹Î¸Î¼Î·Î¸Î¿ÏÎ½ Ï€Î»Î·ÏÎ¿Ï†Î¿ÏÎ¯ÎµÏ‚ Î´Î¹Î±Î¸ÎµÏƒÎ¹Î¼ÏŒÏ„Î·Ï„Î±Ï‚ ÏƒÏ‡ÎµÏ„Î¹ÎºÎ¬ Î¼Îµ Ï…Ï€Î¬ÏÏ‡Î¿Î½Ï„ÎµÏ‚ Ï‡ÏÎ®ÏƒÏ„ÎµÏ‚ ÏŒÏ€Ï‰Ï‚ Ï„Î± Ï€Î±ÏÎ±ÎºÎ¬Ï„Ï‰:

- Î”Î¹Î±Î¸Î­ÏƒÎ¹Î¼Î¿Ï‚
- ÎœÎ±ÎºÏÎ¹Î¬
- ÎœÎ·Î½ Î•Î½Î¿Ï‡Î»ÎµÎ¯Ï„Îµ
- Î‘Ï€Î±ÏƒÏ‡Î¿Î»Î·Î¼Î­Î½Î¿Ï‚
- Î•ÎºÏ„ÏŒÏ‚ ÏƒÏÎ½Î´ÎµÏƒÎ·Ï‚

Î•Î¬Î½ Î­Ï‡ÎµÎ¹ ÏÏ…Î¸Î¼Î¹ÏƒÏ„ÎµÎ¯ Î­Î½Î± **Î¼Î®Î½Ï…Î¼Î± ÎµÎºÏ„ÏŒÏ‚ Î³ÏÎ±Ï†ÎµÎ¯Î¿Ï…**, ÎµÎ¯Î½Î±Î¹ ÎµÏ€Î¯ÏƒÎ·Ï‚ Î´Ï…Î½Î±Ï„ÏŒ Î½Î± Î±Î½Î±ÎºÏ„Î·Î¸ÎµÎ¯ Ï„Î¿ Î¼Î®Î½Ï…Î¼Î± Ï‡ÏÎ·ÏƒÎ¹Î¼Î¿Ï€Î¿Î¹ÏÎ½Ï„Î±Ï‚ Ï„Î¿ TeamsEnum. Î•Î¬Î½ Î­Ï‡ÎµÎ¹ ÎºÎ±Î¸Î¿ÏÎ¹ÏƒÏ„ÎµÎ¯ Î­Î½Î± Î±ÏÏ‡ÎµÎ¯Î¿ ÎµÎ¾ÏŒÎ´Î¿Ï…, Ï„Î± Î¼Î·Î½ÏÎ¼Î±Ï„Î± ÎµÎºÏ„ÏŒÏ‚ Î³ÏÎ±Ï†ÎµÎ¯Î¿Ï… Î±Ï€Î¿Î¸Î·ÎºÎµÏÎ¿Î½Ï„Î±Î¹ Î±Ï…Ï„ÏŒÎ¼Î±Ï„Î± ÏƒÏ„Î¿ JSON Î±ÏÏ‡ÎµÎ¯Î¿:
```
jq . teamsenum-output.json
```
## Unauthenticated Enumeration and Initial Entry

### Introduction

In this section, we will cover techniques for unauthenticated enumeration and gaining initial access to Azure environments. Unauthenticated enumeration involves gathering information from publicly available sources without the need for authentication. This information can then be used to identify potential entry points into the target Azure environment.

### Tools and Techniques

#### 1. **DNS Enumeration**

DNS enumeration can reveal valuable information about the target Azure environment, such as subdomains and associated IP addresses. Tools like `dnsrecon` and `dnsenum` can be used to perform DNS enumeration.

#### 2. **Subdomain Enumeration**

Discovering subdomains can help identify additional entry points into the Azure environment. Tools like `Sublist3r` and `Amass` can be used to enumerate subdomains.

#### 3. **Open Port Scanning**

Scanning for open ports can reveal services running in the Azure environment. Tools like `Nmap` can be used to scan for open ports and identify potential vulnerabilities.

#### 4. **Web Application Enumeration**

Enumerating web applications can help identify potential entry points for further exploitation. Tools like `Dirb` and `Gobuster` can be used to discover hidden directories and files on web servers.

### Conclusion

Unauthenticated enumeration is a critical phase in the penetration testing process, as it can provide valuable insights into the target Azure environment. By leveraging tools and techniques like DNS enumeration, subdomain enumeration, open port scanning, and web application enumeration, pentesters can gather important information to facilitate further exploitation and penetration testing activities.
```json
{
"email": "user2@domain",
"exists": true,
"info": [
{
"tenantId": "[REDACTED]",
"isShortProfile": false,
"accountEnabled": true,
"featureSettings": {
"coExistenceMode": "TeamsOnly"
},
"userPrincipalName": "user2@domain",
"givenName": "user2@domain",
"surname": "",
"email": "user2@domain",
"tenantName": "Company",
"displayName": "User2",
"type": "Federated",
"mri": "8:orgid:[REDACTED]",
"objectId": "[REDACTED]"
}
],
"presence": [
{
"mri": "8:orgid:[REDACTED]",
"presence": {
"sourceNetwork": "Federated",
"calendarData": {
"outOfOfficeNote": {
"message": "Dear sender. I am out of the office until March 23rd with limited access to my email. I will respond after my return.Kind regards, User2",
"publishTime": "2023-03-15T21:44:42.0649385Z",
"expiry": "2023-04-05T14:00:00Z"
},
"isOutOfOffice": true
},
"capabilities": [
"Audio",
"Video"
],
"availability": "Away",
"activity": "Away",
"deviceType": "Mobile"
},
"etagMatch": false,
"etag": "[REDACTED]",
"status": 20000
}
]
}
```
## Î¥Ï€Î·ÏÎµÏƒÎ¯ÎµÏ‚ Azure

Î“Î½Ï‰ÏÎ¯Î¶Î¿Î½Ï„Î±Ï‚ Ï„ÏÏÎ± Ï„Î¿Ï…Ï‚ **Ï„Î¿Î¼ÎµÎ¯Ï‚ Ï€Î¿Ï… Ï‡ÏÎ·ÏƒÎ¹Î¼Î¿Ï€Î¿Î¹ÎµÎ¯ Î¿ Azure tenant** ÎµÎ¯Î½Î±Î¹ Î· ÏƒÏ„Î¹Î³Î¼Î® Î½Î± Ï€ÏÎ¿ÏƒÏ€Î±Î¸Î®ÏƒÎ¿Ï…Î¼Îµ Î½Î± Î²ÏÎ¿ÏÎ¼Îµ Ï„Î¹Ï‚ **Ï…Ï€Î·ÏÎµÏƒÎ¯ÎµÏ‚ Azure Ï€Î¿Ï… ÎµÎºÏ„Î¯Î¸ÎµÎ½Ï„Î±Î¹**.

ÎœÏ€Î¿ÏÎµÎ¯Ï„Îµ Î½Î± Ï‡ÏÎ·ÏƒÎ¹Î¼Î¿Ï€Î¿Î¹Î®ÏƒÎµÏ„Îµ Î¼Î¹Î± Î¼Î­Î¸Î¿Î´Î¿ Î±Ï€ÏŒ Ï„Î¿ [**MicroBust**](https://github.com/NetSPI/MicroBurst) Î³Î¹Î± Î±Ï…Ï„ÏŒÎ½ Ï„Î¿Î½ ÏƒÎºÎ¿Ï€ÏŒ. Î‘Ï…Ï„Î® Î· Î»ÎµÎ¹Ï„Î¿Ï…ÏÎ³Î¯Î± Î¸Î± Î±Î½Î±Î¶Î·Ï„Î®ÏƒÎµÎ¹ Ï„Î¿ Î²Î±ÏƒÎ¹ÎºÏŒ ÏŒÎ½Î¿Î¼Î± Ï„Î¿Î¼Î­Î± (ÎºÎ±Î¹ Î¼ÎµÏÎ¹ÎºÎ­Ï‚ Ï€Î±ÏÎ±Î»Î»Î±Î³Î­Ï‚) ÏƒÎµ Î´Î¹Î¬Ï†Î¿ÏÎ¿Ï…Ï‚ **Ï„Î¿Î¼ÎµÎ¯Ï‚ Ï…Ï€Î·ÏÎµÏƒÎ¹ÏÎ½ Azure:**
```powershell
Import-Module .\MicroBurst\MicroBurst.psm1 -Verbose
Invoke-EnumerateAzureSubDomains -Base corp -Verbose
```
## Î‘Î½Î¿Î¹Ï‡Ï„Î® Î‘Ï€Î¿Î¸Î®ÎºÎµÏ…ÏƒÎ·

ÎœÏ€Î¿ÏÎµÎ¯Ï„Îµ Î½Î± Î±Î½Î±ÎºÎ±Î»ÏÏˆÎµÏ„Îµ Î±Î½Î¿Î¹Ï‡Ï„Î­Ï‚ Î±Ï€Î¿Î¸Î·ÎºÎµÏÏƒÎµÎ¹Ï‚ Î¼Îµ Î­Î½Î± ÎµÏÎ³Î±Î»ÎµÎ¯Î¿ ÏŒÏ€Ï‰Ï‚ Ï„Î¿ [**InvokeEnumerateAzureBlobs.ps1**](https://github.com/NetSPI/MicroBurst/blob/master/Misc/Invoke-EnumerateAzureBlobs.ps1) Ï„Î¿ Î¿Ï€Î¿Î¯Î¿ Î¸Î± Ï‡ÏÎ·ÏƒÎ¹Î¼Î¿Ï€Î¿Î¹Î®ÏƒÎµÎ¹ Ï„Î¿ Î±ÏÏ‡ÎµÎ¯Î¿ **`Microburst/Misc/permitations.txt`** Î³Î¹Î± Ï„Î· Î´Î·Î¼Î¹Î¿Ï…ÏÎ³Î¯Î± Ï€ÎµÏÎ¹Ï€Ï„ÏÏƒÎµÏ‰Î½ (Ï€Î¿Î»Ï Î±Ï€Î»Î­Ï‚) Ï€ÏÎ¿ÎºÎµÎ¹Î¼Î­Î½Î¿Ï… Î½Î± **ÎµÎ½Ï„Î¿Ï€Î¯ÏƒÎµÎ¹ Î±Î½Î¿Î¹Ï‡Ï„Î¿ÏÏ‚ Î»Î¿Î³Î±ÏÎ¹Î±ÏƒÎ¼Î¿ÏÏ‚ Î±Ï€Î¿Î¸Î®ÎºÎµÏ…ÏƒÎ·Ï‚**.
```powershell
Import-Module .\MicroBurst\MicroBurst.psm1
Invoke-EnumerateAzureBlobs -Base corp
[...]
https://corpcommon.blob.core.windows.net/secrets?restype=container&comp=list
[...]

# Access https://corpcommon.blob.core.windows.net/secrets?restype=container&comp=list
# Check: <Name>ssh_info.json</Name>
# Access then https://corpcommon.blob.core.windows.net/secrets/ssh_info.json
```
### SAS URLs

ÎˆÎ½Î± _**shared access signature**_ (SAS) URL ÎµÎ¯Î½Î±Î¹ Î­Î½Î± URL Ï€Î¿Ï… **Ï€Î±ÏÎ­Ï‡ÎµÎ¹ Ï€ÏÏŒÏƒÎ²Î±ÏƒÎ·** ÏƒÎµ ÏƒÏ…Î³ÎºÎµÎºÏÎ¹Î¼Î­Î½Î¿ Ï„Î¼Î®Î¼Î± ÎµÎ½ÏŒÏ‚ Î»Î¿Î³Î±ÏÎ¹Î±ÏƒÎ¼Î¿Ï Î±Ï€Î¿Î¸Î®ÎºÎµÏ…ÏƒÎ·Ï‚ (Î¼Ï€Î¿ÏÎµÎ¯ Î½Î± ÎµÎ¯Î½Î±Î¹ Î­Î½Î±Ï‚ Î¿Î»ÏŒÎºÎ»Î·ÏÎ¿Ï‚ container, Î­Î½Î± Î±ÏÏ‡ÎµÎ¯Î¿...) Î¼Îµ ÎºÎ¬Ï€Î¿Î¹ÎµÏ‚ ÏƒÏ…Î³ÎºÎµÎºÏÎ¹Î¼Î­Î½ÎµÏ‚ Î¬Î´ÎµÎ¹ÎµÏ‚ (Î±Î½Î¬Î³Î½Ï‰ÏƒÎ·, ÎµÎ³Î³ÏÎ±Ï†Î®...) Ï€Î¬Î½Ï‰ ÏƒÏ„Î¿Ï…Ï‚ Ï€ÏŒÏÎ¿Ï…Ï‚. Î‘Î½ Î²ÏÎµÎ¯Ï„Îµ Î­Î½Î± Î´Î¹Î±ÏÏÎµÏÏƒÎµÎ¹ Î¼Ï€Î¿ÏÎµÎ¯Ï„Îµ Î½Î± Î­Ï‡ÎµÏ„Îµ Ï€ÏÏŒÏƒÎ²Î±ÏƒÎ· ÏƒÎµ ÎµÏ…Î±Î¯ÏƒÎ¸Î·Ï„ÎµÏ‚ Ï€Î»Î·ÏÎ¿Ï†Î¿ÏÎ¯ÎµÏ‚, Î¼Î¿Î¹Î¬Î¶Î¿Ï…Î½ Î¼Îµ Î±Ï…Ï„ÏŒ (Î±Ï…Ï„ÏŒ ÎµÎ¯Î½Î±Î¹ Î³Î¹Î± Ï€ÏÏŒÏƒÎ²Î±ÏƒÎ· ÏƒÎµ Î­Î½Î± container, Î±Î½ Î±Ï€Î»Î¬ Ï‡Î¿ÏÎ·Î³Î¿ÏÏƒÎµ Ï€ÏÏŒÏƒÎ²Î±ÏƒÎ· ÏƒÎµ Î­Î½Î± Î±ÏÏ‡ÎµÎ¯Î¿, Ï„Î¿ Î¼Î¿Î½Î¿Ï€Î¬Ï„Î¹ Ï„Î¿Ï… URL Î¸Î± Ï€ÎµÏÎ¹ÎµÎ¯Ï‡Îµ ÎµÏ€Î¯ÏƒÎ·Ï‚ Î±Ï…Ï„ÏŒ Ï„Î¿ Î±ÏÏ‡ÎµÎ¯Î¿):

`https://<storage_account_name>.blob.core.windows.net/newcontainer?sp=r&st=2021-09-26T18:15:21Z&se=2021-10-27T02:14:21Z&spr=https&sv=2021-07-08&sr=c&sig=7S%2BZySOgy4aA3Dk0V1cJyTSIf1cW%2Fu3WFkhHV32%2B4PE%3D`

Î§ÏÎ·ÏƒÎ¹Î¼Î¿Ï€Î¿Î¹Î®ÏƒÏ„Îµ Ï„Î¿ [**Storage Explorer**](https://azure.microsoft.com/en-us/features/storage-explorer/) Î³Î¹Î± Ï€ÏÏŒÏƒÎ²Î±ÏƒÎ· ÏƒÏ„Î± Î´ÎµÎ´Î¿Î¼Î­Î½Î±

## Compromise Credentials

### Phishing

* [**Common Phishing**](https://book.hacktricks.xyz/generic-methodologies-and-resources/phishing-methodology) (Î´Î¹Î±Ï€ÏÎ±Î³Î¼Î¬Ï„ÎµÏ…ÏƒÎ· Î´Î¹Î±Ï€Î¹ÏƒÏ„ÎµÏ…Ï„Î®ÏƒÎµÏ‰Î½ Î® OAuth App -[Illicit Consent Grant Attack](az-illicit-consent-grant.md)-)
* [**Device Code Authentication** Phishing](az-device-code-authentication-phishing.md)

### Password Spraying / Brute-Force

{% content-ref url="az-password-spraying.md" %}
[az-password-spraying.md](az-password-spraying.md)
{% endcontent-ref %}

## References

* [https://aadinternals.com/post/just-looking/](https://aadinternals.com/post/just-looking/)
* [https://www.securesystems.de/blog/a-fresh-look-at-user-enumeration-in-microsoft-teams/](https://www.securesystems.de/blog/a-fresh-look-at-user-enumeration-in-microsoft-teams/)

{% hint style="success" %}
ÎœÎ¬Î¸ÎµÏ„Îµ & ÎµÎ¾Î±ÏƒÎºÎ·Î¸ÎµÎ¯Ï„Îµ ÏƒÏ„Î¿ Hacking Ï„Î¿Ï… AWS:<img src="/.gitbook/assets/image.png" alt="" data-size="line">[**Î•ÎºÏ€Î±Î¯Î´ÎµÏ…ÏƒÎ· HackTricks AWS Red Team Expert (ARTE)**](https://training.hacktricks.xyz/courses/arte)<img src="/.gitbook/assets/image.png" alt="" data-size="line">\
ÎœÎ¬Î¸ÎµÏ„Îµ & ÎµÎ¾Î±ÏƒÎºÎ·Î¸ÎµÎ¯Ï„Îµ ÏƒÏ„Î¿ Hacking Ï„Î¿Ï… GCP: <img src="/.gitbook/assets/image (2).png" alt="" data-size="line">[**Î•ÎºÏ€Î±Î¯Î´ÎµÏ…ÏƒÎ· HackTricks GCP Red Team Expert (GRTE)**<img src="/.gitbook/assets/image (2).png" alt="" data-size="line">](https://training.hacktricks.xyz/courses/grte)

<details>

<summary>Î¥Ï€Î¿ÏƒÏ„Î·ÏÎ¯Î¾Ï„Îµ Ï„Î¿ HackTricks</summary>

* Î•Î»Î­Î³Î¾Ï„Îµ Ï„Î± [**ÏƒÏ‡Î­Î´Î¹Î± ÏƒÏ…Î½Î´ÏÎ¿Î¼Î®Ï‚**](https://github.com/sponsors/carlospolop)!
* **Î•Î³Î³ÏÎ±Ï†ÎµÎ¯Ï„Îµ** ğŸ’¬ [**ÎŸÎ¼Î¬Î´Î± Discord**](https://discord.gg/hRep4RUj7f) Î® Ï„Î·Î½ [**Î¿Î¼Î¬Î´Î± Ï„Î·Î»ÎµÎ³ÏÎ¬Ï†Î¿Ï…**](https://t.me/peass) Î® **Î±ÎºÎ¿Î»Î¿Ï…Î¸Î®ÏƒÏ„Îµ** Î¼Î±Ï‚ ÏƒÏ„Î¿ **Twitter** ğŸ¦ [**@hacktricks\_live**](https://twitter.com/hacktricks\_live)**.**
* **ÎœÎ¿Î¹ÏÎ±ÏƒÏ„ÎµÎ¯Ï„Îµ ÎºÏŒÎ»Ï€Î± Ï‡Î¬ÎºÎ¹Î½Î³Îº Ï…Ï€Î¿Î²Î¬Î»Î»Î¿Î½Ï„Î±Ï‚ PRs ÏƒÏ„Î±** [**HackTricks**](https://github.com/carlospolop/hacktricks) ÎºÎ±Î¹ [**HackTricks Cloud**](https://github.com/carlospolop/hacktricks-cloud) Î±Ï€Î¿Î¸ÎµÏ„Î®ÏÎ¹Î± ÏƒÏ„Î¿ GitHub.

</details>
{% endhint %}
