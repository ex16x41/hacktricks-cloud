# Az - Device Registration

{% hint style="success" %}
Learn & practice AWS Hacking:<img src="../../.gitbook/assets/image (1).png" alt="" data-size="line">[**HackTricks Training AWS Red Team Expert (ARTE)**](https://training.hacktricks.xyz/courses/arte)<img src="../../.gitbook/assets/image (1).png" alt="" data-size="line">\
Learn & practice GCP Hacking: <img src="../../.gitbook/assets/image (2).png" alt="" data-size="line">[**HackTricks Training GCP Red Team Expert (GRTE)**<img src="../../.gitbook/assets/image (2).png" alt="" data-size="line">](https://training.hacktricks.xyz/courses/grte)

<details>

<summary>Support HackTricks</summary>

* Check the [**subscription plans**](https://github.com/sponsors/carlospolop)!
* **Join the** ЁЯТм [**Discord group**](https://discord.gg/hRep4RUj7f) or the [**telegram group**](https://t.me/peass) or **follow** us on **Twitter** ЁЯРж [**@hacktricks\_live**](https://twitter.com/hacktricks\_live)**.**
* **Share hacking tricks by submitting PRs to the** [**HackTricks**](https://github.com/carlospolop/hacktricks) and [**HackTricks Cloud**](https://github.com/carlospolop/hacktricks-cloud) github repos.

</details>
{% endhint %}

## Basic Information

рдЬрдм рдПрдХ рдбрд┐рд╡рд╛рдЗрд╕ AzureAD рдореЗрдВ рд╢рд╛рдорд┐рд▓ рд╣реЛрддрд╛ рд╣реИ, рддреЛ AzureAD рдореЗрдВ рдПрдХ рдирдпрд╛ рдСрдмреНрдЬреЗрдХреНрдЯ рдмрдирд╛рдпрд╛ рдЬрд╛рддрд╛ рд╣реИред

рдЬрдм рдПрдХ рдбрд┐рд╡рд╛рдЗрд╕ рдХреЛ рд░рдЬрд┐рд╕реНрдЯрд░ рдХрд┐рдпрд╛ рдЬрд╛рддрд╛ рд╣реИ, рддреЛ **рдЙрдкрдпреЛрдЧрдХрд░реНрддрд╛ рд╕реЗ рдЙрд╕рдХреЗ рдЦрд╛рддреЗ рдХреЗ рд╕рд╛рде рд▓реЙрдЧрд┐рди рдХрд░рдиреЗ рдХреЗ рд▓рд┐рдП рдХрд╣рд╛ рдЬрд╛рддрд╛ рд╣реИ** (рдпрджрд┐ рдЖрд╡рд╢реНрдпрдХ рд╣реЛ рддреЛ MFA рдХреЗ рд▓рд┐рдП рдкреВрдЫрддрд╛ рд╣реИ), рдлрд┐рд░ рдпрд╣ рдбрд┐рд╡рд╛рдЗрд╕ рд░рдЬрд┐рд╕реНрдЯреНрд░реЗрд╢рди рд╕реЗрд╡рд╛ рдХреЗ рд▓рд┐рдП рдЯреЛрдХрди рдХрд╛ рдЕрдиреБрд░реЛрдз рдХрд░рддрд╛ рд╣реИ рдФрд░ рдлрд┐рд░ рдЕрдВрддрд┐рдо рдкреБрд╖реНрдЯрд┐ рдкреНрд░реЙрдореНрдкреНрдЯ рдХреЗ рд▓рд┐рдП рдкреВрдЫрддрд╛ рд╣реИред

рдлрд┐рд░, рдбрд┐рд╡рд╛рдЗрд╕ рдореЗрдВ рджреЛ RSA рдХреА рдЬреЛрдбрд╝реЗ рдЙрддреНрдкрдиреНрди рд╣реЛрддреЗ рд╣реИрдВ: **рдбрд┐рд╡рд╛рдЗрд╕ рдХреА** (**рд╕рд╛рд░реНрд╡рдЬрдирд┐рдХ** рдХреБрдВрдЬреА) рдЬрд┐рд╕реЗ **AzureAD** рдХреЛ рднреЗрдЬрд╛ рдЬрд╛рддрд╛ рд╣реИ рдФрд░ **рдкрд░рд┐рд╡рд╣рди** рдХреБрдВрдЬреА (**рдирд┐рдЬреА** рдХреБрдВрдЬреА) рдЬрд┐рд╕реЗ рдпрджрд┐ рд╕рдВрднрд╡ рд╣реЛ рддреЛ TPM рдореЗрдВ рд╕рдВрдЧреНрд░рд╣реАрдд рдХрд┐рдпрд╛ рдЬрд╛рддрд╛ рд╣реИред

рдлрд┐рд░, **рдСрдмреНрдЬреЗрдХреНрдЯ** **AzureAD** рдореЗрдВ рдЙрддреНрдкрдиреНрди рд╣реЛрддрд╛ рд╣реИ (Intune рдореЗрдВ рдирд╣реАрдВ) рдФрд░ AzureAD рдбрд┐рд╡рд╛рдЗрд╕ рдХреЛ рдПрдХ **рдкреНрд░рдорд╛рдгрдкрддреНрд░** рд╡рд╛рдкрд╕ рджреЗрддрд╛ рд╣реИ рдЬреЛ рдЗрд╕рдХреЗ рджреНрд╡рд╛рд░рд╛ рд╣рд╕реНрддрд╛рдХреНрд╖рд░рд┐рдд рд╣реЛрддрд╛ рд╣реИред рдЖрдк рдпрд╣ рдЬрд╛рдВрдЪ рд╕рдХрддреЗ рд╣реИрдВ рдХрд┐ **рдбрд┐рд╡рд╛рдЗрд╕ AzureAD рд╕реЗ рдЬреБрдбрд╝рд╛ рд╣реИ** рдФрд░ **рдкреНрд░рдорд╛рдгрдкрддреНрд░** рдХреЗ рдмрд╛рд░реЗ рдореЗрдВ рдЬрд╛рдирдХрд╛рд░реА (рдЬреИрд╕реЗ рдХрд┐ рдХреНрдпрд╛ рдпрд╣ TPM рджреНрд╡рд╛рд░рд╛ рд╕реБрд░рдХреНрд╖рд┐рдд рд╣реИ)ред
```bash
dsregcmd /status
```
рдбрд┐рд╡рд╛рдЗрд╕ рдкрдВрдЬреАрдХрд░рдг рдХреЗ рдмрд╛рдж, **рдкреНрд░рд╛рдердорд┐рдХ рд░рд┐рдлреНрд░реЗрд╢ рдЯреЛрдХрди** LSASS CloudAP рдореЙрдбреНрдпреВрд▓ рджреНрд╡рд╛рд░рд╛ рдЕрдиреБрд░реЛрдз рдХрд┐рдпрд╛ рдЬрд╛рддрд╛ рд╣реИ рдФрд░ рдбрд┐рд╡рд╛рдЗрд╕ рдХреЛ рджрд┐рдпрд╛ рдЬрд╛рддрд╛ рд╣реИред PRT рдХреЗ рд╕рд╛рде **рд╕рддреНрд░ рдХреБрдВрдЬреА рднреА рдПрдиреНрдХреНрд░рд┐рдкреНрдЯ рдХреА рдЬрд╛рддреА рд╣реИ рддрд╛рдХрд┐ рдХреЗрд╡рд▓ рдбрд┐рд╡рд╛рдЗрд╕ рдЗрд╕реЗ рдбрд┐рдХреНрд░рд┐рдкреНрдЯ рдХрд░ рд╕рдХреЗ** (рдкрд░рд┐рд╡рд╣рди рдХреБрдВрдЬреА рдХреЗ рд╕рд╛рд░реНрд╡рдЬрдирд┐рдХ рдХреБрдВрдЬреА рдХрд╛ рдЙрдкрдпреЛрдЧ рдХрд░рдХреЗ) рдФрд░ рдЗрд╕реЗ **PRT рдХрд╛ рдЙрдкрдпреЛрдЧ рдХрд░рдиреЗ рдХреЗ рд▓рд┐рдП рдЖрд╡рд╢реНрдпрдХ рд╣реИред**

PRT рдХреНрдпрд╛ рд╣реИ, рдЗрд╕рдХреЗ рдмрд╛рд░реЗ рдореЗрдВ рдЕрдзрд┐рдХ рдЬрд╛рдирдХрд╛рд░реА рдХреЗ рд▓рд┐рдП рджреЗрдЦреЗрдВ:

{% content-ref url="az-lateral-movement-cloud-on-prem/az-primary-refresh-token-prt.md" %}
[az-primary-refresh-token-prt.md](az-lateral-movement-cloud-on-prem/az-primary-refresh-token-prt.md)
{% endcontent-ref %}

### TPM - рдЯреНрд░рд╕реНрдЯреЗрдб рдкреНрд▓реЗрдЯрдлреЙрд░реНрдо рдореЙрдбреНрдпреВрд▓

**TPM** **рдХреБрдВрдЬреА** **рдирд┐рдХрд╛рд╕реА** рдХреЗ рдЦрд┐рд▓рд╛рдл рдПрдХ рдмрдВрдж рдбрд┐рд╡рд╛рдЗрд╕ (рдпрджрд┐ PIN рджреНрд╡рд╛рд░рд╛ рд╕реБрд░рдХреНрд╖рд┐рдд рд╣реИ) рд╕реЗ рдФрд░ OS рдкрд░рдд рд╕реЗ рдирд┐рдЬреА рд╕рд╛рдордЧреНрд░реА рдирд┐рдХрд╛рд▓рдиреЗ рдХреЗ рдЦрд┐рд▓рд╛рдл **рд╕реБрд░рдХреНрд╖рд╛** рдХрд░рддрд╛ рд╣реИред\
рд▓реЗрдХрд┐рди рдпрд╣ **TPM рдФрд░ CPU рдХреЗ рдмреАрдЪ рднреМрддрд┐рдХ рдХрдиреЗрдХреНрд╢рди рдХреА **рд╕реНрдирд┐рдлрд┐рдВрдЧ** рдХреЗ рдЦрд┐рд▓рд╛рдл **рд╕реБрд░рдХреНрд╖рд╛** рдирд╣реАрдВ рдХрд░рддрд╛ рд╣реИ рдпрд╛ **SYSTEM** рдЕрдзрд┐рдХрд╛рд░реЛрдВ рд╡рд╛рд▓реЗ рдПрдХ рдкреНрд░рдХреНрд░рд┐рдпрд╛ рд╕реЗ рд╕рд┐рд╕реНрдЯрдо рдЪрд▓рдиреЗ рдХреЗ рджреМрд░рд╛рди TPM рдореЗрдВ **рдХреНрд░рд┐рдкреНрдЯреЛрдЧреНрд░рд╛рдлрд┐рдХ рд╕рд╛рдордЧреНрд░реА** рдХрд╛ рдЙрдкрдпреЛрдЧ рдХрд░рдиреЗ рдХреЗ рдЦрд┐рд▓рд╛рдл **рд╕реБрд░рдХреНрд╖рд╛** рдирд╣реАрдВ рдХрд░рддрд╛ рд╣реИред

рдпрджрд┐ рдЖрдк рдирд┐рдореНрдирд▓рд┐рдЦрд┐рдд рдкреГрд╖реНрда рдХреА рдЬрд╛рдВрдЪ рдХрд░рддреЗ рд╣реИрдВ, рддреЛ рдЖрдк рджреЗрдЦреЗрдВрдЧреЗ рдХрд┐ **PRT рдЪреБрд░рд╛рдирд╛** **рдЙрдкрдпреЛрдЧрдХрд░реНрддрд╛** рдХреЗ рд░реВрдк рдореЗрдВ рдкрд╣реБрдВрдЪ рдкреНрд░рд╛рдкреНрдд рдХрд░рдиреЗ рдХреЗ рд▓рд┐рдП рдЙрдкрдпреЛрдЧ рдХрд┐рдпрд╛ рдЬрд╛ рд╕рдХрддрд╛ рд╣реИ, рдЬреЛ рд╢рд╛рдирджрд╛рд░ рд╣реИ рдХреНрдпреЛрдВрдХрд┐ **PRT рдбрд┐рд╡рд╛рдЗрд╕ рдореЗрдВ рд╕реНрдерд┐рдд рд╣реИ**, рдЗрд╕рд▓рд┐рдП рдЗрд╕реЗ рдЙрдирд╕реЗ рдЪреБрд░рд╛рдпрд╛ рдЬрд╛ рд╕рдХрддрд╛ рд╣реИ (рдпрд╛ рдпрджрд┐ рдЪреБрд░рд╛рдпрд╛ рдирд╣реАрдВ рдЧрдпрд╛ рддреЛ рдирдП рд╕рд╛рдЗрдирд┐рдВрдЧ рдХреБрдВрдЬреА рдЙрддреНрдкрдиреНрди рдХрд░рдиреЗ рдХреЗ рд▓рд┐рдП рджреБрд░реБрдкрдпреЛрдЧ рдХрд┐рдпрд╛ рдЬрд╛ рд╕рдХрддрд╛ рд╣реИ):

{% content-ref url="az-lateral-movement-cloud-on-prem/pass-the-prt.md" %}
[pass-the-prt.md](az-lateral-movement-cloud-on-prem/pass-the-prt.md)
{% endcontent-ref %}

## SSO рдЯреЛрдХрдиреЛрдВ рдХреЗ рд╕рд╛рде рдбрд┐рд╡рд╛рдЗрд╕ рдкрдВрдЬреАрдХрд░рдг

рдПрдХ рд╣рдорд▓рд╛рд╡рд░ рдХреЗ рд▓рд┐рдП рдпрд╣ рд╕рдВрднрд╡ рд╣реЛрдЧрд╛ рдХрд┐ рд╡рд╣ рд╕рдордЭреМрддрд╛ рдХрд┐рдП рдЧрдП рдбрд┐рд╡рд╛рдЗрд╕ рд╕реЗ Microsoft рдбрд┐рд╡рд╛рдЗрд╕ рдкрдВрдЬреАрдХрд░рдг рд╕реЗрд╡рд╛ рдХреЗ рд▓рд┐рдП рдПрдХ рдЯреЛрдХрди рдЕрдиреБрд░реЛрдз рдХрд░реЗ рдФрд░ рдЗрд╕реЗ рдкрдВрдЬреАрдХреГрдд рдХрд░реЗ:
```bash
# Initialize SSO flow
roadrecon auth prt-init
.\ROADtoken.exe <nonce>

# Request token with PRT with PRT cookie
roadrecon auth -r 01cb2876-7ebd-4aa4-9cc9-d28bd4d359a9 --prt-cookie <cookie>

# Custom pyhton script to register a device (check roadtx)
registerdevice.py
```
рдЬреЛ рдЖрдкрдХреЛ **рдкреНрд░рдорд╛рдгрдкрддреНрд░ рджреЗрдЧрд╛ рдЬрд┐рд╕рдХрд╛ рдЙрдкрдпреЛрдЧ рдЖрдк рднрд╡рд┐рд╖реНрдп рдореЗрдВ PRTs рдХреЗ рд▓рд┐рдП рдкреВрдЫрдиреЗ рдХреЗ рд▓рд┐рдП рдХрд░ рд╕рдХрддреЗ рд╣реИрдВ**ред рдЗрд╕рд▓рд┐рдП рд╕реНрдерд┐рд░рддрд╛ рдмрдирд╛рдП рд░рдЦрдирд╛ рдФрд░ **MFA рдХреЛ рдмрд╛рдпрдкрд╛рд╕ рдХрд░рдирд╛** рдХреНрдпреЛрдВрдХрд┐ рдирдП рдбрд┐рд╡рд╛рдЗрд╕ рдХреЛ рдкрдВрдЬреАрдХреГрдд рдХрд░рдиреЗ рдХреЗ рд▓рд┐рдП рдЙрдкрдпреЛрдЧ рдХрд┐рдпрд╛ рдЧрдпрд╛ рдореВрд▓ PRT рдЯреЛрдХрди **рдкрд╣рд▓реЗ рд╕реЗ рд╣реА MFA рдЕрдиреБрдорддрд┐рдпрд╛рдБ рджреА рдЧрдИ рдереАрдВ**ред

{% hint style="success" %}
рдзреНрдпрд╛рди рджреЗрдВ рдХрд┐ рдЗрд╕ рд╣рдорд▓реЗ рдХреЛ рдХрд░рдиреЗ рдХреЗ рд▓рд┐рдП рдЖрдкрдХреЛ **рдирдП рдЙрдкрдХрд░рдгреЛрдВ рдХреЛ рдкрдВрдЬреАрдХреГрдд рдХрд░рдиреЗ** рдХреА рдЕрдиреБрдорддрд┐ рдХреА рдЖрд╡рд╢реНрдпрдХрддрд╛ рд╣реЛрдЧреАред рдЗрд╕рдХреЗ рдЕрд▓рд╛рд╡рд╛, рдПрдХ рдЙрдкрдХрд░рдг рдХреЛ рдкрдВрдЬреАрдХреГрдд рдХрд░рдирд╛ рдпрд╣ рдирд╣реАрдВ рджрд░реНрд╢рд╛рддрд╛ рдХрд┐ рдЙрдкрдХрд░рдг **Intune рдореЗрдВ рдирд╛рдорд╛рдВрдХрд┐рдд рд╣реЛрдиреЗ рдХреА рдЕрдиреБрдорддрд┐ рджреА рдЬрд╛рдПрдЧреА**ред
{% endhint %}

{% hint style="danger" %}
рдпрд╣ рд╣рдорд▓рд╛ рд╕рд┐рддрдВрдмрд░ 2021 рдореЗрдВ рдареАрдХ рдХрд┐рдпрд╛ рдЧрдпрд╛ рдерд╛ рдХреНрдпреЛрдВрдХрд┐ рдЖрдк рдЕрдм SSO рдЯреЛрдХрдиреЛрдВ рдХрд╛ рдЙрдкрдпреЛрдЧ рдХрд░рдХреЗ рдирдП рдЙрдкрдХрд░рдгреЛрдВ рдХреЛ рдкрдВрдЬреАрдХреГрдд рдирд╣реАрдВ рдХрд░ рд╕рдХрддреЗред рд╣рд╛рд▓рд╛рдБрдХрд┐, рдПрдХ рд╡реИрдз рддрд░реАрдХреЗ рд╕реЗ рдЙрдкрдХрд░рдгреЛрдВ рдХреЛ рдкрдВрдЬреАрдХреГрдд рдХрд░рдирд╛ рдЕрднреА рднреА рд╕рдВрднрд╡ рд╣реИ (рдпрджрд┐ рдЖрд╡рд╢реНрдпрдХ рд╣реЛ рддреЛ рдЙрдкрдпреЛрдЧрдХрд░реНрддрд╛ рдирд╛рдо, рдкрд╛рд╕рд╡рд░реНрдб рдФрд░ MFA рд╣реЛрдирд╛)ред рдЬрд╛рдВрдЪреЗрдВ: [**roadtx**](https://github.com/carlospolop/hacktricks-cloud/blob/master/pentesting-cloud/azure-security/az-lateral-movement-cloud-on-prem/az-roadtx-authentication.md)ред
{% endhint %}

## рдПрдХ рдбрд┐рд╡рд╛рдЗрд╕ рдЯрд┐рдХрдЯ рдХреЛ рдУрд╡рд░рд░рд╛рдЗрдЯ рдХрд░рдирд╛

рдпрд╣ **рдбрд┐рд╡рд╛рдЗрд╕ рдЯрд┐рдХрдЯ** **рдЕрдиреБрд░реЛрдз** рдХрд░рдирд╛, рдбрд┐рд╡рд╛рдЗрд╕ рдХреЗ рд╡рд░реНрддрдорд╛рди рдХреЛ **рдУрд╡рд░рд░рд╛рдЗрдЯ** рдХрд░рдирд╛ рд╕рдВрднрд╡ рдерд╛, рдФрд░ рдкреНрд░рд╡рд╛рд╣ рдХреЗ рджреМрд░рд╛рди **PRT рдЪреБрд░рд╛рдирд╛** (рдЗрд╕рд▓рд┐рдП рдЗрд╕реЗ TPM рд╕реЗ рдЪреБрд░рд╛рдиреЗ рдХреА рдЖрд╡рд╢реНрдпрдХрддрд╛ рдирд╣реАрдВ рд╣реИред рдЕрдзрд┐рдХ рдЬрд╛рдирдХрд╛рд░реА рдХреЗ рд▓рд┐рдП [**рдЗрд╕ рд╡рд╛рд░реНрддрд╛ рдХреА рдЬрд╛рдВрдЪ рдХрд░реЗрдВ**](https://youtu.be/BduCn8cLV1A)ред

<figure><img src="../../.gitbook/assets/image (32).png" alt=""><figcaption></figcaption></figure>

{% hint style="danger" %}
рд╣рд╛рд▓рд╛рдВрдХрд┐, рдЗрд╕реЗ рдареАрдХ рдХрд┐рдпрд╛ рдЧрдпрд╛ рдерд╛ред
{% endhint %}

## WHFB рдХреБрдВрдЬреА рдХреЛ рдУрд╡рд░рд░рд╛рдЗрдЯ рдХрд░реЗрдВ

[**рдпрд╣рд╛рдБ рдореВрд▓ рд╕реНрд▓рд╛рдЗрдб рджреЗрдЦреЗрдВ**](https://dirkjanm.io/assets/raw/Windows%20Hello%20from%20the%20other%20side\_nsec\_v1.0.pdf)

рд╣рдорд▓реЗ рдХрд╛ рд╕рд╛рд░рд╛рдВрд╢:

* рдпрд╣ **SSO** рдХреЗ рдорд╛рдзреНрдпрдо рд╕реЗ рдПрдХ **рдбрд┐рд╡рд╛рдЗрд╕** рд╕реЗ **рдкрдВрдЬреАрдХреГрдд WHFB** рдХреБрдВрдЬреА рдХреЛ **рдУрд╡рд░рд░рд╛рдЗрдЯ** рдХрд░рдирд╛ рд╕рдВрднрд╡ рд╣реИ
* рдпрд╣ **TPM рд╕реБрд░рдХреНрд╖рд╛ рдХреЛ рдкрд░рд╛рдЬрд┐рдд рдХрд░рддрд╛ рд╣реИ** рдХреНрдпреЛрдВрдХрд┐ рдХреБрдВрдЬреА **рдирдИ рдХреБрдВрдЬреА рдХреЗ рдирд┐рд░реНрдорд╛рдг рдХреЗ рджреМрд░рд╛рди рд╕реНрдирд┐рдл рдХреА рдЬрд╛рддреА рд╣реИ**
* рдпрд╣ **рд╕реНрдерд┐рд░рддрд╛** рднреА рдкреНрд░рджрд╛рди рдХрд░рддрд╛ рд╣реИ

<figure><img src="../../.gitbook/assets/image (34).png" alt=""><figcaption></figcaption></figure>

рдЙрдкрдпреЛрдЧрдХрд░реНрддрд╛ Azure AD рдЧреНрд░рд╛рдлрд╝ рдХреЗ рдорд╛рдзреНрдпрдо рд╕реЗ рдЕрдкрдиреА рд╕реНрд╡рдпрдВ рдХреА searchableDeviceKey рд╕рдВрдкрддреНрддрд┐ рдХреЛ рд╕рдВрд╢реЛрдзрд┐рдд рдХрд░ рд╕рдХрддреЗ рд╣реИрдВ, рд╣рд╛рд▓рд╛рдБрдХрд┐, рд╣рдорд▓рд╛рд╡рд░ рдХреЗ рдкрд╛рд╕ рдЯреЗрдиреЗрдЯ рдореЗрдВ рдПрдХ рдЙрдкрдХрд░рдг рд╣реЛрдирд╛ рдЪрд╛рд╣рд┐рдП (рдлреНрд▓рд╛рдИ рдкрд░ рдкрдВрдЬреАрдХреГрдд рдпрд╛ рдПрдХ рд╡реИрдз рдЙрдкрдХрд░рдг рд╕реЗ рдкреНрд░рдорд╛рдгрдкрддреНрд░ + рдХреБрдВрдЬреА рдЪреБрд░рд╛рдИ рдЧрдИ) рдФрд░ AAD рдЧреНрд░рд╛рдлрд╝ рдХреЗ рд▓рд┐рдП рдПрдХ рдорд╛рдиреНрдп рдПрдХреНрд╕реЗрд╕ рдЯреЛрдХрди рд╣реЛрдирд╛ рдЪрд╛рд╣рд┐рдПред

рдлрд┐рд░, рдпрд╣ рд╕рдВрднрд╡ рд╣реИ рдХрд┐ рдПрдХ рдирдИ рдХреБрдВрдЬреА рдЙрддреНрдкрдиреНрди рдХреА рдЬрд╛рдП:
```bash
roadtx genhellokey -d <device id> -k tempkey.key
```
рдФрд░ рдлрд┐рд░ searchableDeviceKey рдХреА рдЬрд╛рдирдХрд╛рд░реА рдХреЛ PATCH рдХрд░реЗрдВ:

<figure><img src="../../.gitbook/assets/image (36).png" alt=""><figcaption></figcaption></figure>

рдПрдХ рдЙрдкрдпреЛрдЧрдХрд░реНрддрд╛ рд╕реЗ **device code phishing** рдХреЗ рдорд╛рдзреНрдпрдо рд╕реЗ рдПрдХ рдПрдХреНрд╕реЗрд╕ рдЯреЛрдХрди рдкреНрд░рд╛рдкреНрдд рдХрд░рдирд╛ рд╕рдВрднрд╡ рд╣реИ рдФрд░ рдкрд┐рдЫрд▓реЗ рдЪрд░рдгреЛрдВ рдХрд╛ рджреБрд░реБрдкрдпреЛрдЧ рдХрд░рдХреЗ **рдЙрд╕рдХреА рдПрдХреНрд╕реЗрд╕ рдЪреБрд░рд╛рдирд╛**ред рдЕрдзрд┐рдХ рдЬрд╛рдирдХрд╛рд░реА рдХреЗ рд▓рд┐рдП рджреЗрдЦреЗрдВ:

{% content-ref url="az-lateral-movement-cloud-on-prem/az-phishing-primary-refresh-token-microsoft-entra.md" %}
[az-phishing-primary-refresh-token-microsoft-entra.md](az-lateral-movement-cloud-on-prem/az-phishing-primary-refresh-token-microsoft-entra.md)
{% endcontent-ref %}

<figure><img src="../../.gitbook/assets/image (37).png" alt=""><figcaption></figcaption></figure>

## рд╕рдВрджрд░реНрдн

* [https://youtu.be/BduCn8cLV1A](https://youtu.be/BduCn8cLV1A)
* [https://www.youtube.com/watch?v=x609c-MUZ\_g](https://www.youtube.com/watch?v=x609c-MUZ\_g)
* [https://www.youtube.com/watch?v=AFay\_58QubY](https://www.youtube.com/watch?v=AFay\_58QubY)

{% hint style="success" %}
AWS рд╣реИрдХрд┐рдВрдЧ рд╕реАрдЦреЗрдВ рдФрд░ рдЕрднреНрдпрд╛рд╕ рдХрд░реЗрдВ:<img src="../../.gitbook/assets/image (1).png" alt="" data-size="line">[**HackTricks Training AWS Red Team Expert (ARTE)**](https://training.hacktricks.xyz/courses/arte)<img src="../../.gitbook/assets/image (1).png" alt="" data-size="line">\
GCP рд╣реИрдХрд┐рдВрдЧ рд╕реАрдЦреЗрдВ рдФрд░ рдЕрднреНрдпрд╛рд╕ рдХрд░реЗрдВ: <img src="../../.gitbook/assets/image (2).png" alt="" data-size="line">[**HackTricks Training GCP Red Team Expert (GRTE)**<img src="../../.gitbook/assets/image (2).png" alt="" data-size="line">](https://training.hacktricks.xyz/courses/grte)

<details>

<summary>HackTricks рдХрд╛ рд╕рдорд░реНрдерди рдХрд░реЗрдВ</summary>

* [**рд╕рджрд╕реНрдпрддрд╛ рдпреЛрдЬрдирд╛рдПрдБ**](https://github.com/sponsors/carlospolop) рджреЗрдЦреЗрдВ!
* **ЁЯТм [**Discord рд╕рдореВрд╣**](https://discord.gg/hRep4RUj7f) рдпрд╛ [**telegram рд╕рдореВрд╣**](https://t.me/peass) рдореЗрдВ рд╢рд╛рдорд┐рд▓ рд╣реЛрдВ рдпрд╛ **Twitter** ЁЯРж рдкрд░ рд╣рдореЗрдВ **рдлреЙрд▓реЛ** рдХрд░реЗрдВ [**@hacktricks\_live**](https://twitter.com/hacktricks\_live)**.**
* **рд╣реИрдХрд┐рдВрдЧ рдЯреНрд░рд┐рдХреНрд╕ рд╕рд╛рдЭрд╛ рдХрд░реЗрдВ рдФрд░ [**HackTricks**](https://github.com/carlospolop/hacktricks) рдФрд░ [**HackTricks Cloud**](https://github.com/carlospolop/hacktricks-cloud) рдЧрд┐рдЯрд╣рдм рд░рд┐рдкреЛрдЬрд┐рдЯрд░реА рдореЗрдВ PR рд╕рдмрдорд┐рдЯ рдХрд░реЗрдВред**

</details>
{% endhint %}
