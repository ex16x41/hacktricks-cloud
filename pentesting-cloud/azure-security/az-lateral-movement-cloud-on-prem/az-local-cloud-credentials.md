# Az - Local Cloud Credentials

{% hint style="success" %}
Learn & practice AWS Hacking:<img src="../../../.gitbook/assets/image (1) (1).png" alt="" data-size="line">[**HackTricks Training AWS Red Team Expert (ARTE)**](https://training.hacktricks.xyz/courses/arte)<img src="../../../.gitbook/assets/image (1) (1).png" alt="" data-size="line">\
Learn & practice GCP Hacking: <img src="../../../.gitbook/assets/image (2).png" alt="" data-size="line">[**HackTricks Training GCP Red Team Expert (GRTE)**<img src="../../../.gitbook/assets/image (2).png" alt="" data-size="line">](https://training.hacktricks.xyz/courses/grte)

<details>

<summary>Support HackTricks</summary>

* Check the [**subscription plans**](https://github.com/sponsors/carlospolop)!
* **Join the** üí¨ [**Discord group**](https://discord.gg/hRep4RUj7f) or the [**telegram group**](https://t.me/peass) or **follow** us on **Twitter** üê¶ [**@hacktricks\_live**](https://twitter.com/hacktricks\_live)**.**
* **Share hacking tricks by submitting PRs to the** [**HackTricks**](https://github.com/carlospolop/hacktricks) and [**HackTricks Cloud**](https://github.com/carlospolop/hacktricks-cloud) github repos.

</details>
{% endhint %}

## Stockage local des jetons et consid√©rations de s√©curit√©

### Azure CLI (Interface de ligne de commande)

Les jetons et les donn√©es sensibles sont stock√©s localement par Azure CLI, soulevant des pr√©occupations de s√©curit√© :

1. **Jetons d'acc√®s** : Stock√©s en texte clair dans `accessTokens.json` situ√© √† `C:\Users\<username>\.Azure`.
2. **Informations d'abonnement** : `azureProfile.json`, dans le m√™me r√©pertoire, contient les d√©tails de l'abonnement.
3. **Fichiers journaux** : Le dossier `ErrorRecords` dans `.azure` peut contenir des journaux avec des identifiants expos√©s, tels que :
* Commandes ex√©cut√©es avec des identifiants int√©gr√©s.
* URL accessibles √† l'aide de jetons, r√©v√©lant potentiellement des informations sensibles.

### Azure PowerShell

Azure PowerShell stocke √©galement des jetons et des donn√©es sensibles, qui peuvent √™tre accessibles localement :

1. **Jetons d'acc√®s** : `TokenCache.dat`, situ√© √† `C:\Users\<username>\.Azure`, stocke les jetons d'acc√®s en texte clair.
2. **Secrets de principal de service** : Ceux-ci sont stock√©s non chiffr√©s dans `AzureRmContext.json`.
3. **Fonction de sauvegarde de jetons** : Les utilisateurs ont la possibilit√© de persister les jetons en utilisant la commande `Save-AzContext`, qui doit √™tre utilis√©e avec prudence pour √©viter tout acc√®s non autoris√©.

## Outils automatiques pour les trouver

* [**Winpeas**](https://github.com/carlospolop/PEASS-ng/tree/master/winPEAS/winPEASexe)
* [**Get-AzurePasswords.ps1**](https://github.com/NetSPI/MicroBurst/blob/master/AzureRM/Get-AzurePasswords.ps1)

## Recommandations de s√©curit√©

√âtant donn√© le stockage de donn√©es sensibles en texte clair, il est crucial de s√©curiser ces fichiers et r√©pertoires en :

* Limitant les droits d'acc√®s √† ces fichiers.
* Surveillant et auditant r√©guli√®rement ces r√©pertoires pour d√©tecter tout acc√®s non autoris√© ou changements inattendus.
* Employant le chiffrement pour les fichiers sensibles lorsque cela est possible.
* √âduquant les utilisateurs sur les risques et les meilleures pratiques pour manipuler de telles informations sensibles.

{% hint style="success" %}
Learn & practice AWS Hacking:<img src="../../../.gitbook/assets/image (1) (1).png" alt="" data-size="line">[**HackTricks Training AWS Red Team Expert (ARTE)**](https://training.hacktricks.xyz/courses/arte)<img src="../../../.gitbook/assets/image (1) (1).png" alt="" data-size="line">\
Learn & practice GCP Hacking: <img src="../../../.gitbook/assets/image (2).png" alt="" data-size="line">[**HackTricks Training GCP Red Team Expert (GRTE)**<img src="../../../.gitbook/assets/image (2).png" alt="" data-size="line">](https://training.hacktricks.xyz/courses/grte)

<details>

<summary>Support HackTricks</summary>

* Check the [**subscription plans**](https://github.com/sponsors/carlospolop)!
* **Join the** üí¨ [**Discord group**](https://discord.gg/hRep4RUj7f) or the [**telegram group**](https://t.me/peass) or **follow** us on **Twitter** üê¶ [**@hacktricks\_live**](https://twitter.com/hacktricks\_live)**.**
* **Share hacking tricks by submitting PRs to the** [**HackTricks**](https://github.com/carlospolop/hacktricks) and [**HackTricks Cloud**](https://github.com/carlospolop/hacktricks-cloud) github repos.

</details>
{% endhint %}
