# Az - Local Cloud Credentials

{% hint style="success" %}
Learn & practice AWS Hacking:<img src="../../../.gitbook/assets/image (1).png" alt="" data-size="line">[**HackTricks Training AWS Red Team Expert (ARTE)**](https://training.hacktricks.xyz/courses/arte)<img src="../../../.gitbook/assets/image (1).png" alt="" data-size="line">\
Learn & practice GCP Hacking: <img src="../../../.gitbook/assets/image (2).png" alt="" data-size="line">[**HackTricks Training GCP Red Team Expert (GRTE)**<img src="../../../.gitbook/assets/image (2).png" alt="" data-size="line">](https://training.hacktricks.xyz/courses/grte)

<details>

<summary>Support HackTricks</summary>

* Check the [**subscription plans**](https://github.com/sponsors/carlospolop)!
* **Join the** ğŸ’¬ [**Discord group**](https://discord.gg/hRep4RUj7f) or the [**telegram group**](https://t.me/peass) or **follow** us on **Twitter** ğŸ¦ [**@hacktricks\_live**](https://twitter.com/hacktricks\_live)**.**
* **Share hacking tricks by submitting PRs to the** [**HackTricks**](https://github.com/carlospolop/hacktricks) and [**HackTricks Cloud**](https://github.com/carlospolop/hacktricks-cloud) github repos.

</details>
{% endhint %}

## Local Token Storage and Security Considerations

### Azure CLI (Command-Line Interface)

í† í°ê³¼ ë¯¼ê°í•œ ë°ì´í„°ëŠ” Azure CLIì— ì˜í•´ ë¡œì»¬ì— ì €ì¥ë˜ë©°, ë³´ì•ˆ ìš°ë ¤ê°€ ìˆìŠµë‹ˆë‹¤:

1. **Access Tokens**: `C:\Users\<username>\.Azure`ì— ìœ„ì¹˜í•œ `accessTokens.json`ì— í‰ë¬¸ìœ¼ë¡œ ì €ì¥ë©ë‹ˆë‹¤.
2. **Subscription Information**: ê°™ì€ ë””ë ‰í† ë¦¬ì— ìˆëŠ” `azureProfile.json`ì€ êµ¬ë… ì„¸ë¶€ì •ë³´ë¥¼ ë³´ìœ í•©ë‹ˆë‹¤.
3. **Log Files**: `.azure` ë‚´ì˜ `ErrorRecords` í´ë”ëŠ” ë‹¤ìŒê³¼ ê°™ì€ ë…¸ì¶œëœ ìê²© ì¦ëª…ì´ í¬í•¨ëœ ë¡œê·¸ë¥¼ í¬í•¨í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤:
* ìê²© ì¦ëª…ì´ í¬í•¨ëœ ì‹¤í–‰ëœ ëª…ë ¹.
* í† í°ì„ ì‚¬ìš©í•˜ì—¬ ì ‘ê·¼í•œ URL, ë¯¼ê°í•œ ì •ë³´ë¥¼ ë“œëŸ¬ë‚¼ ìˆ˜ ìˆìŠµë‹ˆë‹¤.

### Azure PowerShell

Azure PowerShell ë˜í•œ ë¡œì»¬ì—ì„œ ì ‘ê·¼í•  ìˆ˜ ìˆëŠ” í† í°ê³¼ ë¯¼ê°í•œ ë°ì´í„°ë¥¼ ì €ì¥í•©ë‹ˆë‹¤:

1. **Access Tokens**: `C:\Users\<username>\.Azure`ì— ìœ„ì¹˜í•œ `TokenCache.dat`ì— í‰ë¬¸ìœ¼ë¡œ ì €ì¥ë©ë‹ˆë‹¤.
2. **Service Principal Secrets**: ì´ëŠ” `AzureRmContext.json`ì— ì•”í˜¸í™”ë˜ì§€ ì•Šì€ ì±„ë¡œ ì €ì¥ë©ë‹ˆë‹¤.
3. **Token Saving Feature**: ì‚¬ìš©ìëŠ” `Save-AzContext` ëª…ë ¹ì„ ì‚¬ìš©í•˜ì—¬ í† í°ì„ ì§€ì†ì ìœ¼ë¡œ ì €ì¥í•  ìˆ˜ ìˆìœ¼ë©°, ì´ëŠ” ë¬´ë‹¨ ì ‘ê·¼ì„ ë°©ì§€í•˜ê¸° ìœ„í•´ ì‹ ì¤‘í•˜ê²Œ ì‚¬ìš©í•´ì•¼ í•©ë‹ˆë‹¤.

## Automatic Tools to find them

* [**Winpeas**](https://github.com/carlospolop/PEASS-ng/tree/master/winPEAS/winPEASexe)
* [**Get-AzurePasswords.ps1**](https://github.com/NetSPI/MicroBurst/blob/master/AzureRM/Get-AzurePasswords.ps1)

## Security Recommendations

ë¯¼ê°í•œ ë°ì´í„°ê°€ í‰ë¬¸ìœ¼ë¡œ ì €ì¥ë˜ëŠ” ê²ƒì„ ê³ ë ¤í•  ë•Œ, ì´ëŸ¬í•œ íŒŒì¼ê³¼ ë””ë ‰í† ë¦¬ë¥¼ ë³´í˜¸í•˜ëŠ” ê²ƒì´ ì¤‘ìš”í•©ë‹ˆë‹¤:

* ì´ëŸ¬í•œ íŒŒì¼ì— ëŒ€í•œ ì ‘ê·¼ ê¶Œí•œì„ ì œí•œí•©ë‹ˆë‹¤.
* ë¬´ë‹¨ ì ‘ê·¼ì´ë‚˜ ì˜ˆìƒì¹˜ ëª»í•œ ë³€ê²½ì„ ìœ„í•´ ì´ëŸ¬í•œ ë””ë ‰í† ë¦¬ë¥¼ ì •ê¸°ì ìœ¼ë¡œ ëª¨ë‹ˆí„°ë§í•˜ê³  ê°ì‚¬í•©ë‹ˆë‹¤.
* ê°€ëŠ¥í•œ ê²½ìš° ë¯¼ê°í•œ íŒŒì¼ì— ëŒ€í•œ ì•”í˜¸í™”ë¥¼ ì‚¬ìš©í•©ë‹ˆë‹¤.
* ì‚¬ìš©ìê°€ ì´ëŸ¬í•œ ë¯¼ê°í•œ ì •ë³´ë¥¼ ì²˜ë¦¬í•˜ëŠ” ë° ìˆì–´ ìœ„í—˜ê³¼ ëª¨ë²” ì‚¬ë¡€ì— ëŒ€í•´ êµìœ¡í•©ë‹ˆë‹¤.

{% hint style="success" %}
Learn & practice AWS Hacking:<img src="../../../.gitbook/assets/image (1).png" alt="" data-size="line">[**HackTricks Training AWS Red Team Expert (ARTE)**](https://training.hacktricks.xyz/courses/arte)<img src="../../../.gitbook/assets/image (1).png" alt="" data-size="line">\
Learn & practice GCP Hacking: <img src="../../../.gitbook/assets/image (2).png" alt="" data-size="line">[**HackTricks Training GCP Red Team Expert (GRTE)**<img src="../../../.gitbook/assets/image (2).png" alt="" data-size="line">](https://training.hacktricks.xyz/courses/grte)

<details>

<summary>Support HackTricks</summary>

* Check the [**subscription plans**](https://github.com/sponsors/carlospolop)!
* **Join the** ğŸ’¬ [**Discord group**](https://discord.gg/hRep4RUj7f) or the [**telegram group**](https://t.me/peass) or **follow** us on **Twitter** ğŸ¦ [**@hacktricks\_live**](https://twitter.com/hacktricks\_live)**.**
* **Share hacking tricks by submitting PRs to the** [**HackTricks**](https://github.com/carlospolop/hacktricks) and [**HackTricks Cloud**](https://github.com/carlospolop/hacktricks-cloud) github repos.

</details>
{% endhint %}
