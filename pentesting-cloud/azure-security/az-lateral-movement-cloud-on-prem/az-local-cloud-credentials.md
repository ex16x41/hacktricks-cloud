# Az - Lokalne Dane uwierzytelniajce chmury

{% hint style="success" %}
Ucz si i praktykuj Hacking AWS:<img src="/.gitbook/assets/image.png" alt="" data-size="line">[**HackTricks Training AWS Red Team Expert (ARTE)**](https://training.hacktricks.xyz/courses/arte)<img src="/.gitbook/assets/image.png" alt="" data-size="line">\
Ucz si i praktykuj Hacking GCP: <img src="/.gitbook/assets/image (2).png" alt="" data-size="line">[**HackTricks Training GCP Red Team Expert (GRTE)**<img src="/.gitbook/assets/image (2).png" alt="" data-size="line">](https://training.hacktricks.xyz/courses/grte)

<details>

<summary>Wesprzyj HackTricks</summary>

* Sprawd藕 [**plany subskrypcyjne**](https://github.com/sponsors/carlospolop)!
* **Docz do**  [**grupy Discord**](https://discord.gg/hRep4RUj7f) lub [**grupy telegramowej**](https://t.me/peass) lub **led藕** nas na **Twitterze**  [**@hacktricks\_live**](https://twitter.com/hacktricks\_live)**.**
* **Dziel si trikami hakerskimi, przesyajc PR-y do** [**HackTricks**](https://github.com/carlospolop/hacktricks) i [**HackTricks Cloud**](https://github.com/carlospolop/hacktricks-cloud) na githubie.

</details>
{% endhint %}

## Lokalne Przechowywanie Token贸w i Rozwa偶ania dotyczce Bezpieczestwa

### Azure CLI (Interfejs wiersza polece)

Tokeny i dane wra偶liwe s przechowywane lokalnie przez Azure CLI, co rodzi obawy dotyczce bezpieczestwa:

1. **Tokeny dostpu**: Przechowywane w postaci zwykego tekstu w pliku `accessTokens.json` znajdujcym si w `C:\Users\<nazwa_u偶ytkownika>\.Azure`.
2. **Informacje o subskrypcji**: `azureProfile.json`, w tym samym katalogu, przechowuje szczeg贸y subskrypcji.
3. **Pliki dziennika**: Katalog `ErrorRecords` wewntrz `.azure` mo偶e zawiera dzienniki z ujawnionymi danymi uwierzytelniajcymi, takimi jak:
- Wykonane polecenia z wbudowanymi danymi uwierzytelniajcymi.
- Adresy URL dostpne za pomoc token贸w, potencjalnie ujawniajce wra偶liwe informacje.

### Azure PowerShell

Azure PowerShell r贸wnie偶 przechowuje tokeny i dane wra偶liwe, do kt贸rych mo偶na uzyska dostp lokalnie:

1. **Tokeny dostpu**: `TokenCache.dat`, znajdujcy si w `C:\Users\<nazwa_u偶ytkownika>\.Azure`, przechowuje tokeny dostpu w postaci zwykego tekstu.
2. **Sekrety g贸wnego usugi**: S one przechowywane w postaci niezaszyfrowanej w pliku `AzureRmContext.json`.
3. **Funkcja Zapisywania Token贸w**: U偶ytkownicy maj mo偶liwo trwaego zapisywania token贸w za pomoc polecenia `Save-AzContext`, kt贸re nale偶y u偶ywa ostro偶nie, aby zapobiec nieautoryzowanemu dostpowi.

## Automatyczne Narzdzia do ich znalezienia

* [**Winpeas**](https://github.com/carlospolop/PEASS-ng/tree/master/winPEAS/winPEASexe)
* [**Get-AzurePasswords.ps1**](https://github.com/NetSPI/MicroBurst/blob/master/AzureRM/Get-AzurePasswords.ps1)

## Zalecenia dotyczce Bezpieczestwa

Biorc pod uwag przechowywanie danych wra偶liwych w postaci zwykego tekstu, kluczowe jest zabezpieczenie tych plik贸w i katalog贸w poprzez:
- Ograniczenie praw dostpu do tych plik贸w.
- Regularne monitorowanie i audytowanie tych katalog贸w pod ktem nieautoryzowanego dostpu lub nieoczekiwanych zmian.
- Wykorzystanie szyfrowania dla plik贸w zawierajcych dane wra偶liwe, jeli to mo偶liwe.
- Edukowanie u偶ytkownik贸w na temat ryzyka i najlepszych praktyk dotyczcych obsugi takich wra偶liwych informacji.

{% hint style="success" %}
Ucz si i praktykuj Hacking AWS:<img src="/.gitbook/assets/image.png" alt="" data-size="line">[**HackTricks Training AWS Red Team Expert (ARTE)**](https://training.hacktricks.xyz/courses/arte)<img src="/.gitbook/assets/image.png" alt="" data-size="line">\
Ucz si i praktykuj Hacking GCP: <img src="/.gitbook/assets/image (2).png" alt="" data-size="line">[**HackTricks Training GCP Red Team Expert (GRTE)**<img src="/.gitbook/assets/image (2).png" alt="" data-size="line">](https://training.hacktricks.xyz/courses/grte)

<details>

<summary>Wesprzyj HackTricks</summary>

* Sprawd藕 [**plany subskrypcyjne**](https://github.com/sponsors/carlospolop)!
* **Docz do**  [**grupy Discord**](https://discord.gg/hRep4RUj7f) lub [**grupy telegramowej**](https://t.me/peass) lub **led藕** nas na **Twitterze**  [**@hacktricks\_live**](https://twitter.com/hacktricks\_live)**.**
* **Dziel si trikami hakerskimi, przesyajc PR-y do** [**HackTricks**](https://github.com/carlospolop/hacktricks) i [**HackTricks Cloud**](https://github.com/carlospolop/hacktricks-cloud) na githubie.

</details>
{% endhint %}
