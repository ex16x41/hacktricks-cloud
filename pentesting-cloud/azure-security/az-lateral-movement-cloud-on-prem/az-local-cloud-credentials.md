# Az - Credenciais de Nuvem Local

{% hint style="success" %}
Aprenda e pratique Hacking AWS:<img src="../../../.gitbook/assets/image (1).png" alt="" data-size="line">[**HackTricks Training AWS Red Team Expert (ARTE)**](https://training.hacktricks.xyz/courses/arte)<img src="../../../.gitbook/assets/image (1).png" alt="" data-size="line">\
Aprenda e pratique Hacking GCP: <img src="../../../.gitbook/assets/image (2).png" alt="" data-size="line">[**HackTricks Training GCP Red Team Expert (GRTE)**<img src="../../../.gitbook/assets/image (2).png" alt="" data-size="line">](https://training.hacktricks.xyz/courses/grte)

<details>

<summary>Suporte ao HackTricks</summary>

* Confira os [**planos de assinatura**](https://github.com/sponsors/carlospolop)!
* **Junte-se ao** üí¨ [**grupo do Discord**](https://discord.gg/hRep4RUj7f) ou ao [**grupo do telegram**](https://t.me/peass) ou **siga**-nos no **Twitter** üê¶ [**@hacktricks\_live**](https://twitter.com/hacktricks\_live)**.**
* **Compartilhe truques de hacking enviando PRs para os reposit√≥rios do** [**HackTricks**](https://github.com/carlospolop/hacktricks) e [**HackTricks Cloud**](https://github.com/carlospolop/hacktricks-cloud).

</details>
{% endhint %}

## Armazenamento Local de Tokens e Considera√ß√µes de Seguran√ßa

### Azure CLI (Interface de Linha de Comando)

Tokens e dados sens√≠veis s√£o armazenados localmente pelo Azure CLI, levantando preocupa√ß√µes de seguran√ßa:

1. **Tokens de Acesso**: Armazenados em texto simples dentro de `accessTokens.json` localizado em `C:\Users\<username>\.Azure`.
2. **Informa√ß√µes de Assinatura**: `azureProfile.json`, no mesmo diret√≥rio, cont√©m detalhes da assinatura.
3. **Arquivos de Log**: A pasta `ErrorRecords` dentro de `.azure` pode conter logs com credenciais expostas, como:
* Comandos executados com credenciais incorporadas.
* URLs acessadas usando tokens, potencialmente revelando informa√ß√µes sens√≠veis.

### Azure PowerShell

O Azure PowerShell tamb√©m armazena tokens e dados sens√≠veis, que podem ser acessados localmente:

1. **Tokens de Acesso**: `TokenCache.dat`, localizado em `C:\Users\<username>\.Azure`, armazena tokens de acesso em texto simples.
2. **Segredos de Principal de Servi√ßo**: Estes s√£o armazenados sem criptografia em `AzureRmContext.json`.
3. **Recurso de Salvamento de Token**: Os usu√°rios t√™m a capacidade de persistir tokens usando o comando `Save-AzContext`, que deve ser usado com cautela para evitar acesso n√£o autorizado.

## Ferramentas Autom√°ticas para encontr√°-los

* [**Winpeas**](https://github.com/carlospolop/PEASS-ng/tree/master/winPEAS/winPEASexe)
* [**Get-AzurePasswords.ps1**](https://github.com/NetSPI/MicroBurst/blob/master/AzureRM/Get-AzurePasswords.ps1)

## Recomenda√ß√µes de Seguran√ßa

Considerando o armazenamento de dados sens√≠veis em texto simples, √© crucial proteger esses arquivos e diret√≥rios por meio de:

* Limitar os direitos de acesso a esses arquivos.
* Monitorar e auditar regularmente esses diret√≥rios em busca de acesso n√£o autorizado ou mudan√ßas inesperadas.
* Empregar criptografia para arquivos sens√≠veis sempre que poss√≠vel.
* Educar os usu√°rios sobre os riscos e as melhores pr√°ticas para lidar com tais informa√ß√µes sens√≠veis.

{% hint style="success" %}
Aprenda e pratique Hacking AWS:<img src="../../../.gitbook/assets/image (1).png" alt="" data-size="line">[**HackTricks Training AWS Red Team Expert (ARTE)**](https://training.hacktricks.xyz/courses/arte)<img src="../../../.gitbook/assets/image (1).png" alt="" data-size="line">\
Aprenda e pratique Hacking GCP: <img src="../../../.gitbook/assets/image (2).png" alt="" data-size="line">[**HackTricks Training GCP Red Team Expert (GRTE)**<img src="../../../.gitbook/assets/image (2).png" alt="" data-size="line">](https://training.hacktricks.xyz/courses/grte)

<details>

<summary>Suporte ao HackTricks</summary>

* Confira os [**planos de assinatura**](https://github.com/sponsors/carlospolop)!
* **Junte-se ao** üí¨ [**grupo do Discord**](https://discord.gg/hRep4RUj7f) ou ao [**grupo do telegram**](https://t.me/peass) ou **siga**-nos no **Twitter** üê¶ [**@hacktricks\_live**](https://twitter.com/hacktricks\_live)**.**
* **Compartilhe truques de hacking enviando PRs para os reposit√≥rios do** [**HackTricks**](https://github.com/carlospolop/hacktricks) e [**HackTricks Cloud**](https://github.com/carlospolop/hacktricks-cloud).

</details>
{% endhint %}
