# Az AD Connect - Hibrit Kimlik

{% hint style="success" %}
AWS Hacking Ã¶ÄŸrenin ve uygulayÄ±n:<img src="/.gitbook/assets/image.png" alt="" data-size="line">[**HackTricks EÄŸitim AWS KÄ±rmÄ±zÄ± TakÄ±m UzmanÄ± (ARTE)**](https://training.hacktricks.xyz/courses/arte)<img src="/.gitbook/assets/image.png" alt="" data-size="line">\
GCP Hacking Ã¶ÄŸrenin ve uygulayÄ±n: <img src="/.gitbook/assets/image (2).png" alt="" data-size="line">[**HackTricks EÄŸitim GCP KÄ±rmÄ±zÄ± TakÄ±m UzmanÄ± (GRTE)**<img src="/.gitbook/assets/image (2).png" alt="" data-size="line">](https://training.hacktricks.xyz/courses/grte)

<details>

<summary>HackTricks'i Destekleyin</summary>

* [**Abonelik planlarÄ±nÄ±**](https://github.com/sponsors/carlospolop) kontrol edin!
* ğŸ’¬ [**Discord grubuna**](https://discord.gg/hRep4RUj7f) katÄ±lÄ±n veya [**telegram grubuna**](https://t.me/peass) katÄ±lÄ±n veya bizi **Twitter** ğŸ¦ [**@hacktricks\_live**](https://twitter.com/hacktricks\_live)** takip edin.**
* **Hacking pÃ¼f noktalarÄ±nÄ± paylaÅŸarak PR'ler gÃ¶ndererek HackTricks ve HackTricks Cloud github depolarÄ±na katkÄ±da bulunun.**

</details>
{% endhint %}

## Temel Bilgiler

**Yerinde Active Directory (AD)** ile **Azure AD** arasÄ±ndaki entegrasyon, Ã§eÅŸitli **Tek Oturum AÃ§ma (SSO)** yÃ¶ntemlerini destekleyen **Azure AD Connect** aracÄ±lÄ±ÄŸÄ±yla saÄŸlanÄ±r. Her bir yÃ¶ntem, kullanÄ±ÅŸlÄ± olmasÄ±na raÄŸmen bulut veya yerinde ortamlarÄ± tehlikeye atabilecek potansiyel gÃ¼venlik aÃ§Ä±klarÄ±nÄ± sunar:

* **Pass-Through Authentication (PTA)**:
- Yerinde AD'deki ajanÄ±n tehlikeye atÄ±lmasÄ±yla, kullanÄ±cÄ± ÅŸifrelerinin Azure baÄŸlantÄ±larÄ± iÃ§in doÄŸrulanmasÄ±na izin verilir (yerinde - Bulut).
- Yeni bir konumda kimlik doÄŸrulamalarÄ±nÄ± doÄŸrulamak iÃ§in yeni bir ajanÄ±n kaydedilme olasÄ±lÄ±ÄŸÄ± (Bulut - yerinde).

{% content-ref url="pta-pass-through-authentication.md" %}
[pta-pass-through-authentication.md](pta-pass-through-authentication.md)
{% endcontent-ref %}

* **Password Hash Sync (PHS)**:
- AD'deki ayrÄ±calÄ±klÄ± kullanÄ±cÄ±larÄ±n dÃ¼z metin ÅŸifrelerinin Ã§Ä±karÄ±lma potansiyeli, yÃ¼ksek ayrÄ±calÄ±klÄ±, otomatik oluÅŸturulan AzureAD kullanÄ±cÄ±sÄ±nÄ±n kimlik bilgilerini iÃ§erir.

{% content-ref url="phs-password-hash-sync.md" %}
[phs-password-hash-sync.md](phs-password-hash-sync.md)
{% endcontent-ref %}

* **Federasyon**:
- SAML imzalama iÃ§in kullanÄ±lan Ã¶zel anahtarÄ±n Ã§alÄ±nmasÄ±, yerinde ve bulut kimliklerinin taklit edilmesini saÄŸlar.

{% content-ref url="federation.md" %}
[federation.md](federation.md)
{% endcontent-ref %}

* **Seamless SSO:**
- `AZUREADSSOACC` kullanÄ±cÄ±sÄ±nÄ±n ÅŸifresinin Ã§alÄ±nmasÄ±, Kerberos gÃ¼mÃ¼ÅŸ biletlerini imzalamak iÃ§in kullanÄ±lan ve herhangi bir bulut kullanÄ±cÄ±sÄ±nÄ±n taklit edilmesine izin veren bir iÅŸlemdir.

{% content-ref url="seamless-sso.md" %}
[seamless-sso.md](seamless-sso.md)
{% endcontent-ref %}

* **Bulut Kerberos GÃ¼veni**:
- AzureAD kullanÄ±cÄ± adlarÄ±nÄ± ve SIDs'leri manipÃ¼le ederek Global YÃ¶neticiden yerinde Alan YÃ¶neticisine yÃ¼kselme olasÄ±lÄ±ÄŸÄ± ve AzureAD'den TGT'ler isteme olasÄ±lÄ±ÄŸÄ±.

{% content-ref url="az-cloud-kerberos-trust.md" %}
[az-cloud-kerberos-trust.md](az-cloud-kerberos-trust.md)
{% endcontent-ref %}

* **VarsayÄ±lan Uygulamalar**:
- Bir Uygulama YÃ¶neticisi hesabÄ±nÄ±n veya yerinde Senkronizasyon HesabÄ±nÄ±n tehlikeye atÄ±lmasÄ±, dizin ayarlarÄ±nÄ±n, grup Ã¼yeliklerinin, kullanÄ±cÄ± hesaplarÄ±nÄ±n, SharePoint sitelerinin ve OneDrive dosyalarÄ±nÄ±n deÄŸiÅŸtirilmesine izin verir.

{% content-ref url="az-default-applications.md" %}
[az-default-applications.md](az-default-applications.md)
{% endcontent-ref %}

Her entegrasyon yÃ¶ntemi iÃ§in kullanÄ±cÄ± senkronizasyonu gerÃ§ekleÅŸtirilir ve on-prem AD'de bir `MSOL_<kurulumkimliÄŸi>` hesabÄ± oluÅŸturulur. Ã–nemli bir ÅŸekilde, hem **PHS** hem de **PTA** yÃ¶ntemleri **Seamless SSO**'yu kolaylaÅŸtÄ±rÄ±r, bÃ¶ylece yerinde etki alanÄ±na katÄ±lmÄ±ÅŸ Azure AD bilgisayarlarÄ± iÃ§in otomatik oturum aÃ§ma saÄŸlanÄ±r.

**Azure AD Connect**'in kurulduÄŸunu doÄŸrulamak iÃ§in aÅŸaÄŸÄ±daki PowerShell komutu, varsayÄ±lan olarak Azure AD Connect ile birlikte yÃ¼klenen **AzureADConnectHealthSync** modÃ¼lÃ¼nÃ¼ kullanÄ±r:
```powershell
Get-ADSyncConnector
```
{% hint style="success" %}
AWS Hacking'i Ã¶ÄŸrenin ve uygulayÄ±n: <img src="/.gitbook/assets/image.png" alt="" data-size="line">[**HackTricks EÄŸitim AWS KÄ±rmÄ±zÄ± TakÄ±m UzmanÄ± (ARTE)**](https://training.hacktricks.xyz/courses/arte)<img src="/.gitbook/assets/image.png" alt="" data-size="line">\
GCP Hacking'i Ã¶ÄŸrenin ve uygulayÄ±n: <img src="/.gitbook/assets/image (2).png" alt="" data-size="line">[**HackTricks EÄŸitim GCP KÄ±rmÄ±zÄ± TakÄ±m UzmanÄ± (GRTE)**<img src="/.gitbook/assets/image (2).png" alt="" data-size="line">](https://training.hacktricks.xyz/courses/grte)

<details>

<summary>HackTricks'i Destekleyin</summary>

* [**Abonelik planlarÄ±nÄ±**](https://github.com/sponsors/carlospolop) kontrol edin!
* ğŸ’¬ [**Discord grubuna**](https://discord.gg/hRep4RUj7f) katÄ±lÄ±n veya [**telegram grubuna**](https://t.me/peass) katÄ±lÄ±n veya bizi **Twitter** ğŸ¦ [**@hacktricks\_live**](https://twitter.com/hacktricks\_live)** takip edin.**
* **Hacking pÃ¼f noktalarÄ±nÄ± paylaÅŸarak PR'ler gÃ¶ndererek** [**HackTricks**](https://github.com/carlospolop/hacktricks) ve [**HackTricks Cloud**](https://github.com/carlospolop/hacktricks-cloud) github depolarÄ±na katkÄ±da bulunun.

</details>
{% endhint %}
