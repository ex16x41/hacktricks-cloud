# Az AD Connect - Hybrid Identity

{% hint style="success" %}
Learn & practice AWS Hacking:<img src="../../../../.gitbook/assets/image (1) (1) (1).png" alt="" data-size="line">[**HackTricks Training AWS Red Team Expert (ARTE)**](https://training.hacktricks.xyz/courses/arte)<img src="../../../../.gitbook/assets/image (1) (1) (1).png" alt="" data-size="line">\
Learn & practice GCP Hacking: <img src="../../../../.gitbook/assets/image (2).png" alt="" data-size="line">[**HackTricks Training GCP Red Team Expert (GRTE)**<img src="../../../../.gitbook/assets/image (2).png" alt="" data-size="line">](https://training.hacktricks.xyz/courses/grte)

<details>

<summary>Support HackTricks</summary>

* Check the [**subscription plans**](https://github.com/sponsors/carlospolop)!
* **Join the** üí¨ [**Discord group**](https://discord.gg/hRep4RUj7f) or the [**telegram group**](https://t.me/peass) or **follow** us on **Twitter** üê¶ [**@hacktricks\_live**](https://twitter.com/hacktricks_live)**.**
* **Share hacking tricks by submitting PRs to the** [**HackTricks**](https://github.com/carlospolop/hacktricks) and [**HackTricks Cloud**](https://github.com/carlospolop/hacktricks-cloud) github repos.

</details>
{% endhint %}

## Basic Information

Ushirikiano kati ya **On-premises Active Directory (AD)** na **Azure AD** unarahisishwa na **Azure AD Connect**, ukitoa njia mbalimbali zinazounga mkono **Single Sign-on (SSO)**. Kila njia, ingawa ni muhimu, ina uwezekano wa udhaifu wa usalama ambao unaweza kutumiwa kuathiri mazingira ya wingu au ya ndani:

* **Pass-Through Authentication (PTA)**:
* Uwezekano wa kuathiriwa kwa wakala kwenye AD ya ndani, kuruhusu uthibitishaji wa nywila za watumiaji kwa ajili ya muunganisho wa Azure (kutoka ndani hadi Wingu).
* Uwezekano wa kujiandikisha wakala mpya ili kuthibitisha uthibitisho katika eneo jipya (kutoka Wingu hadi ndani).

{% content-ref url="pta-pass-through-authentication.md" %}
[pta-pass-through-authentication.md](pta-pass-through-authentication.md)
{% endcontent-ref %}

* **Password Hash Sync (PHS)**:
* Uwezekano wa kutoa nywila za wazi za watumiaji wenye mamlaka kutoka AD, ikiwa ni pamoja na akauti za mtumiaji wa AzureAD aliye na mamlaka ya juu, aliyejengwa kiotomatiki.

{% content-ref url="phs-password-hash-sync.md" %}
[phs-password-hash-sync.md](phs-password-hash-sync.md)
{% endcontent-ref %}

* **Federation**:
* Wizi wa funguo binafsi zinazotumika kwa ajili ya saini ya SAML, kuruhusu uigaji wa vitambulisho vya ndani na vya wingu.

{% content-ref url="federation.md" %}
[federation.md](federation.md)
{% endcontent-ref %}

* **Seamless SSO:**
* Wizi wa nywila ya mtumiaji `AZUREADSSOACC`, inayotumika kwa ajili ya kusaini tiketi za Kerberos silver, kuruhusu uigaji wa mtumiaji yeyote wa wingu.

{% content-ref url="seamless-sso.md" %}
[seamless-sso.md](seamless-sso.md)
{% endcontent-ref %}

* **Cloud Kerberos Trust**:
* Uwezekano wa kupandisha cheo kutoka kwa Global Admin hadi kwa Domain Admin wa ndani kwa kubadilisha majina ya watumiaji wa AzureAD na SIDs na kuomba TGTs kutoka AzureAD.

{% content-ref url="az-cloud-kerberos-trust.md" %}
[az-cloud-kerberos-trust.md](az-cloud-kerberos-trust.md)
{% endcontent-ref %}

* **Default Applications**:
* Kuathiri akaunti ya Msimamizi wa Programu au Akaunti ya Sync ya ndani kunaruhusu mabadiliko ya mipangilio ya directory, uanachama wa vikundi, akaunti za watumiaji, tovuti za SharePoint, na faili za OneDrive.

{% content-ref url="az-default-applications.md" %}
[az-default-applications.md](az-default-applications.md)
{% endcontent-ref %}

Kwa kila njia ya ushirikiano, usawazishaji wa watumiaji unafanywa, na akaunti ya `MSOL_<installationidentifier>` inaundwa katika AD ya ndani. Kwa kuzingatia, njia zote **PHS** na **PTA** zinarahisisha **Seamless SSO**, kuruhusu kuingia kiotomatiki kwa kompyuta za Azure AD zilizounganishwa na eneo la ndani.

Ili kuthibitisha usakinishaji wa **Azure AD Connect**, amri ifuatayo ya PowerShell, ikitumia moduli ya **AzureADConnectHealthSync** (iliyowekwa kwa chaguo-msingi na Azure AD Connect), inaweza kutumika:
```powershell
Get-ADSyncConnector
```
{% hint style="success" %}
Jifunze na fanya mazoezi ya AWS Hacking:<img src="../../../../.gitbook/assets/image (1) (1) (1).png" alt="" data-size="line">[**HackTricks Training AWS Red Team Expert (ARTE)**](https://training.hacktricks.xyz/courses/arte)<img src="../../../../.gitbook/assets/image (1) (1) (1).png" alt="" data-size="line">\
Jifunze na fanya mazoezi ya GCP Hacking: <img src="../../../../.gitbook/assets/image (2).png" alt="" data-size="line">[**HackTricks Training GCP Red Team Expert (GRTE)**<img src="../../../../.gitbook/assets/image (2).png" alt="" data-size="line">](https://training.hacktricks.xyz/courses/grte)

<details>

<summary>Support HackTricks</summary>

* Angalia [**mpango wa usajili**](https://github.com/sponsors/carlospolop)!
* **Jiunge na** üí¨ [**kikundi cha Discord**](https://discord.gg/hRep4RUj7f) au [**kikundi cha telegram**](https://t.me/peass) au **tufuatilie** kwenye **Twitter** üê¶ [**@hacktricks\_live**](https://twitter.com/hacktricks_live)**.**
* **Shiriki mbinu za hacking kwa kuwasilisha PRs kwa** [**HackTricks**](https://github.com/carlospolop/hacktricks) na [**HackTricks Cloud**](https://github.com/carlospolop/hacktricks-cloud) repos za github.

</details>
{% endhint %}
