# Az - Temel Bilgiler

{% hint style="success" %}
AWS Hacking'i Ã¶ÄŸrenin ve pratik yapÄ±n:<img src="../../.gitbook/assets/image (1).png" alt="" data-size="line">[**HackTricks EÄŸitim AWS KÄ±rmÄ±zÄ± TakÄ±m UzmanÄ± (ARTE)**](https://training.hacktricks.xyz/courses/arte)<img src="../../.gitbook/assets/image (1).png" alt="" data-size="line">\
GCP Hacking'i Ã¶ÄŸrenin ve pratik yapÄ±n: <img src="../../.gitbook/assets/image (2).png" alt="" data-size="line">[**HackTricks EÄŸitim GCP KÄ±rmÄ±zÄ± TakÄ±m UzmanÄ± (GRTE)**<img src="../../.gitbook/assets/image (2).png" alt="" data-size="line">](https://training.hacktricks.xyz/courses/grte)

<details>

<summary>HackTricks'i Destekleyin</summary>

* [**abonelik planlarÄ±nÄ±**](https://github.com/sponsors/carlospolop) kontrol edin!
* **ğŸ’¬ [**Discord grubuna**](https://discord.gg/hRep4RUj7f) veya [**telegram grubuna**](https://t.me/peass) katÄ±lÄ±n ya da **Twitter'da** ğŸ¦ [**@hacktricks\_live**](https://twitter.com/hacktricks\_live)** bizi takip edin.**
* **Hacking ipuÃ§larÄ±nÄ± paylaÅŸmak iÃ§in** [**HackTricks**](https://github.com/carlospolop/hacktricks) ve [**HackTricks Cloud**](https://github.com/carlospolop/hacktricks-cloud) github reposuna PR gÃ¶nderin.

</details>
{% endhint %}

## Organizasyon HiyerarÅŸisi

<figure><img src="../../.gitbook/assets/image (271).png" alt=""><figcaption></figcaption></figure>

### YÃ¶netim GruplarÄ±

EÄŸer organizasyonunuzun **birÃ§ok Azure aboneliÄŸi** varsa, bu **abonelikler** iÃ§in eriÅŸimi, politikalarÄ± ve uyumu verimli bir ÅŸekilde **yÃ¶netmenin** bir yoluna ihtiyacÄ±nÄ±z olabilir. **YÃ¶netim gruplarÄ±**, **aboneliklerin Ã¼zerinde bir yÃ¶netiÅŸim kapsamÄ±** saÄŸlar.

Tek bir dizinde **10.000 yÃ¶netim grubu** desteklenebilir ve bir yÃ¶netim grubu aÄŸacÄ± **altÄ± seviyeye kadar derinliÄŸi** destekleyebilir.

<figure><img src="../../.gitbook/assets/image (147).png" alt=""><figcaption></figcaption></figure>

[Belgelerden](https://learn.microsoft.com/en-us/azure/governance/management-groups/overview#root-management-group-for-each-directory): Her dizine tek bir **Ã¼st dÃ¼zey yÃ¶netim grubu olan kÃ¶k** yÃ¶netim grubu verilir. KÃ¶k yÃ¶netim grubu, **tÃ¼m yÃ¶netim gruplarÄ±nÄ±n ve aboneliklerin ona katÄ±lmasÄ±nÄ±** saÄŸlamak iÃ§in hiyerarÅŸiye entegre edilmiÅŸtir. Bu kÃ¶k yÃ¶netim grubu, **kÃ¼resel politikalarÄ±n ve Azure rol atamalarÄ±nÄ±n** dizin dÃ¼zeyinde uygulanmasÄ±na olanak tanÄ±r. [Azure AD **KÃ¼resel YÃ¶neticisi**, baÅŸlangÄ±Ã§ta bu kÃ¶k grubun **KullanÄ±cÄ± EriÅŸim YÃ¶neticisi rolÃ¼ne** yÃ¼kseltilmelidir](https://learn.microsoft.com/en-us/azure/role-based-access-control/elevate-access-global-admin). EriÅŸimi yÃ¼kselttikten sonra, yÃ¶netici **hiyerarÅŸiyi yÃ¶netmek iÃ§in diÄŸer dizin kullanÄ±cÄ±larÄ±na veya gruplarÄ±na herhangi bir Azure rolÃ¼ atayabilir**. YÃ¶netici olarak, **kÃ¶k** yÃ¶netim grubunun sahibi olarak **kendi hesabÄ±nÄ±zÄ± atayabilirsiniz**.

KÃ¶k yÃ¶netim grubu, diÄŸer yÃ¶netim gruplarÄ±nÄ±n aksine **taÅŸÄ±namaz veya silinemez**.

YÃ¶netim gruplarÄ±, sahip olduÄŸunuz abonelik tÃ¼rÃ¼nden baÄŸÄ±msÄ±z olarak Ã¶lÃ§ekli kurumsal dÃ¼zeyde yÃ¶netim saÄŸlar. Ancak, **tek bir yÃ¶netim grubundaki tÃ¼m abonelikler**, **aynÄ± Azure Active Directory (Azure AD) kiracÄ±sÄ±na** gÃ¼venmelidir.

<figure><img src="../../.gitbook/assets/image (157).png" alt=""><figcaption></figcaption></figure>

### Azure Abonelikleri

Azure'da, bir abonelik, iÅŸ veya teknik **kaynaklarÄ± saÄŸlamak** amacÄ±yla bir **mantÄ±ksal konteyner** olarak hizmet eder. Bu konteyner, sanal makineler (VM'ler), veritabanlarÄ± gibi **kaynaklarÄ±n detaylarÄ±nÄ±** saklar. Bir Azure kaynaÄŸÄ± oluÅŸturulduÄŸunda, Ã¶rneÄŸin bir VM, **ona baÄŸlÄ± abonelik** belirtilir. Bu yapÄ±, eriÅŸim devrini kolaylaÅŸtÄ±rÄ±r ve rol tabanlÄ± eriÅŸim kontrol mekanizmalarÄ±nÄ± kullanÄ±r.

### Kaynak GruplarÄ±

[Belgelerden:](https://learn.microsoft.com/en-us/azure/azure-resource-manager/management/manage-resource-groups-python?tabs=macos#what-is-a-resource-group) Bir kaynak grubu, bir Azure Ã§Ã¶zÃ¼mÃ¼ iÃ§in **iliÅŸkili kaynaklarÄ±** tutan bir **konteynerdir**. Kaynak grubu, Ã§Ã¶zÃ¼m iÃ§in tÃ¼m kaynaklarÄ± veya yalnÄ±zca **bir grup olarak yÃ¶netmek istediÄŸiniz kaynaklarÄ±** iÃ§erebilir. Genel olarak, **aynÄ± yaÅŸam dÃ¶ngÃ¼sÃ¼ne** sahip **kaynaklarÄ±** aynÄ± kaynak grubuna ekleyin, bÃ¶ylece bunlarÄ± grup olarak kolayca daÄŸÄ±tabilir, gÃ¼ncelleyebilir ve silebilirsiniz.

TÃ¼m **kaynaklar** bir **kaynak grubunun iÃ§inde** olmalÄ± ve yalnÄ±zca bir gruba ait olabilir; eÄŸer bir kaynak grubu silinirse, iÃ§indeki tÃ¼m kaynaklar da silinir.

### Ä°dari Birimler

[Belgelerden:](https://learn.microsoft.com/en-us/entra/identity/role-based-access-control/admin-units-manage) Ä°dari birimler, organizasyonunuzu istediÄŸiniz **herhangi bir birime** **alt bÃ¶lÃ¼mlere ayÄ±rmanÄ±za** ve ardÄ±ndan **yalnÄ±zca o birimin Ã¼yelerini yÃ¶netebilen belirli yÃ¶neticiler atamanÄ±za** olanak tanÄ±r. Ã–rneÄŸin, bÃ¼yÃ¼k bir Ã¼niversitedeki her okulun yÃ¶neticilerine izinleri devretmek iÃ§in idari birimleri kullanabilirsiniz, bÃ¶ylece yalnÄ±zca MÃ¼hendislik FakÃ¼ltesi'nde eriÅŸimi kontrol edebilir, kullanÄ±cÄ±larÄ± yÃ¶netebilir ve politikalarÄ± belirleyebilirler.

Sadece **kullanÄ±cÄ±lar**, **gruplar** ve **cihazlar** bir **idari birimin** **Ã¼yesi** olabilir.

Bu nedenle, bir **Ä°dari birim**, bazÄ± **Ã¼yeleri** iÃ§erecek ve diÄŸer **prensipler** bu idari **birim Ã¼zerinde izinler atayacaktÄ±r**; bu izinleri kullanarak idari birimin Ã¼yelerini **yÃ¶netebilirler**.

## Azure vs Azure AD vs Azure AD Alan Hizmetleri

**Azure AD**'nin **Azure** iÃ§inde bir hizmet olduÄŸunu belirtmek Ã¶nemlidir. **Azure**, Microsoft'un **bulut platformu** iken **Azure AD**, Azure'daki kurumsal **kimlik** **hizmetidir**.\
AyrÄ±ca, **Azure AD, Windows Active Directory gibi deÄŸildir**, tamamen farklÄ± bir ÅŸekilde Ã§alÄ±ÅŸan bir kimlik hizmetidir. Windows Active Directory ortamÄ±nÄ±z iÃ§in Azure'da bir **Alan Denetleyicisi Ã§alÄ±ÅŸtÄ±rmak** istiyorsanÄ±z, **Azure AD Alan Hizmetleri**'ni kullanmanÄ±z gerekir.

## Prensipler

Azure, farklÄ± tÃ¼rde prensipleri destekler:

* **KullanÄ±cÄ±**: EriÅŸim iÃ§in kimlik bilgilerine sahip bir **kiÅŸi**.
* **Grup**: Birlikte yÃ¶netilen bir **prensipler grubu**. Gruplara verilen **izinler**, **Ã¼yeleri** tarafÄ±ndan **devralÄ±nÄ±r**.
* **Hizmet Prensibi/Åirket UygulamalarÄ±**: Azure kaynaklarÄ±na eriÅŸim iÃ§in **uygulamalar**, barÄ±ndÄ±rÄ±lan hizmetler ve otomatik araÃ§larla **kullanÄ±m** iÃ§in oluÅŸturulmuÅŸ bir **kimliktir**. Bu eriÅŸim, hizmet prensibine atanan rollerle **kÄ±sÄ±tlanÄ±r**, bÃ¶ylece **hangi kaynaklarÄ±n eriÅŸilebileceÄŸi** ve hangi seviyede eriÅŸileceÄŸi Ã¼zerinde kontrol saÄŸlar. GÃ¼venlik nedenleriyle, otomatik araÃ§larla **hizmet prensiplerini kullanmak** her zaman Ã¶nerilir; kullanÄ±cÄ± kimliÄŸi ile giriÅŸ yapmalarÄ±na izin vermektense.

Bir **hizmet prensibi** oluÅŸtururken, **ÅŸifre kimlik doÄŸrulamasÄ±** veya **sertifika kimlik doÄŸrulamasÄ±** arasÄ±nda seÃ§im yapabilirsiniz.

* **Åifre** kimlik doÄŸrulamasÄ±nÄ± (varsayÄ±lan olarak) seÃ§erseniz, **oluÅŸturulan ÅŸifreyi kaydedin** Ã§Ã¼nkÃ¼ bir daha eriÅŸemezsiniz.
* Sertifika kimlik doÄŸrulamasÄ±nÄ± seÃ§erseniz, **uygulamanÄ±n Ã¶zel anahtara eriÅŸimi olmasÄ±nÄ±** saÄŸlayÄ±n.
* **YÃ¶netilen Kimlik (Metadata Kimlik Bilgileri)**: Azure Active Directory'deki yÃ¶netilen kimlikler, uygulamalarÄ±n kimliÄŸini **otomatik olarak yÃ¶netme** Ã§Ã¶zÃ¼mÃ¼ sunar. Bu kimlikler, Azure Active Directory (**Azure AD**) kimlik doÄŸrulamasÄ± ile uyumlu **kaynaklara** **baÄŸlanmak** amacÄ±yla uygulamalar tarafÄ±ndan kullanÄ±lÄ±r. YÃ¶netilen kimlikleri kullanarak, uygulamalar **Azure AD jetonlarÄ±nÄ± gÃ¼vence altÄ±na alabilir** ve kimlik bilgilerini doÄŸrudan yÃ¶netme ihtiyacÄ±nÄ± ortadan kaldÄ±rabilir. Ä°ki tÃ¼r yÃ¶netilen kimlik vardÄ±r:
* **Sistem-atÄ±f**. BazÄ± Azure hizmetleri, bir hizmet Ã¶rneÄŸi Ã¼zerinde **yÃ¶netilen kimliÄŸi doÄŸrudan etkinleÅŸtirmenize** olanak tanÄ±r. Sistem-atÄ±f yÃ¶netilen kimliÄŸi etkinleÅŸtirdiÄŸinizde, Azure AD'de bir kimlik oluÅŸturulur. Kimlik, **o hizmet Ã¶rneÄŸinin yaÅŸam dÃ¶ngÃ¼sÃ¼ne** baÄŸlÄ±dÄ±r. **Kaynak** silindiÄŸinde, Azure otomatik olarak **kimliÄŸi** sizin iÃ§in **silmiÅŸtir**. TasarÄ±m gereÄŸi, yalnÄ±zca o Azure kaynaÄŸÄ± bu kimliÄŸi kullanarak Azure AD'den jeton talep edebilir.
* **KullanÄ±cÄ±-atÄ±f**. AyrÄ±ca, baÄŸÄ±msÄ±z bir Azure kaynaÄŸÄ± olarak bir yÃ¶netilen kimlik oluÅŸturabilirsiniz. Bir [kullanÄ±cÄ±-atÄ±f yÃ¶netilen kimliÄŸi](https://learn.microsoft.com/en-us/azure/active-directory/managed-identities-azure-resources/how-to-manage-ua-identity-portal) oluÅŸturabilir ve bunu bir veya **daha fazla Azure hizmeti Ã¶rneÄŸine** (birden fazla kaynak) atayabilirsiniz. KullanÄ±cÄ±-atÄ±f yÃ¶netilen kimlikler iÃ§in, **kimlik, onu kullanan kaynaklardan ayrÄ± olarak yÃ¶netilir**.

## Roller ve Ä°zinler

**Roller**, **prensiplere** bir **kapsamda** atanÄ±r: `prensip -[ROLÃœ VAR]->(kapsam)`

**Gruplara** atanan **roller**, grubun tÃ¼m **Ã¼yeleri** tarafÄ±ndan **devralÄ±nÄ±r**.

RolÃ¼n atandÄ±ÄŸÄ± kapsama baÄŸlÄ± olarak, **rol**, kapsama dahil **diÄŸer kaynaklara** **devralÄ±nabilir**. Ã–rneÄŸin, kullanÄ±cÄ± A'nÄ±n bir **abonelikte rolÃ¼** varsa, o **rolÃ¼, abonelikteki tÃ¼m kaynak gruplarÄ±nda** ve **kaynak grubundaki tÃ¼m kaynaklarda** olacaktÄ±r.

### **Klasik Roller**

| **Sahip**                     | <ul><li>TÃ¼m kaynaklara tam eriÅŸim</li><li>DiÄŸer kullanÄ±cÄ±lar iÃ§in eriÅŸimi yÃ¶netebilir</li></ul> | TÃ¼m kaynak tÃ¼rleri |
| ----------------------------- | ---------------------------------------------------------------------------------------- | ------------------ |
| **KatkÄ±da Bulunan**               | <ul><li>TÃ¼m kaynaklara tam eriÅŸim</li><li>EriÅŸimi yÃ¶netemez</li></ul>              | TÃ¼m kaynak tÃ¼rleri |
| **Okuyucu**                    | â€¢ TÃ¼m kaynaklarÄ± gÃ¶rÃ¼ntÃ¼leyin                                                                     | TÃ¼m kaynak tÃ¼rleri |
| **KullanÄ±cÄ± EriÅŸim YÃ¶neticisi** | <ul><li>TÃ¼m kaynaklarÄ± gÃ¶rÃ¼ntÃ¼leyin</li><li>DiÄŸer kullanÄ±cÄ±lar iÃ§in eriÅŸimi yÃ¶netebilir</li></ul>           | TÃ¼m kaynak tÃ¼rleri |

### YerleÅŸik Roller

[Belgelerden: ](https://learn.microsoft.com/en-us/azure/role-based-access-control/built-in-roles)[Azure rol tabanlÄ± eriÅŸim kontrolÃ¼ (Azure RBAC)](https://learn.microsoft.com/en-us/azure/role-based-access-control/overview), **kullanÄ±cÄ±lara, gruplara, hizmet prensiplerine ve yÃ¶netilen kimliklere** atayabileceÄŸiniz birkaÃ§ Azure **yerleÅŸik rolÃ¼** vardÄ±r. Rol atamalarÄ±, **Azure kaynaklarÄ±na eriÅŸimi kontrol etmenin** yoludur. YerleÅŸik roller, organizasyonunuzun Ã¶zel ihtiyaÃ§larÄ±nÄ± karÅŸÄ±lamÄ±yorsa, kendi [**Azure Ã¶zel rollerinizi**](https://learn.microsoft.com/en-us/azure/role-based-access-control/custom-roles)** oluÅŸturabilirsiniz.**

**YerleÅŸik** roller yalnÄ±zca **amaÃ§landÄ±klarÄ± kaynaklara** uygulanÄ±r; Ã¶rneÄŸin, **Hesaplama** kaynaklarÄ± Ã¼zerindeki bu 2 yerleÅŸik rol Ã¶rneÄŸine bakÄ±n:

| [Disk Yedekleme Okuyucusu](https://learn.microsoft.com/en-us/azure/role-based-access-control/built-in-roles#disk-backup-reader)                 | Disk yedeklemesi gerÃ§ekleÅŸtirmek iÃ§in yedekleme kasasÄ±na izin verir.      | 3e5e47e6-65f7-47ef-90b5-e5dd4d455f24 |
| ----------------------------------------------------------------------------------------------------------------------------------------- | ---------------------------------------------------------------- | ------------------------------------ |
| [Sanal Makine KullanÄ±cÄ± GiriÅŸi](https://learn.microsoft.com/en-us/azure/role-based-access-control/built-in-roles#virtual-machine-user-login) | Portaldaki Sanal Makineleri gÃ¶rÃ¼ntÃ¼leyin ve normal bir kullanÄ±cÄ± olarak giriÅŸ yapÄ±n. | fb879df8-f326-4884-b1cf-06f3ad86be52 |

Bu roller, **yÃ¶netim gruplarÄ±, abonelikler ve kaynak gruplarÄ±** gibi mantÄ±ksal konteynerler Ã¼zerinde de atanabilir ve etkilenen prensipler, **bu konteynerlerin iÃ§indeki kaynaklar Ã¼zerinde** bu rollere sahip olacaktÄ±r.

* Burada [**tÃ¼m Azure yerleÅŸik rollerinin**](https://learn.microsoft.com/en-us/azure/role-based-access-control/built-in-roles) bir listesini bulabilirsiniz.
* Burada [**tÃ¼m Azure AD yerleÅŸik rollerinin**](https://learn.microsoft.com/en-us/azure/active-directory/roles/permissions-reference) bir listesini bulabilirsiniz.

### Ã–zel Roller

Azure ayrÄ±ca, kullanÄ±cÄ±nÄ±n ihtiyaÃ§ duyduÄŸu izinlerle [**Ã¶zel roller**](https://learn.microsoft.com/en-us/azure/role-based-access-control/custom-roles) oluÅŸturmayÄ± da saÄŸlar.

### Ä°zin Reddedildi

* Bir **prensibin bir kaynaÄŸa eriÅŸimi olmasÄ± iÃ§in**, ona aÃ§Ä±k bir rol verilmesi gerekir (herhangi bir ÅŸekilde) **ona bu izni vermek**.
* AÃ§Ä±k bir **reddetme rolÃ¼ atamasÄ±**, izin veren rolÃ¼n Ã¶nceliÄŸine sahiptir.

<figure><img src="../../.gitbook/assets/image (191).png" alt=""><figcaption></figcaption></figure>

### KÃ¼resel YÃ¶netici

KÃ¼resel YÃ¶netici rolÃ¼ne sahip kullanÄ±cÄ±lar, **kÃ¶k yÃ¶netim grubuna KullanÄ±cÄ± EriÅŸim YÃ¶neticisi Azure rolÃ¼ne 'yÃ¼kseltme'** yeteneÄŸine sahiptir. Bu, bir KÃ¼resel YÃ¶neticinin **tÃ¼m Azure aboneliklerini ve yÃ¶netim gruplarÄ±nÄ±** yÃ¶netebileceÄŸi anlamÄ±na gelir.\
Bu yÃ¼kseltme, sayfanÄ±n sonunda yapÄ±labilir: [https://portal.azure.com/#view/Microsoft\_AAD\_IAM/ActiveDirectoryMenuBlade/\~/Properties](https://portal.azure.com/#view/Microsoft\_AAD\_IAM/ActiveDirectoryMenuBlade/\~/Properties)

<figure><img src="../../.gitbook/assets/image (162).png" alt=""><figcaption></figcaption></figure>

### Azure PolitikalarÄ±

Azure politikalarÄ±, Microsoft Azure'da, bulut biliÅŸim hizmetinde, organizasyon standartlarÄ±nÄ± yÃ¶netmeye ve uygulamaya yardÄ±mcÄ± olan bir dizi **kural ve dÃ¼zenlemeler**dir ve Ã¶lÃ§ekli uyumu deÄŸerlendirmeye yardÄ±mcÄ± olur. Bu politikalar, **Azure kaynaklarÄ±nÄ±z** Ã¼zerinde farklÄ± kurallarÄ± zorunlu kÄ±larak, bu kaynaklarÄ±n kurumsal standartlara ve hizmet dÃ¼zeyi anlaÅŸmalarÄ±na uygun kalmasÄ±nÄ± saÄŸlar.

Azure politikalarÄ±, bulut yÃ¶netimi ve gÃ¼venliÄŸi iÃ§in kritik Ã¶neme sahiptir; kaynaklarÄ±n dÃ¼zgÃ¼n ve verimli bir ÅŸekilde kullanÄ±lmasÄ±nÄ± saÄŸlarken, dÄ±ÅŸ dÃ¼zenlemelere ve iÃ§ politikalara uyum saÄŸlamaya yardÄ±mcÄ± olur.\
BazÄ± Ã¶rnekler:

1. **Belirli Azure BÃ¶lgeleri ile Uyum SaÄŸlama**: Bu politika, tÃ¼m kaynaklarÄ±n belirli Azure bÃ¶lgelerinde daÄŸÄ±tÄ±lmasÄ±nÄ± saÄŸlar. Ã–rneÄŸin, bir ÅŸirket, tÃ¼m verilerinin GDPR uyumu iÃ§in Avrupa'da saklandÄ±ÄŸÄ±ndan emin olmak isteyebilir.
2. **Ä°simlendirme StandartlarÄ±nÄ± Zorunlu KÄ±lma**: Politikalar, Azure kaynaklarÄ± iÃ§in isimlendirme kurallarÄ±nÄ± zorunlu kÄ±labilir. Bu, bÃ¼yÃ¼k ortamlarda kaynaklarÄ± isimlerine gÃ¶re dÃ¼zenlemeye ve kolayca tanÄ±mlamaya yardÄ±mcÄ± olur.
3. **Belirli Kaynak TÃ¼rlerini KÄ±sÄ±tlama**: Bu politika, belirli tÃ¼rde kaynaklarÄ±n oluÅŸturulmasÄ±nÄ± kÄ±sÄ±tlayabilir. Ã–rneÄŸin, maliyetleri kontrol etmek iÃ§in belirli VM boyutlarÄ± gibi pahalÄ± kaynak tÃ¼rlerinin oluÅŸturulmasÄ±nÄ± engelleyen bir politika belirlenebilir.
4. **Etiketleme PolitikalarÄ±nÄ± Zorunlu KÄ±lma**: Etiketler, kaynak yÃ¶netimi iÃ§in kullanÄ±lan Azure kaynaklarÄ±yla iliÅŸkili anahtar-deÄŸer Ã§iftleridir. Politikalar, belirli etiketlerin mevcut olmasÄ±nÄ± veya tÃ¼m kaynaklar iÃ§in belirli deÄŸerlere sahip olmasÄ±nÄ± zorunlu kÄ±labilir. Bu, maliyet takibi, sahiplik veya kaynaklarÄ±n kategorize edilmesi iÃ§in faydalÄ±dÄ±r.
5. **Kaynaklara Kamu EriÅŸimini SÄ±nÄ±rlama**: Politikalar, belirli kaynaklarÄ±n, Ã¶rneÄŸin depolama hesaplarÄ± veya veritabanlarÄ±nÄ±n, kamu uÃ§ noktalarÄ±na sahip olmamasÄ±nÄ± zorunlu kÄ±labilir; bÃ¶ylece yalnÄ±zca organizasyonun aÄŸÄ± iÃ§inde eriÅŸilebilir hale gelirler.
6. **GÃ¼venlik AyarlarÄ±nÄ± Otomatik Olarak Uygulama**: Politikalar, tÃ¼m VM'lere belirli bir aÄŸ gÃ¼venlik grubunu uygulamak veya tÃ¼m depolama hesaplarÄ±nÄ±n ÅŸifreleme kullanmasÄ±nÄ± saÄŸlamak gibi kaynaklara gÃ¼venlik ayarlarÄ±nÄ± otomatik olarak uygulamak iÃ§in kullanÄ±labilir.

Azure PolitikalarÄ±nÄ±n, Azure hiyerarÅŸisinin herhangi bir seviyesine eklenebileceÄŸini unutmayÄ±n, ancak genellikle **kÃ¶k yÃ¶netim grubunda** veya diÄŸer yÃ¶netim gruplarÄ±nda kullanÄ±lÄ±rlar.

### Ä°zin KapsamÄ±

Azure'da **izinler, hiyerarÅŸinin herhangi bir parÃ§asÄ±na atanabilir**. Bu, yÃ¶netim gruplarÄ±nÄ±, abonelikleri, kaynak gruplarÄ±nÄ± ve bireysel kaynaklarÄ± iÃ§erir. Ä°zinler, atandÄ±klarÄ± varlÄ±ÄŸÄ±n **iÃ§indeki kaynaklar** tarafÄ±ndan **devralÄ±nÄ±r**.

Bu hiyerarÅŸik yapÄ±, eriÅŸim izinlerinin verimli ve Ã¶lÃ§eklenebilir bir ÅŸekilde yÃ¶netilmesini saÄŸlar.

<figure><img src="../../.gitbook/assets/image (26).png" alt=""><figcaption></figcaption></figure>

### Azure RBAC vs ABAC

**RBAC** (rol tabanlÄ± eriÅŸim kontrolÃ¼), Ã¶nceki bÃ¶lÃ¼mlerde gÃ¶rdÃ¼ÄŸÃ¼mÃ¼z ÅŸeydir: **Bir prensibe bir rol atayarak ona bir kaynaÄŸa eriÅŸim verme**.\
Ancak, bazÄ± durumlarda **daha ince ayrÄ±ntÄ±lÄ± eriÅŸim yÃ¶netimi** saÄŸlamak veya **yÃ¼zlerce** rol **atamasÄ±nÄ±** yÃ¶netmeyi **basitleÅŸtirmek** isteyebilirsiniz.

Azure **ABAC** (Ã¶zellik tabanlÄ± eriÅŸim kontrolÃ¼), belirli eylemler baÄŸlamÄ±nda **Ã¶zelliklere dayalÄ± rol atama koÅŸullarÄ±** ekleyerek Azure RBAC Ã¼zerine inÅŸa edilmiÅŸtir. Bir _rol atama koÅŸulu_, **rol atamanÄ±za isteÄŸe baÄŸlÄ± olarak ekleyebileceÄŸiniz ek bir kontrol** olup, daha ince ayrÄ±ntÄ±lÄ± eriÅŸim kontrolÃ¼ saÄŸlar. Bir koÅŸul, rol tanÄ±mÄ±nÄ±n ve rol atamasÄ±nÄ±n bir parÃ§asÄ± olarak verilen izinleri filtreler. Ã–rneÄŸin, bir nesneyi okumak iÃ§in nesnenin belirli bir etikete sahip olmasÄ±nÄ± **gerektiren** bir koÅŸul ekleyebilirsiniz.\
Belirli kaynaklara eriÅŸimi **aÃ§Ä±kÃ§a reddedemezsiniz** **koÅŸullar** kullanarak.

### VarsayÄ±lan KullanÄ±cÄ± Ä°zinleri

Temel bir kullanÄ±cÄ±, AzureAD'nin bazÄ± bÃ¶lÃ¼mlerini listelemek iÃ§in bazÄ± **varsayÄ±lan izinlere** sahip olacaktÄ±r:

* TÃ¼m kullanÄ±cÄ±larÄ±, GruplarÄ±, UygulamalarÄ±, CihazlarÄ±, Rolleri, Abonelikleri ve bunlarÄ±n genel Ã¶zelliklerini okuma
* Misafirleri davet etme (_kapalÄ± hale getirilebilir_)
* GÃ¼venlik gruplarÄ± oluÅŸturma
* Gizli olmayan Grup Ã¼yeliklerini okuma
* Sahip olunan gruplara misafir ekleme
* Yeni uygulama oluÅŸturma (_kapalÄ± hale getirilebilir_)
* Azure'a 50'ye kadar cihaz ekleme (_kapalÄ± hale getirilebilir_)

KullanÄ±cÄ±larÄ±n [**varsayÄ±lan izinler listesini**](https://learn.microsoft.com/en-us/azure/active-directory/fundamentals/users-default-permissions) belgelerde gÃ¶rebilirsiniz. AyrÄ±ca, o listede **misafirlerin varsayÄ±lan izinler listesini** de gÃ¶rebilirsiniz.

{% hint style="info" %}
Azure kaynaklarÄ±nÄ± listelemek iÃ§in kullanÄ±cÄ±nÄ±n iznin aÃ§Ä±k bir ÅŸekilde verilmesi gerektiÄŸini unutmayÄ±n.
{% endhint %}

### AyrÄ±calÄ±klÄ± Kimlik YÃ¶netimi (PIM)

Azure'daki AyrÄ±calÄ±klÄ± Kimlik YÃ¶netimi (PIM), Azure Active Directory ve Azure'daki ayrÄ±calÄ±klÄ± eriÅŸimi **yÃ¶netmek, kontrol etmek ve izlemek** iÃ§in bir araÃ§tÄ±r. **AnlÄ±k ve zaman sÄ±nÄ±rlÄ± ayrÄ±calÄ±klÄ± eriÅŸim** saÄŸlayarak, **onay iÅŸ akÄ±ÅŸlarÄ±nÄ± zorunlu kÄ±larak ve ek kimlik doÄŸrulama gerektirerek** gÃ¼venliÄŸi artÄ±rÄ±r. Bu yaklaÅŸÄ±m, yÃ¼kseltilmiÅŸ izinlerin yalnÄ±zca gerektiÄŸinde ve belirli bir sÃ¼re iÃ§in verilmesini saÄŸlayarak yetkisiz eriÅŸim riskini en aza indirir.

## Kimlik DoÄŸrulama JetonlarÄ±

OIDC'de kullanÄ±lan **Ã¼Ã§ tÃ¼r jeton** vardÄ±r:

* [**EriÅŸim JetonlarÄ±**](https://learn.microsoft.com/en-us/azure/active-directory/develop/access-tokens)**:** Ä°stemci, **kaynaklara eriÅŸmek** iÃ§in bu jetonu kaynak sunucusuna sunar. Bu, yalnÄ±zca belirli bir kullanÄ±cÄ±, istemci ve kaynak kombinasyonu iÃ§in kullanÄ±labilir ve **iptal edilemez**; sÃ¼resi dolana kadar - varsayÄ±lan olarak 1 saattir. KullanÄ±mÄ± dÃ¼ÅŸÃ¼k tespit edilir.
* **ID JetonlarÄ±**: Ä°stemci, bu **jetonu yetkilendirme sunucusundan** alÄ±r. KullanÄ±cÄ± hakkÄ±nda temel bilgileri iÃ§erir. **Belirli bir kullanÄ±cÄ± ve istemci kombinasyonuna** baÄŸlÄ±dÄ±r.
* **Yenileme JetonlarÄ±**: Ä°stemciye eriÅŸim jetonu ile saÄŸlanÄ±r. **Yeni eriÅŸim ve ID jetonlarÄ± almak** iÃ§in kullanÄ±lÄ±r. Belirli bir kullanÄ±cÄ± ve istemci kombinasyonuna baÄŸlÄ±dÄ±r ve iptal edilebilir. VarsayÄ±lan sÃ¼resi dolmuÅŸ yenileme jetonlarÄ± iÃ§in **90 gÃ¼ndÃ¼r** ve **aktif jetonlar iÃ§in sÃ¼resi yoktur**.

{% hint style="warning" %}
**KoÅŸullu eriÅŸim** bilgileri **JWT** iÃ§inde **saklanÄ±r**. Bu nedenle, **izin verilen bir IP adresinden jeton talep ederseniz**, o **IP** jetonda **saklanÄ±r** ve ardÄ±ndan o jetonu **izin verilmeyen bir IP'den kaynaklara eriÅŸmek iÃ§in** kullanabilirsiniz.
{% endhint %}

EriÅŸim jetonlarÄ±nÄ± talep etmenin ve bunlarla giriÅŸ yapmanÄ±n farklÄ± yollarÄ±nÄ± Ã¶ÄŸrenmek iÃ§in aÅŸaÄŸÄ±daki sayfayÄ± kontrol edin:

{% content-ref url="az-azuread/" %}
[az-azuread](az-azuread/)
{% endcontent-ref %}

En yaygÄ±n API uÃ§ noktalarÄ± ÅŸunlardÄ±r:

* **Azure Kaynak YÃ¶neticisi** (ARM): management.azure.com
* **Microsoft Graph**: graph.microsoft.com (kaldÄ±rÄ±lan Azure AD Graph, graph.windows.net'dir)

## Referanslar

* [https://learn.microsoft.com/en-us/azure/governance/management-groups/overview](https://learn.microsoft.com/en-us/azure/governance/management-groups/overview)
* [https://learn.microsoft.com/en-us/azure/cloud-adoption-framework/ready/azure-best-practices/organize-subscriptions](https://learn.microsoft.com/en-us/azure/cloud-adoption-framework/ready/azure-best-practices/organize-subscriptions)
* [https://abouttmc.com/glossary/azure-subscription/#:\~:text=An%20Azure%20subscription%20is%20a,the%20subscription%20it%20belongs%20to.](https://abouttmc.com/glossary/azure-subscription/)
* [https://learn.microsoft.com/en-us/azure/role-based-access-control/overview#how-azure-rbac-determines-if-a-user-has-access-to-a-resource](https://learn.microsoft.com/en-us/azure/role-based-access-control/overview#how-azure-rbac-determines-if-a-user-has-access-to-a-resource)

{% hint style="success" %}
AWS Hacking'i Ã¶ÄŸrenin ve pratik yapÄ±n:<img src="../../.gitbook/assets/image (1).png" alt="" data-size="line">[**HackTricks EÄŸitim AWS KÄ±rmÄ±zÄ± TakÄ±m UzmanÄ± (ARTE)**](https://training.hacktricks.xyz/courses/arte)<img src="../../.gitbook/assets/image (1).png" alt="" data-size="line">\
GCP Hacking'i Ã¶ÄŸrenin ve pratik yapÄ±n: <img src="../../.gitbook/assets/image (2).png" alt="" data-size="line">[**HackTricks EÄŸitim GCP KÄ±rmÄ±zÄ± TakÄ±m UzmanÄ± (GRTE)**<img src="../../.gitbook/assets/image (2).png" alt="" data-size="line">](https://training.hacktricks.xyz/courses/grte)

<details>

<summary>HackTricks'i Destekleyin</summary>

* [**abonelik planlarÄ±nÄ±**](https://github.com/sponsors/carlospolop) kontrol edin!
* **ğŸ’¬ [**Discord grubuna**](https://discord.gg/hRep4RUj7f) veya [**telegram grubuna**](https://t.me/peass) katÄ±lÄ±n ya da **Twitter'da** ğŸ¦ [**@hacktricks\_live**](https://twitter.com/hacktricks\_live)** bizi takip edin.**
* **Hacking ipuÃ§larÄ±nÄ± paylaÅŸmak iÃ§in** [**HackTricks**](https://github.com/carlospolop/hacktricks) ve [**HackTricks Cloud**](https://github.com/carlospolop/hacktricks-cloud) github reposuna PR gÃ¶nderin.

</details>
{% endhint %}
