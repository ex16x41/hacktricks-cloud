# Az - Temel Bilgiler

{% hint style="success" %}
AWS Hacking'i Ã¶ÄŸrenin ve pratik yapÄ±n:<img src="../../.gitbook/assets/image (1) (1) (1).png" alt="" data-size="line">[**HackTricks Training AWS Red Team Expert (ARTE)**](https://training.hacktricks.xyz/courses/arte)<img src="../../.gitbook/assets/image (1) (1) (1).png" alt="" data-size="line">\
GCP Hacking'i Ã¶ÄŸrenin ve pratik yapÄ±n: <img src="../../.gitbook/assets/image (2).png" alt="" data-size="line">[**HackTricks Training GCP Red Team Expert (GRTE)**<img src="../../.gitbook/assets/image (2).png" alt="" data-size="line">](https://training.hacktricks.xyz/courses/grte)

<details>

<summary>HackTricks'i Destekleyin</summary>

* [**abonelik planlarÄ±nÄ±**](https://github.com/sponsors/carlospolop) kontrol edin!
* **Bize katÄ±lÄ±n** ğŸ’¬ [**Discord grubuna**](https://discord.gg/hRep4RUj7f) veya [**telegram grubuna**](https://t.me/peass) veya **bizi takip edin** **Twitter** ğŸ¦ [**@hacktricks\_live**](https://twitter.com/hacktricks_live)**.**
* Hacking ipuÃ§larÄ±nÄ± paylaÅŸmak iÃ§in [**HackTricks**](https://github.com/carlospolop/hacktricks) ve [**HackTricks Cloud**](https://github.com/carlospolop/hacktricks-cloud) github reposuna PR gÃ¶nderin.

</details>
{% endhint %}

## Organizasyon HiyerarÅŸisi

<figure><img src="https://lh7-rt.googleusercontent.com/slidesz/AGV_vUchBvhjIdWWR2ldAkWiZMdmrcEYD9Ti5UAa3zAGr9YbAnx4Q_gZNp_zvOU429vgWZ_ixoYHQKdC8bGgkhWYCy591SRIFj6RKCj4BEpVQixAGsp3T3O5sS3k7x5CTaJ-SCBNC7i5KluLyxdiXoZsH1F0ko1Gv88=s2048?key=gSyKQr3HTyhvHa28Rf7LVA" alt=""><figcaption></figcaption></figure>

### YÃ¶netim GruplarÄ±

* **DiÄŸer yÃ¶netim gruplarÄ±nÄ± veya abonelikleri** iÃ§erebilir.
* Bu, yÃ¶netim grubu dÃ¼zeyinde RBAC ve Azure Policy gibi **yÃ¶netim kontrollerinin uygulanmasÄ±na** olanak tanÄ±r ve bunlarÄ±n grup iÃ§indeki tÃ¼m abonelikler tarafÄ±ndan **devralÄ±nmasÄ±nÄ±** saÄŸlar.
* Tek bir dizinde **10.000 yÃ¶netim** grubu desteklenebilir.
* Bir yÃ¶netim grubu aÄŸacÄ± **altÄ± seviyeye kadar derinliÄŸi** destekleyebilir. Bu sÄ±nÄ±r, kÃ¶k dÃ¼zeyini veya abonelik dÃ¼zeyini iÃ§ermez.
* Her yÃ¶netim grubu ve abonelik **sadece bir ebeveyn** destekleyebilir.
* Birden fazla yÃ¶netim grubu oluÅŸturulabilse de **sadece 1 kÃ¶k yÃ¶netim grubu** vardÄ±r.
* KÃ¶k yÃ¶netim grubu **tÃ¼m** **diÄŸer yÃ¶netim gruplarÄ±nÄ± ve abonelikleri** **iÃ§erir** ve **taÅŸÄ±namaz veya silinemez**.
* Tek bir yÃ¶netim grubundaki tÃ¼m abonelikler **aynÄ± Entra ID kiracÄ±sÄ±na** gÃ¼venmelidir.

<figure><img src="../../.gitbook/assets/image (147).png" alt=""><figcaption><p><a href="https://td-mainsite-cdn.tutorialsdojo.com/wp-content/uploads/2023/02/managementgroups-768x474.png">https://td-mainsite-cdn.tutorialsdojo.com/wp-content/uploads/2023/02/managementgroups-768x474.png</a></p></figcaption></figure>

### Azure Abonelikleri

* Bu, kaynaklarÄ±n (VM'ler, DB'lerâ€¦) Ã§alÄ±ÅŸtÄ±rÄ±labileceÄŸi ve faturalandÄ±rÄ±lacaÄŸÄ± baÅŸka bir **mantÄ±ksal konteynerdir**.
* **Ebeveyni** her zaman bir **yÃ¶netim grubudur** (ve kÃ¶k yÃ¶netim grubu olabilir) Ã§Ã¼nkÃ¼ abonelikler diÄŸer abonelikleri iÃ§eremez.
* **Sadece bir Entra ID** dizisine gÃ¼veniyor
* Abonelik dÃ¼zeyinde (veya ebeveynlerinden herhangi birinde) uygulanan **izinler**, abonelik iÃ§indeki tÃ¼m kaynaklara **devralÄ±nÄ±r**.

### Kaynak GruplarÄ±

[Belgelerden:](https://learn.microsoft.com/en-us/azure/azure-resource-manager/management/manage-resource-groups-python?tabs=macos#what-is-a-resource-group) Bir kaynak grubu, bir Azure Ã§Ã¶zÃ¼mÃ¼ iÃ§in **iliÅŸkili kaynaklarÄ±** tutan bir **konteynerdir**. Kaynak grubu, Ã§Ã¶zÃ¼m iÃ§in tÃ¼m kaynaklarÄ± veya yalnÄ±zca **bir grup olarak yÃ¶netmek istediÄŸiniz kaynaklarÄ±** iÃ§erebilir. Genel olarak, aynÄ± yaÅŸam dÃ¶ngÃ¼sÃ¼nÃ¼ paylaÅŸan **kaynaklarÄ±** aynÄ± kaynak grubuna ekleyin, bÃ¶ylece bunlarÄ± grup olarak kolayca daÄŸÄ±tabilir, gÃ¼ncelleyebilir ve silebilirsiniz.

TÃ¼m **kaynaklar** **bir kaynak grubunun iÃ§inde** olmalÄ± ve yalnÄ±zca bir gruba ait olabilir ve bir kaynak grubu silinirse, iÃ§indeki tÃ¼m kaynaklar da silinir.

<figure><img src="https://lh7-rt.googleusercontent.com/slidesz/AGV_vUfe8U30iP_vdZCvxX4g8nEPRLoo7v0kmCGkDn1frBPn3_GIoZ7VT2LkdsVQWCnrG_HSYNRRPM-1pSECUkbDAB-9YbUYLzpvKVLDETZS81CHWKYM4fDl3oMo5-yvTMnjdLTS2pz8U67xUTIzBhZ25MFMRkq5koKY=s2048?key=gSyKQr3HTyhvHa28Rf7LVA" alt=""><figcaption><p><a href="https://i0.wp.com/azuredays.com/wp-content/uploads/2020/05/org.png?resize=748%2C601&#x26;ssl=1">https://i0.wp.com/azuredays.com/wp-content/uploads/2020/05/org.png?resize=748%2C601&#x26;ssl=1</a></p></figcaption></figure>

### Azure Kaynak Kimlikleri

Azure'daki her kaynak, onu tanÄ±mlayan bir Azure Kaynak KimliÄŸine sahiptir.

Bir Azure Kaynak KimliÄŸinin formatÄ± ÅŸu ÅŸekildedir:

* `/subscriptions/{subscriptionId}/resourceGroups/{resourceGroupName}/providers/{resourceProviderNamespace}/{resourceType}/{resourceName}`

`12345678-1234-1234-1234-123456789012` abonelik kimliÄŸi altÄ±nda `myResourceGroup` kaynak grubunda myVM adÄ±nda bir sanal makine iÃ§in Azure Kaynak KimliÄŸi ÅŸu ÅŸekilde gÃ¶rÃ¼nÃ¼r:

* `/subscriptions/12345678-1234-1234-1234-123456789012/resourceGroups/myResourceGroup/providers/Microsoft.Compute/virtualMachines/myVM`

## Azure vs Entra ID vs Azure AD Alan Hizmetleri

### Azure

Azure, Microsoft'un kapsamlÄ± **bulut biliÅŸim platformudur, geniÅŸ bir hizmet yelpazesi sunar**, sanal makineler, veritabanlarÄ±, yapay zeka ve depolama dahil. UygulamalarÄ± barÄ±ndÄ±rmak ve yÃ¶netmek, Ã¶lÃ§eklenebilir altyapÄ±lar oluÅŸturmak ve bulutta modern iÅŸ yÃ¼klerini Ã§alÄ±ÅŸtÄ±rmak iÃ§in bir temel gÃ¶revi gÃ¶rÃ¼r. Azure, geliÅŸtiricilerin ve BT profesyonellerinin uygulamalarÄ± ve hizmetleri sorunsuz bir ÅŸekilde oluÅŸturmasÄ±na, daÄŸÄ±tmasÄ±na ve yÃ¶netmesine olanak tanÄ±r ve ihtiyaÃ§larÄ± olan her tÃ¼rlÃ¼ kullanÄ±cÄ±ya hitap eder.

### Entra ID (eski adÄ±yla Azure Active Directory)

Entra ID, kimlik doÄŸrulama, yetkilendirme ve kullanÄ±cÄ± eriÅŸim kontrolÃ¼nÃ¼ yÃ¶netmek iÃ§in tasarlanmÄ±ÅŸ bulut tabanlÄ± bir **kimlik ve eriÅŸim yÃ¶netim hizmetidir**. Office 365, Azure ve birÃ§ok Ã¼Ã§Ã¼ncÃ¼ taraf SaaS uygulamasÄ± gibi Microsoft hizmetlerine gÃ¼venli eriÅŸim saÄŸlar. Tek oturum aÃ§ma (SSO), Ã§ok faktÃ¶rlÃ¼ kimlik doÄŸrulama (MFA) ve koÅŸullu eriÅŸim politikalarÄ± gibi Ã¶zellikler sunar.

### Entra Alan Hizmetleri (eski adÄ±yla Azure AD DS)

Entra Alan Hizmetleri, Entra ID'nin yeteneklerini, **geleneksel Windows Active Directory ortamlarÄ±yla uyumlu yÃ¶netilen alan hizmetleri** sunarak geniÅŸletir. LDAP, Kerberos ve NTLM gibi eski protokolleri destekler ve kuruluÅŸlarÄ±n eski uygulamalarÄ± bulutta Ã§alÄ±ÅŸtÄ±rmasÄ±na veya taÅŸÄ±malarÄ±na olanak tanÄ±r. Bu hizmet ayrÄ±ca merkezi yÃ¶netim iÃ§in Grup Ä°lkesi'ni destekler, bÃ¶ylece eski veya AD tabanlÄ± iÅŸ yÃ¼klerinin modern bulut ortamlarÄ±yla bir arada var olmasÄ± gereken senaryolar iÃ§in uygundur.

## Entra ID Prensipleri

### KullanÄ±cÄ±lar

* **Yeni kullanÄ±cÄ±lar**
* SeÃ§ilen kiracÄ±dan e-posta adÄ± ve alanÄ± belirtin
* GÃ¶rÃ¼nen adÄ± belirtin
* Åifre belirtin
* Ã–zellikleri belirtin (ad, iÅŸ unvanÄ±, iletiÅŸim bilgileriâ€¦)
* VarsayÄ±lan kullanÄ±cÄ± tÃ¼rÃ¼ â€œ**Ã¼ye**â€dir
* **DÄ±ÅŸ kullanÄ±cÄ±lar**
* Davet edilecek e-posta ve gÃ¶rÃ¼nÃ¼r adÄ± belirtin (Microsoft dÄ±ÅŸÄ± bir e-posta olabilir)
* Ã–zellikleri belirtin
* VarsayÄ±lan kullanÄ±cÄ± tÃ¼rÃ¼ â€œ**Misafir**â€dir

### Ãœyeler & Misafirlerin VarsayÄ±lan Ä°zinleri

BunlarÄ± [https://learn.microsoft.com/en-us/entra/fundamentals/users-default-permissions](https://learn.microsoft.com/en-us/entra/fundamentals/users-default-permissions) adresinde kontrol edebilirsiniz, ancak diÄŸer eylemler arasÄ±nda bir Ã¼ye ÅŸunlarÄ± yapabilir:

* TÃ¼m kullanÄ±cÄ±larÄ±, GruplarÄ±, UygulamalarÄ±, CihazlarÄ±, Rolleri, Abonelikleri ve bunlarÄ±n genel Ã¶zelliklerini okuyabilir
* Misafirleri davet edebilir (_kapalÄ± hale getirilebilir_)
* GÃ¼venlik gruplarÄ± oluÅŸturabilir
* Gizli olmayan Grup Ã¼yeliklerini okuyabilir
* Sahip olunan gruplara misafir ekleyebilir
* Yeni uygulama oluÅŸturabilir (_kapalÄ± hale getirilebilir_)
* Azure'a 50'ye kadar cihaz ekleyebilir (_kapalÄ± hale getirilebilir_)

{% hint style="info" %}
Azure kaynaklarÄ±nÄ± listelemek iÃ§in kullanÄ±cÄ±nÄ±n izinlerin aÃ§Ä±kÃ§a verilmesi gerekir.
{% endhint %}

### KullanÄ±cÄ±larÄ±n VarsayÄ±lan YapÄ±landÄ±rÄ±labilir Ä°zinleri

* **Ãœyeler (**[**belgeler**](https://learn.microsoft.com/en-gb/entra/fundamentals/users-default-permissions#restrict-member-users-default-permissions)**)**
* UygulamalarÄ± kaydet: VarsayÄ±lan **Evet**
* YÃ¶netici olmayan kullanÄ±cÄ±larÄ±n kiracÄ± oluÅŸturmasÄ±nÄ± kÄ±sÄ±tla: VarsayÄ±lan **HayÄ±r**
* GÃ¼venlik gruplarÄ± oluÅŸtur: VarsayÄ±lan **Evet**
* Microsoft Entra yÃ¶netim portalÄ±na eriÅŸimi kÄ±sÄ±tla: VarsayÄ±lan **HayÄ±r**
* Bu, portala API eriÅŸimini kÄ±sÄ±tlamaz (sadece web)
* KullanÄ±cÄ±larÄ±n LinkedIn ile iÅŸ veya okul hesabÄ±nÄ± baÄŸlamasÄ±na izin ver: VarsayÄ±lan **Evet**
* KullanÄ±cÄ±nÄ±n oturumunu aÃ§Ä±k tutmasÄ±nÄ± gÃ¶ster: VarsayÄ±lan **Evet**
* KullanÄ±cÄ±larÄ±n sahip olduklarÄ± cihazlar iÃ§in BitLocker anahtarÄ±nÄ± kurtarmasÄ±nÄ± kÄ±sÄ±tla: VarsayÄ±lan HayÄ±r (Cihaz AyarlarÄ±nda kontrol edin)
* DiÄŸer kullanÄ±cÄ±larÄ± oku: VarsayÄ±lan **Evet** (Microsoft Graph aracÄ±lÄ±ÄŸÄ±yla)
* **Misafirler**
* **Misafir kullanÄ±cÄ± eriÅŸim kÄ±sÄ±tlamalarÄ±**
* **Misafir kullanÄ±cÄ±lar, Ã¼yelerle aynÄ± eriÅŸime sahiptir** varsayÄ±lan olarak tÃ¼m Ã¼ye kullanÄ±cÄ± izinlerini misafir kullanÄ±cÄ±lara verir.
* **Misafir kullanÄ±cÄ±lar, dizin nesnelerinin Ã¶zelliklerine ve Ã¼yeliklerine sÄ±nÄ±rlÄ± eriÅŸime sahiptir (varsayÄ±lan)** varsayÄ±lan olarak misafir eriÅŸimini yalnÄ±zca kendi kullanÄ±cÄ± profilleriyle sÄ±nÄ±rlÄ±dÄ±r. DiÄŸer kullanÄ±cÄ±lar ve grup bilgilerine eriÅŸim artÄ±k izin verilmez.
* **Misafir kullanÄ±cÄ± eriÅŸimi, kendi dizin nesnelerinin Ã¶zelliklerine ve Ã¼yeliklerine sÄ±nÄ±rlÄ±dÄ±r** en kÄ±sÄ±tlayÄ±cÄ± olanÄ±dÄ±r.
* **Misafirler davet edebilir**
* **KuruluÅŸta herhangi biri, misafir kullanÄ±cÄ±larÄ± davet edebilir, misafirler ve yÃ¶netici olmayanlar dahil (en kapsayÄ±cÄ±) - VarsayÄ±lan**
* **Ãœye kullanÄ±cÄ±lar ve belirli yÃ¶netici rollerine atanmÄ±ÅŸ kullanÄ±cÄ±lar, misafir kullanÄ±cÄ±larÄ± davet edebilir, Ã¼yelik izinleri olan misafirler dahil**
* **Sadece belirli yÃ¶netici rollerine atanmÄ±ÅŸ kullanÄ±cÄ±lar misafir kullanÄ±cÄ±larÄ± davet edebilir**
* **KuruluÅŸta hiÃ§ kimse, yÃ¶netici dahil misafir kullanÄ±cÄ±larÄ± davet edemez (en kÄ±sÄ±tlayÄ±cÄ±)**
* **DÄ±ÅŸ kullanÄ±cÄ±larÄ±n ayrÄ±lmasÄ±**: VarsayÄ±lan **DoÄŸru**
* DÄ±ÅŸ kullanÄ±cÄ±larÄ±n kuruluÅŸu terk etmesine izin ver

{% hint style="success" %}
VarsayÄ±lan olarak kÄ±sÄ±tlanmÄ±ÅŸ olsalar bile, izin verilmiÅŸ kullanÄ±cÄ±lar (Ã¼yeler ve misafirler) Ã¶nceki eylemleri gerÃ§ekleÅŸtirebilir.
{% endhint %}

### **Gruplar**

**2 tÃ¼r grup** vardÄ±r:

* **GÃ¼venlik**: Bu tÃ¼r grup, Ã¼yelere uygulamalara, kaynaklara eriÅŸim vermek ve lisans atamak iÃ§in kullanÄ±lÄ±r. KullanÄ±cÄ±lar, cihazlar, hizmet ilkeleri ve diÄŸer gruplar Ã¼ye olabilir.
* **Microsoft 365**: Bu tÃ¼r grup, iÅŸbirliÄŸi iÃ§in kullanÄ±lÄ±r, Ã¼yelere paylaÅŸÄ±lan bir posta kutusuna, takvime, dosyalara, SharePoint sitesine vb. eriÅŸim verir. Grup Ã¼yeleri yalnÄ±zca kullanÄ±cÄ±lar olabilir.
* Bu, EntraID kiracÄ±sÄ±nÄ±n alanÄ±yla bir **e-posta adresine** sahip olacaktÄ±r.

**2 tÃ¼r Ã¼yelik** vardÄ±r:

* **AtanmÄ±ÅŸ**: Belirli Ã¼yeleri bir gruba manuel olarak eklemeye izin verir.
* **Dinamik Ã¼yelik**: KurallarÄ± kullanarak Ã¼yeliÄŸi otomatik olarak yÃ¶netir, Ã¼yelerin Ã¶zellikleri deÄŸiÅŸtiÄŸinde grup dahil edilmesini gÃ¼nceller.

### **Hizmet Ä°lkeleri**

Bir **Hizmet Ä°lkesi**, **uygulamalar**, barÄ±ndÄ±rÄ±lan hizmetler ve Azure kaynaklarÄ±na eriÅŸim iÃ§in otomatik araÃ§larla **kullanÄ±m** iÃ§in oluÅŸturulmuÅŸ bir **kimliktir**. Bu eriÅŸim, hizmet ilkesine atanan rollerle **kÄ±sÄ±tlanÄ±r**, bÃ¶ylece **hangi kaynaklarÄ±n eriÅŸilebileceÄŸi** ve hangi dÃ¼zeyde eriÅŸileceÄŸi Ã¼zerinde kontrol saÄŸlar. GÃ¼venlik nedenleriyle, **hizmet ilkelerini otomatik araÃ§larla kullanmak** her zaman Ã¶nerilir, kullanÄ±cÄ± kimliÄŸi ile giriÅŸ yapmalarÄ±na izin vermektense.

Bir hizmet ilkesine **doÄŸrudan giriÅŸ yapmak** mÃ¼mkÃ¼ndÃ¼r, bir **gizli anahtar** (ÅŸifre), bir **sertifika** oluÅŸturarak veya Ã¼Ã§Ã¼ncÃ¼ taraf platformlara (Ã¶rneÄŸin, Github Actions) Ã¼zerinden **federasyon** eriÅŸimi vererek.

* **Åifre** kimlik doÄŸrulamasÄ±nÄ± (varsayÄ±lan olarak) seÃ§erseniz, **oluÅŸturulan ÅŸifreyi kaydedin** Ã§Ã¼nkÃ¼ bir daha eriÅŸemezsiniz.
* Sertifika kimlik doÄŸrulamasÄ±nÄ± seÃ§erseniz, **uygulamanÄ±n Ã¶zel anahtara eriÅŸimi olduÄŸundan emin olun**.

### Uygulama KayÄ±tlarÄ±

Bir **Uygulama KaydÄ±**, bir uygulamanÄ±n Entra ID ile entegre olmasÄ±na ve eylemler gerÃ§ekleÅŸtirmesine olanak tanÄ±yan bir yapÄ±landÄ±rmadÄ±r.

#### Ana BileÅŸenler:

1. **Uygulama KimliÄŸi (Ä°stemci KimliÄŸi):** Azure AD'deki uygulamanÄ±z iÃ§in benzersiz bir tanÄ±mlayÄ±cÄ±.
2. **Yeniden YÃ¶nlendirme URI'leri:** Azure AD'nin kimlik doÄŸrulama yanÄ±tlarÄ±nÄ± gÃ¶nderdiÄŸi URL'ler.
3. **Sertifikalar, Gizli Anahtarlar ve Federasyon Kimlik Bilgileri:** UygulamanÄ±n hizmet ilkesine giriÅŸ yapmak iÃ§in bir gizli anahtar veya sertifika oluÅŸturmak veya ona federasyon eriÅŸimi vermek mÃ¼mkÃ¼ndÃ¼r (Ã¶rneÄŸin, Github Actions).&#x20;
1. EÄŸer bir **sertifika** veya **gizli anahtar** oluÅŸturulursa, bir kiÅŸi **hizmet ilkesi olarak giriÅŸ yapmak iÃ§in** CLI araÃ§larÄ±yla **uygulama kimliÄŸini**, **gizli anahtarÄ±** veya **sertifikayÄ±** ve **kiracÄ±yÄ±** (alan veya kimlik) bilerek giriÅŸ yapabilir.
4. **API Ä°zinleri:** UygulamanÄ±n eriÅŸebileceÄŸi kaynaklarÄ± veya API'leri belirtir.
5. **Kimlik DoÄŸrulama AyarlarÄ±:** UygulamanÄ±n desteklediÄŸi kimlik doÄŸrulama akÄ±ÅŸlarÄ±nÄ± tanÄ±mlar (Ã¶rneÄŸin, OAuth2, OpenID Connect).
6. **Hizmet Ä°lkesi**: Bir Uygulama oluÅŸturulduÄŸunda (web konsolundan yapÄ±lÄ±rsa) veya yeni bir kiracÄ±ya yÃ¼klendiÄŸinde bir hizmet ilkesi oluÅŸturulur.
1. **Hizmet ilkesi**, yapÄ±landÄ±rÄ±ldÄ±ÄŸÄ± tÃ¼m istenen izinleri alÄ±r.

### VarsayÄ±lan Onay Ä°zinleri

**Uygulamalar iÃ§in kullanÄ±cÄ± onayÄ±**

* **KullanÄ±cÄ± onayÄ±nÄ± izin vermeyin**
* TÃ¼m uygulamalar iÃ§in bir yÃ¶netici gerekecektir.
* **DoÄŸrulanmÄ±ÅŸ yayÄ±ncÄ±lardan, seÃ§ilen izinler iÃ§in uygulamalar iÃ§in kullanÄ±cÄ± onayÄ±na izin verin (Tavsiye Edilir)**
* TÃ¼m kullanÄ±cÄ±lar, "dÃ¼ÅŸÃ¼k etki" olarak sÄ±nÄ±flandÄ±rÄ±lan izinler iÃ§in, doÄŸrulanmÄ±ÅŸ yayÄ±ncÄ±lardan veya bu kuruluÅŸta kayÄ±tlÄ± uygulamalar iÃ§in onay verebilir.
* **VarsayÄ±lan** dÃ¼ÅŸÃ¼k etki izinleri (bunlarÄ± dÃ¼ÅŸÃ¼k olarak eklemek iÃ§in kabul etmeniz gerektiÄŸini unutmayÄ±n):
* User.Read - oturum aÃ§ma ve kullanÄ±cÄ± profilini okuma
* offline\_access - kullanÄ±cÄ±nÄ±n eriÅŸim verdiÄŸi verilere eriÅŸimi sÃ¼rdÃ¼rme
* openid - kullanÄ±cÄ±larÄ± oturum aÃ§tÄ±rma
* profile - kullanÄ±cÄ±nÄ±n temel profilini gÃ¶rÃ¼ntÃ¼leme
* email - kullanÄ±cÄ±nÄ±n e-posta adresini gÃ¶rÃ¼ntÃ¼leme
* **Uygulamalar iÃ§in kullanÄ±cÄ± onayÄ±na izin ver (VarsayÄ±lan)**
* TÃ¼m kullanÄ±cÄ±lar, herhangi bir uygulamanÄ±n kuruluÅŸun verilerine eriÅŸmesi iÃ§in onay verebilir.

**YÃ¶netici onay talepleri**: VarsayÄ±lan **HayÄ±r**

* KullanÄ±cÄ±lar, onay veremedikleri uygulamalar iÃ§in yÃ¶netici onayÄ± talep edebilir
* EÄŸer **Evet**: Onay taleplerine onay verebilecek KullanÄ±cÄ±lar, Gruplar ve Roller belirtilebilir
* KullanÄ±cÄ±larÄ±n e-posta bildirimleri ve son tarih hatÄ±rlatmalarÄ± alÄ±p almayacaklarÄ±nÄ± da yapÄ±landÄ±rÄ±n&#x20;

### **YÃ¶netilen Kimlik (Meta Veriler)**

Azure Active Directory'deki yÃ¶netilen kimlikler, uygulamalarÄ±n kimliÄŸini **otomatik olarak yÃ¶netme** Ã§Ã¶zÃ¼mÃ¼ sunar. Bu kimlikler, uygulamalarÄ±n Azure Active Directory (**Azure AD**) kimlik doÄŸrulamasÄ± ile uyumlu **kaynaklara** **baÄŸlanmak** amacÄ±yla kullanÄ±lÄ±r. Bu, uygulamanÄ±n **meta veri** hizmetine eriÅŸerek Azure'daki belirtilen yÃ¶netilen kimlik olarak **hareketler** gerÃ§ekleÅŸtirmek iÃ§in geÃ§erli bir token almasÄ±na olanak tanÄ±r.

Ä°ki tÃ¼r yÃ¶netilen kimlik vardÄ±r:

* **Sistem atamalÄ±**. BazÄ± Azure hizmetleri, bir hizmet Ã¶rneÄŸi Ã¼zerinde **yÃ¶netilen kimliÄŸi doÄŸrudan etkinleÅŸtirmenize** olanak tanÄ±r. Sistem atamalÄ± bir yÃ¶netilen kimlik etkinleÅŸtirildiÄŸinde, **kaynaÄŸÄ±n bulunduÄŸu** Entra ID kiracÄ±sÄ±nda bir **hizmet ilkesi** oluÅŸturulur. **Kaynak** **silindiÄŸinde**, Azure otomatik olarak **kimliÄŸi** sizin iÃ§in **silmiÅŸtir**.
* **KullanÄ±cÄ± atamalÄ±**. KullanÄ±cÄ±larÄ±n yÃ¶netilen kimlikler oluÅŸturmasÄ± da mÃ¼mkÃ¼ndÃ¼r. Bunlar, bir abonelik iÃ§indeki bir kaynak grubunun iÃ§inde oluÅŸturulur ve EntraID tarafÄ±ndan gÃ¼venilen bir hizmet ilkesi oluÅŸturulur. Daha sonra, yÃ¶netilen kimliÄŸi bir veya **daha fazla Azure hizmeti Ã¶rneÄŸine** (birden fazla kaynak) atayabilirsiniz. KullanÄ±cÄ± atamalÄ± yÃ¶netilen kimlikler iÃ§in, **kimlik, onu kullanan kaynaklardan ayrÄ± olarak yÃ¶netilir**.

YÃ¶netilen Kimlikler, ona baÄŸlÄ± hizmet ilkesine eriÅŸmek iÃ§in **sonsuz kimlik bilgileri** (ÅŸifreler veya sertifikalar gibi) oluÅŸturmaz.

### Kurumsal Uygulamalar

Bu, yalnÄ±zca **hizmet ilkelerini filtrelemek ve atanan uygulamalarÄ± kontrol etmek iÃ§in Azure'da bir tablodur**.

**Bu, baÅŸka bir "uygulama" tÃ¼rÃ¼ deÄŸildir,** Azure'da "Kurumsal Uygulama" olan herhangi bir nesne yoktur, bu yalnÄ±zca Hizmet ilkelerini, Uygulama kayÄ±tlarÄ±nÄ± ve yÃ¶netilen kimlikleri kontrol etmek iÃ§in bir soyutlamadÄ±r.

### Ä°dari Birimler

Ä°dari birimler, **bir rol Ã¼zerinden bir organizasyonun belirli bir bÃ¶lÃ¼mÃ¼ne izin vermeye** olanak tanÄ±r.

Ã–rnek:

* Senaryo: Bir ÅŸirket, bÃ¶lgesel BT yÃ¶neticilerinin yalnÄ±zca kendi bÃ¶lgelerindeki kullanÄ±cÄ±larÄ± yÃ¶netmesini istiyor.
* Uygulama:
* Her bÃ¶lge iÃ§in Ä°dari Birimler oluÅŸturun (Ã¶rneÄŸin, "Kuzey Amerika AU", "Avrupa AU").
* AU'larÄ± kendi bÃ¶lgelerindeki kullanÄ±cÄ±larla doldurun.
* AU'lar **kullanÄ±cÄ±larÄ±, gruplarÄ± veya cihazlarÄ±** iÃ§erebilir
* AU'lar **dinamik Ã¼yelikleri** destekler
* AU'lar **AU'larÄ± iÃ§eremez**
* YÃ¶netici Rolleri AtayÄ±n:
* "KullanÄ±cÄ± YÃ¶neticisi" rolÃ¼nÃ¼ bÃ¶lgesel BT personeline, kendi bÃ¶lgesinin AU'suna gÃ¶re verin.
* SonuÃ§: BÃ¶lgesel BT yÃ¶neticileri, diÄŸer bÃ¶lgeleri etkilemeden kendi bÃ¶lgelerindeki kullanÄ±cÄ± hesaplarÄ±nÄ± yÃ¶netebilir.

### Entra ID Rolleri

* Entra ID'yi yÃ¶netmek iÃ§in Entra ID prensiplerine atanabilecek bazÄ± **yerleÅŸik roller** vardÄ±r.
* Rolleri [https://learn.microsoft.com/en-us/entra/identity/role-based-access-control/permissions-reference](https://learn.microsoft.com/en-us/entra/identity/role-based-access-control/permissions-reference) adresinde kontrol edin.
* En yÃ¼ksek ayrÄ±calÄ±klÄ± rol **KÃ¼resel YÃ¶netici**dir.
* RolÃ¼n TanÄ±mÄ±nda, **ayrÄ±ntÄ±lÄ± izinlerini** gÃ¶rebilirsiniz.

## Roller & Ä°zinler

**Roller**, **prensiplere** bir **kapsamda** atanÄ±r: `prensip -[ROLÃœ VAR]->(kapsam)`

**Gruplara** atanan **roller**, grubun tÃ¼m **Ã¼yeleri** tarafÄ±ndan **devralÄ±nÄ±r**.

RolÃ¼n atandÄ±ÄŸÄ± kapsamÄ±na baÄŸlÄ± olarak, **rol**, kapsam konteyneri iÃ§indeki **diÄŸer kaynaklara** **devralÄ±nabilir**. Ã–rneÄŸin, bir A kullanÄ±cÄ±sÄ±nÄ±n bir **abonelikte rolÃ¼** varsa, o **rolÃ¼, abonelik iÃ§indeki tÃ¼m kaynak gruplarÄ±nda** ve **kaynak grubundaki tÃ¼m kaynaklarda** olacaktÄ±r.

### **Klasik Roller**

| **Sahip**                     | <ul><li>TÃ¼m kaynaklara tam eriÅŸim</li><li>DiÄŸer kullanÄ±cÄ±lar iÃ§in eriÅŸimi yÃ¶netebilir</li></ul> | TÃ¼m kaynak tÃ¼rleri |
| ----------------------------- | ---------------------------------------------------------------------------------------- | ------------------ |
| **KatkÄ±da Bulunan**               | <ul><li>TÃ¼m kaynaklara tam eriÅŸim</li><li>EriÅŸimi yÃ¶netemez</li></ul>              | TÃ¼m kaynak tÃ¼rleri |
| **Okuyucu**                    | â€¢ TÃ¼m kaynaklarÄ± gÃ¶rÃ¼ntÃ¼leyin                                                                     | TÃ¼m kaynak tÃ¼rleri |
| **KullanÄ±cÄ± EriÅŸim YÃ¶neticisi** | <ul><li>TÃ¼m kaynaklarÄ± gÃ¶rÃ¼ntÃ¼leyin</li><li>DiÄŸer kullanÄ±cÄ±lar iÃ§in eriÅŸimi yÃ¶netebilir</li></ul>           | TÃ¼m kaynak tÃ¼rleri |

### YerleÅŸik roller

[Belgelerden: ](https://learn.microsoft.com/en-us/azure/role-based-access-control/built-in-roles)[Azure rol tabanlÄ± eriÅŸim kontrolÃ¼ (Azure RBAC)](https://learn.microsoft.com/en-us/azure/role-based-access-control/overview) birÃ§ok Azure **yerleÅŸik rolÃ¼** vardÄ±r ve bunlarÄ± **kullanÄ±cÄ±lara, gruplara, hizmet ilkelerine ve yÃ¶netilen kimliklere** **atanabilir**. Rol atamalarÄ±, **Azure kaynaklarÄ±na eriÅŸimi kontrol etmenin** yoludur. YerleÅŸik roller, kuruluÅŸunuzun Ã¶zel ihtiyaÃ§larÄ±nÄ± karÅŸÄ±lamÄ±yorsa, kendi [**Azure Ã¶zel rollerinizi**](https://learn.microsoft.com/en-us/azure/role-based-access-control/custom-roles)** oluÅŸturabilirsiniz.**

**YerleÅŸik** roller yalnÄ±zca **amaÃ§landÄ±klarÄ± kaynaklara** uygulanÄ±r, Ã¶rneÄŸin, **Hesaplama** kaynaklarÄ± Ã¼zerindeki bu 2 yerleÅŸik rol Ã¶rneÄŸine bakÄ±n:

| [Disk Yedekleme Okuyucusu](https://learn.microsoft.com/en-us/azure/role-based-access-control/built-in-roles#disk-backup-reader)                 | Disk yedeklemesi gerÃ§ekleÅŸtirmek iÃ§in yedekleme kasasÄ±na izin verir.      | 3e5e47e6-65f7-47ef-90b5-e5dd4d455f24 |
| ----------------------------------------------------------------------------------------------------------------------------------------- | ---------------------------------------------------------------- | ------------------------------------ |
| [Sanal Makine KullanÄ±cÄ± GiriÅŸi](https://learn.microsoft.com/en-us/azure/role-based-access-control/built-in-roles#virtual-machine-user-login) | Portaldaki Sanal Makineleri gÃ¶rÃ¼ntÃ¼leyin ve normal bir kullanÄ±cÄ± olarak giriÅŸ yapÄ±n. | fb879df8-f326-4884-b1cf-06f3ad86be52 |

Bu roller, **mantÄ±ksal konteynerler** (yÃ¶netim gruplarÄ±, abonelikler ve kaynak gruplarÄ± gibi) Ã¼zerinde de **atanabilir** ve etkilenen prensipler, **bu konteynerler iÃ§indeki kaynaklar Ã¼zerinde** bu rollere sahip olacaktÄ±r.

* Burada [**tÃ¼m Azure yerleÅŸik rollerinin**](https://learn.microsoft.com/en-us/azure/role-based-access-control/built-in-roles) bir listesini bulabilirsiniz.
* Burada [**tÃ¼m Entra ID yerleÅŸik rollerinin**](https://learn.microsoft.com/en-us/azure/active-directory/roles/permissions-reference) bir listesini bulabilirsiniz.

### Ã–zel Roller

* [**Ã–zel roller**](https://learn.microsoft.com/en-us/azure/role-based-access-control/custom-roles) oluÅŸturmak da mÃ¼mkÃ¼ndÃ¼r.
* Bunlar bir kapsam iÃ§inde oluÅŸturulur, ancak bir rol birden fazla kapsamda (yÃ¶netim gruplarÄ±, abonelikler ve kaynak gruplarÄ±) olabilir.
* Ã–zel rolÃ¼n sahip olacaÄŸÄ± tÃ¼m ayrÄ±ntÄ±lÄ± izinleri yapÄ±landÄ±rmak mÃ¼mkÃ¼ndÃ¼r.
* Ä°zinleri hariÃ§ tutmak mÃ¼mkÃ¼ndÃ¼r.
* HariÃ§ tutulan bir izne sahip bir prensip, izin baÅŸka bir yerde verilse bile onu kullanamaz.
* Joker karakterler kullanmak mÃ¼mkÃ¼ndÃ¼r.
* KullanÄ±lan format bir JSON'dur.
* `actions`, kaynak Ã¼zerindeki kontrol eylemleri iÃ§indir.
* `dataActions`, nesne iÃ§indeki verilere yÃ¶nelik izinlerdir.

Ã–zel bir rol iÃ§in izinlerin JSON Ã¶rneÄŸi:
```json
{
"properties": {
"roleName": "",
"description": "",
"assignableScopes": [
"/subscriptions/9291ff6e-6afb-430e-82a4-6f04b2d05c7f"
],
"permissions": [
{
"actions": [
"Microsoft.DigitalTwins/register/action",
"Microsoft.DigitalTwins/unregister/action",
"Microsoft.DigitalTwins/operations/read",
"Microsoft.DigitalTwins/digitalTwinsInstances/read",
"Microsoft.DigitalTwins/digitalTwinsInstances/write",
"Microsoft.CostManagement/exports/*"
],
"notActions": [
"Astronomer.Astro/register/action",
"Astronomer.Astro/unregister/action",
"Astronomer.Astro/operations/read",
"Astronomer.Astro/organizations/read"
],
"dataActions": [],
"notDataActions": []
}
]
}
}
```
### Ä°zinler sÄ±rasÄ±

* Bir **prensibin bir kaynaÄŸa eriÅŸim hakkÄ± olmasÄ± iÃ§in** ona aÃ§Ä±k bir rol verilmesi gerekir (herhangi bir ÅŸekilde) **ona bu izni veren**.
* AÃ§Ä±k bir **reddetme rol atamasÄ±, izni veren rolÃ¼n Ã¶nceliÄŸine sahiptir**.

<figure><img src="../../.gitbook/assets/image (191).png" alt=""><figcaption><p><a href="https://link.springer.com/chapter/10.1007/978-1-4842-7325-8_10">https://link.springer.com/chapter/10.1007/978-1-4842-7325-8_10</a></p></figcaption></figure>

### KÃ¼resel YÃ¶neticisi

KÃ¼resel YÃ¶neticisi, **Entra ID kiracÄ±sÄ± Ã¼zerinde tam kontrol** saÄŸlayan bir Entra ID rolÃ¼dÃ¼r. Ancak, varsayÄ±lan olarak Azure kaynaklarÄ± Ã¼zerinde herhangi bir izin vermez.

KÃ¼resel YÃ¶neticisi rolÃ¼ne sahip kullanÄ±cÄ±lar, **KÃ¶k YÃ¶netim Grubunda KullanÄ±cÄ± EriÅŸim YÃ¶neticisi Azure rolÃ¼ne 'yÃ¼kseltme'** yapma yeteneÄŸine sahiptir. Bu nedenle, KÃ¼resel YÃ¶neticiler **tÃ¼m Azure aboneliklerinde ve yÃ¶netim gruplarÄ±nda eriÅŸimi yÃ¶netebilir.**\
Bu yÃ¼kseltme sayfanÄ±n sonunda yapÄ±labilir: [https://portal.azure.com/#view/Microsoft\_AAD\_IAM/ActiveDirectoryMenuBlade/\~/Properties](https://portal.azure.com/#view/Microsoft_AAD_IAM/ActiveDirectoryMenuBlade/~/Properties)

<figure><img src="../../.gitbook/assets/image (349).png" alt=""><figcaption></figcaption></figure>

### Azure PolitikalarÄ±

**Azure PolitikalarÄ±**, organizasyonlarÄ±n kaynaklarÄ±nÄ±n belirli standartlara ve uyumluluk gereksinimlerine uygun olmasÄ±nÄ± saÄŸlamalarÄ±na yardÄ±mcÄ± olan kurallardÄ±r. Bu politikalar, **Azure'daki kaynaklar Ã¼zerinde ayarlarÄ± uygulamanÄ±za veya denetlemenize** olanak tanÄ±r. Ã–rneÄŸin, yetkisiz bir bÃ¶lgede sanal makinelerin oluÅŸturulmasÄ±nÄ± engelleyebilir veya tÃ¼m kaynaklarÄ±n izleme iÃ§in belirli etiketlere sahip olmasÄ±nÄ± saÄŸlayabilirsiniz.

Azure PolitikalarÄ± **proaktiftir**: uyumsuz kaynaklarÄ±n oluÅŸturulmasÄ±nÄ± veya deÄŸiÅŸtirilmesini durdurabilir. AyrÄ±ca **reaktif** olup, mevcut uyumsuz kaynaklarÄ± bulmanÄ±za ve dÃ¼zeltmenize olanak tanÄ±r.

#### **Anahtar Kavramlar**

1. **Politika TanÄ±mÄ±**: Ne yapÄ±lmasÄ±na izin verildiÄŸini veya neyin gerekli olduÄŸunu belirten, JSON formatÄ±nda yazÄ±lmÄ±ÅŸ bir kural.
2. **Politika AtamasÄ±**: Bir politikanÄ±n belirli bir kapsamda (Ã¶rneÄŸin, abonelik, kaynak grubu) uygulanmasÄ±.
3. **Ä°nisiyatifler**: Daha geniÅŸ bir uygulama iÃ§in bir araya getirilmiÅŸ politika koleksiyonu.
4. **Etkisi**: Politika tetiklendiÄŸinde ne olacaÄŸÄ±nÄ± belirtir (Ã¶rneÄŸin, "Reddet", "Denetle" veya "Ekle").

**BazÄ± Ã¶rnekler:**

1. **Belirli Azure BÃ¶lgeleri ile Uyum SaÄŸlama**: Bu politika, tÃ¼m kaynaklarÄ±n belirli Azure bÃ¶lgelerinde daÄŸÄ±tÄ±lmasÄ±nÄ± saÄŸlar. Ã–rneÄŸin, bir ÅŸirket tÃ¼m verilerinin GDPR uyumluluÄŸu iÃ§in Avrupa'da saklandÄ±ÄŸÄ±ndan emin olmak isteyebilir.
2. **Ä°simlendirme StandartlarÄ±nÄ± Uygulama**: Politikalar, Azure kaynaklarÄ± iÃ§in isimlendirme kurallarÄ±nÄ± uygulayabilir. Bu, bÃ¼yÃ¼k ortamlarda kaynaklarÄ± isimlerine gÃ¶re dÃ¼zenlemeye ve kolayca tanÄ±mlamaya yardÄ±mcÄ± olur.
3. **Belirli Kaynak TÃ¼rlerini KÄ±sÄ±tlama**: Bu politika, belirli tÃ¼rde kaynaklarÄ±n oluÅŸturulmasÄ±nÄ± kÄ±sÄ±tlayabilir. Ã–rneÄŸin, maliyetleri kontrol etmek iÃ§in belirli VM boyutlarÄ± gibi pahalÄ± kaynak tÃ¼rlerinin oluÅŸturulmasÄ±nÄ± engelleyen bir politika ayarlanabilir.
4. **Etiketleme PolitikalarÄ±nÄ± Uygulama**: Etiketler, kaynak yÃ¶netimi iÃ§in kullanÄ±lan Azure kaynaklarÄ± ile iliÅŸkili anahtar-deÄŸer Ã§iftleridir. Politikalar, belirli etiketlerin mevcut olmasÄ±nÄ± veya tÃ¼m kaynaklar iÃ§in belirli deÄŸerlere sahip olmasÄ±nÄ± zorunlu kÄ±labilir. Bu, maliyet takibi, sahiplik veya kaynaklarÄ±n kategorize edilmesi iÃ§in faydalÄ±dÄ±r.
5. **Kaynaklara Kamu EriÅŸimini SÄ±nÄ±rlama**: Politikalar, belirli kaynaklarÄ±n, Ã¶rneÄŸin depolama hesaplarÄ± veya veritabanlarÄ±nÄ±n, kamu uÃ§ noktalarÄ±na sahip olmamasÄ±nÄ± zorunlu kÄ±labilir, bÃ¶ylece yalnÄ±zca organizasyonun aÄŸÄ± iÃ§inde eriÅŸilebilir olmalarÄ±nÄ± saÄŸlar.
6. **GÃ¼venlik AyarlarÄ±nÄ± Otomatik Uygulama**: Politikalar, kaynaklara otomatik olarak gÃ¼venlik ayarlarÄ± uygulamak iÃ§in kullanÄ±labilir; Ã¶rneÄŸin, tÃ¼m VM'lere belirli bir aÄŸ gÃ¼venlik grubunun uygulanmasÄ± veya tÃ¼m depolama hesaplarÄ±nÄ±n ÅŸifreleme kullanmasÄ±nÄ± saÄŸlamak.

Azure PolitikalarÄ±nÄ±n Azure hiyerarÅŸisinin herhangi bir seviyesine eklenebileceÄŸini unutmayÄ±n, ancak genellikle **kÃ¶k yÃ¶netim grubunda** veya diÄŸer yÃ¶netim gruplarÄ±nda kullanÄ±lÄ±r.

Azure politika json Ã¶rneÄŸi:
```json
{
"policyRule": {
"if": {
"field": "location",
"notIn": [
"eastus",
"westus"
]
},
"then": {
"effect": "Deny"
}
},
"parameters": {},
"displayName": "Allow resources only in East US and West US",
"description": "This policy ensures that resources can only be created in East US or West US.",
"mode": "All"
}
```
### Ä°zin MirasÄ±

Azure'da **izinler hiyerarÅŸinin herhangi bir parÃ§asÄ±na atanabilir**. Bu, yÃ¶netim gruplarÄ±nÄ±, abonelikleri, kaynak gruplarÄ±nÄ± ve bireysel kaynaklarÄ± iÃ§erir. Ä°zinler, atandÄ±klarÄ± varlÄ±ÄŸÄ±n **iÃ§indeki kaynaklar** tarafÄ±ndan **miras alÄ±nÄ±r**.

Bu hiyerarÅŸik yapÄ±, eriÅŸim izinlerinin verimli ve Ã¶lÃ§eklenebilir bir ÅŸekilde yÃ¶netilmesini saÄŸlar.

<figure><img src="../../.gitbook/assets/image (26).png" alt=""><figcaption></figcaption></figure>

### Azure RBAC vs ABAC

**RBAC** (rol tabanlÄ± eriÅŸim kontrolÃ¼), Ã¶nceki bÃ¶lÃ¼mlerde gÃ¶rdÃ¼ÄŸÃ¼mÃ¼z ÅŸeydir: **Bir role bir ilkeye atama yaparak ona bir kaynaÄŸa eriÅŸim verme**.\
Ancak, bazÄ± durumlarda **daha ince ayrÄ±ntÄ±lÄ± eriÅŸim yÃ¶netimi** saÄŸlamak veya **yÃ¼zlerce** rol **atamasÄ±nÄ±** yÃ¶netimini **basitleÅŸtirmek** isteyebilirsiniz.

Azure **ABAC** (Ã¶zellik tabanlÄ± eriÅŸim kontrolÃ¼), belirli eylemler baÄŸlamÄ±nda **Ã¶zelliklere dayalÄ± rol atama koÅŸullarÄ±** ekleyerek Azure RBAC Ã¼zerine inÅŸa edilmiÅŸtir. Bir _rol atama koÅŸulu_, **rol atamanÄ±za isteÄŸe baÄŸlÄ± olarak ekleyebileceÄŸiniz ek bir kontrol** olup daha ince ayrÄ±ntÄ±lÄ± eriÅŸim kontrolÃ¼ saÄŸlar. Bir koÅŸul, rol tanÄ±mÄ± ve rol atamasÄ± kapsamÄ±nda verilen izinleri filtreler. Ã–rneÄŸin, **bir nesneyi okumak iÃ§in nesnenin belirli bir etikete sahip olmasÄ±nÄ± gerektiren bir koÅŸul ekleyebilirsiniz**.\
**KoÅŸullar** kullanarak belirli kaynaklara **eriÅŸimi aÃ§Ä±kÃ§a **reddedemezsiniz**.

### AyrÄ±calÄ±klÄ± Kimlik YÃ¶netimi (PIM)

Azure'daki AyrÄ±calÄ±klÄ± Kimlik YÃ¶netimi (PIM), Azure Active Directory ve Azure'daki **ayrÄ±calÄ±klÄ± eriÅŸimi yÃ¶netme, kontrol etme ve izleme** aracÄ±dÄ±r. **AnlÄ±k ve zaman sÄ±nÄ±rlÄ± ayrÄ±calÄ±klÄ± eriÅŸim**, **onay iÅŸ akÄ±ÅŸlarÄ±nÄ± zorunlu kÄ±lma ve ek kimlik doÄŸrulama gerektirme** saÄŸlayarak gÃ¼venliÄŸi artÄ±rÄ±r. Bu yaklaÅŸÄ±m, yÃ¼kseltilmiÅŸ izinlerin yalnÄ±zca gerektiÄŸinde ve belirli bir sÃ¼re iÃ§in verilmesini saÄŸlayarak yetkisiz eriÅŸim riskini en aza indirir.

## Kimlik DoÄŸrulama JetonlarÄ±

OIDC'de kullanÄ±lan **Ã¼Ã§ tÃ¼r jeton** vardÄ±r:

* [**EriÅŸim JetonlarÄ±**](https://learn.microsoft.com/en-us/azure/active-directory/develop/access-tokens)**:** Ä°stemci, bu jetonu kaynak sunucusuna **kaynaklara eriÅŸim** iÃ§in sunar. Sadece belirli bir kullanÄ±cÄ±, istemci ve kaynak kombinasyonu iÃ§in kullanÄ±labilir ve **iptal edilemez** - varsayÄ±lan olarak 1 saat geÃ§erlidir.
* **ID JetonlarÄ±**: Ä°stemci, bu **jetonu yetkilendirme sunucusundan** alÄ±r. KullanÄ±cÄ± hakkÄ±nda temel bilgileri iÃ§erir. **Belirli bir kullanÄ±cÄ± ve istemci kombinasyonuna baÄŸlÄ±dÄ±r**.
* **Yenileme JetonlarÄ±**: EriÅŸim jetonu ile istemciye saÄŸlanÄ±r. **Yeni eriÅŸim ve ID jetonlarÄ± almak iÃ§in** kullanÄ±lÄ±r. Belirli bir kullanÄ±cÄ± ve istemci kombinasyonuna baÄŸlÄ±dÄ±r ve iptal edilebilir. VarsayÄ±lan geÃ§erlilik sÃ¼resi **90 gÃ¼ndÃ¼r** ve **aktif jetonlar iÃ§in geÃ§erlilik sÃ¼resi yoktur**.

{% hint style="warning" %}
**KoÅŸullu eriÅŸim** bilgileri **JWT** iÃ§inde **saklanÄ±r**. Bu nedenle, **izin verilen bir IP adresinden jeton talep ederseniz**, o **IP** jetonda **saklanÄ±r** ve ardÄ±ndan bu jetonu **izin verilmeyen bir IP'den kaynaklara eriÅŸmek iÃ§in** kullanabilirsiniz.
{% endhint %}

### EriÅŸim JetonlarÄ± "aud"

GerÃ§ekleÅŸtirmek istediÄŸiniz eyleme baÄŸlÄ± olarak, eriÅŸim jetonunun "**aud**" deÄŸeri, iletiÅŸim kuracaÄŸÄ±nÄ±z API URL'si ile iletiÅŸim kurmak iÃ§in yetkilendirilmiÅŸ olmalÄ±dÄ±r.

`az account get-access-token --resource-type [...]` komutu aÅŸaÄŸÄ±daki tÃ¼rleri destekler ve her biri sonuÃ§ta oluÅŸan eriÅŸim jetonunda belirli bir "aud" ekleyecektir:

{% hint style="danger" %}
AÅŸaÄŸÄ±dakilerin yalnÄ±zca `az account get-access-token` tarafÄ±ndan desteklenen API'ler olduÄŸunu unutmayÄ±n, ancak daha fazlasÄ± vardÄ±r.
{% endhint %}

* **aad-graph (Azure Active Directory Graph API)**: UygulamalarÄ±n Azure Active Directory (Azure AD) iÃ§indeki dizin verilerini okumasÄ±na ve yazmasÄ±na olanak tanÄ±yan eski Azure AD Graph API'ye (kaldÄ±rÄ±lmÄ±ÅŸ) eriÅŸmek iÃ§in kullanÄ±lÄ±r.
* `https://graph.windows.net/`
* **arm (Azure Resource Manager)**: Azure kaynaklarÄ±nÄ± Azure Resource Manager API'si aracÄ±lÄ±ÄŸÄ±yla yÃ¶netmek iÃ§in kullanÄ±lÄ±r. Bu, sanal makineler, depolama hesaplarÄ± ve daha fazlasÄ± gibi kaynaklarÄ± oluÅŸturma, gÃ¼ncelleme ve silme gibi iÅŸlemleri iÃ§erir.
* `https://management.core.windows.net/ or https://management.azure.com/`
* **batch (Azure Batch Services)**: Bulutta bÃ¼yÃ¼k Ã¶lÃ§ekli paralel ve yÃ¼ksek performanslÄ± hesaplama uygulamalarÄ±nÄ± verimli bir ÅŸekilde etkinleÅŸtiren Azure Batch'e eriÅŸmek iÃ§in kullanÄ±lÄ±r.
* `https://batch.core.windows.net/`
* **data-lake (Azure Data Lake Storage)**: Ã–lÃ§eklenebilir veri depolama ve analiz hizmeti olan Azure Data Lake Storage Gen1 ile etkileÅŸimde bulunmak iÃ§in kullanÄ±lÄ±r.
* `https://datalake.azure.net/`
* **media (Azure Media Services)**: Video ve ses iÃ§eriÄŸi iÃ§in bulut tabanlÄ± medya iÅŸleme ve daÄŸÄ±tÄ±m hizmetleri saÄŸlayan Azure Media Services'e eriÅŸmek iÃ§in kullanÄ±lÄ±r.
* `https://rest.media.azure.net`
* **ms-graph (Microsoft Graph API)**: Microsoft 365 hizmetleri verilerine eriÅŸmek iÃ§in birleÅŸik bir uÃ§ nokta olan Microsoft Graph API'ye eriÅŸmek iÃ§in kullanÄ±lÄ±r. Azure AD, Office 365, Kurumsal Mobilite ve GÃ¼venlik hizmetleri gibi hizmetlerden veri ve iÃ§gÃ¶rÃ¼lere eriÅŸmenizi saÄŸlar.
* `https://graph.microsoft.com`
* **oss-rdbms (Azure Open Source Relational Databases)**: MySQL, PostgreSQL ve MariaDB gibi aÃ§Ä±k kaynaklÄ± iliÅŸkisel veritabanÄ± motorlarÄ± iÃ§in Azure VeritabanÄ± hizmetlerine eriÅŸmek iÃ§in kullanÄ±lÄ±r.
* `https://ossrdbms-aad.database.windows.net`

EriÅŸim jetonlarÄ±nÄ± talep etmenin ve bunlarla giriÅŸ yapmanÄ±n farklÄ± yollarÄ±nÄ± Ã¶ÄŸrenmek iÃ§in aÅŸaÄŸÄ±daki sayfayÄ± kontrol edin:

{% content-ref url="az-azuread/" %}
[az-azuread](az-azuread/)
{% endcontent-ref %}

## Referanslar

* [https://learn.microsoft.com/en-us/azure/governance/management-groups/overview](https://learn.microsoft.com/en-us/azure/governance/management-groups/overview)
* [https://learn.microsoft.com/en-us/azure/cloud-adoption-framework/ready/azure-best-practices/organize-subscriptions](https://learn.microsoft.com/en-us/azure/cloud-adoption-framework/ready/azure-best-practices/organize-subscriptions)
* [https://abouttmc.com/glossary/azure-subscription/#:\~:text=An%20Azure%20subscription%20is%20a,the%20subscription%20it%20belongs%20to.](https://abouttmc.com/glossary/azure-subscription/)
* [https://learn.microsoft.com/en-us/azure/role-based-access-control/overview#how-azure-rbac-determines-if-a-user-has-access-to-a-resource](https://learn.microsoft.com/en-us/azure/role-based-access-control/overview#how-azure-rbac-determines-if-a-user-has-access-to-a-resource)
* [https://stackoverflow.com/questions/65922566/what-are-the-differences-between-service-principal-and-app-registration](https://stackoverflow.com/questions/65922566/what-are-the-differences-between-service-principal-and-app-registration)

{% hint style="success" %}
AWS Hacking'i Ã¶ÄŸrenin ve pratik yapÄ±n:<img src="../../.gitbook/assets/image (1) (1) (1).png" alt="" data-size="line">[**HackTricks Training AWS Red Team Expert (ARTE)**](https://training.hacktricks.xyz/courses/arte)<img src="../../.gitbook/assets/image (1) (1) (1).png" alt="" data-size="line">\
GCP Hacking'i Ã¶ÄŸrenin ve pratik yapÄ±n: <img src="../../.gitbook/assets/image (2).png" alt="" data-size="line">[**HackTricks Training GCP Red Team Expert (GRTE)**<img src="../../.gitbook/assets/image (2).png" alt="" data-size="line">](https://training.hacktricks.xyz/courses/grte)

<details>

<summary>HackTricks'i Destekleyin</summary>

* [**abonelik planlarÄ±nÄ±**](https://github.com/sponsors/carlospolop) kontrol edin!
* **ğŸ’¬ [**Discord grubuna**](https://discord.gg/hRep4RUj7f) veya [**telegram grubuna**](https://t.me/peass) katÄ±lÄ±n ya da **Twitter'da** ğŸ¦ [**@hacktricks\_live**](https://twitter.com/hacktricks_live)**'i takip edin.**
* **Hacking ipuÃ§larÄ±nÄ± paylaÅŸmak iÃ§in** [**HackTricks**](https://github.com/carlospolop/hacktricks) ve [**HackTricks Cloud**](https://github.com/carlospolop/hacktricks-cloud) github reposuna PR gÃ¶nderin.

</details>
{% endhint %}
