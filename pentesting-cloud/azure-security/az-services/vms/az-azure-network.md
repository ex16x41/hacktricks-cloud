# Az - Azure Network

{% hint style="success" %}
Learn & practice AWS Hacking:<img src="../../../../.gitbook/assets/image (1).png" alt="" data-size="line">[**HackTricks Training AWS Red Team Expert (ARTE)**](https://training.hacktricks.xyz/courses/arte)<img src="../../../../.gitbook/assets/image (1).png" alt="" data-size="line">\
Learn & practice GCP Hacking: <img src="../../../../.gitbook/assets/image (2).png" alt="" data-size="line">[**HackTricks Training GCP Red Team Expert (GRTE)**<img src="../../../../.gitbook/assets/image (2).png" alt="" data-size="line">](https://training.hacktricks.xyz/courses/grte)

<details>

<summary>Support HackTricks</summary>

* Check the [**subscription plans**](https://github.com/sponsors/carlospolop)!
* **Join the** ЁЯТм [**Discord group**](https://discord.gg/hRep4RUj7f) or the [**telegram group**](https://t.me/peass) or **follow** us on **Twitter** ЁЯРж [**@hacktricks\_live**](https://twitter.com/hacktricks\_live)**.**
* **Share hacking tricks by submitting PRs to the** [**HackTricks**](https://github.com/carlospolop/hacktricks) and [**HackTricks Cloud**](https://github.com/carlospolop/hacktricks-cloud) github repos.

</details>
{% endhint %}

## Basic Information

Azure рдХреЗ рднреАрддрд░ рдиреЗрдЯрд╡рд░реНрдХ рдЙрд╕рдХреЗ рдХреНрд▓рд╛рдЙрдб рдХрдВрдкреНрдпреВрдЯрд┐рдВрдЧ рдкреНрд▓реЗрдЯрдлреЙрд░реНрдо рдХрд╛ рдПрдХ рдЕрднрд┐рдиреНрди рд╣рд┐рд╕реНрд╕рд╛ рдХреЗ рд░реВрдк рдореЗрдВ рдХрд╛рд░реНрдп рдХрд░рддреЗ рд╣реИрдВ, рдЬреЛ **рд╡рд┐рднрд┐рдиреНрди Azure рд╕реЗрд╡рд╛рдУрдВ рдФрд░ рд╕рдВрд╕рд╛рдзрдиреЛрдВ рдХреЗ рдмреАрдЪ рдХрдиреЗрдХреНрд╢рди рдФрд░ рд╕рдВрдЪрд╛рд░** рдХреЛ рд╕рдХреНрд╖рдо рдмрдирд╛рддреЗ рд╣реИрдВред Azure рдореЗрдВ рдиреЗрдЯрд╡рд░реНрдХ рдЖрд░реНрдХрд┐рдЯреЗрдХреНрдЪрд░ рдХреЛ рдЕрддреНрдпрдзрд┐рдХ рд╕реНрдХреЗрд▓реЗрдмрд▓, рд╕реБрд░рдХреНрд╖рд┐рдд рдФрд░ рдЕрдиреБрдХреВрд▓рди рдпреЛрдЧреНрдп рдмрдирд╛рдиреЗ рдХреЗ рд▓рд┐рдП рдбрд┐рдЬрд╝рд╛рдЗрди рдХрд┐рдпрд╛ рдЧрдпрд╛ рд╣реИред

Azure рдХреЗ рдореВрд▓ рдореЗрдВ, рдПрдХ **рд╡рд░реНрдЪреБрдЕрд▓ рдиреЗрдЯрд╡рд░реНрдХ (VNet)** рдкреНрд░рджрд╛рди рдХрд┐рдпрд╛ рдЬрд╛рддрд╛ рд╣реИ рдЬреЛ рдЙрдкрдпреЛрдЧрдХрд░реНрддрд╛рдУрдВ рдХреЛ Azure рдХреНрд▓рд╛рдЙрдб рдХреЗ рднреАрддрд░ **рдЕрд▓рдЧ** **рдиреЗрдЯрд╡рд░реНрдХ** рдмрдирд╛рдиреЗ рдХреА рдЕрдиреБрдорддрд┐ рджреЗрддрд╛ рд╣реИред рдЗрди VNets рдХреЗ рднреАрддрд░, рд╡рд░реНрдЪреБрдЕрд▓ рдорд╢реАрдиреЛрдВ, рдЕрдиреБрдкреНрд░рдпреЛрдЧреЛрдВ рдФрд░ рдбреЗрдЯрд╛рдмреЗрд╕ рдЬреИрд╕реЗ рд╕рдВрд╕рд╛рдзрдиреЛрдВ рдХреЛ рд╕реБрд░рдХреНрд╖рд┐рдд рд░реВрдк рд╕реЗ рд╣реЛрд╕реНрдЯ рдФрд░ рдкреНрд░рдмрдВрдзрд┐рдд рдХрд┐рдпрд╛ рдЬрд╛ рд╕рдХрддрд╛ рд╣реИред Azure рдореЗрдВ рдиреЗрдЯрд╡рд░реНрдХрд┐рдВрдЧ рдХреНрд▓рд╛рдЙрдб рдХреЗ рднреАрддрд░ (Azure рд╕реЗрд╡рд╛рдУрдВ рдХреЗ рдмреАрдЪ) рд╕рдВрдЪрд╛рд░ рдФрд░ рдмрд╛рд╣рд░реА рдиреЗрдЯрд╡рд░реНрдХ рдФрд░ рдЗрдВрдЯрд░рдиреЗрдЯ рд╕реЗ рдХрдиреЗрдХреНрд╢рди рджреЛрдиреЛрдВ рдХрд╛ рд╕рдорд░реНрдерди рдХрд░рддреА рд╣реИред

**рд╕реБрд░рдХреНрд╖рд╛** Azure рдиреЗрдЯрд╡рд░реНрдХрд┐рдВрдЧ рдХрд╛ рдПрдХ рдорд╣рддреНрд╡рдкреВрд░реНрдг рдкрд╣рд▓реВ рд╣реИ, рдЬрд┐рд╕рдореЗрдВ рдбреЗрдЯрд╛ рдХреА рд╕реБрд░рдХреНрд╖рд╛, рдкрд╣реБрдВрдЪ рдкреНрд░рдмрдВрдзрди рдФрд░ рдЕрдиреБрдкрд╛рд▓рди рд╕реБрдирд┐рд╢реНрдЪрд┐рдд рдХрд░рдиреЗ рдХреЗ рд▓рд┐рдП рд╡рд┐рднрд┐рдиреНрди рдЙрдкрдХрд░рдг рдФрд░ рд╕реЗрд╡рд╛рдПрдВ рдЙрдкрд▓рдмреНрдз рд╣реИрдВред рдЗрди рд╕реБрд░рдХреНрд╖рд╛ рдЙрдкрд╛рдпреЛрдВ рдореЗрдВ **рдлрд╛рдпрд░рд╡реЙрд▓**, **рдиреЗрдЯрд╡рд░реНрдХ рд╕реБрд░рдХреНрд╖рд╛ рд╕рдореВрд╣**, рдФрд░ **рдПрдиреНрдХреНрд░рд┐рдкреНрд╢рди** рдХреНрд╖рдорддрд╛рдПрдВ рд╢рд╛рдорд┐рд▓ рд╣реИрдВ, рдЬреЛ рдЯреНрд░реИрдлрд╝рд┐рдХ рдФрд░ рдкрд╣реБрдВрдЪ рдкрд░ рдЙрдЪреНрдЪ рд╕реНрддрд░ рдХрд╛ рдирд┐рдпрдВрддреНрд░рдг рдкреНрд░рджрд╛рди рдХрд░рддреА рд╣реИрдВред

рдХреБрд▓ рдорд┐рд▓рд╛рдХрд░, Azure рдХреА рдиреЗрдЯрд╡рд░реНрдХрд┐рдВрдЧ рдХреНрд╖рдорддрд╛рдПрдВ рд▓рдЪреАрд▓рд╛рдкрди рдкреНрд░рджрд╛рди рдХрд░рдиреЗ рдХреЗ рд▓рд┐рдП рдбрд┐рдЬрд╝рд╛рдЗрди рдХреА рдЧрдИ рд╣реИрдВ, рдЬрд┐рд╕рд╕реЗ рдЙрдкрдпреЛрдЧрдХрд░реНрддрд╛ рдПрдХ рдРрд╕рд╛ рдиреЗрдЯрд╡рд░реНрдХ рд╡рд╛рддрд╛рд╡рд░рдг рдмрдирд╛ рд╕рдХрддреЗ рд╣реИрдВ рдЬреЛ рдЙрдирдХреА рд╡рд┐рд╢рд┐рд╖реНрдЯ рдЕрдиреБрдкреНрд░рдпреЛрдЧ рдФрд░ рдХрд╛рд░реНрдпрднрд╛рд░ рдХреА рдЖрд╡рд╢реНрдпрдХрддрд╛рдУрдВ рдХреЗ рдЕрдиреБрдХреВрд▓ рд╣реЛ, рдЬрдмрдХрд┐ рд╕реБрд░рдХреНрд╖рд╛ рдФрд░ рд╡рд┐рд╢реНрд╡рд╕рдиреАрдпрддрд╛ рдкрд░ рдПрдХ рдордЬрдмреВрдд рдЬреЛрд░ рдмрдирд╛рдП рд░рдЦрддреЗ рд╣реИрдВред

## Virtual Network (VNET) & Subnets

Azure рдореЗрдВ рдПрдХ VNet рдореВрд▓ рд░реВрдк рд╕реЗ рдЖрдкрдХреЗ рдЕрдкрдиреЗ рдиреЗрдЯрд╡рд░реНрдХ рдХрд╛ рдХреНрд▓рд╛рдЙрдб рдореЗрдВ рдкреНрд░рддрд┐рдирд┐рдзрд┐рддреНрд╡ рд╣реИред рдпрд╣ рдЖрдкрдХреЗ **рд╕рджрд╕реНрдпрддрд╛ рдХреЗ рд▓рд┐рдП рд╕рдорд░реНрдкрд┐рдд Azure рдХреНрд▓рд╛рдЙрдб рдХрд╛ рдПрдХ рддрд╛рд░реНрдХрд┐рдХ рдкреГрдердХреНрдХрд░рдг** рд╣реИред рдПрдХ VNet рдЖрдкрдХреЛ Azure рдореЗрдВ рд╡рд░реНрдЪреБрдЕрд▓ рдкреНрд░рд╛рдЗрд╡реЗрдЯ рдиреЗрдЯрд╡рд░реНрдХ (VPNs) рдХреЛ рдкреНрд░рд╛рд╡рдзрд╛рди рдФрд░ рдкреНрд░рдмрдВрдзрд┐рдд рдХрд░рдиреЗ рдХреА рдЕрдиреБрдорддрд┐ рджреЗрддрд╛ рд╣реИ рдФрд░ рдЗрд╕рдХрд╛ рдЙрдкрдпреЛрдЧ **рдХрдИ рдкреНрд░рдХрд╛рд░ рдХреЗ Azure рд╕рдВрд╕рд╛рдзрдиреЛрдВ** рдЬреИрд╕реЗ рд╡рд░реНрдЪреБрдЕрд▓ рдорд╢реАрдиреЗрдВ (VMs), рдбреЗрдЯрд╛рдмреЗрд╕, рдФрд░ рдЕрдиреБрдкреНрд░рдпреЛрдЧ рд╕реЗрд╡рд╛рдУрдВ рдХреЛ рд╣реЛрд╕реНрдЯ рдФрд░ **рдкреНрд░рдмрдВрдзрд┐рдд** рдХрд░рдиреЗ рдХреЗ рд▓рд┐рдП рдХрд┐рдпрд╛ рдЬрд╛ рд╕рдХрддрд╛ рд╣реИред

VNets рдЖрдкрдХреЛ **рдЕрдкрдиреЗ рдиреЗрдЯрд╡рд░реНрдХ рд╕реЗрдЯрд┐рдВрдЧреНрд╕ рдкрд░ рдкреВрд░реНрдг рдирд┐рдпрдВрддреНрд░рдг** рдкреНрд░рджрд╛рди рдХрд░рддреЗ рд╣реИрдВ, рдЬрд┐рд╕рдореЗрдВ **IP рдкрддрд╛** рд░реЗрдВрдЬ, рдЙрдкрдиреЗрдЯ рдирд┐рд░реНрдорд╛рдг, рд░реВрдЯ рддрд╛рд▓рд┐рдХрд╛рдПрдВ, рдФрд░ рдиреЗрдЯрд╡рд░реНрдХ рдЧреЗрдЯрд╡реЗ рд╢рд╛рдорд┐рд▓ рд╣реИрдВред

рдПрдХ **рдЙрдкрдиреЗрдЯ** рдЖрдкрдХреЗ VNet рдореЗрдВ **IP рдкрддреЛрдВ рдХреА рдПрдХ рд░реЗрдВрдЬ** рд╣реИред рдЖрдк рд╕рдВрдЧрдарди рдФрд░ рд╕реБрд░рдХреНрд╖рд╛ рдХреЗ рд▓рд┐рдП рдПрдХ VNet рдХреЛ рдХрдИ рдЙрдкрдиреЗрдЯ рдореЗрдВ рд╡рд┐рднрд╛рдЬрд┐рдд рдХрд░ рд╕рдХрддреЗ рд╣реИрдВред рдПрдХ VNet рдореЗрдВ рдкреНрд░рддреНрдпреЗрдХ рдЙрдкрдиреЗрдЯ рдХрд╛ рдЙрдкрдпреЛрдЧ рдЖрдкрдХреЗ рдиреЗрдЯрд╡рд░реНрдХ рдФрд░ рдЕрдиреБрдкреНрд░рдпреЛрдЧ рдЖрд░реНрдХрд┐рдЯреЗрдХреНрдЪрд░ рдХреЗ рдЕрдиреБрд╕рд╛рд░ рд╕рдВрд╕рд╛рдзрдиреЛрдВ рдХреЛ рдЕрд▓рдЧ рдХрд░рдиреЗ рдФрд░ рд╕рдореВрд╣рд┐рдд рдХрд░рдиреЗ рдХреЗ рд▓рд┐рдП рдХрд┐рдпрд╛ рдЬрд╛ рд╕рдХрддрд╛ рд╣реИред

рдЗрд╕рдХреЗ рдЕрд▓рд╛рд╡рд╛, рдЙрдкрдиреЗрдЯ рдЖрдкрдХреЛ **рдЕрдкрдиреЗ VNet рдХреЛ рдПрдХ рдпрд╛ рдЕрдзрд┐рдХ рдЙрдк-рдиреЗрдЯрд╡рд░реНрдХ рдореЗрдВ рд╡рд┐рднрд╛рдЬрд┐рдд** рдХрд░рдиреЗ рдХреА рдЕрдиреБрдорддрд┐ рджреЗрддреЗ рд╣реИрдВ, рдЬреЛ рд╕рдВрд╕рд╛рдзрдиреЛрдВ рдХреЗ рдЙрдкрдпреЛрдЧ рдХреЗ рд▓рд┐рдП IP рдкрддреЛрдВ рдХреА рдПрдХ рд░реЗрдВрдЬ рдкреНрд░рджрд╛рди рдХрд░рддреЗ рд╣реИрдВред

### **Example**

* рдорд╛рди рд▓реАрдЬрд┐рдП рдХрд┐ рдЖрдкрдХреЗ рдкрд╛рд╕ `MyVNet` рдирд╛рдо рдХрд╛ рдПрдХ VNet рд╣реИ рдЬрд┐рд╕рдореЗрдВ `10.0.0.0/16` рдХрд╛ IP рдкрддрд╛ рд░реЗрдВрдЬ рд╣реИред рдЖрдк рдЗрд╕ VNet рдХреЗ рднреАрддрд░ рдПрдХ рдЙрдкрдиреЗрдЯ рдмрдирд╛ рд╕рдХрддреЗ рд╣реИрдВ, рдорд╛рди рд▓реАрдЬрд┐рдП `Subnet-1`, рдЬрд┐рд╕рдореЗрдВ рдЖрдкрдХреЗ рд╡реЗрдм рд╕рд░реНрд╡рд░реЛрдВ рдХреЗ рд▓рд┐рдП `10.0.0.0/24` рдХрд╛ IP рдкрддрд╛ рд░реЗрдВрдЬ рд╣реИред рдПрдХ рдЕрдиреНрдп рдЙрдкрдиреЗрдЯ, `Subnet-2` рдЬрд┐рд╕рдореЗрдВ `10.0.1.0/24` рдХрд╛ рд░реЗрдВрдЬ рд╣реИ, рдЖрдкрдХреЗ рдбреЗрдЯрд╛рдмреЗрд╕ рд╕рд░реНрд╡рд░реЛрдВ рдХреЗ рд▓рд┐рдП рдЙрдкрдпреЛрдЧ рдХрд┐рдпрд╛ рдЬрд╛ рд╕рдХрддрд╛ рд╣реИред рдпрд╣ рд╡рд┐рднрд╛рдЬрди рдиреЗрдЯрд╡рд░реНрдХ рдХреЗ рднреАрддрд░ рдХреБрд╢рд▓ рдкреНрд░рдмрдВрдзрди рдФрд░ рд╕реБрд░рдХреНрд╖рд╛ рдирд┐рдпрдВрддреНрд░рдг рдХреА рдЕрдиреБрдорддрд┐ рджреЗрддрд╛ рд╣реИред

### Enumeration

Azure рдЦрд╛рддреЗ рдореЗрдВ рд╕рднреА VNets рдФрд░ рдЙрдкрдиреЗрдЯреНрд╕ рдХреА рд╕реВрдЪреА рдмрдирд╛рдиреЗ рдХреЗ рд▓рд┐рдП, рдЖрдк Azure рдХрдорд╛рдВрдб-рд▓рд╛рдЗрди рдЗрдВрдЯрд░рдлреЗрд╕ (CLI) рдХрд╛ рдЙрдкрдпреЛрдЧ рдХрд░ рд╕рдХрддреЗ рд╣реИрдВред рдпрд╣рд╛рдБ рдХрджрдо рд╣реИрдВ:

{% code overflow="wrap" %}
```bash
# List VNets
az network vnet list --query "[].{name:name, location:location, addressSpace:addressSpace}" -o table

# List subnets of a VNet
az network vnet subnet list --resource-group <ResourceGroupName> --vnet-name <VNetName> --query "[].{name:name, addressPrefix:addressPrefix}" -o table
```
{% endcode %}

## рдиреЗрдЯрд╡рд░реНрдХ рд╕реБрд░рдХреНрд╖рд╛ рд╕рдореВрд╣ (NSG)

Azure рдореЗрдВ, рдПрдХ **рдиреЗрдЯрд╡рд░реНрдХ рд╕реБрд░рдХреНрд╖рд╛ рд╕рдореВрд╣ (NSG)** рдХрд╛ рдореБрдЦреНрдп рдХрд╛рд░реНрдп Azure рд╡рд░реНрдЪреБрдЕрд▓ рдиреЗрдЯрд╡рд░реНрдХ (VNet) рдХреЗ рднреАрддрд░ Azure рд╕рдВрд╕рд╛рдзрдиреЛрдВ рдХреЗ рд▓рд┐рдП рдФрд░ рд╕реЗ рдиреЗрдЯрд╡рд░реНрдХ рдЯреНрд░реИрдлрд╝рд┐рдХ рдХреЛ рдлрд╝рд┐рд▓реНрдЯрд░ рдХрд░рдирд╛ рд╣реИред рдЗрд╕рдореЗрдВ **рд╕реБрд░рдХреНрд╖рд╛ рдирд┐рдпрдореЛрдВ** рдХрд╛ рдПрдХ рд╕реЗрдЯ рд╣реЛрддрд╛ рд╣реИ рдЬреЛ рдиреЗрдЯрд╡рд░реНрдХ рдЯреНрд░реИрдлрд╝рд┐рдХ рдХреЗ рдкреНрд░рд╡рд╛рд╣ рдХреЛ рдмрд╛рд░реАрдХреА рд╕реЗ рдирд┐рд░реНрдзрд╛рд░рд┐рдд рдХрд░рддрд╛ рд╣реИред

NSG рдХреЗ рдкреНрд░рдореБрдЦ рдкрд╣рд▓реВ рд╢рд╛рдорд┐рд▓ рд╣реИрдВ:

* **рдЯреНрд░реИрдлрд╝рд┐рдХ рдирд┐рдпрдВрддреНрд░рдг**: рдкреНрд░рддреНрдпреЗрдХ NSG рдореЗрдВ рдирд┐рдпрдо рд╣реЛрддреЗ рд╣реИрдВ рдЬреЛ рд╡рд┐рднрд┐рдиреНрди Azure рд╕рдВрд╕рд╛рдзрдиреЛрдВ рд╕реЗ рд╕рдВрдмрдВрдзрд┐рдд рдЗрдирдмрд╛рдЙрдВрдб рдФрд░ рдЖрдЙрдЯрдмрд╛рдЙрдВрдб рдиреЗрдЯрд╡рд░реНрдХ рдЯреНрд░реИрдлрд╝рд┐рдХ рдХреЛ рдЕрдиреБрдорддрд┐ рджреЗрдиреЗ рдпрд╛ рд░реЛрдХрдиреЗ рдореЗрдВ рд╕рд╣рд╛рдпрдХ рд╣реЛрддреЗ рд╣реИрдВред
* **рдирд┐рдпрдо рдШрдЯрдХ**: NSG рдХреЗ рднреАрддрд░ рдХреЗ рдирд┐рдпрдо рдЕрддреНрдпрдзрд┐рдХ рд╡рд┐рд╢рд┐рд╖реНрдЯ рд╣реЛрддреЗ рд╣реИрдВ, рдЬреЛ рд╕реНрд░реЛрдд/рдЧрдВрддрд╡реНрдп IP рдкрддреЗ, рдкреЛрд░реНрдЯ рдФрд░ рдкреНрд░реЛрдЯреЛрдХреЙрд▓ рдЬреИрд╕реЗ рдорд╛рдирджрдВрдбреЛрдВ рдХреЗ рдЖрдзрд╛рд░ рдкрд░ рдЯреНрд░реИрдлрд╝рд┐рдХ рдХреЛ рдлрд╝рд┐рд▓реНрдЯрд░ рдХрд░рддреЗ рд╣реИрдВред рдпрд╣ рд╡рд┐рд╢рд┐рд╖реНрдЯрддрд╛ рдиреЗрдЯрд╡рд░реНрдХ рдЯреНрд░реИрдлрд╝рд┐рдХ рдХреЗ рдмрд╛рд░реАрдХ рдкреНрд░рдмрдВрдзрди рдХреА рдЕрдиреБрдорддрд┐ рджреЗрддреА рд╣реИред
* **рд╕реБрд░рдХреНрд╖рд╛ рд╕рдВрд╡рд░реНрдзрди**: рдпрд╣ рд╕реБрдирд┐рд╢реНрдЪрд┐рдд рдХрд░рдХреЗ рдХрд┐ рдХреЗрд╡рд▓ рдЕрдзрд┐рдХреГрдд рдЯреНрд░реИрдлрд╝рд┐рдХ рдЖрдкрдХреЗ Azure рд╕рдВрд╕рд╛рдзрдиреЛрдВ рдореЗрдВ рдкреНрд░рд╡реЗрд╢ рдпрд╛ рдирд┐рдХрд╛рд╕ рдХрд░ рд╕рдХрддрд╛ рд╣реИ, NSGs рдЖрдкрдХреЗ рдиреЗрдЯрд╡рд░реНрдХ рдЕрд╡рд╕рдВрд░рдЪрдирд╛ рдХреА рд╕реБрд░рдХреНрд╖рд╛ рд╕реНрдерд┐рддрд┐ рдХреЛ рдордЬрдмреВрдд рдХрд░рдиреЗ рдореЗрдВ рдорд╣рддреНрд╡рдкреВрд░реНрдг рднреВрдорд┐рдХрд╛ рдирд┐рднрд╛рддреЗ рд╣реИрдВред

### **рдЙрджрд╛рд╣рд░рдг**

* рдХрд▓реНрдкрдирд╛ рдХрд░реЗрдВ рдХрд┐ рдЖрдкрдХреЗ рдкрд╛рд╕ `MyNSG` рдирд╛рдо рдХрд╛ рдПрдХ NSG рд╣реИ рдЬреЛ рдЖрдкрдХреЗ VNet рдХреЗ рдПрдХ рдЙрдкрдиреЗрдЯ рдпрд╛ рдПрдХ рд╡рд┐рд╢рд┐рд╖реНрдЯ рд╡рд░реНрдЪреБрдЕрд▓ рдорд╢реАрди рдкрд░ рд▓рд╛рдЧреВ рд╣реИред рдЖрдк рдирд┐рдпрдо рдмрдирд╛ рд╕рдХрддреЗ рд╣реИрдВ рдЬреИрд╕реЗ:
* рдХрд┐рд╕реА рднреА рд╕реНрд░реЛрдд рд╕реЗ рдЖрдкрдХреЗ рд╡реЗрдм рд╕рд░реНрд╡рд░реЛрдВ рдХреЗ рд▓рд┐рдП HTTP рдЯреНрд░реИрдлрд╝рд┐рдХ (рдкреЛрд░реНрдЯ 80) рдХреА рдЕрдиреБрдорддрд┐ рджреЗрдиреЗ рд╡рд╛рд▓рд╛ рдПрдХ рдЗрдирдмрд╛рдЙрдВрдб рдирд┐рдпрдоред
* рдПрдХ рдЖрдЙрдЯрдмрд╛рдЙрдВрдб рдирд┐рдпрдо рдЬреЛ рдХреЗрд╡рд▓ рдПрдХ рд╡рд┐рд╢рд┐рд╖реНрдЯ рдЧрдВрддрд╡реНрдп IP рдкрддреЗ рдХреА рд╕реАрдорд╛ рдХреЗ рд▓рд┐рдП SQL рдЯреНрд░реИрдлрд╝рд┐рдХ (рдкреЛрд░реНрдЯ 1433) рдХреА рдЕрдиреБрдорддрд┐ рджреЗрддрд╛ рд╣реИред

### рдЧрдгрдирд╛

{% code overflow="wrap" %}
```bash
# List NSGs
az network nsg list --query "[].{name:name, location:location}" -o table

# Get NSG rules
az network nsg rule list --nsg-name <NSGName> --resource-group <ResourceGroupName> --query "[].{name:name, priority:priority, direction:direction, access:access, protocol:protocol, sourceAddressPrefix:sourceAddressPrefix, destinationAddressPrefix:destinationAddressPrefix, sourcePortRange:sourcePortRange, destinationPortRange:destinationPortRange}" -o table
```
{% endcode %}

## Azure Firewall

Azure Firewall рдПрдХ рдкреНрд░рдмрдВрдзрд┐рдд, рдХреНрд▓рд╛рдЙрдб-рдЖрдзрд╛рд░рд┐рдд **рдиреЗрдЯрд╡рд░реНрдХ рд╕реБрд░рдХреНрд╖рд╛ рд╕реЗрд╡рд╛ рд╣реИ рдЬреЛ рдЖрдкрдХреЗ Azure рд╡рд░реНрдЪреБрдЕрд▓ рдиреЗрдЯрд╡рд░реНрдХ рд╕рдВрд╕рд╛рдзрдиреЛрдВ рдХреА рд╕реБрд░рдХреНрд╖рд╛ рдХрд░рддреА рд╣реИ**ред рдпрд╣ рдПрдХ рдкреВрд░реА рддрд░рд╣ рд╕реЗ рд╕реНрдЯреЗрдЯрдлреБрд▓ рдлрд╝рд╛рдпрд░рд╡реЙрд▓ рдХреЗ рд░реВрдк рдореЗрдВ рд╕реЗрд╡рд╛ рд╣реИ рдЬрд┐рд╕рдореЗрдВ рдЕрдВрддрд░реНрдирд┐рд╣рд┐рдд рдЙрдЪреНрдЪ рдЙрдкрд▓рдмреНрдзрддрд╛ рдФрд░ рд╕реНрдХреЗрд▓реЗрдмрд┐рд▓рд┐рдЯреА рд╕реБрд╡рд┐рдзрд╛рдПрдБ рд╣реИрдВред

Azure Firewall **NSGs** рдХреА рддреБрд▓рдирд╛ рдореЗрдВ **рдЕрдзрд┐рдХ рдЙрдиреНрдирдд** рд╕реБрд╡рд┐рдзрд╛рдПрдБ рдкреНрд░рджрд╛рди рдХрд░рддрд╛ рд╣реИ, рдЬрд┐рд╕рдореЗрдВ **рдРрдкреНрд▓рд┐рдХреЗрд╢рди-рд╕реНрддрд░реАрдп рдлрд╝рд┐рд▓реНрдЯрд░рд┐рдВрдЧ**, рдиреЗрдЯрд╡рд░реНрдХ-рд╕реНрддрд░реАрдп рдлрд╝рд┐рд▓реНрдЯрд░рд┐рдВрдЧ, рдЦрддрд░реЗ рдХреА рдЬрд╛рдирдХрд╛рд░реА рдкрд░ рдЖрдзрд╛рд░рд┐рдд рдлрд╝рд┐рд▓реНрдЯрд░рд┐рдВрдЧ, рдФрд░ рд▓реЙрдЧрд┐рдВрдЧ рдФрд░ рдПрдирд╛рд▓рд┐рдЯрд┐рдХреНрд╕ рдХреЗ рд▓рд┐рдП Azure Monitor рдХреЗ рд╕рд╛рде рдПрдХреАрдХрд░рдг рд╢рд╛рдорд┐рд▓ рд╣реИред\
рдпрд╣ рдЖрдЙрдЯрдмрд╛рдЙрдВрдб, рдЗрдирдмрд╛рдЙрдВрдб, рд╕реНрдкреЛрдХ-рдЯреВ-рд╕реНрдкреЛрдХ, VPN, рдФрд░ ExpressRoute рдЯреНрд░реИрдлрд╝рд┐рдХ рдХреЛ рдлрд╝рд┐рд▓реНрдЯрд░ рдХрд░ рд╕рдХрддрд╛ рд╣реИред **рдлрд╝рд╛рдпрд░рд╡реЙрд▓ рдирд┐рдпрдо FQDN (рдкреВрд░реНрдг рд░реВрдк рд╕реЗ рдпреЛрдЧреНрдп рдбреЛрдореЗрди рдирд╛рдо), IP рдкрддреЗ, рдФрд░ рдкреЛрд░реНрдЯ рдХреЗ рдЖрдзрд╛рд░ рдкрд░ рдмрдирд╛рдП рдЬрд╛ рд╕рдХрддреЗ рд╣реИрдВ**ред

### Azure Firewall рдФрд░ NSGs рдХреЗ рдмреАрдЪ рдЕрдВрддрд░

1. **рджрд╛рдпрд░рд╛:**
* **NSG:** рд╕рдмрдиреЗрдЯ рдпрд╛ рдиреЗрдЯрд╡рд░реНрдХ рдЗрдВрдЯрд░рдлреЗрд╕ рд╕реНрддрд░ рдкрд░ рдХрд╛рдо рдХрд░рддрд╛ рд╣реИред рдЗрд╕рдХрд╛ рдЙрджреНрджреЗрд╢реНрдп рдиреЗрдЯрд╡рд░реНрдХ рдЗрдВрдЯрд░рдлреЗрд╕ (NIC), VMs, рдпрд╛ рд╕рдмрдиреЗрдЯ рд╕реЗ рдЗрдирдмрд╛рдЙрдВрдб рдФрд░ рдЖрдЙрдЯрдмрд╛рдЙрдВрдб рдЯреНрд░реИрдлрд╝рд┐рдХ рдХрд╛ рдмреБрдирд┐рдпрд╛рджреА рдлрд╝рд┐рд▓реНрдЯрд░рд┐рдВрдЧ рдкреНрд░рджрд╛рди рдХрд░рдирд╛ рд╣реИред
* **Azure Firewall:** VNet рд╕реНрддрд░ рдкрд░ рдХрд╛рд░реНрдп рдХрд░рддрд╛ рд╣реИ, рд╕реБрд░рдХреНрд╖рд╛ рдХрд╛ рдПрдХ рд╡реНрдпрд╛рдкрдХ рджрд╛рдпрд░рд╛ рдкреНрд░рджрд╛рди рдХрд░рддрд╛ рд╣реИред рдпрд╣ рдЖрдкрдХреЗ рд╡рд░реНрдЪреБрдЕрд▓ рдиреЗрдЯрд╡рд░реНрдХ рд╕рдВрд╕рд╛рдзрдиреЛрдВ рдХреА рд╕реБрд░рдХреНрд╖рд╛ рдХрд░рдиреЗ рдФрд░ VNet рдореЗрдВ рдЖрдиреЗ-рдЬрд╛рдиреЗ рд╡рд╛рд▓реЗ рдЯреНрд░реИрдлрд╝рд┐рдХ рдХрд╛ рдкреНрд░рдмрдВрдзрди рдХрд░рдиреЗ рдХреЗ рд▓рд┐рдП рдбрд┐рдЬрд╝рд╛рдЗрди рдХрд┐рдпрд╛ рдЧрдпрд╛ рд╣реИред
2. **рдХреНрд╖рдорддрд╛рдПрдБ:**
* **NSG:** IP рдкрддреЗ, рдкреЛрд░реНрдЯ, рдФрд░ рдкреНрд░реЛрдЯреЛрдХреЙрд▓ рдХреЗ рдЖрдзрд╛рд░ рдкрд░ рдмреБрдирд┐рдпрд╛рджреА рдлрд╝рд┐рд▓реНрдЯрд░рд┐рдВрдЧ рдХреНрд╖рдорддрд╛рдПрдБ рдкреНрд░рджрд╛рди рдХрд░рддрд╛ рд╣реИред рдпрд╣ рдРрдкреНрд▓рд┐рдХреЗрд╢рди-рд╕реНрддрд░реАрдп рдирд┐рд░реАрдХреНрд╖рдг рдпрд╛ рдЦрддрд░реЗ рдХреА рдЬрд╛рдирдХрд╛рд░реА рдЬреИрд╕реА рдЙрдиреНрдирдд рд╕реБрд╡рд┐рдзрд╛рдУрдВ рдХрд╛ рд╕рдорд░реНрдерди рдирд╣реАрдВ рдХрд░рддрд╛ рд╣реИред
* **Azure Firewall:** рдРрдкреНрд▓рд┐рдХреЗрд╢рди-рд╕реНрддрд░реАрдп (рд▓реЗрдпрд░ 7) рдЯреНрд░реИрдлрд╝рд┐рдХ рдлрд╝рд┐рд▓реНрдЯрд░рд┐рдВрдЧ, рдЦрддрд░реЗ рдХреА рдЬрд╛рдирдХрд╛рд░реА рдкрд░ рдЖрдзрд╛рд░рд┐рдд рдлрд╝рд┐рд▓реНрдЯрд░рд┐рдВрдЧ, рдиреЗрдЯрд╡рд░реНрдХ рдЯреНрд░реИрдлрд╝рд┐рдХ рдлрд╝рд┐рд▓реНрдЯрд░рд┐рдВрдЧ, рдФрд░ рдЕрдзрд┐рдХ рдЬреИрд╕реА рдЙрдиреНрдирдд рд╕реБрд╡рд┐рдзрд╛рдПрдБ рдкреНрд░рджрд╛рди рдХрд░рддрд╛ рд╣реИред рдпрд╣ рдХрдИ рд╕рд╛рд░реНрд╡рдЬрдирд┐рдХ IP рдкрддреЗ рдХрд╛ рднреА рд╕рдорд░реНрдерди рдХрд░рддрд╛ рд╣реИред
3. **рдЙрдкрдпреЛрдЧ рдХреЗ рдорд╛рдорд▓реЗ:**
* **NSG:** рдмреБрдирд┐рдпрд╛рджреА рдиреЗрдЯрд╡рд░реНрдХ рд╕реНрддрд░ рдХреЗ рдЯреНрд░реИрдлрд╝рд┐рдХ рдлрд╝рд┐рд▓реНрдЯрд░рд┐рдВрдЧ рдХреЗ рд▓рд┐рдП рдЖрджрд░реНрд╢ред
* **Azure Firewall:** рдЕрдзрд┐рдХ рдЬрдЯрд┐рд▓ рдлрд╝рд┐рд▓реНрдЯрд░рд┐рдВрдЧ рдкрд░рд┐рджреГрд╢реНрдпреЛрдВ рдХреЗ рд▓рд┐рдП рдЙрдкрдпреБрдХреНрдд рдЬрд╣рд╛рдБ рдРрдкреНрд▓рд┐рдХреЗрд╢рди-рд╕реНрддрд░реАрдп рдирд┐рдпрдВрддреНрд░рдг, рд▓реЙрдЧрд┐рдВрдЧ, рдФрд░ рдЦрддрд░реЗ рдХреА рдЬрд╛рдирдХрд╛рд░реА рдХреА рдЖрд╡рд╢реНрдпрдХрддрд╛ рд╣реЛрддреА рд╣реИред
4. **рдкреНрд░рдмрдВрдзрди рдФрд░ рдирд┐рдЧрд░рд╛рдиреА:**
* **NSG:** рдмреБрдирд┐рдпрд╛рджреА рд▓реЙрдЧрд┐рдВрдЧ рдФрд░ Azure Monitor рдХреЗ рд╕рд╛рде рдПрдХреАрдХрд░рдг рдкреНрд░рджрд╛рди рдХрд░рддрд╛ рд╣реИред
* **Azure Firewall:** Azure Monitor рдХреЗ рдорд╛рдзреНрдпрдо рд╕реЗ рдЙрдиреНрдирдд рд▓реЙрдЧрд┐рдВрдЧ рдФрд░ рдПрдирд╛рд▓рд┐рдЯрд┐рдХреНрд╕ рдХреНрд╖рдорддрд╛рдПрдБ рдкреНрд░рджрд╛рди рдХрд░рддрд╛ рд╣реИ, рдЬреЛ рдЯреНрд░реИрдлрд╝рд┐рдХ рдХреА рдкреНрд░рдХреГрддрд┐ рдФрд░ рдкреИрдЯрд░реНрди рдХреЛ рд╕рдордЭрдиреЗ рдХреЗ рд▓рд┐рдП рдЖрд╡рд╢реНрдпрдХ рд╣реИред

### Enumeration

{% code overflow="wrap" %}
```bash
# List Azure Firewalls
az network firewall list --query "[].{name:name, location:location, subnet:subnet, publicIp:publicIp}" -o table

# Get network rules of a firewall
az network firewall network-rule collection list --firewall-name <FirewallName> --resource-group <ResourceGroupName> --query "[].{name:name, rules:rules}" -o table

# Get application rules of a firewall
az network firewall application-rule collection list --firewall-name <FirewallName> --resource-group <ResourceGroupName> --query "[].{name:name, rules:rules}" -o table

# Get nat rules of a firewall
az network firewall nat-rule collection list --firewall-name <FirewallName> --resource-group <ResourceGroupName> --query "[].{name:name, rules:rules}" -o table
```
{% endcode %}

## рдиреЗрдЯрд╡рд░реНрдХ рд╡рд░реНрдЪреБрдЕрд▓ рдПрдкреНрд▓рд╛рдпрдВрд╕ (NVA)

Azure рдореЗрдВ рдПрдХ рдиреЗрдЯрд╡рд░реНрдХ рд╡рд░реНрдЪреБрдЕрд▓ рдПрдкреНрд▓рд╛рдпрдВрд╕ (**NVA**) рдПрдХ рд╡рд░реНрдЪреБрдЕрд▓ рдПрдкреНрд▓рд╛рдпрдВрд╕ рд╣реИ рдЬреЛ **рдПрдХ рд╡рд░реНрдЪреБрдЕрд▓ рдиреЗрдЯрд╡рд░реНрдХ рдХреЗ рднреАрддрд░ рдиреЗрдЯрд╡рд░реНрдХ рдХрд╛рд░реНрдпреЛрдВ рдХреЛ рдХрд░рддрд╛ рд╣реИ**ред NVAs рдЖрдорддреМрд░ рдкрд░ рдЙрди рдиреЗрдЯрд╡рд░реНрдХ рдХрд╛рд░реНрдпреЛрдВ рдХреЗ рд▓рд┐рдП рдЙрдкрдпреЛрдЧ рдХрд┐рдП рдЬрд╛рддреЗ рд╣реИрдВ рдЬреЛ **Azure рдореЗрдВ рд╕реНрд╡рд╛рднрд╛рд╡рд┐рдХ рд░реВрдк рд╕реЗ рдЙрдкрд▓рдмреНрдз рдирд╣реАрдВ рд╣реИрдВ** рдпрд╛ рдЬрдм рдЕрдзрд┐рдХ рдЕрдиреБрдХреВрд▓рди рдХреА рдЖрд╡рд╢реНрдпрдХрддрд╛ рд╣реЛрддреА рд╣реИред рд╡реЗ рдореВрд▓ рд░реВрдк рд╕реЗ **VMs рд╣реИрдВ рдЬреЛ рдиреЗрдЯрд╡рд░реНрдХ рдПрдкреНрд▓рд┐рдХреЗрд╢рди рдпрд╛ рд╕реЗрд╡рд╛рдПрдБ рдЪрд▓рд╛рддреЗ рд╣реИрдВ**, рдЬреИрд╕реЗ рдХрд┐ рдлрд╝рд╛рдпрд░рд╡реЙрд▓, WAN рдСрдкреНрдЯрд┐рдорд╛рдЗрдЬрд╝рд░, рдпрд╛ рд▓реЛрдб рдмреИрд▓реЗрдВрд╕рд░ред

NVAs рдЬрдЯрд┐рд▓ рд░реВрдЯрд┐рдВрдЧ, **рд╕реБрд░рдХреНрд╖рд╛**, рдФрд░ **рдиреЗрдЯрд╡рд░реНрдХ рдЯреНрд░реИрдлрд╝рд┐рдХ рдкреНрд░рдмрдВрдзрди** рдХрд╛рд░реНрдпреЛрдВ рдХреЗ рд▓рд┐рдП рдЙрдкрдпреЛрдЧ рдХрд┐рдП рдЬрд╛рддреЗ рд╣реИрдВред рдЗрдиреНрд╣реЗрдВ Azure **Marketplace** рд╕реЗ рддреИрдирд╛рдд рдХрд┐рдпрд╛ рдЬрд╛ рд╕рдХрддрд╛ рд╣реИ, рдЬрд╣рд╛рдБ рдХрдИ рддреГрддреАрдп-рдкрдХреНрд╖ рд╡рд┐рдХреНрд░реЗрддрд╛ рдЕрдкрдиреЗ рдПрдкреНрд▓рд╛рдпрдВрд╕ рдХреЛ Azure рд╡рд╛рддрд╛рд╡рд░рдг рдореЗрдВ рдПрдХреАрдХреГрдд рдХрд░рдиреЗ рдХреЗ рд▓рд┐рдП рддреИрдпрд╛рд░ рдХрд░рддреЗ рд╣реИрдВред

### **рдЙрджрд╛рд╣рд░рдг**

* рдПрдХ рд╕рдВрдЧрдарди Azure рдореЗрдВ рдПрдХ NVA рддреИрдирд╛рдд рдХрд░ рд╕рдХрддрд╛ рд╣реИ рддрд╛рдХрд┐ рдПрдХ **рдХрд╕реНрдЯрдо рдлрд╝рд╛рдпрд░рд╡реЙрд▓ рд╕рдорд╛рдзрд╛рди** рдмрдирд╛рдпрд╛ рдЬрд╛ рд╕рдХреЗред рдпрд╣ NVA рдПрдХ **рддреГрддреАрдп-рдкрдХреНрд╖ рдлрд╝рд╛рдпрд░рд╡реЙрд▓ рд╕реЙрдлрд╝реНрдЯрд╡реЗрдпрд░** рдЪрд▓рд╛ рд╕рдХрддрд╛ рд╣реИ, рдЬреЛ рдШреБрд╕рдкреИрда рдкрд╣рдЪрд╛рди, рдкреИрдХреЗрдЯ рдирд┐рд░реАрдХреНрд╖рдг, рдпрд╛ VPN рдХрдиреЗрдХреНрдЯрд┐рд╡рд┐рдЯреА рдЬреИрд╕реА рдЙрдиреНрдирдд рд╕реБрд╡рд┐рдзрд╛рдПрдБ рдкреНрд░рджрд╛рди рдХрд░рддрд╛ рд╣реИред NVA рдХреЛ рдЗрд╕рдХреЗ рдорд╛рдзреНрдпрдо рд╕реЗ рдЧреБрдЬрд░рдиреЗ рд╡рд╛рд▓реЗ рдЯреНрд░реИрдлрд╝рд┐рдХ рдХреА рдЬрд╛рдВрдЪ рдФрд░ рдлрд╝рд┐рд▓реНрдЯрд░ рдХрд░рдиреЗ рдХреЗ рд▓рд┐рдП рдХреЙрдиреНрдлрд╝рд┐рдЧрд░ рдХрд┐рдпрд╛ рдЬрд╛ рд╕рдХрддрд╛ рд╣реИ, рдпрд╣ рд╕реБрдирд┐рд╢реНрдЪрд┐рдд рдХрд░рддреЗ рд╣реБрдП рдХрд┐ рд╕рдВрдЧрдарди рдХреА рдиреАрддрд┐рдпреЛрдВ рдХреЗ рдЕрдиреБрд╕рд╛рд░ рд╕реБрд░рдХреНрд╖рд╛ рдЙрдкрд╛рдп рд▓рд╛рдЧреВ рд╣реИрдВред

### **рдЧрдгрдирд╛**

{% code overflow="wrap" %}
```bash
# Usually NVAs are named or tagged in a way to distinguish them from other VMs
az vm list --query "[].{name:name, resourceGroup:resourceGroup, location:location}" -o table

# For a specific VM identified as an NVA, list its network interfaces
az vm nic list --vm-name <VMName> --resource-group <ResourceGroupName> --query "[].{id:id}" -o table
```
{% endcode %}

## Azure рд░реВрдЯ рдЯреЗрдмрд▓ рдФрд░ рдЙрдкрдпреЛрдЧрдХрд░реНрддрд╛ рдкрд░рд┐рднрд╛рд╖рд┐рдд рд░реВрдЯ (UDR)

**Azure рд░реВрдЯ рдЯреЗрдмрд▓** Microsoft Azure рдХреЗ рднреАрддрд░ рдПрдХ рд╡рд┐рд╢реЗрд╖рддрд╛ рд╣реИ рдЬреЛ **Azure рд╡рд░реНрдЪреБрдЕрд▓ рдиреЗрдЯрд╡рд░реНрдХ (VNets)** рдХреЗ рднреАрддрд░ рдиреЗрдЯрд╡рд░реНрдХ рдЯреНрд░реИрдлрд╝рд┐рдХ рд░реВрдЯрд┐рдВрдЧ рдХреЛ **рдирд┐рдпрдВрддреНрд░рд┐рдд** рдХрд░рдиреЗ рдХреА рдЕрдиреБрдорддрд┐ рджреЗрддреА рд╣реИред рдореВрд▓ рд░реВрдк рд╕реЗ, рд╡реЗ рдпрд╣ рдкрд░рд┐рднрд╛рд╖рд┐рдд рдХрд░рддреЗ рд╣реИрдВ рдХрд┐ **рдкреИрдХреЗрдЯ** рдХреИрд╕реЗ **рд╕рдмрдиреЗрдЯреНрд╕** рдХреЗ рдмреАрдЪ, VNets рдХреЗ рдмреАрдЪ, рдпрд╛ рдмрд╛рд╣рд░реА рдиреЗрдЯрд╡рд░реНрдХреЛрдВ рдХреЗ рд▓рд┐рдП **рдЖрдЧреЗ рдмрдврд╝рд╛рдП** рдЬрд╛рддреЗ рд╣реИрдВред рдкреНрд░рддреНрдпреЗрдХ рд░реВрдЯ рдЯреЗрдмрд▓ рдореЗрдВ рдирд┐рдпрдореЛрдВ рдХрд╛ рдПрдХ рд╕реЗрдЯ рд╣реЛрддрд╛ рд╣реИ, рдЬрд┐рд╕реЗ рд░реВрдЯ рдХрд╣рд╛ рдЬрд╛рддрд╛ рд╣реИ, рдЬреЛ рдпрд╣ рдирд┐рд░реНрджрд┐рд╖реНрдЯ рдХрд░рддрд╛ рд╣реИ рдХрд┐ рдкреИрдХреЗрдЯ рдХреЛ рдЙрдирдХреЗ рдЧрдВрддрд╡реНрдп IP рдкрддреЗ рдХреЗ рдЖрдзрд╛рд░ рдкрд░ рдХреИрд╕реЗ рд░реВрдЯ рдХрд┐рдпрд╛ рдЬрд╛рдирд╛ рдЪрд╛рд╣рд┐рдПред

**рдЙрдкрдпреЛрдЧрдХрд░реНрддрд╛ рдкрд░рд┐рднрд╛рд╖рд┐рдд рд░реВрдЯ (UDR)** Azure рдореЗрдВ **рдХрд╕реНрдЯрдо рд░реВрдЯ рд╣реИрдВ рдЬрд┐рдиреНрд╣реЗрдВ рдЖрдк Azure рд░реВрдЯ рдЯреЗрдмрд▓ рдХреЗ рднреАрддрд░ рдмрдирд╛рддреЗ рд╣реИрдВ** рддрд╛рдХрд┐ Azure рд╡рд░реНрдЪреБрдЕрд▓ рдиреЗрдЯрд╡рд░реНрдХ (VNets) рдХреЗ рднреАрддрд░ рдФрд░ рдЙрдирдХреЗ рдмреАрдЪ, рдФрд░ рдмрд╛рд╣рд░реА рдХрдиреЗрдХреНрд╢рдиреЛрдВ рдХреЗ рд▓рд┐рдП **рдиреЗрдЯрд╡рд░реНрдХ рдЯреНрд░реИрдлрд╝рд┐рдХ рдХреЗ рдкреНрд░рд╡рд╛рд╣** рдХреЛ рдирд┐рдпрдВрддреНрд░рд┐рдд рдХрд┐рдпрд╛ рдЬрд╛ рд╕рдХреЗред UDRs рдЖрдкрдХреЛ рдЖрдкрдХреЗ рд╡рд┐рд╢рд┐рд╖реНрдЯ рдЖрд╡рд╢реНрдпрдХрддрд╛рдУрдВ рдХреЗ рдЕрдиреБрд╕рд╛рд░ рдиреЗрдЯрд╡рд░реНрдХ рдЯреНрд░реИрдлрд╝рд┐рдХ рдХреЛ рдирд┐рд░реНрджреЗрд╢рд┐рдд рдХрд░рдиреЗ рдХреА рд▓рдЪреАрд▓рд╛рдкрди рджреЗрддреЗ рд╣реИрдВ, Azure рдХреЗ рдбрд┐рдлрд╝реЙрд▓реНрдЯ рд░реВрдЯрд┐рдВрдЧ рдирд┐рд░реНрдгрдпреЛрдВ рдХреЛ рдУрд╡рд░рд░рд╛рдЗрдб рдХрд░рддреЗ рд╣реИрдВред

рдпреЗ рд░реВрдЯ рд╡рд┐рд╢реЗрд╖ рд░реВрдк рд╕реЗ рдЙрди рдкрд░рд┐рджреГрд╢реНрдпреЛрдВ рдХреЗ рд▓рд┐рдП рдЙрдкрдпреЛрдЧреА рд╣реЛрддреЗ рд╣реИрдВ рдЬрд╣рд╛рдВ рдЖрдкрдХреЛ **рд╡рд░реНрдЪреБрдЕрд▓ рдЙрдкрдХрд░рдг рдХреЗ рдорд╛рдзреНрдпрдо рд╕реЗ рдЯреНрд░реИрдлрд╝рд┐рдХ рд░реВрдЯ рдХрд░рдирд╛** рд╣реИ, рд╕реБрд░рдХреНрд╖рд╛ рдпрд╛ рдиреАрддрд┐ рдЕрдиреБрдкрд╛рд▓рди рдХреЗ рд▓рд┐рдП рдПрдХ рд╡рд┐рд╢рд┐рд╖реНрдЯ рдорд╛рд░реНрдЧ рдХреЛ рд▓рд╛рдЧреВ рдХрд░рдирд╛ рд╣реИ, рдпрд╛ рдСрди-рдкреНрд░рд┐рдорд╛рдЗрд╕реЗрд╕ рдиреЗрдЯрд╡рд░реНрдХ рдХреЗ рд╕рд╛рде рдПрдХреАрдХреГрдд рдХрд░рдирд╛ рд╣реИред

### **рдЙрджрд╛рд╣рд░рдг**

* рдорд╛рди рд▓реАрдЬрд┐рдП рдХрд┐ рдЖрдкрдиреЗ рдПрдХ рдиреЗрдЯрд╡рд░реНрдХ рд╡рд░реНрдЪреБрдЕрд▓ рдЙрдкрдХрд░рдг (NVA) рддреИрдирд╛рдд рдХрд┐рдпрд╛ рд╣реИ рдЬреЛ рдПрдХ VNet рдХреЗ рднреАрддрд░ рд╕рдмрдиреЗрдЯреНрд╕ рдХреЗ рдмреАрдЪ рдЯреНрд░реИрдлрд╝рд┐рдХ рдХрд╛ рдирд┐рд░реАрдХреНрд╖рдг рдХрд░рддрд╛ рд╣реИред рдЖрдк рдПрдХ UDR рдмрдирд╛ рд╕рдХрддреЗ рд╣реИрдВ рдЬреЛ рдПрдХ рд╕рдмрдиреЗрдЯ рд╕реЗ рджреВрд╕рд░реЗ рд╕рдмрдиреЗрдЯ рддрдХ рд╕рднреА рдЯреНрд░реИрдлрд╝рд┐рдХ рдХреЛ NVA рдХреЗ рдорд╛рдзреНрдпрдо рд╕реЗ рдЬрд╛рдиреЗ рдХреЗ рд▓рд┐рдП рдирд┐рд░реНрджреЗрд╢рд┐рдд рдХрд░рддрд╛ рд╣реИред рдпрд╣ UDR рд╕реБрдирд┐рд╢реНрдЪрд┐рдд рдХрд░рддрд╛ рд╣реИ рдХрд┐ NVA рд╕реБрд░рдХреНрд╖рд╛ рдЙрджреНрджреЗрд╢реНрдпреЛрдВ рдХреЗ рд▓рд┐рдП рдЯреНрд░реИрдлрд╝рд┐рдХ рдХрд╛ рдирд┐рд░реАрдХреНрд╖рдг рдХрд░рддрд╛ рд╣реИ рдЗрд╕рд╕реЗ рдкрд╣рд▓реЗ рдХрд┐ рдпрд╣ рдЕрдкрдиреЗ рдЧрдВрддрд╡реНрдп рддрдХ рдкрд╣реБрдВрдЪреЗред

### **рдЧрдгрдирд╛**

{% code overflow="wrap" %}
```bash
# List Route Tables
az network route-table list --query "[].{name:name, resourceGroup:resourceGroup, location:location}" -o table

# List UDRs for a table
az network route-table route list --route-table-name <RouteTableName> --resource-group <ResourceGroupName> --query "[].{name:name, addressPrefix:addressPrefix, nextHopType:nextHopType, nextHopIpAddress:nextHopIpAddress}" -o table
```
{% endcode %}

## Azure Private Link

Azure Private Link рдПрдХ рд╕реЗрд╡рд╛ рд╣реИ рдЬреЛ Azure рдореЗрдВ **Azure рд╕реЗрд╡рд╛рдУрдВ рдХреЗ рд▓рд┐рдП рдирд┐рдЬреА рдкрд╣реБрдВрдЪ рд╕рдХреНрд╖рдо рдХрд░рддреА рд╣реИ** рдпрд╣ рд╕реБрдирд┐рд╢реНрдЪрд┐рдд рдХрд░рдХреЗ рдХрд┐ **рдЖрдкрдХреЗ Azure рд╡рд░реНрдЪреБрдЕрд▓ рдиреЗрдЯрд╡рд░реНрдХ (VNet) рдФрд░ рд╕реЗрд╡рд╛ рдХреЗ рдмреАрдЪ рдХрд╛ рдЯреНрд░реИрдлрд╝рд┐рдХ рдкреВрд░реА рддрд░рд╣ рд╕реЗ Microsoft рдХреЗ Azure рдмреИрдХрдмреЛрди рдиреЗрдЯрд╡рд░реНрдХ рдХреЗ рднреАрддрд░ рдпрд╛рддреНрд░рд╛ рдХрд░рддрд╛ рд╣реИ**ред рдпрд╣ рдкреНрд░рднрд╛рд╡реА рд░реВрдк рд╕реЗ рд╕реЗрд╡рд╛ рдХреЛ рдЖрдкрдХреЗ VNet рдореЗрдВ рд▓рд╛рддрд╛ рд╣реИред рдпрд╣ рд╕реЗрдЯрдЕрдк рд╕реБрд░рдХреНрд╖рд╛ рдХреЛ рдмрдврд╝рд╛рддрд╛ рд╣реИ рдХреНрдпреЛрдВрдХрд┐ рдбреЗрдЯрд╛ рдХреЛ рд╕рд╛рд░реНрд╡рдЬрдирд┐рдХ рдЗрдВрдЯрд░рдиреЗрдЯ рдкрд░ рдЙрдЬрд╛рдЧрд░ рдирд╣реАрдВ рдХрд┐рдпрд╛ рдЬрд╛рддрд╛ рд╣реИред

Private Link рдХрд╛ рдЙрдкрдпреЛрдЧ рд╡рд┐рднрд┐рдиреНрди Azure рд╕реЗрд╡рд╛рдУрдВ рдХреЗ рд╕рд╛рде рдХрд┐рдпрд╛ рдЬрд╛ рд╕рдХрддрд╛ рд╣реИ, рдЬреИрд╕реЗ Azure Storage, Azure SQL Database, рдФрд░ Private Link рдХреЗ рдорд╛рдзреНрдпрдо рд╕реЗ рд╕рд╛рдЭрд╛ рдХреА рдЧрдИ рдХрд╕реНрдЯрдо рд╕реЗрд╡рд╛рдПрдВред рдпрд╣ рдЖрдкрдХреЗ рдЕрдкрдиреЗ VNet рдХреЗ рднреАрддрд░ рдпрд╛ рдпрд╣рд╛рдВ рддрдХ рдХрд┐ рд╡рд┐рднрд┐рдиреНрди Azure рд╕рдмреНрд╕рдХреНрд░рд┐рдкреНрд╢рди рд╕реЗ рд╕реЗрд╡рд╛рдУрдВ рдХрд╛ рдЙрдкрднреЛрдЧ рдХрд░рдиреЗ рдХрд╛ рдПрдХ рд╕реБрд░рдХреНрд╖рд┐рдд рддрд░реАрдХрд╛ рдкреНрд░рджрд╛рди рдХрд░рддрд╛ рд╣реИред

{% hint style="danger" %}
NSGs рдирд┐рдЬреА рдПрдВрдбрдкреЙрдЗрдВрдЯреНрд╕ рдкрд░ рд▓рд╛рдЧреВ рдирд╣реАрдВ рд╣реЛрддреЗ рд╣реИрдВ, рдЬрд┐рд╕рдХрд╛ рд╕реНрдкрд╖реНрдЯ рдЕрд░реНрде рд╣реИ рдХрд┐ Private Link рд╡рд╛рд▓реЗ рд╕рдмрдиреЗрдЯ рдХреЗ рд╕рд╛рде NSG рдХреЛ рдЬреЛрдбрд╝рдиреЗ рдХрд╛ рдХреЛрдИ рдкреНрд░рднрд╛рд╡ рдирд╣реАрдВ рд╣реЛрдЧрд╛ред
{% endhint %}

### **Example**

* рдПрдХ рдкрд░рд┐рджреГрд╢реНрдп рдкрд░ рд╡рд┐рдЪрд╛рд░ рдХрд░реЗрдВ рдЬрд╣рд╛рдВ рдЖрдкрдХреЗ рдкрд╛рд╕ рдПрдХ **Azure SQL Database рд╣реИ рдЬрд┐рд╕реЗ рдЖрдк рдЕрдкрдиреЗ VNet рд╕реЗ рд╕реБрд░рдХреНрд╖рд┐рдд рд░реВрдк рд╕реЗ рдПрдХреНрд╕реЗрд╕ рдХрд░рдирд╛ рдЪрд╛рд╣рддреЗ рд╣реИрдВ**ред рд╕рд╛рдорд╛рдиреНрдпрддрдГ, рдЗрд╕рдореЗрдВ рд╕рд╛рд░реНрд╡рдЬрдирд┐рдХ рдЗрдВрдЯрд░рдиреЗрдЯ рдХреЗ рдорд╛рдзреНрдпрдо рд╕реЗ рдпрд╛рддреНрд░рд╛ рдХрд░рдирд╛ рд╢рд╛рдорд┐рд▓ рд╣реЛ рд╕рдХрддрд╛ рд╣реИред Private Link рдХреЗ рд╕рд╛рде, рдЖрдк рдЕрдкрдиреЗ VNet рдореЗрдВ рдПрдХ **рдирд┐рдЬреА рдПрдВрдбрдкреЙрдЗрдВрдЯ рдмрдирд╛ рд╕рдХрддреЗ рд╣реИрдВ** рдЬреЛ рд╕реАрдзреЗ Azure SQL Database рд╕реЗрд╡рд╛ рд╕реЗ рдЬреБрдбрд╝рддрд╛ рд╣реИред рдпрд╣ рдПрдВрдбрдкреЙрдЗрдВрдЯ рдбреЗрдЯрд╛рдмреЗрд╕ рдХреЛ рдЗрд╕ рддрд░рд╣ рд╕реЗ рдкреНрд░рджрд░реНрд╢рд┐рдд рдХрд░рддрд╛ рд╣реИ рдЬреИрд╕реЗ рдХрд┐ рдпрд╣ рдЖрдкрдХреЗ рдЕрдкрдиреЗ VNet рдХрд╛ рд╣рд┐рд╕реНрд╕рд╛ рд╣реИ, рдПрдХ рдирд┐рдЬреА IP рдкрддреЗ рдХреЗ рдорд╛рдзреНрдпрдо рд╕реЗ рдкрд╣реБрдВрдЪ рдпреЛрдЧреНрдп рд╣реИ, рдЗрд╕ рдкреНрд░рдХрд╛рд░ рд╕реБрд░рдХреНрд╖рд┐рдд рдФрд░ рдирд┐рдЬреА рдкрд╣реБрдВрдЪ рд╕реБрдирд┐рд╢реНрдЪрд┐рдд рдХрд░рддрд╛ рд╣реИред

### **Enumeration**

{% code overflow="wrap" %}
```bash
# List Private Link Services
z network private-link-service list --query "[].{name:name, location:location, resourceGroup:resourceGroup}" -o table

# List Private Endpoints
az network private-endpoint list --query "[].{name:name, location:location, resourceGroup:resourceGroup, privateLinkServiceConnections:privateLinkServiceConnections}" -o table
```
{% endcode %}

## Azure рд╕реЗрд╡рд╛ рдПрдВрдбрдкреЙрдЗрдВрдЯ

Azure рд╕реЗрд╡рд╛ рдПрдВрдбрдкреЙрдЗрдВрдЯ рдЖрдкрдХреЗ рд╡рд░реНрдЪреБрдЕрд▓ рдиреЗрдЯрд╡рд░реНрдХ рдХреЗ рдирд┐рдЬреА рдкрддреЗ рдХреА рдЬрдЧрд╣ рдФрд░ рдЖрдкрдХреЗ VNet рдХреА рдкрд╣рдЪрд╛рди рдХреЛ Azure рд╕реЗрд╡рд╛рдУрдВ рдХреЗ рд▓рд┐рдП рдПрдХ рд╕реАрдзреЗ рдХрдиреЗрдХреНрд╢рди рдХреЗ рдорд╛рдзреНрдпрдо рд╕реЗ рдмрдврд╝рд╛рддреЗ рд╣реИрдВред рд╕реЗрд╡рд╛ рдПрдВрдбрдкреЙрдЗрдВрдЯ рд╕рдХреНрд╖рдо рдХрд░рдХреЗ, **рдЖрдкрдХреЗ VNet рдореЗрдВ рд╕рдВрд╕рд╛рдзрди рд╕реБрд░рдХреНрд╖рд┐рдд рд░реВрдк рд╕реЗ Azure рд╕реЗрд╡рд╛рдУрдВ рд╕реЗ рдХрдиреЗрдХреНрдЯ рдХрд░ рд╕рдХрддреЗ рд╣реИрдВ**, рдЬреИрд╕реЗ Azure Storage рдФрд░ Azure SQL Database, Azure рдХреЗ рдмреИрдХрдмреЛрди рдиреЗрдЯрд╡рд░реНрдХ рдХрд╛ рдЙрдкрдпреЛрдЧ рдХрд░рддреЗ рд╣реБрдПред рдпрд╣ рд╕реБрдирд┐рд╢реНрдЪрд┐рдд рдХрд░рддрд╛ рд╣реИ рдХрд┐ **VNet рд╕реЗ Azure рд╕реЗрд╡рд╛ рддрдХ рдХрд╛ рдЯреНрд░реИрдлрд╝рд┐рдХ Azure рдиреЗрдЯрд╡рд░реНрдХ рдХреЗ рднреАрддрд░ рд░рд╣рддрд╛ рд╣реИ**, рдЬреЛ рдПрдХ рдЕрдзрд┐рдХ рд╕реБрд░рдХреНрд╖рд┐рдд рдФрд░ рд╡рд┐рд╢реНрд╡рд╕рдиреАрдп рдорд╛рд░реНрдЧ рдкреНрд░рджрд╛рди рдХрд░рддрд╛ рд╣реИред

### **рдЙрджрд╛рд╣рд░рдг**

* рдЙрджрд╛рд╣рд░рдг рдХреЗ рд▓рд┐рдП, рдПрдХ **Azure Storage** рдЦрд╛рддрд╛ рдбрд┐рдлрд╝реЙрд▓реНрдЯ рд░реВрдк рд╕реЗ рд╕рд╛рд░реНрд╡рдЬрдирд┐рдХ рдЗрдВрдЯрд░рдиреЗрдЯ рдкрд░ рд╕реБрд▓рдн рд╣реИред рдЕрдкрдиреЗ VNet рдХреЗ рднреАрддрд░ **Azure Storage рдХреЗ рд▓рд┐рдП рдПрдХ рд╕реЗрд╡рд╛ рдПрдВрдбрдкреЙрдЗрдВрдЯ рд╕рдХреНрд╖рдо рдХрд░рдХреЗ**, рдЖрдк рд╕реБрдирд┐рд╢реНрдЪрд┐рдд рдХрд░ рд╕рдХрддреЗ рд╣реИрдВ рдХрд┐ рдХреЗрд╡рд▓ рдЖрдкрдХреЗ VNet рд╕реЗ рдЖрдиреЗ рд╡рд╛рд▓рд╛ рдЯреНрд░реИрдлрд╝рд┐рдХ рд╕реНрдЯреЛрд░реЗрдЬ рдЦрд╛рддреЗ рддрдХ рдкрд╣реБрдБрдЪ рд╕рдХрддрд╛ рд╣реИред рдлрд┐рд░ рд╕реНрдЯреЛрд░реЗрдЬ рдЦрд╛рддрд╛ рдлрд╝рд╛рдпрд░рд╡реЙрд▓ рдХреЛ рдЗрд╕ рддрд░рд╣ рд╕реЗ рдХреЙрдиреНрдлрд╝рд┐рдЧрд░ рдХрд┐рдпрд╛ рдЬрд╛ рд╕рдХрддрд╛ рд╣реИ рдХрд┐ рд╡рд╣ рдХреЗрд╡рд▓ рдЖрдкрдХреЗ VNet рд╕реЗ рдЖрдиреЗ рд╡рд╛рд▓реЗ рдЯреНрд░реИрдлрд╝рд┐рдХ рдХреЛ рд╕реНрд╡реАрдХрд╛рд░ рдХрд░реЗред

### **рдЧрдгрдирд╛**

{% code overflow="wrap" %}
```bash
# List Virtual Networks with Service Endpoints
az network vnet list --query "[].{name:name, location:location, serviceEndpoints:serviceEndpoints}" -o table

# List Subnets with Service Endpoints
az network vnet subnet list --resource-group <ResourceGroupName> --vnet-name <VNetName> --query "[].{name:name, serviceEndpoints:serviceEndpoints}" -o table
```
{% endcode %}

### Service Endpoints рдФрд░ Private Links рдХреЗ рдмреАрдЪ рдЕрдВрддрд░

Microsoft [**docs**](https://learn.microsoft.com/en-us/azure/virtual-network/vnet-integration-for-azure-services#compare-private-endpoints-and-service-endpoints) рдореЗрдВ Private Links рдХрд╛ рдЙрдкрдпреЛрдЧ рдХрд░рдиреЗ рдХреА рд╕рд┐рдлрд╛рд░рд┐рд╢ рдХрд░рддрд╛ рд╣реИ: \\

<figure><img src="../../../../.gitbook/assets/image (25).png" alt=""><figcaption></figcaption></figure>

**Service Endpoints:**

* рдЖрдкрдХреЗ VNet рд╕реЗ Azure рд╕реЗрд╡рд╛ рддрдХ рдХрд╛ рдЯреНрд░реИрдлрд╝рд┐рдХ Microsoft Azure рдмреИрдХрдмреЛрди рдиреЗрдЯрд╡рд░реНрдХ рдХреЗ рдорд╛рдзреНрдпрдо рд╕реЗ рдпрд╛рддреНрд░рд╛ рдХрд░рддрд╛ рд╣реИ, рд╕рд╛рд░реНрд╡рдЬрдирд┐рдХ рдЗрдВрдЯрд░рдиреЗрдЯ рдХреЛ рдмрд╛рдпрдкрд╛рд╕ рдХрд░рддрд╛ рд╣реИред
* рдпрд╣ рдПрдВрдбрдкреЙрдЗрдВрдЯ Azure рд╕реЗрд╡рд╛ рдХреЗ рд▓рд┐рдП рдПрдХ рд╕реАрдзрд╛ рдХрдиреЗрдХреНрд╢рди рд╣реИ рдФрд░ VNet рдХреЗ рднреАрддрд░ рд╕реЗрд╡рд╛ рдХреЗ рд▓рд┐рдП рдПрдХ рдирд┐рдЬреА IP рдкреНрд░рджрд╛рди рдирд╣реАрдВ рдХрд░рддрд╛ рд╣реИред
* рд╕реЗрд╡рд╛ рд╕реНрд╡рдпрдВ рдЖрдкрдХреЗ VNet рдХреЗ рдмрд╛рд╣рд░ рдЗрд╕рдХреЗ рд╕рд╛рд░реНрд╡рдЬрдирд┐рдХ рдПрдВрдбрдкреЙрдЗрдВрдЯ рдХреЗ рдорд╛рдзреНрдпрдо рд╕реЗ рдЕрднреА рднреА рд╕реБрд▓рдн рд╣реИ рдЬрдм рддрдХ рдХрд┐ рдЖрдк рд╕реЗрд╡рд╛ рдлрд╝рд╛рдпрд░рд╡реЙрд▓ рдХреЛ рдРрд╕реЗ рдЯреНрд░реИрдлрд╝рд┐рдХ рдХреЛ рдмреНрд▓реЙрдХ рдХрд░рдиреЗ рдХреЗ рд▓рд┐рдП рдХреЙрдиреНрдлрд╝рд┐рдЧрд░ рдирд╣реАрдВ рдХрд░рддреЗред
* рдпрд╣ рд╕рдмрдиреЗрдЯ рдФрд░ Azure рд╕реЗрд╡рд╛ рдХреЗ рдмреАрдЪ рдПрдХ-рд╕реЗ-рдПрдХ рд╕рдВрдмрдВрдз рд╣реИред
* Private Links рдХреА рддреБрд▓рдирд╛ рдореЗрдВ рдХрдо рдорд╣рдВрдЧрд╛ рд╣реИред

**Private Links:**

* Private Link Azure рд╕реЗрд╡рд╛рдУрдВ рдХреЛ рдЖрдкрдХреЗ VNet рдореЗрдВ рдПрдХ рдирд┐рдЬреА рдПрдВрдбрдкреЙрдЗрдВрдЯ рдХреЗ рдорд╛рдзреНрдпрдо рд╕реЗ рдореИрдк рдХрд░рддрд╛ рд╣реИ, рдЬреЛ рдЖрдкрдХреЗ VNet рдХреЗ рднреАрддрд░ рдПрдХ рдирд┐рдЬреА IP рдкрддреЗ рдХреЗ рд╕рд╛рде рдПрдХ рдиреЗрдЯрд╡рд░реНрдХ рдЗрдВрдЯрд░рдлрд╝реЗрд╕ рд╣реИред
* Azure рд╕реЗрд╡рд╛ рдХреЛ рдЗрд╕ рдирд┐рдЬреА IP рдкрддреЗ рдХрд╛ рдЙрдкрдпреЛрдЧ рдХрд░рдХреЗ рдПрдХреНрд╕реЗрд╕ рдХрд┐рдпрд╛ рдЬрд╛рддрд╛ рд╣реИ, рдЬрд┐рд╕рд╕реЗ рдпрд╣ рдРрд╕рд╛ рдкреНрд░рддреАрдд рд╣реЛрддрд╛ рд╣реИ рдЬреИрд╕реЗ рдпрд╣ рдЖрдкрдХреЗ рдиреЗрдЯрд╡рд░реНрдХ рдХрд╛ рд╣рд┐рд╕реНрд╕рд╛ рд╣реИред
* Private Link рдХреЗ рдорд╛рдзреНрдпрдо рд╕реЗ рдЬреБрдбрд╝реЗ рд╕реЗрд╡рд╛рдУрдВ рдХреЛ рдХреЗрд╡рд▓ рдЖрдкрдХреЗ VNet рдпрд╛ рдЬреБрдбрд╝реЗ рдиреЗрдЯрд╡рд░реНрдХ рд╕реЗ рдПрдХреНрд╕реЗрд╕ рдХрд┐рдпрд╛ рдЬрд╛ рд╕рдХрддрд╛ рд╣реИ; рд╕реЗрд╡рд╛ рдХреЗ рд▓рд┐рдП рдХреЛрдИ рд╕рд╛рд░реНрд╡рдЬрдирд┐рдХ рдЗрдВрдЯрд░рдиреЗрдЯ рдПрдХреНрд╕реЗрд╕ рдирд╣реАрдВ рд╣реИред
* рдпрд╣ Azure рд╕реЗрд╡рд╛рдУрдВ рдпрд╛ Azure рдореЗрдВ рд╣реЛрд╕реНрдЯ рдХреА рдЧрдИ рдЖрдкрдХреА рдЕрдкрдиреА рд╕реЗрд╡рд╛рдУрдВ рдХреЗ рд▓рд┐рдП рдПрдХ рд╕реБрд░рдХреНрд╖рд┐рдд рдХрдиреЗрдХреНрд╢рди рд╕рдХреНрд╖рдо рдХрд░рддрд╛ рд╣реИ, рд╕рд╛рде рд╣реА рджреВрд╕рд░реЛрдВ рджреНрд╡рд╛рд░рд╛ рд╕рд╛рдЭрд╛ рдХреА рдЧрдИ рд╕реЗрд╡рд╛рдУрдВ рдХреЗ рд▓рд┐рдП рднреАред
* рдпрд╣ рдЖрдкрдХреЗ VNet рдореЗрдВ рдПрдХ рдирд┐рдЬреА рдПрдВрдбрдкреЙрдЗрдВрдЯ рдХреЗ рдорд╛рдзреНрдпрдо рд╕реЗ рдЕрдзрд┐рдХ рдмрд╛рд░реАрдХ рдкрд╣реБрдВрдЪ рдирд┐рдпрдВрддреНрд░рдг рдкреНрд░рджрд╛рди рдХрд░рддрд╛ рд╣реИ, рдЬрдмрдХрд┐ рд╕реЗрд╡рд╛ рдПрдВрдбрдкреЙрдЗрдВрдЯ рдХреЗ рд╕рд╛рде рд╕рдмрдиреЗрдЯ рд╕реНрддрд░ рдкрд░ рд╡реНрдпрд╛рдкрдХ рдкрд╣реБрдВрдЪ рдирд┐рдпрдВрддреНрд░рдг рдХреА рддреБрд▓рдирд╛ рдореЗрдВред

рд╕рдВрдХреНрд╖реЗрдк рдореЗрдВ, рдЬрдмрдХрд┐ Service Endpoints рдФрд░ Private Links рджреЛрдиреЛрдВ Azure рд╕реЗрд╡рд╛рдУрдВ рдХреЗ рд▓рд┐рдП рд╕реБрд░рдХреНрд╖рд┐рдд рдХрдиреЗрдХреНрдЯрд┐рд╡рд┐рдЯреА рдкреНрд░рджрд╛рди рдХрд░рддреЗ рд╣реИрдВ, **Private Links рдПрдХ рдЙрдЪреНрдЪ рд╕реНрддрд░ рдХреА рдЕрд▓рдЧрд╛рд╡ рдФрд░ рд╕реБрд░рдХреНрд╖рд╛ рдкреНрд░рджрд╛рди рдХрд░рддреЗ рд╣реИрдВ рдпрд╣ рд╕реБрдирд┐рд╢реНрдЪрд┐рдд рдХрд░рддреЗ рд╣реБрдП рдХрд┐ рд╕реЗрд╡рд╛рдУрдВ рдХреЛ рд╕рд╛рд░реНрд╡рдЬрдирд┐рдХ рдЗрдВрдЯрд░рдиреЗрдЯ рдХреЗ рд▓рд┐рдП рдЙрдЬрд╛рдЧрд░ рдХрд┐рдП рдмрд┐рдирд╛ рдирд┐рдЬреА рд░реВрдк рд╕реЗ рдПрдХреНрд╕реЗрд╕ рдХрд┐рдпрд╛ рдЬрд╛рддрд╛ рд╣реИ**ред рджреВрд╕рд░реА рдУрд░, Service Endpoints рд╕рд╛рдорд╛рдиреНрдп рдорд╛рдорд▓реЛрдВ рдХреЗ рд▓рд┐рдП рд╕реЗрдЯ рдЕрдк рдХрд░рдирд╛ рдЖрд╕рд╛рди рд╣реИ рдЬрд╣рд╛рдВ Azure рд╕реЗрд╡рд╛рдУрдВ рдХреЗ рд▓рд┐рдП рд╕рд░рд▓, рд╕реБрд░рдХреНрд╖рд┐рдд рдкрд╣реБрдВрдЪ рдХреА рдЖрд╡рд╢реНрдпрдХрддрд╛ рд╣реЛрддреА рд╣реИ рдмрд┐рдирд╛ VNet рдореЗрдВ рдПрдХ рдирд┐рдЬреА IP рдХреА рдЖрд╡рд╢реНрдпрдХрддрд╛ рдХреЗред

## Azure Front Door (AFD) & AFD WAF

**Azure Front Door** рдЖрдкрдХреЗ рд╡реИрд╢реНрд╡рд┐рдХ рд╡реЗрдм рдЕрдиреБрдкреНрд░рдпреЛрдЧреЛрдВ рдХреЗ рд▓рд┐рдП **рддреЗрдЬрд╝ рдбрд┐рд▓реАрд╡рд░реА** рдХреЗ рд▓рд┐рдП рдПрдХ рд╕реНрдХреЗрд▓реЗрдмрд▓ рдФрд░ рд╕реБрд░рдХреНрд╖рд┐рдд рдкреНрд░рд╡реЗрд╢ рдмрд┐рдВрджреБ рд╣реИред рдпрд╣ **рд╡реИрд╢реНрд╡рд┐рдХ рд▓реЛрдб рдмреИрд▓реЗрдВрд╕рд┐рдВрдЧ, рд╕рд╛рдЗрдЯ рддреНрд╡рд░рдХ, SSL рдСрдлрд╝рд▓реЛрдбрд┐рдВрдЧ, рдФрд░ рд╡реЗрдм рдПрдкреНрд▓рд┐рдХреЗрд╢рди рдлрд╝рд╛рдпрд░рд╡реЙрд▓ (WAF)** рдХреНрд╖рдорддрд╛рдУрдВ рдЬреИрд╕реА рд╡рд┐рднрд┐рдиреНрди рд╕реЗрд╡рд╛рдУрдВ рдХреЛ рдПрдХрд▓ рд╕реЗрд╡рд╛ рдореЗрдВ **рд╕рдВрдпреЛрдЬрд┐рдд** рдХрд░рддрд╛ рд╣реИред Azure Front Door рдЙрдкрдпреЛрдЧрдХрд░реНрддрд╛ рдХреЗ рд▓рд┐рдП **рд╕рдмрд╕реЗ рдирд┐рдХрдЯрддрдо рдПрдЬ рд╕реНрдерд╛рди** рдХреЗ рдЖрдзрд╛рд░ рдкрд░ рдмреБрджреНрдзрд┐рдорд╛рди рд░реВрдЯрд┐рдВрдЧ рдкреНрд░рджрд╛рди рдХрд░рддрд╛ рд╣реИ, рдЬрд┐рд╕рд╕реЗ рдкреНрд░рджрд░реНрд╢рди рдФрд░ рд╡рд┐рд╢реНрд╡рд╕рдиреАрдпрддрд╛ рд╕реБрдирд┐рд╢реНрдЪрд┐рдд рд╣реЛрддреА рд╣реИред рдЗрд╕рдХреЗ рдЕрддрд┐рд░рд┐рдХреНрдд, рдпрд╣ URL-рдЖрдзрд╛рд░рд┐рдд рд░реВрдЯрд┐рдВрдЧ, рдХрдИ рд╕рд╛рдЗрдЯ рд╣реЛрд╕реНрдЯрд┐рдВрдЧ, рд╕рддреНрд░ рд╕рдВрдмрдВрдзрд┐рддрд╛, рдФрд░ рдПрдкреНрд▓рд┐рдХреЗрд╢рди рд╕реНрддрд░ рдХреА рд╕реБрд░рдХреНрд╖рд╛ рдкреНрд░рджрд╛рди рдХрд░рддрд╛ рд╣реИред

**Azure Front Door WAF** рдХреЛ **рд╡реЗрдм-рдЖрдзрд╛рд░рд┐рдд рд╣рдорд▓реЛрдВ рд╕реЗ рд╡реЗрдм рдЕрдиреБрдкреНрд░рдпреЛрдЧреЛрдВ рдХреА рд╕реБрд░рдХреНрд╖рд╛** рдХреЗ рд▓рд┐рдП рдбрд┐рдЬрд╝рд╛рдЗрди рдХрд┐рдпрд╛ рдЧрдпрд╛ рд╣реИ рдмрд┐рдирд╛ рдмреИрдХ-рдПрдВрдб рдХреЛрдб рдореЗрдВ рд╕рдВрд╢реЛрдзрди рдХрд┐рдПред рдЗрд╕рдореЗрдВ SQL рдЗрдВрдЬреЗрдХреНрд╢рди, рдХреНрд░реЙрд╕-рд╕рд╛рдЗрдЯ рд╕реНрдХреНрд░рд┐рдкреНрдЯрд┐рдВрдЧ, рдФрд░ рдЕрдиреНрдп рд╕рд╛рдорд╛рдиреНрдп рд╣рдорд▓реЛрдВ рдЬреИрд╕реЗ рдЦрддрд░реЛрдВ рд╕реЗ рд╕реБрд░рдХреНрд╖рд╛ рдХреЗ рд▓рд┐рдП рдХрд╕реНрдЯрдо рдирд┐рдпрдо рдФрд░ рдкреНрд░рдмрдВрдзрд┐рдд рдирд┐рдпрдо рд╕реЗрдЯ рд╢рд╛рдорд┐рд▓ рд╣реИрдВред

### **рдЙрджрд╛рд╣рд░рдг**

* рдХрд▓реНрдкрдирд╛ рдХрд░реЗрдВ рдХрд┐ рдЖрдкрдХреЗ рдкрд╛рд╕ рдПрдХ рд╡реИрд╢реНрд╡рд┐рдХ рд░реВрдк рд╕реЗ рд╡рд┐рддрд░рд┐рдд рдЕрдиреБрдкреНрд░рдпреЛрдЧ рд╣реИ рдЬрд┐рд╕рдореЗрдВ рджреБрдирд┐рдпрд╛ рднрд░ рдореЗрдВ рдЙрдкрдпреЛрдЧрдХрд░реНрддрд╛ рд╣реИрдВред рдЖрдк Azure Front Door рдХрд╛ рдЙрдкрдпреЛрдЧ рдХрд░рдХреЗ **рдЙрдкрдпреЛрдЧрдХрд░реНрддрд╛ рдЕрдиреБрд░реЛрдзреЛрдВ рдХреЛ рдЖрдкрдХреЗ рдЕрдиреБрдкреНрд░рдпреЛрдЧ рдХреЛ рд╣реЛрд╕реНрдЯ рдХрд░рдиреЗ рд╡рд╛рд▓реЗ рдирд┐рдХрдЯрддрдо рдХреНрд╖реЗрддреНрд░реАрдп рдбреЗрдЯрд╛ рд╕реЗрдВрдЯрд░** рдХреА рдУрд░ рд░реВрдЯ рдХрд░ рд╕рдХрддреЗ рд╣реИрдВ, рдЬрд┐рд╕рд╕реЗ рд╡рд┐рд▓рдВрдмрддрд╛ рдХрдо рд╣реЛрддреА рд╣реИ, рдЙрдкрдпреЛрдЧрдХрд░реНрддрд╛ рдЕрдиреБрднрд╡ рдореЗрдВ рд╕реБрдзрд╛рд░ рд╣реЛрддрд╛ рд╣реИ рдФрд░ **WAF рдХреНрд╖рдорддрд╛рдУрдВ рдХреЗ рд╕рд╛рде рд╡реЗрдм рд╣рдорд▓реЛрдВ рд╕реЗ рдЗрд╕рдХреА рд░рдХреНрд╖рд╛ рд╣реЛрддреА рд╣реИ**ред рдпрджрд┐ рдХрд┐рд╕реА рд╡рд┐рд╢реЗрд╖ рдХреНрд╖реЗрддреНрд░ рдореЗрдВ рдбрд╛рдЙрдирдЯрд╛рдЗрдо рд╣реЛрддрд╛ рд╣реИ, рддреЛ Azure Front Door рд╕реНрд╡рдЪрд╛рд▓рд┐рдд рд░реВрдк рд╕реЗ рдЯреНрд░реИрдлрд╝рд┐рдХ рдХреЛ рдЕрдЧрд▓реЗ рд╕рдмрд╕реЗ рдЕрдЪреНрдЫреЗ рд╕реНрдерд╛рди рдкрд░ рд░реАрд░реВрдЯ рдХрд░ рд╕рдХрддрд╛ рд╣реИ, рдЬрд┐рд╕рд╕реЗ рдЙрдЪреНрдЪ рдЙрдкрд▓рдмреНрдзрддрд╛ рд╕реБрдирд┐рд╢реНрдЪрд┐рдд рд╣реЛрддреА рд╣реИред

### Enumeration

{% code overflow="wrap" %}
```bash
# List Azure Front Door Instances
az network front-door list --query "[].{name:name, resourceGroup:resourceGroup, location:location}" -o table

# List Front Door WAF Policies
az network front-door waf-policy list --query "[].{name:name, resourceGroup:resourceGroup, location:location}" -o table
```
{% endcode %}

## Azure Application Gateway рдФрд░ Azure Application Gateway WAF

Azure Application Gateway рдПрдХ **рд╡реЗрдм рдЯреНрд░реИрдлрд┐рдХ рд▓реЛрдб рдмреИрд▓реЗрдВрд╕рд░** рд╣реИ рдЬреЛ рдЖрдкрдХреЛ рдЕрдкрдиреЗ **рд╡реЗрдм** рдЕрдиреБрдкреНрд░рдпреЛрдЧреЛрдВ рдХреЗ рд▓рд┐рдП рдЯреНрд░реИрдлрд┐рдХ рдкреНрд░рдмрдВрдзрд┐рдд рдХрд░рдиреЗ рдХреА рдЕрдиреБрдорддрд┐ рджреЗрддрд╛ рд╣реИред рдпрд╣ **рд▓реЗрдпрд░ 7 рд▓реЛрдб рдмреИрд▓реЗрдВрд╕рд┐рдВрдЧ, SSL рдЯрд░реНрдорд┐рдиреЗрд╢рди, рдФрд░ рд╡реЗрдм рдПрдкреНрд▓рд┐рдХреЗрд╢рди рдлрд╝рд╛рдпрд░рд╡реЙрд▓ (WAF) рдХреНрд╖рдорддрд╛рдПрдБ** Application Delivery Controller (ADC) рдХреЗ рд░реВрдк рдореЗрдВ рд╕реЗрд╡рд╛ рдореЗрдВ рдкреНрд░рджрд╛рди рдХрд░рддрд╛ рд╣реИред рдореБрдЦреНрдп рд╡рд┐рд╢реЗрд╖рддрд╛рдУрдВ рдореЗрдВ URL-рдЖрдзрд╛рд░рд┐рдд рд░реВрдЯрд┐рдВрдЧ, рдХреБрдХреА-рдЖрдзрд╛рд░рд┐рдд рд╕рддреНрд░ рд╕рдВрдмрдВрдз, рдФрд░ рд╕реБрд░рдХреНрд╖рд┐рдд рд╕реЙрдХреЗрдЯреНрд╕ рд▓реЗрдпрд░ (SSL) рдСрдлрд╝рд▓реЛрдбрд┐рдВрдЧ рд╢рд╛рдорд┐рд▓ рд╣реИрдВ, рдЬреЛ рдЙрди рдЕрдиреБрдкреНрд░рдпреЛрдЧреЛрдВ рдХреЗ рд▓рд┐рдП рдорд╣рддреНрд╡рдкреВрд░реНрдг рд╣реИрдВ рдЬрд┐рдиреНрд╣реЗрдВ рдЬрдЯрд┐рд▓ рд▓реЛрдб-рдмреИрд▓реЗрдВрд╕рд┐рдВрдЧ рдХреНрд╖рдорддрд╛рдУрдВ рдХреА рдЖрд╡рд╢реНрдпрдХрддрд╛ рд╣реЛрддреА рд╣реИ рдЬреИрд╕реЗ рд╡реИрд╢реНрд╡рд┐рдХ рд░реВрдЯрд┐рдВрдЧ рдФрд░ рдкрде-рдЖрдзрд╛рд░рд┐рдд рд░реВрдЯрд┐рдВрдЧред

### рдЙрджрд╛рд╣рд░рдг

* рдПрдХ рдкрд░рд┐рджреГрд╢реНрдп рдкрд░ рд╡рд┐рдЪрд╛рд░ рдХрд░реЗрдВ рдЬрд╣рд╛рдБ рдЖрдкрдХреЗ рдкрд╛рд╕ рдПрдХ рдИ-рдХреЙрдорд░реНрд╕ рд╡реЗрдмрд╕рд╛рдЗрдЯ рд╣реИ рдЬрд┐рд╕рдореЗрдВ рд╡рд┐рднрд┐рдиреНрди рдХрд╛рд░реНрдпреЛрдВ рдХреЗ рд▓рд┐рдП рдХрдИ рдЙрдкрдбреЛрдореЗрди рд╢рд╛рдорд┐рд▓ рд╣реИрдВ, рдЬреИрд╕реЗ рдЙрдкрдпреЛрдЧрдХрд░реНрддрд╛ рдЦрд╛рддреЗ рдФрд░ рднреБрдЧрддрд╛рди рдкреНрд░рд╕рдВрд╕реНрдХрд░рдгред Azure Application Gateway **URL рдкрде рдХреЗ рдЖрдзрд╛рд░ рдкрд░ рдЙрдкрдпреБрдХреНрдд рд╡реЗрдм рд╕рд░реНрд╡рд░реЛрдВ рдХреА рдУрд░ рдЯреНрд░реИрдлрд┐рдХ рд░реВрдЯ рдХрд░ рд╕рдХрддрд╛ рд╣реИ**ред рдЙрджрд╛рд╣рд░рдг рдХреЗ рд▓рд┐рдП, `example.com/accounts` рдкрд░ рдЯреНрд░реИрдлрд┐рдХ рдХреЛ рдЙрдкрдпреЛрдЧрдХрд░реНрддрд╛ рдЦрд╛рддреЛрдВ рдХреА рд╕реЗрд╡рд╛ рдХреА рдУрд░ рдирд┐рд░реНрджреЗрд╢рд┐рдд рдХрд┐рдпрд╛ рдЬрд╛ рд╕рдХрддрд╛ рд╣реИ, рдФрд░ `example.com/pay` рдкрд░ рдЯреНрд░реИрдлрд┐рдХ рдХреЛ рднреБрдЧрддрд╛рди рдкреНрд░рд╕рдВрд╕реНрдХрд░рдг рд╕реЗрд╡рд╛ рдХреА рдУрд░ рдирд┐рд░реНрджреЗрд╢рд┐рдд рдХрд┐рдпрд╛ рдЬрд╛ рд╕рдХрддрд╛ рд╣реИред\
рдФрд░ **WAF рдХреНрд╖рдорддрд╛рдУрдВ рдХрд╛ рдЙрдкрдпреЛрдЧ рдХрд░рдХреЗ рдЕрдкрдиреЗ рд╡реЗрдмрд╕рд╛рдЗрдЯ рдХреЛ рд╣рдорд▓реЛрдВ рд╕реЗ рд╕реБрд░рдХреНрд╖рд┐рдд рдХрд░реЗрдВред**

### **Enumeration**

{% code overflow="wrap" %}
```bash
# List the Web Application Firewall configurations for your Application Gateways
az network application-gateway waf-config list --gateway-name <AppGatewayName> --resource-group <ResourceGroupName> --query "[].{name:name, firewallMode:firewallMode, ruleSetType:ruleSetType, ruleSetVersion:ruleSetVersion}" -o table
```
{% endcode %}

## Azure Hub, Spoke & VNet Peering

**VNet Peering** рдПрдХ рдиреЗрдЯрд╡рд░реНрдХрд┐рдВрдЧ рдлреАрдЪрд░ рд╣реИ рдЬреЛ Azure рдореЗрдВ **рд╡рд┐рднрд┐рдиреНрди рд╡рд░реНрдЪреБрдЕрд▓ рдиреЗрдЯрд╡рд░реНрдХ (VNets) рдХреЛ рд╕реАрдзреЗ рдФрд░ рдирд┐рд░реНрдмрд╛рдз рд░реВрдк рд╕реЗ рдЬреЛрдбрд╝рдиреЗ рдХреА рдЕрдиреБрдорддрд┐ рджреЗрддрд╛ рд╣реИ**ред VNet рдкреАрдпрд░рд┐рдВрдЧ рдХреЗ рдорд╛рдзреНрдпрдо рд╕реЗ, рдПрдХ VNet рдореЗрдВ рд╕рдВрд╕рд╛рдзрди рджреВрд╕рд░реЗ VNet рдореЗрдВ рд╕рдВрд╕рд╛рдзрдиреЛрдВ рдХреЗ рд╕рд╛рде рдирд┐рдЬреА IP рдкрддреЗ рдХрд╛ рдЙрдкрдпреЛрдЧ рдХрд░рдХреЗ рд╕рдВрд╡рд╛рдж рдХрд░ рд╕рдХрддреЗ рд╣реИрдВ, **рдЬреИрд╕реЗ рдХрд┐ рд╡реЗ рдПрдХ рд╣реА рдиреЗрдЯрд╡рд░реНрдХ рдореЗрдВ рд╣реЛрдВ**ред\
**VNet Peering рдХреЛ рдСрди-рдкреНрд░реЗрдо рдиреЗрдЯрд╡рд░реНрдХ рдХреЗ рд╕рд╛рде рднреА рдЙрдкрдпреЛрдЧ рдХрд┐рдпрд╛ рдЬрд╛ рд╕рдХрддрд╛ рд╣реИ** рд╕рд╛рдЗрдЯ-рдЯреВ-рд╕рд╛рдЗрдЯ VPN рдпрд╛ Azure ExpressRoute рд╕реЗрдЯрдЕрдк рдХрд░рдХреЗред

**Azure Hub рдФрд░ Spoke** рдПрдХ рдиреЗрдЯрд╡рд░реНрдХ рдЯреЛрдкреЛрд▓реЙрдЬреА рд╣реИ рдЬрд┐рд╕рдХрд╛ рдЙрдкрдпреЛрдЧ Azure рдореЗрдВ рдиреЗрдЯрд╡рд░реНрдХ рдЯреНрд░реИрдлрд╝рд┐рдХ рдХреЛ рдкреНрд░рдмрдВрдзрд┐рдд рдФрд░ рд╡реНрдпрд╡рд╕реНрдерд┐рдд рдХрд░рдиреЗ рдХреЗ рд▓рд┐рдП рдХрд┐рдпрд╛ рдЬрд╛рддрд╛ рд╣реИред **"рд╣рдм" рдПрдХ рдХреЗрдВрджреНрд░реАрдп рдмрд┐рдВрджреБ рд╣реИ рдЬреЛ рд╡рд┐рднрд┐рдиреНрди "рд╕реНрдкреЛрдХреНрд╕" рдХреЗ рдмреАрдЪ рдЯреНрд░реИрдлрд╝рд┐рдХ рдХреЛ рдирд┐рдпрдВрддреНрд░рд┐рдд рдФрд░ рд░реВрдЯ рдХрд░рддрд╛ рд╣реИ**ред рд╣рдм рдореЗрдВ рдЖрдорддреМрд░ рдкрд░ рд╕рд╛рдЭрд╛ рд╕реЗрд╡рд╛рдПрдБ рд╣реЛрддреА рд╣реИрдВ рдЬреИрд╕реЗ рдиреЗрдЯрд╡рд░реНрдХ рд╡рд░реНрдЪреБрдЕрд▓ рдПрдкреНрд▓рд╛рдпрдВрд╕реЗрд╕ (NVAs), Azure VPN рдЧреЗрдЯрд╡реЗ, Azure рдлрд╝рд╛рдпрд░рд╡реЙрд▓, рдпрд╛ Azure рдмреИрд╕реНрдЯрд┐рдпрдиред **"рд╕реНрдкреЛрдХреНрд╕" рд╡реЗ VNets рд╣реИрдВ рдЬреЛ рдХрд╛рд░реНрдпрднрд╛рд░ рдХреЛ рд╣реЛрд╕реНрдЯ рдХрд░рддреЗ рд╣реИрдВ рдФрд░ VNet рдкреАрдпрд░рд┐рдВрдЧ рдХрд╛ рдЙрдкрдпреЛрдЧ рдХрд░рдХреЗ рд╣рдм рд╕реЗ рдЬреБрдбрд╝реЗ рд╣реЛрддреЗ рд╣реИрдВ**, рдЬрд┐рд╕рд╕реЗ рдЙрдиреНрд╣реЗрдВ рд╣рдм рдХреЗ рднреАрддрд░ рд╕рд╛рдЭрд╛ рд╕реЗрд╡рд╛рдУрдВ рдХрд╛ рд▓рд╛рдн рдЙрдард╛рдиреЗ рдХреА рдЕрдиреБрдорддрд┐ рдорд┐рд▓рддреА рд╣реИред рдпрд╣ рдореЙрдбрд▓ рд╕рд╛рдл рдиреЗрдЯрд╡рд░реНрдХ рд▓реЗрдЖрдЙрдЯ рдХреЛ рдмрдврд╝рд╛рд╡рд╛ рджреЗрддрд╛ рд╣реИ, рдЬрд┐рд╕рд╕реЗ рдЬрдЯрд┐рд▓рддрд╛ рдХрдо рд╣реЛрддреА рд╣реИ рдХреНрдпреЛрдВрдХрд┐ рдпрд╣ рд╡рд┐рднрд┐рдиреНрди VNets рдХреЗ рдмреАрдЪ рдХрдИ рдХрд╛рд░реНрдпрднрд╛рд░реЛрдВ рджреНрд╡рд╛рд░рд╛ рдЙрдкрдпреЛрдЧ рдХреА рдЬрд╛рдиреЗ рд╡рд╛рд▓реА рд╕рд╛рдорд╛рдиреНрдп рд╕реЗрд╡рд╛рдУрдВ рдХреЛ рдХреЗрдВрджреНрд░реАрдХреГрдд рдХрд░рддрд╛ рд╣реИред

{% hint style="danger" %}
**Azure рдореЗрдВ VNET рдкреЗрдпрд░рд┐рдВрдЧ рдЧреИрд░-рдкрд░рд┐рд╡рд░реНрддрдиреАрдп рд╣реИ**, рдЬрд┐рд╕рдХрд╛ рдЕрд░реНрде рд╣реИ рдХрд┐ рдпрджрд┐ рд╕реНрдкреЛрдХ 1 рд╕реНрдкреЛрдХ 2 рд╕реЗ рдЬреБрдбрд╝рд╛ рд╣реИ рдФрд░ рд╕реНрдкреЛрдХ 2 рд╕реНрдкреЛрдХ 3 рд╕реЗ рдЬреБрдбрд╝рд╛ рд╣реИ, рддреЛ рд╕реНрдкреЛрдХ 1 рд╕реАрдзреЗ рд╕реНрдкреЛрдХ 3 рд╕реЗ рдмрд╛рдд рдирд╣реАрдВ рдХрд░ рд╕рдХрддрд╛ред
{% endhint %}

### Examples

* рдПрдХ рдХрдВрдкрдиреА рдХреА рдХрд▓реНрдкрдирд╛ рдХрд░реЗрдВ рдЬрд┐рд╕рдореЗрдВ рдмрд┐рдХреНрд░реА, рдорд╛рдирд╡ рд╕рдВрд╕рд╛рдзрди рдФрд░ рд╡рд┐рдХрд╛рд╕ рдЬреИрд╕реЗ рдЕрд▓рдЧ-рдЕрд▓рдЧ рд╡рд┐рднрд╛рдЧ рд╣реИрдВ, **рдкреНрд░рддреНрдпреЗрдХ рдХреЗ рдкрд╛рд╕ рдЕрдкрдирд╛ рдЦреБрдж рдХрд╛ VNet (рд╕реНрдкреЛрдХреНрд╕)** рд╣реИред рдЗрди VNets рдХреЛ **рд╕рд╛рдЭрд╛ рд╕рдВрд╕рд╛рдзрдиреЛрдВ рддрдХ рдкрд╣реБрдБрдЪ рдХреА рдЖрд╡рд╢реНрдпрдХрддрд╛ рд╣реЛрддреА рд╣реИ** рдЬреИрд╕реЗ рдПрдХ рдХреЗрдВрджреНрд░реАрдп рдбреЗрдЯрд╛рдмреЗрд╕, рдПрдХ рдлрд╝рд╛рдпрд░рд╡реЙрд▓, рдФрд░ рдПрдХ рдЗрдВрдЯрд░рдиреЗрдЯ рдЧреЗрдЯрд╡реЗ, рдЬреЛ рд╕рднреА **рджреВрд╕рд░реЗ VNet (рд╣рдм)** рдореЗрдВ рд╕реНрдерд┐рдд рд╣реИрдВред рд╣рдм рдФрд░ рд╕реНрдкреЛрдХ рдореЙрдбрд▓ рдХрд╛ рдЙрдкрдпреЛрдЧ рдХрд░рдХреЗ, рдкреНрд░рддреНрдпреЗрдХ рд╡рд┐рднрд╛рдЧ **рд╣рдм VNet рдХреЗ рдорд╛рдзреНрдпрдо рд╕реЗ рд╕рд╛рдЭрд╛ рд╕рдВрд╕рд╛рдзрдиреЛрдВ рд╕реЗ рд╕реБрд░рдХреНрд╖рд┐рдд рд░реВрдк рд╕реЗ рдЬреБрдбрд╝ рд╕рдХрддрд╛ рд╣реИ рдмрд┐рдирд╛ рдЙрди рд╕рдВрд╕рд╛рдзрдиреЛрдВ рдХреЛ рд╕рд╛рд░реНрд╡рдЬрдирд┐рдХ рдЗрдВрдЯрд░рдиреЗрдЯ рдкрд░ рдЙрдЬрд╛рдЧрд░ рдХрд┐рдП** рдпрд╛ рдХрдИ рдХрдиреЗрдХреНрд╢рдиреЛрдВ рдХреЗ рд╕рд╛рде рдПрдХ рдЬрдЯрд┐рд▓ рдиреЗрдЯрд╡рд░реНрдХ рд╕рдВрд░рдЪрдирд╛ рдмрдирд╛рдП рдмрд┐рдирд╛ред

### Enumeration

{% code overflow="wrap" %}
```bash
# List all VNets in your subscription
az network vnet list --query "[].{name:name, location:location, addressSpace:addressSpace}" -o table

# List VNet peering connections for a given VNet
az network vnet peering list --resource-group <ResourceGroupName> --vnet-name <VNetName> --query "[].{name:name, peeringState:peeringState, remoteVnetId:remoteVnetId}" -o table

# List Shared Resources (e.g., Azure Firewall) in the Hub
az network firewall list --query "[].{name:name, location:location, resourceGroup:resourceGroup}" -o table
```
{% endcode %}

## рд╕рд╛рдЗрдЯ-рд╕реЗ-рд╕рд╛рдЗрдЯ рд╡реАрдкреАрдПрди

Azure рдореЗрдВ рдПрдХ рд╕рд╛рдЗрдЯ-рд╕реЗ-рд╕рд╛рдЗрдЯ рд╡реАрдкреАрдПрди рдЖрдкрдХреЛ **рдЕрдкрдиреЗ рдСрди-рдкреНрд░рд┐рдорд╛рдЗрд╕реЗрд╕ рдиреЗрдЯрд╡рд░реНрдХ рдХреЛ рдЕрдкрдиреЗ Azure рд╡рд░реНрдЪреБрдЕрд▓ рдиреЗрдЯрд╡рд░реНрдХ (VNet) рд╕реЗ рдХрдиреЗрдХреНрдЯ рдХрд░рдиреЗ** рдХреА рдЕрдиреБрдорддрд┐ рджреЗрддрд╛ рд╣реИ, рдЬрд┐рд╕рд╕реЗ Azure рдХреЗ рднреАрддрд░ VMs рдЬреИрд╕реЗ рд╕рдВрд╕рд╛рдзрди рдЖрдкрдХреЗ рд╕реНрдерд╛рдиреАрдп рдиреЗрдЯрд╡рд░реНрдХ рдкрд░ рд╣реЛрдиреЗ рдХрд╛ рдЖрднрд╛рд╕ рджреЗрддреЗ рд╣реИрдВред рдпрд╣ рдХрдиреЗрдХреНрд╢рди рдПрдХ **рд╡реАрдкреАрдПрди рдЧреЗрдЯрд╡реЗ рдХреЗ рдорд╛рдзреНрдпрдо рд╕реЗ рд╕реНрдерд╛рдкрд┐рдд рдХрд┐рдпрд╛ рдЬрд╛рддрд╛ рд╣реИ рдЬреЛ рджреЛрдиреЛрдВ рдиреЗрдЯрд╡рд░реНрдХреЛрдВ рдХреЗ рдмреАрдЪ рдЯреНрд░реИрдлрд╝рд┐рдХ рдХреЛ рдПрдиреНрдХреНрд░рд┐рдкреНрдЯ рдХрд░рддрд╛ рд╣реИ**ред

### **рдЙрджрд╛рд╣рд░рдг**

* рдПрдХ рд╡реНрдпрд╡рд╕рд╛рдп рдЬрд┐рд╕рдХрд╛ рдореБрдЦреНрдп рдХрд╛рд░реНрдпрд╛рд▓рдп рдиреНрдпреВрдпреЙрд░реНрдХ рдореЗрдВ рд╕реНрдерд┐рдд рд╣реИ, рдПрдХ рдСрди-рдкреНрд░рд┐рдорд╛рдЗрд╕реЗрд╕ рдбреЗрдЯрд╛ рд╕реЗрдВрдЯрд░ рд╣реИ рдЬрд┐рд╕реЗ Azure рдореЗрдВ рдЕрдкрдиреЗ VNet рд╕реЗ рд╕реБрд░рдХреНрд╖рд┐рдд рд░реВрдк рд╕реЗ рдХрдиреЗрдХреНрдЯ рдХрд░рдиреЗ рдХреА рдЖрд╡рд╢реНрдпрдХрддрд╛ рд╣реИ, рдЬреЛ рдЗрд╕рдХреЗ рд╡рд░реНрдЪреБрдЕрд▓рд╛рдЗрдЬреНрдб рд╡рд░реНрдХрд▓реЛрдбреНрд╕ рдХреЛ рд╣реЛрд╕реНрдЯ рдХрд░рддрд╛ рд╣реИред рдПрдХ **рд╕рд╛рдЗрдЯ-рд╕реЗ-рд╕рд╛рдЗрдЯ рд╡реАрдкреАрдПрди рд╕реЗрдЯрдЕрдк рдХрд░рдХреЗ, рдХрдВрдкрдиреА рдСрди-рдкреНрд░рд┐рдорд╛рдЗрд╕реЗрд╕ рд╕рд░реНрд╡рд░реЛрдВ рдФрд░ Azure VMs рдХреЗ рдмреАрдЪ рдПрдиреНрдХреНрд░рд┐рдкреНрдЯреЗрдб рдХрдиреЗрдХреНрдЯрд┐рд╡рд┐рдЯреА рд╕реБрдирд┐рд╢реНрдЪрд┐рдд рдХрд░ рд╕рдХрддреА рд╣реИ**, рдЬрд┐рд╕рд╕реЗ рджреЛрдиреЛрдВ рд╡рд╛рддрд╛рд╡рд░рдгреЛрдВ рдореЗрдВ рд╕рдВрд╕рд╛рдзрдиреЛрдВ рдХреЛ рд╕реБрд░рдХреНрд╖рд┐рдд рд░реВрдк рд╕реЗ рдПрдХреНрд╕реЗрд╕ рдХрд┐рдпрд╛ рдЬрд╛ рд╕рдХреЗ рдЬреИрд╕реЗ рдХрд┐ рд╡реЗ рдПрдХ рд╣реА рд╕реНрдерд╛рдиреАрдп рдиреЗрдЯрд╡рд░реНрдХ рдореЗрдВ рд╣реЛрдВред

### **рдЧрдгрдирд╛**

{% code overflow="wrap" %}
```bash
# List VPN Gateways
az network vnet-gateway list --query "[].{name:name, location:location, resourceGroup:resourceGroup}" -o table

# List VPN Connections
az network vpn-connection list --gateway-name <VpnGatewayName> --resource-group <ResourceGroupName> --query "[].{name:name, connectionType:connectionType, connectionStatus:connectionStatus}" -o table
```
{% endcode %}

## Azure ExpressRoute

Azure ExpressRoute рдПрдХ рд╕реЗрд╡рд╛ рд╣реИ рдЬреЛ рдЖрдкрдХреЗ рдСрди-рдкреНрд░рд┐рдорд╛рдЗрд╕реЗрд╕ рдЗрдиреНрдлреНрд░рд╛рд╕реНрдЯреНрд░рдХреНрдЪрд░ рдФрд░ Azure рдбреЗрдЯрд╛ рдХреЗрдВрджреНрд░реЛрдВ рдХреЗ рдмреАрдЪ рдПрдХ **рдирд┐рдЬреА, рд╕рдорд░реНрдкрд┐рдд, рдЙрдЪреНрдЪ-рдЧрддрд┐ рдХрдиреЗрдХреНрд╢рди** рдкреНрд░рджрд╛рди рдХрд░рддреА рд╣реИред рдпрд╣ рдХрдиреЗрдХреНрд╢рди рдПрдХ рдХрдиреЗрдХреНрдЯрд┐рд╡рд┐рдЯреА рдкреНрд░рджрд╛рддрд╛ рдХреЗ рдорд╛рдзреНрдпрдо рд╕реЗ рдмрдирд╛рдпрд╛ рдЬрд╛рддрд╛ рд╣реИ, рдЬреЛ рд╕рд╛рд░реНрд╡рдЬрдирд┐рдХ рдЗрдВрдЯрд░рдиреЗрдЯ рдХреЛ рдмрд╛рдпрдкрд╛рд╕ рдХрд░рддрд╛ рд╣реИ рдФрд░ рд╕рд╛рдорд╛рдиреНрдп рдЗрдВрдЯрд░рдиреЗрдЯ рдХрдиреЗрдХреНрд╢рдиреЛрдВ рдХреА рддреБрд▓рдирд╛ рдореЗрдВ рдЕрдзрд┐рдХ рд╡рд┐рд╢реНрд╡рд╕рдиреАрдпрддрд╛, рддреЗрдЬ рдЧрддрд┐, рдХрдо рд╡рд┐рд▓рдВрдмрддрд╛ рдФрд░ рдЙрдЪреНрдЪ рд╕реБрд░рдХреНрд╖рд╛ рдкреНрд░рджрд╛рди рдХрд░рддрд╛ рд╣реИред

### **рдЙрджрд╛рд╣рд░рдг**

* рдПрдХ рдмрд╣реБрд░рд╛рд╖реНрдЯреНрд░реАрдп рдирд┐рдЧрдо рдХреЛ **рдЙрдЪреНрдЪ рдорд╛рддреНрд░рд╛ рдХреЗ рдбреЗрдЯрд╛** рдФрд░ рдЙрдЪреНрдЪ рдереНрд░реВрдкреБрдЯ рдХреА рдЖрд╡рд╢реНрдпрдХрддрд╛ рдХреЗ рдХрд╛рд░рдг рдЕрдкрдиреЗ Azure рд╕реЗрд╡рд╛рдУрдВ рдХреЗ рд▓рд┐рдП рдПрдХ **рд╕рдВрдЧрдд рдФрд░ рд╡рд┐рд╢реНрд╡рд╕рдиреАрдп рдХрдиреЗрдХреНрд╢рди** рдХреА рдЖрд╡рд╢реНрдпрдХрддрд╛ рд╣реЛрддреА рд╣реИред рдХрдВрдкрдиреА рдЕрдкрдиреЗ рдСрди-рдкреНрд░рд┐рдорд╛рдЗрд╕реЗрд╕ рдбреЗрдЯрд╛ рдХреЗрдВрджреНрд░ рдХреЛ Azure рд╕реЗ рд╕реАрдзреЗ рдХрдиреЗрдХреНрдЯ рдХрд░рдиреЗ рдХреЗ рд▓рд┐рдП Azure ExpressRoute рдХрд╛ рд╡рд┐рдХрд▓реНрдк рдЪреБрдирддреА рд╣реИ, рдЬрд┐рд╕рд╕реЗ рдмрдбрд╝реЗ рдкреИрдорд╛рдиреЗ рдкрд░ рдбреЗрдЯрд╛ рдЯреНрд░рд╛рдВрд╕рдлрд░, рдЬреИрд╕реЗ рджреИрдирд┐рдХ рдмреИрдХрдЕрдк рдФрд░ рд╡рд╛рд╕реНрддрд╡рд┐рдХ рд╕рдордп рдбреЗрдЯрд╛ рдПрдирд╛рд▓рд┐рдЯрд┐рдХреНрд╕, рдХреЛ рдмреЗрд╣рддрд░ рдЧреЛрдкрдиреАрдпрддрд╛ рдФрд░ рдЧрддрд┐ рдХреЗ рд╕рд╛рде рд╕реБрдЧрдо рдмрдирд╛рдпрд╛ рдЬрд╛ рд╕рдХреЗред

### **Enumeration**

{% code overflow="wrap" %}
```bash
# List ExpressRoute Circuits
az network express-route list --query "[].{name:name, location:location, resourceGroup:resourceGroup, serviceProviderName:serviceProviderName, peeringLocation:peeringLocation}" -o table
```
{% endcode %}

{% hint style="success" %}
рд╕реАрдЦреЗрдВ рдФрд░ AWS рд╣реИрдХрд┐рдВрдЧ рдХрд╛ рдЕрднреНрдпрд╛рд╕ рдХрд░реЗрдВ:<img src="../../../../.gitbook/assets/image (1).png" alt="" data-size="line">[**HackTricks Training AWS Red Team Expert (ARTE)**](https://training.hacktricks.xyz/courses/arte)<img src="../../../../.gitbook/assets/image (1).png" alt="" data-size="line">\
рд╕реАрдЦреЗрдВ рдФрд░ GCP рд╣реИрдХрд┐рдВрдЧ рдХрд╛ рдЕрднреНрдпрд╛рд╕ рдХрд░реЗрдВ: <img src="../../../../.gitbook/assets/image (2).png" alt="" data-size="line">[**HackTricks Training GCP Red Team Expert (GRTE)**<img src="../../../../.gitbook/assets/image (2).png" alt="" data-size="line">](https://training.hacktricks.xyz/courses/grte)

<details>

<summary>HackTricks рдХрд╛ рд╕рдорд░реНрдерди рдХрд░реЗрдВ</summary>

* [**рд╕рджрд╕реНрдпрддрд╛ рдпреЛрдЬрдирд╛рдПрдБ**](https://github.com/sponsors/carlospolop) рджреЗрдЦреЗрдВ!
* **рд╣рдорд╛рд░реЗ** ЁЯТм [**Discord рд╕рдореВрд╣**](https://discord.gg/hRep4RUj7f) рдпрд╛ [**рдЯреЗрд▓реАрдЧреНрд░рд╛рдо рд╕рдореВрд╣**](https://t.me/peass) рдореЗрдВ рд╢рд╛рдорд┐рд▓ рд╣реЛрдВ рдпрд╛ **рд╣рдорд╛рд░рд╛ рдЕрдиреБрд╕рд░рдг рдХрд░реЗрдВ** **Twitter** ЁЯРж [**@hacktricks\_live**](https://twitter.com/hacktricks\_live)**.**
* **рд╣реИрдХрд┐рдВрдЧ рдЯреНрд░рд┐рдХреНрд╕ рд╕рд╛рдЭрд╛ рдХрд░реЗрдВ рдФрд░** [**HackTricks**](https://github.com/carlospolop/hacktricks) рдФрд░ [**HackTricks Cloud**](https://github.com/carlospolop/hacktricks-cloud) рдЧрд┐рдЯрд╣рдм рд░рд┐рдкреЛрдЬрд┐рдЯрд░реА рдореЗрдВ PRs рд╕рдмрдорд┐рдЯ рдХрд░реЗрдВред

</details>
{% endhint %}
