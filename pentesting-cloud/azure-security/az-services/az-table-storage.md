# Az - Table Storage

{% hint style="success" %}
Learn & practice AWS Hacking:<img src="../../../.gitbook/assets/image (1) (1) (1).png" alt="" data-size="line">[**HackTricks Training AWS Red Team Expert (ARTE)**](https://training.hacktricks.xyz/courses/arte)<img src="../../../.gitbook/assets/image (1) (1) (1).png" alt="" data-size="line">\
Learn & practice GCP Hacking: <img src="../../../.gitbook/assets/image (2).png" alt="" data-size="line">[**HackTricks Training GCP Red Team Expert (GRTE)**<img src="../../../.gitbook/assets/image (2).png" alt="" data-size="line">](https://training.hacktricks.xyz/courses/grte)

<details>

<summary>Support HackTricks</summary>

* Check the [**subscription plans**](https://github.com/sponsors/carlospolop)!
* **Join the** 游눫 [**Discord group**](https://discord.gg/hRep4RUj7f) or the [**telegram group**](https://t.me/peass) or **follow** us on **Twitter** 游냕 [**@hacktricks\_live**](https://twitter.com/hacktricks_live)**.**
* **Share hacking tricks by submitting PRs to the** [**HackTricks**](https://github.com/carlospolop/hacktricks) and [**HackTricks Cloud**](https://github.com/carlospolop/hacktricks-cloud) github repos.

</details>
{% endhint %}

## Basic Information

**Azure Table Storage** je NoSQL skladi코te klju캜-vrednost dizajnirano za skladi코tenje velikih koli캜ina strukturiranih, nestrukturiranih podataka. Pru쬬 visoku dostupnost, nisku latenciju i skalabilnost za efikasno upravljanje velikim skupovima podataka. Podaci su organizovani u tabelama, pri 캜emu je svaka entitet identifikovan pomo캖u klju캜a particije i klju캜a reda, 코to omogu캖ava brze pretrage. Podr쬬va funkcije kao 코to su enkripcija u mirovanju, kontrola pristupa zasnovana na ulogama i potpisane pristupne ta캜ke za sigurno, upravljano skladi코tenje pogodno za 코irok spektar aplikacija.

**Ne postoji ugra캠eni mehanizam za pravljenje rezervnih kopija** za skladi코tenje tabela.

### Keys

#### **PartitionKey**

* **PartitionKey grupi코e entitete u logi캜ke particije**. Entiteti sa istim PartitionKey se skladi코te zajedno, 코to pobolj코ava performanse upita i skalabilnost.
* Primer: U tabeli koja skladi코ti podatke o zaposlenima, `PartitionKey` mo쬰 predstavljati odeljenje, npr., `"HR"` ili `"IT"`.

#### **RowKey**

* **RowKey je jedinstveni identifikator** za entitet unutar particije. Kada se kombinuje sa PartitionKey, osigurava da svaki entitet u tabeli ima globalno jedinstveni identifikator.
* Primer: Za particiju `"HR"`, `RowKey` mo쬰 biti ID zaposlenog, npr., `"12345"`.

#### **Other Properties (Custom Properties)**

* Pored PartitionKey i RowKey, entitet mo쬰 imati dodatne **prilago캠ene osobine za skladi코tenje podataka**. Ove su definisane od strane korisnika i deluju kao kolone u tradicionalnoj bazi podataka.
* Osobine se skladi코te kao **klju캜-vrednost parovi**.
* Primer: `Name`, `Age`, `Title` mogu biti prilago캠ene osobine za zaposlenog.

## Enumeration
```bash
# Get storage accounts
az storage account list

# List tables
az storage table list --account-name <name>

# Read table
az storage entity query \
--account-name <name> \
--table-name <t-name> \
--top 10

# Write table
az storage entity insert \
--account-name <STORAGE_ACCOUNT_NAME> \
--table-name <TABLE_NAME> \
--entity PartitionKey=<PARTITION_KEY> RowKey=<ROW_KEY> <PROPERTY_KEY>=<PROPERTY_VALUE>

# Write example
az storage entity insert \
--account-name mystorageaccount \
--table-name mytable \
--entity PartitionKey=HR RowKey=12345 Name="John Doe" Age=30 Title="Manager"

# Update row
az storage entity merge \
--account-name mystorageaccount \
--table-name mytable \
--entity PartitionKey=pk1 RowKey=rk1 Age=31
```
{% hint style="info" %}
Podrazumevano `az` cli 캖e koristiti klju캜 naloga za potpisivanje klju캜a i izvr코avanje akcije. Da biste koristili privilegije Entra ID glavnog korisnika, koristite parametre `--auth-mode login`.
{% endhint %}

{% hint style="success" %}
Koristite parametar `--account-key` da ozna캜ite klju캜 naloga koji 캖e se koristiti\
Koristite parametar `--sas-token` sa SAS tokenom za pristup putem SAS tokena
{% endhint %}

## Eskalacija privilegija

Isto kao i skladi코na eskalacija privilegija:

{% content-ref url="../az-privilege-escalation/az-storage-privesc.md" %}
[az-storage-privesc.md](../az-privilege-escalation/az-storage-privesc.md)
{% endcontent-ref %}

## Post eksploatacija

{% content-ref url="../az-post-exploitation/az-table-storage-post-exploitation.md" %}
[az-table-storage-post-exploitation.md](../az-post-exploitation/az-table-storage-post-exploitation.md)
{% endcontent-ref %}

## Postojanost

Isto kao i skladi코na postojanost:

{% content-ref url="../az-persistence/az-storage-persistence.md" %}
[az-storage-persistence.md](../az-persistence/az-storage-persistence.md)
{% endcontent-ref %}

{% hint style="success" %}
U캜ite i ve쬭ajte AWS Hacking:<img src="../../../.gitbook/assets/image (1) (1) (1).png" alt="" data-size="line">[**HackTricks Training AWS Red Team Expert (ARTE)**](https://training.hacktricks.xyz/courses/arte)<img src="../../../.gitbook/assets/image (1) (1) (1).png" alt="" data-size="line">\
U캜ite i ve쬭ajte GCP Hacking: <img src="../../../.gitbook/assets/image (2).png" alt="" data-size="line">[**HackTricks Training GCP Red Team Expert (GRTE)**<img src="../../../.gitbook/assets/image (2).png" alt="" data-size="line">](https://training.hacktricks.xyz/courses/grte)

<details>

<summary>Podr코ka HackTricks</summary>

* Proverite [**planove pretplate**](https://github.com/sponsors/carlospolop)!
* **Pridru쬴te se** 游눫 [**Discord grupi**](https://discord.gg/hRep4RUj7f) ili [**telegram grupi**](https://t.me/peass) ili **pratite** nas na **Twitteru** 游냕 [**@hacktricks\_live**](https://twitter.com/hacktricks_live)**.**
* **Podelite hakerske trikove slanjem PR-ova na** [**HackTricks**](https://github.com/carlospolop/hacktricks) i [**HackTricks Cloud**](https://github.com/carlospolop/hacktricks-cloud) github repozitorijume.

</details>
{% endhint %}
