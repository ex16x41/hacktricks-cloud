# Az - Table Storage

{% hint style="success" %}
Learn & practice AWS Hacking:<img src="../../../.gitbook/assets/image (1) (1) (1).png" alt="" data-size="line">[**HackTricks Training AWS Red Team Expert (ARTE)**](https://training.hacktricks.xyz/courses/arte)<img src="../../../.gitbook/assets/image (1) (1) (1).png" alt="" data-size="line">\
Learn & practice GCP Hacking: <img src="../../../.gitbook/assets/image (2).png" alt="" data-size="line">[**HackTricks Training GCP Red Team Expert (GRTE)**<img src="../../../.gitbook/assets/image (2).png" alt="" data-size="line">](https://training.hacktricks.xyz/courses/grte)

<details>

<summary>Support HackTricks</summary>

* Check the [**subscription plans**](https://github.com/sponsors/carlospolop)!
* **Join the** ğŸ’¬ [**Discord group**](https://discord.gg/hRep4RUj7f) or the [**telegram group**](https://t.me/peass) or **follow** us on **Twitter** ğŸ¦ [**@hacktricks\_live**](https://twitter.com/hacktricks_live)**.**
* **Share hacking tricks by submitting PRs to the** [**HackTricks**](https://github.com/carlospolop/hacktricks) and [**HackTricks Cloud**](https://github.com/carlospolop/hacktricks-cloud) github repos.

</details>
{% endhint %}

## Basic Information

**Azure Table Storage**ëŠ” ëŒ€ëŸ‰ì˜ êµ¬ì¡°í™”ëœ ë¹„ê´€ê³„í˜• ë°ì´í„°ë¥¼ ì €ì¥í•˜ê¸° ìœ„í•´ ì„¤ê³„ëœ NoSQL í‚¤-ê°’ ì €ì¥ì†Œì…ë‹ˆë‹¤. ë†’ì€ ê°€ìš©ì„±, ë‚®ì€ ëŒ€ê¸° ì‹œê°„ ë° ëŒ€ê·œëª¨ ë°ì´í„° ì„¸íŠ¸ë¥¼ íš¨ìœ¨ì ìœ¼ë¡œ ì²˜ë¦¬í•  ìˆ˜ ìˆëŠ” í™•ì¥ì„±ì„ ì œê³µí•©ë‹ˆë‹¤. ë°ì´í„°ëŠ” í…Œì´ë¸”ë¡œ êµ¬ì„±ë˜ë©°, ê° ì—”í„°í‹°ëŠ” íŒŒí‹°ì…˜ í‚¤ì™€ í–‰ í‚¤ë¡œ ì‹ë³„ë˜ì–´ ë¹ ë¥¸ ì¡°íšŒë¥¼ ê°€ëŠ¥í•˜ê²Œ í•©ë‹ˆë‹¤. ë°ì´í„°ëŠ” ì•ˆì „í•˜ê³  ê´€ë¦¬ë˜ëŠ” ì €ì¥ì†Œë¥¼ ìœ„í•´ ì•”í˜¸í™”, ì—­í•  ê¸°ë°˜ ì•¡ì„¸ìŠ¤ ì œì–´ ë° ê³µìœ  ì•¡ì„¸ìŠ¤ ì„œëª…ê³¼ ê°™ì€ ê¸°ëŠ¥ì„ ì§€ì›í•˜ì—¬ ë‹¤ì–‘í•œ ì• í”Œë¦¬ì¼€ì´ì…˜ì— ì í•©í•©ë‹ˆë‹¤.

í…Œì´ë¸” ì €ì¥ì†Œì—ëŠ” **ë‚´ì¥ëœ ë°±ì—… ë©”ì»¤ë‹ˆì¦˜ì´ ì—†ìŠµë‹ˆë‹¤.**

### Keys

#### **PartitionKey**

* **PartitionKeyëŠ” ì—”í„°í‹°ë¥¼ ë…¼ë¦¬ì  íŒŒí‹°ì…˜ìœ¼ë¡œ ê·¸ë£¹í™”í•©ë‹ˆë‹¤.** ë™ì¼í•œ PartitionKeyë¥¼ ê°€ì§„ ì—”í„°í‹°ëŠ” í•¨ê»˜ ì €ì¥ë˜ì–´ ì¿¼ë¦¬ ì„±ëŠ¥ê³¼ í™•ì¥ì„±ì„ í–¥ìƒì‹œí‚µë‹ˆë‹¤.
* ì˜ˆ: ì§ì› ë°ì´í„°ë¥¼ ì €ì¥í•˜ëŠ” í…Œì´ë¸”ì—ì„œ `PartitionKey`ëŠ” ë¶€ì„œë¥¼ ë‚˜íƒ€ë‚¼ ìˆ˜ ìˆìŠµë‹ˆë‹¤, ì˜ˆ: `"HR"` ë˜ëŠ” `"IT"`.

#### **RowKey**

* **RowKeyëŠ” íŒŒí‹°ì…˜ ë‚´ì—ì„œ ì—”í„°í‹°ì˜ ê³ ìœ  ì‹ë³„ìì…ë‹ˆë‹¤.** PartitionKeyì™€ ê²°í•©í•˜ì—¬ í…Œì´ë¸”ì˜ ê° ì—”í„°í‹°ê°€ ì „ ì„¸ê³„ì ìœ¼ë¡œ ê³ ìœ í•œ ì‹ë³„ìë¥¼ ê°–ë„ë¡ ë³´ì¥í•©ë‹ˆë‹¤.
* ì˜ˆ: `"HR"` íŒŒí‹°ì…˜ì˜ ê²½ìš°, `RowKey`ëŠ” ì§ì› IDì¼ ìˆ˜ ìˆìŠµë‹ˆë‹¤, ì˜ˆ: `"12345"`.

#### **Other Properties (Custom Properties)**

* PartitionKeyì™€ RowKey ì™¸ì—ë„ ì—”í„°í‹°ëŠ” ë°ì´í„°ë¥¼ ì €ì¥í•˜ê¸° ìœ„í•œ ì¶”ê°€ **ì‚¬ìš©ì ì •ì˜ ì†ì„±**ì„ ê°€ì§ˆ ìˆ˜ ìˆìŠµë‹ˆë‹¤. ì´ëŠ” ì‚¬ìš©ì ì •ì˜ì´ë©° ì „í†µì ì¸ ë°ì´í„°ë² ì´ìŠ¤ì˜ ì—´ì²˜ëŸ¼ ì‘ìš©í•©ë‹ˆë‹¤.
* ì†ì„±ì€ **í‚¤-ê°’ ìŒ**ìœ¼ë¡œ ì €ì¥ë©ë‹ˆë‹¤.
* ì˜ˆ: `Name`, `Age`, `Title`ì€ ì§ì›ì— ëŒ€í•œ ì‚¬ìš©ì ì •ì˜ ì†ì„±ì´ ë  ìˆ˜ ìˆìŠµë‹ˆë‹¤.

## Enumeration
```bash
# Get storage accounts
az storage account list

# List tables
az storage table list --account-name <name>

# Read table
az storage entity query \
--account-name <name> \
--table-name <t-name> \
--top 10

# Write table
az storage entity insert \
--account-name <STORAGE_ACCOUNT_NAME> \
--table-name <TABLE_NAME> \
--entity PartitionKey=<PARTITION_KEY> RowKey=<ROW_KEY> <PROPERTY_KEY>=<PROPERTY_VALUE>

# Write example
az storage entity insert \
--account-name mystorageaccount \
--table-name mytable \
--entity PartitionKey=HR RowKey=12345 Name="John Doe" Age=30 Title="Manager"

# Update row
az storage entity merge \
--account-name mystorageaccount \
--table-name mytable \
--entity PartitionKey=pk1 RowKey=rk1 Age=31
```
{% hint style="info" %}
ê¸°ë³¸ì ìœ¼ë¡œ `az` cliëŠ” ê³„ì • í‚¤ë¥¼ ì‚¬ìš©í•˜ì—¬ í‚¤ì— ì„œëª…í•˜ê³  ì‘ì—…ì„ ìˆ˜í–‰í•©ë‹ˆë‹¤. Entra ID ì£¼ì²´ ê¶Œí•œì„ ì‚¬ìš©í•˜ë ¤ë©´ `--auth-mode login` ë§¤ê°œë³€ìˆ˜ë¥¼ ì‚¬ìš©í•˜ì‹­ì‹œì˜¤.
{% endhint %}

{% hint style="success" %}
ì‚¬ìš©í•  ê³„ì • í‚¤ë¥¼ ì§€ì •í•˜ë ¤ë©´ `--account-key` ë§¤ê°œë³€ìˆ˜ë¥¼ ì‚¬ìš©í•˜ì‹­ì‹œì˜¤.\
SAS í† í°ì„ í†µí•´ ì•¡ì„¸ìŠ¤í•˜ë ¤ë©´ SAS í† í°ê³¼ í•¨ê»˜ `--sas-token` ë§¤ê°œë³€ìˆ˜ë¥¼ ì‚¬ìš©í•˜ì‹­ì‹œì˜¤.
{% endhint %}

## ê¶Œí•œ ìƒìŠ¹

ì €ì¥ì†Œ ê¶Œí•œ ìƒìŠ¹ê³¼ ë™ì¼í•©ë‹ˆë‹¤:

{% content-ref url="../az-privilege-escalation/az-storage-privesc.md" %}
[az-storage-privesc.md](../az-privilege-escalation/az-storage-privesc.md)
{% endcontent-ref %}

## í¬ìŠ¤íŠ¸ ìµìŠ¤í”Œë¡œì‡

{% content-ref url="../az-post-exploitation/az-table-storage-post-exploitation.md" %}
[az-table-storage-post-exploitation.md](../az-post-exploitation/az-table-storage-post-exploitation.md)
{% endcontent-ref %}

## ì§€ì†ì„±

ì €ì¥ì†Œ ì§€ì†ì„±ê³¼ ë™ì¼í•©ë‹ˆë‹¤:

{% content-ref url="../az-persistence/az-storage-persistence.md" %}
[az-storage-persistence.md](../az-persistence/az-storage-persistence.md)
{% endcontent-ref %}

{% hint style="success" %}
AWS í•´í‚¹ ë°°ìš°ê¸° ë° ì—°ìŠµí•˜ê¸°:<img src="../../../.gitbook/assets/image (1) (1) (1).png" alt="" data-size="line">[**HackTricks Training AWS Red Team Expert (ARTE)**](https://training.hacktricks.xyz/courses/arte)<img src="../../../.gitbook/assets/image (1) (1) (1).png" alt="" data-size="line">\
GCP í•´í‚¹ ë°°ìš°ê¸° ë° ì—°ìŠµí•˜ê¸°: <img src="../../../.gitbook/assets/image (2).png" alt="" data-size="line">[**HackTricks Training GCP Red Team Expert (GRTE)**<img src="../../../.gitbook/assets/image (2).png" alt="" data-size="line">](https://training.hacktricks.xyz/courses/grte)

<details>

<summary>HackTricks ì§€ì›í•˜ê¸°</summary>

* [**êµ¬ë… ê³„íš**](https://github.com/sponsors/carlospolop) í™•ì¸í•˜ê¸°!
* **ğŸ’¬ [**Discord ê·¸ë£¹**](https://discord.gg/hRep4RUj7f) ë˜ëŠ” [**í…”ë ˆê·¸ë¨ ê·¸ë£¹**](https://t.me/peass)ì— ì°¸ì—¬í•˜ê±°ë‚˜ **Twitter** ğŸ¦ [**@hacktricks\_live**](https://twitter.com/hacktricks_live)**ë¥¼ íŒ”ë¡œìš°í•˜ì„¸ìš”.**
* **[**HackTricks**](https://github.com/carlospolop/hacktricks) ë° [**HackTricks Cloud**](https://github.com/carlospolop/hacktricks-cloud) GitHub ë¦¬í¬ì§€í† ë¦¬ì— PRì„ ì œì¶œí•˜ì—¬ í•´í‚¹ íŒì„ ê³µìœ í•˜ì„¸ìš”.**

</details>
{% endhint %}
