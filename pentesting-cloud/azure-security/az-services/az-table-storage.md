# Az - Table Storage

{% hint style="success" %}
Learn & practice AWS Hacking:<img src="../../../.gitbook/assets/image (1) (1) (1).png" alt="" data-size="line">[**HackTricks Training AWS Red Team Expert (ARTE)**](https://training.hacktricks.xyz/courses/arte)<img src="../../../.gitbook/assets/image (1) (1) (1).png" alt="" data-size="line">\
Learn & practice GCP Hacking: <img src="../../../.gitbook/assets/image (2).png" alt="" data-size="line">[**HackTricks Training GCP Red Team Expert (GRTE)**<img src="../../../.gitbook/assets/image (2).png" alt="" data-size="line">](https://training.hacktricks.xyz/courses/grte)

<details>

<summary>Support HackTricks</summary>

* Check the [**subscription plans**](https://github.com/sponsors/carlospolop)!
* **Join the** ğŸ’¬ [**Discord group**](https://discord.gg/hRep4RUj7f) or the [**telegram group**](https://t.me/peass) or **follow** us on **Twitter** ğŸ¦ [**@hacktricks\_live**](https://twitter.com/hacktricks_live)**.**
* **Share hacking tricks by submitting PRs to the** [**HackTricks**](https://github.com/carlospolop/hacktricks) and [**HackTricks Cloud**](https://github.com/carlospolop/hacktricks-cloud) github repos.

</details>
{% endhint %}

## Temel Bilgiler

**Azure Table Storage**, bÃ¼yÃ¼k hacimlerde yapÄ±landÄ±rÄ±lmÄ±ÅŸ, iliÅŸkisel olmayan verileri depolamak iÃ§in tasarlanmÄ±ÅŸ bir NoSQL anahtar-deÄŸer deposudur. YÃ¼ksek kullanÄ±labilirlik, dÃ¼ÅŸÃ¼k gecikme sÃ¼resi ve bÃ¼yÃ¼k veri setlerini verimli bir ÅŸekilde iÅŸlemek iÃ§in Ã¶lÃ§eklenebilirlik sunar. Veriler, her varlÄ±ÄŸÄ±n bir bÃ¶lÃ¼m anahtarÄ± ve satÄ±r anahtarÄ± ile tanÄ±mlandÄ±ÄŸÄ± tablolara organize edilir, bu da hÄ±zlÄ± sorgulama saÄŸlar. Dinlenme sÄ±rasÄ±nda ÅŸifreleme, rol tabanlÄ± eriÅŸim kontrolÃ¼ ve gÃ¼venli, yÃ¶netilen depolama iÃ§in paylaÅŸÄ±lan eriÅŸim imzalarÄ± gibi Ã¶zellikleri destekler; bu da geniÅŸ bir uygulama yelpazesi iÃ§in uygundur.

Tablo depolama iÃ§in **yerleÅŸik bir yedekleme mekanizmasÄ± yoktur**.

### Anahtarlar

#### **PartitionKey**

* **PartitionKey, varlÄ±klarÄ± mantÄ±ksal bÃ¶lÃ¼mlere gruplar**. AynÄ± PartitionKey'e sahip varlÄ±klar birlikte depolanÄ±r, bu da sorgu performansÄ±nÄ± ve Ã¶lÃ§eklenebilirliÄŸi artÄ±rÄ±r.
* Ã–rnek: Bir Ã§alÄ±ÅŸan verilerini depolayan tabloda, `PartitionKey` bir departmanÄ± temsil edebilir, Ã¶rneÄŸin, `"Ä°K"` veya `"BT"`.

#### **RowKey**

* **RowKey, bir bÃ¶lÃ¼m iÃ§indeki bir varlÄ±ÄŸÄ±n benzersiz tanÄ±mlayÄ±cÄ±sÄ±dÄ±r**. PartitionKey ile birleÅŸtirildiÄŸinde, tablodaki her varlÄ±ÄŸÄ±n kÃ¼resel olarak benzersiz bir tanÄ±mlayÄ±cÄ±ya sahip olmasÄ±nÄ± saÄŸlar.
* Ã–rnek: `"Ä°K"` bÃ¶lÃ¼mÃ¼nde, `RowKey` bir Ã§alÄ±ÅŸan kimliÄŸi olabilir, Ã¶rneÄŸin, `"12345"`.

#### **DiÄŸer Ã–zellikler (Ã–zel Ã–zellikler)**

* PartitionKey ve RowKey dÄ±ÅŸÄ±nda, bir varlÄ±k ek **Ã¶zel Ã¶zelliklere sahip olabilir**. Bunlar kullanÄ±cÄ± tanÄ±mlÄ±dÄ±r ve geleneksel bir veritabanÄ±ndaki sÃ¼tunlar gibi iÅŸlev gÃ¶rÃ¼r.
* Ã–zellikler **anahtar-deÄŸer Ã§iftleri** olarak depolanÄ±r.
* Ã–rnek: `Ad`, `YaÅŸ`, `Unvan` bir Ã§alÄ±ÅŸan iÃ§in Ã¶zel Ã¶zellikler olabilir.

## Enumeration
```bash
# Get storage accounts
az storage account list

# List tables
az storage table list --account-name <name>

# Read table
az storage entity query \
--account-name <name> \
--table-name <t-name> \
--top 10

# Write table
az storage entity insert \
--account-name <STORAGE_ACCOUNT_NAME> \
--table-name <TABLE_NAME> \
--entity PartitionKey=<PARTITION_KEY> RowKey=<ROW_KEY> <PROPERTY_KEY>=<PROPERTY_VALUE>

# Write example
az storage entity insert \
--account-name mystorageaccount \
--table-name mytable \
--entity PartitionKey=HR RowKey=12345 Name="John Doe" Age=30 Title="Manager"

# Update row
az storage entity merge \
--account-name mystorageaccount \
--table-name mytable \
--entity PartitionKey=pk1 RowKey=rk1 Age=31
```
{% hint style="info" %}
VarsayÄ±lan olarak `az` cli, bir anahtarÄ± imzalamak ve iÅŸlemi gerÃ§ekleÅŸtirmek iÃ§in bir hesap anahtarÄ± kullanacaktÄ±r. Entra ID prensip ayrÄ±calÄ±klarÄ±nÄ± kullanmak iÃ§in `--auth-mode login` parametrelerini kullanÄ±n.
{% endhint %}

{% hint style="success" %}
KullanÄ±lacak hesap anahtarÄ±nÄ± belirtmek iÃ§in `--account-key` parametresini kullanÄ±n\
SAS token ile eriÅŸmek iÃ§in `--sas-token` parametresini SAS token ile kullanÄ±n
{% endhint %}

## AyrÄ±calÄ±k YÃ¼kseltme

Depolama privesc ile aynÄ±:

{% content-ref url="../az-privilege-escalation/az-storage-privesc.md" %}
[az-storage-privesc.md](../az-privilege-escalation/az-storage-privesc.md)
{% endcontent-ref %}

## Ä°stismar SonrasÄ±

{% content-ref url="../az-post-exploitation/az-table-storage-post-exploitation.md" %}
[az-table-storage-post-exploitation.md](../az-post-exploitation/az-table-storage-post-exploitation.md)
{% endcontent-ref %}

## SÃ¼reklilik

Depolama sÃ¼rekliliÄŸi ile aynÄ±:

{% content-ref url="../az-persistence/az-storage-persistence.md" %}
[az-storage-persistence.md](../az-persistence/az-storage-persistence.md)
{% endcontent-ref %}

{% hint style="success" %}
AWS Hacking'i Ã¶ÄŸrenin ve pratik yapÄ±n:<img src="../../../.gitbook/assets/image (1) (1) (1).png" alt="" data-size="line">[**HackTricks Training AWS Red Team Expert (ARTE)**](https://training.hacktricks.xyz/courses/arte)<img src="../../../.gitbook/assets/image (1) (1) (1).png" alt="" data-size="line">\
GCP Hacking'i Ã¶ÄŸrenin ve pratik yapÄ±n: <img src="../../../.gitbook/assets/image (2).png" alt="" data-size="line">[**HackTricks Training GCP Red Team Expert (GRTE)**<img src="../../../.gitbook/assets/image (2).png" alt="" data-size="line">](https://training.hacktricks.xyz/courses/grte)

<details>

<summary>HackTricks'i Destekleyin</summary>

* [**abonelik planlarÄ±nÄ±**](https://github.com/sponsors/carlospolop) kontrol edin!
* **ğŸ’¬ [**Discord grubuna**](https://discord.gg/hRep4RUj7f) veya [**telegram grubuna**](https://t.me/peass) katÄ±lÄ±n ya da **Twitter**'da **bizi takip edin** ğŸ¦ [**@hacktricks\_live**](https://twitter.com/hacktricks_live)**.**
* **Hacking ipuÃ§larÄ±nÄ± paylaÅŸmak iÃ§in** [**HackTricks**](https://github.com/carlospolop/hacktricks) ve [**HackTricks Cloud**](https://github.com/carlospolop/hacktricks-cloud) github reposuna PR gÃ¶nderin.

</details>
{% endhint %}
