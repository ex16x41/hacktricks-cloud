# Az - Table Storage

{% hint style="success" %}
Learn & practice AWS Hacking:<img src="../../../.gitbook/assets/image (1) (1) (1).png" alt="" data-size="line">[**HackTricks Training AWS Red Team Expert (ARTE)**](https://training.hacktricks.xyz/courses/arte)<img src="../../../.gitbook/assets/image (1) (1) (1).png" alt="" data-size="line">\
Learn & practice GCP Hacking: <img src="../../../.gitbook/assets/image (2).png" alt="" data-size="line">[**HackTricks Training GCP Red Team Expert (GRTE)**<img src="../../../.gitbook/assets/image (2).png" alt="" data-size="line">](https://training.hacktricks.xyz/courses/grte)

<details>

<summary>Support HackTricks</summary>

* Check the [**subscription plans**](https://github.com/sponsors/carlospolop)!
* **Join the** üí¨ [**Discord group**](https://discord.gg/hRep4RUj7f) or the [**telegram group**](https://t.me/peass) or **follow** us on **Twitter** üê¶ [**@hacktricks\_live**](https://twitter.com/hacktricks_live)**.**
* **Share hacking tricks by submitting PRs to the** [**HackTricks**](https://github.com/carlospolop/hacktricks) and [**HackTricks Cloud**](https://github.com/carlospolop/hacktricks-cloud) github repos.

</details>
{% endhint %}

## Basic Information

**Azure Table Storage** is 'n NoSQL sleutel-waarde stoor wat ontwerp is om groot volumes van gestruktureerde, nie-relationele data te stoor. Dit bied ho√´ beskikbaarheid, lae latensie, en skaalbaarheid om groot datastelle doeltreffend te hanteer. Data is georganiseer in tabelle, met elke entiteit ge√Ødentifiseer deur 'n partisie sleutel en ry sleutel, wat vinnige soektogte moontlik maak. Dit ondersteun funksies soos versleuteling in rus, rol-gebaseerde toegangbeheer, en gedeelde toegang handtekeninge vir veilige, bestuurde stoor wat geskik is vir 'n wye reeks toepassings.

Daar **is nie 'n ingeboude rugsteunmeganisme** vir tabel stoor nie.

### Keys

#### **PartitionKey**

* Die **PartitionKey groepeer entiteite in logiese partisie**. Entiteite met dieselfde PartitionKey word saam gestoor, wat die navraagprestasie en skaalbaarheid verbeter.
* Voorbeeld: In 'n tabel wat werknemerdata stoor, kan `PartitionKey` 'n departement voorstel, bv. `"HR"` of `"IT"`.

#### **RowKey**

* Die **RowKey is die unieke identifiseerder** vir 'n entiteit binne 'n partisie. Wanneer dit saam met die PartitionKey gekombineer word, verseker dit dat elke entiteit in die tabel 'n w√™reldwyd unieke identifiseerder het.
* Voorbeeld: Vir die `"HR"` partisie, kan `RowKey` 'n werknemer ID wees, bv. `"12345"`.

#### **Other Properties (Custom Properties)**

* Benewens die PartitionKey en RowKey, kan 'n entiteit addisionele **aangepaste eienskappe h√™ om data te stoor**. Hierdie is gebruikersgedefinieer en funksioneer soos kolomme in 'n tradisionele databasis.
* Eienskappe word gestoor as **sleutel-waarde pare**.
* Voorbeeld: `Name`, `Age`, `Title` kan aangepaste eienskappe vir 'n werknemer wees.

## Enumeration
```bash
# Get storage accounts
az storage account list

# List tables
az storage table list --account-name <name>

# Read table
az storage entity query \
--account-name <name> \
--table-name <t-name> \
--top 10

# Write table
az storage entity insert \
--account-name <STORAGE_ACCOUNT_NAME> \
--table-name <TABLE_NAME> \
--entity PartitionKey=<PARTITION_KEY> RowKey=<ROW_KEY> <PROPERTY_KEY>=<PROPERTY_VALUE>

# Write example
az storage entity insert \
--account-name mystorageaccount \
--table-name mytable \
--entity PartitionKey=HR RowKey=12345 Name="John Doe" Age=30 Title="Manager"

# Update row
az storage entity merge \
--account-name mystorageaccount \
--table-name mytable \
--entity PartitionKey=pk1 RowKey=rk1 Age=31
```
{% hint style="info" %}
Standaard sal `az` cli 'n rekeningsleutel gebruik om 'n sleutel te teken en die aksie uit te voer. Om die Entra ID-prinsipaal se voorregte te gebruik, gebruik die parameters `--auth-mode login`.
{% endhint %}

{% hint style="success" %}
Gebruik die param `--account-key` om die rekeningsleutel aan te dui wat gebruik moet word\
Gebruik die param `--sas-token` met die SAS-token om toegang te verkry via 'n SAS-token
{% endhint %}

## Privilege Escalation

Dieselfde as stoor privesc:

{% content-ref url="../az-privilege-escalation/az-storage-privesc.md" %}
[az-storage-privesc.md](../az-privilege-escalation/az-storage-privesc.md)
{% endcontent-ref %}

## Post Exploitation

{% content-ref url="../az-post-exploitation/az-table-storage-post-exploitation.md" %}
[az-table-storage-post-exploitation.md](../az-post-exploitation/az-table-storage-post-exploitation.md)
{% endcontent-ref %}

## Persistence

Dieselfde as stoor volharding:

{% content-ref url="../az-persistence/az-storage-persistence.md" %}
[az-storage-persistence.md](../az-persistence/az-storage-persistence.md)
{% endcontent-ref %}

{% hint style="success" %}
Leer & oefen AWS Hacking:<img src="../../../.gitbook/assets/image (1) (1) (1).png" alt="" data-size="line">[**HackTricks Training AWS Red Team Expert (ARTE)**](https://training.hacktricks.xyz/courses/arte)<img src="../../../.gitbook/assets/image (1) (1) (1).png" alt="" data-size="line">\
Leer & oefen GCP Hacking: <img src="../../../.gitbook/assets/image (2).png" alt="" data-size="line">[**HackTricks Training GCP Red Team Expert (GRTE)**<img src="../../../.gitbook/assets/image (2).png" alt="" data-size="line">](https://training.hacktricks.xyz/courses/grte)

<details>

<summary>Support HackTricks</summary>

* Kyk na die [**subskripsieplanne**](https://github.com/sponsors/carlospolop)!
* **Sluit aan by die** üí¨ [**Discord-groep**](https://discord.gg/hRep4RUj7f) of die [**telegram-groep**](https://t.me/peass) of **volg** ons op **Twitter** üê¶ [**@hacktricks\_live**](https://twitter.com/hacktricks_live)**.**
* **Deel hacking truuks deur PRs in te dien na die** [**HackTricks**](https://github.com/carlospolop/hacktricks) en [**HackTricks Cloud**](https://github.com/carlospolop/hacktricks-cloud) github repos.

</details>
{% endhint %}
