# Az - Logic Apps

{% hint style="success" %}
Learn & practice AWS Hacking:<img src="/.gitbook/assets/image.png" alt="" data-size="line">[**HackTricks Training AWS Red Team Expert (ARTE)**](https://training.hacktricks.xyz/courses/arte)<img src="/.gitbook/assets/image.png" alt="" data-size="line">\
Learn & practice GCP Hacking: <img src="/.gitbook/assets/image (2).png" alt="" data-size="line">[**HackTricks Training GCP Red Team Expert (GRTE)**<img src="/.gitbook/assets/image (2).png" alt="" data-size="line">](https://training.hacktricks.xyz/courses/grte)

<details>

<summary>Support HackTricks</summary>

* [**ã‚µãƒ–ã‚¹ã‚¯ãƒªãƒ—ã‚·ãƒ§ãƒ³ãƒ—ãƒ©ãƒ³**](https://github.com/sponsors/carlospolop)ã‚’ãƒã‚§ãƒƒã‚¯ï¼
* ğŸ’¬ [**Discordã‚°ãƒ«ãƒ¼ãƒ—**](https://discord.gg/hRep4RUj7f)ã¾ãŸã¯[**telegramã‚°ãƒ«ãƒ¼ãƒ—**](https://t.me/peass)ã«å‚åŠ ã™ã‚‹ã‹ã€**Twitter** ğŸ¦ [**@hacktricks\_live**](https://twitter.com/hacktricks\_live)ã‚’ãƒ•ã‚©ãƒ­ãƒ¼ã—ã¦ãã ã•ã„ã€‚
* [**HackTricks**](https://github.com/carlospolop/hacktricks)ãŠã‚ˆã³[**HackTricks Cloud**](https://github.com/carlospolop/hacktricks-cloud)ã®githubãƒªãƒã‚¸ãƒˆãƒªã«PRã‚’æå‡ºã—ã¦ãƒãƒƒã‚­ãƒ³ã‚°ãƒˆãƒªãƒƒã‚¯ã‚’å…±æœ‰ã—ã¦ãã ã•ã„ã€‚

</details>
{% endhint %}

## åŸºæœ¬æƒ…å ±

Azure Logic Appsã¯ã€Microsoft AzureãŒæä¾›ã™ã‚‹ã‚¯ãƒ©ã‚¦ãƒ‰ãƒ™ãƒ¼ã‚¹ã®ã‚µãƒ¼ãƒ“ã‚¹ã§ã€**ã•ã¾ã–ã¾ãªã‚µãƒ¼ãƒ“ã‚¹ã€ãƒ‡ãƒ¼ã‚¿ã‚½ãƒ¼ã‚¹ã€ãŠã‚ˆã³ã‚¢ãƒ—ãƒªã‚±ãƒ¼ã‚·ãƒ§ãƒ³ã‚’çµ±åˆã™ã‚‹ãƒ¯ãƒ¼ã‚¯ãƒ•ãƒ­ãƒ¼ã‚’ä½œæˆãŠã‚ˆã³å®Ÿè¡Œ**ã™ã‚‹ã“ã¨ãŒã§ãã¾ã™ã€‚ã“ã‚Œã‚‰ã®ãƒ¯ãƒ¼ã‚¯ãƒ•ãƒ­ãƒ¼ã¯ã€**ãƒ“ã‚¸ãƒã‚¹ãƒ—ãƒ­ã‚»ã‚¹ã®è‡ªå‹•åŒ–**ã€ã‚¿ã‚¹ã‚¯ã®ã‚ªãƒ¼ã‚±ã‚¹ãƒˆãƒ¬ãƒ¼ã‚·ãƒ§ãƒ³ã€ãŠã‚ˆã³ç•°ãªã‚‹ãƒ—ãƒ©ãƒƒãƒˆãƒ•ã‚©ãƒ¼ãƒ é–“ã®ãƒ‡ãƒ¼ã‚¿çµ±åˆã‚’ç›®çš„ã¨ã—ã¦ã„ã¾ã™ã€‚

Logic Appsã¯ã€**å¹…åºƒã„äº‹å‰æ§‹ç¯‰ã•ã‚ŒãŸã‚³ãƒã‚¯ã‚¿**ã‚’ä½¿ç”¨ã—ã¦ãƒ¯ãƒ¼ã‚¯ãƒ•ãƒ­ãƒ¼ã‚’ä½œæˆã™ã‚‹ãŸã‚ã®ãƒ“ã‚¸ãƒ¥ã‚¢ãƒ«ãƒ‡ã‚¶ã‚¤ãƒŠãƒ¼ã‚’æä¾›ã—ã¦ãŠã‚Šã€Office 365ã€Dynamics CRMã€Salesforceãªã©ã®ã•ã¾ã–ã¾ãªã‚µãƒ¼ãƒ“ã‚¹ã¨ç°¡å˜ã«æ¥ç¶šã—ã¦å¯¾è©±ã™ã‚‹ã“ã¨ãŒã§ãã¾ã™ã€‚ã¾ãŸã€ç‰¹å®šã®ãƒ‹ãƒ¼ã‚ºã«åˆã‚ã›ã¦ã‚«ã‚¹ã‚¿ãƒ ã‚³ãƒã‚¯ã‚¿ã‚’ä½œæˆã™ã‚‹ã“ã¨ã‚‚å¯èƒ½ã§ã™ã€‚

### ä¾‹

* **ãƒ‡ãƒ¼ã‚¿ãƒ‘ã‚¤ãƒ—ãƒ©ã‚¤ãƒ³ã®è‡ªå‹•åŒ–**: Logic Appsã¯ã€Azure Data Factoryã¨çµ„ã¿åˆã‚ã›ã¦**ãƒ‡ãƒ¼ã‚¿è»¢é€ãŠã‚ˆã³å¤‰æ›ãƒ—ãƒ­ã‚»ã‚¹ã‚’è‡ªå‹•åŒ–**ã™ã‚‹ã“ã¨ãŒã§ãã¾ã™ã€‚ã“ã‚Œã¯ã€Azure SQL Databaseã‚„Azure Blob Storageãªã©ã®ã•ã¾ã–ã¾ãªãƒ‡ãƒ¼ã‚¿ã‚¹ãƒˆã‚¢é–“ã§ãƒ‡ãƒ¼ã‚¿ã‚’ç§»å‹•ãŠã‚ˆã³å¤‰æ›ã™ã‚‹ã‚¹ã‚±ãƒ¼ãƒ©ãƒ–ãƒ«ã§ä¿¡é ¼æ€§ã®é«˜ã„ãƒ‡ãƒ¼ã‚¿ãƒ‘ã‚¤ãƒ—ãƒ©ã‚¤ãƒ³ã‚’ä½œæˆã™ã‚‹ã®ã«å½¹ç«‹ã¡ã€åˆ†æãŠã‚ˆã³ãƒ“ã‚¸ãƒã‚¹ã‚¤ãƒ³ãƒ†ãƒªã‚¸ã‚§ãƒ³ã‚¹ã®æ“ä½œã‚’æ”¯æ´ã—ã¾ã™ã€‚
* **Azure Functionsã¨ã®çµ±åˆ**: Logic Appsã¯ã€Azure Functionsã¨é€£æºã—ã¦**å¿…è¦ã«å¿œã˜ã¦ã‚¹ã‚±ãƒ¼ãƒ«ã™ã‚‹é«˜åº¦ãªã‚¤ãƒ™ãƒ³ãƒˆé§†å‹•å‹ã‚¢ãƒ—ãƒªã‚±ãƒ¼ã‚·ãƒ§ãƒ³ã‚’é–‹ç™º**ã—ã€ä»–ã®Azureã‚µãƒ¼ãƒ“ã‚¹ã¨ã‚·ãƒ¼ãƒ ãƒ¬ã‚¹ã«çµ±åˆã™ã‚‹ã“ã¨ãŒã§ãã¾ã™ã€‚ä¾‹ã¨ã—ã¦ã€Logic Appã‚’ä½¿ç”¨ã—ã¦Azure Storageã‚¢ã‚«ã‚¦ãƒ³ãƒˆã®å¤‰æ›´ãªã©ã®ç‰¹å®šã®ã‚¤ãƒ™ãƒ³ãƒˆã«å¿œã˜ã¦Azure Functionã‚’ãƒˆãƒªã‚¬ãƒ¼ã—ã€å‹•çš„ãªãƒ‡ãƒ¼ã‚¿å‡¦ç†ã‚’å¯èƒ½ã«ã™ã‚‹ã‚±ãƒ¼ã‚¹ãŒã‚ã‚Šã¾ã™ã€‚

### LogicAPPã®å¯è¦–åŒ–

LogicAppã‚’ã‚°ãƒ©ãƒ•ã‚£ãƒƒã‚¯ã§è¡¨ç¤ºã™ã‚‹ã“ã¨ãŒå¯èƒ½ã§ã™:

<figure><img src="../../../.gitbook/assets/image (197).png" alt=""><figcaption></figcaption></figure>

ã¾ãŸã¯ã€"**Logic app code view**"ã‚»ã‚¯ã‚·ãƒ§ãƒ³ã§ã‚³ãƒ¼ãƒ‰ã‚’ç¢ºèªã™ã‚‹ã“ã¨ã‚‚ã§ãã¾ã™ã€‚

### SSRFä¿è­·

ãŸã¨ãˆ**Logic AppãŒSSRFã«è„†å¼±**ã§ã‚ã£ã¦ã‚‚ã€Logic Appsã¯ãƒ¡ã‚¿ãƒ‡ãƒ¼ã‚¿ã‹ã‚‰è³‡æ ¼æƒ…å ±ã«ã‚¢ã‚¯ã‚»ã‚¹ã™ã‚‹ã“ã¨ã‚’è¨±å¯ã—ãªã„ãŸã‚ã€è³‡æ ¼æƒ…å ±ã«ã‚¢ã‚¯ã‚»ã‚¹ã™ã‚‹ã“ã¨ã¯ã§ãã¾ã›ã‚“ã€‚

ä¾‹ãˆã°ã€æ¬¡ã®ã‚ˆã†ãªã‚‚ã®ã¯ãƒˆãƒ¼ã‚¯ãƒ³ã‚’è¿”ã—ã¾ã›ã‚“:

{% code overflow="wrap" %}
```bash
# The URL belongs to a Logic App vulenrable to SSRF
curl -XPOST 'https://prod-44.westus.logic.azure.com:443/workflows/2d8de4be6e974123adf0b98159966644/triggers/manual/paths/invoke?api-version=2016-10-01&sp=%2Ftriggers%2Fmanual%2Frun&sv=1.0&sig=_8_oqqsCXc0u2c7hNjtSZmT0uM4Xi3hktw6Uze0O34s' -d '{"url": "http://169.254.169.254/metadata/identity/oauth2/token?api-version=2018-02-01&resource=https://management.azure.com/"}' -H "Content-type: application/json" -v
```
{% endcode %}

### åˆ—æŒ™

{% tabs %}
{% tab title="az cli" %}
{% code overflow="wrap" %}
```bash
# List
az logic workflow list --resource-group <ResourceGroupName> --subscription <SubscriptionID> --output table
# Get info
az logic workflow show --name <LogicAppName> --resource-group <ResourceGroupName> --subscription <SubscriptionID>
# Get Logic App config
az logic workflow definition show --name <LogicAppName> --resource-group <ResourceGroupName> --subscription <SubscriptionID>
# Get service ppal used
az logic workflow identity show --name <LogicAppName> --resource-group <ResourceGroupName> --subscription <SubscriptionID>
```
{% endcode %}
{% endtab %}

{% tab title="Az PowerSHell" %}
{% code overflow="wrap" %}
```powershell
# List
Get-AzLogicApp -ResourceGroupName <ResourceGroupName>
# Get info
Get-AzLogicApp -ResourceGroupName <ResourceGroupName> -Name <LogicAppName>
# Get Logic App config
(Get-AzLogicApp -ResourceGroupName <ResourceGroupName> -Name <LogicAppName>).Definition | ConvertTo-Json
# Get service ppal used
(Get-AzLogicApp -ResourceGroupName <ResourceGroupName> -Name <LogicAppName>).Identity
```
{% endcode %}
{% endtab %}
{% endtabs %}

{% hint style="success" %}
AWS Hackingã‚’å­¦ã³ã€ç·´ç¿’ã™ã‚‹:<img src="/.gitbook/assets/image.png" alt="" data-size="line">[**HackTricks Training AWS Red Team Expert (ARTE)**](https://training.hacktricks.xyz/courses/arte)<img src="/.gitbook/assets/image.png" alt="" data-size="line">\
GCP Hackingã‚’å­¦ã³ã€ç·´ç¿’ã™ã‚‹: <img src="/.gitbook/assets/image (2).png" alt="" data-size="line">[**HackTricks Training GCP Red Team Expert (GRTE)**<img src="/.gitbook/assets/image (2).png" alt="" data-size="line">](https://training.hacktricks.xyz/courses/grte)

<details>

<summary>HackTricksã‚’ã‚µãƒãƒ¼ãƒˆã™ã‚‹</summary>

* [**ã‚µãƒ–ã‚¹ã‚¯ãƒªãƒ—ã‚·ãƒ§ãƒ³ãƒ—ãƒ©ãƒ³**](https://github.com/sponsors/carlospolop)ã‚’ãƒã‚§ãƒƒã‚¯ï¼
* ğŸ’¬ [**Discordã‚°ãƒ«ãƒ¼ãƒ—**](https://discord.gg/hRep4RUj7f)ã¾ãŸã¯[**telegramã‚°ãƒ«ãƒ¼ãƒ—**](https://t.me/peass)ã«å‚åŠ ã™ã‚‹ã‹ã€**Twitter** ğŸ¦ [**@hacktricks\_live**](https://twitter.com/hacktricks\_live)ã‚’ãƒ•ã‚©ãƒ­ãƒ¼ã™ã‚‹ã€‚
* **PRã‚’æå‡ºã—ã¦ãƒãƒƒã‚­ãƒ³ã‚°ãƒˆãƒªãƒƒã‚¯ã‚’å…±æœ‰ã™ã‚‹** [**HackTricks**](https://github.com/carlospolop/hacktricks)ãŠã‚ˆã³[**HackTricks Cloud**](https://github.com/carlospolop/hacktricks-cloud)ã®githubãƒªãƒã‚¸ãƒˆãƒªã«ã€‚

</details>
{% endhint %}
