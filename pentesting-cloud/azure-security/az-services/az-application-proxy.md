# Az - Application Proxy

{% hint style="success" %}
AWS Hacking Ã¶ÄŸrenin ve pratik yapÄ±n:<img src="/.gitbook/assets/image.png" alt="" data-size="line">[**HackTricks Training AWS Red Team Expert (ARTE)**](https://training.hacktricks.xyz/courses/arte)<img src="/.gitbook/assets/image.png" alt="" data-size="line">\
GCP Hacking Ã¶ÄŸrenin ve pratik yapÄ±n: <img src="/.gitbook/assets/image (2).png" alt="" data-size="line">[**HackTricks Training GCP Red Team Expert (GRTE)**<img src="/.gitbook/assets/image (2).png" alt="" data-size="line">](https://training.hacktricks.xyz/courses/grte)

<details>

<summary>HackTricks'i Destekleyin</summary>

* [**abonelik planlarÄ±nÄ±**](https://github.com/sponsors/carlospolop) kontrol edin!
* **ğŸ’¬ [**Discord grubuna**](https://discord.gg/hRep4RUj7f) veya [**telegram grubuna**](https://t.me/peass) katÄ±lÄ±n ya da bizi **Twitter** ğŸ¦ [**@hacktricks\_live**](https://twitter.com/hacktricks\_live)**'da takip edin.**
* **HackTricks'e PR gÃ¶ndererek hacking ipuÃ§larÄ±nÄ± paylaÅŸÄ±n** [**HackTricks**](https://github.com/carlospolop/hacktricks) ve [**HackTricks Cloud**](https://github.com/carlospolop/hacktricks-cloud) github depolarÄ±na.

</details>
{% endhint %}

## Temel Bilgiler

[Belgelerden:](https://learn.microsoft.com/en-us/entra/identity/app-proxy/application-proxy)

Azure Active Directory'nin Application Proxy'si, **yerel web uygulamalarÄ±na gÃ¼venli uzaktan eriÅŸim** saÄŸlar. **Azure AD'ye tek oturum aÃ§tÄ±ktan** sonra, kullanÄ±cÄ±lar **bulut** ve **yerel uygulamalara** bir **dÄ±ÅŸ URL** veya dahili bir uygulama portalÄ± aracÄ±lÄ±ÄŸÄ±yla eriÅŸebilirler.

ÅÃ¶yle Ã§alÄ±ÅŸÄ±r:

<figure><img src="../../../.gitbook/assets/image (186).png" alt=""><figcaption></figcaption></figure>

1. KullanÄ±cÄ± bir uÃ§ nokta aracÄ±lÄ±ÄŸÄ±yla uygulamaya eriÅŸtikten sonra, kullanÄ±cÄ± **Azure AD oturum aÃ§ma sayfasÄ±na** yÃ¶nlendirilir.
2. **BaÅŸarÄ±lÄ± bir oturum aÃ§madan** sonra, Azure AD kullanÄ±cÄ± cihazÄ±na bir **token** gÃ¶nderir.
3. Ä°stemci, token'Ä± **Application Proxy hizmetine** gÃ¶nderir, bu da token'dan kullanÄ±cÄ± ana adÄ± (UPN) ve gÃ¼venlik ana adÄ±nÄ± (SPN) alÄ±r. **Application Proxy daha sonra isteÄŸi Application Proxy baÄŸlayÄ±cÄ±sÄ±na gÃ¶nderir**.
4. Tek oturum aÃ§mayÄ± yapÄ±landÄ±rdÄ±ysanÄ±z, baÄŸlayÄ±cÄ± kullanÄ±cÄ± adÄ±na gerekli **ek kimlik doÄŸrulamalarÄ±nÄ±** gerÃ§ekleÅŸtirir.
5. BaÄŸlayÄ±cÄ± isteÄŸi **yerel uygulamaya** gÃ¶nderir.
6. **YanÄ±t**, baÄŸlayÄ±cÄ± ve Application Proxy hizmeti aracÄ±lÄ±ÄŸÄ±yla **kullanÄ±cÄ±ya** gÃ¶nderilir.

## Enumeration
```powershell
# Enumerate applications with application proxy configured
Get-AzureADApplication | %{try{Get-AzureADApplicationProxyApplication -ObjectId $_.ObjectID;$_.DisplayName;$_.ObjectID}catch{}}

# Get applications service principal
Get-AzureADServicePrincipal -All $true | ?{$_.DisplayName -eq "Name"}

# Use the following ps1 script from https://learn.microsoft.com/en-us/azure/active-directory/app-proxy/scripts/powershell-display-users-group-of-app
# to find users and groups assigned to the application. Pass the ObjectID of the Service Principal to it
Get-ApplicationProxyAssignedUsersAndGroups -ObjectId <object-id>
```
## Referanslar

* [https://learn.microsoft.com/en-us/azure/active-directory/app-proxy/application-proxy](https://learn.microsoft.com/en-us/azure/active-directory/app-proxy/application-proxy)

{% hint style="success" %}
AWS Hacking Ã¶ÄŸrenin ve pratik yapÄ±n:<img src="/.gitbook/assets/image.png" alt="" data-size="line">[**HackTricks Training AWS Red Team Expert (ARTE)**](https://training.hacktricks.xyz/courses/arte)<img src="/.gitbook/assets/image.png" alt="" data-size="line">\
GCP Hacking Ã¶ÄŸrenin ve pratik yapÄ±n: <img src="/.gitbook/assets/image (2).png" alt="" data-size="line">[**HackTricks Training GCP Red Team Expert (GRTE)**<img src="/.gitbook/assets/image (2).png" alt="" data-size="line">](https://training.hacktricks.xyz/courses/grte)

<details>

<summary>HackTricks'i Destekleyin</summary>

* [**abonelik planlarÄ±nÄ±**](https://github.com/sponsors/carlospolop) kontrol edin!
* **ğŸ’¬ [**Discord grubuna**](https://discord.gg/hRep4RUj7f) veya [**telegram grubuna**](https://t.me/peass) katÄ±lÄ±n ya da **Twitter'da** ğŸ¦ [**@hacktricks\_live**](https://twitter.com/hacktricks\_live)**'Ä± takip edin.**
* **HackTricks ve** [**HackTricks Cloud**](https://github.com/carlospolop/hacktricks-cloud) **github depolarÄ±na PR gÃ¶ndererek hacking ipuÃ§larÄ±nÄ± paylaÅŸÄ±n.**

</details>
{% endhint %}
