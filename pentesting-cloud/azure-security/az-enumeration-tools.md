# Az - Enumeration Tools

{% hint style="success" %}
AWS Hacking'i Ã¶ÄŸrenin ve pratik yapÄ±n:<img src="../../.gitbook/assets/image (1) (1) (1).png" alt="" data-size="line">[**HackTricks Training AWS Red Team Expert (ARTE)**](https://training.hacktricks.xyz/courses/arte)<img src="../../.gitbook/assets/image (1) (1) (1).png" alt="" data-size="line">\
GCP Hacking'i Ã¶ÄŸrenin ve pratik yapÄ±n: <img src="../../.gitbook/assets/image (2).png" alt="" data-size="line">[**HackTricks Training GCP Red Team Expert (GRTE)**<img src="../../.gitbook/assets/image (2).png" alt="" data-size="line">](https://training.hacktricks.xyz/courses/grte)

<details>

<summary>HackTricks'i Destekleyin</summary>

* [**abonelik planlarÄ±nÄ±**](https://github.com/sponsors/carlospolop) kontrol edin!
* **ğŸ’¬ [**Discord grubuna**](https://discord.gg/hRep4RUj7f) veya [**telegram grubuna**](https://t.me/peass) katÄ±lÄ±n ya da **Twitter'da** ğŸ¦ [**@hacktricks\_live**](https://twitter.com/hacktricks_live)**'i takip edin.**
* **Hacking ipuÃ§larÄ±nÄ± paylaÅŸmak iÃ§in** [**HackTricks**](https://github.com/carlospolop/hacktricks) ve [**HackTricks Cloud**](https://github.com/carlospolop/hacktricks-cloud) github reposuna PR gÃ¶nderin.

</details>
{% endhint %}

## Linux'ta PowerShell Kurulumu

{% hint style="success" %}
Linux'ta PowerShell Core'u kurmanÄ±z gerekecek:
```bash
sudo apt-get update
sudo apt-get install -y wget apt-transport-https software-properties-common

# Ubuntu 20.04
wget -q https://packages.microsoft.com/config/ubuntu/20.04/packages-microsoft-prod.deb

# Update repos
sudo apt-get update
sudo add-apt-repository universe

# Install & start powershell
sudo apt-get install -y powershell
pwsh

# Az cli
curl -sL https://aka.ms/InstallAzureCLIDeb | sudo bash
```
{% endhint %}

## MacOS'ta PowerShell Kurulumu

[**belgeler**](https://learn.microsoft.com/en-us/powershell/scripting/install/installing-powershell-on-macos?view=powershell-7.4)den alÄ±nan talimatlar:

1. EÄŸer henÃ¼z kurulu deÄŸilse `brew`'Ã¼ kurun:
```bash
/bin/bash -c "$(curl -fsSL https://raw.githubusercontent.com/Homebrew/install/HEAD/install.sh)"
```
2. En son kararlÄ± PowerShell sÃ¼rÃ¼mÃ¼nÃ¼ yÃ¼kleyin:
```sh
brew install powershell/tap/powershell
```
3. PowerShell'i Ã‡alÄ±ÅŸtÄ±r:
```sh
pwsh
```
4. GÃ¼ncelleme:
```sh
brew update
brew upgrade powershell
```
## Ana Enumeration AraÃ§larÄ±

### az cli

[**Azure Komut SatÄ±rÄ± ArayÃ¼zÃ¼ (CLI)**](https://learn.microsoft.com/en-us/cli/azure/install-azure-cli) Python ile yazÄ±lmÄ±ÅŸ, (Ã§oÄŸu) Azure ve Entra ID kaynaklarÄ±nÄ± yÃ¶netmek ve idare etmek iÃ§in kullanÄ±lan Ã§ok platformlu bir araÃ§tÄ±r. Azure'a baÄŸlanÄ±r ve komut satÄ±rÄ± veya betikler aracÄ±lÄ±ÄŸÄ±yla idari komutlar yÃ¼rÃ¼tÃ¼r.

[**kurulum talimatlarÄ± iÃ§in bu baÄŸlantÄ±yÄ±**](https://learn.microsoft.com/en-us/cli/azure/install-azure-cli#install) takip edin.

Azure CLI'deki komutlar ÅŸu yapÄ±da dÃ¼zenlenmiÅŸtir: `az <hizmet> <eylem> <parametreler>`

#### Hata AyÄ±klama | MitM az cli

**`--debug`** parametresini kullanarak, aracÄ±n **`az`** gÃ¶nderdiÄŸi tÃ¼m istekleri gÃ¶rmek mÃ¼mkÃ¼ndÃ¼r:
```bash
az account management-group list --output table --debug
```
Bir **MitM** gerÃ§ekleÅŸtirmek ve aracÄ±n manuel olarak gÃ¶nderdiÄŸi **tÃ¼m istekleri** kontrol etmek iÃ§in ÅŸunlarÄ± yapabilirsiniz:

{% tabs %}
{% tab title="Bash" %}
```bash
export ADAL_PYTHON_SSL_NO_VERIFY=1
export AZURE_CLI_DISABLE_CONNECTION_VERIFICATION=1
export HTTPS_PROXY="http://127.0.0.1:8080"
export HTTP_PROXY="http://127.0.0.1:8080"

# If this is not enough
# Download the certificate from Burp and convert it into .pem format
# And export the following env variable
openssl x509 -in ~/Downloads/cacert.der -inform DER -out ~/Downloads/cacert.pem -outform PEM
export REQUESTS_CA_BUNDLE=/Users/user/Downloads/cacert.pem
```
{% endtab %}

{% tab title="PS" %}
```bash
$env:ADAL_PYTHON_SSL_NO_VERIFY=1
$env:AZURE_CLI_DISABLE_CONNECTION_VERIFICATION=1
$env:HTTPS_PROXY="http://127.0.0.1:8080"
$env:HTTP_PROXY="http://127.0.0.1:8080"
```
{% endtab %}
{% endtabs %}

### Az PowerShell

Azure PowerShell, PowerShell komut satÄ±rÄ±ndan Azure kaynaklarÄ±nÄ± yÃ¶netmek iÃ§in cmdlet'ler iÃ§eren bir modÃ¼ldÃ¼r.

[**kurulum talimatlarÄ±**](https://learn.microsoft.com/en-us/powershell/azure/install-azure-powershell) iÃ§in bu baÄŸlantÄ±yÄ± takip edin.

Azure PowerShell AZ ModÃ¼lÃ¼ndeki komutlar ÅŸu ÅŸekilde yapÄ±landÄ±rÄ±lmÄ±ÅŸtÄ±r: `<Action>-Az<Service> <parameters>`

#### Debug | MitM Az PowerShell

**`-Debug`** parametresini kullanarak, aracÄ±n gÃ¶nderdiÄŸi tÃ¼m istekleri gÃ¶rmek mÃ¼mkÃ¼ndÃ¼r:
```bash
Get-AzResourceGroup -Debug
```
Bir **MitM** gerÃ§ekleÅŸtirmek ve aracÄ±n gÃ¶nderdiÄŸi **tÃ¼m istekleri** manuel olarak kontrol etmek iÃ§in `HTTPS_PROXY` ve `HTTP_PROXY` ortam deÄŸiÅŸkenlerini [**belgelere**](https://learn.microsoft.com/en-us/powershell/azure/az-powershell-proxy) gÃ¶re ayarlayabilirsiniz.

### Microsoft Graph PowerShell

Microsoft Graph PowerShell, tek bir uÃ§ nokta kullanarak SharePoint, Exchange ve Outlook gibi hizmetler de dahil olmak Ã¼zere tÃ¼m Microsoft Graph API'lerine eriÅŸim saÄŸlayan Ã§ok platformlu bir SDK'dÄ±r. PowerShell 7+ desteÄŸi, MSAL aracÄ±lÄ±ÄŸÄ±yla modern kimlik doÄŸrulama, dÄ±ÅŸ kimlikler ve geliÅŸmiÅŸ sorgular sunar. En az ayrÄ±calÄ±k eriÅŸimine odaklanarak, gÃ¼venli iÅŸlemleri garanti eder ve en son Microsoft Graph API Ã¶zellikleriyle uyumlu hale gelmek iÃ§in dÃ¼zenli gÃ¼ncellemeler alÄ±r.

[**kurulum talimatlarÄ±**](https://learn.microsoft.com/en-us/powershell/microsoftgraph/installation) iÃ§in bu baÄŸlantÄ±yÄ± takip edin.

Microsoft Graph PowerShell'deki komutlar ÅŸu ÅŸekilde yapÄ±landÄ±rÄ±lmÄ±ÅŸtÄ±r: `<Action>-Mg<Service> <parameters>`

#### Microsoft Graph PowerShell'Ä± Hata AyÄ±klama

**`-Debug`** parametresini kullanarak aracÄ±n gÃ¶nderdiÄŸi tÃ¼m istekleri gÃ¶rmek mÃ¼mkÃ¼ndÃ¼r:
```bash
Get-MgUser -Debug
```
### ~~**AzureAD Powershell**~~

Azure Active Directory (AD) modÃ¼lÃ¼, artÄ±k **kaldÄ±rÄ±lmÄ±ÅŸtÄ±r**, Azure AD kaynaklarÄ±nÄ± yÃ¶netmek iÃ§in Azure PowerShell'in bir parÃ§asÄ±dÄ±r. Entra ID'de kullanÄ±cÄ±larÄ±, gruplarÄ± ve uygulama kayÄ±tlarÄ±nÄ± yÃ¶netmek gibi gÃ¶revler iÃ§in cmdlet'ler saÄŸlar.

{% hint style="success" %}
Bu, Microsoft Graph PowerShell ile deÄŸiÅŸtirilmiÅŸtir.
{% endhint %}

[**kurulum talimatlarÄ±**](https://www.powershellgallery.com/packages/AzureAD) iÃ§in bu baÄŸlantÄ±yÄ± takip edin.
