# Az - Queue Persistance

{% hint style="success" %}
AWS Hacking'i Ã¶ÄŸrenin ve pratik yapÄ±n:<img src="../../.gitbook/assets/image (1) (1).png" alt="" data-size="line">[**HackTricks Training AWS Red Team Expert (ARTE)**](https://training.hacktricks.xyz/courses/arte)<img src="../../.gitbook/assets/image (1) (1).png" alt="" data-size="line">\
GCP Hacking'i Ã¶ÄŸrenin ve pratik yapÄ±n: <img src="../../.gitbook/assets/image (2).png" alt="" data-size="line">[**HackTricks Training GCP Red Team Expert (GRTE)**<img src="../../.gitbook/assets/image (2).png" alt="" data-size="line">](https://training.hacktricks.xyz/courses/grte)

<details>

<summary>HackTricks'i Destekleyin</summary>

* [**abonelik planlarÄ±nÄ±**](https://github.com/sponsors/carlospolop) kontrol edin!
* **ğŸ’¬ [**Discord grubuna**](https://discord.gg/hRep4RUj7f) veya [**telegram grubuna**](https://t.me/peass) katÄ±lÄ±n ya da **Twitter'da** ğŸ¦ [**@hacktricks\_live**](https://twitter.com/hacktricks\_live)**'i takip edin.**
* **Hacking ipuÃ§larÄ±nÄ± paylaÅŸmak iÃ§in** [**HackTricks**](https://github.com/carlospolop/hacktricks) ve [**HackTricks Cloud**](https://github.com/carlospolop/hacktricks-cloud) github reposuna PR gÃ¶nderin.

</details>
{% endhint %}

## Queue

Daha fazla bilgi iÃ§in kontrol edin:

{% content-ref url="../az-services/az-queue-enum.md" %}
[az-queue-enum.md](../az-services/az-queue-enum.md)
{% endcontent-ref %}



### Actions: `Microsoft.Storage/storageAccounts/queueServices/queues/write`

Bu izin, bir saldÄ±rganÄ±n depolama hesabÄ± iÃ§indeki kuyruklarÄ± ve Ã¶zelliklerini oluÅŸturmasÄ±na veya deÄŸiÅŸtirmesine olanak tanÄ±r. Yetkisiz kuyruklar oluÅŸturmak, meta verileri deÄŸiÅŸtirmek veya eriÅŸim kontrol listelerini (ACL'ler) deÄŸiÅŸtirerek eriÅŸimi vermek veya kÄ±sÄ±tlamak iÃ§in kullanÄ±labilir. Bu yetenek, iÅŸ akÄ±ÅŸlarÄ±nÄ± bozabilir, kÃ¶tÃ¼ niyetli veriler enjekte edebilir, hassas bilgileri dÄ±ÅŸarÄ± sÄ±zdÄ±rabilir veya daha fazla saldÄ±rÄ±yÄ± mÃ¼mkÃ¼n kÄ±lmak iÃ§in kuyruk ayarlarÄ±nÄ± manipÃ¼le edebilir.

{% code overflow="wrap" %}
```bash
az storage queue create --name <new-queue-name> --account-name <storage-account>

az storage queue metadata update --name <queue-name> --metadata key1=value1 key2=value2 --account-name <storage-account>

az storage queue policy set --name <queue-name> --permissions rwd --expiry 2024-12-31T23:59:59Z --account-name <storage-account>
```
{% endcode %}

### Actions: `Microsoft.Storage/storageAccounts/queueServices/queues/setAcl/action`

Bu izinle, bir saldÄ±rgan bir Azure Storage Queue'nin eriÅŸim kontrol listesini (ACL) deÄŸiÅŸtirebilir, bu da paylaÅŸÄ±lan eriÅŸim imzalarÄ± ile kullanÄ±labilir. Bu, saldÄ±rgana kendisine veya diÄŸer kÃ¶tÃ¼ niyetli kullanÄ±cÄ±lara kuyruÄŸa kalÄ±cÄ± eriÅŸim verme imkanÄ± tanÄ±r, bu da meÅŸru eriÅŸim kimlik bilgileri iptal edilse bile geÃ§erlidir. Yetkisiz eriÅŸimi sÃ¼rdÃ¼rerek, sÃ¼rekli olarak verileri izleyebilir, manipÃ¼le edebilir veya dÄ±ÅŸarÄ±ya aktarabilir, bÃ¶ylece varlÄ±klarÄ±nÄ±n tespit edilmeden kalmasÄ±nÄ± ve iÅŸ akÄ±ÅŸlarÄ±nÄ±n zamanla kesintiye uÄŸramasÄ±nÄ± saÄŸlar.

{% code overflow="wrap" %}
```bash
az storage queue policy create \
--queue-name <QUEUE_NAME> \
--account-name <STORAGE_ACCOUNT_NAME> \
--account-key <STORAGE_ACCOUNT_KEY> \
--name <POLICY_NAME> \
--permission <PERMISSIONS> \
--start <START_TIME> \
--expiry <EXPIRY_TIME>
```
## Referanslar

* https://learn.microsoft.com/en-us/azure/storage/queues/storage-powershell-how-to-use-queues
* https://learn.microsoft.com/en-us/rest/api/storageservices/queue-service-rest-api
* https://learn.microsoft.com/en-us/azure/storage/queues/queues-auth-abac-attributes

* [**abonelik planlarÄ±nÄ±**](https://github.com/sponsors/carlospolop) kontrol edin!
* **ğŸ’¬ [**Discord grubuna**](https://discord.gg/hRep4RUj7f) veya [**telegram grubuna**](https://t.me/peass) katÄ±lÄ±n ya da **Twitter'da** ğŸ¦ [**@hacktricks\_live**](https://twitter.com/hacktricks\_live)** bizi takip edin.**
* **Hacking ipuÃ§larÄ±nÄ± [**HackTricks**](https://github.com/carlospolop/hacktricks) ve [**HackTricks Cloud**](https://github.com/carlospolop/hacktricks-cloud) github reposuna PR gÃ¶ndererek paylaÅŸÄ±n.**

</details>
{% endhint %}
