# Pentesting Cloud Methodology

{% hint style="success" %}
Learn & practice AWS Hacking:<img src="../.gitbook/assets/image (1).png" alt="" data-size="line">[**HackTricks Training AWS Red Team Expert (ARTE)**](https://training.hacktricks.xyz/courses/arte)<img src="../.gitbook/assets/image (1).png" alt="" data-size="line">\
Learn & practice GCP Hacking: <img src="../.gitbook/assets/image (2).png" alt="" data-size="line">[**HackTricks Training GCP Red Team Expert (GRTE)**<img src="../.gitbook/assets/image (2).png" alt="" data-size="line">](https://training.hacktricks.xyz/courses/grte)

<details>

<summary>Support HackTricks</summary>

* Check the [**subscription plans**](https://github.com/sponsors/carlospolop)!
* **Join the** ЁЯТм [**Discord group**](https://discord.gg/hRep4RUj7f) or the [**telegram group**](https://t.me/peass) or **follow** us on **Twitter** ЁЯРж [**@hacktricks\_live**](https://twitter.com/hacktricks\_live)**.**
* **Share hacking tricks by submitting PRs to the** [**HackTricks**](https://github.com/carlospolop/hacktricks) and [**HackTricks Cloud**](https://github.com/carlospolop/hacktricks-cloud) github repos.

</details>
{% endhint %}

<figure><img src="../.gitbook/assets/CLOUD-logo-letters.svg" alt=""><figcaption></figcaption></figure>

## Basic Methodology

рдкреНрд░рддреНрдпреЗрдХ рдХреНрд▓рд╛рдЙрдб рдХреА рдЕрдкрдиреА рд╡рд┐рд╢реЗрд╖рддрд╛рдПрдБ рд╣реЛрддреА рд╣реИрдВ рд▓реЗрдХрд┐рди рд╕рд╛рдорд╛рдиреНрдпрддрдГ рдХреБрдЫ **рд╕рд╛рдорд╛рдиреНрдп рдмрд╛рддреЗрдВ рд╣реИрдВ рдЬрд┐рдиреНрд╣реЗрдВ рдПрдХ pentester рдХреЛ** рдХреНрд▓рд╛рдЙрдб рд╡рд╛рддрд╛рд╡рд░рдг рдХрд╛ рдкрд░реАрдХреНрд╖рдг рдХрд░рддреЗ рд╕рдордп рдЬрд╛рдВрдЪрдирд╛ рдЪрд╛рд╣рд┐рдП:

* **рдмреЗрдВрдЪрдорд╛рд░реНрдХ рдЬрд╛рдВрдЪреЗрдВ**
* рдпрд╣ рдЖрдкрдХреЛ **рдкрд░реНрдпрд╛рд╡рд░рдг рдХрд╛ рдЖрдХрд╛рд░** рдФрд░ **рд╕реЗрд╡рд╛рдУрдВ рдХрд╛ рдЙрдкрдпреЛрдЧ** рд╕рдордЭрдиреЗ рдореЗрдВ рдорджрдж рдХрд░реЗрдЧрд╛
* рдпрд╣ рдЖрдкрдХреЛ рдХреБрдЫ **рддреНрд╡рд░рд┐рдд рдЧрд▓рдд рдХреЙрдиреНрдлрд╝рд┐рдЧрд░реЗрд╢рди** рдЦреЛрдЬрдиреЗ рдХреА рдЕрдиреБрдорддрд┐ рджреЗрдЧрд╛ рдХреНрдпреЛрдВрдХрд┐ рдЖрдк рдЗрдирдореЗрдВ рд╕реЗ рдЕрдзрд┐рдХрд╛рдВрд╢ рдкрд░реАрдХреНрд╖рдг **рд╕реНрд╡рдЪрд╛рд▓рд┐рдд рдЙрдкрдХрд░рдгреЛрдВ** рдХреЗ рд╕рд╛рде рдХрд░ рд╕рдХрддреЗ рд╣реИрдВ
* **рд╕реЗрд╡рд╛рдУрдВ рдХреА рдЧрдгрдирд╛**
* рдпрджрд┐ рдЖрдкрдиреЗ рдмреЗрдВрдЪрдорд╛рд░реНрдХ рдкрд░реАрдХреНрд╖рдг рд╕рд╣реА рдврдВрдЧ рд╕реЗ рдХрд┐рдпрд╛ рд╣реИ рддреЛ рдЖрдк рдпрд╣рд╛рдБ рдЕрдзрд┐рдХ рдЧрд▓рдд рдХреЙрдиреНрдлрд╝рд┐рдЧрд░реЗрд╢рди рдирд╣реАрдВ рдкрд╛рдПрдВрдЧреЗ, рд▓реЗрдХрд┐рди рдЖрдк рдХреБрдЫ рдкрд╛ рд╕рдХрддреЗ рд╣реИрдВ рдЬреЛ рдмреЗрдВрдЪрдорд╛рд░реНрдХ рдкрд░реАрдХреНрд╖рдг рдореЗрдВ рдирд╣реАрдВ рджреЗрдЦреЗ рдЧрдП рдереЗред
* рдпрд╣ рдЖрдкрдХреЛ рдпрд╣ рдЬрд╛рдирдиреЗ рдХреА рдЕрдиреБрдорддрд┐ рджреЗрдЧрд╛ рдХрд┐ **рдХреНрд▓рд╛рдЙрдб env рдореЗрдВ рд╡рд╛рд╕реНрддрд╡ рдореЗрдВ рдХреНрдпрд╛ рдЙрдкрдпреЛрдЧ рдХрд┐рдпрд╛ рдЬрд╛ рд░рд╣рд╛ рд╣реИ**
* рдпрд╣ рдЕрдЧрд▓реЗ рдЪрд░рдгреЛрдВ рдореЗрдВ рдмрд╣реБрдд рдорджрдж рдХрд░реЗрдЧрд╛
* **рдкреНрд░рдХрдЯ рд╕рдВрдкрддреНрддрд┐рдпреЛрдВ рдХреА рдЬрд╛рдВрдЪ рдХрд░реЗрдВ**
* рдпрд╣ рдкрд┐рдЫрд▓реЗ рдЕрдиреБрднрд╛рдЧ рдХреЗ рджреМрд░рд╛рди рдХрд┐рдпрд╛ рдЬрд╛ рд╕рдХрддрд╛ рд╣реИ, рдЖрдкрдХреЛ **рдпрд╣ рдкрддрд╛ рд▓рдЧрд╛рдирд╛ рд╣реЛрдЧрд╛ рдХрд┐ рдХреНрдпрд╛ рдХреБрдЫ рднреА рд╕рдВрднрд╛рд╡рд┐рдд рд░реВрдк рд╕реЗ рдкреНрд░рдХрдЯ рд╣реИ** рдЗрдВрдЯрд░рдиреЗрдЯ рдкрд░ рдФрд░ рдЗрд╕реЗ рдХреИрд╕реЗ рдПрдХреНрд╕реЗрд╕ рдХрд┐рдпрд╛ рдЬрд╛ рд╕рдХрддрд╛ рд╣реИред
* рдпрд╣рд╛рдБ рдореИрдВ **рд╣рд╛рде рд╕реЗ рдкреНрд░рдХрдЯ рдХреА рдЧрдИ рдЕрд╡рд╕рдВрд░рдЪрдирд╛** рдЬреИрд╕реЗ рд╡реЗрдм рдкреГрд╖реНрдареЛрдВ рдХреЗ рд╕рд╛рде рдЙрджрд╛рд╣рд░рдг рдпрд╛ рдЕрдиреНрдп рдкреЛрд░реНрдЯреНрд╕ рдХреА рдЬрд╛рдВрдЪ рдХрд░ рд░рд╣рд╛ рд╣реВрдБ, рдФрд░ рдЕрдиреНрдп **рдХреНрд▓рд╛рдЙрдб рдкреНрд░рдмрдВрдзрд┐рдд рд╕реЗрд╡рд╛рдУрдВ рдХреЗ рдмрд╛рд░реЗ рдореЗрдВ рдЬреЛ рдкреНрд░рдХрдЯ рд╣реЛрдиреЗ рдХреЗ рд▓рд┐рдП рдХреЙрдиреНрдлрд╝рд┐рдЧрд░ рдХреА рдЬрд╛ рд╕рдХрддреА рд╣реИрдВ** (рдЬреИрд╕реЗ DBs рдпрд╛ рдмрдХреЗрдЯреНрд╕)
* рдлрд┐рд░ рдЖрдкрдХреЛ рдпрд╣ рдЬрд╛рдВрдЪрдирд╛ рдЪрд╛рд╣рд┐рдП рдХрд┐ **рдХреНрдпрд╛ рдЙрд╕ рд╕рдВрд╕рд╛рдзрди рдХреЛ рдкреНрд░рдХрдЯ рдХрд┐рдпрд╛ рдЬрд╛ рд╕рдХрддрд╛ рд╣реИ рдпрд╛ рдирд╣реАрдВ** (рдЧреЛрдкрдиреАрдп рдЬрд╛рдирдХрд╛рд░реА? рдХрдордЬреЛрд░рд┐рдпрд╛рдБ? рдкреНрд░рдХрдЯ рд╕реЗрд╡рд╛ рдореЗрдВ рдЧрд▓рдд рдХреЙрдиреНрдлрд╝рд┐рдЧрд░реЗрд╢рди?)
* **рдЕрдиреБрдорддрд┐рдпреЛрдВ рдХреА рдЬрд╛рдВрдЪ рдХрд░реЗрдВ**
* рдпрд╣рд╛рдБ рдЖрдкрдХреЛ **рдХреНрд▓рд╛рдЙрдб рдХреЗ рдЕрдВрджрд░ рдкреНрд░рддреНрдпреЗрдХ рднреВрдорд┐рдХрд╛/рдЙрдкрдпреЛрдЧрдХрд░реНрддрд╛ рдХреА рд╕рднреА рдЕрдиреБрдорддрд┐рдпреЛрдВ рдХрд╛ рдкрддрд╛ рд▓рдЧрд╛рдирд╛ рдЪрд╛рд╣рд┐рдП** рдФрд░ рд╡реЗ рдХреИрд╕реЗ рдЙрдкрдпреЛрдЧ рдХреА рдЬрд╛ рд░рд╣реА рд╣реИрдВ
* рдмрд╣реБрдд **рдЕрдзрд┐рдХ рдЙрдЪреНрдЪ рд╡рд┐рд╢реЗрд╖рд╛рдзрд┐рдХрд╛рд░ рдкреНрд░рд╛рдкреНрдд** (рд╕рдм рдХреБрдЫ рдирд┐рдпрдВрддреНрд░рд┐рдд рдХрд░реЗрдВ) рдЦрд╛рддреЗ? рдЙрддреНрдкрдиреНрди рдХреБрдВрдЬреА рдХрд╛ рдЙрдкрдпреЛрдЧ рдирд╣реАрдВ рдХрд┐рдпрд╛ рдЧрдпрд╛?... рдЗрдирдореЗрдВ рд╕реЗ рдЕрдзрд┐рдХрд╛рдВрд╢ рдЬрд╛рдВрдЪреЗрдВ рдкрд╣рд▓реЗ рд╕реЗ рд╣реА рдмреЗрдВрдЪрдорд╛рд░реНрдХ рдкрд░реАрдХреНрд╖рдг рдореЗрдВ рдХреА рдЬрд╛рдиреА рдЪрд╛рд╣рд┐рдП рдереАрдВ
* рдпрджрд┐ рдЧреНрд░рд╛рд╣рдХ OpenID рдпрд╛ SAML рдпрд╛ рдЕрдиреНрдп **рд╕рдВрдШ** рдХрд╛ рдЙрдкрдпреЛрдЧ рдХрд░ рд░рд╣рд╛ рд╣реИ рддреЛ рдЖрдкрдХреЛ рдЙрдирд╕реЗ рдЖрдЧреЗ рдХреА **рдЬрд╛рдирдХрд╛рд░реА** рдкреВрдЫрдиреА рдкрдбрд╝ рд╕рдХрддреА рд╣реИ рдХрд┐ **рдкреНрд░рддреНрдпреЗрдХ рднреВрдорд┐рдХрд╛ рдХреИрд╕реЗ рд╕реМрдВрдкрд╛ рдЬрд╛ рд░рд╣рд╛ рд╣реИ** (рдпрд╣ рд╕рдорд╛рди рдирд╣реАрдВ рд╣реИ рдХрд┐ рд╡реНрдпрд╡рд╕реНрдерд╛рдкрдХ рднреВрдорд┐рдХрд╛ 1 рдЙрдкрдпреЛрдЧрдХрд░реНрддрд╛ рдХреЛ рдпрд╛ 100 рдХреЛ рд╕реМрдВрдкрд╛ рдЧрдпрд╛ рд╣реИ)
* рдпрд╣ **рдЦреЛрдЬрдирд╛ рдкрд░реНрдпрд╛рдкреНрдд рдирд╣реАрдВ рд╣реИ** рдХрд┐ рдХреМрди рд╕реЗ рдЙрдкрдпреЛрдЧрдХрд░реНрддрд╛рдУрдВ рдХреЗ рдкрд╛рд╕ **рд╡реНрдпрд╡рд╕реНрдерд╛рдкрдХ** рдЕрдиреБрдорддрд┐рдпрд╛рдБ "\*:\*" рд╣реИрдВред рдмрд╣реБрдд рд╕рд╛рд░реА **рдЕрдиреНрдп рдЕрдиреБрдорддрд┐рдпрд╛рдБ** рд╣реИрдВ рдЬреЛ рдЙрдкрдпреЛрдЧ рдХреА рдЬрд╛рдиреЗ рд╡рд╛рд▓реА рд╕реЗрд╡рд╛рдУрдВ рдХреЗ рдЖрдзрд╛рд░ рдкрд░ рдмрд╣реБрдд **рд╕рдВрд╡реЗрджрдирд╢реАрд▓** рд╣реЛ рд╕рдХрддреА рд╣реИрдВред
* рдЗрд╕рдХреЗ рдЕрд▓рд╛рд╡рд╛, рдЕрдиреБрдорддрд┐рдпреЛрдВ рдХрд╛ рджреБрд░реБрдкрдпреЛрдЧ рдХрд░рддреЗ рд╣реБрдП **рд╕рдВрднрд╛рд╡рд┐рдд privesc** рддрд░реАрдХреЗ рд╣реИрдВред рдЗрди рд╕рднреА рдмрд╛рддреЛрдВ рдХреЛ рдзреНрдпрд╛рди рдореЗрдВ рд░рдЦрд╛ рдЬрд╛рдирд╛ рдЪрд╛рд╣рд┐рдП рдФрд░ **рдЬрд┐рддрдиреЗ рд╕рдВрднрд╡ рд╣реЛ privesc рдкрдереЛрдВ** рдХреА рд░рд┐рдкреЛрд░реНрдЯ рдХреА рдЬрд╛рдиреА рдЪрд╛рд╣рд┐рдПред
* **рдПрдХреАрдХрд░рдг рдХреА рдЬрд╛рдВрдЪ рдХрд░реЗрдВ**
* рдпрд╣ рдЕрддреНрдпрдзрд┐рдХ рд╕рдВрднрд╛рд╡рдирд╛ рд╣реИ рдХрд┐ **рдЕрдиреНрдп рдХреНрд▓рд╛рдЙрдб рдпрд╛ SaaS рдХреЗ рд╕рд╛рде рдПрдХреАрдХрд░рдг** рдХреНрд▓рд╛рдЙрдб env рдХреЗ рдЕрдВрджрд░ рдЙрдкрдпреЛрдЧ рдХрд┐рдпрд╛ рдЬрд╛ рд░рд╣рд╛ рд╣реИред
* рдЬрд┐рд╕ **рдХреНрд▓рд╛рдЙрдб рдХрд╛ рдЖрдк рдСрдбрд┐рдЯ рдХрд░ рд░рд╣реЗ рд╣реИрдВ** рдЙрд╕рдХреЗ рдПрдХреАрдХрд░рдг рдХреЗ рд▓рд┐рдП рдЖрдкрдХреЛ рд╕реВрдЪрд┐рдд рдХрд░рдирд╛ рдЪрд╛рд╣рд┐рдП **рдХрд┐рд╕рдХреЗ рдкрд╛рд╕ рдЙрд╕ рдПрдХреАрдХрд░рдг рдХрд╛ (рджреБрд░реБрдкрдпреЛрдЧ) рдХрд░рдиреЗ рдХрд╛ рдЕрдзрд┐рдХрд╛рд░ рд╣реИ** рдФрд░ рдЖрдкрдХреЛ рдкреВрдЫрдирд╛ рдЪрд╛рд╣рд┐рдП **рдХрд┐рддрдирд╛ рд╕рдВрд╡реЗрджрдирд╢реАрд▓** рд╣реИ рдХрд┐рдпрд╛ рдЬрд╛ рд░рд╣рд╛ рдХрд╛рд░реНрдпред\
рдЙрджрд╛рд╣рд░рдг рдХреЗ рд▓рд┐рдП, рдХреМрди AWS рдмрдХреЗрдЯ рдореЗрдВ рд▓рд┐рдЦ рд╕рдХрддрд╛ рд╣реИ рдЬрд╣рд╛рдБ GCP рдбреЗрдЯрд╛ рдкреНрд░рд╛рдкреНрдд рдХрд░ рд░рд╣рд╛ рд╣реИ (рдкреВрдЫреЗрдВ рдХрд┐ GCP рдореЗрдВ рдЙрд╕ рдбреЗрдЯрд╛ рдХреЛ рд╕рдВрднрд╛рд▓рдиреЗ рдореЗрдВ рдХрд╛рд░реНрдп рдХрд┐рддрдирд╛ рд╕рдВрд╡реЗрджрдирд╢реАрд▓ рд╣реИ)ред
* рдЬрд┐рд╕ **рдХреНрд▓рд╛рдЙрдб рдХрд╛ рдЖрдк рдСрдбрд┐рдЯ рдХрд░ рд░рд╣реЗ рд╣реИрдВ** рдХреЗ рдЕрдВрджрд░ рдмрд╛рд╣рд░реА рдкреНрд▓реЗрдЯрдлрд╛рд░реНрдореЛрдВ рд╕реЗ рдПрдХреАрдХрд░рдг рдХреЗ рд▓рд┐рдП, рдЖрдкрдХреЛ рдкреВрдЫрдирд╛ рдЪрд╛рд╣рд┐рдП **рдХрд┐рд╕рдХреЗ рдкрд╛рд╕ рдмрд╛рд╣рд░реА рд░реВрдк рд╕реЗ рдЙрд╕ рдПрдХреАрдХрд░рдг рдХрд╛ (рджреБрд░реБрдкрдпреЛрдЧ) рдХрд░рдиреЗ рдХрд╛ рдЕрдзрд┐рдХрд╛рд░ рд╣реИ** рдФрд░ рдпрд╣ рдЬрд╛рдВрдЪреЗрдВ рдХрд┐ рдЙрд╕ рдбреЗрдЯрд╛ рдХрд╛ рдЙрдкрдпреЛрдЧ рдХреИрд╕реЗ рдХрд┐рдпрд╛ рдЬрд╛ рд░рд╣рд╛ рд╣реИред\
рдЙрджрд╛рд╣рд░рдг рдХреЗ рд▓рд┐рдП, рдпрджрд┐ рдПрдХ рд╕реЗрд╡рд╛ GCR рдореЗрдВ рд╣реЛрд╕реНрдЯ рдХреА рдЧрдИ Docker рдЫрд╡рд┐ рдХрд╛ рдЙрдкрдпреЛрдЧ рдХрд░ рд░рд╣реА рд╣реИ, рддреЛ рдЖрдкрдХреЛ рдкреВрдЫрдирд╛ рдЪрд╛рд╣рд┐рдП рдХрд┐ рдЗрд╕реЗ рд╕рдВрд╢реЛрдзрд┐рдд рдХрд░рдиреЗ рдХрд╛ рдХрд┐рд╕рдХреЗ рдкрд╛рд╕ рдЕрдзрд┐рдХрд╛рд░ рд╣реИ рдФрд░ рдЬрдм рдЗрд╕реЗ AWS рдХреНрд▓рд╛рдЙрдб рдХреЗ рдЕрдВрджрд░ рдирд┐рд╖реНрдкрд╛рджрд┐рдд рдХрд┐рдпрд╛ рдЬрд╛рддрд╛ рд╣реИ рддреЛ рдЙрд╕ рдЫрд╡рд┐ рдХреЛ рдХреМрди рд╕реА рд╕рдВрд╡реЗрджрдирд╢реАрд▓ рдЬрд╛рдирдХрд╛рд░реА рдФрд░ рдкрд╣реБрдВрдЪ рдкреНрд░рд╛рдкреНрдд рд╣реЛрдЧреАред

## Multi-Cloud tools

рдХрдИ рдЙрдкрдХрд░рдг рд╣реИрдВ рдЬреЛ рд╡рд┐рднрд┐рдиреНрди рдХреНрд▓рд╛рдЙрдб рд╡рд╛рддрд╛рд╡рд░рдг рдХрд╛ рдкрд░реАрдХреНрд╖рдг рдХрд░рдиреЗ рдХреЗ рд▓рд┐рдП рдЙрдкрдпреЛрдЧ рдХрд┐рдП рдЬрд╛ рд╕рдХрддреЗ рд╣реИрдВред рдЗрд╕ рдЕрдиреБрднрд╛рдЧ рдореЗрдВ рд╕реНрдерд╛рдкрдирд╛ рдХреЗ рдЪрд░рдг рдФрд░ рд▓рд┐рдВрдХ рджрд┐рдП рдЬрд╛рдПрдВрдЧреЗред

### [PurplePanda](https://github.com/carlospolop/purplepanda)

рдПрдХ рдЙрдкрдХрд░рдг рдЬреЛ **рдХреНрд▓рд╛рдЙрдб рдФрд░ рдХреНрд▓рд╛рдЙрдб/SaaS рдореЗрдВ рдЦрд░рд╛рдм рдХреЙрдиреНрдлрд╝рд┐рдЧрд░реЗрд╢рди рдФрд░ privesc рдкрдереЛрдВ рдХреА рдкрд╣рдЪрд╛рди рдХрд░рдиреЗ рдХреЗ рд▓рд┐рдП рд╣реИред**

{% tabs %}
{% tab title="Install" %}
```bash
# You need to install and run neo4j also
git clone https://github.com/carlospolop/PurplePanda
cd PurplePanda
python3 -m venv .
source bin/activate
python3 -m pip install -r requirements.txt
export PURPLEPANDA_NEO4J_URL="bolt://neo4j@localhost:7687"
export PURPLEPANDA_PWD="neo4j_pwd_4_purplepanda"
python3 main.py -h # Get help
```
{% endtab %}

{% tab title="рдЬреАрд╕реАрдкреА" %}
```bash
export GOOGLE_DISCOVERY=$(echo 'google:
- file_path: ""

- file_path: ""
service_account_id: "some-sa-email@sidentifier.iam.gserviceaccount.com"' | base64)

python3 main.py -a -p google #Get basic info of the account to check it's correctly configured
python3 main.py -e -p google #Enumerate the env
```
{% endtab %}
{% endtabs %}

### [Prowler](https://github.com/prowler-cloud/prowler)

рдпрд╣ **AWS, GCP & Azure** рдХрд╛ рд╕рдорд░реНрдерди рдХрд░рддрд╛ рд╣реИред рдкреНрд░рддреНрдпреЗрдХ рдкреНрд░рджрд╛рддрд╛ рдХреЛ рдХреЙрдиреНрдлрд╝рд┐рдЧрд░ рдХрд░рдиреЗ рдХреЗ рд▓рд┐рдП рджреЗрдЦреЗрдВ [https://docs.prowler.cloud/en/latest/#aws](https://docs.prowler.cloud/en/latest/#aws)
```bash
# Install
pip install prowler
prowler -v

# Run
prowler <provider>
# Example
prowler aws --profile custom-profile [-M csv json json-asff html]

# Get info about checks & services
prowler <provider> --list-checks
prowler <provider> --list-services
```
### [CloudSploit](https://github.com/aquasecurity/cloudsploit)

AWS, Azure, Github, Google, Oracle, Alibaba

{% tabs %}
{% tab title="рдЗрдВрд╕реНрдЯреЙрд▓ рдХрд░реЗрдВ" %}
```bash
# Install
git clone https://github.com/aquasecurity/cloudsploit.git
cd cloudsploit
npm install
./index.js -h
## Docker instructions in github
```
{% endtab %}

{% tab title="GCP" %}
```bash
## You need to have creds for a service account and set them in config.js file
./index.js --cloud google --config </abs/path/to/config.js>
```
{% endtab %}
{% endtabs %}

### [ScoutSuite](https://github.com/nccgroup/ScoutSuite)

AWS, Azure, GCP, Alibaba Cloud, Oracle Cloud Infrastructure

{% tabs %}
{% tab title="рдЗрдВрд╕реНрдЯреЙрд▓ рдХрд░реЗрдВ" %}
```bash
mkdir scout; cd scout
virtualenv -p python3 venv
source venv/bin/activate
pip install scoutsuite
scout --help
## Using Docker: https://github.com/nccgroup/ScoutSuite/wiki/Docker-Image
```
{% endtab %}

{% tab title="GCP" %}
```bash
scout gcp --report-dir /tmp/gcp --user-account --all-projects
## use "--service-account KEY_FILE" instead of "--user-account" to use a service account

SCOUT_FOLDER_REPORT="/tmp"
for pid in $(gcloud projects list --format="value(projectId)"); do
echo "================================================"
echo "Checking $pid"
mkdir "$SCOUT_FOLDER_REPORT/$pid"
scout gcp --report-dir "$SCOUT_FOLDER_REPORT/$pid" --no-browser --user-account --project-id "$pid"
done
```
{% endtab %}
{% endtabs %}

### [Steampipe](https://github.com/turbot)

{% tabs %}
{% tab title="рдЗрдВрд╕реНрдЯреЙрд▓ рдХрд░реЗрдВ" %}
Steampipe рдбрд╛рдЙрдирд▓реЛрдб рдФрд░ рдЗрдВрд╕реНрдЯреЙрд▓ рдХрд░реЗрдВ ([https://steampipe.io/downloads](https://steampipe.io/downloads)). рдпрд╛ Brew рдХрд╛ рдЙрдкрдпреЛрдЧ рдХрд░реЗрдВ:
```
brew tap turbot/tap
brew install steampipe
```
{% endtab %}

{% tab title="GCP" %}
```bash
# Install gcp plugin
steampipe plugin install gcp

# Use https://github.com/turbot/steampipe-mod-gcp-compliance.git
git clone https://github.com/turbot/steampipe-mod-gcp-compliance.git
cd steampipe-mod-gcp-compliance
# To run all the checks from the dashboard
steampipe dashboard
# To run all the checks from rhe cli
steampipe check all
```
<details>

<summary>рд╕рднреА рдкреНрд░реЛрдЬреЗрдХреНрдЯреНрд╕ рдХреА рдЬрд╛рдВрдЪ рдХрд░реЗрдВ</summary>

рд╕рднреА рдкреНрд░реЛрдЬреЗрдХреНрдЯреНрд╕ рдХреА рдЬрд╛рдВрдЪ рдХрд░рдиреЗ рдХреЗ рд▓рд┐рдП, рдЖрдкрдХреЛ `gcp.spc` рдлрд╝рд╛рдЗрд▓ рдЙрддреНрдкрдиреНрди рдХрд░рдиреА рд╣реЛрдЧреА рдЬреЛ рдкрд░реАрдХреНрд╖рдг рдХреЗ рд▓рд┐рдП рд╕рднреА рдкреНрд░реЛрдЬреЗрдХреНрдЯреНрд╕ рдХреЛ рдЗрдВрдЧрд┐рдд рдХрд░рддреА рд╣реИред рдЖрдк рдмрд╕ рдирд┐рдореНрдирд▓рд┐рдЦрд┐рдд рд╕реНрдХреНрд░рд┐рдкреНрдЯ рд╕реЗ рд╕рдВрдХреЗрддреЛрдВ рдХрд╛ рдкрд╛рд▓рди рдХрд░ рд╕рдХрддреЗ рд╣реИрдВред
```bash
FILEPATH="/tmp/gcp.spc"
rm -rf "$FILEPATH" 2>/dev/null

# Generate a json like object for each project
for pid in $(gcloud projects list --format="value(projectId)"); do
echo "connection \"gcp_$(echo -n $pid | tr "-" "_" )\" {
plugin  = \"gcp\"
project = \"$pid\"
}" >> "$FILEPATH"
done

# Generate the aggragator to call
echo 'connection "gcp_all" {
plugin      = "gcp"
type        = "aggregator"
connections = ["gcp_*"]
}' >> "$FILEPATH"

echo "Copy $FILEPATH in ~/.steampipe/config/gcp.spc if it was correctly generated"
```
</details>

**рдЕрдиреНрдп GCP рдЕрдВрддрд░реНрджреГрд╖реНрдЯрд┐** (рд╕реЗрд╡рд╛рдУрдВ рдХреА рдЧрдгрдирд╛ рдХреЗ рд▓рд┐рдП рдЙрдкрдпреЛрдЧреА) рдХреА рдЬрд╛рдВрдЪ рдХрд░рдиреЗ рдХреЗ рд▓рд┐рдП рдЙрдкрдпреЛрдЧ рдХрд░реЗрдВ: [https://github.com/turbot/steampipe-mod-gcp-insights](https://github.com/turbot/steampipe-mod-gcp-insights)

Terraform GCP рдХреЛрдб рдХреА рдЬрд╛рдВрдЪ рдХрд░рдиреЗ рдХреЗ рд▓рд┐рдП: [https://github.com/turbot/steampipe-mod-terraform-gcp-compliance](https://github.com/turbot/steampipe-mod-terraform-gcp-compliance)

Steampipe рдХреЗ рдЕрдзрд┐рдХ GCP рдкреНрд▓рдЧрдЗрдиреНрд╕: [https://github.com/turbot?q=gcp](https://github.com/turbot?q=gcp)
{% endtab %}

{% tab title="AWS" %}
```bash
# Install aws plugin
steampipe plugin install aws

# Modify the spec indicating in "profile" the profile name to use
nano ~/.steampipe/config/aws.spc

# Get some info on how the AWS account is being used
git clone https://github.com/turbot/steampipe-mod-aws-insights.git
cd steampipe-mod-aws-insights
steampipe dashboard

# Get the services exposed to the internet
git clone https://github.com/turbot/steampipe-mod-aws-perimeter.git
cd steampipe-mod-aws-perimeter
steampipe dashboard

# Run the benchmarks
git clone https://github.com/turbot/steampipe-mod-aws-compliance
cd steampipe-mod-aws-compliance
steampipe dashboard # To see results in browser
steampipe check all --export=/tmp/output4.json
```
To check Terraform AWS code: [https://github.com/turbot/steampipe-mod-terraform-aws-compliance](https://github.com/turbot/steampipe-mod-terraform-aws-compliance)

More AWS plugins of Steampipe: [https://github.com/orgs/turbot/repositories?q=aws](https://github.com/orgs/turbot/repositories?q=aws)
{% endtab %}
{% endtabs %}

### [~~cs-suite~~](https://github.com/SecurityFTW/cs-suite)

AWS, GCP, Azure, DigitalOcean.\
рдпрд╣ python2.7 рдХреА рдЖрд╡рд╢реНрдпрдХрддрд╛ рд╣реИ рдФрд░ рдпрд╣ рдЕрдкреНрд░рдмрдВрдзрд┐рдд рдкреНрд░рддреАрдд рд╣реЛрддрд╛ рд╣реИред

### Nessus

Nessus рдореЗрдВ _**Audit Cloud Infrastructure**_ рд╕реНрдХреИрди рд╣реИ рдЬреЛ рд╕рдорд░реНрдерди рдХрд░рддрд╛ рд╣реИ: AWS, Azure, Office 365, Rackspace, Salesforceред **Azure** рдореЗрдВ **Client Id** рдкреНрд░рд╛рдкреНрдд рдХрд░рдиреЗ рдХреЗ рд▓рд┐рдП рдХреБрдЫ рдЕрддрд┐рд░рд┐рдХреНрдд рдХреЙрдиреНрдлрд╝рд┐рдЧрд░реЗрд╢рди рдХреА рдЖрд╡рд╢реНрдпрдХрддрд╛ рд╣реИред

### [**cloudlist**](https://github.com/projectdiscovery/cloudlist)

Cloudlist рдПрдХ **multi-cloud tool for getting Assets** (Hostnames, IP Addresses) рд╣реИ рдЬреЛ Cloud Providers рд╕реЗ рдкреНрд░рд╛рдкреНрдд рдХрд░рддрд╛ рд╣реИред

{% tabs %}
{% tab title="Cloudlist" %}
```bash
cd /tmp
wget https://github.com/projectdiscovery/cloudlist/releases/latest/download/cloudlist_1.0.1_macOS_arm64.zip
unzip cloudlist_1.0.1_macOS_arm64.zip
chmod +x cloudlist
sudo mv cloudlist /usr/local/bin
```
{% endtab %}

{% tab title="рджреВрд╕рд░рд╛ рдЯреИрдм" %}
```bash
## For GCP it requires service account JSON credentials
cloudlist -config </path/to/config>
```
{% endtab %}
{% endtabs %}

### [**рдХрд╛рд░реНрдЯреЛрдЧреНрд░рд╛рдлреА**](https://github.com/lyft/cartography)

рдХрд╛рд░реНрдЯреЛрдЧреНрд░рд╛рдлреА рдПрдХ Python рдЙрдкрдХрд░рдг рд╣реИ рдЬреЛ рдмреБрдирд┐рдпрд╛рджреА рдврд╛рдВрдЪреЗ рдХреЗ рд╕рдВрдкрддреНрддрд┐рдпреЛрдВ рдФрд░ рдЙрдирдХреЗ рдмреАрдЪ рдХреЗ рд╕рдВрдмрдВрдзреЛрдВ рдХреЛ рдПрдХ рд╕рд╣рдЬ рдЧреНрд░рд╛рдл рджреГрд╢реНрдп рдореЗрдВ рд╕рдореЗрдХрд┐рдд рдХрд░рддрд╛ рд╣реИ, рдЬреЛ Neo4j рдбреЗрдЯрд╛рдмреЗрд╕ рджреНрд╡рд╛рд░рд╛ рд╕рдВрдЪрд╛рд▓рд┐рдд рд╣реЛрддрд╛ рд╣реИред

{% tabs %}
{% tab title="рд╕реНрдерд╛рдкрд┐рдд рдХрд░реЗрдВ" %}
```bash
# Installation
docker image pull ghcr.io/lyft/cartography
docker run --platform linux/amd64 ghcr.io/lyft/cartography cartography --help
## Install a Neo4j DB version 3.5.*
```
{% endtab %}

{% tab title="GCP" %}
```bash
docker run --platform linux/amd64 \
--volume "$HOME/.config/gcloud/application_default_credentials.json:/application_default_credentials.json" \
-e GOOGLE_APPLICATION_CREDENTIALS="/application_default_credentials.json" \
-e NEO4j_PASSWORD="s3cr3t" \
ghcr.io/lyft/cartography  \
--neo4j-uri bolt://host.docker.internal:7687 \
--neo4j-password-env-var NEO4j_PASSWORD \
--neo4j-user neo4j


# It only checks for a few services inside GCP (https://lyft.github.io/cartography/modules/gcp/index.html)
## Cloud Resource Manager
## Compute
## DNS
## Storage
## Google Kubernetes Engine
### If you can run starbase or purplepanda you will get more info
```
{% endtab %}
{% endtabs %}

### [**starbase**](https://github.com/JupiterOne/starbase)

Starbase рд╕реЗрд╡рд╛рдУрдВ рдФрд░ рдкреНрд░рдгрд╛рд▓рд┐рдпреЛрдВ рд╕реЗ рд╕рдВрдкрддреНрддрд┐рдпреЛрдВ рдФрд░ рд╕рдВрдмрдВрдзреЛрдВ рдХреЛ рдПрдХрддреНрд░ рдХрд░рддрд╛ рд╣реИ, рдЬрд┐рд╕рдореЗрдВ рдХреНрд▓рд╛рдЙрдб рдЕрд╡рд╕рдВрд░рдЪрдирд╛, SaaS рдЕрдиреБрдкреНрд░рдпреЛрдЧ, рд╕реБрд░рдХреНрд╖рд╛ рдирд┐рдпрдВрддреНрд░рдг, рдФрд░ рдЕрдзрд┐рдХ рд╢рд╛рдорд┐рд▓ рд╣реИрдВ, рдЬреЛ Neo4j рдбреЗрдЯрд╛рдмреЗрд╕ рджреНрд╡рд╛рд░рд╛ рд╕рдорд░реНрдерд┐рдд рдПрдХ рд╕рд╣рдЬ рдЧреНрд░рд╛рдл рджреГрд╢реНрдп рдореЗрдВ рд╣реИред

{% tabs %}
{% tab title="Install" %}
```bash
# You are going to need Node version 14, so install nvm following https://tecadmin.net/install-nvm-macos-with-homebrew/
npm install --global yarn
nvm install 14
git clone https://github.com/JupiterOne/starbase.git
cd starbase
nvm use 14
yarn install
yarn starbase --help
# Configure manually config.yaml depending on the env to analyze
yarn starbase setup
yarn starbase run

# Docker
git clone https://github.com/JupiterOne/starbase.git
cd starbase
cp config.yaml.example config.yaml
# Configure manually config.yaml depending on the env to analyze
docker build --no-cache -t starbase:latest .
docker-compose run starbase setup
docker-compose run starbase run
```
{% endtab %}

{% tab title="GCP" %}
```yaml
## Config for GCP
### Check out: https://github.com/JupiterOne/graph-google-cloud/blob/main/docs/development.md
### It requires service account credentials

integrations:
-
name: graph-google-cloud
instanceId: testInstanceId
directory: ./.integrations/graph-google-cloud
gitRemoteUrl: https://github.com/JupiterOne/graph-google-cloud.git
config:
SERVICE_ACCOUNT_KEY_FILE: '{Check https://github.com/JupiterOne/graph-google-cloud/blob/main/docs/development.md#service_account_key_file-string}'
PROJECT_ID: ""
FOLDER_ID: ""
ORGANIZATION_ID: ""
CONFIGURE_ORGANIZATION_PROJECTS: false

storage:
engine: neo4j
config:
username: neo4j
password: s3cr3t
uri: bolt://localhost:7687
#Consider using host.docker.internal if from docker
```
{% endtab %}
{% endtabs %}

### [**SkyArk**](https://github.com/cyberark/SkyArk)

рд╕реНрдХреИрди рдХрд┐рдП рдЧрдП AWS рдпрд╛ Azure рд╡рд╛рддрд╛рд╡рд░рдг рдореЗрдВ рд╕рдмрд╕реЗ рд╡рд┐рд╢реЗрд╖рд╛рдзрд┐рдХрд╛рд░ рдкреНрд░рд╛рдкреНрдд рдЙрдкрдпреЛрдЧрдХрд░реНрддрд╛рдУрдВ рдХрд╛ рдкрддрд╛ рд▓рдЧрд╛рдПрдВ, рдЬрд┐рд╕рдореЗрдВ AWS Shadow Admins рд╢рд╛рдорд┐рд▓ рд╣реИрдВред рдпрд╣ powershell рдХрд╛ рдЙрдкрдпреЛрдЧ рдХрд░рддрд╛ рд╣реИред
```powershell
Import-Module .\SkyArk.ps1 -force
Start-AzureStealth

# in the Cloud Console
IEX (New-Object Net.WebClient).DownloadString('https://raw.githubusercontent.com/cyberark/SkyArk/master/AzureStealth/AzureStealth.ps1')
Scan-AzureAdmins
```
### [Cloud Brute](https://github.com/0xsha/CloudBrute)

рдПрдХ рдЙрдкрдХрд░рдг рдЬреЛ рд╢реАрд░реНрд╖ рдХреНрд▓рд╛рдЙрдб рдкреНрд░рджрд╛рддрд╛рдУрдВ (Amazon, Google, Microsoft, DigitalOcean, Alibaba, Vultr, Linode) рдкрд░ рдПрдХ рдХрдВрдкрдиреА (рд▓рдХреНрд╖реНрдп) рдХреА рдЕрд╡рд╕рдВрд░рдЪрдирд╛, рдлрд╝рд╛рдЗрд▓реЛрдВ рдФрд░ рдРрдкреНрд╕ рдХреЛ рдЦреЛрдЬрдиреЗ рдХреЗ рд▓рд┐рдП рд╣реИред

### [CloudFox](https://github.com/BishopFox/cloudfox)

* CloudFox рдПрдХ рдЙрдкрдХрд░рдг рд╣реИ рдЬреЛ рдХреНрд▓рд╛рдЙрдб рдЕрд╡рд╕рдВрд░рдЪрдирд╛ рдореЗрдВ рдЙрдкрдпреЛрдЧ рдХрд┐рдП рдЬрд╛ рд╕рдХрдиреЗ рд╡рд╛рд▓реЗ рд╣рдорд▓реЗ рдХреЗ рд░рд╛рд╕реНрддреЛрдВ рдХреЛ рдЦреЛрдЬрдиреЗ рдХреЗ рд▓рд┐рдП рд╣реИ (рд╡рд░реНрддрдорд╛рди рдореЗрдВ рдХреЗрд╡рд▓ AWS рдФрд░ Azure рдХрд╛ рд╕рдорд░реНрдерди рдХрд┐рдпрд╛ рдЧрдпрд╛ рд╣реИ, GCP рдЖрдиреЗ рд╡рд╛рд▓рд╛ рд╣реИ)ред
* рдпрд╣ рдПрдХ рдПрдиреНрдпреВрдорд░реЗрд╢рди рдЙрдкрдХрд░рдг рд╣реИ рдЬрд┐рд╕реЗ рдореИрдиреБрдЕрд▓ pentesting рдХреЗ рдкреВрд░рдХ рдХреЗ рд░реВрдк рдореЗрдВ рдбрд┐рдЬрд╝рд╛рдЗрди рдХрд┐рдпрд╛ рдЧрдпрд╛ рд╣реИред
* рдпрд╣ рдХреНрд▓рд╛рдЙрдб рд╡рд╛рддрд╛рд╡рд░рдг рдХреЗ рднреАрддрд░ рдХреЛрдИ рдбреЗрдЯрд╛ рдирд╣реАрдВ рдмрдирд╛рддрд╛ рдпрд╛ рд╕рдВрд╢реЛрдзрд┐рдд рдирд╣реАрдВ рдХрд░рддрд╛ рд╣реИред

### More lists of cloud security tools

* [https://github.com/RyanJarv/awesome-cloud-sec](https://github.com/RyanJarv/awesome-cloud-sec)

## Google

### GCP

{% content-ref url="gcp-security/" %}
[gcp-security](gcp-security/)
{% endcontent-ref %}

### Workspace

{% content-ref url="workspace-security/" %}
[workspace-security](workspace-security/)
{% endcontent-ref %}

## AWS

{% content-ref url="aws-security/" %}
[aws-security](aws-security/)
{% endcontent-ref %}

## Azure

{% content-ref url="azure-security/" %}
[azure-security](azure-security/)
{% endcontent-ref %}

### Attack Graph

[**Stormspotter** ](https://github.com/Azure/Stormspotter)Azure рд╕рджрд╕реНрдпрддрд╛ рдореЗрдВ рд╕рдВрд╕рд╛рдзрдиреЛрдВ рдХрд╛ тАЬрд╣рдорд▓рд╛ рдЧреНрд░рд╛рдлтАЭ рдмрдирд╛рддрд╛ рд╣реИред рдпрд╣ рд░реЗрдб рдЯреАрдореЛрдВ рдФрд░ pentesters рдХреЛ рд╣рдорд▓реЗ рдХреА рд╕рддрд╣ рдФрд░ рдПрдХ рдЯреЗрдиреЗрдЯ рдХреЗ рднреАрддрд░ рдкрд┐рд╡рдЯ рдЕрд╡рд╕рд░реЛрдВ рдХреЛ рджреГрд╢реНрдп рдмрдирд╛рдиреЗ рдореЗрдВ рд╕рдХреНрд╖рдо рдмрдирд╛рддрд╛ рд╣реИ, рдФрд░ рдЖрдкрдХреЗ рд░рдХреНрд╖рдХреЛрдВ рдХреЛ рддреЗрдЬреА рд╕реЗ рдЙрдиреНрдореБрдЦ рдФрд░ рдШрдЯрдирд╛ рдкреНрд░рддрд┐рдХреНрд░рд┐рдпрд╛ рдХрд╛рд░реНрдп рдХреЛ рдкреНрд░рд╛рдердорд┐рдХрддрд╛ рджреЗрдиреЗ рдХреЗ рд▓рд┐рдП рд╕реБрдкрд░рдЪрд╛рд░реНрдЬ рдХрд░рддрд╛ рд╣реИред

### Office365

рдЖрдкрдХреЛ **Global Admin** рдпрд╛ рдХрдо рд╕реЗ рдХрдо **Global Admin Reader** рдХреА рдЖрд╡рд╢реНрдпрдХрддрд╛ рд╣реИ (рд▓реЗрдХрд┐рди рдзреНрдпрд╛рди рджреЗрдВ рдХрд┐ Global Admin Reader рдереЛрдбрд╝рд╛ рд╕реАрдорд┐рдд рд╣реИ)ред рд╣рд╛рд▓рд╛рдБрдХрд┐, рдпреЗ рд╕реАрдорд╛рдПрдБ рдХреБрдЫ PS рдореЙрдбреНрдпреВрд▓ рдореЗрдВ рдкреНрд░рдХрдЯ рд╣реЛрддреА рд╣реИрдВ рдФрд░ **рд╡реЗрдм рдПрдкреНрд▓рд┐рдХреЗрд╢рди** рдХреЗ рдорд╛рдзреНрдпрдо рд╕реЗ рд╕реБрд╡рд┐рдзрд╛рдУрдВ рддрдХ рдкрд╣реБрдБрдЪрдХрд░ рдмрд╛рдИрдкрд╛рд╕ рдХреА рдЬрд╛ рд╕рдХрддреА рд╣реИрдВред

{% hint style="success" %}
Learn & practice AWS Hacking:<img src="../.gitbook/assets/image (1).png" alt="" data-size="line">[**HackTricks Training AWS Red Team Expert (ARTE)**](https://training.hacktricks.xyz/courses/arte)<img src="../.gitbook/assets/image (1).png" alt="" data-size="line">\
Learn & practice GCP Hacking: <img src="../.gitbook/assets/image (2).png" alt="" data-size="line">[**HackTricks Training GCP Red Team Expert (GRTE)**<img src="../.gitbook/assets/image (2).png" alt="" data-size="line">](https://training.hacktricks.xyz/courses/grte)

<details>

<summary>Support HackTricks</summary>

* Check the [**subscription plans**](https://github.com/sponsors/carlospolop)!
* **Join the** ЁЯТм [**Discord group**](https://discord.gg/hRep4RUj7f) or the [**telegram group**](https://t.me/peass) or **follow** us on **Twitter** ЁЯРж [**@hacktricks\_live**](https://twitter.com/hacktricks\_live)**.**
* **Share hacking tricks by submitting PRs to the** [**HackTricks**](https://github.com/carlospolop/hacktricks) and [**HackTricks Cloud**](https://github.com/carlospolop/hacktricks-cloud) github repos.

</details>
{% endhint %}
